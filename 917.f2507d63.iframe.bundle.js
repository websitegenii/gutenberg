"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[917],{"./packages/api-fetch/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return api_fetch_build_module}});var build_module=__webpack_require__("./packages/i18n/build-module/index.js");var nonce=function createNonceMiddleware(nonce){const middleware=(options,next)=>{const{headers:headers={}}=options;for(const headerName in headers)if("x-wp-nonce"===headerName.toLowerCase()&&headers[headerName]===middleware.nonce)return next(options);return next({...options,headers:{...headers,"X-WP-Nonce":middleware.nonce}})};return middleware.nonce=nonce,middleware};var namespace_endpoint=(options,next)=>{let namespaceTrimmed,endpointTrimmed,path=options.path;return"string"==typeof options.namespace&&"string"==typeof options.endpoint&&(namespaceTrimmed=options.namespace.replace(/^\/|\/$/g,""),endpointTrimmed=options.endpoint.replace(/^\//,""),path=endpointTrimmed?namespaceTrimmed+"/"+endpointTrimmed:namespaceTrimmed),delete options.namespace,delete options.endpoint,next({...options,path:path})};var root_url=rootURL=>(options,next)=>namespace_endpoint(options,(optionsWithPath=>{let apiRoot,url=optionsWithPath.url,path=optionsWithPath.path;return"string"==typeof path&&(apiRoot=rootURL,-1!==rootURL.indexOf("?")&&(path=path.replace("?","&")),path=path.replace(/^\//,""),"string"==typeof apiRoot&&-1!==apiRoot.indexOf("?")&&(path=path.replace("?","&")),url=apiRoot+path),next({...optionsWithPath,url:url})}));function normalizePath(path){const splitted=path.split("?"),query=splitted[1],base=splitted[0];return query?base+"?"+query.split("&").map((entry=>entry.split("="))).map((pair=>pair.map(decodeURIComponent))).sort(((a,b)=>a[0].localeCompare(b[0]))).map((pair=>pair.map(encodeURIComponent))).map((pair=>pair.join("="))).join("&"):base}var get_query_args=__webpack_require__("./packages/url/build-module/get-query-args.js"),add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js");function prepareResponse(responseData,parse){return Promise.resolve(parse?responseData.body:new window.Response(JSON.stringify(responseData.body),{status:200,statusText:"OK",headers:responseData.headers}))}var preloading=function createPreloadingMiddleware(preloadedData){const cache=Object.fromEntries(Object.entries(preloadedData).map((_ref=>{let[path,data]=_ref;return[normalizePath(path),data]})));return(options,next)=>{const{parse:parse=!0}=options;let rawPath=options.path;if(!rawPath&&options.url){const{rest_route:pathFromQuery,...queryArgs}=(0,get_query_args.w)(options.url);"string"==typeof pathFromQuery&&(rawPath=(0,add_query_args.f)(pathFromQuery,queryArgs))}if("string"!=typeof rawPath)return next(options);const method=options.method||"GET",path=normalizePath(rawPath);if("GET"===method&&cache[path]){const cacheData=cache[path];return delete cache[path],prepareResponse(cacheData,!!parse)}if("OPTIONS"===method&&cache[method]&&cache[method][path]){const cacheData=cache[method][path];return delete cache[method][path],prepareResponse(cacheData,!!parse)}return next(options)}};const modifyQuery=(_ref,queryArgs)=>{let{path:path,url:url,...options}=_ref;return{...options,url:url&&(0,add_query_args.f)(url,queryArgs),path:path&&(0,add_query_args.f)(path,queryArgs)}},parseResponse=response=>response.json?response.json():Promise.reject(response),getNextPageUrl=response=>{const{next:next}=(linkHeader=>{if(!linkHeader)return{};const match=linkHeader.match(/<([^>]+)>; rel="next"/);return match?{next:match[1]}:{}})(response.headers.get("link"));return next};var fetch_all_middleware=async(options,next)=>{if(!1===options.parse)return next(options);if(!(options=>{const pathIsUnbounded=!!options.path&&-1!==options.path.indexOf("per_page=-1"),urlIsUnbounded=!!options.url&&-1!==options.url.indexOf("per_page=-1");return pathIsUnbounded||urlIsUnbounded})(options))return next(options);const response=await api_fetch_build_module({...modifyQuery(options,{per_page:100}),parse:!1}),results=await parseResponse(response);if(!Array.isArray(results))return results;let nextPage=getNextPageUrl(response);if(!nextPage)return results;let mergedResults=[].concat(results);for(;nextPage;){const nextResponse=await api_fetch_build_module({...options,path:void 0,url:nextPage,parse:!1}),nextResults=await parseResponse(nextResponse);mergedResults=mergedResults.concat(nextResults),nextPage=getNextPageUrl(nextResponse)}return mergedResults};const OVERRIDE_METHODS=new Set(["PATCH","PUT","DELETE"]),DEFAULT_METHOD="GET";function hasQueryArg(url,arg){return void 0!==function getQueryArg(url,arg){return(0,get_query_args.w)(url)[arg]}(url,arg)}const response_parseResponse=function(response){let shouldParseResponse=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return shouldParseResponse?204===response.status?null:response.json?response.json():Promise.reject(response):response},parseJsonAndNormalizeError=response=>{const invalidJsonError={code:"invalid_json",message:(0,build_module.__)("The response is not a valid JSON response.")};if(!response||!response.json)throw invalidJsonError;return response.json().catch((()=>{throw invalidJsonError}))},parseResponseAndNormalizeError=function(response){let shouldParseResponse=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Promise.resolve(response_parseResponse(response,shouldParseResponse)).catch((res=>parseAndThrowError(res,shouldParseResponse)))};function parseAndThrowError(response){let shouldParseResponse=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!shouldParseResponse)throw response;return parseJsonAndNormalizeError(response).then((error=>{const unknownError={code:"unknown_error",message:(0,build_module.__)("An unknown error occurred.")};throw error||unknownError}))}var media_upload=(options,next)=>{if(!function isMediaUploadRequest(options){const isCreateMethod=!!options.method&&"POST"===options.method;return(!!options.path&&-1!==options.path.indexOf("/wp/v2/media")||!!options.url&&-1!==options.url.indexOf("/wp/v2/media"))&&isCreateMethod}(options))return next(options);let retries=0;const postProcess=attachmentId=>(retries++,next({path:`/wp/v2/media/${attachmentId}/post-process`,method:"POST",data:{action:"create-image-subsizes"},parse:!1}).catch((()=>retries<5?postProcess(attachmentId):(next({path:`/wp/v2/media/${attachmentId}?force=true`,method:"DELETE"}),Promise.reject()))));return next({...options,parse:!1}).catch((response=>{const attachmentId=response.headers.get("x-wp-upload-attachment-id");return response.status>=500&&response.status<600&&attachmentId?postProcess(attachmentId).catch((()=>!1!==options.parse?Promise.reject({code:"post_process",message:(0,build_module.__)("Media upload failed. If this is a photo or a large image, please scale it down and try again.")}):Promise.reject(response))):parseAndThrowError(response,options.parse)})).then((response=>parseResponseAndNormalizeError(response,options.parse)))};const DEFAULT_HEADERS={Accept:"application/json, */*;q=0.1"},DEFAULT_OPTIONS={credentials:"include"},middlewares=[(options,next)=>("string"!=typeof options.url||hasQueryArg(options.url,"_locale")||(options.url=(0,add_query_args.f)(options.url,{_locale:"user"})),"string"!=typeof options.path||hasQueryArg(options.path,"_locale")||(options.path=(0,add_query_args.f)(options.path,{_locale:"user"})),next(options)),namespace_endpoint,(options,next)=>{const{method:method=DEFAULT_METHOD}=options;return OVERRIDE_METHODS.has(method.toUpperCase())&&(options={...options,headers:{...options.headers,"X-HTTP-Method-Override":method,"Content-Type":"application/json"},method:"POST"}),next(options)},fetch_all_middleware];const checkStatus=response=>{if(response.status>=200&&response.status<300)return response;throw response};let fetchHandler=nextOptions=>{const{url:url,path:path,data:data,parse:parse=!0,...remainingOptions}=nextOptions;let{body:body,headers:headers}=nextOptions;headers={...DEFAULT_HEADERS,...headers},data&&(body=JSON.stringify(data),headers["Content-Type"]="application/json");return window.fetch(url||path||window.location.href,{...DEFAULT_OPTIONS,...remainingOptions,body:body,headers:headers}).then((value=>Promise.resolve(value).then(checkStatus).catch((response=>parseAndThrowError(response,parse))).then((response=>parseResponseAndNormalizeError(response,parse)))),(err=>{if(err&&"AbortError"===err.name)throw err;throw{code:"fetch_error",message:(0,build_module.__)("You are probably offline.")}}))};function apiFetch(options){return middlewares.reduceRight(((next,middleware)=>workingOptions=>middleware(workingOptions,next)),fetchHandler)(options).catch((error=>"rest_cookie_invalid_nonce"!==error.code?Promise.reject(error):window.fetch(apiFetch.nonceEndpoint).then(checkStatus).then((data=>data.text())).then((text=>(apiFetch.nonceMiddleware.nonce=text,apiFetch(options))))))}apiFetch.use=function registerMiddleware(middleware){middlewares.unshift(middleware)},apiFetch.setFetchHandler=function setFetchHandler(newFetchHandler){fetchHandler=newFetchHandler},apiFetch.createNonceMiddleware=nonce,apiFetch.createPreloadingMiddleware=preloading,apiFetch.createRootURLMiddleware=root_url,apiFetch.fetchAllMiddleware=fetch_all_middleware,apiFetch.mediaUploadMiddleware=media_upload;var api_fetch_build_module=apiFetch},"./packages/block-editor/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{aE:function(){return AlignmentControl},RE:function(){return AlignmentToolbar},Dh:function(){return BlockAlignmentControl},nu:function(){return BlockAlignmentToolbar},Q4:function(){return BlockContextProvider},Zp:function(){return block_controls},$H:function(){return keyboard_shortcuts},B5:function(){return provider},wD:function(){return block_icon},N$:function(){return block_inspector},WD:function(){return BlockList},pB:function(){return block_settings_menu_controls},bi:function(){return BlockTitle},u9:function(){return BlockTools},_l:function(){return BlockVerticalAlignmentControl},nZ:function(){return BlockVerticalAlignmentToolbar},VZ:function(){return components_color_palette},ro:function(){return contrast_checker},gv:function(){return inner_blocks},Af:function(){return inspector_controls},om:function(){return media_placeholder},mS:function(){return media_replace_flow},R:function(){return media_upload},VA:function(){return check},uy:function(){return observe_typing},f3:function(){return plain_text},Ho:function(){return rich_text},Wx:function(){return RichTextShortcut},oe:function(){return RichTextToolbarButton},wE:function(){return url_input},_$:function(){return url_popover},v3:function(){return warning},o2:function(){return writing_flow},At:function(){return block_alignment_matrix_control},pY:function(){return block_full_height_alignment_control},b4:function(){return block_pattern_setup},A7:function(){return block_patterns_list},G6:function(){return block_variation_picker},zJ:function(){return ColorGradientSettingsDropdown},xO:function(){return DateFormatPicker},fG:function(){return getBorderClassesAndStyles},Ti:function(){return getColorClassesAndStyles},F6:function(){return __experimentalGetElementClassName},PE:function(){return getGapCSSValue},$R:function(){return __experimentalGetGradientClass},qL:function(){return __experimentalGetMatchingVariation},Ge:function(){return getSpacingClassesAndStyles},JZ:function(){return ImageEditingProvider},C9:function(){return ImageEditor},lf:function(){return ImageSizeControl},n_:function(){return ImageURLInputUI},Ml:function(){return link_control},ce:function(){return off_canvas_editor},RK:function(){return publish_date_time_picker},Kl:function(){return RecursionProvider},h:function(){return useBlockOverlayActive},fZ:function(){return useBlockPreview},P1:function(){return useBorderProps},Yj:function(){return useColorProps},ok:function(){return __experimentalUseGradient},cL:function(){return useHasRecursion},jC:function(){return useMultipleOriginColorsAndGradients},lP:function(){return iframe},kL:function(){return __unstableRichTextInputEvent},Gd:function(){return getColorClassName},M9:function(){return getColorObjectByAttributeValues},Gr:function(){return getColorObjectByColorValue},rS:function(){return getFontSizeClass},PD:function(){return getTypographyClassesAndStyles},t2:function(){return store},Fu:function(){return transform_styles},yc:function(){return useBlockDisplayInformation},Wo:function(){return useBlockProps},ni:function(){return useCachedTruthy},fh:function(){return useInnerBlocksProps},yu:function(){return use_setting_useSetting},$c:function(){return withColors}});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{__experimentalGetActiveBlockIdByBlockNames:function(){return __experimentalGetActiveBlockIdByBlockNames},__experimentalGetAllowedBlocks:function(){return __experimentalGetAllowedBlocks},__experimentalGetAllowedPatterns:function(){return __experimentalGetAllowedPatterns},__experimentalGetBlockListSettingsForBlocks:function(){return __experimentalGetBlockListSettingsForBlocks},__experimentalGetDirectInsertBlock:function(){return __experimentalGetDirectInsertBlock},__experimentalGetGlobalBlocksByName:function(){return __experimentalGetGlobalBlocksByName},__experimentalGetLastBlockAttributeChanges:function(){return __experimentalGetLastBlockAttributeChanges},__experimentalGetParsedPattern:function(){return __experimentalGetParsedPattern},__experimentalGetPatternTransformItems:function(){return __experimentalGetPatternTransformItems},__experimentalGetPatternsByBlockTypes:function(){return __experimentalGetPatternsByBlockTypes},__experimentalGetReusableBlockTitle:function(){return __experimentalGetReusableBlockTitle},__experimentalIsBlockInterfaceHidden:function(){return __experimentalIsBlockInterfaceHidden},__unstableGetBlockWithoutInnerBlocks:function(){return __unstableGetBlockWithoutInnerBlocks},__unstableGetClientIdWithClientIdsTree:function(){return __unstableGetClientIdWithClientIdsTree},__unstableGetClientIdsTree:function(){return __unstableGetClientIdsTree},__unstableGetContentLockingParent:function(){return __unstableGetContentLockingParent},__unstableGetEditorMode:function(){return __unstableGetEditorMode},__unstableGetSelectedBlocksWithPartialSelection:function(){return __unstableGetSelectedBlocksWithPartialSelection},__unstableGetTemporarilyEditingAsBlocks:function(){return __unstableGetTemporarilyEditingAsBlocks},__unstableGetVisibleBlocks:function(){return __unstableGetVisibleBlocks},__unstableHasActiveBlockOverlayActive:function(){return __unstableHasActiveBlockOverlayActive},__unstableIsFullySelected:function(){return __unstableIsFullySelected},__unstableIsLastBlockChangeIgnored:function(){return __unstableIsLastBlockChangeIgnored},__unstableIsSelectionCollapsed:function(){return __unstableIsSelectionCollapsed},__unstableIsSelectionMergeable:function(){return __unstableIsSelectionMergeable},__unstableIsWithinBlockOverlay:function(){return __unstableIsWithinBlockOverlay},__unstableSelectionHasUnmergeableBlock:function(){return __unstableSelectionHasUnmergeableBlock},areInnerBlocksControlled:function(){return areInnerBlocksControlled},canEditBlock:function(){return canEditBlock},canInsertBlockType:function(){return canInsertBlockType},canInsertBlocks:function(){return canInsertBlocks},canLockBlockType:function(){return canLockBlockType},canMoveBlock:function(){return canMoveBlock},canMoveBlocks:function(){return canMoveBlocks},canRemoveBlock:function(){return canRemoveBlock},canRemoveBlocks:function(){return canRemoveBlocks},didAutomaticChange:function(){return didAutomaticChange},getAdjacentBlockClientId:function(){return getAdjacentBlockClientId},getBlock:function(){return getBlock},getBlockAttributes:function(){return getBlockAttributes},getBlockCount:function(){return getBlockCount},getBlockHierarchyRootClientId:function(){return getBlockHierarchyRootClientId},getBlockIndex:function(){return getBlockIndex},getBlockInsertionPoint:function(){return getBlockInsertionPoint},getBlockListSettings:function(){return getBlockListSettings},getBlockMode:function(){return getBlockMode},getBlockName:function(){return getBlockName},getBlockOrder:function(){return getBlockOrder},getBlockParents:function(){return getBlockParents},getBlockParentsByBlockName:function(){return getBlockParentsByBlockName},getBlockRootClientId:function(){return getBlockRootClientId},getBlockSelectionEnd:function(){return getBlockSelectionEnd},getBlockSelectionStart:function(){return getBlockSelectionStart},getBlockTransformItems:function(){return getBlockTransformItems},getBlocks:function(){return getBlocks},getBlocksByClientId:function(){return getBlocksByClientId},getClientIdsOfDescendants:function(){return getClientIdsOfDescendants},getClientIdsWithDescendants:function(){return getClientIdsWithDescendants},getDraggedBlockClientIds:function(){return getDraggedBlockClientIds},getFirstMultiSelectedBlockClientId:function(){return getFirstMultiSelectedBlockClientId},getGlobalBlockCount:function(){return getGlobalBlockCount},getInserterItems:function(){return getInserterItems},getLastInsertedBlockClientId:function(){return getLastInsertedBlockClientId},getLastMultiSelectedBlockClientId:function(){return getLastMultiSelectedBlockClientId},getLowestCommonAncestorWithSelectedBlock:function(){return getLowestCommonAncestorWithSelectedBlock},getMultiSelectedBlockClientIds:function(){return getMultiSelectedBlockClientIds},getMultiSelectedBlocks:function(){return getMultiSelectedBlocks},getMultiSelectedBlocksEndClientId:function(){return getMultiSelectedBlocksEndClientId},getMultiSelectedBlocksStartClientId:function(){return getMultiSelectedBlocksStartClientId},getNextBlockClientId:function(){return getNextBlockClientId},getPreviousBlockClientId:function(){return getPreviousBlockClientId},getSelectedBlock:function(){return getSelectedBlock},getSelectedBlockClientId:function(){return getSelectedBlockClientId},getSelectedBlockClientIds:function(){return getSelectedBlockClientIds},getSelectedBlockCount:function(){return getSelectedBlockCount},getSelectedBlocksInitialCaretPosition:function(){return getSelectedBlocksInitialCaretPosition},getSelectionEnd:function(){return getSelectionEnd},getSelectionStart:function(){return getSelectionStart},getSettings:function(){return getSettings},getTemplate:function(){return getTemplate},getTemplateLock:function(){return getTemplateLock},hasBlockMovingClientId:function(){return selectors_hasBlockMovingClientId},hasInserterItems:function(){return hasInserterItems},hasMultiSelection:function(){return hasMultiSelection},hasSelectedBlock:function(){return hasSelectedBlock},hasSelectedInnerBlock:function(){return hasSelectedInnerBlock},isAncestorBeingDragged:function(){return isAncestorBeingDragged},isAncestorMultiSelected:function(){return isAncestorMultiSelected},isBlockBeingDragged:function(){return isBlockBeingDragged},isBlockHighlighted:function(){return isBlockHighlighted},isBlockInsertionPointVisible:function(){return isBlockInsertionPointVisible},isBlockMultiSelected:function(){return isBlockMultiSelected},isBlockSelected:function(){return isBlockSelected},isBlockValid:function(){return isBlockValid},isBlockVisible:function(){return isBlockVisible},isBlockWithinSelection:function(){return isBlockWithinSelection},isCaretWithinFormattedText:function(){return isCaretWithinFormattedText},isDraggingBlocks:function(){return isDraggingBlocks},isFirstMultiSelectedBlock:function(){return isFirstMultiSelectedBlock},isLastBlockChangePersistent:function(){return isLastBlockChangePersistent},isMultiSelecting:function(){return selectors_isMultiSelecting},isNavigationMode:function(){return isNavigationMode},isSelectionEnabled:function(){return selectors_isSelectionEnabled},isTyping:function(){return selectors_isTyping},isValidTemplate:function(){return isValidTemplate},wasBlockJustInserted:function(){return wasBlockJustInserted}});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{__experimentalHideBlockInterface:function(){return __experimentalHideBlockInterface},__experimentalShowBlockInterface:function(){return __experimentalShowBlockInterface},__unstableDeleteSelection:function(){return __unstableDeleteSelection},__unstableExpandSelection:function(){return __unstableExpandSelection},__unstableMarkAutomaticChange:function(){return __unstableMarkAutomaticChange},__unstableMarkLastChangeAsPersistent:function(){return __unstableMarkLastChangeAsPersistent},__unstableMarkNextChangeAsNotPersistent:function(){return __unstableMarkNextChangeAsNotPersistent},__unstableSaveReusableBlock:function(){return __unstableSaveReusableBlock},__unstableSetEditorMode:function(){return __unstableSetEditorMode},__unstableSetTemporarilyEditingAsBlocks:function(){return __unstableSetTemporarilyEditingAsBlocks},__unstableSplitSelection:function(){return __unstableSplitSelection},clearSelectedBlock:function(){return clearSelectedBlock},duplicateBlocks:function(){return duplicateBlocks},enterFormattedText:function(){return enterFormattedText},exitFormattedText:function(){return exitFormattedText},flashBlock:function(){return flashBlock},hideInsertionPoint:function(){return hideInsertionPoint},insertAfterBlock:function(){return insertAfterBlock},insertBeforeBlock:function(){return insertBeforeBlock},insertBlock:function(){return insertBlock},insertBlocks:function(){return insertBlocks},insertDefaultBlock:function(){return insertDefaultBlock},mergeBlocks:function(){return mergeBlocks},moveBlockToPosition:function(){return moveBlockToPosition},moveBlocksDown:function(){return moveBlocksDown},moveBlocksToPosition:function(){return moveBlocksToPosition},moveBlocksUp:function(){return moveBlocksUp},multiSelect:function(){return multiSelect},receiveBlocks:function(){return receiveBlocks},removeBlock:function(){return removeBlock},removeBlocks:function(){return removeBlocks},replaceBlock:function(){return replaceBlock},replaceBlocks:function(){return replaceBlocks},replaceInnerBlocks:function(){return replaceInnerBlocks},resetBlocks:function(){return resetBlocks},resetSelection:function(){return resetSelection},selectBlock:function(){return selectBlock},selectNextBlock:function(){return selectNextBlock},selectPreviousBlock:function(){return selectPreviousBlock},selectionChange:function(){return selectionChange},setBlockMovingClientId:function(){return setBlockMovingClientId},setBlockVisibility:function(){return setBlockVisibility},setHasControlledInnerBlocks:function(){return setHasControlledInnerBlocks},setNavigationMode:function(){return setNavigationMode},setTemplateValidity:function(){return setTemplateValidity},showInsertionPoint:function(){return showInsertionPoint},startDraggingBlocks:function(){return startDraggingBlocks},startMultiSelect:function(){return startMultiSelect},startTyping:function(){return startTyping},stopDraggingBlocks:function(){return stopDraggingBlocks},stopMultiSelect:function(){return stopMultiSelect},stopTyping:function(){return stopTyping},synchronizeTemplate:function(){return synchronizeTemplate},toggleBlockHighlight:function(){return toggleBlockHighlight},toggleBlockMode:function(){return toggleBlockMode},toggleSelection:function(){return toggleSelection},updateBlock:function(){return updateBlock},updateBlockAttributes:function(){return updateBlockAttributes},updateBlockListSettings:function(){return updateBlockListSettings},updateSettings:function(){return updateSettings},validateBlocksToTemplate:function(){return validateBlocksToTemplate}});var tooltip_styles_namespaceObject={};__webpack_require__.r(tooltip_styles_namespaceObject),__webpack_require__.d(tooltip_styles_namespaceObject,{TooltipContent:function(){return TooltipContent},TooltipPopoverView:function(){return TooltipPopoverView},TooltipShortcut:function(){return TooltipShortcut},noOutline:function(){return noOutline}});var build_module=__webpack_require__("./packages/blocks/build-module/index.js"),hooks_build_module=__webpack_require__("./packages/hooks/build-module/index.js");(0,hooks_build_module.KJ)("blocks.registerBlockType","core/compat/migrateLightBlockWrapper",(function migrateLightBlockWrapper(settings){const{apiVersion:apiVersion=1}=settings;return apiVersion<2&&(0,build_module.zb)(settings,"lightBlockWrapper",!1)&&(settings.apiVersion=2),settings}));var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),create_higher_order_component=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),style_provider=__webpack_require__("./packages/components/build-module/style-provider/index.js"),toolbar_context=__webpack_require__("./packages/components/build-module/toolbar-context/index.js"),toolbar_group=__webpack_require__("./packages/components/build-module/toolbar-group/index.js"),slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js");var block_controls_groups={default:(0,slot_fill.up)("BlockControls"),block:(0,slot_fill.up)("BlockControlsBlock"),inline:(0,slot_fill.up)("BlockFormatControls"),other:(0,slot_fill.up)("BlockControlsOther"),parent:(0,slot_fill.up)("BlockControlsParent")},data_build_module=__webpack_require__("./packages/data/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6),pipe=__webpack_require__("./packages/compose/build-module/higher-order/pipe.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js");const PREFERENCES_DEFAULTS={insertUsage:{}},SETTINGS_DEFAULTS={alignWide:!1,supportsLayout:!0,colors:[{name:(0,i18n_build_module.__)("Black"),slug:"black",color:"#000000"},{name:(0,i18n_build_module.__)("Cyan bluish gray"),slug:"cyan-bluish-gray",color:"#abb8c3"},{name:(0,i18n_build_module.__)("White"),slug:"white",color:"#ffffff"},{name:(0,i18n_build_module.__)("Pale pink"),slug:"pale-pink",color:"#f78da7"},{name:(0,i18n_build_module.__)("Vivid red"),slug:"vivid-red",color:"#cf2e2e"},{name:(0,i18n_build_module.__)("Luminous vivid orange"),slug:"luminous-vivid-orange",color:"#ff6900"},{name:(0,i18n_build_module.__)("Luminous vivid amber"),slug:"luminous-vivid-amber",color:"#fcb900"},{name:(0,i18n_build_module.__)("Light green cyan"),slug:"light-green-cyan",color:"#7bdcb5"},{name:(0,i18n_build_module.__)("Vivid green cyan"),slug:"vivid-green-cyan",color:"#00d084"},{name:(0,i18n_build_module.__)("Pale cyan blue"),slug:"pale-cyan-blue",color:"#8ed1fc"},{name:(0,i18n_build_module.__)("Vivid cyan blue"),slug:"vivid-cyan-blue",color:"#0693e3"},{name:(0,i18n_build_module.__)("Vivid purple"),slug:"vivid-purple",color:"#9b51e0"}],fontSizes:[{name:(0,i18n_build_module._x)("Small","font size name"),size:13,slug:"small"},{name:(0,i18n_build_module._x)("Normal","font size name"),size:16,slug:"normal"},{name:(0,i18n_build_module._x)("Medium","font size name"),size:20,slug:"medium"},{name:(0,i18n_build_module._x)("Large","font size name"),size:36,slug:"large"},{name:(0,i18n_build_module._x)("Huge","font size name"),size:42,slug:"huge"}],imageDefaultSize:"large",imageSizes:[{slug:"thumbnail",name:(0,i18n_build_module.__)("Thumbnail")},{slug:"medium",name:(0,i18n_build_module.__)("Medium")},{slug:"large",name:(0,i18n_build_module.__)("Large")},{slug:"full",name:(0,i18n_build_module.__)("Full Size")}],imageEditing:!0,maxWidth:580,allowedBlockTypes:!0,maxUploadFileSize:0,allowedMimeTypes:null,canLockBlocks:!0,__experimentalCanUserUseUnfilteredHTML:!1,__experimentalClearBlockSelection:!0,__experimentalBlockDirectory:!1,__mobileEnablePageTemplates:!1,__experimentalBlockPatterns:[],__experimentalBlockPatternCategories:[],__unstableGalleryWithImageBlocks:!1,__unstableIsPreviewMode:!1,generateAnchors:!1,gradients:[{name:(0,i18n_build_module.__)("Vivid cyan blue to vivid purple"),gradient:"linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)",slug:"vivid-cyan-blue-to-vivid-purple"},{name:(0,i18n_build_module.__)("Light green cyan to vivid green cyan"),gradient:"linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)",slug:"light-green-cyan-to-vivid-green-cyan"},{name:(0,i18n_build_module.__)("Luminous vivid amber to luminous vivid orange"),gradient:"linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)",slug:"luminous-vivid-amber-to-luminous-vivid-orange"},{name:(0,i18n_build_module.__)("Luminous vivid orange to vivid red"),gradient:"linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%)",slug:"luminous-vivid-orange-to-vivid-red"},{name:(0,i18n_build_module.__)("Very light gray to cyan bluish gray"),gradient:"linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%)",slug:"very-light-gray-to-cyan-bluish-gray"},{name:(0,i18n_build_module.__)("Cool to warm spectrum"),gradient:"linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%)",slug:"cool-to-warm-spectrum"},{name:(0,i18n_build_module.__)("Blush light purple"),gradient:"linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%)",slug:"blush-light-purple"},{name:(0,i18n_build_module.__)("Blush bordeaux"),gradient:"linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%)",slug:"blush-bordeaux"},{name:(0,i18n_build_module.__)("Luminous dusk"),gradient:"linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%)",slug:"luminous-dusk"},{name:(0,i18n_build_module.__)("Pale ocean"),gradient:"linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%)",slug:"pale-ocean"},{name:(0,i18n_build_module.__)("Electric grass"),gradient:"linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%)",slug:"electric-grass"},{name:(0,i18n_build_module.__)("Midnight"),gradient:"linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%)",slug:"midnight"}],__unstableResolvedAssets:{styles:[],scripts:[]}};function insertAt(array,elements,index){return[...array.slice(0,index),...Array.isArray(elements)?elements:[elements],...array.slice(index)]}function moveTo(array,from,to){let count=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const withoutMovedElements=[...array];return withoutMovedElements.splice(from,count),insertAt(withoutMovedElements,array.slice(from,from+count),to)}const identity=x=>x;function mapBlockOrder(blocks){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const result=new Map,current=[];return result.set(rootClientId,current),blocks.forEach((block=>{const{clientId:clientId,innerBlocks:innerBlocks}=block;current.push(clientId),mapBlockOrder(innerBlocks,clientId).forEach(((order,subClientId)=>{result.set(subClientId,order)}))})),result}function mapBlockParents(blocks){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const result=[],stack=[[rootClientId,blocks]];for(;stack.length;){const[parent,currentBlocks]=stack.shift();currentBlocks.forEach((_ref=>{let{innerBlocks:innerBlocks,...block}=_ref;result.push([block.clientId,parent]),null!=innerBlocks&&innerBlocks.length&&stack.push([block.clientId,innerBlocks])}))}return result}function flattenBlocks(blocks){let transform=arguments.length>1&&void 0!==arguments[1]?arguments[1]:identity;const result=[],stack=[...blocks];for(;stack.length;){const{innerBlocks:innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),result.push([block.clientId,transform(block)])}return result}function getFlattenedClientIds(blocks){const result={},stack=[...blocks];for(;stack.length;){const{innerBlocks:innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),result[block.clientId]=!0}return result}function getFlattenedBlocksWithoutAttributes(blocks){return flattenBlocks(blocks,(block=>(0,lodash.omit)(block,"attributes")))}function getFlattenedBlockAttributes(blocks){return flattenBlocks(blocks,(block=>block.attributes))}function isUpdatingSameBlockAttribute(action,lastAction){return"UPDATE_BLOCK_ATTRIBUTES"===action.type&&void 0!==lastAction&&"UPDATE_BLOCK_ATTRIBUTES"===lastAction.type&&es6_default()(action.clientIds,lastAction.clientIds)&&function hasSameKeys(a,b){return es6_default()(Object.keys(a),Object.keys(b))}(action.attributes,lastAction.attributes)}function updateBlockTreeForBlocks(state,blocks){const treeToUpdate=state.tree,stack=[...blocks],flattenedBlocks=[...blocks];for(;stack.length;){const block=stack.shift();stack.push(...block.innerBlocks),flattenedBlocks.push(...block.innerBlocks)}for(const block of flattenedBlocks)treeToUpdate.set(block.clientId,{});for(const block of flattenedBlocks)treeToUpdate.set(block.clientId,Object.assign(treeToUpdate.get(block.clientId),{...state.byClientId.get(block.clientId),attributes:state.attributes.get(block.clientId),innerBlocks:block.innerBlocks.map((subBlock=>treeToUpdate.get(subBlock.clientId)))}))}function updateParentInnerBlocksInTree(state,updatedClientIds){let updateChildrenOfUpdatedClientIds=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const treeToUpdate=state.tree,uncontrolledParents=new Set([]),controlledParents=new Set;for(const clientId of updatedClientIds){let current=updateChildrenOfUpdatedClientIds?clientId:state.parents.get(clientId);do{if(state.controlledInnerBlocks[current]){controlledParents.add(current);break}uncontrolledParents.add(current),current=state.parents.get(current)}while(void 0!==current)}for(const clientId of uncontrolledParents)treeToUpdate.set(clientId,{...treeToUpdate.get(clientId)});for(const clientId of uncontrolledParents)treeToUpdate.get(clientId).innerBlocks=(state.order.get(clientId)||[]).map((subClientId=>treeToUpdate.get(subClientId)));for(const clientId of controlledParents)treeToUpdate.set("controlled||"+clientId,{innerBlocks:(state.order.get(clientId)||[]).map((subClientId=>treeToUpdate.get(subClientId)))})}const blocks=(0,pipe.Z)(data_build_module.UY,(reducer=>(state,action)=>{if(state&&"SAVE_REUSABLE_BLOCK_SUCCESS"===action.type){const{id:id,updatedId:updatedId}=action;if(id===updatedId)return state;(state={...state}).attributes=new Map(state.attributes),state.attributes.forEach(((attributes,clientId)=>{const{name:name}=state.byClientId.get(clientId);"core/block"===name&&attributes.ref===id&&state.attributes.set(clientId,{...attributes,ref:updatedId})}))}return reducer(state,action)}),(reducer=>function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;const newState=reducer(state,action);if(newState===state)return state;switch(newState.tree=state.tree?state.tree:new Map,action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":newState.tree=new Map(newState.tree),updateBlockTreeForBlocks(newState,action.blocks),updateParentInnerBlocksInTree(newState,action.rootClientId?[action.rootClientId]:[""],!0);break;case"UPDATE_BLOCK":newState.tree=new Map(newState.tree),newState.tree.set(action.clientId,{...newState.tree.get(action.clientId),...newState.byClientId.get(action.clientId),attributes:newState.attributes.get(action.clientId)}),updateParentInnerBlocksInTree(newState,[action.clientId],!1);break;case"UPDATE_BLOCK_ATTRIBUTES":newState.tree=new Map(newState.tree),action.clientIds.forEach((clientId=>{newState.tree.set(clientId,{...newState.tree.get(clientId),attributes:newState.attributes.get(clientId)})})),updateParentInnerBlocksInTree(newState,action.clientIds,!1);break;case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const inserterClientIds=getFlattenedClientIds(action.blocks);newState.tree=new Map(newState.tree),action.replacedClientIds.concat(action.replacedClientIds.filter((clientId=>!inserterClientIds[clientId])).map((clientId=>"controlled||"+clientId))).forEach((key=>{newState.tree.delete(key)})),updateBlockTreeForBlocks(newState,action.blocks),updateParentInnerBlocksInTree(newState,action.blocks.map((b=>b.clientId)),!1);const parentsOfRemovedBlocks=[];for(const clientId of action.clientIds)void 0===state.parents.get(clientId)||""!==state.parents.get(clientId)&&!newState.byClientId.get(state.parents.get(clientId))||parentsOfRemovedBlocks.push(state.parents.get(clientId));updateParentInnerBlocksInTree(newState,parentsOfRemovedBlocks,!0);break}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":const parentsOfRemovedBlocks=[];for(const clientId of action.clientIds)void 0===state.parents.get(clientId)||""!==state.parents.get(clientId)&&!newState.byClientId.get(state.parents.get(clientId))||parentsOfRemovedBlocks.push(state.parents.get(clientId));newState.tree=new Map(newState.tree),action.removedClientIds.concat(action.removedClientIds.map((clientId=>"controlled||"+clientId))).forEach((key=>{newState.tree.delete(key)})),updateParentInnerBlocksInTree(newState,parentsOfRemovedBlocks,!0);break;case"MOVE_BLOCKS_TO_POSITION":{const updatedBlockUids=[];action.fromRootClientId?updatedBlockUids.push(action.fromRootClientId):updatedBlockUids.push(""),action.toRootClientId&&updatedBlockUids.push(action.toRootClientId),newState.tree=new Map(newState.tree),updateParentInnerBlocksInTree(newState,updatedBlockUids,!0);break}case"MOVE_BLOCKS_UP":case"MOVE_BLOCKS_DOWN":{const updatedBlockUids=[action.rootClientId?action.rootClientId:""];newState.tree=new Map(newState.tree),updateParentInnerBlocksInTree(newState,updatedBlockUids,!0);break}case"SAVE_REUSABLE_BLOCK_SUCCESS":{const updatedBlockUids=[];newState.attributes.forEach(((attributes,clientId)=>{"core/block"===newState.byClientId.get(clientId).name&&attributes.ref===action.updatedId&&updatedBlockUids.push(clientId)})),newState.tree=new Map(newState.tree),updatedBlockUids.forEach((clientId=>{newState.tree.set(clientId,{...newState.byClientId.get(clientId),attributes:newState.attributes.get(clientId),innerBlocks:newState.tree.get(clientId).innerBlocks})})),updateParentInnerBlocksInTree(newState,updatedBlockUids,!1)}}return newState}),(reducer=>(state,action)=>{const getAllChildren=clientIds=>{let result=clientIds;for(let i=0;i<result.length;i++)!state.order.get(result[i])||action.keepControlledInnerBlocks&&action.keepControlledInnerBlocks[result[i]]||(result===clientIds&&(result=[...result]),result.push(...state.order.get(result[i])));return result};if(state)switch(action.type){case"REMOVE_BLOCKS":action={...action,type:"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN",removedClientIds:getAllChildren(action.clientIds)};break;case"REPLACE_BLOCKS":action={...action,type:"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN",replacedClientIds:getAllChildren(action.clientIds)}}return reducer(state,action)}),(reducer=>(state,action)=>{if("REPLACE_INNER_BLOCKS"!==action.type)return reducer(state,action);const nestedControllers={};if(Object.keys(state.controlledInnerBlocks).length){const stack=[...action.blocks];for(;stack.length;){const{innerBlocks:innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),state.controlledInnerBlocks[block.clientId]&&(nestedControllers[block.clientId]=!0)}}let stateAfterBlocksRemoval=state;state.order.get(action.rootClientId)&&(stateAfterBlocksRemoval=reducer(stateAfterBlocksRemoval,{type:"REMOVE_BLOCKS",keepControlledInnerBlocks:nestedControllers,clientIds:state.order.get(action.rootClientId)}));let stateAfterInsert=stateAfterBlocksRemoval;if(action.blocks.length){stateAfterInsert=reducer(stateAfterInsert,{...action,type:"INSERT_BLOCKS",index:0});const stateAfterInsertOrder=new Map(stateAfterInsert.order);Object.keys(nestedControllers).forEach((key=>{state.order.get(key)&&stateAfterInsertOrder.set(key,state.order.get(key))})),stateAfterInsert.order=stateAfterInsertOrder,stateAfterInsert.tree=new Map(stateAfterInsert.tree),Object.keys(nestedControllers).forEach((_key=>{const key=`controlled||${_key}`;state.tree.has(key)&&stateAfterInsert.tree.set(key,state.tree.get(key))}))}return stateAfterInsert}),(reducer=>(state,action)=>{if("RESET_BLOCKS"===action.type){const newState={...state,byClientId:new Map(getFlattenedBlocksWithoutAttributes(action.blocks)),attributes:new Map(getFlattenedBlockAttributes(action.blocks)),order:mapBlockOrder(action.blocks),parents:new Map(mapBlockParents(action.blocks)),controlledInnerBlocks:{}};return newState.tree=new Map(null==state?void 0:state.tree),updateBlockTreeForBlocks(newState,action.blocks),newState.tree.set("",{innerBlocks:action.blocks.map((subBlock=>newState.tree.get(subBlock.clientId)))}),newState}return reducer(state,action)}),(function withPersistentBlockChange(reducer){let lastAction,markNextChangeAsNotPersistent=!1;return(state,action)=>{let nextState=reducer(state,action);const isExplicitPersistentChange="MARK_LAST_CHANGE_AS_PERSISTENT"===action.type||markNextChangeAsNotPersistent;if(state===nextState&&!isExplicitPersistentChange){var _state$isPersistentCh;markNextChangeAsNotPersistent="MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"===action.type;const nextIsPersistentChange=null===(_state$isPersistentCh=null==state?void 0:state.isPersistentChange)||void 0===_state$isPersistentCh||_state$isPersistentCh;return state.isPersistentChange===nextIsPersistentChange?state:{...nextState,isPersistentChange:nextIsPersistentChange}}return nextState={...nextState,isPersistentChange:isExplicitPersistentChange?!markNextChangeAsNotPersistent:!isUpdatingSameBlockAttribute(action,lastAction)},lastAction=action,markNextChangeAsNotPersistent="MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"===action.type,nextState}}),(function withIgnoredBlockChange(reducer){const IGNORED_ACTION_TYPES=new Set(["RECEIVE_BLOCKS"]);return(state,action)=>{const nextState=reducer(state,action);return nextState!==state&&(nextState.isIgnoredChange=IGNORED_ACTION_TYPES.has(action.type)),nextState}}),(reducer=>(state,action)=>{if("SET_HAS_CONTROLLED_INNER_BLOCKS"===action.type){const tempState=reducer(state,{type:"REPLACE_INNER_BLOCKS",rootClientId:action.clientId,blocks:[]});return reducer(tempState,action)}return reducer(state,action)}))({byClientId(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":{const newState=new Map(state);return getFlattenedBlocksWithoutAttributes(action.blocks).forEach((_ref2=>{let[key,value]=_ref2;newState.set(key,value)})),newState}case"UPDATE_BLOCK":{if(!state.has(action.clientId))return state;const changes=(0,lodash.omit)(action.updates,"attributes");if((0,lodash.isEmpty)(changes))return state;const newState=new Map(state);return newState.set(action.clientId,{...state.get(action.clientId),...changes}),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{if(!action.blocks)return state;const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),getFlattenedBlocksWithoutAttributes(action.blocks).forEach((_ref3=>{let[key,value]=_ref3;newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},attributes(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":{const newState=new Map(state);return getFlattenedBlockAttributes(action.blocks).forEach((_ref4=>{let[key,value]=_ref4;newState.set(key,value)})),newState}case"UPDATE_BLOCK":{if(!state.get(action.clientId)||!action.updates.attributes)return state;const newState=new Map(state);return newState.set(action.clientId,{...state.get(action.clientId),...action.updates.attributes}),newState}case"UPDATE_BLOCK_ATTRIBUTES":{if(action.clientIds.every((id=>!state.get(id))))return state;let hasChange=!1;const newState=new Map(state);for(const clientId of action.clientIds){var _action$attributes;const updatedAttributeEntries=Object.entries(action.uniqueByBlock?action.attributes[clientId]:null!==(_action$attributes=action.attributes)&&void 0!==_action$attributes?_action$attributes:{});if(0===updatedAttributeEntries.length)continue;let hasUpdatedAttributes=!1;const existingAttributes=state.get(clientId),newAttributes={};updatedAttributeEntries.forEach((_ref5=>{let[key,value]=_ref5;existingAttributes[key]!==value&&(hasUpdatedAttributes=!0,newAttributes[key]=value)})),hasChange=hasChange||hasUpdatedAttributes,hasUpdatedAttributes&&newState.set(clientId,{...existingAttributes,...newAttributes})}return hasChange?newState:state}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{if(!action.blocks)return state;const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),getFlattenedBlockAttributes(action.blocks).forEach((_ref6=>{let[key,value]=_ref6;newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},order(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_BLOCKS":{var _state$get;const blockOrder=mapBlockOrder(action.blocks),newState=new Map(state);return blockOrder.forEach(((order,clientId)=>{""!==clientId&&newState.set(clientId,order)})),newState.set("",(null!==(_state$get=state.get(""))&&void 0!==_state$get?_state$get:[]).concat(blockOrder[""])),newState}case"INSERT_BLOCKS":{const{rootClientId:rootClientId=""}=action,subState=state.get(rootClientId)||[],mappedBlocks=mapBlockOrder(action.blocks,rootClientId),{index:index=subState.length}=action,newState=new Map(state);return mappedBlocks.forEach(((order,clientId)=>{newState.set(clientId,order)})),newState.set(rootClientId,insertAt(subState,mappedBlocks.get(rootClientId),index)),newState}case"MOVE_BLOCKS_TO_POSITION":{var _state$get$filter,_state$get2;const{fromRootClientId:fromRootClientId="",toRootClientId:toRootClientId="",clientIds:clientIds}=action,{index:index=state.get(toRootClientId).length}=action;if(fromRootClientId===toRootClientId){const fromIndex=state.get(toRootClientId).indexOf(clientIds[0]),newState=new Map(state);return newState.set(toRootClientId,moveTo(state.get(toRootClientId),fromIndex,index,clientIds.length)),newState}const newState=new Map(state);return newState.set(fromRootClientId,null!==(_state$get$filter=null===(_state$get2=state.get(fromRootClientId))||void 0===_state$get2?void 0:_state$get2.filter((id=>!clientIds.includes(id))))&&void 0!==_state$get$filter?_state$get$filter:[]),newState.set(toRootClientId,insertAt(state.get(toRootClientId),clientIds,index)),newState}case"MOVE_BLOCKS_UP":{const{clientIds:clientIds,rootClientId:rootClientId=""}=action,firstClientId=clientIds[0],subState=state.get(rootClientId);if(!subState.length||firstClientId===subState[0])return state;const firstIndex=subState.indexOf(firstClientId),newState=new Map(state);return newState.set(rootClientId,moveTo(subState,firstIndex,firstIndex-1,clientIds.length)),newState}case"MOVE_BLOCKS_DOWN":{const{clientIds:clientIds,rootClientId:rootClientId=""}=action,firstClientId=clientIds[0],lastClientId=clientIds[clientIds.length-1],subState=state.get(rootClientId);if(!subState.length||lastClientId===subState[subState.length-1])return state;const firstIndex=subState.indexOf(firstClientId),newState=new Map(state);return newState.set(rootClientId,moveTo(subState,firstIndex,firstIndex+1,clientIds.length)),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const{clientIds:clientIds}=action;if(!action.blocks)return state;const mappedBlocks=mapBlockOrder(action.blocks),newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),mappedBlocks.forEach(((order,clientId)=>{""!==clientId&&newState.set(clientId,order)})),newState.forEach(((order,clientId)=>{const newSubOrder=Object.values(order).reduce(((result,subClientId)=>subClientId===clientIds[0]?[...result,...mappedBlocks.get("")]:(-1===clientIds.indexOf(subClientId)&&result.push(subClientId),result)),[]);newState.set(clientId,newSubOrder)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState.forEach(((order,clientId)=>{var _order$filter;const newSubOrder=null!==(_order$filter=null==order?void 0:order.filter((id=>!action.removedClientIds.includes(id))))&&void 0!==_order$filter?_order$filter:[];newSubOrder.length!==order.length&&newState.set(clientId,newSubOrder)})),newState}}return state},parents(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"RECEIVE_BLOCKS":{const newState=new Map(state);return mapBlockParents(action.blocks).forEach((_ref7=>{let[key,value]=_ref7;newState.set(key,value)})),newState}case"INSERT_BLOCKS":{const newState=new Map(state);return mapBlockParents(action.blocks,action.rootClientId||"").forEach((_ref8=>{let[key,value]=_ref8;newState.set(key,value)})),newState}case"MOVE_BLOCKS_TO_POSITION":{const newState=new Map(state);return action.clientIds.forEach((id=>{newState.set(id,action.toRootClientId||"")})),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),mapBlockParents(action.blocks,state.get(action.clientIds[0])).forEach((_ref9=>{let[key,value]=_ref9;newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},controlledInnerBlocks(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:type,clientId:clientId,hasControlledInnerBlocks:hasControlledInnerBlocks}=arguments.length>1?arguments[1]:void 0;return"SET_HAS_CONTROLLED_INNER_BLOCKS"===type?{...state,[clientId]:hasControlledInnerBlocks}:state}});function selectionHelper(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"CLEAR_SELECTED_BLOCK":return state.clientId?{}:state;case"SELECT_BLOCK":return action.clientId===state.clientId?state:{clientId:action.clientId};case"REPLACE_INNER_BLOCKS":case"INSERT_BLOCKS":return action.updateSelection&&action.blocks.length?{clientId:action.blocks[0].clientId}:state;case"REMOVE_BLOCKS":return action.clientIds&&action.clientIds.length&&-1!==action.clientIds.indexOf(state.clientId)?{}:state;case"REPLACE_BLOCKS":{if(-1===action.clientIds.indexOf(state.clientId))return state;const blockToSelect=action.blocks[action.indexToSelect]||action.blocks[action.blocks.length-1];return blockToSelect?blockToSelect.clientId===state.clientId?state:{clientId:blockToSelect.clientId}:{}}}return state}var reducer=(0,data_build_module.UY)({blocks:blocks,isTyping:function isTyping(){let state=arguments.length>0&&void 0!==arguments[0]&&arguments[0],action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"START_TYPING":return!0;case"STOP_TYPING":return!1}return state},isBlockInterfaceHidden:function isBlockInterfaceHidden(){let state=arguments.length>0&&void 0!==arguments[0]&&arguments[0],action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"HIDE_BLOCK_INTERFACE":return!0;case"SHOW_BLOCK_INTERFACE":return!1}return state},draggedBlocks:function draggedBlocks(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"START_DRAGGING_BLOCKS":return action.clientIds;case"STOP_DRAGGING_BLOCKS":return[]}return state},selection:function selection(){var _state$selectionStart,_state$selectionEnd,_state$selectionStart2,_state$selectionEnd2;let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"SELECTION_CHANGE":return action.clientId?{selectionStart:{clientId:action.clientId,attributeKey:action.attributeKey,offset:action.startOffset},selectionEnd:{clientId:action.clientId,attributeKey:action.attributeKey,offset:action.endOffset}}:{selectionStart:action.start||state.selectionStart,selectionEnd:action.end||state.selectionEnd};case"RESET_SELECTION":const{selectionStart:selectionStart,selectionEnd:selectionEnd}=action;return{selectionStart:selectionStart,selectionEnd:selectionEnd};case"MULTI_SELECT":const{start:start,end:end}=action;return start===(null===(_state$selectionStart=state.selectionStart)||void 0===_state$selectionStart?void 0:_state$selectionStart.clientId)&&end===(null===(_state$selectionEnd=state.selectionEnd)||void 0===_state$selectionEnd?void 0:_state$selectionEnd.clientId)?state:{selectionStart:{clientId:start},selectionEnd:{clientId:end}};case"RESET_BLOCKS":const startClientId=null==state||null===(_state$selectionStart2=state.selectionStart)||void 0===_state$selectionStart2?void 0:_state$selectionStart2.clientId,endClientId=null==state||null===(_state$selectionEnd2=state.selectionEnd)||void 0===_state$selectionEnd2?void 0:_state$selectionEnd2.clientId;if(!startClientId&&!endClientId)return state;if(!action.blocks.some((block=>block.clientId===startClientId)))return{selectionStart:{},selectionEnd:{}};if(!action.blocks.some((block=>block.clientId===endClientId)))return{...state,selectionEnd:state.selectionStart}}return{selectionStart:selectionHelper(state.selectionStart,action),selectionEnd:selectionHelper(state.selectionEnd,action)}},isMultiSelecting:function isMultiSelecting(){let state=arguments.length>0&&void 0!==arguments[0]&&arguments[0],action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"START_MULTI_SELECT":return!0;case"STOP_MULTI_SELECT":return!1}return state},isSelectionEnabled:function isSelectionEnabled(){let state=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],action=arguments.length>1?arguments[1]:void 0;return"TOGGLE_SELECTION"===action.type?action.isSelectionEnabled:state},initialPosition:function initialPosition(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;return"REPLACE_BLOCKS"===action.type&&void 0!==action.initialPosition||["MULTI_SELECT","SELECT_BLOCK","RESET_SELECTION","INSERT_BLOCKS","REPLACE_INNER_BLOCKS"].includes(action.type)?action.initialPosition:state},blocksMode:function blocksMode(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;if("TOGGLE_BLOCK_MODE"===action.type){const{clientId:clientId}=action;return{...state,[clientId]:state[clientId]&&"html"===state[clientId]?"visual":"html"}}return state},blockListSettings:function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"REPLACE_BLOCKS":case"REMOVE_BLOCKS":return(0,lodash.omit)(state,action.clientIds);case"UPDATE_BLOCK_LIST_SETTINGS":{const{clientId:clientId}=action;return action.settings?es6_default()(state[clientId],action.settings)?state:{...state,[clientId]:action.settings}:state.hasOwnProperty(clientId)?(0,lodash.omit)(state,clientId):state}}return state},insertionPoint:function insertionPoint(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"SHOW_INSERTION_POINT":{const{rootClientId:rootClientId,index:index,__unstableWithInserter:__unstableWithInserter,operation:operation}=action,nextState={rootClientId:rootClientId,index:index,__unstableWithInserter:__unstableWithInserter,operation:operation};return es6_default()(state,nextState)?state:nextState}case"HIDE_INSERTION_POINT":return null}return state},template:function template(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isValid:!0},action=arguments.length>1?arguments[1]:void 0;return"SET_TEMPLATE_VALIDITY"===action.type?{...state,isValid:action.isValid}:state},settings:function settings(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SETTINGS_DEFAULTS,action=arguments.length>1?arguments[1]:void 0;return"UPDATE_SETTINGS"===action.type?{...state,...action.settings}:state},preferences:function preferences(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PREFERENCES_DEFAULTS,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"INSERT_BLOCKS":case"REPLACE_BLOCKS":return action.blocks.reduce(((prevState,block)=>{const{attributes:attributes,name:blockName}=block,match=(0,data_build_module.Ys)(build_module.h).getActiveBlockVariation(blockName,attributes);let id=null!=match&&match.name?`${blockName}/${match.name}`:blockName;const insert={name:id};return"core/block"===blockName&&(insert.ref=attributes.ref,id+="/"+attributes.ref),{...prevState,insertUsage:{...prevState.insertUsage,[id]:{time:action.time,count:prevState.insertUsage[id]?prevState.insertUsage[id].count+1:1,insert:insert}}}}),state)}return state},lastBlockAttributesChange:function lastBlockAttributesChange(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"UPDATE_BLOCK":if(!action.updates.attributes)break;return{[action.clientId]:action.updates.attributes};case"UPDATE_BLOCK_ATTRIBUTES":return action.clientIds.reduce(((accumulator,id)=>({...accumulator,[id]:action.uniqueByBlock?action.attributes[id]:action.attributes})),{})}return state},editorMode:function editorMode(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"edit",action=arguments.length>1?arguments[1]:void 0;return"INSERT_BLOCKS"===action.type&&"navigation"===state?"edit":"SET_EDITOR_MODE"===action.type?action.mode:state},hasBlockMovingClientId:function hasBlockMovingClientId(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;return"SET_BLOCK_MOVING_MODE"===action.type?action.hasBlockMovingClientId:"SET_EDITOR_MODE"===action.type?null:state},automaticChangeStatus:function automaticChangeStatus(state,action){switch(action.type){case"MARK_AUTOMATIC_CHANGE":return"pending";case"MARK_AUTOMATIC_CHANGE_FINAL":return"pending"===state?"final":void 0;case"SELECTION_CHANGE":return"final"!==state?state:void 0;case"SET_BLOCK_VISIBILITY":case"START_TYPING":case"STOP_TYPING":case"UPDATE_BLOCK_LIST_SETTINGS":return state}},highlightedBlock:function highlightedBlock(state,action){switch(action.type){case"TOGGLE_BLOCK_HIGHLIGHT":const{clientId:clientId,isHighlighted:isHighlighted}=action;return isHighlighted?clientId:state===clientId?null:state;case"SELECT_BLOCK":if(action.clientId!==state)return null}return state},lastBlockInserted:function lastBlockInserted(){var _action$meta;let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"INSERT_BLOCKS":if(!action.blocks.length)return state;return{clientId:action.blocks[0].clientId,source:null===(_action$meta=action.meta)||void 0===_action$meta?void 0:_action$meta.source};case"RESET_BLOCKS":return{}}return state},temporarilyEditingAsBlocks:function temporarilyEditingAsBlocks(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",action=arguments.length>1?arguments[1]:void 0;return"SET_TEMPORARILY_EDITING_AS_BLOCKS"===action.type?action.temporarilyEditingAsBlocks:state},blockVisibility:function blockVisibility(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;return"SET_BLOCK_VISIBILITY"===action.type?{...state,...action.updates}:state}}),rememo=__webpack_require__("./node_modules/rememo/es/rememo.js"),platform=__webpack_require__("./packages/element/build-module/platform.js"),symbol=__webpack_require__("./packages/icons/build-module/library/symbol.js"),rich_text_build_module=__webpack_require__("./packages/rich-text/build-module/index.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js");function mapRichTextSettings(attributeDefinition){const{multiline:multilineTag,__unstableMultilineWrapperTags:multilineWrapperTags,__unstablePreserveWhiteSpace:preserveWhiteSpace}=attributeDefinition;return{multilineTag:multilineTag,multilineWrapperTags:multilineWrapperTags,preserveWhiteSpace:preserveWhiteSpace}}const comparator=(field,items,order)=>(a,b)=>{let cmpA,cmpB;if("function"==typeof field?(cmpA=field(a),cmpB=field(b)):(cmpA=a[field],cmpB=b[field]),cmpA>cmpB)return"asc"===order?1:-1;if(cmpB>cmpA)return"asc"===order?-1:1;const orderA=items.findIndex((item=>item===a)),orderB=items.findIndex((item=>item===b));return orderA>orderB?1:orderB>orderA?-1:0};function orderBy(items,field){let order=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return items.concat().sort(comparator(field,items,order))}const EMPTY_ARRAY=[];function getBlockName(state,clientId){const block=state.blocks.byClientId.get(clientId);if("web"!==platform.Z.OS&&"core/social-link"===(null==block?void 0:block.name)){const attributes=state.blocks.attributes.get(clientId),{service:service}=null!=attributes?attributes:{};return service?`core/social-link-${service}`:"core/social-link"}return block?block.name:null}function isBlockValid(state,clientId){const block=state.blocks.byClientId.get(clientId);return!!block&&block.isValid}function getBlockAttributes(state,clientId){return state.blocks.byClientId.get(clientId)?state.blocks.attributes.get(clientId):null}function getBlock(state,clientId){return state.blocks.byClientId.has(clientId)?state.blocks.tree.get(clientId):null}const __unstableGetBlockWithoutInnerBlocks=(0,rememo.Z)(((state,clientId)=>state.blocks.byClientId.has(clientId)?{...state.blocks.byClientId.get(clientId),attributes:getBlockAttributes(state,clientId)}:null),((state,clientId)=>[state.blocks.byClientId.get(clientId),state.blocks.attributes.get(clientId)]));function getBlocks(state,rootClientId){var _state$blocks$tree$ge;const treeKey=rootClientId&&areInnerBlocksControlled(state,rootClientId)?"controlled||"+rootClientId:rootClientId||"";return(null===(_state$blocks$tree$ge=state.blocks.tree.get(treeKey))||void 0===_state$blocks$tree$ge?void 0:_state$blocks$tree$ge.innerBlocks)||EMPTY_ARRAY}const __unstableGetClientIdWithClientIdsTree=(0,rememo.Z)(((state,clientId)=>({clientId:clientId,innerBlocks:__unstableGetClientIdsTree(state,clientId)})),(state=>[state.blocks.order])),__unstableGetClientIdsTree=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,lodash.map)(getBlockOrder(state,rootClientId),(clientId=>__unstableGetClientIdWithClientIdsTree(state,clientId)))}),(state=>[state.blocks.order])),getClientIdsOfDescendants=(0,rememo.Z)(((state,clientIds)=>{const collectedIds=[];for(const givenId of clientIds)for(const descendantId of getBlockOrder(state,givenId))collectedIds.push(descendantId,...getClientIdsOfDescendants(state,[descendantId]));return collectedIds}),(state=>[state.blocks.order])),getClientIdsWithDescendants=(0,rememo.Z)((state=>{const collectedIds=[];for(const topLevelId of getBlockOrder(state))collectedIds.push(topLevelId,...getClientIdsOfDescendants(state,[topLevelId]));return collectedIds}),(state=>[state.blocks.order])),getGlobalBlockCount=(0,rememo.Z)(((state,blockName)=>{const clientIds=getClientIdsWithDescendants(state);return blockName?clientIds.reduce(((accumulator,clientId)=>state.blocks.byClientId.get(clientId).name===blockName?accumulator+1:accumulator),0):clientIds.length}),(state=>[state.blocks.order,state.blocks.byClientId])),__experimentalGetGlobalBlocksByName=(0,rememo.Z)(((state,blockName)=>{if(!blockName)return EMPTY_ARRAY;const foundBlocks=getClientIdsWithDescendants(state).filter((clientId=>state.blocks.byClientId.get(clientId).name===blockName));return foundBlocks.length>0?foundBlocks:EMPTY_ARRAY}),(state=>[state.blocks.order,state.blocks.byClientId])),getBlocksByClientId=(0,rememo.Z)(((state,clientIds)=>(0,lodash.map)(Array.isArray(clientIds)?clientIds:[clientIds],(clientId=>getBlock(state,clientId)))),((state,clientIds)=>(0,lodash.map)(Array.isArray(clientIds)?clientIds:[clientIds],(clientId=>state.blocks.tree.get(clientId)))));function getBlockCount(state,rootClientId){return getBlockOrder(state,rootClientId).length}function getSelectionStart(state){return state.selection.selectionStart}function getSelectionEnd(state){return state.selection.selectionEnd}function getBlockSelectionStart(state){return state.selection.selectionStart.clientId}function getBlockSelectionEnd(state){return state.selection.selectionEnd.clientId}function getSelectedBlockCount(state){const multiSelectedBlockCount=getMultiSelectedBlockClientIds(state).length;return multiSelectedBlockCount||(state.selection.selectionStart.clientId?1:0)}function hasSelectedBlock(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return!!selectionStart.clientId&&selectionStart.clientId===selectionEnd.clientId}function getSelectedBlockClientId(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection,{clientId:clientId}=selectionStart;return clientId&&clientId===selectionEnd.clientId?clientId:null}function getSelectedBlock(state){const clientId=getSelectedBlockClientId(state);return clientId?getBlock(state,clientId):null}function getBlockRootClientId(state,clientId){return state.blocks.parents.has(clientId)?state.blocks.parents.get(clientId):null}const getBlockParents=(0,rememo.Z)((function(state,clientId){let ascending=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const parents=[];let current=clientId;for(;state.blocks.parents.get(current);)current=state.blocks.parents.get(current),parents.push(current);return ascending?parents:parents.reverse()}),(state=>[state.blocks.parents])),getBlockParentsByBlockName=(0,rememo.Z)((function(state,clientId,blockName){let ascending=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const parents=getBlockParents(state,clientId,ascending);return(0,lodash.map)((0,lodash.map)(parents,(id=>({id:id,name:getBlockName(state,id)}))).filter((_ref=>{let{name:name}=_ref;return Array.isArray(blockName)?blockName.includes(name):name===blockName})),(_ref2=>{let{id:id}=_ref2;return id}))}),(state=>[state.blocks.parents]));function getBlockHierarchyRootClientId(state,clientId){let parent,current=clientId;do{parent=current,current=state.blocks.parents.get(current)}while(current);return parent}function getLowestCommonAncestorWithSelectedBlock(state,clientId){const selectedId=getSelectedBlockClientId(state),clientParents=[...getBlockParents(state,clientId),clientId],selectedParents=[...getBlockParents(state,selectedId),selectedId];let lowestCommonAncestor;const maxDepth=Math.min(clientParents.length,selectedParents.length);for(let index=0;index<maxDepth&&clientParents[index]===selectedParents[index];index++)lowestCommonAncestor=clientParents[index];return lowestCommonAncestor}function getAdjacentBlockClientId(state,startClientId){let modifier=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(void 0===startClientId&&(startClientId=getSelectedBlockClientId(state)),void 0===startClientId&&(startClientId=modifier<0?getFirstMultiSelectedBlockClientId(state):getLastMultiSelectedBlockClientId(state)),!startClientId)return null;const rootClientId=getBlockRootClientId(state,startClientId);if(null===rootClientId)return null;const{order:order}=state.blocks,orderSet=order.get(rootClientId),index=orderSet.indexOf(startClientId),nextIndex=index+1*modifier;return nextIndex<0||nextIndex===orderSet.length?null:orderSet[nextIndex]}function getPreviousBlockClientId(state,startClientId){return getAdjacentBlockClientId(state,startClientId,-1)}function getNextBlockClientId(state,startClientId){return getAdjacentBlockClientId(state,startClientId,1)}function getSelectedBlocksInitialCaretPosition(state){return state.initialPosition}const getSelectedBlockClientIds=(0,rememo.Z)((state=>{const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;if(!selectionStart.clientId||!selectionEnd.clientId)return EMPTY_ARRAY;if(selectionStart.clientId===selectionEnd.clientId)return[selectionStart.clientId];const rootClientId=getBlockRootClientId(state,selectionStart.clientId);if(null===rootClientId)return EMPTY_ARRAY;const blockOrder=getBlockOrder(state,rootClientId),startIndex=blockOrder.indexOf(selectionStart.clientId),endIndex=blockOrder.indexOf(selectionEnd.clientId);return startIndex>endIndex?blockOrder.slice(endIndex,startIndex+1):blockOrder.slice(startIndex,endIndex+1)}),(state=>[state.blocks.order,state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId]));function getMultiSelectedBlockClientIds(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?EMPTY_ARRAY:getSelectedBlockClientIds(state)}const getMultiSelectedBlocks=(0,rememo.Z)((state=>{const multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(state);return multiSelectedBlockClientIds.length?multiSelectedBlockClientIds.map((clientId=>getBlock(state,clientId))):EMPTY_ARRAY}),(state=>[...getSelectedBlockClientIds.getDependants(state),state.blocks.byClientId,state.blocks.order,state.blocks.attributes]));function getFirstMultiSelectedBlockClientId(state){return getMultiSelectedBlockClientIds(state)[0]||null}function getLastMultiSelectedBlockClientId(state){const selectedClientIds=getMultiSelectedBlockClientIds(state);return selectedClientIds[selectedClientIds.length-1]||null}function isFirstMultiSelectedBlock(state,clientId){return getFirstMultiSelectedBlockClientId(state)===clientId}function isBlockMultiSelected(state,clientId){return-1!==getMultiSelectedBlockClientIds(state).indexOf(clientId)}const isAncestorMultiSelected=(0,rememo.Z)(((state,clientId)=>{let ancestorClientId=clientId,isMultiSelected=!1;for(;ancestorClientId&&!isMultiSelected;)ancestorClientId=getBlockRootClientId(state,ancestorClientId),isMultiSelected=isBlockMultiSelected(state,ancestorClientId);return isMultiSelected}),(state=>[state.blocks.order,state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId]));function getMultiSelectedBlocksStartClientId(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?null:selectionStart.clientId||null}function getMultiSelectedBlocksEndClientId(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?null:selectionEnd.clientId||null}function __unstableIsFullySelected(state){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);return!selectionAnchor.attributeKey&&!selectionFocus.attributeKey&&void 0===selectionAnchor.offset&&void 0===selectionFocus.offset}function __unstableIsSelectionCollapsed(state){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);return!!selectionAnchor&&!!selectionFocus&&selectionAnchor.clientId===selectionFocus.clientId&&selectionAnchor.attributeKey===selectionFocus.attributeKey&&selectionAnchor.offset===selectionFocus.offset}function __unstableSelectionHasUnmergeableBlock(state){return getSelectedBlockClientIds(state).some((clientId=>{const blockName=getBlockName(state,clientId);return!(0,build_module.ck)(blockName).merge}))}function __unstableIsSelectionMergeable(state,isForward){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);if(selectionAnchor.clientId===selectionFocus.clientId)return!1;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return!1;const anchorRootClientId=getBlockRootClientId(state,selectionAnchor.clientId);if(anchorRootClientId!==getBlockRootClientId(state,selectionFocus.clientId))return!1;const blockOrder=getBlockOrder(state,anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const targetBlockClientId=isForward?selectionEnd.clientId:selectionStart.clientId,blockToMergeClientId=isForward?selectionStart.clientId:selectionEnd.clientId,targetBlockName=getBlockName(state,targetBlockClientId);if(!(0,build_module.ck)(targetBlockName).merge)return!1;const blockToMerge=getBlock(state,blockToMergeClientId);if(blockToMerge.name===targetBlockName)return!0;const blocksToMerge=(0,build_module.m4)(blockToMerge,targetBlockName);return blocksToMerge&&blocksToMerge.length}const __unstableGetSelectedBlocksWithPartialSelection=state=>{const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);if(selectionAnchor.clientId===selectionFocus.clientId)return EMPTY_ARRAY;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return EMPTY_ARRAY;const anchorRootClientId=getBlockRootClientId(state,selectionAnchor.clientId);if(anchorRootClientId!==getBlockRootClientId(state,selectionFocus.clientId))return EMPTY_ARRAY;const blockOrder=getBlockOrder(state,anchorRootClientId),anchorIndex=blockOrder.indexOf(selectionAnchor.clientId),focusIndex=blockOrder.indexOf(selectionFocus.clientId),[selectionStart,selectionEnd]=anchorIndex>focusIndex?[selectionFocus,selectionAnchor]:[selectionAnchor,selectionFocus],blockA=getBlock(state,selectionStart.clientId),blockAType=(0,build_module.ck)(blockA.name),blockB=getBlock(state,selectionEnd.clientId),blockBType=(0,build_module.ck)(blockB.name),htmlA=blockA.attributes[selectionStart.attributeKey],htmlB=blockB.attributes[selectionEnd.attributeKey],attributeDefinitionA=blockAType.attributes[selectionStart.attributeKey],attributeDefinitionB=blockBType.attributes[selectionEnd.attributeKey];let valueA=(0,rich_text_build_module.Ue)({html:htmlA,...mapRichTextSettings(attributeDefinitionA)}),valueB=(0,rich_text_build_module.Ue)({html:htmlB,...mapRichTextSettings(attributeDefinitionB)});return valueA=(0,rich_text_build_module.Od)(valueA,0,selectionStart.offset),valueB=(0,rich_text_build_module.Od)(valueB,selectionEnd.offset,valueB.text.length),[{...blockA,attributes:{...blockA.attributes,[selectionStart.attributeKey]:(0,rich_text_build_module.Jz)({value:valueA,...mapRichTextSettings(attributeDefinitionA)})}},{...blockB,attributes:{...blockB.attributes,[selectionEnd.attributeKey]:(0,rich_text_build_module.Jz)({value:valueB,...mapRichTextSettings(attributeDefinitionB)})}}]};function getBlockOrder(state,rootClientId){return state.blocks.order.get(rootClientId||"")||EMPTY_ARRAY}function getBlockIndex(state,clientId){return getBlockOrder(state,getBlockRootClientId(state,clientId)).indexOf(clientId)}function isBlockSelected(state,clientId){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId&&selectionStart.clientId===clientId}function hasSelectedInnerBlock(state,clientId){let deep=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return getBlockOrder(state,clientId).some((innerClientId=>isBlockSelected(state,innerClientId)||isBlockMultiSelected(state,innerClientId)||deep&&hasSelectedInnerBlock(state,innerClientId,deep)))}function isBlockWithinSelection(state,clientId){if(!clientId)return!1;const clientIds=getMultiSelectedBlockClientIds(state),index=clientIds.indexOf(clientId);return index>-1&&index<clientIds.length-1}function hasMultiSelection(state){const{selectionStart:selectionStart,selectionEnd:selectionEnd}=state.selection;return selectionStart.clientId!==selectionEnd.clientId}function selectors_isMultiSelecting(state){return state.isMultiSelecting}function selectors_isSelectionEnabled(state){return state.isSelectionEnabled}function getBlockMode(state,clientId){return state.blocksMode[clientId]||"visual"}function selectors_isTyping(state){return state.isTyping}function __experimentalIsBlockInterfaceHidden(state){return state.isBlockInterfaceHidden}function isDraggingBlocks(state){return!!state.draggedBlocks.length}function getDraggedBlockClientIds(state){return state.draggedBlocks}function isBlockBeingDragged(state,clientId){return state.draggedBlocks.includes(clientId)}function isAncestorBeingDragged(state,clientId){if(!isDraggingBlocks(state))return!1;return getBlockParents(state,clientId).some((parentClientId=>isBlockBeingDragged(state,parentClientId)))}function isCaretWithinFormattedText(){return(0,deprecated_build_module.Z)('wp.data.select( "core/block-editor" ).isCaretWithinFormattedText',{since:"6.1",version:"6.3"}),!1}function getBlockInsertionPoint(state){let rootClientId,index;const{insertionPoint:insertionPoint,selection:{selectionEnd:selectionEnd}}=state;if(null!==insertionPoint)return insertionPoint;const{clientId:clientId}=selectionEnd;return clientId?(rootClientId=getBlockRootClientId(state,clientId)||void 0,index=getBlockIndex(state,selectionEnd.clientId)+1):index=getBlockOrder(state).length,{rootClientId:rootClientId,index:index}}function isBlockInsertionPointVisible(state){return null!==state.insertionPoint}function isValidTemplate(state){return state.template.isValid}function getTemplate(state){return state.settings.template}function getTemplateLock(state,rootClientId){var _getBlockListSettings,_getBlockListSettings2,_state$settings$templ;return rootClientId?null!==(_getBlockListSettings=null===(_getBlockListSettings2=getBlockListSettings(state,rootClientId))||void 0===_getBlockListSettings2?void 0:_getBlockListSettings2.templateLock)&&void 0!==_getBlockListSettings&&_getBlockListSettings:null!==(_state$settings$templ=state.settings.templateLock)&&void 0!==_state$settings$templ&&_state$settings$templ}const checkAllowList=function(list,item){let defaultResult=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"boolean"==typeof list?list:Array.isArray(list)?!(!list.includes("core/post-content")||null!==item)||list.includes(item):defaultResult},canInsertBlockTypeUnmemoized=function(state,blockName){let blockType,rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(blockName&&"object"==typeof blockName?(blockType=blockName,blockName=blockType.name):blockType=(0,build_module.ck)(blockName),!blockType)return!1;const{allowedBlockTypes:allowedBlockTypes}=getSettings(state),isBlockAllowedInEditor=checkAllowList(allowedBlockTypes,blockName,!0);if(!isBlockAllowedInEditor)return!1;const isLocked=!!getTemplateLock(state,rootClientId);if(isLocked)return!1;const parentBlockListSettings=getBlockListSettings(state,rootClientId);if(rootClientId&&void 0===parentBlockListSettings)return!1;const parentAllowedBlocks=null==parentBlockListSettings?void 0:parentBlockListSettings.allowedBlocks,hasParentAllowedBlock=checkAllowList(parentAllowedBlocks,blockName),blockAllowedParentBlocks=blockType.parent,parentName=getBlockName(state,rootClientId),hasBlockAllowedParent=checkAllowList(blockAllowedParentBlocks,parentName);let hasBlockAllowedAncestor=!0;const blockAllowedAncestorBlocks=blockType.ancestor;if(blockAllowedAncestorBlocks){hasBlockAllowedAncestor=[rootClientId,...getBlockParents(state,rootClientId)].some((ancestorClientId=>checkAllowList(blockAllowedAncestorBlocks,getBlockName(state,ancestorClientId))))}const canInsert=hasBlockAllowedAncestor&&(null===hasParentAllowedBlock&&null===hasBlockAllowedParent||!0===hasParentAllowedBlock||!0===hasBlockAllowedParent);return canInsert?(0,hooks_build_module.O)("blockEditor.__unstableCanInsertBlockType",canInsert,blockType,rootClientId,{getBlock:getBlock.bind(null,state),getBlockParentsByBlockName:getBlockParentsByBlockName.bind(null,state)}):canInsert},canInsertBlockType=(0,rememo.Z)(canInsertBlockTypeUnmemoized,((state,blockName,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.byClientId.get(rootClientId),state.settings.allowedBlockTypes,state.settings.templateLock]));function canInsertBlocks(state,clientIds){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return clientIds.every((id=>canInsertBlockType(state,getBlockName(state,id),rootClientId)))}function canRemoveBlock(state,clientId){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const attributes=getBlockAttributes(state,clientId);if(null===attributes)return!0;const{lock:lock}=attributes,parentIsLocked=!!getTemplateLock(state,rootClientId);return void 0===lock||void 0===(null==lock?void 0:lock.remove)?!parentIsLocked:!(null!=lock&&lock.remove)}function canRemoveBlocks(state,clientIds){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return clientIds.every((clientId=>canRemoveBlock(state,clientId,rootClientId)))}function canMoveBlock(state,clientId){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const attributes=getBlockAttributes(state,clientId);if(null===attributes)return;const{lock:lock}=attributes,parentIsLocked="all"===getTemplateLock(state,rootClientId);return void 0===lock||void 0===(null==lock?void 0:lock.move)?!parentIsLocked:!(null!=lock&&lock.move)}function canMoveBlocks(state,clientIds){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return clientIds.every((clientId=>canMoveBlock(state,clientId,rootClientId)))}function canEditBlock(state,clientId){const attributes=getBlockAttributes(state,clientId);if(null===attributes)return!0;const{lock:lock}=attributes;return!(null!=lock&&lock.edit)}function canLockBlockType(state,nameOrType){var _state$settings;return!!(0,build_module.zb)(nameOrType,"lock",!0)&&!(null===(_state$settings=state.settings)||void 0===_state$settings||!_state$settings.canLockBlocks)}function getInsertUsage(state,id){var _state$preferences$in,_state$preferences$in2;return null!==(_state$preferences$in=null===(_state$preferences$in2=state.preferences.insertUsage)||void 0===_state$preferences$in2?void 0:_state$preferences$in2[id])&&void 0!==_state$preferences$in?_state$preferences$in:null}const canIncludeBlockTypeInInserter=(state,blockType,rootClientId)=>!!(0,build_module.zb)(blockType,"inserter",!0)&&canInsertBlockTypeUnmemoized(state,blockType.name,rootClientId),getItemFromVariation=(state,item)=>variation=>{const variationId=`${item.id}/${variation.name}`,{time:time,count:count=0}=getInsertUsage(state,variationId)||{};return{...item,id:variationId,icon:variation.icon||item.icon,title:variation.title||item.title,description:variation.description||item.description,category:variation.category||item.category,example:variation.hasOwnProperty("example")?variation.example:item.example,initialAttributes:{...item.initialAttributes,...variation.attributes},innerBlocks:variation.innerBlocks,keywords:variation.keywords||item.keywords,frecency:calculateFrecency(time,count)}},calculateFrecency=(time,count)=>{if(!time)return count;const duration=Date.now()-time;switch(!0){case duration<36e5:return 4*count;case duration<864e5:return 2*count;case duration<6048e5:return count/2;default:return count/4}},buildBlockTypeItem=(state,_ref3)=>{let{buildScope:buildScope="inserter"}=_ref3;return blockType=>{const id=blockType.name;let isDisabled=!1;(0,build_module.zb)(blockType.name,"multiple",!0)||(isDisabled=getBlocksByClientId(state,getClientIdsWithDescendants(state)).some((_ref4=>{let{name:name}=_ref4;return name===blockType.name})));const{time:time,count:count=0}=getInsertUsage(state,id)||{},blockItemBase={id:id,name:blockType.name,title:blockType.title,icon:blockType.icon,isDisabled:isDisabled,frecency:calculateFrecency(time,count)};if("transform"===buildScope)return blockItemBase;const inserterVariations=(0,build_module.Nr)(blockType.name,"inserter");return{...blockItemBase,initialAttributes:{},description:blockType.description,category:blockType.category,keywords:blockType.keywords,variations:inserterVariations,example:blockType.example,utility:1}}},getInserterItems=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const buildBlockTypeInserterItem=buildBlockTypeItem(state,{buildScope:"inserter"}),blockParserTokenizer=/^\s*<!--\s+(\/)?wp:([a-z][a-z0-9_-]*\/)?([a-z][a-z0-9_-]*)\s+({(?:(?=([^}]+|}+(?=})|(?!}\s+\/?-->)[^])*)\5|[^]*?)}\s+)?(\/)?-->/,buildReusableBlockInserterItem=reusableBlock=>{let icon=symbol.Z;if("web"===platform.Z.OS){const rawBlockMatch=("string"==typeof reusableBlock.content.raw?reusableBlock.content.raw:reusableBlock.content).match(blockParserTokenizer);if(rawBlockMatch){const[,,namespace="core/",blockName]=rawBlockMatch,referencedBlockType=(0,build_module.ck)(namespace+blockName);referencedBlockType&&(icon=referencedBlockType.icon)}}const id=`core/block/${reusableBlock.id}`,{time:time,count:count=0}=getInsertUsage(state,id)||{},frecency=calculateFrecency(time,count);return{id:id,name:"core/block",initialAttributes:{ref:reusableBlock.id},title:reusableBlock.title.raw,icon:icon,category:"reusable",keywords:[],isDisabled:!1,utility:1,frecency:frecency}},blockTypeInserterItems=(0,build_module.U8)().filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId))).map(buildBlockTypeInserterItem),reusableBlockInserterItems=canInsertBlockTypeUnmemoized(state,"core/block",rootClientId)?getReusableBlocks(state).map(buildReusableBlockInserterItem):[],items=blockTypeInserterItems.reduce(((accumulator,item)=>{const{variations:variations=[]}=item;if(variations.some((_ref5=>{let{isDefault:isDefault}=_ref5;return isDefault}))||accumulator.push(item),variations.length){const variationMapper=getItemFromVariation(state,item);accumulator.push(...variations.map(variationMapper))}return accumulator}),[]),groupByType=(blocks,block)=>{const{core:core,noncore:noncore}=blocks;return(block.name.startsWith("core/")?core:noncore).push(block),blocks},{core:coreItems,noncore:nonCoreItems}=items.reduce(groupByType,{core:[],noncore:[]}),sortedBlockTypes=[...coreItems,...nonCoreItems];return[...sortedBlockTypes,...reusableBlockInserterItems]}),((state,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.byClientId,state.blocks.order,state.preferences.insertUsage,state.settings.allowedBlockTypes,state.settings.templateLock,getReusableBlocks(state),(0,build_module.U8)()])),getBlockTransformItems=(0,rememo.Z)((function(state,blocks){var _itemsByName$sourceBl;let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const normalizedBlocks=Array.isArray(blocks)?blocks:[blocks],[sourceBlock]=normalizedBlocks,buildBlockTypeTransformItem=buildBlockTypeItem(state,{buildScope:"transform"}),blockTypeTransformItems=(0,build_module.U8)().filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId))).map(buildBlockTypeTransformItem),itemsByName=Object.fromEntries(Object.entries(blockTypeTransformItems).map((_ref6=>{let[,value]=_ref6;return[value.name,value]})));itemsByName["*"]={frecency:1/0,id:"*",isDisabled:!1,name:"*",title:(0,i18n_build_module.__)("Unwrap"),icon:null===(_itemsByName$sourceBl=itemsByName[null==sourceBlock?void 0:sourceBlock.name])||void 0===_itemsByName$sourceBl?void 0:_itemsByName$sourceBl.icon};const possibleTransforms=(0,build_module.ff)(normalizedBlocks).reduce(((accumulator,block)=>("*"===block?accumulator.push(itemsByName["*"]):itemsByName[null==block?void 0:block.name]&&accumulator.push(itemsByName[block.name]),accumulator)),[]);return orderBy(possibleTransforms,(block=>itemsByName[block.name].frecency),"desc")}),((state,blocks,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.byClientId,state.preferences.insertUsage,state.settings.allowedBlockTypes,state.settings.templateLock,(0,build_module.U8)()])),hasInserterItems=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const hasBlockType=(0,build_module.U8)().some((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId)));if(hasBlockType)return!0;const hasReusableBlock=canInsertBlockTypeUnmemoized(state,"core/block",rootClientId)&&getReusableBlocks(state).length>0;return hasReusableBlock}),((state,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.byClientId,state.settings.allowedBlockTypes,state.settings.templateLock,getReusableBlocks(state),(0,build_module.U8)()])),__experimentalGetAllowedBlocks=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(rootClientId)return(0,build_module.U8)().filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId)))}),((state,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.byClientId,state.settings.allowedBlockTypes,state.settings.templateLock,(0,build_module.U8)()])),__experimentalGetDirectInsertBlock=(0,rememo.Z)((function(state){var _state$blockListSetti,_state$blockListSetti2;let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!rootClientId)return;const defaultBlock=null===(_state$blockListSetti=state.blockListSettings[rootClientId])||void 0===_state$blockListSetti?void 0:_state$blockListSetti.__experimentalDefaultBlock,directInsert=null===(_state$blockListSetti2=state.blockListSettings[rootClientId])||void 0===_state$blockListSetti2?void 0:_state$blockListSetti2.__experimentalDirectInsert;return defaultBlock&&directInsert?"function"==typeof directInsert?directInsert(getBlock(state,rootClientId))?defaultBlock:null:defaultBlock:void 0}),((state,rootClientId)=>[state.blockListSettings[rootClientId],state.blocks.tree.get(rootClientId)])),__experimentalGetParsedPattern=(0,rememo.Z)(((state,patternName)=>{const pattern=state.settings.__experimentalBlockPatterns.find((_ref7=>{let{name:name}=_ref7;return name===patternName}));return pattern?{...pattern,blocks:(0,build_module.Qc)(pattern.content,{__unstableSkipMigrationLogs:!0})}:null}),(state=>[state.settings.__experimentalBlockPatterns])),getAllAllowedPatterns=(0,rememo.Z)((state=>{const patterns=state.settings.__experimentalBlockPatterns,{allowedBlockTypes:allowedBlockTypes}=getSettings(state),parsedPatterns=patterns.filter((_ref8=>{let{inserter:inserter=!0}=_ref8;return!!inserter})).map((_ref9=>{let{name:name}=_ref9;return __experimentalGetParsedPattern(state,name)})),allowedPatterns=parsedPatterns.filter((_ref10=>{let{blocks:blocks}=_ref10;return((blocks,allowedBlockTypes)=>{if("boolean"==typeof allowedBlockTypes)return allowedBlockTypes;const blocksQueue=[...blocks];for(;blocksQueue.length>0;){var _block$innerBlocks;const block=blocksQueue.shift();if(!checkAllowList(allowedBlockTypes,block.name||block.blockName,!0))return!1;null===(_block$innerBlocks=block.innerBlocks)||void 0===_block$innerBlocks||_block$innerBlocks.forEach((innerBlock=>{blocksQueue.push(innerBlock)}))}return!0})(blocks,allowedBlockTypes)}));return allowedPatterns}),(state=>[state.settings.__experimentalBlockPatterns,state.settings.allowedBlockTypes])),__experimentalGetAllowedPatterns=(0,rememo.Z)((function(state){let rootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const availableParsedPatterns=getAllAllowedPatterns(state),patternsAllowed=availableParsedPatterns.filter((_ref11=>{let{blocks:blocks}=_ref11;return blocks.every((_ref12=>{let{name:name}=_ref12;return canInsertBlockType(state,name,rootClientId)}))}));return patternsAllowed}),((state,rootClientId)=>[state.settings.__experimentalBlockPatterns,state.settings.allowedBlockTypes,state.settings.templateLock,state.blockListSettings[rootClientId],state.blocks.byClientId.get(rootClientId)])),__experimentalGetPatternsByBlockTypes=(0,rememo.Z)((function(state,blockNames){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!blockNames)return EMPTY_ARRAY;const patterns=__experimentalGetAllowedPatterns(state,rootClientId),normalizedBlockNames=Array.isArray(blockNames)?blockNames:[blockNames];return patterns.filter((pattern=>{var _pattern$blockTypes,_pattern$blockTypes$s;return null==pattern||null===(_pattern$blockTypes=pattern.blockTypes)||void 0===_pattern$blockTypes||null===(_pattern$blockTypes$s=_pattern$blockTypes.some)||void 0===_pattern$blockTypes$s?void 0:_pattern$blockTypes$s.call(_pattern$blockTypes,(blockName=>normalizedBlockNames.includes(blockName)))}))}),((state,blockNames,rootClientId)=>[...__experimentalGetAllowedPatterns.getDependants(state,rootClientId)])),__experimentalGetPatternTransformItems=(0,rememo.Z)((function(state,blocks){let rootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!blocks)return EMPTY_ARRAY;if(blocks.some((_ref13=>{let{clientId:clientId,innerBlocks:innerBlocks}=_ref13;return innerBlocks.length||areInnerBlocksControlled(state,clientId)})))return EMPTY_ARRAY;const selectedBlockNames=Array.from(new Set(blocks.map((_ref14=>{let{name:name}=_ref14;return name}))));return __experimentalGetPatternsByBlockTypes(state,selectedBlockNames,rootClientId)}),((state,blocks,rootClientId)=>[...__experimentalGetPatternsByBlockTypes.getDependants(state,rootClientId)]));function getBlockListSettings(state,clientId){return state.blockListSettings[clientId]}function getSettings(state){return state.settings}function isLastBlockChangePersistent(state){return state.blocks.isPersistentChange}const __experimentalGetBlockListSettingsForBlocks=(0,rememo.Z)((function(state){let clientIds=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return clientIds.reduce(((blockListSettingsForBlocks,clientId)=>state.blockListSettings[clientId]?{...blockListSettingsForBlocks,[clientId]:state.blockListSettings[clientId]}:blockListSettingsForBlocks),{})}),(state=>[state.blockListSettings])),__experimentalGetReusableBlockTitle=(0,rememo.Z)(((state,ref)=>{var _reusableBlock$title;const reusableBlock=getReusableBlocks(state).find((block=>block.id===ref));return reusableBlock?null===(_reusableBlock$title=reusableBlock.title)||void 0===_reusableBlock$title?void 0:_reusableBlock$title.raw:null}),(state=>[getReusableBlocks(state)]));function __unstableIsLastBlockChangeIgnored(state){return state.blocks.isIgnoredChange}function __experimentalGetLastBlockAttributeChanges(state){return state.lastBlockAttributesChange}function getReusableBlocks(state){var _state$settings$__exp,_state$settings2;return null!==(_state$settings$__exp=null==state||null===(_state$settings2=state.settings)||void 0===_state$settings2?void 0:_state$settings2.__experimentalReusableBlocks)&&void 0!==_state$settings$__exp?_state$settings$__exp:EMPTY_ARRAY}function isNavigationMode(state){return"navigation"===state.editorMode}function __unstableGetEditorMode(state){return state.editorMode}function selectors_hasBlockMovingClientId(state){return state.hasBlockMovingClientId}function didAutomaticChange(state){return!!state.automaticChangeStatus}function isBlockHighlighted(state,clientId){return state.highlightedBlock===clientId}function areInnerBlocksControlled(state,clientId){return!!state.blocks.controlledInnerBlocks[clientId]}const __experimentalGetActiveBlockIdByBlockNames=(0,rememo.Z)(((state,validBlockNames)=>{if(!validBlockNames.length)return null;const selectedBlockClientId=getSelectedBlockClientId(state);if(validBlockNames.includes(getBlockName(state,selectedBlockClientId)))return selectedBlockClientId;const multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(state),entityAreaParents=getBlockParentsByBlockName(state,selectedBlockClientId||multiSelectedBlockClientIds[0],validBlockNames);return entityAreaParents?entityAreaParents[entityAreaParents.length-1]:null}),((state,validBlockNames)=>[state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId,validBlockNames]));function wasBlockJustInserted(state,clientId,source){const{lastBlockInserted:lastBlockInserted}=state;return lastBlockInserted.clientId===clientId&&lastBlockInserted.source===source}function getLastInsertedBlockClientId(state){var _state$lastBlockInser;return null==state||null===(_state$lastBlockInser=state.lastBlockInserted)||void 0===_state$lastBlockInser?void 0:_state$lastBlockInser.clientId}function isBlockVisible(state,clientId){var _state$blockVisibilit,_state$blockVisibilit2;return null===(_state$blockVisibilit=null===(_state$blockVisibilit2=state.blockVisibility)||void 0===_state$blockVisibilit2?void 0:_state$blockVisibilit2[clientId])||void 0===_state$blockVisibilit||_state$blockVisibilit}const __unstableGetVisibleBlocks=(0,rememo.Z)((state=>new Set(Object.keys(state.blockVisibility).filter((key=>state.blockVisibility[key])))),(state=>[state.blockVisibility])),__unstableGetContentLockingParent=(0,rememo.Z)(((state,clientId)=>{let result,current=clientId;for(;state.blocks.parents.has(current);)current=state.blocks.parents.get(current),"contentOnly"===getTemplateLock(state,current)&&(result=current);return result}),(state=>[state.blocks.parents,state.blockListSettings]));function __unstableGetTemporarilyEditingAsBlocks(state){return state.temporarilyEditingAsBlocks}function __unstableHasActiveBlockOverlayActive(state,clientId){if(!canEditBlock(state,clientId))return!0;const editorMode=__unstableGetEditorMode(state);if("zoom-out"===editorMode&&clientId&&!getBlockRootClientId(state,clientId))return!0;const blockSupportDisable=(0,build_module.zb)(getBlockName(state,clientId),"__experimentalDisableBlockOverlay",!1);return("navigation"===editorMode||!blockSupportDisable&&areInnerBlocksControlled(state,clientId))&&!isBlockSelected(state,clientId)&&!hasSelectedInnerBlock(state,clientId,!0)}function __unstableIsWithinBlockOverlay(state,clientId){let parent=state.blocks.parents[clientId];for(;parent;){if(__unstableHasActiveBlockOverlayActive(state,parent))return!0;parent=state.blocks.parents[parent]}return!1}var a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js");function retrieveSelectedAttribute(blockAttributes){if(blockAttributes)return Object.keys(blockAttributes).find((name=>{const value=blockAttributes[name];return"string"==typeof value&&-1!==value.indexOf("")}))}const castArray=maybeArray=>Array.isArray(maybeArray)?maybeArray:[maybeArray],resetBlocks=blocks=>_ref2=>{let{dispatch:dispatch}=_ref2;dispatch({type:"RESET_BLOCKS",blocks:blocks}),dispatch(validateBlocksToTemplate(blocks))},validateBlocksToTemplate=blocks=>_ref3=>{let{select:select,dispatch:dispatch}=_ref3;const template=select.getTemplate(),templateLock=select.getTemplateLock(),isBlocksValidToTemplate=!template||"all"!==templateLock||(0,build_module.aW)(blocks,template);if(isBlocksValidToTemplate!==select.isValidTemplate())return dispatch.setTemplateValidity(isBlocksValidToTemplate),isBlocksValidToTemplate};function resetSelection(selectionStart,selectionEnd,initialPosition){return{type:"RESET_SELECTION",selectionStart:selectionStart,selectionEnd:selectionEnd,initialPosition:initialPosition}}function receiveBlocks(blocks){return(0,deprecated_build_module.Z)('wp.data.dispatch( "core/block-editor" ).receiveBlocks',{since:"5.9",alternative:"resetBlocks or insertBlocks"}),{type:"RECEIVE_BLOCKS",blocks:blocks}}function updateBlockAttributes(clientIds,attributes){let uniqueByBlock=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"UPDATE_BLOCK_ATTRIBUTES",clientIds:castArray(clientIds),attributes:attributes,uniqueByBlock:uniqueByBlock}}function updateBlock(clientId,updates){return{type:"UPDATE_BLOCK",clientId:clientId,updates:updates}}function selectBlock(clientId){let initialPosition=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{type:"SELECT_BLOCK",initialPosition:initialPosition,clientId:clientId}}const selectPreviousBlock=clientId=>_ref4=>{let{select:select,dispatch:dispatch}=_ref4;const previousBlockClientId=select.getPreviousBlockClientId(clientId);previousBlockClientId&&dispatch.selectBlock(previousBlockClientId,-1)},selectNextBlock=clientId=>_ref5=>{let{select:select,dispatch:dispatch}=_ref5;const nextBlockClientId=select.getNextBlockClientId(clientId);nextBlockClientId&&dispatch.selectBlock(nextBlockClientId)};function startMultiSelect(){return{type:"START_MULTI_SELECT"}}function stopMultiSelect(){return{type:"STOP_MULTI_SELECT"}}const multiSelect=function(start,end){let __experimentalInitialPosition=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _ref6=>{let{select:select,dispatch:dispatch}=_ref6;if(select.getBlockRootClientId(start)!==select.getBlockRootClientId(end))return;dispatch({type:"MULTI_SELECT",start:start,end:end,initialPosition:__experimentalInitialPosition});const blockCount=select.getSelectedBlockCount();(0,a11y_build_module.D)((0,i18n_build_module.gB)((0,i18n_build_module._n)("%s block selected.","%s blocks selected.",blockCount),blockCount),"assertive")}};function clearSelectedBlock(){return{type:"CLEAR_SELECTED_BLOCK"}}function toggleSelection(){let isSelectionEnabled=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:"TOGGLE_SELECTION",isSelectionEnabled:isSelectionEnabled}}function getBlocksWithDefaultStylesApplied(blocks,blockEditorSettings){var _blockEditorSettings$,_blockEditorSettings$2;const preferredStyleVariations=null!==(_blockEditorSettings$=null==blockEditorSettings||null===(_blockEditorSettings$2=blockEditorSettings.__experimentalPreferredStyleVariations)||void 0===_blockEditorSettings$2?void 0:_blockEditorSettings$2.value)&&void 0!==_blockEditorSettings$?_blockEditorSettings$:{};return blocks.map((block=>{var _block$attributes;const blockName=block.name;if(!(0,build_module.zb)(blockName,"defaultStylePicker",!0))return block;if(!preferredStyleVariations[blockName])return block;const className=null===(_block$attributes=block.attributes)||void 0===_block$attributes?void 0:_block$attributes.className;if(null!=className&&className.includes("is-style-"))return block;const{attributes:attributes={}}=block,blockStyle=preferredStyleVariations[blockName];return{...block,attributes:{...attributes,className:`${className||""} is-style-${blockStyle}`.trim()}}}))}const replaceBlocks=function(clientIds,blocks,indexToSelect){let initialPosition=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,meta=arguments.length>4?arguments[4]:void 0;return _ref7=>{let{select:select,dispatch:dispatch}=_ref7;clientIds=castArray(clientIds),blocks=getBlocksWithDefaultStylesApplied(castArray(blocks),select.getSettings());const rootClientId=select.getBlockRootClientId(clientIds[0]);for(let index=0;index<blocks.length;index++){const block=blocks[index];if(!select.canInsertBlockType(block.name,rootClientId))return}dispatch({type:"REPLACE_BLOCKS",clientIds:clientIds,blocks:blocks,time:Date.now(),indexToSelect:indexToSelect,initialPosition:initialPosition,meta:meta}),dispatch((_ref=>{let{select:select,dispatch:dispatch}=_ref;if(select.getBlockCount()>0)return;const{__unstableHasCustomAppender:__unstableHasCustomAppender}=select.getSettings();__unstableHasCustomAppender||dispatch.insertDefaultBlock()}))}};function replaceBlock(clientId,block){return replaceBlocks(clientId,block)}const createOnMove=type=>(clientIds,rootClientId)=>_ref8=>{let{select:select,dispatch:dispatch}=_ref8;select.canMoveBlocks(clientIds,rootClientId)&&dispatch({type:type,clientIds:castArray(clientIds),rootClientId:rootClientId})},moveBlocksDown=createOnMove("MOVE_BLOCKS_DOWN"),moveBlocksUp=createOnMove("MOVE_BLOCKS_UP"),moveBlocksToPosition=function(clientIds){let fromRootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",toRootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",index=arguments.length>3?arguments[3]:void 0;return _ref9=>{let{select:select,dispatch:dispatch}=_ref9;if(select.canMoveBlocks(clientIds,fromRootClientId)){if(fromRootClientId!==toRootClientId){if(!select.canRemoveBlocks(clientIds,fromRootClientId))return;if(!select.canInsertBlocks(clientIds,toRootClientId))return}dispatch({type:"MOVE_BLOCKS_TO_POSITION",fromRootClientId:fromRootClientId,toRootClientId:toRootClientId,clientIds:clientIds,index:index})}}};function moveBlockToPosition(clientId){let fromRootClientId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",toRootClientId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",index=arguments.length>3?arguments[3]:void 0;return moveBlocksToPosition([clientId],fromRootClientId,toRootClientId,index)}function insertBlock(block,index,rootClientId,updateSelection,meta){return insertBlocks([block],index,rootClientId,updateSelection,0,meta)}const insertBlocks=function(blocks,index,rootClientId){let updateSelection=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],initialPosition=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,meta=arguments.length>5?arguments[5]:void 0;return _ref10=>{let{select:select,dispatch:dispatch}=_ref10;null!==initialPosition&&"object"==typeof initialPosition&&(meta=initialPosition,initialPosition=0,(0,deprecated_build_module.Z)("meta argument in wp.data.dispatch('core/block-editor')",{since:"5.8",hint:"The meta argument is now the 6th argument of the function"})),blocks=getBlocksWithDefaultStylesApplied(castArray(blocks),select.getSettings());const allowedBlocks=[];for(const block of blocks){select.canInsertBlockType(block.name,rootClientId)&&allowedBlocks.push(block)}allowedBlocks.length&&dispatch({type:"INSERT_BLOCKS",blocks:allowedBlocks,index:index,rootClientId:rootClientId,time:Date.now(),updateSelection:updateSelection,initialPosition:updateSelection?initialPosition:null,meta:meta})}};function showInsertionPoint(rootClientId,index){let __unstableOptions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{__unstableWithInserter:__unstableWithInserter,operation:operation}=__unstableOptions;return{type:"SHOW_INSERTION_POINT",rootClientId:rootClientId,index:index,__unstableWithInserter:__unstableWithInserter,operation:operation}}const hideInsertionPoint=()=>_ref11=>{let{select:select,dispatch:dispatch}=_ref11;select.isBlockInsertionPointVisible()&&dispatch({type:"HIDE_INSERTION_POINT"})};function setTemplateValidity(isValid){return{type:"SET_TEMPLATE_VALIDITY",isValid:isValid}}const synchronizeTemplate=()=>_ref12=>{let{select:select,dispatch:dispatch}=_ref12;dispatch({type:"SYNCHRONIZE_TEMPLATE"});const blocks=select.getBlocks(),template=select.getTemplate(),updatedBlockList=(0,build_module.fw)(blocks,template);dispatch.resetBlocks(updatedBlockList)},__unstableDeleteSelection=isForward=>_ref13=>{let{registry:registry,select:select,dispatch:dispatch}=_ref13;const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd();if(selectionAnchor.clientId===selectionFocus.clientId)return;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return!1;const anchorRootClientId=select.getBlockRootClientId(selectionAnchor.clientId);if(anchorRootClientId!==select.getBlockRootClientId(selectionFocus.clientId))return;const blockOrder=select.getBlockOrder(anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const targetSelection=isForward?selectionEnd:selectionStart,targetBlock=select.getBlock(targetSelection.clientId),targetBlockType=(0,build_module.ck)(targetBlock.name);if(!targetBlockType.merge)return;const selectionA=selectionStart,selectionB=selectionEnd,blockA=select.getBlock(selectionA.clientId),blockAType=(0,build_module.ck)(blockA.name),blockB=select.getBlock(selectionB.clientId),blockBType=(0,build_module.ck)(blockB.name),htmlA=blockA.attributes[selectionA.attributeKey],htmlB=blockB.attributes[selectionB.attributeKey],attributeDefinitionA=blockAType.attributes[selectionA.attributeKey],attributeDefinitionB=blockBType.attributes[selectionB.attributeKey];let valueA=(0,rich_text_build_module.Ue)({html:htmlA,...mapRichTextSettings(attributeDefinitionA)}),valueB=(0,rich_text_build_module.Ue)({html:htmlB,...mapRichTextSettings(attributeDefinitionB)});valueA=(0,rich_text_build_module.Od)(valueA,selectionA.offset,valueA.text.length),valueB=(0,rich_text_build_module.$T)(valueB,"",0,selectionB.offset);const cloneA=(0,build_module.Wm)(blockA,{[selectionA.attributeKey]:(0,rich_text_build_module.Jz)({value:valueA,...mapRichTextSettings(attributeDefinitionA)})}),cloneB=(0,build_module.Wm)(blockB,{[selectionB.attributeKey]:(0,rich_text_build_module.Jz)({value:valueB,...mapRichTextSettings(attributeDefinitionB)})}),followingBlock=isForward?cloneA:cloneB,blocksWithTheSameType=blockA.name===blockB.name?[followingBlock]:(0,build_module.m4)(followingBlock,targetBlockType.name);if(!blocksWithTheSameType||!blocksWithTheSameType.length)return;let updatedAttributes;if(isForward){const blockToMerge=blocksWithTheSameType.pop();updatedAttributes=targetBlockType.merge(blockToMerge.attributes,cloneB.attributes)}else{const blockToMerge=blocksWithTheSameType.shift();updatedAttributes=targetBlockType.merge(cloneA.attributes,blockToMerge.attributes)}const newAttributeKey=retrieveSelectedAttribute(updatedAttributes),convertedHtml=updatedAttributes[newAttributeKey],convertedValue=(0,rich_text_build_module.Ue)({html:convertedHtml,...mapRichTextSettings(targetBlockType.attributes[newAttributeKey])}),newOffset=convertedValue.text.indexOf(""),newValue=(0,rich_text_build_module.Od)(convertedValue,newOffset,newOffset+1),newHtml=(0,rich_text_build_module.Jz)({value:newValue,...mapRichTextSettings(targetBlockType.attributes[newAttributeKey])});updatedAttributes[newAttributeKey]=newHtml;const selectedBlockClientIds=select.getSelectedBlockClientIds(),replacement=[...isForward?blocksWithTheSameType:[],{...targetBlock,attributes:{...targetBlock.attributes,...updatedAttributes}},...isForward?[]:blocksWithTheSameType];registry.batch((()=>{dispatch.selectionChange(targetBlock.clientId,newAttributeKey,newOffset,newOffset),dispatch.replaceBlocks(selectedBlockClientIds,replacement,0,select.getSelectedBlocksInitialCaretPosition())}))},__unstableSplitSelection=()=>_ref14=>{let{select:select,dispatch:dispatch}=_ref14;const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd();if(selectionAnchor.clientId===selectionFocus.clientId)return;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return;const anchorRootClientId=select.getBlockRootClientId(selectionAnchor.clientId);if(anchorRootClientId!==select.getBlockRootClientId(selectionFocus.clientId))return;const blockOrder=select.getBlockOrder(anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const selectionA=selectionStart,selectionB=selectionEnd,blockA=select.getBlock(selectionA.clientId),blockAType=(0,build_module.ck)(blockA.name),blockB=select.getBlock(selectionB.clientId),blockBType=(0,build_module.ck)(blockB.name),htmlA=blockA.attributes[selectionA.attributeKey],htmlB=blockB.attributes[selectionB.attributeKey],attributeDefinitionA=blockAType.attributes[selectionA.attributeKey],attributeDefinitionB=blockBType.attributes[selectionB.attributeKey];let valueA=(0,rich_text_build_module.Ue)({html:htmlA,...mapRichTextSettings(attributeDefinitionA)}),valueB=(0,rich_text_build_module.Ue)({html:htmlB,...mapRichTextSettings(attributeDefinitionB)});valueA=(0,rich_text_build_module.Od)(valueA,selectionA.offset,valueA.text.length),valueB=(0,rich_text_build_module.Od)(valueB,0,selectionB.offset),dispatch.replaceBlocks(select.getSelectedBlockClientIds(),[{...blockA,attributes:{...blockA.attributes,[selectionA.attributeKey]:(0,rich_text_build_module.Jz)({value:valueA,...mapRichTextSettings(attributeDefinitionA)})}},(0,build_module.j4)((0,build_module.UT)()),{...blockB,attributes:{...blockB.attributes,[selectionB.attributeKey]:(0,rich_text_build_module.Jz)({value:valueB,...mapRichTextSettings(attributeDefinitionB)})}}],1,select.getSelectedBlocksInitialCaretPosition())},__unstableExpandSelection=()=>_ref15=>{let{select:select,dispatch:dispatch}=_ref15;const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd();dispatch.selectionChange({start:{clientId:selectionAnchor.clientId},end:{clientId:selectionFocus.clientId}})},mergeBlocks=(firstBlockClientId,secondBlockClientId)=>_ref16=>{let{registry:registry,select:select,dispatch:dispatch}=_ref16;const blocks=[firstBlockClientId,secondBlockClientId];dispatch({type:"MERGE_BLOCKS",blocks:blocks});const[clientIdA,clientIdB]=blocks,blockA=select.getBlock(clientIdA),blockAType=(0,build_module.ck)(blockA.name);if(!blockAType)return;const blockB=select.getBlock(clientIdB);if(blockAType&&!blockAType.merge){const blocksWithTheSameType=(0,build_module.m4)(blockB,blockAType.name);if(1!==(null==blocksWithTheSameType?void 0:blocksWithTheSameType.length))return void dispatch.selectBlock(blockA.clientId);const[blockWithSameType]=blocksWithTheSameType;return blockWithSameType.innerBlocks.length<1?void dispatch.selectBlock(blockA.clientId):void registry.batch((()=>{dispatch.insertBlocks(blockWithSameType.innerBlocks,void 0,clientIdA),dispatch.removeBlock(clientIdB),dispatch.selectBlock(blockWithSameType.innerBlocks[0].clientId)}))}const blockBType=(0,build_module.ck)(blockB.name),{clientId:clientId,attributeKey:attributeKey,offset:offset}=select.getSelectionStart(),attributeDefinition=(clientId===clientIdA?blockAType:blockBType).attributes[attributeKey],canRestoreTextSelection=(clientId===clientIdA||clientId===clientIdB)&&void 0!==attributeKey&&void 0!==offset&&!!attributeDefinition;attributeDefinition||("number"==typeof attributeKey?window.console.error("RichText needs an identifier prop that is the block attribute key of the attribute it controls. Its type is expected to be a string, but was "+typeof attributeKey):window.console.error("The RichText identifier prop does not match any attributes defined by the block."));const cloneA=(0,build_module.Wm)(blockA),cloneB=(0,build_module.Wm)(blockB);if(canRestoreTextSelection){const selectedBlock=clientId===clientIdA?cloneA:cloneB,html=selectedBlock.attributes[attributeKey],value=(0,rich_text_build_module.$T)((0,rich_text_build_module.Ue)({html:html,...mapRichTextSettings(attributeDefinition)}),"",offset,offset);selectedBlock.attributes[attributeKey]=(0,rich_text_build_module.Jz)({value:value,...mapRichTextSettings(attributeDefinition)})}const blocksWithTheSameType=blockA.name===blockB.name?[cloneB]:(0,build_module.m4)(cloneB,blockA.name);if(!blocksWithTheSameType||!blocksWithTheSameType.length)return;const updatedAttributes=blockAType.merge(cloneA.attributes,blocksWithTheSameType[0].attributes);if(canRestoreTextSelection){const newAttributeKey=retrieveSelectedAttribute(updatedAttributes),convertedHtml=updatedAttributes[newAttributeKey],convertedValue=(0,rich_text_build_module.Ue)({html:convertedHtml,...mapRichTextSettings(blockAType.attributes[newAttributeKey])}),newOffset=convertedValue.text.indexOf(""),newValue=(0,rich_text_build_module.Od)(convertedValue,newOffset,newOffset+1),newHtml=(0,rich_text_build_module.Jz)({value:newValue,...mapRichTextSettings(blockAType.attributes[newAttributeKey])});updatedAttributes[newAttributeKey]=newHtml,dispatch.selectionChange(blockA.clientId,newAttributeKey,newOffset,newOffset)}dispatch.replaceBlocks([blockA.clientId,blockB.clientId],[{...blockA,attributes:{...blockA.attributes,...updatedAttributes}},...blocksWithTheSameType.slice(1)],0)},removeBlocks=function(clientIds){let selectPrevious=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _ref17=>{let{select:select,dispatch:dispatch}=_ref17;if(!clientIds||!clientIds.length)return;clientIds=castArray(clientIds);const rootClientId=select.getBlockRootClientId(clientIds[0]);select.canRemoveBlocks(clientIds,rootClientId)&&(selectPrevious&&dispatch.selectPreviousBlock(clientIds[0]),dispatch({type:"REMOVE_BLOCKS",clientIds:clientIds}),dispatch((_ref=>{let{select:select,dispatch:dispatch}=_ref;if(select.getBlockCount()>0)return;const{__unstableHasCustomAppender:__unstableHasCustomAppender}=select.getSettings();__unstableHasCustomAppender||dispatch.insertDefaultBlock()})))}};function removeBlock(clientId,selectPrevious){return removeBlocks([clientId],selectPrevious)}function replaceInnerBlocks(rootClientId,blocks){let updateSelection=arguments.length>2&&void 0!==arguments[2]&&arguments[2],initialPosition=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{type:"REPLACE_INNER_BLOCKS",rootClientId:rootClientId,blocks:blocks,updateSelection:updateSelection,initialPosition:updateSelection?initialPosition:null,time:Date.now()}}function toggleBlockMode(clientId){return{type:"TOGGLE_BLOCK_MODE",clientId:clientId}}function __experimentalHideBlockInterface(){return{type:"HIDE_BLOCK_INTERFACE"}}function __experimentalShowBlockInterface(){return{type:"SHOW_BLOCK_INTERFACE"}}function startTyping(){return{type:"START_TYPING"}}function stopTyping(){return{type:"STOP_TYPING"}}function startDraggingBlocks(){let clientIds=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"START_DRAGGING_BLOCKS",clientIds:clientIds}}function stopDraggingBlocks(){return{type:"STOP_DRAGGING_BLOCKS"}}function enterFormattedText(){return(0,deprecated_build_module.Z)('wp.data.dispatch( "core/block-editor" ).enterFormattedText',{since:"6.1",version:"6.3"}),{type:"DO_NOTHING"}}function exitFormattedText(){return(0,deprecated_build_module.Z)('wp.data.dispatch( "core/block-editor" ).exitFormattedText',{since:"6.1",version:"6.3"}),{type:"DO_NOTHING"}}function selectionChange(clientId,attributeKey,startOffset,endOffset){return"string"==typeof clientId?{type:"SELECTION_CHANGE",clientId:clientId,attributeKey:attributeKey,startOffset:startOffset,endOffset:endOffset}:{type:"SELECTION_CHANGE",...clientId}}const insertDefaultBlock=(attributes,rootClientId,index)=>_ref18=>{let{dispatch:dispatch}=_ref18;const defaultBlockName=(0,build_module.UT)();if(!defaultBlockName)return;const block=(0,build_module.j4)(defaultBlockName,attributes);return dispatch.insertBlock(block,index,rootClientId)};function updateBlockListSettings(clientId,settings){return{type:"UPDATE_BLOCK_LIST_SETTINGS",clientId:clientId,settings:settings}}function updateSettings(settings){return{type:"UPDATE_SETTINGS",settings:settings}}function __unstableSaveReusableBlock(id,updatedId){return{type:"SAVE_REUSABLE_BLOCK_SUCCESS",id:id,updatedId:updatedId}}function __unstableMarkLastChangeAsPersistent(){return{type:"MARK_LAST_CHANGE_AS_PERSISTENT"}}function __unstableMarkNextChangeAsNotPersistent(){return{type:"MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"}}const __unstableMarkAutomaticChange=()=>_ref19=>{let{dispatch:dispatch}=_ref19;dispatch({type:"MARK_AUTOMATIC_CHANGE"});const{requestIdleCallback:requestIdleCallback=(cb=>setTimeout(cb,100))}=window;requestIdleCallback((()=>{dispatch({type:"MARK_AUTOMATIC_CHANGE_FINAL"})}))},setNavigationMode=function(){let isNavigationMode=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return _ref20=>{let{dispatch:dispatch}=_ref20;dispatch.__unstableSetEditorMode(isNavigationMode?"navigation":"edit")}},__unstableSetEditorMode=mode=>_ref21=>{let{dispatch:dispatch,select:select}=_ref21;if("zoom-out"===mode){const firstSelectedClientId=select.getBlockSelectionStart();firstSelectedClientId&&dispatch.selectBlock(select.getBlockHierarchyRootClientId(firstSelectedClientId))}dispatch({type:"SET_EDITOR_MODE",mode:mode}),"navigation"===mode?(0,a11y_build_module.D)((0,i18n_build_module.__)("You are currently in navigation mode. Navigate blocks using the Tab key and Arrow keys. Use Left and Right Arrow keys to move between nesting levels. To exit navigation mode and edit the selected block, press Enter.")):"edit"===mode?(0,a11y_build_module.D)((0,i18n_build_module.__)("You are currently in edit mode. To return to the navigation mode, press Escape.")):"zoom-out"===mode&&(0,a11y_build_module.D)((0,i18n_build_module.__)("You are currently in zoom-out mode."))},setBlockMovingClientId=function(){let hasBlockMovingClientId=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _ref22=>{let{dispatch:dispatch}=_ref22;dispatch({type:"SET_BLOCK_MOVING_MODE",hasBlockMovingClientId:hasBlockMovingClientId}),hasBlockMovingClientId&&(0,a11y_build_module.D)((0,i18n_build_module.__)("Use the Tab key and Arrow keys to choose new block location. Use Left and Right Arrow keys to move between nesting levels. Once location is selected press Enter or Space to move the block."))}},duplicateBlocks=function(clientIds){let updateSelection=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _ref23=>{let{select:select,dispatch:dispatch}=_ref23;if(!clientIds||!clientIds.length)return;const blocks=select.getBlocksByClientId(clientIds);if(blocks.some((block=>!block)))return;const blockNames=blocks.map((block=>block.name));if(blockNames.some((blockName=>!(0,build_module.zb)(blockName,"multiple",!0))))return;const rootClientId=select.getBlockRootClientId(clientIds[0]),clientIdsArray=castArray(clientIds),lastSelectedIndex=select.getBlockIndex(clientIdsArray[clientIdsArray.length-1]),clonedBlocks=blocks.map((block=>(0,build_module.mR)(block)));return dispatch.insertBlocks(clonedBlocks,lastSelectedIndex+1,rootClientId,updateSelection),clonedBlocks.length>1&&updateSelection&&dispatch.multiSelect(clonedBlocks[0].clientId,clonedBlocks[clonedBlocks.length-1].clientId),clonedBlocks.map((block=>block.clientId))}},insertBeforeBlock=clientId=>_ref24=>{let{select:select,dispatch:dispatch}=_ref24;if(!clientId)return;const rootClientId=select.getBlockRootClientId(clientId);if(select.getTemplateLock(rootClientId))return;const firstSelectedIndex=select.getBlockIndex(clientId);return dispatch.insertDefaultBlock({},rootClientId,firstSelectedIndex)},insertAfterBlock=clientId=>_ref25=>{let{select:select,dispatch:dispatch}=_ref25;if(!clientId)return;const rootClientId=select.getBlockRootClientId(clientId);if(select.getTemplateLock(rootClientId))return;const firstSelectedIndex=select.getBlockIndex(clientId);return dispatch.insertDefaultBlock({},rootClientId,firstSelectedIndex+1)};function toggleBlockHighlight(clientId,isHighlighted){return{type:"TOGGLE_BLOCK_HIGHLIGHT",clientId:clientId,isHighlighted:isHighlighted}}const flashBlock=clientId=>async _ref26=>{let{dispatch:dispatch}=_ref26;dispatch(toggleBlockHighlight(clientId,!0)),await new Promise((resolve=>setTimeout(resolve,150))),dispatch(toggleBlockHighlight(clientId,!1))};function setHasControlledInnerBlocks(clientId,hasControlledInnerBlocks){return{type:"SET_HAS_CONTROLLED_INNER_BLOCKS",hasControlledInnerBlocks:hasControlledInnerBlocks,clientId:clientId}}function setBlockVisibility(updates){return{type:"SET_BLOCK_VISIBILITY",updates:updates}}function __unstableSetTemporarilyEditingAsBlocks(temporarilyEditingAsBlocks){return{type:"SET_TEMPORARILY_EDITING_AS_BLOCKS",temporarilyEditingAsBlocks:temporarilyEditingAsBlocks}}const storeConfig={reducer:reducer,selectors:selectors_namespaceObject,actions:actions_namespaceObject},store=(0,redux_store.Z)("core/block-editor",{...storeConfig,persist:["preferences"]});(0,data_build_module.R9)("core/block-editor",{...storeConfig,persist:["preferences"]});const DEFAULT_BLOCK_EDIT_CONTEXT={name:"",isSelected:!1},Context=(0,react.createContext)(DEFAULT_BLOCK_EDIT_CONTEXT),{Provider:Provider}=Context;function useBlockEditContext(){return(0,react.useContext)(Context)}function useDisplayBlockControls(){const{isSelected:isSelected,clientId:clientId,name:name}=useBlockEditContext();return(0,use_select.Z)((select=>{if(isSelected)return!0;const{getBlockName:getBlockName,isFirstMultiSelectedBlock:isFirstMultiSelectedBlock,getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds}=select(store);return!!isFirstMultiSelectedBlock(clientId)&&getMultiSelectedBlockClientIds().every((id=>getBlockName(id)===name))}),[clientId,isSelected,name])}function BlockControlsFill(_ref){let{group:group="default",controls:controls,children:children,__experimentalShareWithChildBlocks:__experimentalShareWithChildBlocks=!1}=_ref;const Fill=function useBlockControlsFill(group,shareWithChildBlocks){const isDisplayed=useDisplayBlockControls(),{clientId:clientId}=useBlockEditContext(),isParentDisplayed=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,hasSelectedInnerBlock:hasSelectedInnerBlock}=select(store),{hasBlockSupport:hasBlockSupport}=select(build_module.h);return shareWithChildBlocks&&hasBlockSupport(getBlockName(clientId),"__experimentalExposeControlsToChildren",!1)&&hasSelectedInnerBlock(clientId)}),[shareWithChildBlocks,clientId]);var _groups$group;return isDisplayed?null===(_groups$group=block_controls_groups[group])||void 0===_groups$group?void 0:_groups$group.Fill:isParentDisplayed?block_controls_groups.parent.Fill:null}(group,__experimentalShareWithChildBlocks);return Fill?(0,react.createElement)(style_provider.Z,{document:document},(0,react.createElement)(Fill,null,(fillProps=>{const value=(0,lodash.isEmpty)(fillProps)?null:fillProps;return(0,react.createElement)(toolbar_context.Z.Provider,{value:value},"default"===group&&(0,react.createElement)(toolbar_group.Z,{controls:controls}),children)}))):null}var use_slot_fills=__webpack_require__("./packages/components/build-module/slot-fill/bubbles-virtually/use-slot-fills.js");function BlockControlsSlot(_ref){let{group:group="default",...props}=_ref;const accessibleToolbarState=(0,react.useContext)(toolbar_context.Z),Slot=block_controls_groups[group].Slot,fills=(0,use_slot_fills.Z)(Slot.__unstableName);return Boolean(fills&&fills.length)?"default"===group?(0,react.createElement)(Slot,(0,esm_extends.Z)({},props,{bubblesVirtually:!0,fillProps:accessibleToolbarState})):(0,react.createElement)(toolbar_group.Z,null,(0,react.createElement)(Slot,(0,esm_extends.Z)({},props,{bubblesVirtually:!0,fillProps:accessibleToolbarState}))):null}const BlockControls=BlockControlsFill;BlockControls.Slot=BlockControlsSlot;var block_controls=BlockControls,toolbar_dropdown_menu=__webpack_require__("./packages/components/build-module/toolbar-dropdown-menu/index.js"),menu_group=__webpack_require__("./packages/components/build-module/menu-group/index.js"),menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js"),justify_left=__webpack_require__("./packages/icons/build-module/library/justify-left.js"),justify_center=__webpack_require__("./packages/icons/build-module/library/justify-center.js"),justify_right=__webpack_require__("./packages/icons/build-module/library/justify-right.js"),justify_space_between=__webpack_require__("./packages/icons/build-module/library/justify-space-between.js"),arrow_right=__webpack_require__("./packages/icons/build-module/library/arrow-right.js"),arrow_down=__webpack_require__("./packages/icons/build-module/library/arrow-down.js"),component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),flex_item_component=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),toggle_group_control_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control/component.js"),toggle_group_control_option_icon_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option-icon/component.js"),toggle_control=__webpack_require__("./packages/components/build-module/toggle-control/index.js");function appendSelectors(selectors){let append=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return selectors.split(",").map((subselector=>`.editor-styles-wrapper ${subselector}${append?` ${append}`:""}`)).join(",")}function getBlockGapCSS(selector,layoutDefinitions,layoutType,blockGapValue){var _layoutDefinitions$la,_layoutDefinitions$la2;let output="";return null!=layoutDefinitions&&null!==(_layoutDefinitions$la=layoutDefinitions[layoutType])&&void 0!==_layoutDefinitions$la&&null!==(_layoutDefinitions$la2=_layoutDefinitions$la.spacingStyles)&&void 0!==_layoutDefinitions$la2&&_layoutDefinitions$la2.length&&blockGapValue&&layoutDefinitions[layoutType].spacingStyles.forEach((gapStyle=>{output+=`${appendSelectors(selector,gapStyle.selector.trim())} { `,output+=Object.entries(gapStyle.rules).map((_ref=>{let[cssProperty,value]=_ref;return`${cssProperty}: ${value||blockGapValue}`})).join("; "),output+="; }"})),output}function getAlignmentsInfo(layout){const{contentSize:contentSize,wideSize:wideSize}=layout,alignmentInfo={},sizeRegex=/^(?!0)\d+(px|em|rem|vw|vh|%)?$/i;return sizeRegex.test(contentSize)&&(alignmentInfo.none=(0,i18n_build_module.gB)((0,i18n_build_module.__)("Max %s wide"),contentSize)),sizeRegex.test(wideSize)&&(alignmentInfo.wide=(0,i18n_build_module.gB)((0,i18n_build_module.__)("Max %s wide"),wideSize)),alignmentInfo}var utils=__webpack_require__("./packages/components/build-module/unit-control/utils.js"),box_control=__webpack_require__("./packages/components/build-module/box-control/index.js"),unit_control=__webpack_require__("./packages/components/build-module/unit-control/index.js"),use_ref_effect=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js");const BlockRefs=(0,react.createContext)({refs:new Map,callbacks:new Map});function BlockRefsProvider(_ref){let{children:children}=_ref;const value=(0,react.useMemo)((()=>({refs:new Map,callbacks:new Map})),[]);return(0,react.createElement)(BlockRefs.Provider,{value:value},children)}function useBlockRefProvider(clientId){const{refs:refs,callbacks:callbacks}=(0,react.useContext)(BlockRefs),ref=(0,react.useRef)();return(0,react.useLayoutEffect)((()=>(refs.set(ref,clientId),()=>{refs.delete(ref)})),[clientId]),(0,use_ref_effect.Z)((element=>{ref.current=element,callbacks.forEach(((id,setElement)=>{clientId===id&&setElement(element)}))}),[clientId])}function useBlockRef(clientId){const{refs:refs}=(0,react.useContext)(BlockRefs),freshClientId=(0,react.useRef)();return freshClientId.current=clientId,(0,react.useMemo)((()=>({get current(){let element=null;for(const[ref,id]of refs.entries())id===freshClientId.current&&ref.current&&(element=ref.current);return element}})),[])}function useBlockElement(clientId){const{callbacks:callbacks}=(0,react.useContext)(BlockRefs),ref=useBlockRef(clientId),[element,setElement]=(0,react.useState)(null);return(0,react.useLayoutEffect)((()=>{if(clientId)return callbacks.set(setElement,clientId),()=>{callbacks.delete(setElement)}}),[clientId]),ref.current||element}function isValueSpacingPreset(value){return!(null==value||!value.includes)&&("0"===value||value.includes("var:preset|spacing|"))}function getSpacingPresetCssVar(value){if(!value)return;const slug=value.match(/var:preset\|spacing\|(.+)/);return slug?`var(--wp--preset--spacing--${slug[1]})`:value}function getSpacingPresetSlug(value){if(!value)return;if("0"===value||"default"===value)return value;const slug=value.match(/var:preset\|spacing\|(.+)/);return slug?slug[1]:void 0}const LABELS={all:(0,i18n_build_module.__)("All sides"),top:(0,i18n_build_module.__)("Top"),bottom:(0,i18n_build_module.__)("Bottom"),left:(0,i18n_build_module.__)("Left"),right:(0,i18n_build_module.__)("Right"),mixed:(0,i18n_build_module.__)("Mixed"),vertical:(0,i18n_build_module.__)("Vertical"),horizontal:(0,i18n_build_module.__)("Horizontal")},DEFAULT_VALUES={top:void 0,right:void 0,bottom:void 0,left:void 0},ALL_SIDES=["top","right","bottom","left"];function mode(arr){return arr.sort(((a,b)=>arr.filter((v=>v===a)).length-arr.filter((v=>v===b)).length)).pop()}function isValuesMixed(){let values=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},sides=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ALL_SIDES;return Object.values(values).length>=1&&Object.values(values).length<sides.length||new Set(Object.values(values)).size>1}function isValuesDefined(values){return null!=values&&!(0,lodash.isEmpty)(Object.values(values).filter((value=>!!value)))}var base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),box_control_utils=__webpack_require__("./packages/components/build-module/box-control/utils.js"),h_stack_component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),range_control=__webpack_require__("./packages/components/build-module/range-control/index.js"),custom_select_control=__webpack_require__("./packages/components/build-module/custom-select-control/index.js"),library_settings=__webpack_require__("./packages/icons/build-module/library/settings.js");const blockedPaths=["color","border","dimensions","typography","spacing"],deprecatedFlags={"color.palette":settings=>settings.colors,"color.gradients":settings=>settings.gradients,"color.custom":settings=>void 0===settings.disableCustomColors?void 0:!settings.disableCustomColors,"color.customGradient":settings=>void 0===settings.disableCustomGradients?void 0:!settings.disableCustomGradients,"typography.fontSizes":settings=>settings.fontSizes,"typography.customFontSize":settings=>void 0===settings.disableCustomFontSizes?void 0:!settings.disableCustomFontSizes,"typography.lineHeight":settings=>settings.enableCustomLineHeight,"spacing.units":settings=>{if(void 0!==settings.enableCustomUnits)return!0===settings.enableCustomUnits?["px","em","rem","vh","vw","%"]:settings.enableCustomUnits},"spacing.padding":settings=>settings.enableCustomSpacing},prefixedFlags={"border.customColor":"border.color","border.customStyle":"border.style","border.customWidth":"border.width","typography.customFontStyle":"typography.fontStyle","typography.customFontWeight":"typography.fontWeight","typography.customLetterSpacing":"typography.letterSpacing","typography.customTextDecorations":"typography.textDecoration","typography.customTextTransforms":"typography.textTransform","border.customRadius":"border.radius","spacing.customMargin":"spacing.margin","spacing.customPadding":"spacing.padding","typography.customLineHeight":"typography.lineHeight"};function use_setting_useSetting(path){const{name:blockName,clientId:clientId}=useBlockEditContext();return(0,use_select.Z)((select=>{if(blockedPaths.includes(path))return void console.warn("Top level useSetting paths are disabled. Please use a subpath to query the information needed.");let result=(0,hooks_build_module.O)("blockEditor.useSetting.before",void 0,path,clientId,blockName);if(void 0!==result)return result;const normalizedPath=(path=>prefixedFlags[path]||path)(path),candidates=[clientId,...select(store).getBlockParents(clientId,!0)];for(const candidateClientId of candidates){const candidateBlockName=select(store).getBlockName(candidateClientId);if((0,build_module.zb)(candidateBlockName,"__experimentalSettings",!1)){var _get;const candidateAtts=select(store).getBlockAttributes(candidateClientId);if(result=null!==(_get=(0,lodash.get)(candidateAtts,`settings.blocks.${blockName}.${normalizedPath}`))&&void 0!==_get?_get:(0,lodash.get)(candidateAtts,`settings.${normalizedPath}`),void 0!==result)break}}const settings=select(store).getSettings();if(void 0===result){var _get2;const defaultsPath=`__experimentalFeatures.${normalizedPath}`,blockPath=`__experimentalFeatures.blocks.${blockName}.${normalizedPath}`;result=null!==(_get2=(0,lodash.get)(settings,blockPath))&&void 0!==_get2?_get2:(0,lodash.get)(settings,defaultsPath)}var _ref,_result$custom;if(void 0!==result)return build_module.yg[normalizedPath]?null!==(_ref=null!==(_result$custom=result.custom)&&void 0!==_result$custom?_result$custom:result.theme)&&void 0!==_ref?_ref:result.default:result;const deprecatedSettingsValue=deprecatedFlags[normalizedPath]?deprecatedFlags[normalizedPath](settings):void 0;return void 0!==deprecatedSettingsValue?deprecatedSettingsValue:"typography.dropCap"===normalizedPath||void 0}),[blockName,clientId,path])}const CUSTOM_VALUE_SETTINGS={px:{max:300,steps:1},"%":{max:100,steps:1},vw:{max:100,steps:1},vh:{max:100,steps:1},em:{max:10,steps:.1},rm:{max:10,steps:.1}};function SpacingInputControl(_ref){var _CUSTOM_VALUE_SETTING,_CUSTOM_VALUE_SETTING2,_CUSTOM_VALUE_SETTING3,_CUSTOM_VALUE_SETTING4,_spacingSizes$current;let{spacingSizes:spacingSizes,value:value,side:side,onChange:onChange,isMixed:isMixed=!1,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;value=function getPresetValueFromCustomValue(value,spacingSizes){if(isValueSpacingPreset(value))return value;const spacingMatch=spacingSizes.find((size=>String(size.size)===String(value)));return null!=spacingMatch&&spacingMatch.slug?`var:preset|spacing|${spacingMatch.slug}`:value}(value,spacingSizes);let selectListSizes=spacingSizes;const showRangeControl=spacingSizes.length<=8,disableCustomSpacingSizes=(0,use_select.Z)((select=>{const editorSettings=select(store).getSettings();return null==editorSettings?void 0:editorSettings.disableCustomSpacingSizes})),[showCustomValueControl,setShowCustomValueControl]=(0,react.useState)(!disableCustomSpacingSizes&&void 0!==value&&!isValueSpacingPreset(value)),units=(0,utils.nj)({availableUnits:use_setting_useSetting("spacing.units")||["px","em","rem"]});let currentValue=null;!showRangeControl&&!showCustomValueControl&&void 0!==value&&(!isValueSpacingPreset(value)||isValueSpacingPreset(value)&&isMixed)?(selectListSizes=[...spacingSizes,{name:isMixed?(0,i18n_build_module.__)("Mixed"):(0,i18n_build_module.gB)((0,i18n_build_module.__)("Custom (%s)"),value),slug:"custom",size:value}],currentValue=selectListSizes.length-1):isMixed||(currentValue=showCustomValueControl?function getCustomValueFromPreset(value,spacingSizes){if(!isValueSpacingPreset(value))return value;const slug=getSpacingPresetSlug(value),spacingSize=spacingSizes.find((size=>String(size.slug)===slug));return null==spacingSize?void 0:spacingSize.size}(value,spacingSizes):function getSliderValueFromPreset(presetValue,spacingSizes){if(void 0===presetValue)return 0;const slug=0===parseFloat(presetValue,10)?"0":getSpacingPresetSlug(presetValue),sliderValue=spacingSizes.findIndex((spacingSize=>String(spacingSize.slug)===slug));return-1!==sliderValue?sliderValue:NaN}(value,spacingSizes));const selectedUnit=(0,react.useMemo)((()=>(0,utils.YX)(currentValue)),[currentValue])[1]||units[0].value,customTooltipContent=newValue=>{var _spacingSizes$newValu;return void 0===value||null===(_spacingSizes$newValu=spacingSizes[newValue])||void 0===_spacingSizes$newValu?void 0:_spacingSizes$newValu.name},customRangeValue=parseFloat(currentValue,10),getNewPresetValue=(newSize,controlType)=>{var _spacingSizes$newSize;const size=parseInt(newSize,10);if("selectList"===controlType){if(0===size)return;if(1===size)return"0"}else if(0===size)return"0";return`var:preset|spacing|${null===(_spacingSizes$newSize=spacingSizes[newSize])||void 0===_spacingSizes$newSize?void 0:_spacingSizes$newSize.slug}`},allPlaceholder=isMixed?(0,i18n_build_module.__)("Mixed"):null,currentValueHint=isMixed?(0,i18n_build_module.__)("Mixed"):customTooltipContent(currentValue),options=selectListSizes.map(((size,index)=>({key:index,name:size.name}))),marks=spacingSizes.map(((newValue,index)=>({value:index,label:void 0}))),ariaLabel=(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s %2$s"),LABELS[side],null==type?void 0:type.toLowerCase()),showHint=showRangeControl&&!showCustomValueControl&&void 0!==currentValueHint;return(0,react.createElement)(react.Fragment,null,"all"!==side&&(0,react.createElement)(h_stack_component.Z,{className:"components-spacing-sizes-control__side-labels"},(0,react.createElement)(base_control.ZP.VisualLabel,{className:"components-spacing-sizes-control__side-label"},LABELS[side]),showHint&&(0,react.createElement)(base_control.ZP.VisualLabel,{className:"components-spacing-sizes-control__hint-single"},currentValueHint)),"all"===side&&showHint&&(0,react.createElement)(base_control.ZP.VisualLabel,{className:"components-spacing-sizes-control__hint-all"},currentValueHint),!disableCustomSpacingSizes&&(0,react.createElement)(build_module_button.Z,{label:showCustomValueControl?(0,i18n_build_module.__)("Use size preset"):(0,i18n_build_module.__)("Set custom size"),icon:library_settings.Z,onClick:()=>{setShowCustomValueControl(!showCustomValueControl)},isPressed:showCustomValueControl,isSmall:!0,className:classnames_default()({"components-spacing-sizes-control__custom-toggle-all":"all"===side,"components-spacing-sizes-control__custom-toggle-single":"all"!==side}),iconSize:24}),showCustomValueControl&&(0,react.createElement)(react.Fragment,null,(0,react.createElement)(unit_control.ZP,{onMouseOver:onMouseOver,onMouseOut:onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut,onChange:newSize=>onChange((newSize=>isNaN(parseFloat(newSize))?void 0:newSize)(newSize)),value:currentValue,units:units,min:minimumCustomValue,placeholder:allPlaceholder,disableUnits:isMixed,label:ariaLabel,hideLabelFromVision:!0,className:"components-spacing-sizes-control__custom-value-input",size:"__unstable-large"}),(0,react.createElement)(range_control.Z,{onMouseOver:onMouseOver,onMouseOut:onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut,value:customRangeValue,min:0,max:null!==(_CUSTOM_VALUE_SETTING=null===(_CUSTOM_VALUE_SETTING2=CUSTOM_VALUE_SETTINGS[selectedUnit])||void 0===_CUSTOM_VALUE_SETTING2?void 0:_CUSTOM_VALUE_SETTING2.max)&&void 0!==_CUSTOM_VALUE_SETTING?_CUSTOM_VALUE_SETTING:10,step:null!==(_CUSTOM_VALUE_SETTING3=null===(_CUSTOM_VALUE_SETTING4=CUSTOM_VALUE_SETTINGS[selectedUnit])||void 0===_CUSTOM_VALUE_SETTING4?void 0:_CUSTOM_VALUE_SETTING4.steps)&&void 0!==_CUSTOM_VALUE_SETTING3?_CUSTOM_VALUE_SETTING3:.1,withInputField:!1,onChange:next=>{onChange([next,selectedUnit].join(""))},className:"components-spacing-sizes-control__custom-value-range",__nextHasNoMarginBottom:!0})),showRangeControl&&!showCustomValueControl&&(0,react.createElement)(range_control.Z,{onMouseOver:onMouseOver,onMouseOut:onMouseOut,className:"components-spacing-sizes-control__range-control",value:currentValue,onChange:newSize=>onChange(getNewPresetValue(newSize)),onMouseDown:event=>{var _event$nativeEvent;(null==event||null===(_event$nativeEvent=event.nativeEvent)||void 0===_event$nativeEvent?void 0:_event$nativeEvent.offsetX)<35&&void 0===value&&onChange("0")},withInputField:!1,"aria-valuenow":currentValue,"aria-valuetext":null===(_spacingSizes$current=spacingSizes[currentValue])||void 0===_spacingSizes$current?void 0:_spacingSizes$current.name,renderTooltipContent:customTooltipContent,min:0,max:spacingSizes.length-1,marks:marks,label:ariaLabel,hideLabelFromVision:!0,__nextHasNoMarginBottom:!0,onFocus:onMouseOver,onBlur:onMouseOut}),!showRangeControl&&!showCustomValueControl&&(0,react.createElement)(custom_select_control.Z,{className:"components-spacing-sizes-control__custom-select-control",value:options.find((option=>option.key===currentValue))||"",onChange:selection=>{onChange(getNewPresetValue(selection.selectedItem.key,"selectList"))},options:options,label:ariaLabel,hideLabelFromVision:!0,__nextUnconstrainedWidth:!0,size:"__unstable-large",onMouseOver:onMouseOver,onMouseOut:onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut}))}function AllInputControl(_ref){let{onChange:onChange,values:values,sides:sides,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const allValue=function getAllRawValue(){let values=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mode(Object.values(values))}(values),isMixed=isValuesDefined(values)&&isValuesMixed(values,sides);return(0,react.createElement)(SpacingInputControl,{value:allValue,onChange:next=>{const nextValues=(0,box_control_utils.gB)(values,next,sides);onChange(nextValues)},side:"all",spacingSizes:spacingSizes,isMixed:isMixed,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut})}function BoxInputControls(_ref){let{values:values,sides:sides,onChange:onChange,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const filteredSides=null!=sides&&sides.length?ALL_SIDES.filter((side=>sides.includes(side))):ALL_SIDES,createHandleOnChange=side=>next=>{const nextValues={...values};nextValues[side]=next,onChange(nextValues)};return(0,react.createElement)(react.Fragment,null,filteredSides.map((side=>(0,react.createElement)(SpacingInputControl,{value:values[side],label:LABELS[side],key:`spacing-sizes-control-${side}`,withInputField:!1,side:side,onChange:createHandleOnChange(side),spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}))))}const groupedSides=["vertical","horizontal"];function AxialInputControls(_ref){let{onChange:onChange,values:values,sides:sides,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const createHandleOnChange=side=>next=>{if(!onChange)return;const nextValues={...values};"vertical"===side&&(nextValues.top=next,nextValues.bottom=next),"horizontal"===side&&(nextValues.left=next,nextValues.right=next),onChange(nextValues)},filteredSides=null!=sides&&sides.length?groupedSides.filter((side=>sides.includes(side))):groupedSides;return(0,react.createElement)(react.Fragment,null,filteredSides.map((side=>{const axisValue="vertical"===side?values.top:values.left;return(0,react.createElement)(SpacingInputControl,{value:axisValue,onChange:createHandleOnChange(side),label:LABELS[side],key:`spacing-sizes-control-${side}`,withInputField:!1,side:side,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut})})))}var library_link=__webpack_require__("./packages/icons/build-module/library/link.js"),link_off=__webpack_require__("./packages/icons/build-module/library/link-off.js"),tooltip=__webpack_require__("./packages/components/build-module/tooltip/index.js");function LinkedButton(_ref){let{isLinked:isLinked,onClick:onClick}=_ref;const label=isLinked?(0,i18n_build_module.__)("Unlink sides"):(0,i18n_build_module.__)("Link sides");return(0,react.createElement)(tooltip.Z,{text:label},(0,react.createElement)("span",{className:"component-spacing-sizes-control__linked-button"},(0,react.createElement)(build_module_button.Z,{isSmall:!0,icon:isLinked?library_link.Z:link_off.Z,iconSize:24,"aria-label":label,onClick:onClick})))}function SpacingSizesControl(_ref){let{inputProps:inputProps,onChange:onChange,label:label=(0,i18n_build_module.__)("Spacing Control"),values:values,sides:sides,splitOnAxis:splitOnAxis=!1,useSelect:useSelect,minimumCustomValue:minimumCustomValue=0,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const spacingSizes=[{name:0,slug:"0",size:0},...use_setting_useSetting("spacing.spacingSizes")||[]];spacingSizes.length>8&&spacingSizes.unshift({name:(0,i18n_build_module.__)("Default"),slug:"default",size:void 0});const inputValues=values||DEFAULT_VALUES,hasInitialValue=isValuesDefined(values),hasOneSide=1===(null==sides?void 0:sides.length),[isLinked,setIsLinked]=(0,react.useState)(!hasInitialValue||!isValuesMixed(inputValues,sides)||hasOneSide),inputControlProps={...inputProps,onChange:nextValue=>{const newValues={...values,...nextValue};onChange(newValues)},isLinked:isLinked,sides:sides,values:inputValues,spacingSizes:spacingSizes,useSelect:useSelect,type:label,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut};return(0,react.createElement)("fieldset",{className:classnames_default()("component-spacing-sizes-control",{"is-unlinked":!isLinked})},(0,react.createElement)(base_control.ZP.VisualLabel,{as:"legend"},label),!hasOneSide&&(0,react.createElement)(LinkedButton,{onClick:()=>{setIsLinked(!isLinked)},isLinked:isLinked}),isLinked&&(0,react.createElement)(AllInputControl,(0,esm_extends.Z)({"aria-label":label},inputControlProps)),!isLinked&&splitOnAxis&&(0,react.createElement)(AxialInputControls,inputControlProps),!isLinked&&!splitOnAxis&&(0,react.createElement)(BoxInputControls,inputControlProps))}var tools_panel_item_component=__webpack_require__("./packages/components/build-module/tools-panel/tools-panel-item/component.js"),v_stack_component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),context=__webpack_require__("./packages/components/build-module/tools-panel/context.js");const InspectorControlsDefault=(0,slot_fill.up)("InspectorControls"),InspectorControlsAdvanced=(0,slot_fill.up)("InspectorAdvancedControls"),InspectorControlsBorder=(0,slot_fill.up)("InspectorControlsBorder"),InspectorControlsColor=(0,slot_fill.up)("InspectorControlsColor"),InspectorControlsDimensions=(0,slot_fill.up)("InspectorControlsDimensions"),InspectorControlsTypography=(0,slot_fill.up)("InspectorControlsTypography");var inspector_controls_groups={default:InspectorControlsDefault,advanced:InspectorControlsAdvanced,border:InspectorControlsBorder,color:InspectorControlsColor,dimensions:InspectorControlsDimensions,list:(0,slot_fill.up)("InspectorControlsListView"),typography:InspectorControlsTypography},process=__webpack_require__("./node_modules/process/browser.js");function InspectorControlsFill(_ref){var _groups$group;let{__experimentalGroup:group="default",children:children}=_ref;const isDisplayed=useDisplayBlockControls(),Fill=null===(_groups$group=inspector_controls_groups[group])||void 0===_groups$group?void 0:_groups$group.Fill;return Fill?isDisplayed?(0,react.createElement)(style_provider.Z,{document:document},(0,react.createElement)(Fill,null,(fillProps=>{const value=(0,lodash.isEmpty)(fillProps)?null:fillProps;return(0,react.createElement)(context.h.Provider,{value:value},children)}))):null:(void 0!==process&&process.env,null)}var use_slot=__webpack_require__("./packages/components/build-module/slot-fill/bubbles-virtually/use-slot.js"),tools_panel_component=__webpack_require__("./packages/components/build-module/tools-panel/tools-panel/component.js");const cleanEmptyObject=object=>{if(null===object||"object"!=typeof object||Array.isArray(object))return object;const cleanedNestedObjects=Object.fromEntries(Object.entries((0,lodash.mapValues)(object,cleanEmptyObject)).filter((_ref=>{let[,value]=_ref;return Boolean(value)})));return(0,lodash.isEmpty)(cleanedNestedObjects)?void 0:cleanedNestedObjects};function immutableSet(object,path,value){return(0,lodash.setWith)(object?(0,lodash.clone)(object):{},path,value,lodash.clone)}function transformStyles(activeSupports,migrationPaths,result,source,index,results){var _source$;if(Object.values(null!=activeSupports?activeSupports:{}).every((isActive=>!isActive)))return result;if(1===results.length&&result.innerBlocks.length===source.length)return result;let referenceBlockAttributes=null===(_source$=source[0])||void 0===_source$?void 0:_source$.attributes;if(results.length>1&&source.length>1){if(!source[index])return result;var _source$index;referenceBlockAttributes=null===(_source$index=source[index])||void 0===_source$index?void 0:_source$index.attributes}let returnBlock=result;return Object.entries(activeSupports).forEach((_ref2=>{let[support,isActive]=_ref2;isActive&&migrationPaths[support].forEach((path=>{const styleValue=(0,lodash.get)(referenceBlockAttributes,path);styleValue&&(returnBlock={...returnBlock,attributes:immutableSet(returnBlock.attributes,path,styleValue)})}))})),returnBlock}function shouldSkipSerialization(blockType,featureSet,feature){const support=(0,build_module.Dx)(blockType,featureSet),skipSerialization=null==support?void 0:support.__experimentalSkipSerialization;return Array.isArray(skipSerialization)?skipSerialization.includes(feature):skipSerialization}function BlockSupportToolsPanel(_ref){let{children:children,group:group,label:label}=_ref;const{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store),{getBlockAttributes:getBlockAttributes,getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds,getSelectedBlockClientId:getSelectedBlockClientId,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store),panelId=getSelectedBlockClientId(),resetAll=(0,react.useCallback)((function(){let resetFilters=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const newAttributes={},clientIds=hasMultiSelection()?getMultiSelectedBlockClientIds():[panelId];clientIds.forEach((clientId=>{const{style:style}=getBlockAttributes(clientId);let newBlockAttributes={style:style};resetFilters.forEach((resetFilter=>{newBlockAttributes={...newBlockAttributes,...resetFilter(newBlockAttributes)}})),newBlockAttributes={...newBlockAttributes,style:cleanEmptyObject(newBlockAttributes.style)},newAttributes[clientId]=newBlockAttributes})),updateBlockAttributes(clientIds,newAttributes,!0)}),[cleanEmptyObject,getBlockAttributes,getMultiSelectedBlockClientIds,hasMultiSelection,panelId,updateBlockAttributes]);return(0,react.createElement)(tools_panel_component.Z,{className:`${group}-block-support-panel`,label:label,resetAll:resetAll,key:panelId,panelId:panelId,hasInnerWrapper:!0,shouldRenderPlaceholderItems:!0,__experimentalFirstVisibleItemClass:"first",__experimentalLastVisibleItemClass:"last"},children)}function BlockSupportSlotContainer(_ref){let{Slot:Slot,...props}=_ref;const toolsPanelContext=(0,react.useContext)(context.h);return(0,react.createElement)(Slot,(0,esm_extends.Z)({},props,{fillProps:toolsPanelContext,bubblesVirtually:!0}))}var slot_process=__webpack_require__("./node_modules/process/browser.js");function InspectorControlsSlot(_ref){var _groups$group;let{__experimentalGroup:group="default",label:label,...props}=_ref;const Slot=null===(_groups$group=inspector_controls_groups[group])||void 0===_groups$group?void 0:_groups$group.Slot,slot=(0,use_slot.Z)(null==Slot?void 0:Slot.__unstableName),fills=(0,use_slot_fills.Z)(null==Slot?void 0:Slot.__unstableName);if(!Slot||!slot)return void 0!==slot_process&&slot_process.env,null;return Boolean(fills&&fills.length)?label?(0,react.createElement)(BlockSupportToolsPanel,{group:group,label:label},(0,react.createElement)(BlockSupportSlotContainer,(0,esm_extends.Z)({},props,{Slot:Slot}))):(0,react.createElement)(Slot,(0,esm_extends.Z)({},props,{bubblesVirtually:!0})):null}const InspectorControls=InspectorControlsFill;InspectorControls.Slot=InspectorControlsSlot;const InspectorAdvancedControls=props=>(0,react.createElement)(InspectorControlsFill,(0,esm_extends.Z)({},props,{__experimentalGroup:"advanced"}));InspectorAdvancedControls.Slot=props=>(0,react.createElement)(InspectorControlsSlot,(0,esm_extends.Z)({},props,{__experimentalGroup:"advanced"})),InspectorAdvancedControls.slotName="InspectorAdvancedControls";var inspector_controls=InspectorControls,is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js"),use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),popover=__webpack_require__("./packages/components/build-module/popover/index.js");var use_popover_scroll=function usePopoverScroll(scrollableRef){return(0,use_ref_effect.Z)((node=>{if(!scrollableRef)return;function onWheel(event){const{deltaX:deltaX,deltaY:deltaY}=event;scrollableRef.current.scrollBy(deltaX,deltaY)}const options={passive:!0};return node.addEventListener("wheel",onWheel,options),()=>{node.removeEventListener("wheel",onWheel,options)}}),[scrollableRef])};const MAX_POPOVER_RECOMPUTE_COUNTER=Number.MAX_SAFE_INTEGER;var block_popover=(0,react.forwardRef)((function BlockPopover(_ref,ref){let{clientId:clientId,bottomClientId:bottomClientId,children:children,__unstableRefreshSize:__unstableRefreshSize,__unstableCoverTarget:__unstableCoverTarget=!1,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,shift:shift=!0,...props}=_ref;const selectedElement=useBlockElement(clientId),lastSelectedElement=useBlockElement(null!=bottomClientId?bottomClientId:clientId),mergedRefs=(0,use_merge_refs.Z)([ref,use_popover_scroll(__unstableContentRef)]),[popoverDimensionsRecomputeCounter,forceRecomputePopoverDimensions]=(0,react.useReducer)((s=>(s+1)%MAX_POPOVER_RECOMPUTE_COUNTER),0);(0,react.useLayoutEffect)((()=>{if(!selectedElement)return;const observer=new window.MutationObserver(forceRecomputePopoverDimensions);return observer.observe(selectedElement,{attributes:!0}),()=>{observer.disconnect()}}),[selectedElement]);const style=(0,react.useMemo)((()=>popoverDimensionsRecomputeCounter<0||!selectedElement||lastSelectedElement!==selectedElement?{}:{position:"absolute",width:selectedElement.offsetWidth,height:selectedElement.offsetHeight}),[selectedElement,lastSelectedElement,__unstableRefreshSize,popoverDimensionsRecomputeCounter]),popoverAnchor=(0,react.useMemo)((()=>{if(!(popoverDimensionsRecomputeCounter<0||!selectedElement||bottomClientId&&!lastSelectedElement))return{getBoundingClientRect(){var _lastSelectedBCR$left,_lastSelectedBCR$top,_lastSelectedBCR$righ,_lastSelectedBCR$bott;const selectedBCR=selectedElement.getBoundingClientRect(),lastSelectedBCR=null==lastSelectedElement?void 0:lastSelectedElement.getBoundingClientRect(),left=Math.min(selectedBCR.left,null!==(_lastSelectedBCR$left=null==lastSelectedBCR?void 0:lastSelectedBCR.left)&&void 0!==_lastSelectedBCR$left?_lastSelectedBCR$left:1/0),top=Math.min(selectedBCR.top,null!==(_lastSelectedBCR$top=null==lastSelectedBCR?void 0:lastSelectedBCR.top)&&void 0!==_lastSelectedBCR$top?_lastSelectedBCR$top:1/0),width=Math.max(selectedBCR.right,null!==(_lastSelectedBCR$righ=lastSelectedBCR.right)&&void 0!==_lastSelectedBCR$righ?_lastSelectedBCR$righ:-1/0)-left,height=Math.max(selectedBCR.bottom,null!==(_lastSelectedBCR$bott=lastSelectedBCR.bottom)&&void 0!==_lastSelectedBCR$bott?_lastSelectedBCR$bott:-1/0)-top;return new window.DOMRect(left,top,width,height)},ownerDocument:selectedElement.ownerDocument}}),[bottomClientId,lastSelectedElement,selectedElement,popoverDimensionsRecomputeCounter]);return!selectedElement||bottomClientId&&!lastSelectedElement?null:(0,react.createElement)(popover.Z,(0,esm_extends.Z)({ref:mergedRefs,animate:!1,focusOnMount:!1,anchor:popoverAnchor,__unstableSlotName:__unstablePopoverSlot||null,placement:"top-start",resize:!1,flip:!1,shift:shift},props,{className:classnames_default()("block-editor-block-popover",props.className),variant:"unstyled"}),__unstableCoverTarget&&(0,react.createElement)("div",{style:style},children),!__unstableCoverTarget&&children)}));function hasMarginSupport(blockType){const support=(0,build_module.Dx)(blockType,SPACING_SUPPORT_KEY);return!!(!0===support||null!=support&&support.margin)}function useIsMarginDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!use_setting_useSetting("spacing.margin"),isInvalid=!useIsDimensionsSupportValid(blockName,"margin");return!hasMarginSupport(blockName)||isDisabled||isInvalid}function MarginEdit(props){var _style$spacing,_style$spacing2;const{name:blockName,attributes:{style:style},setAttributes:setAttributes,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=props,spacingSizes=use_setting_useSetting("spacing.spacingSizes"),units=(0,utils.nj)({availableUnits:use_setting_useSetting("spacing.units")||["%","px","em","rem","vw"]}),sides=useCustomSides(blockName,"margin"),splitOnAxis=sides&&sides.some((side=>AXIAL_SIDES.includes(side)));if(useIsMarginDisabled(props))return null;const onChange=next=>{const newStyle={...style,spacing:{...null==style?void 0:style.spacing,margin:next}};setAttributes({style:cleanEmptyObject(newStyle)})};return platform.Z.select({web:(0,react.createElement)(react.Fragment,null,(!spacingSizes||0===(null==spacingSizes?void 0:spacingSizes.length))&&(0,react.createElement)(box_control.Z,{values:null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.margin,onChange:onChange,label:(0,i18n_build_module.__)("Margin"),sides:sides,units:units,allowReset:!1,splitOnAxis:splitOnAxis,onMouseOver:onMouseOver,onMouseOut:onMouseOut}),(null==spacingSizes?void 0:spacingSizes.length)>0&&(0,react.createElement)(SpacingSizesControl,{values:null==style||null===(_style$spacing2=style.spacing)||void 0===_style$spacing2?void 0:_style$spacing2.margin,onChange:onChange,label:(0,i18n_build_module.__)("Margin"),sides:sides,units:units,allowReset:!1,splitOnAxis:!1,onMouseOver:onMouseOver,onMouseOut:onMouseOut})),native:null})}function MarginVisualizer(_ref2){var _attributes$style,_attributes$style$spa;let{clientId:clientId,attributes:attributes,forceShow:forceShow}=_ref2;const margin=null==attributes||null===(_attributes$style=attributes.style)||void 0===_attributes$style||null===(_attributes$style$spa=_attributes$style.spacing)||void 0===_attributes$style$spa?void 0:_attributes$style$spa.margin,style=(0,react.useMemo)((()=>{const marginTop=null!=margin&&margin.top?getSpacingPresetCssVar(null==margin?void 0:margin.top):0,marginRight=null!=margin&&margin.right?getSpacingPresetCssVar(null==margin?void 0:margin.right):0,marginBottom=null!=margin&&margin.bottom?getSpacingPresetCssVar(null==margin?void 0:margin.bottom):0,marginLeft=null!=margin&&margin.left?getSpacingPresetCssVar(null==margin?void 0:margin.left):0;return{borderTopWidth:marginTop,borderRightWidth:marginRight,borderBottomWidth:marginBottom,borderLeftWidth:marginLeft,top:marginTop?`calc(${marginTop} * -1)`:0,right:marginRight?`calc(${marginRight} * -1)`:0,bottom:marginBottom?`calc(${marginBottom} * -1)`:0,left:marginLeft?`calc(${marginLeft} * -1)`:0}}),[margin]),[isActive,setIsActive]=(0,react.useState)(!1),valueRef=(0,react.useRef)(margin),timeoutRef=(0,react.useRef)();return(0,react.useEffect)((()=>((0,is_shallow_equal_build_module.ZP)(margin,valueRef.current)||forceShow||(setIsActive(!0),valueRef.current=margin,timeoutRef.current=setTimeout((()=>{setIsActive(!1)}),400)),()=>{setIsActive(!1),timeoutRef.current&&window.clearTimeout(timeoutRef.current)})),[margin,forceShow]),isActive||forceShow?(0,react.createElement)(block_popover,{clientId:clientId,__unstableCoverTarget:!0,__unstableRefreshSize:margin,shift:!1},(0,react.createElement)("div",{className:"block-editor__padding-visualizer",style:style})):null}var spacer_component=__webpack_require__("./packages/components/build-module/spacer/component.js");const RANGE_CONTROL_CUSTOM_SETTINGS={px:{max:1e3,step:1},"%":{max:100,step:1},vw:{max:100,step:1},vh:{max:100,step:1},em:{max:50,step:.1},rem:{max:50,step:.1}};function HeightControl(_ref){var _units$,_RANGE_CONTROL_CUSTOM,_RANGE_CONTROL_CUSTOM2,_RANGE_CONTROL_CUSTOM3,_RANGE_CONTROL_CUSTOM4;let{onChange:onChange,label:label=(0,i18n_build_module.__)("Height"),value:value}=_ref;const customRangeValue=parseFloat(value),units=(0,utils.nj)({availableUnits:use_setting_useSetting("spacing.units")||["%","px","em","rem","vh","vw"]}),selectedUnit=(0,react.useMemo)((()=>(0,utils.YX)(value)),[value])[1]||(null===(_units$=units[0])||void 0===_units$?void 0:_units$.value)||"px";return(0,react.createElement)("fieldset",{className:"block-editor-height-control"},(0,react.createElement)(base_control.ZP.VisualLabel,{as:"legend"},label),(0,react.createElement)(component.Z,null,(0,react.createElement)(flex_item_component.Z,{isBlock:!0},(0,react.createElement)(unit_control.ZP,{value:value,units:units,onChange:onChange,onUnitChange:newUnit=>{const[currentValue,currentUnit]=(0,utils.YX)(value);["em","rem"].includes(newUnit)&&"px"===currentUnit?onChange((currentValue/16).toFixed(2)+newUnit):["em","rem"].includes(currentUnit)&&"px"===newUnit?onChange(Math.round(16*currentValue)+newUnit):["vh","vw","%"].includes(newUnit)&&currentValue>100&&onChange(100+newUnit)},min:0,size:"__unstable-large"})),(0,react.createElement)(flex_item_component.Z,{isBlock:!0},(0,react.createElement)(spacer_component.Z,{marginX:2,marginBottom:0},(0,react.createElement)(range_control.Z,{value:customRangeValue,min:0,max:null!==(_RANGE_CONTROL_CUSTOM=null===(_RANGE_CONTROL_CUSTOM2=RANGE_CONTROL_CUSTOM_SETTINGS[selectedUnit])||void 0===_RANGE_CONTROL_CUSTOM2?void 0:_RANGE_CONTROL_CUSTOM2.max)&&void 0!==_RANGE_CONTROL_CUSTOM?_RANGE_CONTROL_CUSTOM:100,step:null!==(_RANGE_CONTROL_CUSTOM3=null===(_RANGE_CONTROL_CUSTOM4=RANGE_CONTROL_CUSTOM_SETTINGS[selectedUnit])||void 0===_RANGE_CONTROL_CUSTOM4?void 0:_RANGE_CONTROL_CUSTOM4.step)&&void 0!==_RANGE_CONTROL_CUSTOM3?_RANGE_CONTROL_CUSTOM3:.1,withInputField:!1,onChange:next=>{onChange([next,selectedUnit].join(""))},__nextHasNoMarginBottom:!0})))))}function hasMinHeightSupport(blockType){const support=(0,build_module.Dx)(blockType,DIMENSIONS_SUPPORT_KEY);return!!(!0===support||null!=support&&support.minHeight)}function useIsMinHeightDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!use_setting_useSetting("dimensions.minHeight");return!hasMinHeightSupport(blockName)||isDisabled}function MinHeightEdit(props){var _style$dimensions;const{attributes:{style:style},setAttributes:setAttributes}=props;if(useIsMinHeightDisabled(props))return null;return(0,react.createElement)(HeightControl,{label:(0,i18n_build_module.__)("Min. height"),value:null==style||null===(_style$dimensions=style.dimensions)||void 0===_style$dimensions?void 0:_style$dimensions.minHeight,onChange:next=>{const newStyle={...style,dimensions:{...null==style?void 0:style.dimensions,minHeight:next}};setAttributes({style:cleanEmptyObject(newStyle)})}})}function hasPaddingSupport(blockType){const support=(0,build_module.Dx)(blockType,SPACING_SUPPORT_KEY);return!!(!0===support||null!=support&&support.padding)}function useIsPaddingDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!use_setting_useSetting("spacing.padding"),isInvalid=!useIsDimensionsSupportValid(blockName,"padding");return!hasPaddingSupport(blockName)||isDisabled||isInvalid}function PaddingEdit(props){var _style$spacing,_style$spacing2;const{name:blockName,attributes:{style:style},setAttributes:setAttributes,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=props,spacingSizes=use_setting_useSetting("spacing.spacingSizes"),units=(0,utils.nj)({availableUnits:use_setting_useSetting("spacing.units")||["%","px","em","rem","vw"]}),sides=useCustomSides(blockName,"padding"),splitOnAxis=sides&&sides.some((side=>AXIAL_SIDES.includes(side)));if(useIsPaddingDisabled(props))return null;const onChange=next=>{const newStyle={...style,spacing:{...null==style?void 0:style.spacing,padding:next}};setAttributes({style:cleanEmptyObject(newStyle)})};return platform.Z.select({web:(0,react.createElement)(react.Fragment,null,(!spacingSizes||0===(null==spacingSizes?void 0:spacingSizes.length))&&(0,react.createElement)(box_control.Z,{values:null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.padding,onChange:onChange,label:(0,i18n_build_module.__)("Padding"),sides:sides,units:units,allowReset:!1,splitOnAxis:splitOnAxis,onMouseOver:onMouseOver,onMouseOut:onMouseOut}),(null==spacingSizes?void 0:spacingSizes.length)>0&&(0,react.createElement)(SpacingSizesControl,{values:null==style||null===(_style$spacing2=style.spacing)||void 0===_style$spacing2?void 0:_style$spacing2.padding,onChange:onChange,label:(0,i18n_build_module.__)("Padding"),sides:sides,units:units,allowReset:!1,splitOnAxis:splitOnAxis,onMouseOver:onMouseOver,onMouseOut:onMouseOut})),native:null})}function PaddingVisualizer(_ref2){var _attributes$style,_attributes$style$spa;let{clientId:clientId,attributes:attributes,forceShow:forceShow}=_ref2;const padding=null==attributes||null===(_attributes$style=attributes.style)||void 0===_attributes$style||null===(_attributes$style$spa=_attributes$style.spacing)||void 0===_attributes$style$spa?void 0:_attributes$style$spa.padding,style=(0,react.useMemo)((()=>({borderTopWidth:null!=padding&&padding.top?getSpacingPresetCssVar(null==padding?void 0:padding.top):0,borderRightWidth:null!=padding&&padding.right?getSpacingPresetCssVar(null==padding?void 0:padding.right):0,borderBottomWidth:null!=padding&&padding.bottom?getSpacingPresetCssVar(null==padding?void 0:padding.bottom):0,borderLeftWidth:null!=padding&&padding.left?getSpacingPresetCssVar(null==padding?void 0:padding.left):0})),[padding]),[isActive,setIsActive]=(0,react.useState)(!1),valueRef=(0,react.useRef)(padding),timeoutRef=(0,react.useRef)();return(0,react.useEffect)((()=>((0,is_shallow_equal_build_module.ZP)(padding,valueRef.current)||forceShow||(setIsActive(!0),valueRef.current=padding,timeoutRef.current=setTimeout((()=>{setIsActive(!1)}),400)),()=>{setIsActive(!1),timeoutRef.current&&window.clearTimeout(timeoutRef.current)})),[padding,forceShow]),isActive||forceShow?(0,react.createElement)(block_popover,{clientId:clientId,__unstableCoverTarget:!0,__unstableRefreshSize:padding,shift:!1},(0,react.createElement)("div",{className:"block-editor__padding-visualizer",style:style})):null}var toggle_group_control_option_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option/component.js");function helpText(selfStretch,parentLayout){const{orientation:orientation="horizontal"}=parentLayout;return"fill"===selfStretch?(0,i18n_build_module.__)("Stretch to fill available space."):"fixed"===selfStretch?"horizontal"===orientation?(0,i18n_build_module.__)("Specify a fixed width."):(0,i18n_build_module.__)("Specify a fixed height."):(0,i18n_build_module.__)("Fit contents.")}function ChildLayoutEdit(_ref){let{attributes:attributes,setAttributes:setAttributes,__unstableParentLayout:parentLayout}=_ref;const{style:style={}}=attributes,{layout:childLayout={}}=style,{selfStretch:selfStretch,flexSize:flexSize}=childLayout;return(0,react.useEffect)((()=>{"fixed"!==selfStretch||flexSize||setAttributes({style:{...style,layout:{...childLayout,selfStretch:"fit"}}})}),[]),(0,react.createElement)(react.Fragment,null,(0,react.createElement)(toggle_group_control_component.Z,{size:"__unstable-large",label:childLayoutOrientation(parentLayout),value:selfStretch||"fit",help:helpText(selfStretch,parentLayout),onChange:value=>{const newFlexSize="fixed"!==value?null:flexSize;setAttributes({style:{...style,layout:{...childLayout,selfStretch:value,flexSize:newFlexSize}}})},isBlock:!0},(0,react.createElement)(toggle_group_control_option_component.Z,{key:"fit",value:"fit",label:(0,i18n_build_module.__)("Fit")}),(0,react.createElement)(toggle_group_control_option_component.Z,{key:"fill",value:"fill",label:(0,i18n_build_module.__)("Fill")}),(0,react.createElement)(toggle_group_control_option_component.Z,{key:"fixed",value:"fixed",label:(0,i18n_build_module.__)("Fixed")})),"fixed"===selfStretch&&(0,react.createElement)(unit_control.ZP,{size:"__unstable-large",onChange:value=>{setAttributes({style:{...style,layout:{...childLayout,flexSize:value}}})},value:flexSize}))}function hasChildLayoutSupport(_ref2){let{__unstableParentLayout:parentLayout={}}=_ref2;const{type:parentLayoutType="default",allowSizingOnChildren:allowSizingOnChildren=!1}=parentLayout;return"flex"===parentLayoutType&&allowSizingOnChildren}function useIsChildLayoutDisabled(props){const isDisabled=!use_setting_useSetting("layout");return!hasChildLayoutSupport(props)||isDisabled}function childLayoutOrientation(parentLayout){const{orientation:orientation="horizontal"}=parentLayout;return"horizontal"===orientation?(0,i18n_build_module.__)("Width"):(0,i18n_build_module.__)("Height")}const DIMENSIONS_SUPPORT_KEY="dimensions",SPACING_SUPPORT_KEY="spacing",dimensions_ALL_SIDES=["top","right","bottom","left"],AXIAL_SIDES=["vertical","horizontal"];function useVisualizerMouseOver(){const[isMouseOver,setIsMouseOver]=(0,react.useState)(!1),{__experimentalHideBlockInterface:hideBlockInterface,__experimentalShowBlockInterface:showBlockInterface}=(0,use_dispatch.Z)(store);return{isMouseOver:isMouseOver,onMouseOver:e=>{e.stopPropagation(),hideBlockInterface(),setIsMouseOver(!0)},onMouseOut:e=>{e.stopPropagation(),showBlockInterface(),setIsMouseOver(!1)}}}function DimensionsPanel(props){const isGapDisabled=useIsGapDisabled(props),isPaddingDisabled=useIsPaddingDisabled(props),isMarginDisabled=useIsMarginDisabled(props),isMinHeightDisabled=useIsMinHeightDisabled(props),isChildLayoutDisabled=useIsChildLayoutDisabled(props),isDisabled=useIsDimensionsDisabled(props),isSupported=function hasDimensionsSupport(props){if("web"!==platform.Z.OS)return!1;const{name:blockName}=props;return hasGapSupport(blockName)||hasMinHeightSupport(blockName)||hasPaddingSupport(blockName)||hasMarginSupport(blockName)||hasChildLayoutSupport(props)}(props),spacingSizes=use_setting_useSetting("spacing.spacingSizes"),paddingMouseOver=useVisualizerMouseOver(),marginMouseOver=useVisualizerMouseOver();if(isDisabled||!isSupported)return null;const defaultDimensionsControls=(0,build_module.Dx)(props.name,[DIMENSIONS_SUPPORT_KEY,"__experimentalDefaultControls"]),defaultSpacingControls=(0,build_module.Dx)(props.name,[SPACING_SUPPORT_KEY,"__experimentalDefaultControls"]),createResetAllFilter=(attribute,featureSet)=>newAttributes=>{var _newAttributes$style;return{...newAttributes,style:{...newAttributes.style,[featureSet]:{...null===(_newAttributes$style=newAttributes.style)||void 0===_newAttributes$style?void 0:_newAttributes$style[featureSet],[attribute]:void 0}}}},spacingClassnames=classnames_default()({"tools-panel-item-spacing":spacingSizes&&spacingSizes.length>0}),{__unstableParentLayout:parentLayout}=props;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(inspector_controls,{__experimentalGroup:"dimensions"},!isPaddingDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{className:spacingClassnames,hasValue:()=>function hasPaddingValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.spacing)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.padding)}(props),label:(0,i18n_build_module.__)("Padding"),onDeselect:()=>function resetPadding(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,spacing:{...null==style?void 0:style.spacing,padding:void 0}})})}(props),resetAllFilter:createResetAllFilter("padding","spacing"),isShownByDefault:null==defaultSpacingControls?void 0:defaultSpacingControls.padding,panelId:props.clientId},(0,react.createElement)(PaddingEdit,(0,esm_extends.Z)({onMouseOver:paddingMouseOver.onMouseOver,onMouseOut:paddingMouseOver.onMouseOut},props))),!isMarginDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{className:spacingClassnames,hasValue:()=>function hasMarginValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.spacing)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.margin)}(props),label:(0,i18n_build_module.__)("Margin"),onDeselect:()=>function resetMargin(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,spacing:{...null==style?void 0:style.spacing,margin:void 0}})})}(props),resetAllFilter:createResetAllFilter("margin","spacing"),isShownByDefault:null==defaultSpacingControls?void 0:defaultSpacingControls.margin,panelId:props.clientId},(0,react.createElement)(MarginEdit,(0,esm_extends.Z)({onMouseOver:marginMouseOver.onMouseOver,onMouseOut:marginMouseOver.onMouseOut},props))),!isGapDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{className:spacingClassnames,hasValue:()=>function hasGapValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.spacing)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.blockGap)}(props),label:(0,i18n_build_module.__)("Block spacing"),onDeselect:()=>function resetGap(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:{...style,spacing:{...null==style?void 0:style.spacing,blockGap:void 0}}})}(props),resetAllFilter:createResetAllFilter("blockGap","spacing"),isShownByDefault:null==defaultSpacingControls?void 0:defaultSpacingControls.blockGap,panelId:props.clientId},(0,react.createElement)(GapEdit,props)),!isMinHeightDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{hasValue:()=>function hasMinHeightValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.dimensions)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.minHeight)}(props),label:(0,i18n_build_module.__)("Min. height"),onDeselect:()=>function resetMinHeight(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,dimensions:{...null==style?void 0:style.dimensions,minHeight:void 0}})})}(props),resetAllFilter:createResetAllFilter("minHeight","dimensions"),isShownByDefault:null==defaultDimensionsControls?void 0:defaultDimensionsControls.minHeight,panelId:props.clientId},(0,react.createElement)(MinHeightEdit,props)),!isChildLayoutDisabled&&(0,react.createElement)(v_stack_component.Z,{as:tools_panel_item_component.Z,spacing:2,hasValue:()=>function hasChildLayoutValue(props){var _props$attributes$sty;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty?void 0:_props$attributes$sty.layout)}(props),label:childLayoutOrientation(parentLayout),onDeselect:()=>function resetChildLayout(_ref3){let{attributes:attributes={},setAttributes:setAttributes}=_ref3;const{style:style}=attributes;setAttributes({style:{...style,layout:void 0}})}(props),resetAllFilter:createResetAllFilter("selfStretch","layout"),isShownByDefault:!1,panelId:props.clientId},(0,react.createElement)(ChildLayoutEdit,props))),!isPaddingDisabled&&(0,react.createElement)(PaddingVisualizer,(0,esm_extends.Z)({forceShow:paddingMouseOver.isMouseOver},props)),!isMarginDisabled&&(0,react.createElement)(MarginVisualizer,(0,esm_extends.Z)({forceShow:marginMouseOver.isMouseOver},props)))}const useIsDimensionsDisabled=function(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const gapDisabled=useIsGapDisabled(props),minHeightDisabled=useIsMinHeightDisabled(props),paddingDisabled=useIsPaddingDisabled(props),marginDisabled=useIsMarginDisabled(props),childLayoutDisabled=useIsChildLayoutDisabled(props);return gapDisabled&&minHeightDisabled&&paddingDisabled&&marginDisabled&&childLayoutDisabled};function useCustomSides(blockName,feature){var _support$feature;const support=(0,build_module.Dx)(blockName,SPACING_SUPPORT_KEY);if(support&&"boolean"!=typeof support[feature])return Array.isArray(support[feature])?support[feature]:null!==(_support$feature=support[feature])&&void 0!==_support$feature&&_support$feature.sides?support[feature].sides:void 0}function useIsDimensionsSupportValid(blockName,feature){const sides=useCustomSides(blockName,feature);return!(sides&&sides.some((side=>dimensions_ALL_SIDES.includes(side)))&&sides.some((side=>AXIAL_SIDES.includes(side))))||(console.warn(`The ${feature} support for the "${blockName}" block can not be configured to support both axial and arbitrary sides.`),!1)}function hasGapSupport(blockType){const support=(0,build_module.Dx)(blockType,SPACING_SUPPORT_KEY);return!!(!0===support||null!=support&&support.blockGap)}function getGapBoxControlValueFromStyle(blockGapValue){if(!blockGapValue)return null;const isValueString="string"==typeof blockGapValue;return{top:isValueString?blockGapValue:null==blockGapValue?void 0:blockGapValue.top,left:isValueString?blockGapValue:null==blockGapValue?void 0:blockGapValue.left}}function getGapCSSValue(blockGapValue){let defaultValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";const blockGapBoxControlValue=getGapBoxControlValueFromStyle(blockGapValue);if(!blockGapBoxControlValue)return null;const row=getSpacingPresetCssVar(null==blockGapBoxControlValue?void 0:blockGapBoxControlValue.top)||defaultValue,column=getSpacingPresetCssVar(null==blockGapBoxControlValue?void 0:blockGapBoxControlValue.left)||defaultValue;return row===column?row:`${row} ${column}`}function useIsGapDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!use_setting_useSetting("spacing.blockGap");return!hasGapSupport(blockName)||isDisabled}function GapEdit(props){var _style$spacing;const{clientId:clientId,attributes:{style:style},name:blockName,setAttributes:setAttributes}=props,spacingSizes=use_setting_useSetting("spacing.spacingSizes"),units=(0,utils.nj)({availableUnits:use_setting_useSetting("spacing.units")||["%","px","em","rem","vw"]}),sides=useCustomSides(blockName,"blockGap"),ref=useBlockRef(clientId);if(useIsGapDisabled(props))return null;const splitOnAxis=sides&&sides.some((side=>AXIAL_SIDES.includes(side))),onChange=next=>{var _window;let blockGap=next;next&&splitOnAxis?blockGap={...getGapBoxControlValueFromStyle(next)}:null!=next&&next.hasOwnProperty("top")&&(blockGap=next.top);const newStyle={...style,spacing:{...null==style?void 0:style.spacing,blockGap:blockGap}};setAttributes({style:cleanEmptyObject(newStyle)});const isSafari=(null===(_window=window)||void 0===_window?void 0:_window.navigator.userAgent)&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome ")&&!window.navigator.userAgent.includes("Chromium ");var _ref$current$parentNo;ref.current&&isSafari&&(null===(_ref$current$parentNo=ref.current.parentNode)||void 0===_ref$current$parentNo||_ref$current$parentNo.replaceChild(ref.current,ref.current))},gapValue=getGapBoxControlValueFromStyle(null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.blockGap),boxControlGapValue=splitOnAxis?{...gapValue,right:null==gapValue?void 0:gapValue.left,bottom:null==gapValue?void 0:gapValue.top}:{top:null==gapValue?void 0:gapValue.top};return platform.Z.select({web:(0,react.createElement)(react.Fragment,null,(!spacingSizes||0===(null==spacingSizes?void 0:spacingSizes.length))&&(splitOnAxis?(0,react.createElement)(box_control.Z,{label:(0,i18n_build_module.__)("Block spacing"),min:0,onChange:onChange,units:units,sides:sides,values:boxControlGapValue,allowReset:!1,splitOnAxis:splitOnAxis}):(0,react.createElement)(unit_control.ZP,{label:(0,i18n_build_module.__)("Block spacing"),__unstableInputWidth:"80px",min:0,onChange:onChange,units:units,value:boxControlGapValue})),(null==spacingSizes?void 0:spacingSizes.length)>0&&(0,react.createElement)(SpacingSizesControl,{values:boxControlGapValue,onChange:onChange,label:(0,i18n_build_module.__)("Block spacing"),sides:splitOnAxis?sides:["top"],units:units,allowReset:!1,splitOnAxis:splitOnAxis})),native:null})}var svg=__webpack_require__("./packages/primitives/build-module/svg/index.js");const alignBottom=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M15 4H9v11h6V4zM4 18.5V20h16v-1.5H4z"})),alignCenter=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M20 11h-5V4H9v7H4v1.5h5V20h6v-7.5h5z"})),BLOCK_ALIGNMENTS_CONTROLS={top:{icon:(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M9 20h6V9H9v11zM4 4v1.5h16V4H4z"})),title:(0,i18n_build_module._x)("Align top","Block vertical alignment setting")},center:{icon:alignCenter,title:(0,i18n_build_module._x)("Align middle","Block vertical alignment setting")},bottom:{icon:alignBottom,title:(0,i18n_build_module._x)("Align bottom","Block vertical alignment setting")}},DEFAULT_CONTROLS=["top","center","bottom"],POPOVER_PROPS={variant:"toolbar"};var ui=function BlockVerticalAlignmentUI(_ref){let{value:value,onChange:onChange,controls:controls=DEFAULT_CONTROLS,isCollapsed:isCollapsed=!0,isToolbar:isToolbar}=_ref;const activeAlignment=BLOCK_ALIGNMENTS_CONTROLS[value],defaultAlignmentControl=BLOCK_ALIGNMENTS_CONTROLS.top,UIComponent=isToolbar?toolbar_group.Z:toolbar_dropdown_menu.Z,extraProps=isToolbar?{isCollapsed:isCollapsed}:{popoverProps:{POPOVER_PROPS:POPOVER_PROPS}};return(0,react.createElement)(UIComponent,(0,esm_extends.Z)({icon:activeAlignment?activeAlignment.icon:defaultAlignmentControl.icon,label:(0,i18n_build_module._x)("Change vertical alignment","Block vertical alignment setting label"),controls:controls.map((control=>{return{...BLOCK_ALIGNMENTS_CONTROLS[control],isActive:value===control,role:isCollapsed?"menuitemradio":void 0,onClick:(align=control,()=>onChange(value===align?void 0:align))};var align}))},extraProps))};const BlockVerticalAlignmentControl=props=>(0,react.createElement)(ui,(0,esm_extends.Z)({},props,{isToolbar:!1})),BlockVerticalAlignmentToolbar=props=>(0,react.createElement)(ui,(0,esm_extends.Z)({},props,{isToolbar:!0})),icons={left:justify_left.Z,center:justify_center.Z,right:justify_right.Z,"space-between":justify_space_between.Z};var justify_content_control_ui=function ui_JustifyContentUI(_ref){let{allowedControls:allowedControls=["left","center","right","space-between"],isCollapsed:isCollapsed=!0,onChange:onChange,value:value,popoverProps:popoverProps,isToolbar:isToolbar}=_ref;const handleClick=next=>{onChange(next===value?void 0:next)},icon=value?icons[value]:icons.left,allControls=[{name:"left",icon:justify_left.Z,title:(0,i18n_build_module.__)("Justify items left"),isActive:"left"===value,onClick:()=>handleClick("left")},{name:"center",icon:justify_center.Z,title:(0,i18n_build_module.__)("Justify items center"),isActive:"center"===value,onClick:()=>handleClick("center")},{name:"right",icon:justify_right.Z,title:(0,i18n_build_module.__)("Justify items right"),isActive:"right"===value,onClick:()=>handleClick("right")},{name:"space-between",icon:justify_space_between.Z,title:(0,i18n_build_module.__)("Space between items"),isActive:"space-between"===value,onClick:()=>handleClick("space-between")}],UIComponent=isToolbar?toolbar_group.Z:toolbar_dropdown_menu.Z,extraProps=isToolbar?{isCollapsed:isCollapsed}:{};return(0,react.createElement)(UIComponent,(0,esm_extends.Z)({icon:icon,popoverProps:popoverProps,label:(0,i18n_build_module.__)("Change items justification"),controls:allControls.filter((elem=>allowedControls.includes(elem.name)))},extraProps))};const JustifyContentControl=props=>(0,react.createElement)(justify_content_control_ui,(0,esm_extends.Z)({},props,{isToolbar:!1})),justifyContentMap={left:"flex-start",right:"flex-end",center:"center","space-between":"space-between"},alignItemsMap={left:"flex-start",right:"flex-end",center:"center"},verticalAlignmentMap={top:"flex-start",center:"center",bottom:"flex-end"},flexWrapOptions=["wrap","nowrap"];var flex={name:"flex",label:(0,i18n_build_module.__)("Flex"),inspectorControls:function FlexLayoutInspectorControls(_ref){let{layout:layout={},onChange:onChange,layoutBlockSupport:layoutBlockSupport={}}=_ref;const{allowOrientation:allowOrientation=!0}=layoutBlockSupport;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(component.Z,null,(0,react.createElement)(flex_item_component.Z,null,(0,react.createElement)(FlexLayoutJustifyContentControl,{layout:layout,onChange:onChange})),(0,react.createElement)(flex_item_component.Z,null,allowOrientation&&(0,react.createElement)(OrientationControl,{layout:layout,onChange:onChange}))),(0,react.createElement)(FlexWrapControl,{layout:layout,onChange:onChange}))},toolBarControls:function FlexLayoutToolbarControls(_ref2){let{layout:layout={},onChange:onChange,layoutBlockSupport:layoutBlockSupport}=_ref2;if(null!=layoutBlockSupport&&layoutBlockSupport.allowSwitching)return null;const{allowVerticalAlignment:allowVerticalAlignment=!0}=layoutBlockSupport;return(0,react.createElement)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0},(0,react.createElement)(FlexLayoutJustifyContentControl,{layout:layout,onChange:onChange,isToolbar:!0}),allowVerticalAlignment&&"vertical"!==(null==layout?void 0:layout.orientation)&&(0,react.createElement)(FlexLayoutVerticalAlignmentControl,{layout:layout,onChange:onChange,isToolbar:!0}))},getLayoutStyle:function getLayoutStyle(_ref3){var _style$spacing,_style$spacing2;let{selector:selector,layout:layout,style:style,blockName:blockName,hasBlockGapSupport:hasBlockGapSupport,layoutDefinitions:layoutDefinitions}=_ref3;const{orientation:orientation="horizontal"}=layout,blockGapValue=null!=style&&null!==(_style$spacing=style.spacing)&&void 0!==_style$spacing&&_style$spacing.blockGap&&!shouldSkipSerialization(blockName,"spacing","blockGap")?getGapCSSValue(null==style||null===(_style$spacing2=style.spacing)||void 0===_style$spacing2?void 0:_style$spacing2.blockGap,"0.5em"):void 0,justifyContent=justifyContentMap[layout.justifyContent],flexWrap=flexWrapOptions.includes(layout.flexWrap)?layout.flexWrap:"wrap",verticalAlignment=verticalAlignmentMap[layout.verticalAlignment],alignItems=alignItemsMap[layout.justifyContent]||alignItemsMap.left;let output="";const rules=[];return flexWrap&&"wrap"!==flexWrap&&rules.push(`flex-wrap: ${flexWrap}`),"horizontal"===orientation?(verticalAlignment&&rules.push(`align-items: ${verticalAlignment}`),justifyContent&&rules.push(`justify-content: ${justifyContent}`)):(rules.push("flex-direction: column"),rules.push(`align-items: ${alignItems}`)),rules.length&&(output=`${appendSelectors(selector)} {\n\t\t\t\t${rules.join("; ")};\n\t\t\t}`),hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"flex",blockGapValue)),output},getOrientation(layout){const{orientation:orientation="horizontal"}=layout;return orientation},getAlignments:()=>[]};function FlexLayoutVerticalAlignmentControl(_ref4){let{layout:layout,onChange:onChange,isToolbar:isToolbar=!1}=_ref4;const{verticalAlignment:verticalAlignment=verticalAlignmentMap.center}=layout,onVerticalAlignmentChange=value=>{onChange({...layout,verticalAlignment:value})};if(isToolbar)return(0,react.createElement)(BlockVerticalAlignmentControl,{onChange:onVerticalAlignmentChange,value:verticalAlignment});const verticalAlignmentOptions=[{value:"flex-start",label:(0,i18n_build_module.__)("Align items top")},{value:"center",label:(0,i18n_build_module.__)("Align items center")},{value:"flex-end",label:(0,i18n_build_module.__)("Align items bottom")}];return(0,react.createElement)("fieldset",{className:"block-editor-hooks__flex-layout-vertical-alignment-control"},(0,react.createElement)("legend",null,(0,i18n_build_module.__)("Vertical alignment")),(0,react.createElement)("div",null,verticalAlignmentOptions.map(((value,icon,label)=>(0,react.createElement)(build_module_button.Z,{key:value,label:label,icon:icon,isPressed:verticalAlignment===value,onClick:()=>onVerticalAlignmentChange(value)})))))}function FlexLayoutJustifyContentControl(_ref5){let{layout:layout,onChange:onChange,isToolbar:isToolbar=!1}=_ref5;const{justifyContent:justifyContent="left",orientation:orientation="horizontal"}=layout,onJustificationChange=value=>{onChange({...layout,justifyContent:value})},allowedControls=["left","center","right"];if("horizontal"===orientation&&allowedControls.push("space-between"),isToolbar)return(0,react.createElement)(JustifyContentControl,{allowedControls:allowedControls,value:justifyContent,onChange:onJustificationChange,popoverProps:{position:"bottom right",variant:"toolbar"}});const justificationOptions=[{value:"left",icon:justify_left.Z,label:(0,i18n_build_module.__)("Justify items left")},{value:"center",icon:justify_center.Z,label:(0,i18n_build_module.__)("Justify items center")},{value:"right",icon:justify_right.Z,label:(0,i18n_build_module.__)("Justify items right")}];return"horizontal"===orientation&&justificationOptions.push({value:"space-between",icon:justify_space_between.Z,label:(0,i18n_build_module.__)("Space between items")}),(0,react.createElement)(toggle_group_control_component.Z,{label:(0,i18n_build_module.__)("Justification"),value:justifyContent,onChange:onJustificationChange,className:"block-editor-hooks__flex-layout-justification-controls"},justificationOptions.map((_ref6=>{let{value:value,icon:icon,label:label}=_ref6;return(0,react.createElement)(toggle_group_control_option_icon_component.Z,{key:value,value:value,icon:icon,label:label})})))}function FlexWrapControl(_ref7){let{layout:layout,onChange:onChange}=_ref7;const{flexWrap:flexWrap="wrap"}=layout;return(0,react.createElement)(toggle_control.Z,{label:(0,i18n_build_module.__)("Allow to wrap to multiple lines"),onChange:value=>{onChange({...layout,flexWrap:value?"wrap":"nowrap"})},checked:"wrap"===flexWrap})}function OrientationControl(_ref8){let{layout:layout,onChange:onChange}=_ref8;const{orientation:orientation="horizontal"}=layout;return(0,react.createElement)(toggle_group_control_component.Z,{className:"block-editor-hooks__flex-layout-orientation-controls",label:(0,i18n_build_module.__)("Orientation"),value:orientation,onChange:value=>onChange({...layout,orientation:value})},(0,react.createElement)(toggle_group_control_option_icon_component.Z,{icon:arrow_right.Z,value:"horizontal",label:(0,i18n_build_module.__)("Horizontal")}),(0,react.createElement)(toggle_group_control_option_icon_component.Z,{icon:arrow_down.Z,value:"vertical",label:(0,i18n_build_module.__)("Vertical")}))}var flow={name:"default",label:(0,i18n_build_module.__)("Flow"),inspectorControls:function DefaultLayoutInspectorControls(){return null},toolBarControls:function DefaultLayoutToolbarControls(){return null},getLayoutStyle:function getLayoutStyle(_ref){var _style$spacing;let{selector:selector,style:style,blockName:blockName,hasBlockGapSupport:hasBlockGapSupport,layoutDefinitions:layoutDefinitions}=_ref;const blockGapStyleValue=getGapCSSValue(null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.blockGap);let blockGapValue="";shouldSkipSerialization(blockName,"spacing","blockGap")||(null!=blockGapStyleValue&&blockGapStyleValue.top?blockGapValue=getGapCSSValue(null==blockGapStyleValue?void 0:blockGapStyleValue.top):"string"==typeof blockGapStyleValue&&(blockGapValue=getGapCSSValue(blockGapStyleValue)));let output="";return hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"default",blockGapValue)),output},getOrientation:()=>"vertical",getAlignments(layout){const alignmentInfo=getAlignmentsInfo(layout);if(void 0!==layout.alignments)return layout.alignments.includes("none")||layout.alignments.unshift("none"),layout.alignments.map((alignment=>({name:alignment,info:alignmentInfo[alignment]})));const{contentSize:contentSize,wideSize:wideSize}=layout,alignments=[{name:"left"},{name:"center"},{name:"right"}];return contentSize&&alignments.unshift({name:"full"}),wideSize&&alignments.unshift({name:"wide",info:alignmentInfo.wide}),alignments.unshift({name:"none",info:alignmentInfo.none}),alignments}},build_module_icon=__webpack_require__("./packages/icons/build-module/icon/index.js"),position_center=__webpack_require__("./packages/icons/build-module/library/position-center.js"),stretch_wide=__webpack_require__("./packages/icons/build-module/library/stretch-wide.js"),style_engine_build_module=__webpack_require__("./packages/style-engine/build-module/index.js"),constrained={name:"constrained",label:(0,i18n_build_module.__)("Constrained"),inspectorControls:function DefaultLayoutInspectorControls(_ref){let{layout:layout,onChange:onChange}=_ref;const{wideSize:wideSize,contentSize:contentSize,justifyContent:justifyContent="center"}=layout,justificationOptions=[{value:"left",icon:justify_left.Z,label:(0,i18n_build_module.__)("Justify items left")},{value:"center",icon:justify_center.Z,label:(0,i18n_build_module.__)("Justify items center")},{value:"right",icon:justify_right.Z,label:(0,i18n_build_module.__)("Justify items right")}],units=(0,utils.nj)({availableUnits:use_setting_useSetting("spacing.units")||["%","px","em","rem","vw"]});return(0,react.createElement)(react.Fragment,null,(0,react.createElement)("div",{className:"block-editor-hooks__layout-controls"},(0,react.createElement)("div",{className:"block-editor-hooks__layout-controls-unit"},(0,react.createElement)(unit_control.ZP,{label:(0,i18n_build_module.__)("Content"),labelPosition:"top",__unstableInputWidth:"80px",value:contentSize||wideSize||"",onChange:nextWidth=>{nextWidth=0>parseFloat(nextWidth)?"0":nextWidth,onChange({...layout,contentSize:nextWidth})},units:units}),(0,react.createElement)(build_module_icon.Z,{icon:position_center.Z})),(0,react.createElement)("div",{className:"block-editor-hooks__layout-controls-unit"},(0,react.createElement)(unit_control.ZP,{label:(0,i18n_build_module.__)("Wide"),labelPosition:"top",__unstableInputWidth:"80px",value:wideSize||contentSize||"",onChange:nextWidth=>{nextWidth=0>parseFloat(nextWidth)?"0":nextWidth,onChange({...layout,wideSize:nextWidth})},units:units}),(0,react.createElement)(build_module_icon.Z,{icon:stretch_wide.Z}))),(0,react.createElement)("p",{className:"block-editor-hooks__layout-controls-helptext"},(0,i18n_build_module.__)("Customize the width for all elements that are assigned to the center or wide columns.")),(0,react.createElement)(toggle_group_control_component.Z,{label:(0,i18n_build_module.__)("Justification"),value:justifyContent,onChange:value=>{onChange({...layout,justifyContent:value})}},justificationOptions.map((_ref2=>{let{value:value,icon:icon,label:label}=_ref2;return(0,react.createElement)(toggle_group_control_option_icon_component.Z,{key:value,value:value,icon:icon,label:label})}))))},toolBarControls:function DefaultLayoutToolbarControls(){return null},getLayoutStyle:function getLayoutStyle(_ref3){var _style$spacing,_style$spacing2;let{selector:selector,layout:layout={},style:style,blockName:blockName,hasBlockGapSupport:hasBlockGapSupport,layoutDefinitions:layoutDefinitions}=_ref3;const{contentSize:contentSize,wideSize:wideSize,justifyContent:justifyContent}=layout,blockGapStyleValue=getGapCSSValue(null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.blockGap);let blockGapValue="";shouldSkipSerialization(blockName,"spacing","blockGap")||(null!=blockGapStyleValue&&blockGapStyleValue.top?blockGapValue=getGapCSSValue(null==blockGapStyleValue?void 0:blockGapStyleValue.top):"string"==typeof blockGapStyleValue&&(blockGapValue=getGapCSSValue(blockGapStyleValue)));const marginLeft="left"===justifyContent?"0 !important":"auto !important",marginRight="right"===justifyContent?"0 !important":"auto !important";let output=contentSize||wideSize?`\n\t\t\t\t\t${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")} {\n\t\t\t\t\t\tmax-width: ${null!=contentSize?contentSize:wideSize};\n\t\t\t\t\t\tmargin-left: ${marginLeft};\n\t\t\t\t\t\tmargin-right: ${marginRight};\n\t\t\t\t\t}\n\t\t\t\t\t${appendSelectors(selector,"> .alignwide")}  {\n\t\t\t\t\t\tmax-width: ${null!=wideSize?wideSize:contentSize};\n\t\t\t\t\t}\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmax-width: none;\n\t\t\t\t\t}\n\t\t\t\t`:"";if("left"===justifyContent?output+=`${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")}\n\t\t\t{ margin-left: ${marginLeft}; }`:"right"===justifyContent&&(output+=`${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")}\n\t\t\t{ margin-right: ${marginRight}; }`),null!=style&&null!==(_style$spacing2=style.spacing)&&void 0!==_style$spacing2&&_style$spacing2.padding){(0,style_engine_build_module.R)(style).forEach((rule=>{"paddingRight"===rule.key?output+=`\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmargin-right: calc(${rule.value} * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`:"paddingLeft"===rule.key&&(output+=`\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmargin-left: calc(${rule.value} * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`)}))}return hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"constrained",blockGapValue)),output},getOrientation:()=>"vertical",getAlignments(layout){const alignmentInfo=getAlignmentsInfo(layout);if(void 0!==layout.alignments)return layout.alignments.includes("none")||layout.alignments.unshift("none"),layout.alignments.map((alignment=>({name:alignment,info:alignmentInfo[alignment]})));const{contentSize:contentSize,wideSize:wideSize}=layout,alignments=[{name:"left"},{name:"center"},{name:"right"}];return contentSize&&alignments.unshift({name:"full"}),wideSize&&alignments.unshift({name:"wide",info:alignmentInfo.wide}),alignments.unshift({name:"none",info:alignmentInfo.none}),alignments}};const layoutTypes=[flow,flex,constrained];function layouts_getLayoutType(){let name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return layoutTypes.find((layoutType=>layoutType.name===name))}const defaultLayout={type:"default"},Layout=(0,react.createContext)(defaultLayout),LayoutProvider=Layout.Provider;function useLayout(){return(0,react.useContext)(Layout)}function LayoutStyle(_ref){let{layout:layout={},css:css,...props}=_ref;const layoutType=layouts_getLayoutType(layout.type),hasBlockGapSupport=null!==use_setting_useSetting("spacing.blockGap");if(layoutType){var _layoutType$getLayout;if(css)return(0,react.createElement)("style",null,css);const layoutStyle=null===(_layoutType$getLayout=layoutType.getLayoutStyle)||void 0===_layoutType$getLayout?void 0:_layoutType$getLayout.call(layoutType,{hasBlockGapSupport:hasBlockGapSupport,layout:layout,...props});if(layoutStyle)return(0,react.createElement)("style",null,layoutStyle)}return null}const use_available_alignments_DEFAULT_CONTROLS=["none","left","center","right","wide","full"],WIDE_CONTROLS=["wide","full"];function useAvailableAlignments(){let controls=arguments.length>0&&void 0!==arguments[0]?arguments[0]:use_available_alignments_DEFAULT_CONTROLS;controls.includes("none")||(controls=["none",...controls]);const{wideControlsEnabled:wideControlsEnabled=!1,themeSupportsLayout:themeSupportsLayout}=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store),settings=getSettings();return{wideControlsEnabled:settings.alignWide,themeSupportsLayout:settings.supportsLayout}}),[]),layout=useLayout(),layoutType=layouts_getLayoutType(null==layout?void 0:layout.type),layoutAlignments=layoutType.getAlignments(layout);if(themeSupportsLayout){const alignments=layoutAlignments.filter((_ref=>{let{name:alignmentName}=_ref;return controls.includes(alignmentName)}));return 1===alignments.length&&"none"===alignments[0].name?[]:alignments}if("default"!==layoutType.name&&"constrained"!==layoutType.name)return[];const{alignments:availableAlignments=use_available_alignments_DEFAULT_CONTROLS}=layout,enabledControls=controls.filter((control=>(layout.alignments||wideControlsEnabled||!WIDE_CONTROLS.includes(control))&&availableAlignments.includes(control))).map((enabledControl=>({name:enabledControl})));return 1===enabledControls.length&&"none"===enabledControls[0].name?[]:enabledControls}var align_none=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M5 15h14V9H5v6zm0 4.8h14v-1.5H5v1.5zM5 4.2v1.5h14V4.2H5z"}));var position_left=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M4 9v6h14V9H4zm8-4.8H4v1.5h8V4.2zM4 19.8h8v-1.5H4v1.5z"}));var position_right=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M6 15h14V9H6v6zm6-10.8v1.5h8V4.2h-8zm0 15.6h8v-1.5h-8v1.5z"}));var stretch_full_width=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M5 4v11h14V4H5zm3 15.8h8v-1.5H8v1.5z"}));const constants_BLOCK_ALIGNMENTS_CONTROLS={none:{icon:align_none,title:(0,i18n_build_module._x)("None","Alignment option")},left:{icon:position_left,title:(0,i18n_build_module.__)("Align left")},center:{icon:position_center.Z,title:(0,i18n_build_module.__)("Align center")},right:{icon:position_right,title:(0,i18n_build_module.__)("Align right")},wide:{icon:stretch_wide.Z,title:(0,i18n_build_module.__)("Wide width")},full:{icon:stretch_full_width,title:(0,i18n_build_module.__)("Full width")}},constants_POPOVER_PROPS={variant:"toolbar"};var block_alignment_control_ui=function BlockAlignmentUI(_ref){let{value:value,onChange:onChange,controls:controls,isToolbar:isToolbar,isCollapsed:isCollapsed=!0}=_ref;const enabledControls=useAvailableAlignments(controls);if(!!!enabledControls.length)return null;function onChangeAlignment(align){onChange([value,"none"].includes(align)?void 0:align)}const activeAlignmentControl=constants_BLOCK_ALIGNMENTS_CONTROLS[value],defaultAlignmentControl=constants_BLOCK_ALIGNMENTS_CONTROLS.none,UIComponent=isToolbar?toolbar_group.Z:toolbar_dropdown_menu.Z,commonProps={icon:activeAlignmentControl?activeAlignmentControl.icon:defaultAlignmentControl.icon,label:(0,i18n_build_module.__)("Align")},extraProps=isToolbar?{isCollapsed:isCollapsed,controls:enabledControls.map((_ref2=>{let{name:controlName}=_ref2;return{...constants_BLOCK_ALIGNMENTS_CONTROLS[controlName],isActive:value===controlName||!value&&"none"===controlName,role:isCollapsed?"menuitemradio":void 0,onClick:()=>onChangeAlignment(controlName)}}))}:{toggleProps:{describedBy:(0,i18n_build_module.__)("Change alignment")},popoverProps:constants_POPOVER_PROPS,children:_ref3=>{let{onClose:onClose}=_ref3;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(menu_group.Z,{className:"block-editor-block-alignment-control__menu-group"},enabledControls.map((_ref4=>{let{name:controlName,info:info}=_ref4;const{icon:icon,title:title}=constants_BLOCK_ALIGNMENTS_CONTROLS[controlName],isSelected=controlName===value||!value&&"none"===controlName;return(0,react.createElement)(menu_item.Z,{key:controlName,icon:icon,iconPosition:"left",className:classnames_default()("components-dropdown-menu__menu-item",{"is-active":isSelected}),isSelected:isSelected,onClick:()=>{onChangeAlignment(controlName),onClose()},role:"menuitemradio",info:info},title)}))))}};return(0,react.createElement)(UIComponent,(0,esm_extends.Z)({},commonProps,extraProps))};const BlockAlignmentControl=props=>(0,react.createElement)(block_alignment_control_ui,(0,esm_extends.Z)({},props,{isToolbar:!1})),BlockAlignmentToolbar=props=>(0,react.createElement)(block_alignment_control_ui,(0,esm_extends.Z)({},props,{isToolbar:!0})),ALL_ALIGNMENTS=["left","center","right","wide","full"],WIDE_ALIGNMENTS=["wide","full"];function getValidAlignments(blockAlign){let validAlignments,hasWideBlockSupport=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],hasWideEnabled=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return validAlignments=Array.isArray(blockAlign)?ALL_ALIGNMENTS.filter((value=>blockAlign.includes(value))):!0===blockAlign?[...ALL_ALIGNMENTS]:[],!hasWideEnabled||!0===blockAlign&&!hasWideBlockSupport?validAlignments.filter((alignment=>!WIDE_ALIGNMENTS.includes(alignment))):validAlignments}const withToolbarControls=(0,create_higher_order_component.o)((BlockEdit=>props=>{const blockEdit=(0,react.createElement)(BlockEdit,props),{name:blockName}=props,validAlignments=useAvailableAlignments(getValidAlignments((0,build_module.Dx)(blockName,"align"),(0,build_module.zb)(blockName,"alignWide",!0))).map((_ref=>{let{name:name}=_ref;return name})),isContentLocked=(0,use_select.Z)((select=>select(store).__unstableGetContentLockingParent(props.clientId)),[props.clientId]);if(!validAlignments.length||isContentLocked)return blockEdit;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0},(0,react.createElement)(BlockAlignmentControl,{value:props.attributes.align,onChange:nextAlign=>{if(!nextAlign){var _blockType$attributes,_blockType$attributes2;const blockType=(0,build_module.ck)(props.name);(null==blockType||null===(_blockType$attributes=blockType.attributes)||void 0===_blockType$attributes||null===(_blockType$attributes2=_blockType$attributes.align)||void 0===_blockType$attributes2?void 0:_blockType$attributes2.default)&&(nextAlign="")}props.setAttributes({align:nextAlign})},controls:validAlignments})),blockEdit)}),"withToolbarControls"),withDataAlign=(0,create_higher_order_component.o)((BlockListBlock=>props=>{const{name:name,attributes:attributes}=props,{align:align}=attributes,validAlignments=useAvailableAlignments(getValidAlignments((0,build_module.Dx)(name,"align"),(0,build_module.zb)(name,"alignWide",!0)));if(void 0===align)return(0,react.createElement)(BlockListBlock,props);let wrapperProps=props.wrapperProps;return validAlignments.some((alignment=>alignment.name===align))&&(wrapperProps={...wrapperProps,"data-align":align}),(0,react.createElement)(BlockListBlock,(0,esm_extends.Z)({},props,{wrapperProps:wrapperProps}))}));(0,hooks_build_module.KJ)("blocks.registerBlockType","core/align/addAttribute",(function addAttribute(settings){var _settings$attributes$,_settings$attributes;return"type"in(null!==(_settings$attributes$=null===(_settings$attributes=settings.attributes)||void 0===_settings$attributes?void 0:_settings$attributes.align)&&void 0!==_settings$attributes$?_settings$attributes$:{})||(0,build_module.zb)(settings,"align")&&(settings.attributes={...settings.attributes,align:{type:"string",enum:[...ALL_ALIGNMENTS,""]}}),settings})),(0,hooks_build_module.KJ)("editor.BlockListBlock","core/editor/align/with-data-align",withDataAlign),(0,hooks_build_module.KJ)("editor.BlockEdit","core/editor/align/with-toolbar-controls",withToolbarControls),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/align/addAssignedAlign",(function addAssignedAlign(props,blockType,attributes){const{align:align}=attributes;return getValidAlignments((0,build_module.Dx)(blockType,"align"),(0,build_module.zb)(blockType,"alignWide",!0)).includes(align)&&(props.className=classnames_default()(`align${align}`,props.className)),props})),(0,hooks_build_module.KJ)("blocks.registerBlockType","core/lock/addAttribute",(function lock_addAttribute(settings){var _settings$attributes$,_settings$attributes;return"type"in(null!==(_settings$attributes$=null===(_settings$attributes=settings.attributes)||void 0===_settings$attributes?void 0:_settings$attributes.lock)&&void 0!==_settings$attributes$?_settings$attributes$:{})||(settings.attributes={...settings.attributes,lock:{type:"object"}}),settings}));var text_control=__webpack_require__("./packages/components/build-module/text-control/index.js"),external_link=__webpack_require__("./packages/components/build-module/external-link/index.js"),body=__webpack_require__("./packages/components/build-module/panel/body.js");const ANCHOR_REGEX=/[\s#]/g,ANCHOR_SCHEMA={type:"string",source:"attribute",attribute:"id",selector:"*"};const withInspectorControl=(0,create_higher_order_component.o)((BlockEdit=>props=>{if((0,build_module.zb)(props.name,"anchor")&&props.isSelected){const isWeb="web"===platform.Z.OS,textControl=(0,react.createElement)(text_control.Z,{className:"html-anchor-control",label:(0,i18n_build_module.__)("HTML anchor"),help:(0,react.createElement)(react.Fragment,null,(0,i18n_build_module.__)("Enter a word or two  without spaces  to make a unique web address just for this block, called an anchor. Then, youll be able to link directly to this section of your page."),isWeb&&(0,react.createElement)(external_link.Z,{href:(0,i18n_build_module.__)("https://wordpress.org/support/article/page-jumps/")},(0,i18n_build_module.__)("Learn more about anchors"))),value:props.attributes.anchor||"",placeholder:isWeb?null:(0,i18n_build_module.__)("Add an anchor"),onChange:nextValue=>{nextValue=nextValue.replace(ANCHOR_REGEX,"-"),props.setAttributes({anchor:nextValue})},autoCapitalize:"none",autoComplete:"off"});return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(BlockEdit,props),isWeb&&(0,react.createElement)(inspector_controls,{__experimentalGroup:"advanced"},textControl),!isWeb&&"core/heading"===props.name&&(0,react.createElement)(inspector_controls,null,(0,react.createElement)(body.Z,{title:(0,i18n_build_module.__)("Heading settings")},textControl)))}return(0,react.createElement)(BlockEdit,props)}),"withInspectorControl");(0,hooks_build_module.KJ)("blocks.registerBlockType","core/anchor/attribute",(function anchor_addAttribute(settings){var _settings$attributes$,_settings$attributes;return"type"in(null!==(_settings$attributes$=null===(_settings$attributes=settings.attributes)||void 0===_settings$attributes?void 0:_settings$attributes.anchor)&&void 0!==_settings$attributes$?_settings$attributes$:{})||(0,build_module.zb)(settings,"anchor")&&(settings.attributes={...settings.attributes,anchor:ANCHOR_SCHEMA}),settings})),(0,hooks_build_module.KJ)("editor.BlockEdit","core/editor/anchor/with-inspector-control",withInspectorControl),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/anchor/save-props",(function addSaveProps(extraProps,blockType,attributes){return(0,build_module.zb)(blockType,"anchor")&&(extraProps.id=""===attributes.anchor?null:attributes.anchor),extraProps}));const ARIA_LABEL_SCHEMA={type:"string",source:"attribute",attribute:"aria-label",selector:"*"};(0,hooks_build_module.KJ)("blocks.registerBlockType","core/ariaLabel/attribute",(function aria_label_addAttribute(settings){var _settings$attributes,_settings$attributes$;return null!=settings&&null!==(_settings$attributes=settings.attributes)&&void 0!==_settings$attributes&&null!==(_settings$attributes$=_settings$attributes.ariaLabel)&&void 0!==_settings$attributes$&&_settings$attributes$.type||(0,build_module.zb)(settings,"ariaLabel")&&(settings.attributes={...settings.attributes,ariaLabel:ARIA_LABEL_SCHEMA}),settings})),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/ariaLabel/save-props",(function aria_label_addSaveProps(extraProps,blockType,attributes){return(0,build_module.zb)(blockType,"ariaLabel")&&(extraProps["aria-label"]=""===attributes.ariaLabel?null:attributes.ariaLabel),extraProps}));const custom_class_name_withInspectorControl=(0,create_higher_order_component.o)((BlockEdit=>props=>(0,build_module.zb)(props.name,"customClassName",!0)&&props.isSelected?(0,react.createElement)(react.Fragment,null,(0,react.createElement)(BlockEdit,props),(0,react.createElement)(inspector_controls,{__experimentalGroup:"advanced"},(0,react.createElement)(text_control.Z,{autoComplete:"off",label:(0,i18n_build_module.__)("Additional CSS class(es)"),value:props.attributes.className||"",onChange:nextValue=>{props.setAttributes({className:""!==nextValue?nextValue:void 0})},help:(0,i18n_build_module.__)("Separate multiple classes with spaces.")}))):(0,react.createElement)(BlockEdit,props)),"withInspectorControl");(0,hooks_build_module.KJ)("blocks.registerBlockType","core/custom-class-name/attribute",(function custom_class_name_addAttribute(settings){return(0,build_module.zb)(settings,"customClassName",!0)&&(settings.attributes={...settings.attributes,className:{type:"string"}}),settings})),(0,hooks_build_module.KJ)("editor.BlockEdit","core/editor/custom-class-name/with-inspector-control",custom_class_name_withInspectorControl),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/custom-class-name/save-props",(function custom_class_name_addSaveProps(extraProps,blockType,attributes){return(0,build_module.zb)(blockType,"customClassName",!0)&&attributes.className&&(extraProps.className=classnames_default()(extraProps.className,attributes.className)),extraProps})),(0,hooks_build_module.KJ)("blocks.switchToBlockType.transformedBlock","core/color/addTransforms",(function addTransforms(result,source,index,results){if(!(0,build_module.zb)(result.name,"customClassName",!0))return result;if(1===results.length&&result.innerBlocks.length===source.length)return result;if(1===results.length&&source.length>1||results.length>1&&1===source.length)return result;if(source[index]){var _source$index;const originClassName=null===(_source$index=source[index])||void 0===_source$index?void 0:_source$index.attributes.className;if(originClassName)return{...result,attributes:{...result.attributes,className:originClassName}}}return result})),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/generated-class-name/save-props",(function addGeneratedClassName(extraProps,blockType){return(0,build_module.zb)(blockType,"className",!0)&&("string"==typeof extraProps.className?extraProps.className=[...new Set([(0,build_module.Vk)(blockType.name),...extraProps.className.split(" ")])].join(" ").trim():extraProps.className=(0,build_module.Vk)(blockType.name)),extraProps}));var react_dom=__webpack_require__("./node_modules/react-dom/index.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),async_mode_provider_context=__webpack_require__("./packages/data/build-module/components/async-mode-provider/context.js"),use_viewport_match=__webpack_require__("./packages/compose/build-module/hooks/use-viewport-match/index.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),raw_html=__webpack_require__("./packages/element/build-module/raw-html.js"),with_filters=__webpack_require__("./packages/components/build-module/higher-order/with-filters/index.js"),with_select=__webpack_require__("./packages/data/build-module/components/with-select/index.js"),with_dispatch=__webpack_require__("./packages/data/build-module/components/with-dispatch/index.js"),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),pure=__webpack_require__("./packages/compose/build-module/higher-order/pure/index.js"),if_condition=__webpack_require__("./packages/compose/build-module/higher-order/if-condition/index.js"),safe_html=__webpack_require__("./packages/dom/build-module/dom/safe-html.js");const block_context_Context=(0,react.createContext)({});function BlockContextProvider(_ref){let{value:value,children:children}=_ref;const context=(0,react.useContext)(block_context_Context),nextValue=(0,react.useMemo)((()=>({...context,...value})),[context,value]);return(0,react.createElement)(block_context_Context.Provider,{value:nextValue,children:children})}var block_context=block_context_Context;const DEFAULT_BLOCK_CONTEXT={};var edit=(0,with_filters.Z)("editor.BlockEdit")((props=>{const{attributes:attributes={},name:name}=props,blockType=(0,build_module.ck)(name),blockContext=(0,react.useContext)(block_context),context=(0,react.useMemo)((()=>blockType&&blockType.usesContext?Object.fromEntries(Object.entries(blockContext).filter((_ref=>{let[key]=_ref;return blockType.usesContext.includes(key)}))):DEFAULT_BLOCK_CONTEXT),[blockType,blockContext]);if(!blockType)return null;const Component=blockType.edit||blockType.save;if(blockType.apiVersion>1)return(0,react.createElement)(Component,(0,esm_extends.Z)({},props,{context:context}));const generatedClassName=(0,build_module.zb)(blockType,"className",!0)?(0,build_module.Vk)(name):null,className=classnames_default()(generatedClassName,attributes.className,props.className);return(0,react.createElement)(Component,(0,esm_extends.Z)({},props,{context:context,className:className}))}));function BlockEdit(props){const{name:name,isSelected:isSelected,clientId:clientId,__unstableLayoutClassNames:__unstableLayoutClassNames}=props,context={name:name,isSelected:isSelected,clientId:clientId,__unstableLayoutClassNames:__unstableLayoutClassNames};return(0,react.createElement)(Provider,{value:(0,react.useMemo)((()=>context),Object.values(context))},(0,react.createElement)(edit,props))}var modal=__webpack_require__("./packages/components/build-module/modal/index.js"),dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),more_horizontal=__webpack_require__("./packages/icons/build-module/library/more-horizontal.js");var warning=function Warning(_ref){let{className:className,actions:actions,children:children,secondaryActions:secondaryActions}=_ref;return(0,react.createElement)("div",{style:{display:"contents",all:"initial"}},(0,react.createElement)("div",{className:classnames_default()(className,"block-editor-warning")},(0,react.createElement)("div",{className:"block-editor-warning__contents"},(0,react.createElement)("p",{className:"block-editor-warning__message"},children),(react.Children.count(actions)>0||secondaryActions)&&(0,react.createElement)("div",{className:"block-editor-warning__actions"},react.Children.count(actions)>0&&react.Children.map(actions,((action,i)=>(0,react.createElement)("span",{key:i,className:"block-editor-warning__action"},action))),secondaryActions&&(0,react.createElement)(dropdown_menu.Z,{className:"block-editor-warning__secondary",icon:more_horizontal.Z,label:(0,i18n_build_module.__)("More options"),popoverProps:{position:"bottom left",className:"block-editor-warning__dropdown"},noIcons:!0},(()=>(0,react.createElement)(menu_group.Z,null,secondaryActions.map(((item,pos)=>(0,react.createElement)(menu_item.Z,{onClick:item.onClick,key:pos},item.title))))))))))},character=__webpack_require__("./node_modules/diff/lib/diff/character.js");function BlockView(_ref){let{title:title,rawContent:rawContent,renderedContent:renderedContent,action:action,actionText:actionText,className:className}=_ref;return(0,react.createElement)("div",{className:className},(0,react.createElement)("div",{className:"block-editor-block-compare__content"},(0,react.createElement)("h2",{className:"block-editor-block-compare__heading"},title),(0,react.createElement)("div",{className:"block-editor-block-compare__html"},rawContent),(0,react.createElement)("div",{className:"block-editor-block-compare__preview edit-post-visual-editor"},(0,react.createElement)(raw_html.Z,null,(0,safe_html.Z)(renderedContent)))),(0,react.createElement)("div",{className:"block-editor-block-compare__action"},(0,react.createElement)(build_module_button.Z,{variant:"secondary",tabIndex:"0",onClick:action},actionText)))}var block_compare=function BlockCompare(_ref){let{block:block,onKeep:onKeep,onConvert:onConvert,convertor:convertor,convertButtonText:convertButtonText}=_ref;const converted=function getConvertedContent(convertedBlock){const newContent=(Array.isArray(convertedBlock)?convertedBlock:[convertedBlock]).map((item=>(0,build_module.kD)(item.name,item.attributes,item.innerBlocks)));return newContent.join("")}(convertor(block)),difference=function getDifference(originalContent,newContent){return(0,character.Kx)(originalContent,newContent).map(((item,pos)=>{const classes=classnames_default()({"block-editor-block-compare__added":item.added,"block-editor-block-compare__removed":item.removed});return(0,react.createElement)("span",{key:pos,className:classes},item.value)}))}(block.originalContent,converted);return(0,react.createElement)("div",{className:"block-editor-block-compare__wrapper"},(0,react.createElement)(BlockView,{title:(0,i18n_build_module.__)("Current"),className:"block-editor-block-compare__current",action:onKeep,actionText:(0,i18n_build_module.__)("Convert to HTML"),rawContent:block.originalContent,renderedContent:block.originalContent}),(0,react.createElement)(BlockView,{title:(0,i18n_build_module.__)("After Conversion"),className:"block-editor-block-compare__converted",action:onConvert,actionText:convertButtonText,rawContent:difference,renderedContent:converted}))};const blockToBlocks=block=>(0,build_module.AF)({HTML:block.originalContent});var block_invalid_warning=(0,compose.Z)([(0,with_select.Z)(((select,_ref3)=>{let{clientId:clientId}=_ref3;return{block:select(store).getBlock(clientId)}})),(0,with_dispatch.Z)(((dispatch,_ref4)=>{let{block:block}=_ref4;const{replaceBlock:replaceBlock}=dispatch(store);return{convertToClassic(){replaceBlock(block.clientId,(block=>(0,build_module.j4)("core/freeform",{content:block.originalContent}))(block))},convertToHTML(){replaceBlock(block.clientId,(block=>(0,build_module.j4)("core/html",{content:block.originalContent}))(block))},convertToBlocks(){replaceBlock(block.clientId,blockToBlocks(block))},attemptBlockRecovery(){replaceBlock(block.clientId,(_ref2=>{let{name:name,attributes:attributes,innerBlocks:innerBlocks}=_ref2;return(0,build_module.j4)(name,attributes,innerBlocks)})(block))}}}))])((function BlockInvalidWarning(_ref){let{convertToHTML:convertToHTML,convertToBlocks:convertToBlocks,convertToClassic:convertToClassic,attemptBlockRecovery:attemptBlockRecovery,block:block}=_ref;const hasHTMLBlock=!!(0,build_module.ck)("core/html"),[compare,setCompare]=(0,react.useState)(!1),onCompare=(0,react.useCallback)((()=>setCompare(!0)),[]),onCompareClose=(0,react.useCallback)((()=>setCompare(!1)),[]),hiddenActions=(0,react.useMemo)((()=>[{title:(0,i18n_build_module._x)("Resolve","imperative verb"),onClick:onCompare},hasHTMLBlock&&{title:(0,i18n_build_module.__)("Convert to HTML"),onClick:convertToHTML},{title:(0,i18n_build_module.__)("Convert to Classic Block"),onClick:convertToClassic}].filter(Boolean)),[onCompare,convertToHTML,convertToClassic]);return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(warning,{actions:[(0,react.createElement)(build_module_button.Z,{key:"recover",onClick:attemptBlockRecovery,variant:"primary"},(0,i18n_build_module.__)("Attempt Block Recovery"))],secondaryActions:hiddenActions},(0,i18n_build_module.__)("This block contains unexpected or invalid content.")),compare&&(0,react.createElement)(modal.Z,{title:(0,i18n_build_module.__)("Resolve Block"),onRequestClose:onCompareClose,className:"block-editor-block-compare"},(0,react.createElement)(block_compare,{block:block,onKeep:convertToHTML,onConvert:convertToBlocks,convertor:blockToBlocks,convertButtonText:(0,i18n_build_module.__)("Convert to Blocks")})))}));const block_crash_warning_warning=(0,react.createElement)(warning,{className:"block-editor-block-list__block-crash-warning"},(0,i18n_build_module.__)("This block has encountered an error and cannot be previewed."));var block_crash_warning=()=>block_crash_warning_warning;class BlockCrashBoundary extends react.Component{constructor(){super(...arguments),this.state={hasError:!1}}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?this.props.fallback:this.props.children}}BlockCrashBoundary.displayName="BlockCrashBoundary",BlockCrashBoundary.__docgenInfo={description:"",methods:[],displayName:"BlockCrashBoundary"};var block_crash_boundary=BlockCrashBoundary;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/build-module/components/block-list/block-crash-boundary.js"]={name:"BlockCrashBoundary",docgenInfo:BlockCrashBoundary.__docgenInfo,path:"packages/block-editor/build-module/components/block-list/block-crash-boundary.js"});var lib=__webpack_require__("./node_modules/react-autosize-textarea/lib/index.js");var block_html=function BlockHTML(_ref){let{clientId:clientId}=_ref;const[html,setHtml]=(0,react.useState)(""),block=(0,use_select.Z)((select=>select(store).getBlock(clientId)),[clientId]),{updateBlock:updateBlock}=(0,use_dispatch.Z)(store);return(0,react.useEffect)((()=>{setHtml((0,build_module.Jo)(block))}),[block]),(0,react.createElement)(lib.Z,{className:"block-editor-block-list__block-html-textarea",value:html,onBlur:()=>{const blockType=(0,build_module.ck)(block.name);if(!blockType)return;const attributes=(0,build_module.DJ)(blockType,html,block.attributes),content=html||(0,build_module.kD)(blockType,attributes),[isValid]=html?(0,build_module.lM)({...block,attributes:attributes,originalContent:content}):[!0];updateBlock(clientId,{attributes:attributes,originalContent:content,isValid:isValid}),html||setHtml({content:content})},onChange:event=>setHtml(event.target.value)})},use_disabled=__webpack_require__("./packages/compose/build-module/hooks/use-disabled/index.js"),react_spring_web_esm=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),use_reduced_motion=__webpack_require__("./packages/compose/build-module/hooks/use-reduced-motion/index.js"),get_scroll_container=__webpack_require__("./packages/dom/build-module/dom/get-scroll-container.js");const counterReducer=state=>state+1,getAbsolutePosition=element=>({top:element.offsetTop,left:element.offsetLeft});var use_moving_animation=function useMovingAnimation(_ref){let{isSelected:isSelected,adjustScrolling:adjustScrolling,enableAnimation:enableAnimation,triggerAnimationOnChange:triggerAnimationOnChange}=_ref;const ref=(0,react.useRef)(),prefersReducedMotion=(0,use_reduced_motion.Z)()||!enableAnimation,[triggeredAnimation,triggerAnimation]=(0,react.useReducer)(counterReducer,0),[finishedAnimation,endAnimation]=(0,react.useReducer)(counterReducer,0),[transform,setTransform]=(0,react.useState)({x:0,y:0}),previous=(0,react.useMemo)((()=>ref.current?getAbsolutePosition(ref.current):null),[triggerAnimationOnChange]),preserveScrollPosition=(0,react.useMemo)((()=>{if(!adjustScrolling||!ref.current)return()=>{};const scrollContainer=(0,get_scroll_container.Z)(ref.current);if(!scrollContainer)return()=>{};const prevRect=ref.current.getBoundingClientRect();return()=>{const diff=ref.current.getBoundingClientRect().top-prevRect.top;diff&&(scrollContainer.scrollTop+=diff)}}),[triggerAnimationOnChange,adjustScrolling]);return(0,react.useLayoutEffect)((()=>{triggeredAnimation&&endAnimation()}),[triggeredAnimation]),(0,react.useLayoutEffect)((()=>{if(!previous)return;if(prefersReducedMotion)return void preserveScrollPosition();ref.current.style.transform=void 0;const destination=getAbsolutePosition(ref.current);triggerAnimation(),setTransform({x:Math.round(previous.left-destination.left),y:Math.round(previous.top-destination.top)})}),[triggerAnimationOnChange]),(0,react_spring_web_esm.useSpring)({from:{x:transform.x,y:transform.y},to:{x:0,y:0},reset:triggeredAnimation!==finishedAnimation,config:{mass:5,tension:2e3,friction:200},immediate:prefersReducedMotion,onChange:function onChange(_ref2){let{value:value}=_ref2;if(!ref.current)return;let{x:x,y:y}=value;x=Math.round(x),y=Math.round(y);const finishedMoving=0===x&&0===y;ref.current.style.transformOrigin="center center",ref.current.style.transform=finishedMoving?void 0:`translate3d(${x}px,${y}px,0)`,ref.current.style.zIndex=isSelected?"1":"",preserveScrollPosition()}}),ref},dom_build_module=__webpack_require__("./packages/dom/build-module/index.js"),is_text_field=__webpack_require__("./packages/dom/build-module/dom/is-text-field.js"),is_form_element=__webpack_require__("./packages/dom/build-module/dom/is-form-element.js"),place_caret_at_horizontal_edge=__webpack_require__("./packages/dom/build-module/dom/place-caret-at-horizontal-edge.js");const BLOCK_SELECTOR=".block-editor-block-list__block",APPENDER_SELECTOR=".block-list-appender",BLOCK_APPENDER_CLASS=".block-editor-button-block-appender";function isInsideRootBlock(blockElement,element){return element.closest([BLOCK_SELECTOR,APPENDER_SELECTOR,BLOCK_APPENDER_CLASS].join(","))===blockElement}function getBlockClientId(node){for(;node&&node.nodeType!==node.ELEMENT_NODE;)node=node.parentNode;if(!node)return;const blockNode=node.closest(BLOCK_SELECTOR);return blockNode?blockNode.id.slice("block-".length):void 0}function useFocusFirstElement(clientId){const ref=(0,react.useRef)(),initialPosition=function useInitialPosition(clientId){return(0,use_select.Z)((select=>{const{getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,__unstableGetEditorMode:__unstableGetEditorMode,isBlockSelected:isBlockSelected}=select(store);if(isBlockSelected(clientId)&&"edit"===__unstableGetEditorMode())return getSelectedBlocksInitialCaretPosition()}),[clientId])}(clientId),{isBlockSelected:isBlockSelected,isMultiSelecting:isMultiSelecting}=(0,use_select.Z)(store);return(0,react.useEffect)((()=>{if(!isBlockSelected(clientId)||isMultiSelecting())return;if(null==initialPosition)return;if(!ref.current)return;const{ownerDocument:ownerDocument}=ref.current;if(isInsideRootBlock(ref.current,ownerDocument.activeElement))return;const textInputs=dom_build_module.T_.tabbable.find(ref.current).filter((node=>(0,is_text_field.Z)(node))),isReverse=-1===initialPosition,target=textInputs[isReverse?textInputs.length-1:0]||ref.current;if(isInsideRootBlock(ref.current,target)){if(!ref.current.getAttribute("contenteditable")){const focusElement=dom_build_module.T_.tabbable.findNext(ref.current);if(focusElement&&isInsideRootBlock(ref.current,focusElement)&&(0,is_form_element.Z)(focusElement))return void focusElement.focus()}(0,place_caret_at_horizontal_edge.Z)(target,isReverse)}else ref.current.focus()}),[initialPosition,clientId]),ref}function listener(event){if(event.defaultPrevented)return;const action="mouseover"===event.type?"add":"remove";event.preventDefault(),event.currentTarget.classList[action]("is-hovered")}function useIsHovered(){const isEnabled=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store);return getSettings().outlineMode}),[]);return(0,use_ref_effect.Z)((node=>{if(isEnabled)return node.addEventListener("mouseout",listener),node.addEventListener("mouseover",listener),()=>{node.removeEventListener("mouseout",listener),node.removeEventListener("mouseover",listener),node.classList.remove("is-hovered")}}),[isEnabled])}function useBlockClassNames(clientId){return(0,use_select.Z)((select=>{const{isBlockBeingDragged:isBlockBeingDragged,isBlockHighlighted:isBlockHighlighted,isBlockSelected:isBlockSelected,isBlockMultiSelected:isBlockMultiSelected,getBlockName:getBlockName,getSettings:getSettings,hasSelectedInnerBlock:hasSelectedInnerBlock,isTyping:isTyping,__unstableIsFullySelected:__unstableIsFullySelected,__unstableSelectionHasUnmergeableBlock:__unstableSelectionHasUnmergeableBlock}=select(store),{outlineMode:outlineMode}=getSettings(),isDragging=isBlockBeingDragged(clientId),isSelected=isBlockSelected(clientId),name=getBlockName(clientId),isAncestorOfSelectedBlock=hasSelectedInnerBlock(clientId,!0),isMultiSelected=isBlockMultiSelected(clientId);return classnames_default()({"is-selected":isSelected,"is-highlighted":isBlockHighlighted(clientId),"is-multi-selected":isMultiSelected,"is-partially-selected":isMultiSelected&&!__unstableIsFullySelected()&&!__unstableSelectionHasUnmergeableBlock(),"is-reusable":(0,build_module.vr)((0,build_module.ck)(name)),"is-dragging":isDragging,"has-child-selected":isAncestorOfSelectedBlock,"remove-outline":isSelected&&outlineMode&&isTyping()})}),[clientId])}function useBlockDefaultClassName(clientId){return(0,use_select.Z)((select=>{const name=select(store).getBlockName(clientId),blockType=(0,build_module.ck)(name);if((null==blockType?void 0:blockType.apiVersion)>1)return(0,build_module.Vk)(name)}),[clientId])}function useBlockCustomClassName(clientId){return(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(store),attributes=getBlockAttributes(clientId);if(null==attributes||!attributes.className)return;const blockType=(0,build_module.ck)(getBlockName(clientId));return(null==blockType?void 0:blockType.apiVersion)>1?attributes.className:void 0}),[clientId])}function useBlockMovingModeClassNames(clientId){return(0,use_select.Z)((select=>{const{hasBlockMovingClientId:hasBlockMovingClientId,canInsertBlockType:canInsertBlockType,getBlockName:getBlockName,getBlockRootClientId:getBlockRootClientId,isBlockSelected:isBlockSelected}=select(store);if(!isBlockSelected(clientId))return;const movingClientId=hasBlockMovingClientId();return movingClientId?classnames_default()("is-block-moving-mode",{"can-insert-moving-block":canInsertBlockType(getBlockName(movingClientId),getBlockRootClientId(clientId))}):void 0}),[clientId])}function useFocusHandler(clientId){const{isBlockSelected:isBlockSelected}=(0,use_select.Z)(store),{selectBlock:selectBlock,selectionChange:selectionChange}=(0,use_dispatch.Z)(store);return(0,use_ref_effect.Z)((node=>{function onFocus(event){node.parentElement.closest('[contenteditable="true"]')||(isBlockSelected(clientId)?event.target.isContentEditable||selectionChange(clientId):isInsideRootBlock(node,event.target)&&selectBlock(clientId))}return node.addEventListener("focusin",onFocus),()=>{node.removeEventListener("focusin",onFocus)}}),[isBlockSelected,selectBlock])}var keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js");function useEventHandlers(clientId){const isSelected=(0,use_select.Z)((select=>select(store).isBlockSelected(clientId)),[clientId]),{getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex}=(0,use_select.Z)(store),{insertDefaultBlock:insertDefaultBlock,removeBlock:removeBlock}=(0,use_dispatch.Z)(store);return(0,use_ref_effect.Z)((node=>{if(isSelected)return node.addEventListener("keydown",onKeyDown),node.addEventListener("dragstart",onDragStart),()=>{node.removeEventListener("keydown",onKeyDown),node.removeEventListener("dragstart",onDragStart)};function onKeyDown(event){const{keyCode:keyCode,target:target}=event;keyCode!==keycodes_build_module.K5&&keyCode!==keycodes_build_module.ZH&&keyCode!==keycodes_build_module.yY||target!==node||(0,is_text_field.Z)(target)||(event.preventDefault(),keyCode===keycodes_build_module.K5?insertDefaultBlock({},getBlockRootClientId(clientId),getBlockIndex(clientId)+1):removeBlock(clientId))}function onDragStart(event){event.preventDefault()}}),[clientId,isSelected,getBlockRootClientId,getBlockIndex,insertDefaultBlock,removeBlock])}function useNavModeExit(clientId){const{isNavigationMode:isNavigationMode,isBlockSelected:isBlockSelected}=(0,use_select.Z)(store),{setNavigationMode:setNavigationMode,selectBlock:selectBlock}=(0,use_dispatch.Z)(store);return(0,use_ref_effect.Z)((node=>{function onMouseDown(event){isNavigationMode()&&!event.defaultPrevented&&(event.preventDefault(),isBlockSelected(clientId)?setNavigationMode(!1):selectBlock(clientId))}return node.addEventListener("mousedown",onMouseDown),()=>{node.addEventListener("mousedown",onMouseDown)}}),[clientId,isNavigationMode,isBlockSelected,setNavigationMode])}function useIntersectionObserver(){const observer=(0,react.useContext)(IntersectionObserver);return(0,use_ref_effect.Z)((node=>{if(observer)return observer.observe(node),()=>{observer.unobserve(node)}}),[observer])}function useBlockOverlayActive(clientId){return(0,use_select.Z)((select=>{const{__unstableHasActiveBlockOverlayActive:__unstableHasActiveBlockOverlayActive}=select(store);return __unstableHasActiveBlockOverlayActive(clientId)}),[clientId])}var use_block_props_process=__webpack_require__("./node_modules/process/browser.js");function useBlockProps(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{__unstableIsHtml:__unstableIsHtml}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{clientId:clientId,className:className,wrapperProps:wrapperProps={},isAligned:isAligned}=(0,react.useContext)(BlockListBlockContext),{index:index,mode:mode,name:name,blockApiVersion:blockApiVersion,blockTitle:blockTitle,isPartOfSelection:isPartOfSelection,adjustScrolling:adjustScrolling,enableAnimation:enableAnimation}=(0,use_select.Z)((select=>{const{getBlockAttributes:getBlockAttributes,getBlockIndex:getBlockIndex,getBlockMode:getBlockMode,getBlockName:getBlockName,isTyping:isTyping,getGlobalBlockCount:getGlobalBlockCount,isBlockSelected:isBlockSelected,isBlockMultiSelected:isBlockMultiSelected,isAncestorMultiSelected:isAncestorMultiSelected,isFirstMultiSelectedBlock:isFirstMultiSelectedBlock}=select(store),{getActiveBlockVariation:getActiveBlockVariation}=select(build_module.h),isSelected=isBlockSelected(clientId),isPartOfMultiSelection=isBlockMultiSelected(clientId)||isAncestorMultiSelected(clientId),blockName=getBlockName(clientId),blockType=(0,build_module.ck)(blockName),match=getActiveBlockVariation(blockName,getBlockAttributes(clientId));return{index:getBlockIndex(clientId),mode:getBlockMode(clientId),name:blockName,blockApiVersion:(null==blockType?void 0:blockType.apiVersion)||1,blockTitle:(null==match?void 0:match.title)||(null==blockType?void 0:blockType.title),isPartOfSelection:isSelected||isPartOfMultiSelection,adjustScrolling:isSelected||isFirstMultiSelectedBlock(clientId),enableAnimation:!isTyping()&&getGlobalBlockCount()<=200}}),[clientId]),hasOverlay=useBlockOverlayActive(clientId),blockLabel=(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block: %s"),blockTitle),htmlSuffix="html"!==mode||__unstableIsHtml?"":"-visual",mergedRefs=(0,use_merge_refs.Z)([props.ref,useFocusFirstElement(clientId),useBlockRefProvider(clientId),useFocusHandler(clientId),useEventHandlers(clientId),useNavModeExit(clientId),useIsHovered(),useIntersectionObserver(),use_moving_animation({isSelected:isPartOfSelection,adjustScrolling:adjustScrolling,enableAnimation:enableAnimation,triggerAnimationOnChange:index}),(0,use_disabled.Z)({isDisabled:!hasOverlay})]),blockEditContext=useBlockEditContext();return blockApiVersion<2&&clientId===blockEditContext.clientId&&void 0!==use_block_props_process&&use_block_props_process.env,{tabIndex:0,...wrapperProps,...props,ref:mergedRefs,id:`block-${clientId}${htmlSuffix}`,role:"document","aria-label":blockLabel,"data-block":clientId,"data-type":name,"data-title":blockTitle,className:classnames_default()(classnames_default()("block-editor-block-list__block",{"wp-block":!isAligned,"has-block-overlay":hasOverlay}),className,props.className,wrapperProps.className,useBlockClassNames(clientId),useBlockDefaultClassName(clientId),useBlockCustomClassName(clientId),useBlockMovingModeClassNames(clientId)),style:{...wrapperProps.style,...props.style}}}useBlockProps.save=build_module.dF;const BlockListBlockContext=(0,react.createContext)();function Block(_ref){let{children:children,isHtml:isHtml,...props}=_ref;return(0,react.createElement)("div",useBlockProps(props,{__unstableIsHtml:isHtml}),children)}const applyWithSelect=(0,with_select.Z)(((select,_ref3)=>{let{clientId:clientId,rootClientId:rootClientId}=_ref3;const{isBlockSelected:isBlockSelected,getBlockMode:getBlockMode,isSelectionEnabled:isSelectionEnabled,getTemplateLock:getTemplateLock,__unstableGetBlockWithoutInnerBlocks:__unstableGetBlockWithoutInnerBlocks,canRemoveBlock:canRemoveBlock,canMoveBlock:canMoveBlock}=select(store),block=__unstableGetBlockWithoutInnerBlocks(clientId),isSelected=isBlockSelected(clientId),templateLock=getTemplateLock(rootClientId),canRemove=canRemoveBlock(clientId,rootClientId),canMove=canMoveBlock(clientId,rootClientId),{name:name,attributes:attributes,isValid:isValid}=block||{};return{mode:getBlockMode(clientId),isSelectionEnabled:isSelectionEnabled(),isLocked:!!templateLock,canRemove:canRemove,canMove:canMove,block:block,name:name,attributes:attributes,isValid:isValid,isSelected:isSelected}})),applyWithDispatch=(0,with_dispatch.Z)(((dispatch,ownProps,registry)=>{const{updateBlockAttributes:updateBlockAttributes,insertBlocks:insertBlocks,mergeBlocks:mergeBlocks,replaceBlocks:replaceBlocks,toggleSelection:toggleSelection,__unstableMarkLastChangeAsPersistent:__unstableMarkLastChangeAsPersistent,moveBlocksToPosition:moveBlocksToPosition,removeBlock:removeBlock}=dispatch(store);return{setAttributes(newAttributes){const{getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds}=registry.select(store),multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(),{clientId:clientId}=ownProps,clientIds=multiSelectedBlockClientIds.length?multiSelectedBlockClientIds:[clientId];updateBlockAttributes(clientIds,newAttributes)},onInsertBlocks(blocks,index){const{rootClientId:rootClientId}=ownProps;insertBlocks(blocks,index,rootClientId)},onInsertBlocksAfter(blocks){const{clientId:clientId,rootClientId:rootClientId}=ownProps,{getBlockIndex:getBlockIndex}=registry.select(store),index=getBlockIndex(clientId);insertBlocks(blocks,index+1,rootClientId)},onMerge(forward){const{clientId:clientId,rootClientId:rootClientId}=ownProps,{getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId,getBlock:getBlock,getBlockAttributes:getBlockAttributes,getBlockName:getBlockName,getBlockOrder:getBlockOrder,getBlockIndex:getBlockIndex,getBlockRootClientId:getBlockRootClientId,canInsertBlockType:canInsertBlockType}=registry.select(store);function moveFirstItemUp(_clientId){let changeSelection=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const targetRootClientId=getBlockRootClientId(_clientId),blockOrder=getBlockOrder(_clientId),[firstClientId]=blockOrder;if(1===blockOrder.length&&(0,build_module.pe)(getBlock(firstClientId)))removeBlock(_clientId);else{if(canInsertBlockType(getBlockName(firstClientId),targetRootClientId))moveBlocksToPosition([firstClientId],_clientId,targetRootClientId,getBlockIndex(_clientId));else{const replacement=(0,build_module.m4)(getBlock(firstClientId),(0,build_module.UT)());replacement&&replacement.length&&registry.batch((()=>{insertBlocks(replacement,getBlockIndex(_clientId),targetRootClientId,changeSelection),removeBlock(firstClientId,!1)}))}!getBlockOrder(_clientId).length&&(0,build_module.pe)(getBlock(_clientId))&&removeBlock(_clientId,!1)}}if(forward){if(rootClientId){const nextRootClientId=getNextBlockClientId(rootClientId);if(nextRootClientId){if(getBlockName(rootClientId)!==getBlockName(nextRootClientId))return void mergeBlocks(rootClientId,nextRootClientId);{const rootAttributes=getBlockAttributes(rootClientId),previousRootAttributes=getBlockAttributes(nextRootClientId);if(Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key])))return void registry.batch((()=>{moveBlocksToPosition(getBlockOrder(nextRootClientId),nextRootClientId,rootClientId),removeBlock(nextRootClientId,!1)}))}}}const nextBlockClientId=getNextBlockClientId(clientId);if(!nextBlockClientId)return;getBlockOrder(nextBlockClientId).length?moveFirstItemUp(nextBlockClientId,!1):mergeBlocks(clientId,nextBlockClientId)}else{const previousBlockClientId=getPreviousBlockClientId(clientId);if(previousBlockClientId)mergeBlocks(previousBlockClientId,clientId);else if(rootClientId){const previousRootClientId=getPreviousBlockClientId(rootClientId);if(previousRootClientId&&getBlockName(rootClientId)===getBlockName(previousRootClientId)){const rootAttributes=getBlockAttributes(rootClientId),previousRootAttributes=getBlockAttributes(previousRootClientId);if(Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key])))return void registry.batch((()=>{moveBlocksToPosition(getBlockOrder(rootClientId),rootClientId,previousRootClientId),removeBlock(rootClientId,!1)}))}moveFirstItemUp(rootClientId)}}},onReplace(blocks,indexToSelect,initialPosition){blocks.length&&!(0,build_module.ZP)(blocks[blocks.length-1])&&__unstableMarkLastChangeAsPersistent(),replaceBlocks([ownProps.clientId],blocks,indexToSelect,initialPosition)},toggleSelection(selectionEnabled){toggleSelection(selectionEnabled)}}}));var block=(0,compose.Z)(pure.Z,applyWithSelect,applyWithDispatch,(0,if_condition.Z)((_ref4=>{let{block:block}=_ref4;return!!block})),(0,with_filters.Z)("editor.BlockListBlock"))((function BlockListBlock(_ref2){var _wrapperProps;let{block:{__unstableBlockSource:__unstableBlockSource},mode:mode,isLocked:isLocked,canRemove:canRemove,clientId:clientId,isSelected:isSelected,isSelectionEnabled:isSelectionEnabled,className:className,__unstableLayoutClassNames:layoutClassNames,name:name,isValid:isValid,attributes:attributes,wrapperProps:wrapperProps,setAttributes:setAttributes,onReplace:onReplace,onInsertBlocksAfter:onInsertBlocksAfter,onMerge:onMerge,toggleSelection:toggleSelection}=_ref2;const{themeSupportsLayout:themeSupportsLayout,hasContentLockedParent:hasContentLockedParent,isContentBlock:isContentBlock,isContentLocking:isContentLocking,isTemporarilyEditingAsBlocks:isTemporarilyEditingAsBlocks}=(0,use_select.Z)((select=>{const{getSettings:getSettings,__unstableGetContentLockingParent:__unstableGetContentLockingParent,getTemplateLock:getTemplateLock,__unstableGetTemporarilyEditingAsBlocks:__unstableGetTemporarilyEditingAsBlocks}=select(store),_hasContentLockedParent=!!__unstableGetContentLockingParent(clientId);return{themeSupportsLayout:getSettings().supportsLayout,isContentBlock:select(build_module.h).__experimentalHasContentRoleAttribute(name),hasContentLockedParent:_hasContentLockedParent,isContentLocking:"contentOnly"===getTemplateLock(clientId)&&!_hasContentLockedParent,isTemporarilyEditingAsBlocks:__unstableGetTemporarilyEditingAsBlocks()===clientId}}),[name,clientId]),{removeBlock:removeBlock}=(0,use_dispatch.Z)(store),onRemove=(0,react.useCallback)((()=>removeBlock(clientId)),[clientId]),parentLayout=useLayout()||{};let blockEdit=(0,react.createElement)(BlockEdit,{name:name,isSelected:isSelected,attributes:attributes,setAttributes:setAttributes,insertBlocksAfter:isLocked?void 0:onInsertBlocksAfter,onReplace:canRemove?onReplace:void 0,onRemove:canRemove?onRemove:void 0,mergeBlocks:canRemove?onMerge:void 0,clientId:clientId,isSelectionEnabled:isSelectionEnabled,toggleSelection:toggleSelection,__unstableLayoutClassNames:layoutClassNames,__unstableParentLayout:Object.keys(parentLayout).length?parentLayout:void 0});const blockType=(0,build_module.ck)(name);hasContentLockedParent&&!isContentBlock&&(wrapperProps={...wrapperProps,tabIndex:-1}),null!=blockType&&blockType.getEditWrapperProps&&(wrapperProps=function mergeWrapperProps(propsA,propsB){const newProps={...propsA,...propsB};return null!=propsA&&propsA.className&&null!=propsB&&propsB.className&&(newProps.className=classnames_default()(propsA.className,propsB.className)),null!=propsA&&propsA.style&&null!=propsB&&propsB.style&&(newProps.style={...propsA.style,...propsB.style}),newProps}(wrapperProps,blockType.getEditWrapperProps(attributes)));const isAligned=wrapperProps&&!!wrapperProps["data-align"]&&!themeSupportsLayout;let block;if(isAligned&&(blockEdit=(0,react.createElement)("div",{className:"wp-block","data-align":wrapperProps["data-align"]},blockEdit)),isValid)block="html"===mode?(0,react.createElement)(react.Fragment,null,(0,react.createElement)("div",{style:{display:"none"}},blockEdit),(0,react.createElement)(Block,{isHtml:!0},(0,react.createElement)(block_html,{clientId:clientId}))):(null==blockType?void 0:blockType.apiVersion)>1?blockEdit:(0,react.createElement)(Block,wrapperProps,blockEdit);else{const saveContent=__unstableBlockSource?(0,build_module.rq)(__unstableBlockSource):(0,build_module.kD)(blockType,attributes);block=(0,react.createElement)(Block,{className:"has-warning"},(0,react.createElement)(block_invalid_warning,{clientId:clientId}),(0,react.createElement)(raw_html.Z,null,(0,safe_html.Z)(saveContent)))}const{"data-align":dataAlign,...restWrapperProps}=null!==(_wrapperProps=wrapperProps)&&void 0!==_wrapperProps?_wrapperProps:{},value={clientId:clientId,className:classnames_default()({"is-content-locked":isContentLocking,"is-content-locked-temporarily-editing-as-blocks":isTemporarilyEditingAsBlocks,"is-content-block":hasContentLockedParent&&isContentBlock},dataAlign&&themeSupportsLayout&&`align${dataAlign}`,className),wrapperProps:restWrapperProps,isAligned:isAligned},memoizedValue=(0,react.useMemo)((()=>value),Object.values(value));return(0,react.createElement)(BlockListBlockContext.Provider,{value:memoizedValue},(0,react.createElement)(block_crash_boundary,{fallback:(0,react.createElement)(Block,{className:"has-warning"},(0,react.createElement)(block_crash_warning,null))},block))})),html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js"),dropdown=__webpack_require__("./packages/components/build-module/dropdown/index.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js"),visually_hidden_component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),search_control=__webpack_require__("./packages/components/build-module/search-control/index.js"),create_interpolate_element=__webpack_require__("./packages/element/build-module/create-interpolate-element.js"),tip=__webpack_require__("./packages/components/build-module/tip/index.js");const globalTips=[(0,create_interpolate_element.Z)((0,i18n_build_module.__)("While writing, you can press <kbd>/</kbd> to quickly insert new blocks."),{kbd:(0,react.createElement)("kbd",null)}),(0,create_interpolate_element.Z)((0,i18n_build_module.__)("Indent a list by pressing <kbd>space</kbd> at the beginning of a line."),{kbd:(0,react.createElement)("kbd",null)}),(0,create_interpolate_element.Z)((0,i18n_build_module.__)("Outdent a list by pressing <kbd>backspace</kbd> at the beginning of a line."),{kbd:(0,react.createElement)("kbd",null)}),(0,i18n_build_module.__)("Drag files into the editor to automatically insert media blocks."),(0,i18n_build_module.__)("Change a block's type by pressing the block icon on the toolbar.")];var tips=function Tips(){const[randomIndex]=(0,react.useState)(Math.floor(Math.random()*globalTips.length));return(0,react.createElement)(tip.Z,null,globalTips[randomIndex])},chevron_right=__webpack_require__("./packages/icons/build-module/library/chevron-right.js"),chevron_left=__webpack_require__("./packages/icons/build-module/library/chevron-left.js"),components_build_module_icon=__webpack_require__("./packages/components/build-module/icon/index.js"),block_default=__webpack_require__("./packages/icons/build-module/library/block-default.js");var block_icon=(0,react.memo)((function BlockIcon(_ref){var _icon;let{icon:icon,showColors:showColors=!1,className:className,context:context}=_ref;"block-default"===(null===(_icon=icon)||void 0===_icon?void 0:_icon.src)&&(icon={src:block_default.Z});const renderedIcon=(0,react.createElement)(components_build_module_icon.Z,{icon:icon&&icon.src?icon.src:icon,context:context}),style=showColors?{backgroundColor:icon&&icon.background,color:icon&&icon.foreground}:{};return(0,react.createElement)("span",{style:style,className:classnames_default()("block-editor-block-icon",className,{"has-colors":showColors})},renderedIcon)}));var block_card=function BlockCard(_ref){var _window;let{title:title,icon:icon,description:description,blockType:blockType,className:className}=_ref;blockType&&((0,deprecated_build_module.Z)("`blockType` property in `BlockCard component`",{since:"5.7",alternative:"`title, icon and description` properties"}),({title:title,icon:icon,description:description}=blockType));const isOffCanvasNavigationEditorEnabled=!0===(null===(_window=window)||void 0===_window?void 0:_window.__experimentalEnableOffCanvasNavigationEditor),{parentNavBlockClientId:parentNavBlockClientId}=(0,use_select.Z)((select=>{const{getSelectedBlockClientId:getSelectedBlockClientId,getBlockParentsByBlockName:getBlockParentsByBlockName}=select(store);return{parentNavBlockClientId:getBlockParentsByBlockName(getSelectedBlockClientId(),"core/navigation",!0)[0]}}),[]),{selectBlock:selectBlock}=(0,use_dispatch.Z)(store);return(0,react.createElement)("div",{className:classnames_default()("block-editor-block-card",className)},isOffCanvasNavigationEditorEnabled&&parentNavBlockClientId&&(0,react.createElement)(build_module_button.Z,{onClick:()=>selectBlock(parentNavBlockClientId),label:(0,i18n_build_module.__)("Go to parent Navigation block"),style:{minWidth:24,padding:0},icon:(0,i18n_build_module.dZ)()?chevron_right.Z:chevron_left.Z,isSmall:!0}),(0,react.createElement)(block_icon,{icon:icon,showColors:!0}),(0,react.createElement)("div",{className:"block-editor-block-card__content"},(0,react.createElement)("h2",{className:"block-editor-block-card__title"},title),(0,react.createElement)("span",{className:"block-editor-block-card__description"},description)))},with_registry=__webpack_require__("./packages/data/build-module/components/with-registry/index.js"),build_module_registry=__webpack_require__("./packages/data/build-module/registry.js"),registry_provider_context=__webpack_require__("./packages/data/build-module/components/registry-provider/context.js");const withRegistryProvider=(0,create_higher_order_component.o)((WrappedComponent=>(0,with_registry.Z)((_ref=>{let{useSubRegistry:useSubRegistry=!0,registry:registry,...props}=_ref;if(!useSubRegistry)return(0,react.createElement)(WrappedComponent,(0,esm_extends.Z)({registry:registry},props));const[subRegistry,setSubRegistry]=(0,react.useState)(null);return(0,react.useEffect)((()=>{const newRegistry=(0,build_module_registry.p)({},registry);newRegistry.registerStore("core/block-editor",storeConfig),setSubRegistry(newRegistry)}),[registry]),subRegistry?(0,react.createElement)(registry_provider_context.ZP,{value:subRegistry},(0,react.createElement)(WrappedComponent,(0,esm_extends.Z)({registry:subRegistry},props))):null}))),"withRegistryProvider");const noop=()=>{};function useBlockSync(_ref){let{clientId:clientId=null,value:controlledBlocks,selection:controlledSelection,onChange:onChange=noop,onInput:onInput=noop}=_ref;const registry=(0,use_registry.Z)(),{resetBlocks:resetBlocks,resetSelection:resetSelection,replaceInnerBlocks:replaceInnerBlocks,setHasControlledInnerBlocks:setHasControlledInnerBlocks,__unstableMarkNextChangeAsNotPersistent:__unstableMarkNextChangeAsNotPersistent}=registry.dispatch(store),{getBlockName:getBlockName,getBlocks:getBlocks}=registry.select(store),isControlled=(0,use_select.Z)((select=>!clientId||select(store).areInnerBlocksControlled(clientId)),[clientId]),pendingChanges=(0,react.useRef)({incoming:null,outgoing:[]}),subscribed=(0,react.useRef)(!1),setControlledBlocks=()=>{controlledBlocks&&(__unstableMarkNextChangeAsNotPersistent(),clientId?registry.batch((()=>{setHasControlledInnerBlocks(clientId,!0);const storeBlocks=controlledBlocks.map((block=>(0,build_module.Wm)(block)));subscribed.current&&(pendingChanges.current.incoming=storeBlocks),__unstableMarkNextChangeAsNotPersistent(),replaceInnerBlocks(clientId,storeBlocks)})):(subscribed.current&&(pendingChanges.current.incoming=controlledBlocks),resetBlocks(controlledBlocks)))},onInputRef=(0,react.useRef)(onInput),onChangeRef=(0,react.useRef)(onChange);(0,react.useEffect)((()=>{onInputRef.current=onInput,onChangeRef.current=onChange}),[onInput,onChange]),(0,react.useEffect)((()=>{pendingChanges.current.outgoing.includes(controlledBlocks)?pendingChanges.current.outgoing[pendingChanges.current.outgoing.length-1]===controlledBlocks&&(pendingChanges.current.outgoing=[]):getBlocks(clientId)!==controlledBlocks&&(pendingChanges.current.outgoing=[],setControlledBlocks(),controlledSelection&&resetSelection(controlledSelection.selectionStart,controlledSelection.selectionEnd,controlledSelection.initialPosition))}),[controlledBlocks,clientId]),(0,react.useEffect)((()=>{isControlled||(pendingChanges.current.outgoing=[],setControlledBlocks())}),[isControlled]),(0,react.useEffect)((()=>{const{getSelectionStart:getSelectionStart,getSelectionEnd:getSelectionEnd,getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,isLastBlockChangePersistent:isLastBlockChangePersistent,__unstableIsLastBlockChangeIgnored:__unstableIsLastBlockChangeIgnored,areInnerBlocksControlled:areInnerBlocksControlled}=registry.select(store);let blocks=getBlocks(clientId),isPersistent=isLastBlockChangePersistent(),previousAreBlocksDifferent=!1;subscribed.current=!0;const unsubscribe=registry.subscribe((()=>{if(null!==clientId&&null===getBlockName(clientId))return;if(!(!clientId||areInnerBlocksControlled(clientId)))return;const newIsPersistent=isLastBlockChangePersistent(),newBlocks=getBlocks(clientId),areBlocksDifferent=newBlocks!==blocks;if(blocks=newBlocks,areBlocksDifferent&&(pendingChanges.current.incoming||__unstableIsLastBlockChangeIgnored()))return pendingChanges.current.incoming=null,void(isPersistent=newIsPersistent);if(areBlocksDifferent||previousAreBlocksDifferent&&!areBlocksDifferent&&newIsPersistent&&!isPersistent){isPersistent=newIsPersistent,pendingChanges.current.outgoing.push(blocks);(isPersistent?onChangeRef.current:onInputRef.current)(blocks,{selection:{selectionStart:getSelectionStart(),selectionEnd:getSelectionEnd(),initialPosition:getSelectedBlocksInitialCaretPosition()}})}previousAreBlocksDifferent=areBlocksDifferent}));return()=>unsubscribe()}),[registry,clientId])}var provider=withRegistryProvider((function BlockEditorProvider(props){const{children:children,settings:settings}=props,{updateSettings:updateSettings}=(0,use_dispatch.Z)(store);return(0,react.useEffect)((()=>{updateSettings(settings)}),[settings]),useBlockSync(props),(0,react.createElement)(BlockRefsProvider,null,children)})),use_resize_observer=__webpack_require__("./packages/compose/build-module/hooks/use-resize-observer/index.js"),disabled=__webpack_require__("./packages/components/build-module/disabled/index.js");function useBlockSelectionClearer(){const{getSettings:getSettings,hasSelectedBlock:hasSelectedBlock,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store),{clearSelectedBlock:clearSelectedBlock}=(0,use_dispatch.Z)(store),{__experimentalClearBlockSelection:isEnabled}=getSettings();return(0,use_ref_effect.Z)((node=>{if(isEnabled)return node.addEventListener("mousedown",onMouseDown),()=>{node.removeEventListener("mousedown",onMouseDown)};function onMouseDown(event){(hasSelectedBlock()||hasMultiSelection())&&event.target===node&&clearSelectedBlock()}}),[hasSelectedBlock,hasMultiSelection,clearSelectedBlock,isEnabled])}function selector(select){const{isMultiSelecting:isMultiSelecting,getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds,hasMultiSelection:hasMultiSelection,getSelectedBlockClientId:getSelectedBlockClientId,getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,__unstableIsFullySelected:__unstableIsFullySelected}=select(store);return{isMultiSelecting:isMultiSelecting(),multiSelectedBlockClientIds:getMultiSelectedBlockClientIds(),hasMultiSelection:hasMultiSelection(),selectedBlockClientId:getSelectedBlockClientId(),initialPosition:getSelectedBlocksInitialCaretPosition(),isFullSelection:__unstableIsFullySelected()}}function useMultiSelection(){const{initialPosition:initialPosition,isMultiSelecting:isMultiSelecting,multiSelectedBlockClientIds:multiSelectedBlockClientIds,hasMultiSelection:hasMultiSelection,selectedBlockClientId:selectedBlockClientId,isFullSelection:isFullSelection}=(0,use_select.Z)(selector,[]);return(0,use_ref_effect.Z)((node=>{const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;if(null==initialPosition)return;if(!hasMultiSelection||isMultiSelecting)return;const{length:length}=multiSelectedBlockClientIds;length<2||isFullSelection&&(node.contentEditable=!0,node.focus(),defaultView.getSelection().removeAllRanges())}),[hasMultiSelection,isMultiSelecting,multiSelectedBlockClientIds,selectedBlockClientId,initialPosition,isFullSelection])}var is_vertical_edge=__webpack_require__("./packages/dom/build-module/dom/is-vertical-edge.js"),is_horizontal_edge=__webpack_require__("./packages/dom/build-module/dom/is-horizontal-edge.js"),compute_caret_rect=__webpack_require__("./packages/dom/build-module/dom/compute-caret-rect.js"),is_rtl=__webpack_require__("./packages/dom/build-module/dom/is-rtl.js"),place_caret_at_vertical_edge=__webpack_require__("./packages/dom/build-module/dom/place-caret-at-vertical-edge.js");function getClosestTabbable(target,isReverse,containerElement,onlyVertical){let targetRect,focusableNodes=dom_build_module.T_.focusable.find(containerElement);return isReverse&&focusableNodes.reverse(),focusableNodes=focusableNodes.slice(focusableNodes.indexOf(target)+1),onlyVertical&&(targetRect=target.getBoundingClientRect()),focusableNodes.find((function isTabCandidate(node){if(1!==node.children.length||!function isInSameBlock(a,b){return a.closest(BLOCK_SELECTOR)===b.closest(BLOCK_SELECTOR)}(node,node.firstElementChild)||"true"!==node.firstElementChild.getAttribute("contenteditable")){if(!dom_build_module.T_.tabbable.isTabbableIndex(node))return!1;if(node.isContentEditable&&"true"!==node.contentEditable)return!1;if(onlyVertical){const nodeRect=node.getBoundingClientRect();if(nodeRect.left>=targetRect.right||nodeRect.right<=targetRect.left)return!1}return!0}}))}function useArrowNav(){const{getMultiSelectedBlocksStartClientId:getMultiSelectedBlocksStartClientId,getMultiSelectedBlocksEndClientId:getMultiSelectedBlocksEndClientId,getSettings:getSettings,hasMultiSelection:hasMultiSelection,__unstableIsFullySelected:__unstableIsFullySelected}=(0,use_select.Z)(store),{selectBlock:selectBlock}=(0,use_dispatch.Z)(store);return(0,use_ref_effect.Z)((node=>{let verticalRect;function onMouseDown(){verticalRect=null}function onKeyDown(event){const{keyCode:keyCode,target:target,shiftKey:shiftKey,ctrlKey:ctrlKey,altKey:altKey,metaKey:metaKey}=event,isUp=keyCode===keycodes_build_module.UP,isDown=keyCode===keycodes_build_module.WV,isLeft=keyCode===keycodes_build_module.RL,isRight=keyCode===keycodes_build_module.pX,isReverse=isUp||isLeft,isHorizontal=isLeft||isRight,isVertical=isUp||isDown,isNav=isHorizontal||isVertical,hasModifier=shiftKey||ctrlKey||altKey||metaKey,isNavEdge=isVertical?is_vertical_edge.Z:is_horizontal_edge.Z,{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;if(hasMultiSelection()){if(!__unstableIsFullySelected())return;if(event.defaultPrevented)return;if(!isNav)return;if(shiftKey)return;return event.preventDefault(),void(isReverse?selectBlock(getMultiSelectedBlocksStartClientId()):selectBlock(getMultiSelectedBlocksEndClientId(),-1))}if(isVertical?verticalRect||(verticalRect=(0,compute_caret_rect.Z)(defaultView)):verticalRect=null,event.defaultPrevented)return;if(!isNav)return;if(!function isNavigationCandidate(element,keyCode,hasModifier){if((keyCode===keycodes_build_module.UP||keyCode===keycodes_build_module.WV)&&!hasModifier)return!0;const{tagName:tagName}=element;if("INPUT"===tagName)return["button","checkbox","color","file","image","radio","reset","submit"].includes(element.getAttribute("type"));return"TEXTAREA"!==tagName}(target,keyCode,hasModifier))return;const isReverseDir=(0,is_rtl.Z)(target)?!isReverse:isReverse,{keepCaretInsideBlock:keepCaretInsideBlock}=getSettings();if(shiftKey)(function isClosestTabbableABlock(target,isReverse){const closestTabbable=getClosestTabbable(target,isReverse,node);return closestTabbable&&getBlockClientId(closestTabbable)})(target,isReverse)&&isNavEdge(target,isReverse)&&(node.contentEditable=!0,node.focus());else if(!isVertical||!(0,is_vertical_edge.Z)(target,isReverse)||altKey&&!(0,is_horizontal_edge.Z)(target,isReverseDir)||keepCaretInsideBlock){if(isHorizontal&&defaultView.getSelection().isCollapsed&&(0,is_horizontal_edge.Z)(target,isReverseDir)&&!keepCaretInsideBlock){const closestTabbable=getClosestTabbable(target,isReverseDir,node);(0,place_caret_at_horizontal_edge.Z)(closestTabbable,isReverse),event.preventDefault()}}else{const closestTabbable=getClosestTabbable(target,isReverse,node,!0);closestTabbable&&((0,place_caret_at_vertical_edge.Z)(closestTabbable,altKey?!isReverse:isReverse,altKey?void 0:verticalRect),event.preventDefault())}}return node.addEventListener("mousedown",onMouseDown),node.addEventListener("keydown",onKeyDown),()=>{node.removeEventListener("mousedown",onMouseDown),node.removeEventListener("keydown",onKeyDown)}}),[])}var is_entirely_selected=__webpack_require__("./packages/dom/build-module/dom/is-entirely-selected.js"),keyboard_shortcuts_build_module=__webpack_require__("./packages/keyboard-shortcuts/build-module/index.js");function useSelectAll(){const{getBlockOrder:getBlockOrder,getSelectedBlockClientIds:getSelectedBlockClientIds,getBlockRootClientId:getBlockRootClientId}=(0,use_select.Z)(store),{multiSelect:multiSelect,selectBlock:selectBlock}=(0,use_dispatch.Z)(store),isMatch=(0,keyboard_shortcuts_build_module.sx)();return(0,use_ref_effect.Z)((node=>{function onKeyDown(event){if(!isMatch("core/block-editor/select-all",event))return;const selectedClientIds=getSelectedBlockClientIds();if(selectedClientIds.length<2&&!(0,is_entirely_selected.Z)(event.target))return;event.preventDefault();const[firstSelectedClientId]=selectedClientIds,rootClientId=getBlockRootClientId(firstSelectedClientId),blockClientIds=getBlockOrder(rootClientId);selectedClientIds.length!==blockClientIds.length?multiSelect(blockClientIds[0],blockClientIds[blockClientIds.length-1]):rootClientId&&(node.ownerDocument.defaultView.getSelection().removeAllRanges(),selectBlock(rootClientId))}return node.addEventListener("keydown",onKeyDown),()=>{node.removeEventListener("keydown",onKeyDown)}}),[])}function setContentEditableWrapper(node,value){node.contentEditable=value,value&&node.focus()}function useDragSelection(){const{startMultiSelect:startMultiSelect,stopMultiSelect:stopMultiSelect}=(0,use_dispatch.Z)(store),{isSelectionEnabled:isSelectionEnabled,hasMultiSelection:hasMultiSelection,isDraggingBlocks:isDraggingBlocks}=(0,use_select.Z)(store);return(0,use_ref_effect.Z)((node=>{const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;let anchorElement,rafId;function onMouseUp(){stopMultiSelect(),defaultView.removeEventListener("mouseup",onMouseUp),rafId=defaultView.requestAnimationFrame((()=>{if(hasMultiSelection())return;setContentEditableWrapper(node,!1);const selection=defaultView.getSelection();if(selection.rangeCount){const{commonAncestorContainer:commonAncestorContainer}=selection.getRangeAt(0);anchorElement.contains(commonAncestorContainer)&&anchorElement.focus()}}))}function onMouseLeave(_ref){let{buttons:buttons,target:target}=_ref;isDraggingBlocks()||1===buttons&&target.getAttribute("contenteditable")&&isSelectionEnabled()&&(anchorElement=ownerDocument.activeElement,startMultiSelect(),defaultView.addEventListener("mouseup",onMouseUp),setContentEditableWrapper(node,!0))}return node.addEventListener("mouseout",onMouseLeave),()=>{node.removeEventListener("mouseout",onMouseLeave),defaultView.removeEventListener("mouseup",onMouseUp),defaultView.cancelAnimationFrame(rafId)}}),[startMultiSelect,stopMultiSelect,isSelectionEnabled,hasMultiSelection])}function use_selection_observer_setContentEditableWrapper(node,value){node.contentEditable=value,value&&node.focus()}function useSelectionObserver(){const{multiSelect:multiSelect,selectBlock:selectBlock,selectionChange:selectionChange}=(0,use_dispatch.Z)(store),{getBlockParents:getBlockParents,getBlockSelectionStart:getBlockSelectionStart}=(0,use_select.Z)(store);return(0,use_ref_effect.Z)((node=>{const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;function onSelectionChange(event){const selection=defaultView.getSelection();if(!selection.rangeCount)return;const isClickShift=event.shiftKey&&"mouseup"===event.type;if(selection.isCollapsed&&!isClickShift)return void use_selection_observer_setContentEditableWrapper(node,!1);let startClientId=getBlockClientId(function extractSelectionStartNode(selection){const{anchorNode:anchorNode,anchorOffset:anchorOffset}=selection;return anchorNode.nodeType===anchorNode.TEXT_NODE||0===anchorOffset?anchorNode:anchorNode.childNodes[anchorOffset-1]}(selection)),endClientId=getBlockClientId(function extractSelectionEndNode(selection){const{focusNode:focusNode,focusOffset:focusOffset}=selection;return focusNode.nodeType===focusNode.TEXT_NODE||focusOffset===focusNode.childNodes.length?focusNode:focusNode.childNodes[focusOffset]}(selection));if(isClickShift){const selectedClientId=getBlockSelectionStart(),clickedClientId=getBlockClientId(event.target),focusNodeIsNonSelectable=clickedClientId!==endClientId;(startClientId===endClientId&&selection.isCollapsed||!endClientId||focusNodeIsNonSelectable)&&(endClientId=clickedClientId),startClientId!==selectedClientId&&(startClientId=selectedClientId)}if(void 0===startClientId&&void 0===endClientId)return void use_selection_observer_setContentEditableWrapper(node,!1);if(startClientId===endClientId)selectBlock(startClientId);else{const startPath=[...getBlockParents(startClientId),startClientId],endPath=[...getBlockParents(endClientId),endClientId],depth=function findDepth(a,b){let depth=0;for(;a[depth]===b[depth];)depth++;return depth}(startPath,endPath);multiSelect(startPath[depth],endPath[depth])}}function addListeners(){ownerDocument.addEventListener("selectionchange",onSelectionChange),defaultView.addEventListener("mouseup",onSelectionChange)}function removeListeners(){ownerDocument.removeEventListener("selectionchange",onSelectionChange),defaultView.removeEventListener("mouseup",onSelectionChange)}function resetListeners(){removeListeners(),addListeners()}return addListeners(),node.addEventListener("focusin",resetListeners),()=>{removeListeners(),node.removeEventListener("focusin",resetListeners)}}),[multiSelect,selectBlock,selectionChange,getBlockParents])}function useClickSelection(){const{selectBlock:selectBlock}=(0,use_dispatch.Z)(store),{isSelectionEnabled:isSelectionEnabled,getBlockSelectionStart:getBlockSelectionStart,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store);return(0,use_ref_effect.Z)((node=>{function onMouseDown(event){if(!isSelectionEnabled()||0!==event.button)return;const startClientId=getBlockSelectionStart(),clickedClientId=getBlockClientId(event.target);event.shiftKey?startClientId!==clickedClientId&&(node.contentEditable=!0,node.focus()):hasMultiSelection()&&selectBlock(clickedClientId)}return node.addEventListener("mousedown",onMouseDown),()=>{node.removeEventListener("mousedown",onMouseDown)}}),[selectBlock,isSelectionEnabled,getBlockSelectionStart,hasMultiSelection])}function useInput(){const{__unstableIsFullySelected:__unstableIsFullySelected,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableIsSelectionMergeable:__unstableIsSelectionMergeable,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store),{replaceBlocks:replaceBlocks,__unstableSplitSelection:__unstableSplitSelection,removeBlocks:removeBlocks,__unstableDeleteSelection:__unstableDeleteSelection,__unstableExpandSelection:__unstableExpandSelection}=(0,use_dispatch.Z)(store);return(0,use_ref_effect.Z)((node=>{function onBeforeInput(event){var _event$inputType;hasMultiSelection()&&null!==(_event$inputType=event.inputType)&&void 0!==_event$inputType&&_event$inputType.startsWith("format")&&event.preventDefault()}function onKeyDown(event){event.defaultPrevented||hasMultiSelection()&&(event.keyCode===keycodes_build_module.K5?(node.contentEditable=!1,event.preventDefault(),__unstableIsFullySelected()?replaceBlocks(getSelectedBlockClientIds(),(0,build_module.j4)((0,build_module.UT)())):__unstableSplitSelection()):event.keyCode===keycodes_build_module.ZH||event.keyCode===keycodes_build_module.yY?(node.contentEditable=!1,event.preventDefault(),__unstableIsFullySelected()?removeBlocks(getSelectedBlockClientIds()):__unstableIsSelectionMergeable()?__unstableDeleteSelection(event.keyCode===keycodes_build_module.yY):__unstableExpandSelection()):1!==event.key.length||event.metaKey||event.ctrlKey||(node.contentEditable=!1,__unstableIsSelectionMergeable()?__unstableDeleteSelection(event.keyCode===keycodes_build_module.yY):(event.preventDefault(),node.ownerDocument.defaultView.getSelection().removeAllRanges())))}function onCompositionStart(event){hasMultiSelection()&&(node.contentEditable=!1,__unstableIsSelectionMergeable()?__unstableDeleteSelection():(event.preventDefault(),node.ownerDocument.defaultView.getSelection().removeAllRanges()))}return node.addEventListener("beforeinput",onBeforeInput),node.addEventListener("keydown",onKeyDown),node.addEventListener("compositionstart",onCompositionStart),()=>{node.removeEventListener("beforeinput",onBeforeInput),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("compositionstart",onCompositionStart)}}),[])}function useWritingFlow(){const[before,ref,after]=function useTabNav(){const container=(0,react.useRef)(),focusCaptureBeforeRef=(0,react.useRef)(),focusCaptureAfterRef=(0,react.useRef)(),lastFocus=(0,react.useRef)(),{hasMultiSelection:hasMultiSelection,getSelectedBlockClientId:getSelectedBlockClientId,getBlockCount:getBlockCount}=(0,use_select.Z)(store),{setNavigationMode:setNavigationMode}=(0,use_dispatch.Z)(store),focusCaptureTabIndex=(0,use_select.Z)((select=>select(store).isNavigationMode()),[])?void 0:"0",noCapture=(0,react.useRef)();function onFocusCapture(event){if(noCapture.current)noCapture.current=null;else if(hasMultiSelection())container.current.focus();else if(getSelectedBlockClientId())lastFocus.current.focus();else{setNavigationMode(!0);const action=event.target.compareDocumentPosition(container.current)&event.target.DOCUMENT_POSITION_FOLLOWING?"findNext":"findPrevious";dom_build_module.T_.tabbable[action](event.target).focus()}}const before=(0,react.createElement)("div",{ref:focusCaptureBeforeRef,tabIndex:focusCaptureTabIndex,onFocus:onFocusCapture}),after=(0,react.createElement)("div",{ref:focusCaptureAfterRef,tabIndex:focusCaptureTabIndex,onFocus:onFocusCapture}),ref=(0,use_ref_effect.Z)((node=>{function onKeyDown(event){if(event.defaultPrevented)return;if(event.keyCode===keycodes_build_module.hY)return event.preventDefault(),void setNavigationMode(!0);if(event.keyCode!==keycodes_build_module.Mf)return;const isShift=event.shiftKey,direction=isShift?"findPrevious":"findNext";if(!hasMultiSelection()&&!getSelectedBlockClientId())return void(event.target===node&&setNavigationMode(!0));if(((0,is_form_element.Z)(event.target)||event.target.getAttribute("data-block")===getSelectedBlockClientId())&&(0,is_form_element.Z)(dom_build_module.T_.tabbable[direction](event.target)))return;const next=isShift?focusCaptureBeforeRef:focusCaptureAfterRef;noCapture.current=!0,next.current.focus({preventScroll:!0})}function onFocusOut(event){lastFocus.current=event.target;const{ownerDocument:ownerDocument}=node;event.relatedTarget||ownerDocument.activeElement!==ownerDocument.body||0!==getBlockCount()||node.focus()}function preventScrollOnTab(event){var _event$target;if(event.keyCode!==keycodes_build_module.Mf)return;if("region"===(null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.getAttribute("role")))return;if(container.current===event.target)return;const direction=event.shiftKey?"findPrevious":"findNext",target=dom_build_module.T_.tabbable[direction](event.target);target!==focusCaptureBeforeRef.current&&target!==focusCaptureAfterRef.current||(event.preventDefault(),target.focus({preventScroll:!0}))}const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;return defaultView.addEventListener("keydown",preventScrollOnTab),node.addEventListener("keydown",onKeyDown),node.addEventListener("focusout",onFocusOut),()=>{defaultView.removeEventListener("keydown",preventScrollOnTab),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("focusout",onFocusOut)}}),[]);return[before,(0,use_merge_refs.Z)([container,ref]),after]}(),hasMultiSelection=(0,use_select.Z)((select=>select(store).hasMultiSelection()),[]);return[before,(0,use_merge_refs.Z)([ref,useInput(),useDragSelection(),useSelectionObserver(),useClickSelection(),useMultiSelection(),useSelectAll(),useArrowNav(),(0,use_ref_effect.Z)((node=>{if(node.tabIndex=0,node.contentEditable=hasMultiSelection,hasMultiSelection)return node.classList.add("has-multi-selection"),node.setAttribute("aria-label",(0,i18n_build_module.__)("Multiple selected blocks")),()=>{node.classList.remove("has-multi-selection"),node.removeAttribute("aria-label")}}),[hasMultiSelection])]),after]}var writing_flow=(0,react.forwardRef)((function WritingFlow(_ref,forwardedRef){let{children:children,...props}=_ref;const[before,ref,after]=useWritingFlow();return(0,react.createElement)(react.Fragment,null,before,(0,react.createElement)("div",(0,esm_extends.Z)({},props,{ref:(0,use_merge_refs.Z)([ref,forwardedRef]),className:classnames_default()(props.className,"block-editor-writing-flow")}),children),after)}));function useParsedAssets(html){return(0,react.useMemo)((()=>{const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=html,Array.from(doc.body.children)}),[html])}var iframe=(0,react.forwardRef)((function Iframe(_ref3,ref){let{contentRef:contentRef,children:children,head:head,tabIndex:tabIndex=0,assets:assets,scale:scale=1,frameSize:frameSize=0,readonly:readonly,...props}=_ref3;const[,forceRender]=(0,react.useReducer)((()=>({}))),[iframeDocument,setIframeDocument]=(0,react.useState)(),[bodyClasses,setBodyClasses]=(0,react.useState)([]),styles=useParsedAssets(null==assets?void 0:assets.styles),scripts=useParsedAssets(null==assets?void 0:assets.scripts),clearerRef=useBlockSelectionClearer(),[before,writingFlowRef,after]=useWritingFlow(),[contentResizeListener,{height:contentHeight}]=(0,use_resize_observer.Z)(),setRef=(0,use_ref_effect.Z)((node=>{let iFrameDocument;function preventFileDropDefault(event){event.preventDefault()}function setDocumentIfReady(){const{contentDocument:contentDocument,ownerDocument:ownerDocument}=node,{readyState:readyState,documentElement:documentElement}=contentDocument;return iFrameDocument=contentDocument,("interactive"===readyState||"complete"===readyState)&&(function bubbleEvents(doc){const{defaultView:defaultView}=doc,{frameElement:frameElement}=defaultView;function bubbleEvent(event){const constructorName=Object.getPrototypeOf(event).constructor.name,Constructor=window[constructorName],init={};for(const key in event)init[key]=event[key];if(event instanceof defaultView.MouseEvent){const rect=frameElement.getBoundingClientRect();init.clientX+=rect.left,init.clientY+=rect.top}const newEvent=new Constructor(event.type,init);!frameElement.dispatchEvent(newEvent)&&event.preventDefault()}const eventTypes=["dragover"];for(const name of eventTypes)doc.addEventListener(name,bubbleEvent)}(contentDocument),setIframeDocument(contentDocument),clearerRef(documentElement),setBodyClasses(Array.from(ownerDocument.body.classList).filter((name=>name.startsWith("admin-color-")||name.startsWith("post-type-")||"wp-embed-responsive"===name))),contentDocument.dir=ownerDocument.dir,documentElement.removeChild(contentDocument.head),documentElement.removeChild(contentDocument.body),iFrameDocument.addEventListener("dragover",preventFileDropDefault,!1),iFrameDocument.addEventListener("drop",preventFileDropDefault,!1),!0)}return node.addEventListener("load",setDocumentIfReady),()=>{var _iFrameDocument,_iFrameDocument2;node.removeEventListener("load",setDocumentIfReady),null===(_iFrameDocument=iFrameDocument)||void 0===_iFrameDocument||_iFrameDocument.removeEventListener("dragover",preventFileDropDefault),null===(_iFrameDocument2=iFrameDocument)||void 0===_iFrameDocument2||_iFrameDocument2.removeEventListener("drop",preventFileDropDefault)}}),[]),headRef=(0,use_ref_effect.Z)((element=>{scripts.reduce(((promise,script)=>promise.then((()=>async function loadScript(head,_ref2){let{id:id,src:src}=_ref2;return new Promise(((resolve,reject)=>{const script=head.ownerDocument.createElement("script");script.id=id,src?(script.src=src,script.onload=()=>resolve(),script.onerror=()=>reject()):resolve(),head.appendChild(script)}))}(element,script)))),Promise.resolve()).finally((()=>{forceRender()}))}),[]),bodyRef=(0,use_merge_refs.Z)([contentRef,clearerRef,writingFlowRef]),styleCompatibilityRef=function useStylesCompatibility(){return(0,use_ref_effect.Z)((node=>{Array.from(document.styleSheets).forEach((styleSheet=>{try{styleSheet.cssRules}catch(e){return}const{ownerNode:ownerNode,cssRules:cssRules}=styleSheet;if(!cssRules)return;if("LINK"!==ownerNode.tagName)return;if("wp-reset-editor-styles-css"===ownerNode.id)return;const isMatch=function matchFromRules(_cssRules){return Array.from(_cssRules).find((_ref=>{let{selectorText:selectorText,conditionText:conditionText,cssRules:__cssRules}=_ref;return conditionText?matchFromRules(__cssRules):selectorText&&(selectorText.includes(".editor-styles-wrapper")||selectorText.includes(".wp-block"))}))}(cssRules);if(isMatch&&!node.ownerDocument.getElementById(ownerNode.id)){node.appendChild(ownerNode.cloneNode(!0));const inlineCssId=ownerNode.id.replace("-css","-inline-css"),inlineCssElement=document.getElementById(inlineCssId);inlineCssElement&&node.appendChild(inlineCssElement.cloneNode(!0))}}))}),[])}();return head=(0,react.createElement)(react.Fragment,null,(0,react.createElement)("style",null,"html{height:auto!important;}body{margin:0}"),styles.map((_ref4=>{let{tagName:tagName,href:href,id:id,rel:rel,media:media,textContent:textContent}=_ref4;const TagName=tagName.toLowerCase();return"style"===TagName?(0,react.createElement)(TagName,{id:id,key:id},textContent):(0,react.createElement)(TagName,{href:href,id:id,rel:rel,media:media,key:id})})),head),(0,react.createElement)(react.Fragment,null,tabIndex>=0&&before,(0,react.createElement)("iframe",(0,esm_extends.Z)({},props,{ref:(0,use_merge_refs.Z)([ref,setRef]),tabIndex:tabIndex,srcDoc:"<!doctype html>",title:(0,i18n_build_module.__)("Editor canvas")}),iframeDocument&&(0,react_dom.createPortal)((0,react.createElement)(react.Fragment,null,(0,react.createElement)("head",{ref:headRef},head,(0,react.createElement)("style",null,`html { transition: background 5s; ${frameSize?"background: #2f2f2f; transition: background 0s;":""} }`)),(0,react.createElement)("body",{ref:bodyRef,className:classnames_default()("block-editor-iframe__body","editor-styles-wrapper",...bodyClasses),style:{marginBottom:`-${contentHeight*(1-scale)-frameSize}px`,marginTop:frameSize,transform:`scale( ${scale} )`},inert:readonly?"true":void 0},contentResizeListener,(0,react.createElement)("div",{style:{display:"none"},ref:styleCompatibilityRef}),(0,react.createElement)(style_provider.Z,{document:iframeDocument},children))),iframeDocument.documentElement)),tabIndex>=0&&after)})),colord=__webpack_require__("./node_modules/colord/index.mjs"),names=__webpack_require__("./node_modules/colord/plugins/names.mjs"),a11y=__webpack_require__("./node_modules/colord/plugins/a11y.mjs"),traverse=__webpack_require__("./node_modules/traverse/index.js"),traverse_default=__webpack_require__.n(traverse);const commentre=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function parse(css,options){options=options||{};let lineno=1,column=1;function updatePosition(str){const lines=str.match(/\n/g);lines&&(lineno+=lines.length);const i=str.lastIndexOf("\n");column=~i?str.length-i:column+str.length}function position(){const start={line:lineno,column:column};return function(node){return node.position=new Position(start),whitespace(),node}}function Position(start){this.start=start,this.end={line:lineno,column:column},this.source=options.source}Position.prototype.content=css;const errorsList=[];function error(msg){const err=new Error(options.source+":"+lineno+":"+column+": "+msg);if(err.reason=msg,err.filename=options.source,err.line=lineno,err.column=column,err.source=css,!options.silent)throw err;errorsList.push(err)}function open(){return match(/^{\s*/)}function close(){return match(/^}/)}function rules(){let node;const accumulator=[];for(whitespace(),comments(accumulator);css.length&&"}"!==css.charAt(0)&&(node=atrule()||rule());)!1!==node&&(accumulator.push(node),comments(accumulator));return accumulator}function match(re){const m=re.exec(css);if(!m)return;const str=m[0];return updatePosition(str),css=css.slice(str.length),m}function whitespace(){match(/^\s*/)}function comments(accumulator){let c;for(accumulator=accumulator||[];c=comment();)!1!==c&&accumulator.push(c);return accumulator}function comment(){const pos=position();if("/"!==css.charAt(0)||"*"!==css.charAt(1))return;let i=2;for(;""!==css.charAt(i)&&("*"!==css.charAt(i)||"/"!==css.charAt(i+1));)++i;if(i+=2,""===css.charAt(i-1))return error("End of comment missing");const str=css.slice(2,i-2);return column+=2,updatePosition(str),css=css.slice(i),column+=2,pos({type:"comment",comment:str})}function selector(){const m=match(/^([^{]+)/);if(m)return trim(m[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(matched){return matched.replace(/,/g,"")})).split(/\s*(?![^(]*\)),\s*/).map((function(s){return s.replace(/\u200C/g,",")}))}function declaration(){const pos=position();let prop=match(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(!prop)return;if(prop=trim(prop[0]),!match(/^:\s*/))return error("property missing ':'");const val=match(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),ret=pos({type:"declaration",property:prop.replace(commentre,""),value:val?trim(val[0]).replace(commentre,""):""});return match(/^[;\s]*/),ret}function declarations(){const decls=[];if(!open())return error("missing '{'");let decl;for(comments(decls);decl=declaration();)!1!==decl&&(decls.push(decl),comments(decls));return close()?decls:error("missing '}'")}function keyframe(){let m;const vals=[],pos=position();for(;m=match(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)vals.push(m[1]),match(/^,\s*/);if(vals.length)return pos({type:"keyframe",values:vals,declarations:declarations()})}const atimport=_compileAtrule("import"),atcharset=_compileAtrule("charset"),atnamespace=_compileAtrule("namespace");function _compileAtrule(name){const re=new RegExp("^@"+name+"\\s*([^;]+);");return function(){const pos=position(),m=match(re);if(!m)return;const ret={type:name};return ret[name]=m[1].trim(),pos(ret)}}function atrule(){if("@"===css[0])return function atkeyframes(){const pos=position();let m=match(/^@([-\w]+)?keyframes\s*/);if(!m)return;const vendor=m[1];if(m=match(/^([-\w]+)\s*/),!m)return error("@keyframes missing name");const name=m[1];if(!open())return error("@keyframes missing '{'");let frame,frames=comments();for(;frame=keyframe();)frames.push(frame),frames=frames.concat(comments());return close()?pos({type:"keyframes",name:name,vendor:vendor,keyframes:frames}):error("@keyframes missing '}'")}()||function atmedia(){const pos=position(),m=match(/^@media *([^{]+)/);if(!m)return;const media=trim(m[1]);if(!open())return error("@media missing '{'");const style=comments().concat(rules());return close()?pos({type:"media",media:media,rules:style}):error("@media missing '}'")}()||function atcustommedia(){const pos=position(),m=match(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(m)return pos({type:"custom-media",name:trim(m[1]),media:trim(m[2])})}()||function atsupports(){const pos=position(),m=match(/^@supports *([^{]+)/);if(!m)return;const supports=trim(m[1]);if(!open())return error("@supports missing '{'");const style=comments().concat(rules());return close()?pos({type:"supports",supports:supports,rules:style}):error("@supports missing '}'")}()||atimport()||atcharset()||atnamespace()||function atdocument(){const pos=position(),m=match(/^@([-\w]+)?document *([^{]+)/);if(!m)return;const vendor=trim(m[1]),doc=trim(m[2]);if(!open())return error("@document missing '{'");const style=comments().concat(rules());return close()?pos({type:"document",document:doc,vendor:vendor,rules:style}):error("@document missing '}'")}()||function atpage(){const pos=position();if(!match(/^@page */))return;const sel=selector()||[];if(!open())return error("@page missing '{'");let decl,decls=comments();for(;decl=declaration();)decls.push(decl),decls=decls.concat(comments());return close()?pos({type:"page",selectors:sel,declarations:decls}):error("@page missing '}'")}()||function athost(){const pos=position();if(!match(/^@host\s*/))return;if(!open())return error("@host missing '{'");const style=comments().concat(rules());return close()?pos({type:"host",rules:style}):error("@host missing '}'")}()||function atfontface(){const pos=position();if(!match(/^@font-face\s*/))return;if(!open())return error("@font-face missing '{'");let decl,decls=comments();for(;decl=declaration();)decls.push(decl),decls=decls.concat(comments());return close()?pos({type:"font-face",declarations:decls}):error("@font-face missing '}'")}()}function rule(){const pos=position(),sel=selector();return sel?(comments(),pos({type:"rule",selectors:sel,declarations:declarations()})):error("selector missing")}return addParent(function stylesheet(){const rulesList=rules();return{type:"stylesheet",stylesheet:{source:options.source,rules:rulesList,parsingErrors:errorsList}}}())}function trim(str){return str?str.replace(/^\s+|\s+$/g,""):""}function addParent(obj,parent){const isNode=obj&&"string"==typeof obj.type,childParent=isNode?obj:parent;for(const k in obj){const value=obj[k];Array.isArray(value)?value.forEach((function(v){addParent(v,childParent)})):value&&"object"==typeof value&&addParent(value,childParent)}return isNode&&Object.defineProperty(obj,"parent",{configurable:!0,writable:!0,enumerable:!1,value:parent||null}),obj}var inherits_browser=__webpack_require__("./node_modules/inherits/inherits_browser.js"),inherits_browser_default=__webpack_require__.n(inherits_browser),compiler=Compiler;function Compiler(opts){this.options=opts||{}}Compiler.prototype.emit=function(str){return str},Compiler.prototype.visit=function(node){return this[node.type](node)},Compiler.prototype.mapVisit=function(nodes,delim){let buf="";delim=delim||"";for(let i=0,length=nodes.length;i<length;i++)buf+=this.visit(nodes[i]),delim&&i<length-1&&(buf+=this.emit(delim));return buf};var compress=compress_Compiler;function compress_Compiler(options){compiler.call(this,options)}inherits_browser_default()(compress_Compiler,compiler),compress_Compiler.prototype.compile=function(node){return node.stylesheet.rules.map(this.visit,this).join("")},compress_Compiler.prototype.comment=function(node){return this.emit("",node.position)},compress_Compiler.prototype.import=function(node){return this.emit("@import "+node.import+";",node.position)},compress_Compiler.prototype.media=function(node){return this.emit("@media "+node.media,node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype.document=function(node){const doc="@"+(node.vendor||"")+"document "+node.document;return this.emit(doc,node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype.charset=function(node){return this.emit("@charset "+node.charset+";",node.position)},compress_Compiler.prototype.namespace=function(node){return this.emit("@namespace "+node.namespace+";",node.position)},compress_Compiler.prototype.supports=function(node){return this.emit("@supports "+node.supports,node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype.keyframes=function(node){return this.emit("@"+(node.vendor||"")+"keyframes "+node.name,node.position)+this.emit("{")+this.mapVisit(node.keyframes)+this.emit("}")},compress_Compiler.prototype.keyframe=function(node){const decls=node.declarations;return this.emit(node.values.join(","),node.position)+this.emit("{")+this.mapVisit(decls)+this.emit("}")},compress_Compiler.prototype.page=function(node){const sel=node.selectors.length?node.selectors.join(", "):"";return this.emit("@page "+sel,node.position)+this.emit("{")+this.mapVisit(node.declarations)+this.emit("}")},compress_Compiler.prototype["font-face"]=function(node){return this.emit("@font-face",node.position)+this.emit("{")+this.mapVisit(node.declarations)+this.emit("}")},compress_Compiler.prototype.host=function(node){return this.emit("@host",node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype["custom-media"]=function(node){return this.emit("@custom-media "+node.name+" "+node.media+";",node.position)},compress_Compiler.prototype.rule=function(node){const decls=node.declarations;return decls.length?this.emit(node.selectors.join(","),node.position)+this.emit("{")+this.mapVisit(decls)+this.emit("}"):""},compress_Compiler.prototype.declaration=function(node){return this.emit(node.property+":"+node.value,node.position)+this.emit(";")};var stringify_identity=identity_Compiler;function identity_Compiler(options){options=options||{},compiler.call(this,options),this.indentation=options.indent}inherits_browser_default()(identity_Compiler,compiler),identity_Compiler.prototype.compile=function(node){return this.stylesheet(node)},identity_Compiler.prototype.stylesheet=function(node){return this.mapVisit(node.stylesheet.rules,"\n\n")},identity_Compiler.prototype.comment=function(node){return this.emit(this.indent()+"/*"+node.comment+"*/",node.position)},identity_Compiler.prototype.import=function(node){return this.emit("@import "+node.import+";",node.position)},identity_Compiler.prototype.media=function(node){return this.emit("@media "+node.media,node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype.document=function(node){const doc="@"+(node.vendor||"")+"document "+node.document;return this.emit(doc,node.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype.charset=function(node){return this.emit("@charset "+node.charset+";",node.position)},identity_Compiler.prototype.namespace=function(node){return this.emit("@namespace "+node.namespace+";",node.position)},identity_Compiler.prototype.supports=function(node){return this.emit("@supports "+node.supports,node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype.keyframes=function(node){return this.emit("@"+(node.vendor||"")+"keyframes "+node.name,node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.keyframes,"\n")+this.emit(this.indent(-1)+"}")},identity_Compiler.prototype.keyframe=function(node){const decls=node.declarations;return this.emit(this.indent())+this.emit(node.values.join(", "),node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(decls,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")},identity_Compiler.prototype.page=function(node){const sel=node.selectors.length?node.selectors.join(", ")+" ":"";return this.emit("@page "+sel,node.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(node.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},identity_Compiler.prototype["font-face"]=function(node){return this.emit("@font-face ",node.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(node.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},identity_Compiler.prototype.host=function(node){return this.emit("@host",node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype["custom-media"]=function(node){return this.emit("@custom-media "+node.name+" "+node.media+";",node.position)},identity_Compiler.prototype.rule=function(node){const indent=this.indent(),decls=node.declarations;return decls.length?this.emit(node.selectors.map((function(s){return indent+s})).join(",\n"),node.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(decls,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""},identity_Compiler.prototype.declaration=function(node){return this.emit(this.indent())+this.emit(node.property+": "+node.value,node.position)+this.emit(";")},identity_Compiler.prototype.indent=function(level){return this.level=this.level||1,null!==level?(this.level+=level,""):Array(this.level).join(this.indentation||"  ")};var transform_styles_traverse=function traverseCSS(css,callback){try{const parsed=parse(css),updated=traverse_default().map(parsed,(function(node){if(!node)return node;const updatedNode=callback(node);return this.update(updatedNode)}));return function stringify(node,options){return((options=options||{}).compress?new compress(options):new stringify_identity(options)).compile(node)}(updated)}catch(err){return console.warn("Error while traversing the CSS: "+err),null}};function isValidURL(meta){return 0!==meta.value.indexOf("data:")&&0!==meta.value.indexOf("#")&&(!function isAbsolutePath(filePath){return/^\/(?!\/)/.test(filePath)}(meta.value)&&!function isRemotePath(filePath){return/^(?:https?:)?\/\//.test(filePath)}(meta.value))}function getResourcePath(str,baseURL){return new URL(str,baseURL).toString()}var url_rewrite=rootURL=>node=>{if("declaration"===node.type){const updatedURLs=function getURLs(value){const reg=/url\((\s*)(['"]?)(.+?)\2(\s*)\)/g;let match;const URLs=[];for(;null!==(match=reg.exec(value));){const meta={source:match[0],before:match[1],quote:match[2],value:match[3],after:match[4]};isValidURL(meta)&&URLs.push(meta)}return URLs}(node.value).map(function processURL(baseURL){return meta=>({...meta,newUrl:"url("+meta.before+meta.quote+getResourcePath(meta.value,baseURL)+meta.quote+meta.after+")"})}(rootURL));return{...node,value:(raw=node.value,URLs=updatedURLs,URLs.forEach((item=>{raw=raw.replace(item.source,item.newUrl)})),raw)}}var raw,URLs;return node};const IS_ROOT_TAG=/^(body|html|:root).*$/;var transforms_wrap=function(namespace){let ignore=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return node=>{const updateSelector=selector=>ignore.includes(selector.trim())?selector:selector.match(IS_ROOT_TAG)?selector.replace(/^(body|html|:root)/,namespace):namespace+" "+selector;return"rule"===node.type?{...node,selectors:node.selectors.map(updateSelector)}:node}};var transform_styles=function(styles){let wrapperClassName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,lodash.map)(styles,(_ref=>{let{css:css,baseURL:baseURL}=_ref;const transforms=[];return wrapperClassName&&transforms.push(transforms_wrap(wrapperClassName)),baseURL&&transforms.push(url_rewrite(baseURL)),transforms.length?transform_styles_traverse(css,(0,compose.Z)(transforms)):css}))};function useDarkThemeBodyClassName(styles){return(0,react.useCallback)((node=>{if(!node)return;const{ownerDocument:ownerDocument}=node,{defaultView:defaultView,body:body}=ownerDocument,canvas=ownerDocument.querySelector(".editor-styles-wrapper");let backgroundColor;if(canvas)backgroundColor=defaultView.getComputedStyle(canvas,null).getPropertyValue("background-color");else{const tempCanvas=ownerDocument.createElement("div");tempCanvas.classList.add("editor-styles-wrapper"),body.appendChild(tempCanvas),backgroundColor=defaultView.getComputedStyle(tempCanvas,null).getPropertyValue("background-color"),body.removeChild(tempCanvas)}const colordBackgroundColor=(0,colord.Vi)(backgroundColor);colordBackgroundColor.luminance()>.5||0===colordBackgroundColor.alpha()?body.classList.remove("is-dark-theme"):body.classList.add("is-dark-theme")}),[styles])}function EditorStyles(_ref){let{styles:styles}=_ref;const transformedStyles=(0,react.useMemo)((()=>transform_styles(styles,".editor-styles-wrapper")),[styles]);return(0,react.createElement)(react.Fragment,null,(0,react.createElement)("style",{ref:useDarkThemeBodyClassName(styles)}),transformedStyles.map(((css,index)=>(0,react.createElement)("style",{key:index},css))))}function DuotoneStylesheet(_ref){let{selector:selector,id:id}=_ref;const css=`\n${selector} {\n\tfilter: url( #${id} );\n}\n`;return(0,react.createElement)("style",null,css)}function DuotoneUnsetStylesheet(_ref2){let{selector:selector}=_ref2;const css=`\n${selector} {\n\tfilter: none;\n}\n`;return(0,react.createElement)("style",null,css)}function DuotoneFilter(_ref3){let{id:id,colors:colors}=_ref3;const values=function getValuesFromColors(){const values={r:[],g:[],b:[],a:[]};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((color=>{const rgbColor=(0,colord.Vi)(color).toRgb();values.r.push(rgbColor.r/255),values.g.push(rgbColor.g/255),values.b.push(rgbColor.b/255),values.a.push(rgbColor.a)})),values}(colors);return(0,react.createElement)(svg.Wj,{xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 0 0",width:"0",height:"0",focusable:"false",role:"none",style:{visibility:"hidden",position:"absolute",left:"-9999px",overflow:"hidden"}},(0,react.createElement)("defs",null,(0,react.createElement)("filter",{id:id},(0,react.createElement)("feColorMatrix",{colorInterpolationFilters:"sRGB",type:"matrix",values:" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "}),(0,react.createElement)("feComponentTransfer",{colorInterpolationFilters:"sRGB"},(0,react.createElement)("feFuncR",{type:"table",tableValues:values.r.join(" ")}),(0,react.createElement)("feFuncG",{type:"table",tableValues:values.g.join(" ")}),(0,react.createElement)("feFuncB",{type:"table",tableValues:values.b.join(" ")}),(0,react.createElement)("feFuncA",{type:"table",tableValues:values.a.join(" ")})),(0,react.createElement)("feComposite",{in2:"SourceGraphic",operator:"in"}))))}function PresetDuotoneFilter(_ref4){let{preset:preset}=_ref4;return(0,react.createElement)(DuotoneFilter,{id:`wp-duotone-${preset.slug}`,colors:preset.colors})}let MemoizedBlockList;(0,colord.l7)([names.Z,a11y.Z]);function ScaledBlockPreview(_ref){let{viewportWidth:viewportWidth,containerWidth:containerWidth,__experimentalPadding:__experimentalPadding,__experimentalMinHeight:__experimentalMinHeight,__experimentalStyles:__experimentalStyles}=_ref;viewportWidth||(viewportWidth=containerWidth);const[contentResizeListener,{height:contentHeight}]=(0,use_resize_observer.Z)(),{styles:styles,assets:assets,duotone:duotone}=(0,use_select.Z)((select=>{var _settings$__experimen,_settings$__experimen2;const settings=select(store).getSettings();return{styles:settings.styles,assets:settings.__unstableResolvedAssets,duotone:null===(_settings$__experimen=settings.__experimentalFeatures)||void 0===_settings$__experimen||null===(_settings$__experimen2=_settings$__experimen.color)||void 0===_settings$__experimen2?void 0:_settings$__experimen2.duotone}}),[]),editorStyles=(0,react.useMemo)((()=>styles?[...styles,...__experimentalStyles,{css:"body{height:auto;overflow:hidden;}",__unstableType:"presets"}]:styles),[styles,__experimentalStyles]),svgFilters=(0,react.useMemo)((()=>{var _duotone$default,_duotone$theme;return[...null!==(_duotone$default=null==duotone?void 0:duotone.default)&&void 0!==_duotone$default?_duotone$default:[],...null!==(_duotone$theme=null==duotone?void 0:duotone.theme)&&void 0!==_duotone$theme?_duotone$theme:[]]}),[duotone]);MemoizedBlockList=MemoizedBlockList||(0,pure.Z)(BlockList);const scale=containerWidth/viewportWidth;return(0,react.createElement)(disabled.Z,{className:"block-editor-block-preview__content",style:{transform:`scale(${scale})`,height:contentHeight*scale,maxHeight:contentHeight>2e3?2e3*scale:void 0,minHeight:__experimentalMinHeight}},(0,react.createElement)(iframe,{head:(0,react.createElement)(EditorStyles,{styles:editorStyles}),assets:assets,contentRef:(0,use_ref_effect.Z)((bodyElement=>{const{ownerDocument:{documentElement:documentElement}}=bodyElement;documentElement.classList.add("block-editor-block-preview__content-iframe"),documentElement.style.position="absolute",documentElement.style.width="100%",bodyElement.style.padding=__experimentalPadding+"px",bodyElement.style.boxSizing="border-box",bodyElement.style.position="absolute",bodyElement.style.width="100%"}),[]),"aria-hidden":!0,tabIndex:-1,style:{position:"absolute",width:viewportWidth,height:contentHeight,pointerEvents:"none",maxHeight:2e3,minHeight:0!==scale&&scale<1&&__experimentalMinHeight?__experimentalMinHeight/scale:__experimentalMinHeight}},contentResizeListener,svgFilters.map((preset=>(0,react.createElement)(PresetDuotoneFilter,{preset:preset,key:preset.slug}))),(0,react.createElement)(MemoizedBlockList,{renderAppender:!1})))}function AutoBlockPreview(props){const[containerResizeListener,{width:containerWidth}]=(0,use_resize_observer.Z)();return(0,react.createElement)(react.Fragment,null,(0,react.createElement)("div",{style:{position:"relative",width:"100%",height:0}},containerResizeListener),(0,react.createElement)("div",{className:"block-editor-block-preview__container"},!!containerWidth&&(0,react.createElement)(ScaledBlockPreview,(0,esm_extends.Z)({},props,{containerWidth:containerWidth}))))}var block_preview=(0,react.memo)((function BlockPreview(_ref){let{blocks:blocks,__experimentalPadding:__experimentalPadding=0,viewportWidth:viewportWidth=1200,__experimentalMinHeight:__experimentalMinHeight,__experimentalStyles:__experimentalStyles=[]}=_ref;const originalSettings=(0,use_select.Z)((select=>select(store).getSettings()),[]),settings=(0,react.useMemo)((()=>({...originalSettings,__unstableIsPreviewMode:!0})),[originalSettings]),renderedBlocks=(0,react.useMemo)((()=>Array.isArray(blocks)?blocks:[blocks]),[blocks]);return blocks&&0!==blocks.length?(0,react.createElement)(provider,{value:renderedBlocks,settings:settings},(0,react.createElement)(AutoBlockPreview,{viewportWidth:viewportWidth,__experimentalPadding:__experimentalPadding,__experimentalMinHeight:__experimentalMinHeight,__experimentalStyles:__experimentalStyles})):null}));function useBlockPreview(_ref2){let{blocks:blocks,props:props={},__experimentalLayout:__experimentalLayout}=_ref2;const originalSettings=(0,use_select.Z)((select=>select(store).getSettings()),[]),settings=(0,react.useMemo)((()=>({...originalSettings,__unstableIsPreviewMode:!0})),[originalSettings]),disabledRef=(0,use_disabled.Z)(),ref=(0,use_merge_refs.Z)([props.ref,disabledRef]),renderedBlocks=(0,react.useMemo)((()=>Array.isArray(blocks)?blocks:[blocks]),[blocks]),children=(0,react.createElement)(provider,{value:renderedBlocks,settings:settings},(0,react.createElement)(BlockListItems,{renderAppender:!1,__experimentalLayout:__experimentalLayout}));return{...props,ref:ref,className:classnames_default()(props.className,"block-editor-block-preview__live-content","components-disabled"),children:null!=blocks&&blocks.length?children:null}}var preview_panel=function InserterPreviewPanel(_ref){var _example$viewportWidt;let{item:item}=_ref;const{name:name,title:title,icon:icon,description:description,initialAttributes:initialAttributes,example:example}=item,isReusable=(0,build_module.vr)(item);return(0,react.createElement)("div",{className:"block-editor-inserter__preview-container"},(0,react.createElement)("div",{className:"block-editor-inserter__preview"},isReusable||example?(0,react.createElement)("div",{className:"block-editor-inserter__preview-content"},(0,react.createElement)(block_preview,{__experimentalPadding:16,viewportWidth:null!==(_example$viewportWidt=null==example?void 0:example.viewportWidth)&&void 0!==_example$viewportWidt?_example$viewportWidt:500,blocks:example?(0,build_module.Wf)(name,{attributes:{...example.attributes,...initialAttributes},innerBlocks:example.innerBlocks}):(0,build_module.j4)(name,initialAttributes)})):(0,react.createElement)("div",{className:"block-editor-inserter__preview-content-missing"},(0,i18n_build_module.__)("No Preview Available."))),!isReusable&&(0,react.createElement)(block_card,{title:title,icon:icon,description:description}))},use_async_list=__webpack_require__("./packages/compose/build-module/hooks/use-async-list/index.js"),truncate_component=__webpack_require__("./packages/components/build-module/truncate/component.js"),build_module_platform=__webpack_require__("./packages/keycodes/build-module/platform.js"),CompositeItem=__webpack_require__("./node_modules/reakit/es/Composite/CompositeItem.js");var inserter_listbox_context=(0,react.createContext)();var inserter_listbox_item=(0,react.forwardRef)((function InserterListboxItem(_ref,ref){let{isFirst:isFirst,as:Component,children:children,...props}=_ref;const state=(0,react.useContext)(inserter_listbox_context);return(0,react.createElement)(CompositeItem.A,(0,esm_extends.Z)({ref:ref,state:state,role:"option",focusable:!0},props),(htmlProps=>{const propsWithTabIndex={...htmlProps,tabIndex:isFirst?0:htmlProps.tabIndex};return Component?(0,react.createElement)(Component,propsWithTabIndex,children):"function"==typeof children?children(propsWithTabIndex):(0,react.createElement)(build_module_button.Z,propsWithTabIndex,children)}))})),draggable=__webpack_require__("./packages/components/build-module/draggable/index.js"),drag_handle=__webpack_require__("./packages/icons/build-module/library/drag-handle.js");function BlockDraggableChip(_ref){let{count:count,icon:icon,isPattern:isPattern}=_ref;const patternLabel=isPattern&&(0,i18n_build_module.__)("Pattern");return(0,react.createElement)("div",{className:"block-editor-block-draggable-chip-wrapper"},(0,react.createElement)("div",{className:"block-editor-block-draggable-chip","data-testid":"block-draggable-chip"},(0,react.createElement)(component.Z,{justify:"center",className:"block-editor-block-draggable-chip__content"},(0,react.createElement)(flex_item_component.Z,null,icon?(0,react.createElement)(block_icon,{icon:icon}):patternLabel||(0,i18n_build_module.gB)((0,i18n_build_module._n)("%d block","%d blocks",count),count)),(0,react.createElement)(flex_item_component.Z,null,(0,react.createElement)(block_icon,{icon:drag_handle.Z})))))}var inserter_draggable_blocks=_ref=>{let{isEnabled:isEnabled,blocks:blocks,icon:icon,children:children,isPattern:isPattern}=_ref;const transferData={type:"inserter",blocks:blocks};return(0,react.createElement)(draggable.Z,{__experimentalTransferDataType:"wp-blocks",transferData:transferData,__experimentalDragComponent:(0,react.createElement)(BlockDraggableChip,{count:blocks.length,icon:icon,isPattern:isPattern})},(_ref2=>{let{onDraggableStart:onDraggableStart,onDraggableEnd:onDraggableEnd}=_ref2;return children({draggable:isEnabled,onDragStart:isEnabled?onDraggableStart:void 0,onDragEnd:isEnabled?onDraggableEnd:void 0})}))};var inserter_list_item=(0,react.memo)((function InserterListItem(_ref){let{className:className,isFirst:isFirst,item:item,onSelect:onSelect,onHover:onHover,isDraggable:isDraggable,...props}=_ref;const isDragging=(0,react.useRef)(!1),itemIconStyle=item.icon?{backgroundColor:item.icon.background,color:item.icon.foreground}:{},blocks=(0,react.useMemo)((()=>[(0,build_module.j4)(item.name,item.initialAttributes,(0,build_module.ne)(item.innerBlocks))]),[item.name,item.initialAttributes,item.initialAttributes]),isSynced=(0,build_module.vr)(item)||(0,build_module.zQ)(item);return(0,react.createElement)(inserter_draggable_blocks,{isEnabled:isDraggable&&!item.disabled,blocks:blocks,icon:item.icon},(_ref2=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref2;return(0,react.createElement)("div",{className:classnames_default()("block-editor-block-types-list__list-item",{"is-synced":isSynced}),draggable:draggable,onDragStart:event=>{isDragging.current=!0,onDragStart&&(onHover(null),onDragStart(event))},onDragEnd:event=>{isDragging.current=!1,onDragEnd&&onDragEnd(event)}},(0,react.createElement)(inserter_listbox_item,(0,esm_extends.Z)({isFirst:isFirst,className:classnames_default()("block-editor-block-types-list__item",className),disabled:item.isDisabled,onClick:event=>{event.preventDefault(),onSelect(item,(0,build_module_platform.R)()?event.metaKey:event.ctrlKey),onHover(null)},onKeyDown:event=>{const{keyCode:keyCode}=event;keyCode===keycodes_build_module.K5&&(event.preventDefault(),onSelect(item,(0,build_module_platform.R)()?event.metaKey:event.ctrlKey),onHover(null))},onFocus:()=>{isDragging.current||onHover(item)},onMouseEnter:()=>{isDragging.current||onHover(item)},onMouseLeave:()=>onHover(null),onBlur:()=>onHover(null)},props),(0,react.createElement)("span",{className:"block-editor-block-types-list__item-icon",style:itemIconStyle},(0,react.createElement)(block_icon,{icon:item.icon,showColors:!0})),(0,react.createElement)("span",{className:"block-editor-block-types-list__item-title"},(0,react.createElement)(truncate_component.Z,{numberOfLines:3},item.title))))}))}));var group=(0,react.forwardRef)((function InserterListboxGroup(props,ref){const[shouldSpeak,setShouldSpeak]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{shouldSpeak&&(0,a11y_build_module.D)((0,i18n_build_module.__)("Use left and right arrow keys to move through blocks"))}),[shouldSpeak]),(0,react.createElement)("div",(0,esm_extends.Z)({ref:ref,role:"listbox","aria-orientation":"horizontal",onFocus:()=>{setShouldSpeak(!0)},onBlur:event=>{!event.currentTarget.contains(event.relatedTarget)&&setShouldSpeak(!1)}},props))})),CompositeGroup=__webpack_require__("./node_modules/reakit/es/Composite/CompositeGroup.js");var inserter_listbox_row=(0,react.forwardRef)((function InserterListboxRow(props,ref){const state=(0,react.useContext)(inserter_listbox_context);return(0,react.createElement)(CompositeGroup.E,(0,esm_extends.Z)({state:state,role:"presentation",ref:ref},props))}));var block_types_list=function BlockTypesList(_ref){let{items:items=[],onSelect:onSelect,onHover:onHover=(()=>{}),children:children,label:label,isDraggable:isDraggable=!0}=_ref;return(0,react.createElement)(group,{className:"block-editor-block-types-list","aria-label":label},function chunk(array,size){const chunks=[];for(let i=0,j=array.length;i<j;i+=size)chunks.push(array.slice(i,i+size));return chunks}(items,3).map(((row,i)=>(0,react.createElement)(inserter_listbox_row,{key:i},row.map(((item,j)=>(0,react.createElement)(inserter_list_item,{key:item.id,item:item,className:(0,build_module.hq)(item.id),onSelect:onSelect,onHover:onHover,isDraggable:isDraggable&&!item.isDisabled,isFirst:0===i&&0===j})))))),children)};var panel=function InserterPanel(_ref){let{title:title,icon:icon,children:children}=_ref;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)("div",{className:"block-editor-inserter__panel-header"},(0,react.createElement)("h2",{className:"block-editor-inserter__panel-title"},title),(0,react.createElement)(components_build_module_icon.Z,{icon:icon})),(0,react.createElement)("div",{className:"block-editor-inserter__panel-content"},children))};var use_block_types_state=(rootClientId,onInsert)=>{const{categories:categories,collections:collections,items:items}=(0,use_select.Z)((select=>{const{getInserterItems:getInserterItems}=select(store),{getCategories:getCategories,getCollections:getCollections}=select(build_module.h);return{categories:getCategories(),collections:getCollections(),items:getInserterItems(rootClientId)}}),[rootClientId]),onSelectItem=(0,react.useCallback)(((_ref,shouldFocusBlock)=>{let{name:name,initialAttributes:initialAttributes,innerBlocks:innerBlocks}=_ref;const insertedBlock=(0,build_module.j4)(name,initialAttributes,(0,build_module.ne)(innerBlocks));onInsert(insertedBlock,void 0,shouldFocusBlock)}),[onInsert]);return[items,categories,collections,onSelectItem]},CompositeState=__webpack_require__("./node_modules/reakit/es/Composite/CompositeState.js");var inserter_listbox=function InserterListbox(_ref){let{children:children}=_ref;const compositeState=(0,CompositeState.u)({shift:!0,wrap:"horizontal"});return(0,react.createElement)(inserter_listbox_context.Provider,{value:compositeState},children)};const block_types_tab_EMPTY_ARRAY=[];var block_types_tab=function BlockTypesTab(_ref){let{rootClientId:rootClientId,onInsert:onInsert,onHover:onHover,showMostUsedBlocks:showMostUsedBlocks}=_ref;const[items,categories,collections,onSelectItem]=use_block_types_state(rootClientId,onInsert),suggestedItems=(0,react.useMemo)((()=>orderBy(items,"frecency","desc").slice(0,6)),[items]),uncategorizedItems=(0,react.useMemo)((()=>items.filter((item=>!item.category))),[items]),itemsPerCategory=(0,react.useMemo)((()=>(0,pipe.Z)((itemList=>itemList.filter((item=>item.category&&"reusable"!==item.category))),(itemList=>(0,lodash.groupBy)(itemList,"category")))(items)),[items]),itemsPerCollection=(0,react.useMemo)((()=>{const result={...collections};return Object.keys(collections).forEach((namespace=>{result[namespace]=items.filter((item=>(item=>item.name.split("/")[0])(item)===namespace)),0===result[namespace].length&&delete result[namespace]})),result}),[items,collections]);(0,react.useEffect)((()=>()=>onHover(null)),[]);const currentlyRenderedCategories=(0,use_async_list.Z)(categories),didRenderAllCategories=categories.length===currentlyRenderedCategories.length,collectionEntries=(0,react.useMemo)((()=>Object.entries(collections)),[collections]),currentlyRenderedCollections=(0,use_async_list.Z)(didRenderAllCategories?collectionEntries:block_types_tab_EMPTY_ARRAY);return(0,react.createElement)(inserter_listbox,null,(0,react.createElement)("div",null,showMostUsedBlocks&&!!suggestedItems.length&&(0,react.createElement)(panel,{title:(0,i18n_build_module._x)("Most used","blocks")},(0,react.createElement)(block_types_list,{items:suggestedItems,onSelect:onSelectItem,onHover:onHover,label:(0,i18n_build_module._x)("Most used","blocks")})),(0,lodash.map)(currentlyRenderedCategories,(category=>{const categoryItems=itemsPerCategory[category.slug];return categoryItems&&categoryItems.length?(0,react.createElement)(panel,{key:category.slug,title:category.title,icon:category.icon},(0,react.createElement)(block_types_list,{items:categoryItems,onSelect:onSelectItem,onHover:onHover,label:category.title})):null})),didRenderAllCategories&&uncategorizedItems.length>0&&(0,react.createElement)(panel,{className:"block-editor-inserter__uncategorized-blocks-panel",title:(0,i18n_build_module.__)("Uncategorized")},(0,react.createElement)(block_types_list,{items:uncategorizedItems,onSelect:onSelectItem,onHover:onHover,label:(0,i18n_build_module.__)("Uncategorized")})),(0,lodash.map)(currentlyRenderedCollections,(_ref2=>{let[namespace,collection]=_ref2;const collectionItems=itemsPerCollection[namespace];return collectionItems&&collectionItems.length?(0,react.createElement)(panel,{key:namespace,title:collection.title,icon:collection.icon},(0,react.createElement)(block_types_list,{items:collectionItems,onSelect:onSelectItem,onHover:onHover,label:collection.title})):null}))))},item_group_component=__webpack_require__("./packages/components/build-module/item-group/item-group/component.js"),item_component=__webpack_require__("./packages/components/build-module/item-group/item/component.js"),flex_block_component=__webpack_require__("./packages/components/build-module/flex/flex-block/component.js"),notices_build_module=__webpack_require__("./packages/notices/build-module/index.js");var use_patterns_state=(onInsert,rootClientId)=>{const{patternCategories:patternCategories,patterns:patterns}=(0,use_select.Z)((select=>{const{__experimentalGetAllowedPatterns:__experimentalGetAllowedPatterns,getSettings:getSettings}=select(store);return{patterns:__experimentalGetAllowedPatterns(rootClientId),patternCategories:getSettings().__experimentalBlockPatternCategories}}),[rootClientId]),{createSuccessNotice:createSuccessNotice}=(0,use_dispatch.Z)(notices_build_module.h),onClickPattern=(0,react.useCallback)(((pattern,blocks)=>{onInsert((0,lodash.map)(blocks,(block=>(0,build_module.Wm)(block))),pattern.name),createSuccessNotice((0,i18n_build_module.gB)((0,i18n_build_module.__)('Block pattern "%s" inserted.'),pattern.title),{type:"snackbar"})}),[]);return[patterns,patternCategories,onClickPattern]},Composite=__webpack_require__("./node_modules/reakit/es/Composite/Composite.js");const WithToolTip=_ref=>{let{showTooltip:showTooltip,title:title,children:children}=_ref;return showTooltip?(0,react.createElement)(tooltip.Z,{text:title},children):(0,react.createElement)(react.Fragment,null,children)};function BlockPattern(_ref2){let{isDraggable:isDraggable,pattern:pattern,onClick:onClick,composite:composite,showTooltip:showTooltip}=_ref2;const{blocks:blocks,viewportWidth:viewportWidth}=pattern,descriptionId=`block-editor-block-patterns-list__item-description-${(0,use_instance_id.Z)(BlockPattern)}`;return(0,react.createElement)(inserter_draggable_blocks,{isEnabled:isDraggable,blocks:blocks,isPattern:!!pattern},(_ref3=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref3;return(0,react.createElement)("div",{className:"block-editor-block-patterns-list__list-item",draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd},(0,react.createElement)(WithToolTip,{showTooltip:showTooltip,title:pattern.title},(0,react.createElement)(CompositeItem.A,(0,esm_extends.Z)({role:"option",as:"div"},composite,{className:"block-editor-block-patterns-list__item",onClick:()=>onClick(pattern,blocks),"aria-label":pattern.title,"aria-describedby":pattern.description?descriptionId:void 0}),(0,react.createElement)(block_preview,{blocks:blocks,viewportWidth:viewportWidth}),!showTooltip&&(0,react.createElement)("div",{className:"block-editor-block-patterns-list__item-title"},pattern.title),!!pattern.description&&(0,react.createElement)(visually_hidden_component.Z,{id:descriptionId},pattern.description))))}))}function BlockPatternPlaceholder(){return(0,react.createElement)("div",{className:"block-editor-block-patterns-list__item is-placeholder"})}var block_patterns_list=function BlockPatternList(_ref4){let{isDraggable:isDraggable,blockPatterns:blockPatterns,shownPatterns:shownPatterns,onClickPattern:onClickPattern,orientation:orientation,label:label=(0,i18n_build_module.__)("Block Patterns"),showTitlesAsTooltip:showTitlesAsTooltip}=_ref4;const composite=(0,CompositeState.u)({orientation:orientation});return(0,react.createElement)(Composite.b,(0,esm_extends.Z)({},composite,{role:"listbox",className:"block-editor-block-patterns-list","aria-label":label}),blockPatterns.map((pattern=>shownPatterns.includes(pattern)?(0,react.createElement)(BlockPattern,{key:pattern.name,pattern:pattern,onClick:onClickPattern,isDraggable:isDraggable,composite:composite,showTooltip:showTitlesAsTooltip}):(0,react.createElement)(BlockPatternPlaceholder,{key:pattern.name}))))};function PatternCategoriesList(_ref){let{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:onClickCategory}=_ref;const baseClassName="block-editor-block-patterns-explorer__sidebar";return(0,react.createElement)("div",{className:`${baseClassName}__categories-list`},patternCategories.map((_ref2=>{let{name:name,label:label}=_ref2;return(0,react.createElement)(build_module_button.Z,{key:name,label:label,className:`${baseClassName}__categories-list__item`,isPressed:selectedCategory===name,onClick:()=>{onClickCategory(name)}},label)})))}function PatternsExplorerSearch(_ref3){let{filterValue:filterValue,setFilterValue:setFilterValue}=_ref3;return(0,react.createElement)("div",{className:"block-editor-block-patterns-explorer__search"},(0,react.createElement)(search_control.Z,{__nextHasNoMarginBottom:!0,onChange:setFilterValue,value:filterValue,label:(0,i18n_build_module.__)("Search for patterns"),placeholder:(0,i18n_build_module.__)("Search")}))}var sidebar=function PatternExplorerSidebar(_ref4){let{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:onClickCategory,filterValue:filterValue,setFilterValue:setFilterValue}=_ref4;return(0,react.createElement)("div",{className:"block-editor-block-patterns-explorer__sidebar"},(0,react.createElement)(PatternsExplorerSearch,{filterValue:filterValue,setFilterValue:setFilterValue}),!filterValue&&(0,react.createElement)(PatternCategoriesList,{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:onClickCategory}))},heading_component=__webpack_require__("./packages/components/build-module/heading/component.js");var no_results=function InserterNoResults(){return(0,react.createElement)("div",{className:"block-editor-inserter__no-results"},(0,react.createElement)(build_module_icon.Z,{className:"block-editor-inserter__no-results-icon",icon:block_default.Z}),(0,react.createElement)("p",null,(0,i18n_build_module.__)("No results found.")))};var use_insertion_point=function useInsertionPoint(_ref){let{rootClientId:rootClientId="",insertionIndex:insertionIndex,clientId:clientId,isAppender:isAppender,onSelect:onSelect,shouldFocusBlock:shouldFocusBlock=!0,selectBlockOnInsert:selectBlockOnInsert=!0}=_ref;const{getSelectedBlock:getSelectedBlock}=(0,use_select.Z)(store),{destinationRootClientId:destinationRootClientId,destinationIndex:destinationIndex}=(0,use_select.Z)((select=>{const{getSelectedBlockClientId:getSelectedBlockClientId,getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex,getBlockOrder:getBlockOrder}=select(store),selectedBlockClientId=getSelectedBlockClientId();let _destinationIndex,_destinationRootClientId=rootClientId;return void 0!==insertionIndex?_destinationIndex=insertionIndex:clientId?_destinationIndex=getBlockIndex(clientId):!isAppender&&selectedBlockClientId?(_destinationRootClientId=getBlockRootClientId(selectedBlockClientId),_destinationIndex=getBlockIndex(selectedBlockClientId)+1):_destinationIndex=getBlockOrder(_destinationRootClientId).length,{destinationRootClientId:_destinationRootClientId,destinationIndex:_destinationIndex}}),[rootClientId,insertionIndex,clientId,isAppender]),{replaceBlocks:replaceBlocks,insertBlocks:insertBlocks,showInsertionPoint:showInsertionPoint,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store),onInsertBlocks=(0,react.useCallback)((function(blocks,meta){let shouldForceFocusBlock=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const selectedBlock=getSelectedBlock();!isAppender&&selectedBlock&&(0,build_module.ZP)(selectedBlock)?replaceBlocks(selectedBlock.clientId,blocks,null,shouldFocusBlock||shouldForceFocusBlock?0:null,meta):insertBlocks(blocks,destinationIndex,destinationRootClientId,selectBlockOnInsert,shouldFocusBlock||shouldForceFocusBlock?0:null,meta);const blockLength=Array.isArray(blocks)?blocks.length:1,message=(0,i18n_build_module.gB)((0,i18n_build_module._n)("%d block added.","%d blocks added.",blockLength),blockLength);(0,a11y_build_module.D)(message),onSelect&&onSelect(blocks)}),[isAppender,getSelectedBlock,replaceBlocks,insertBlocks,destinationRootClientId,destinationIndex,onSelect,shouldFocusBlock]),onToggleInsertionPoint=(0,react.useCallback)((show=>{show?showInsertionPoint(destinationRootClientId,destinationIndex):hideInsertionPoint()}),[showInsertionPoint,hideInsertionPoint,destinationRootClientId,destinationIndex]);return[destinationRootClientId,onInsertBlocks,onToggleInsertionPoint]},remove_accents=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents_default=__webpack_require__.n(remove_accents),dist_es2015=__webpack_require__("./node_modules/no-case/dist.es2015/index.js");const defaultGetName=item=>item.name||"",defaultGetTitle=item=>item.title,defaultGetDescription=item=>item.description||"",defaultGetKeywords=item=>item.keywords||[],defaultGetCategory=item=>item.category,defaultGetCollection=()=>null;function extractWords(){let input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,dist_es2015.B)(input,{splitRegexp:[/([\p{Ll}\p{Lo}\p{N}])([\p{Lu}\p{Lt}])/gu,/([\p{Lu}\p{Lt}])([\p{Lu}\p{Lt}][\p{Ll}\p{Lo}])/gu],stripRegexp:/(\p{C}|\p{P}|\p{S})+/giu}).split(" ").filter(Boolean)}function normalizeSearchInput(){let input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return input=remove_accents_default()(input),input=input.replace(/^\//,""),input=input.toLowerCase(),input}const getNormalizedSearchTerms=function(){let input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return extractWords(normalizeSearchInput(input))},removeMatchingTerms=(unmatchedTerms,unprocessedTerms)=>unmatchedTerms.filter((term=>!getNormalizedSearchTerms(unprocessedTerms).some((unprocessedTerm=>unprocessedTerm.includes(term))))),searchBlockItems=(items,categories,collections,searchInput)=>{if(0===getNormalizedSearchTerms(searchInput).length)return items;const config={getCategory:item=>{var _categories$find;return null===(_categories$find=categories.find((_ref=>{let{slug:slug}=_ref;return slug===item.category})))||void 0===_categories$find?void 0:_categories$find.title},getCollection:item=>{var _collections$item$nam;return null===(_collections$item$nam=collections[item.name.split("/")[0]])||void 0===_collections$item$nam?void 0:_collections$item$nam.title}};return searchItems(items,searchInput,config)},searchItems=function(){let items=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],searchInput=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",config=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const normalizedSearchTerms=getNormalizedSearchTerms(searchInput);if(0===normalizedSearchTerms.length)return items;const rankedItems=items.map((item=>[item,getItemSearchRank(item,searchInput,config)])).filter((_ref2=>{let[,rank]=_ref2;return rank>0}));return rankedItems.sort(((_ref3,_ref4)=>{let[,rank1]=_ref3,[,rank2]=_ref4;return rank2-rank1})),rankedItems.map((_ref5=>{let[item]=_ref5;return item}))};function getItemSearchRank(item,searchTerm){let config=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{getName:getName=defaultGetName,getTitle:getTitle=defaultGetTitle,getDescription:getDescription=defaultGetDescription,getKeywords:getKeywords=defaultGetKeywords,getCategory:getCategory=defaultGetCategory,getCollection:getCollection=defaultGetCollection}=config,name=getName(item),title=getTitle(item),description=getDescription(item),keywords=getKeywords(item),category=getCategory(item),collection=getCollection(item),normalizedSearchInput=normalizeSearchInput(searchTerm),normalizedTitle=normalizeSearchInput(title);let rank=0;if(normalizedSearchInput===normalizedTitle)rank+=30;else if(normalizedTitle.startsWith(normalizedSearchInput))rank+=20;else{const terms=[name,title,description,...keywords,category,collection].join(" "),normalizedSearchTerms=extractWords(normalizedSearchInput);0===removeMatchingTerms(normalizedSearchTerms,terms).length&&(rank+=10)}if(0!==rank&&name.startsWith("core/")){rank+=name!==item.id?1:2}return rank}function PatternsListHeader(_ref){let{filterValue:filterValue,filteredBlockPatternsLength:filteredBlockPatternsLength}=_ref;return filterValue?(0,react.createElement)(heading_component.Z,{level:2,lineHeight:"48px",className:"block-editor-block-patterns-explorer__search-results-count"},(0,i18n_build_module.gB)((0,i18n_build_module._n)('%1$d pattern found for "%2$s"','%1$d patterns found for "%2$s"',filteredBlockPatternsLength),filteredBlockPatternsLength,filterValue)):null}var patterns_list=function PatternList(_ref2){let{filterValue:filterValue,selectedCategory:selectedCategory,patternCategories:patternCategories}=_ref2;const debouncedSpeak=(0,use_debounce.Z)(a11y_build_module.D,500),[destinationRootClientId,onInsertBlocks]=use_insertion_point({shouldFocusBlock:!0}),[allPatterns,,onSelectBlockPattern]=use_patterns_state(onInsertBlocks,destinationRootClientId),registeredPatternCategories=(0,react.useMemo)((()=>patternCategories.map((patternCategory=>patternCategory.name))),[patternCategories]),filteredBlockPatterns=(0,react.useMemo)((()=>filterValue?searchItems(allPatterns,filterValue):allPatterns.filter((pattern=>{var _pattern$categories,_pattern$categories2;return"uncategorized"===selectedCategory?!(null!==(_pattern$categories=pattern.categories)&&void 0!==_pattern$categories&&_pattern$categories.length)||pattern.categories.every((category=>!registeredPatternCategories.includes(category))):null===(_pattern$categories2=pattern.categories)||void 0===_pattern$categories2?void 0:_pattern$categories2.includes(selectedCategory)}))),[filterValue,selectedCategory,allPatterns]);(0,react.useEffect)((()=>{if(!filterValue)return;const count=filteredBlockPatterns.length,resultsFoundMessage=(0,i18n_build_module.gB)((0,i18n_build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[filterValue,debouncedSpeak]);const currentShownPatterns=(0,use_async_list.Z)(filteredBlockPatterns,{step:2}),hasItems=!(null==filteredBlockPatterns||!filteredBlockPatterns.length);return(0,react.createElement)("div",{className:"block-editor-block-patterns-explorer__list"},hasItems&&(0,react.createElement)(PatternsListHeader,{filterValue:filterValue,filteredBlockPatternsLength:filteredBlockPatterns.length}),(0,react.createElement)(inserter_listbox,null,!hasItems&&(0,react.createElement)(no_results,null),hasItems&&(0,react.createElement)(block_patterns_list,{shownPatterns:currentShownPatterns,blockPatterns:filteredBlockPatterns,onClickPattern:onSelectBlockPattern,isDraggable:!1})))};function PatternsExplorer(_ref){let{initialCategory:initialCategory,patternCategories:patternCategories}=_ref;const[filterValue,setFilterValue]=(0,react.useState)(""),[selectedCategory,setSelectedCategory]=(0,react.useState)(null==initialCategory?void 0:initialCategory.name);return(0,react.createElement)("div",{className:"block-editor-block-patterns-explorer"},(0,react.createElement)(sidebar,{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:setSelectedCategory,filterValue:filterValue,setFilterValue:setFilterValue}),(0,react.createElement)(patterns_list,{filterValue:filterValue,selectedCategory:selectedCategory,patternCategories:patternCategories}))}var explorer=function PatternsExplorerModal(_ref2){let{onModalClose:onModalClose,...restProps}=_ref2;return(0,react.createElement)(modal.Z,{title:(0,i18n_build_module.__)("Patterns"),closeLabel:(0,i18n_build_module.__)("Close"),onRequestClose:onModalClose,isFullScreen:!0},(0,react.createElement)(PatternsExplorer,restProps))},view_component=__webpack_require__("./packages/components/build-module/view/component.js"),navigator_back_button_component=__webpack_require__("./packages/components/build-module/navigator/navigator-back-button/component.js"),navigator_provider_component=__webpack_require__("./packages/components/build-module/navigator/navigator-provider/component.js"),navigator_screen_component=__webpack_require__("./packages/components/build-module/navigator/navigator-screen/component.js"),navigator_button_component=__webpack_require__("./packages/components/build-module/navigator/navigator-button/component.js");function ScreenHeader(_ref){let{title:title}=_ref;return(0,react.createElement)(v_stack_component.Z,{spacing:0},(0,react.createElement)(view_component.Z,null,(0,react.createElement)(spacer_component.Z,{marginBottom:0,paddingX:4,paddingY:3},(0,react.createElement)(h_stack_component.Z,{spacing:2},(0,react.createElement)(navigator_back_button_component.Z,{style:{minWidth:24,padding:0},icon:(0,i18n_build_module.dZ)()?chevron_right.Z:chevron_left.Z,isSmall:!0,"aria-label":(0,i18n_build_module.__)("Navigate to the previous view")}),(0,react.createElement)(spacer_component.Z,null,(0,react.createElement)(heading_component.Z,{level:5},title))))))}function MobileTabNavigation(_ref2){let{categories:categories,children:children}=_ref2;return(0,react.createElement)(navigator_provider_component.Z,{initialPath:"/",className:"block-editor-inserter__mobile-tab-navigation"},(0,react.createElement)(navigator_screen_component.Z,{path:"/"},(0,react.createElement)(item_group_component.Z,null,categories.map((category=>(0,react.createElement)(navigator_button_component.Z,{key:category.name,path:`/category/${category.name}`,as:item_component.Z,isAction:!0},(0,react.createElement)(h_stack_component.Z,null,(0,react.createElement)(flex_block_component.Z,null,category.label),(0,react.createElement)(build_module_icon.Z,{icon:(0,i18n_build_module.dZ)()?chevron_left.Z:chevron_right.Z}))))))),categories.map((category=>(0,react.createElement)(navigator_screen_component.Z,{key:category.name,path:`/category/${category.name}`},(0,react.createElement)(ScreenHeader,{title:(0,i18n_build_module.__)("Back")}),children(category)))))}function usePatternsCategories(){const[allPatterns,allCategories]=use_patterns_state(),hasRegisteredCategory=(0,react.useCallback)((pattern=>!(!pattern.categories||!pattern.categories.length)&&pattern.categories.some((cat=>allCategories.some((category=>category.name===cat))))),[allCategories]),populatedCategories=(0,react.useMemo)((()=>{const categories=allCategories.filter((category=>allPatterns.some((pattern=>{var _pattern$categories;return null===(_pattern$categories=pattern.categories)||void 0===_pattern$categories?void 0:_pattern$categories.includes(category.name)})))).sort(((_ref,_ref2)=>{let{name:currentName}=_ref,{name:nextName}=_ref2;return[currentName,nextName].some((categoryName=>["featured","text"].includes(categoryName)))?"featured"===currentName||"text"===nextName?-1:1:0}));return allPatterns.some((pattern=>!hasRegisteredCategory(pattern)))&&!categories.find((category=>"uncategorized"===category.name))&&categories.push({name:"uncategorized",label:(0,i18n_build_module._x)("Uncategorized")}),categories}),[allPatterns,allCategories]);return populatedCategories}function BlockPatternsCategoryDialog(_ref3){let{rootClientId:rootClientId,onInsert:onInsert,category:category,showTitlesAsTooltip:showTitlesAsTooltip}=_ref3;const container=(0,react.useRef)();return(0,react.useEffect)((()=>{const timeout=setTimeout((()=>{const[firstTabbable]=dom_build_module.T_.tabbable.find(container.current);null==firstTabbable||firstTabbable.focus()}));return()=>clearTimeout(timeout)}),[category]),(0,react.createElement)("div",{ref:container,className:"block-editor-inserter__patterns-category-dialog"},(0,react.createElement)(BlockPatternsCategoryPanel,{rootClientId:rootClientId,onInsert:onInsert,category:category,showTitlesAsTooltip:showTitlesAsTooltip}))}function BlockPatternsCategoryPanel(_ref4){let{rootClientId:rootClientId,onInsert:onInsert,category:category,showTitlesAsTooltip:showTitlesAsTooltip}=_ref4;const[allPatterns,,onClick]=use_patterns_state(onInsert,rootClientId),availableCategories=usePatternsCategories(),currentCategoryPatterns=(0,react.useMemo)((()=>allPatterns.filter((pattern=>{var _pattern$categories$f,_pattern$categories3,_pattern$categories2;if("uncategorized"!==category.name)return null===(_pattern$categories2=pattern.categories)||void 0===_pattern$categories2?void 0:_pattern$categories2.includes(category.name);return 0===(null!==(_pattern$categories$f=null===(_pattern$categories3=pattern.categories)||void 0===_pattern$categories3?void 0:_pattern$categories3.filter((cat=>availableCategories.find((availableCategory=>availableCategory.name===cat)))))&&void 0!==_pattern$categories$f?_pattern$categories$f:[]).length}))),[allPatterns,category]),currentShownPatterns=(0,use_async_list.Z)(currentCategoryPatterns);return currentCategoryPatterns.length?(0,react.createElement)("div",{className:"block-editor-inserter__patterns-category-panel"},(0,react.createElement)("div",{className:"block-editor-inserter__patterns-category-panel-title"},category.label),(0,react.createElement)("p",null,category.description),(0,react.createElement)(block_patterns_list,{shownPatterns:currentShownPatterns,blockPatterns:currentCategoryPatterns,onClickPattern:onClick,label:category.label,orientation:"vertical",category:category.label,isDraggable:!0,showTitlesAsTooltip:showTitlesAsTooltip})):null}var block_patterns_tab=function BlockPatternsTabs(_ref5){let{onSelectCategory:onSelectCategory,selectedCategory:selectedCategory,onInsert:onInsert,rootClientId:rootClientId}=_ref5;const[showPatternsExplorer,setShowPatternsExplorer]=(0,react.useState)(!1),categories=usePatternsCategories(),isMobile=(0,use_viewport_match.Z)("medium","<");return(0,react.createElement)(react.Fragment,null,!isMobile&&(0,react.createElement)("div",{className:"block-editor-inserter__block-patterns-tabs-container"},(0,react.createElement)("nav",{"aria-label":(0,i18n_build_module.__)("Block pattern categories")},(0,react.createElement)(item_group_component.Z,{role:"list",className:"block-editor-inserter__block-patterns-tabs"},categories.map((category=>(0,react.createElement)(item_component.Z,{role:"listitem",key:category.name,onClick:()=>onSelectCategory(category),className:category===selectedCategory?"block-editor-inserter__patterns-category block-editor-inserter__patterns-selected-category":"block-editor-inserter__patterns-category","aria-label":category.label,"aria-current":category===selectedCategory?"true":void 0},(0,react.createElement)(h_stack_component.Z,null,(0,react.createElement)(flex_block_component.Z,null,category.label),(0,react.createElement)(build_module_icon.Z,{icon:chevron_right.Z}))))),(0,react.createElement)("div",{role:"listitem"},(0,react.createElement)(build_module_button.Z,{className:"block-editor-inserter__patterns-explore-button",onClick:()=>setShowPatternsExplorer(!0),variant:"secondary"},(0,i18n_build_module.__)("Explore all patterns")))))),isMobile&&(0,react.createElement)(MobileTabNavigation,{categories:categories},(category=>(0,react.createElement)(BlockPatternsCategoryPanel,{onInsert:onInsert,rootClientId:rootClientId,category:category,showTitlesAsTooltip:!1}))),showPatternsExplorer&&(0,react.createElement)(explorer,{initialCategory:selectedCategory,patternCategories:categories,onModalClose:()=>setShowPatternsExplorer(!1)}))},add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js");function ReusableBlocksList(_ref){let{onHover:onHover,onInsert:onInsert,rootClientId:rootClientId}=_ref;const[items,,,onSelectItem]=use_block_types_state(rootClientId,onInsert),filteredItems=(0,react.useMemo)((()=>items.filter((_ref2=>{let{category:category}=_ref2;return"reusable"===category}))),[items]);return 0===filteredItems.length?(0,react.createElement)(no_results,null):(0,react.createElement)(panel,{title:(0,i18n_build_module.__)("Reusable blocks")},(0,react.createElement)(block_types_list,{items:filteredItems,onSelect:onSelectItem,onHover:onHover,label:(0,i18n_build_module.__)("Reusable blocks")}))}var reusable_blocks_tab=function ReusableBlocksTab(_ref3){let{rootClientId:rootClientId,onInsert:onInsert,onHover:onHover}=_ref3;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(ReusableBlocksList,{onHover:onHover,onInsert:onInsert,rootClientId:rootClientId}),(0,react.createElement)("div",{className:"block-editor-inserter__manage-reusable-blocks-container"},(0,react.createElement)(build_module_button.Z,{className:"block-editor-inserter__manage-reusable-blocks",variant:"secondary",href:(0,add_query_args.f)("edit.php",{post_type:"wp_block"})},(0,i18n_build_module.__)("Manage Reusable blocks"))))};const MEDIA_CATEGORIES=[{label:(0,i18n_build_module.__)("Images"),name:"images",mediaType:"image"},{label:(0,i18n_build_module.__)("Videos"),name:"videos",mediaType:"video"},{label:(0,i18n_build_module.__)("Audio"),name:"audio",mediaType:"audio"}];function useMediaCategories(rootClientId){const[categories,setCategories]=(0,react.useState)([]),{canInsertImage:canInsertImage,canInsertVideo:canInsertVideo,canInsertAudio:canInsertAudio,fetchMedia:fetchMedia}=(0,use_select.Z)((select=>{const{canInsertBlockType:canInsertBlockType,getSettings:getSettings}=select(store);return{fetchMedia:getSettings().__unstableFetchMedia,canInsertImage:canInsertBlockType("core/image",rootClientId),canInsertVideo:canInsertBlockType("core/video",rootClientId),canInsertAudio:canInsertBlockType("core/audio",rootClientId)}}),[rootClientId]);return(0,react.useEffect)((()=>{(async()=>{if(!fetchMedia)return;const query={context:"view",per_page:1,_fields:["id"]},[image,video,audio]=await Promise.all([fetchMedia({...query,media_type:"image"}),fetchMedia({...query,media_type:"video"}),fetchMedia({...query,media_type:"audio"})]),showImage=canInsertImage&&!!image.length,showVideo=canInsertVideo&&!!video.length,showAudio=canInsertAudio&&!!audio.length;setCategories(MEDIA_CATEGORIES.filter((_ref=>{let{mediaType:mediaType}=_ref;return"image"===mediaType&&showImage||"video"===mediaType&&showVideo||"audio"===mediaType&&showAudio})))})()}),[canInsertImage,canInsertVideo,canInsertAudio,fetchMedia]),categories}var spinner=__webpack_require__("./packages/components/build-module/spinner/index.js");const mediaTypeTag={image:"img",video:"video",audio:"audio"};function getBlockAndPreviewFromMedia(media,mediaType){var _media$caption;const attributes={id:media.id},mediaSrc=media.source_url||media.url,alt=media.alt_text||media.alt||void 0,caption=(null===(_media$caption=media.caption)||void 0===_media$caption?void 0:_media$caption.raw)||media.caption;caption&&"string"==typeof caption&&(attributes.caption=caption),"image"===mediaType?(attributes.url=mediaSrc,attributes.alt=alt):["video","audio"].includes(mediaType)&&(attributes.src=mediaSrc);const PreviewTag=mediaTypeTag[mediaType],preview=(0,react.createElement)(PreviewTag,{src:mediaSrc,alt:alt,controls:"audio"===mediaType||void 0,inert:"true"});return[(0,build_module.j4)(`core/${mediaType}`,attributes),preview]}function MediaPreview(_ref){var _media$title;let{media:media,onClick:onClick,composite:composite,mediaType:mediaType}=_ref;const[block,preview]=(0,react.useMemo)((()=>getBlockAndPreviewFromMedia(media,mediaType)),[media,mediaType]),title=(null===(_media$title=media.title)||void 0===_media$title?void 0:_media$title.rendered)||media.title,baseCssClass="block-editor-inserter__media-list";return(0,react.createElement)(inserter_draggable_blocks,{isEnabled:!0,blocks:[block]},(_ref2=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref2;return(0,react.createElement)("div",{className:`${baseCssClass}__list-item`,draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd},(0,react.createElement)(tooltip.Z,{text:title},(0,react.createElement)(CompositeItem.A,(0,esm_extends.Z)({role:"option",as:"div"},composite,{className:`${baseCssClass}__item`,onClick:()=>{onClick(block)},"aria-label":title}),(0,react.createElement)("div",{className:`${baseCssClass}__item-preview`},preview))))}))}var media_list=function MediaList(_ref3){let{mediaList:mediaList,mediaType:mediaType,onClick:onClick,label:label=(0,i18n_build_module.__)("Media List")}=_ref3;const composite=(0,CompositeState.u)(),onPreviewClick=(0,react.useCallback)((block=>{onClick((0,build_module.Wm)(block))}),[onClick]);return(0,react.createElement)(Composite.b,(0,esm_extends.Z)({},composite,{role:"listbox",className:"block-editor-inserter__media-list","aria-label":label}),mediaList.map((media=>(0,react.createElement)(MediaPreview,{key:media.id,media:media,mediaType:mediaType,onClick:onPreviewClick,composite:composite}))))};function useDebouncedInput(){let defaultValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[input,setInput]=(0,react.useState)(defaultValue),[debounced,setter]=(0,react.useState)(defaultValue),setDebounced=(0,use_debounce.Z)(setter,250);return(0,react.useEffect)((()=>{debounced!==input&&setDebounced(input)}),[debounced,input]),[input,setInput,debounced]}function MediaCategoryDialog(_ref){let{rootClientId:rootClientId,onInsert:onInsert,category:category}=_ref;const container=(0,react.useRef)();return(0,react.useEffect)((()=>{const timeout=setTimeout((()=>{const[firstTabbable]=dom_build_module.T_.tabbable.find(container.current);null==firstTabbable||firstTabbable.focus()}));return()=>clearTimeout(timeout)}),[category]),(0,react.createElement)("div",{ref:container,className:"block-editor-inserter__media-dialog"},(0,react.createElement)(MediaCategoryPanel,{rootClientId:rootClientId,onInsert:onInsert,category:category}))}function MediaCategoryPanel(_ref2){let{rootClientId:rootClientId,onInsert:onInsert,category:category}=_ref2;const[search,setSearch,debouncedSearch]=useDebouncedInput(),mediaList=function useMediaResults(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[results,setResults]=(0,react.useState)(),settings=(0,use_select.Z)((select=>select(store).getSettings()),[]);return(0,react.useEffect)((()=>{(async()=>{setResults();const _media=await(null==settings?void 0:settings.__unstableFetchMedia(options));_media&&setResults(_media)})()}),Object.values(options)),results}({per_page:debouncedSearch?20:10,media_type:category.mediaType,search:debouncedSearch,orderBy:debouncedSearch?"relevance":"date"}),baseCssClass="block-editor-inserter__media-panel";return(0,react.createElement)("div",{className:baseCssClass},(0,react.createElement)(search_control.Z,{className:`${baseCssClass}-search`,onChange:setSearch,value:search,label:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Search %s"),category.label.toLocaleLowerCase()),placeholder:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Search %s"),category.label.toLocaleLowerCase())}),!mediaList&&(0,react.createElement)("div",{className:`${baseCssClass}-spinner`},(0,react.createElement)(spinner.ZP,null)),Array.isArray(mediaList)&&!mediaList.length&&(0,react.createElement)(no_results,null),!(null==mediaList||!mediaList.length)&&(0,react.createElement)(media_list,{rootClientId:rootClientId,onClick:onInsert,mediaList:mediaList,mediaType:category.mediaType}))}var check=function MediaUploadCheck(_ref){let{fallback:fallback=null,children:children}=_ref;const hasUploadPermissions=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store);return!!getSettings().mediaUpload}),[]);return hasUploadPermissions?children:fallback};var media_upload=(0,with_filters.Z)("editor.MediaUpload")((()=>null));const ALLOWED_MEDIA_TYPES=["image","video","audio"];var media_tab=function MediaTab(_ref){let{rootClientId:rootClientId,selectedCategory:selectedCategory,onSelectCategory:onSelectCategory,onInsert:onInsert}=_ref;const mediaCategories=useMediaCategories(rootClientId),isMobile=(0,use_viewport_match.Z)("medium","<"),baseCssClass="block-editor-inserter__media-tabs",onSelectMedia=(0,react.useCallback)((media=>{if(null==media||!media.url)return;const[block]=getBlockAndPreviewFromMedia(media,media.type);onInsert(block)}),[onInsert]);return(0,react.createElement)(react.Fragment,null,!isMobile&&(0,react.createElement)("div",{className:`${baseCssClass}-container`},(0,react.createElement)("nav",{"aria-label":(0,i18n_build_module.__)("Media categories")},(0,react.createElement)(item_group_component.Z,{role:"list",className:baseCssClass},mediaCategories.map((mediaCategory=>(0,react.createElement)(item_component.Z,{role:"listitem",key:mediaCategory.name,onClick:()=>onSelectCategory(mediaCategory),className:classnames_default()(`${baseCssClass}__media-category`,{"is-selected":selectedCategory===mediaCategory}),"aria-label":mediaCategory.label,"aria-current":mediaCategory===selectedCategory?"true":void 0},(0,react.createElement)(h_stack_component.Z,null,(0,react.createElement)(flex_block_component.Z,null,mediaCategory.label),(0,react.createElement)(build_module_icon.Z,{icon:chevron_right.Z}))))),(0,react.createElement)("div",{role:"listitem"},(0,react.createElement)(check,null,(0,react.createElement)(media_upload,{multiple:!1,onSelect:onSelectMedia,allowedTypes:ALLOWED_MEDIA_TYPES,render:_ref2=>{let{open:open}=_ref2;return(0,react.createElement)(build_module_button.Z,{onClick:event=>{event.target.focus(),open()},className:"block-editor-inserter__media-library-button",variant:"secondary","data-unstable-ignore-focus-outside-for-relatedtarget":".media-modal"},(0,i18n_build_module.__)("Open Media Library"))}})))))),isMobile&&(0,react.createElement)(MobileTabNavigation,{categories:mediaCategories},(category=>(0,react.createElement)(MediaCategoryPanel,{onInsert:onInsert,rootClientId:rootClientId,category:category}))))};const{Fill:__unstableInserterMenuExtension,Slot:Slot}=(0,slot_fill.up)("__unstableInserterMenuExtension");__unstableInserterMenuExtension.Slot=Slot;var inserter_menu_extension=__unstableInserterMenuExtension;const search_results_EMPTY_ARRAY=[];var search_results=function InserterSearchResults(_ref){let{filterValue:filterValue,onSelect:onSelect,onHover:onHover,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,__experimentalInsertionIndex:__experimentalInsertionIndex,maxBlockPatterns:maxBlockPatterns,maxBlockTypes:maxBlockTypes,showBlockDirectory:showBlockDirectory=!1,isDraggable:isDraggable=!0,shouldFocusBlock:shouldFocusBlock=!0,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert}=_ref;const debouncedSpeak=(0,use_debounce.Z)(a11y_build_module.D,500),[destinationRootClientId,onInsertBlocks]=use_insertion_point({onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,insertionIndex:__experimentalInsertionIndex,shouldFocusBlock:shouldFocusBlock,selectBlockOnInsert:selectBlockOnInsert}),[blockTypes,blockTypeCategories,blockTypeCollections,onSelectBlockType]=use_block_types_state(destinationRootClientId,onInsertBlocks),[patterns,,onSelectBlockPattern]=use_patterns_state(onInsertBlocks,destinationRootClientId),filteredBlockPatterns=(0,react.useMemo)((()=>{if(0===maxBlockPatterns)return[];const results=searchItems(patterns,filterValue);return void 0!==maxBlockPatterns?results.slice(0,maxBlockPatterns):results}),[filterValue,patterns,maxBlockPatterns]);let maxBlockTypesToShow=maxBlockTypes;prioritizePatterns&&filteredBlockPatterns.length>2&&(maxBlockTypesToShow=0);const filteredBlockTypes=(0,react.useMemo)((()=>{if(0===maxBlockTypesToShow)return[];const results=searchBlockItems(orderBy(blockTypes,"frecency","desc"),blockTypeCategories,blockTypeCollections,filterValue);return void 0!==maxBlockTypesToShow?results.slice(0,maxBlockTypesToShow):results}),[filterValue,blockTypes,blockTypeCategories,blockTypeCollections,maxBlockTypes]);(0,react.useEffect)((()=>{if(!filterValue)return;const count=filteredBlockTypes.length+filteredBlockPatterns.length,resultsFoundMessage=(0,i18n_build_module.gB)((0,i18n_build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[filterValue,debouncedSpeak]);const currentShownBlockTypes=(0,use_async_list.Z)(filteredBlockTypes,{step:9}),currentShownPatterns=(0,use_async_list.Z)(currentShownBlockTypes.length===filteredBlockTypes.length?filteredBlockPatterns:search_results_EMPTY_ARRAY),hasItems=!(0,lodash.isEmpty)(filteredBlockTypes)||!(0,lodash.isEmpty)(filteredBlockPatterns),blocksUI=!!filteredBlockTypes.length&&(0,react.createElement)(panel,{title:(0,react.createElement)(visually_hidden_component.Z,null,(0,i18n_build_module.__)("Blocks"))},(0,react.createElement)(block_types_list,{items:currentShownBlockTypes,onSelect:onSelectBlockType,onHover:onHover,label:(0,i18n_build_module.__)("Blocks"),isDraggable:isDraggable})),patternsUI=!!filteredBlockPatterns.length&&(0,react.createElement)(panel,{title:(0,react.createElement)(visually_hidden_component.Z,null,(0,i18n_build_module.__)("Block Patterns"))},(0,react.createElement)("div",{className:"block-editor-inserter__quick-inserter-patterns"},(0,react.createElement)(block_patterns_list,{shownPatterns:currentShownPatterns,blockPatterns:filteredBlockPatterns,onClickPattern:onSelectBlockPattern,isDraggable:isDraggable})));return(0,react.createElement)(inserter_listbox,null,!showBlockDirectory&&!hasItems&&(0,react.createElement)(no_results,null),prioritizePatterns?patternsUI:blocksUI,!!filteredBlockTypes.length&&!!filteredBlockPatterns.length&&(0,react.createElement)("div",{className:"block-editor-inserter__quick-inserter-separator"}),prioritizePatterns?blocksUI:patternsUI,showBlockDirectory&&(0,react.createElement)(inserter_menu_extension.Slot,{fillProps:{onSelect:onSelectBlockType,onHover:onHover,filterValue:filterValue,hasItems:hasItems,rootClientId:destinationRootClientId}},(fills=>fills.length?fills:hasItems?null:(0,react.createElement)(no_results,null))))},tab_panel=__webpack_require__("./packages/components/build-module/tab-panel/index.js");const blocksTab={name:"blocks",title:(0,i18n_build_module.__)("Blocks")},patternsTab={name:"patterns",title:(0,i18n_build_module.__)("Patterns")},reusableBlocksTab={name:"reusable",title:(0,i18n_build_module.__)("Reusable"),icon:symbol.Z},mediaTab={name:"media",title:(0,i18n_build_module.__)("Media")};var tabs=function InserterTabs(_ref){let{children:children,showPatterns:showPatterns=!1,showReusableBlocks:showReusableBlocks=!1,showMedia:showMedia=!1,onSelect:onSelect,prioritizePatterns:prioritizePatterns}=_ref;const tabs=(0,react.useMemo)((()=>{const tempTabs=[];return prioritizePatterns&&showPatterns&&tempTabs.push(patternsTab),tempTabs.push(blocksTab),!prioritizePatterns&&showPatterns&&tempTabs.push(patternsTab),showMedia&&tempTabs.push(mediaTab),showReusableBlocks&&tempTabs.push(reusableBlocksTab),tempTabs}),[prioritizePatterns,blocksTab,showPatterns,patternsTab,showReusableBlocks,showMedia,reusableBlocksTab]);return(0,react.createElement)(tab_panel.Z,{className:"block-editor-inserter__tabs",tabs:tabs,onSelect:onSelect},children)};var menu=(0,react.forwardRef)((function InserterMenu(_ref,ref){let{rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,__experimentalInsertionIndex:__experimentalInsertionIndex,onSelect:onSelect,showInserterHelpPanel:showInserterHelpPanel,showMostUsedBlocks:showMostUsedBlocks,__experimentalFilterValue:__experimentalFilterValue="",shouldFocusBlock:shouldFocusBlock=!0,prioritizePatterns:prioritizePatterns}=_ref;const[filterValue,setFilterValue,delayedFilterValue]=useDebouncedInput(__experimentalFilterValue),[hoveredItem,setHoveredItem]=(0,react.useState)(null),[selectedPatternCategory,setSelectedPatternCategory]=(0,react.useState)(null),[selectedMediaCategory,setSelectedMediaCategory]=(0,react.useState)(null),[selectedTab,setSelectedTab]=(0,react.useState)(null),[destinationRootClientId,onInsertBlocks,onToggleInsertionPoint]=use_insertion_point({rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,insertionIndex:__experimentalInsertionIndex,shouldFocusBlock:shouldFocusBlock}),{showPatterns:showPatterns,hasReusableBlocks:hasReusableBlocks}=(0,use_select.Z)((select=>{var _getSettings$__experi;const{__experimentalGetAllowedPatterns:__experimentalGetAllowedPatterns,getSettings:getSettings}=select(store);return{showPatterns:!!__experimentalGetAllowedPatterns(destinationRootClientId).length,hasReusableBlocks:!(null===(_getSettings$__experi=getSettings().__experimentalReusableBlocks)||void 0===_getSettings$__experi||!_getSettings$__experi.length)}}),[destinationRootClientId]),showMedia=!!useMediaCategories(destinationRootClientId).length,onInsert=(0,react.useCallback)(((blocks,meta,shouldForceFocusBlock)=>{onInsertBlocks(blocks,meta,shouldForceFocusBlock),onSelect()}),[onInsertBlocks,onSelect]),onInsertPattern=(0,react.useCallback)(((blocks,patternName)=>{onInsertBlocks(blocks,{patternName:patternName}),onSelect()}),[onInsertBlocks,onSelect]),onHover=(0,react.useCallback)((item=>{onToggleInsertionPoint(!!item),setHoveredItem(item)}),[onToggleInsertionPoint,setHoveredItem]),onClickPatternCategory=(0,react.useCallback)((patternCategory=>{setSelectedPatternCategory(patternCategory)}),[setSelectedPatternCategory]),blocksTab=(0,react.useMemo)((()=>(0,react.createElement)(react.Fragment,null,(0,react.createElement)("div",{className:"block-editor-inserter__block-list"},(0,react.createElement)(block_types_tab,{rootClientId:destinationRootClientId,onInsert:onInsert,onHover:onHover,showMostUsedBlocks:showMostUsedBlocks})),showInserterHelpPanel&&(0,react.createElement)("div",{className:"block-editor-inserter__tips"},(0,react.createElement)(visually_hidden_component.Z,{as:"h2"},(0,i18n_build_module.__)("A tip for using the block editor")),(0,react.createElement)(tips,null)))),[destinationRootClientId,onInsert,onHover,delayedFilterValue,showMostUsedBlocks,showInserterHelpPanel]),patternsTab=(0,react.useMemo)((()=>(0,react.createElement)(block_patterns_tab,{rootClientId:destinationRootClientId,onInsert:onInsertPattern,onSelectCategory:onClickPatternCategory,selectedCategory:selectedPatternCategory})),[destinationRootClientId,onInsertPattern,onClickPatternCategory,selectedPatternCategory]),reusableBlocksTab=(0,react.useMemo)((()=>(0,react.createElement)(reusable_blocks_tab,{rootClientId:destinationRootClientId,onInsert:onInsert,onHover:onHover})),[destinationRootClientId,onInsert,onHover]),mediaTab=(0,react.useMemo)((()=>(0,react.createElement)(media_tab,{rootClientId:destinationRootClientId,selectedCategory:selectedMediaCategory,onSelectCategory:setSelectedMediaCategory,onInsert:onInsert})),[destinationRootClientId,onInsert,selectedMediaCategory,setSelectedMediaCategory]),getCurrentTab=(0,react.useCallback)((tab=>"blocks"===tab.name?blocksTab:"patterns"===tab.name?patternsTab:"reusable"===tab.name?reusableBlocksTab:"media"===tab.name?mediaTab:void 0),[blocksTab,patternsTab,reusableBlocksTab,mediaTab]),searchRef=(0,react.useRef)();(0,react.useImperativeHandle)(ref,(()=>({focusSearch:()=>{searchRef.current.focus()}})));const showPatternPanel="patterns"===selectedTab&&!delayedFilterValue&&selectedPatternCategory,showAsTabs=!delayedFilterValue&&(showPatterns||hasReusableBlocks||showMedia),showMediaPanel="media"===selectedTab&&!delayedFilterValue&&selectedMediaCategory;return(0,react.createElement)("div",{className:"block-editor-inserter__menu"},(0,react.createElement)("div",{className:classnames_default()("block-editor-inserter__main-area",{"show-as-tabs":showAsTabs})},(0,react.createElement)(search_control.Z,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",onChange:value=>{hoveredItem&&setHoveredItem(null),setFilterValue(value)},value:filterValue,label:(0,i18n_build_module.__)("Search for blocks and patterns"),placeholder:(0,i18n_build_module.__)("Search"),ref:searchRef}),!!delayedFilterValue&&(0,react.createElement)("div",{className:"block-editor-inserter__no-tab-container"},(0,react.createElement)(search_results,{filterValue:delayedFilterValue,onSelect:onSelect,onHover:onHover,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,__experimentalInsertionIndex:__experimentalInsertionIndex,showBlockDirectory:!0,shouldFocusBlock:shouldFocusBlock})),showAsTabs&&(0,react.createElement)(tabs,{showPatterns:showPatterns,showReusableBlocks:hasReusableBlocks,showMedia:showMedia,prioritizePatterns:prioritizePatterns,onSelect:setSelectedTab},getCurrentTab),!delayedFilterValue&&!showAsTabs&&(0,react.createElement)("div",{className:"block-editor-inserter__no-tab-container"},blocksTab)),showMediaPanel&&(0,react.createElement)(MediaCategoryDialog,{rootClientId:destinationRootClientId,onInsert:onInsert,category:selectedMediaCategory}),showInserterHelpPanel&&hoveredItem&&(0,react.createElement)(preview_panel,{item:hoveredItem}),showPatternPanel&&(0,react.createElement)(BlockPatternsCategoryDialog,{rootClientId:destinationRootClientId,onInsert:onInsertPattern,category:selectedPatternCategory,showTitlesAsTooltip:!0}))}));function QuickInserter(_ref){let{onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert}=_ref;const[filterValue,setFilterValue]=(0,react.useState)(""),[destinationRootClientId,onInsertBlocks]=use_insertion_point({onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,selectBlockOnInsert:selectBlockOnInsert}),[blockTypes]=use_block_types_state(destinationRootClientId,onInsertBlocks),[patterns]=use_patterns_state(onInsertBlocks,destinationRootClientId),{setInserterIsOpened:setInserterIsOpened,insertionIndex:insertionIndex}=(0,use_select.Z)((select=>{const{getSettings:getSettings,getBlockIndex:getBlockIndex,getBlockCount:getBlockCount}=select(store),settings=getSettings(),index=getBlockIndex(clientId),blockCount=getBlockCount();return{setInserterIsOpened:settings.__experimentalSetIsInserterOpened,insertionIndex:-1===index?blockCount:index}}),[clientId]),showPatterns=patterns.length&&(!!filterValue||prioritizePatterns),showSearch=showPatterns&&patterns.length>6||blockTypes.length>6;(0,react.useEffect)((()=>{setInserterIsOpened&&setInserterIsOpened(!1)}),[setInserterIsOpened]);let maxBlockPatterns=0;return showPatterns&&(maxBlockPatterns=prioritizePatterns?4:2),(0,react.createElement)("div",{className:classnames_default()("block-editor-inserter__quick-inserter",{"has-search":showSearch,"has-expand":setInserterIsOpened})},showSearch&&(0,react.createElement)(search_control.Z,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",value:filterValue,onChange:value=>{setFilterValue(value)},label:(0,i18n_build_module.__)("Search for blocks and patterns"),placeholder:(0,i18n_build_module.__)("Search")}),(0,react.createElement)("div",{className:"block-editor-inserter__quick-inserter-results"},(0,react.createElement)(search_results,{filterValue:filterValue,onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,maxBlockPatterns:maxBlockPatterns,maxBlockTypes:6,isDraggable:!1,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert})),setInserterIsOpened&&(0,react.createElement)(build_module_button.Z,{className:"block-editor-inserter__quick-inserter-expand",onClick:()=>{setInserterIsOpened({rootClientId:rootClientId,insertionIndex:insertionIndex,filterValue:filterValue})},"aria-label":(0,i18n_build_module.__)("Browse all. This will open the main inserter panel in the editor toolbar.")},(0,i18n_build_module.__)("Browse all")))}const defaultRenderToggle=_ref=>{let label,{onToggle:onToggle,disabled:disabled,isOpen:isOpen,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType,toggleProps:toggleProps={},prioritizePatterns:prioritizePatterns}=_ref;label=hasSingleBlockType?(0,i18n_build_module.gB)((0,i18n_build_module._x)("Add %s","directly add the only allowed block"),blockTitle):prioritizePatterns?(0,i18n_build_module.__)("Add pattern"):(0,i18n_build_module._x)("Add block","Generic label for block inserter button");const{onClick:onClick,...rest}=toggleProps;return(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({icon:plus.Z,label:label,tooltipPosition:"bottom",onClick:function handleClick(event){onToggle&&onToggle(event),onClick&&onClick(event)},className:"block-editor-inserter__toggle","aria-haspopup":!hasSingleBlockType&&"true","aria-expanded":!hasSingleBlockType&&isOpen,disabled:disabled},rest))};class Inserter extends react.Component{constructor(){super(...arguments),this.onToggle=this.onToggle.bind(this),this.renderToggle=this.renderToggle.bind(this),this.renderContent=this.renderContent.bind(this)}onToggle(isOpen){const{onToggle:onToggle}=this.props;onToggle&&onToggle(isOpen)}renderToggle(_ref2){let{onToggle:onToggle,isOpen:isOpen}=_ref2;const{disabled:disabled,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType,directInsertBlock:directInsertBlock,toggleProps:toggleProps,hasItems:hasItems,renderToggle:renderToggle=defaultRenderToggle,prioritizePatterns:prioritizePatterns}=this.props;return renderToggle({onToggle:onToggle,isOpen:isOpen,disabled:disabled||!hasItems,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType,directInsertBlock:directInsertBlock,toggleProps:toggleProps,prioritizePatterns:prioritizePatterns})}renderContent(_ref3){let{onClose:onClose}=_ref3;const{rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,showInserterHelpPanel:showInserterHelpPanel,__experimentalIsQuick:isQuick,prioritizePatterns:prioritizePatterns,onSelectOrClose:onSelectOrClose,selectBlockOnInsert:selectBlockOnInsert}=this.props;return isQuick?(0,react.createElement)(QuickInserter,{onSelect:blocks=>{const firstBlock=Array.isArray(blocks)&&null!=blocks&&blocks.length?blocks[0]:blocks;onSelectOrClose&&"function"==typeof onSelectOrClose&&onSelectOrClose(firstBlock),onClose()},rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert}):(0,react.createElement)(menu,{onSelect:()=>{onClose()},rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,showInserterHelpPanel:showInserterHelpPanel,prioritizePatterns:prioritizePatterns})}render(){const{position:position,hasSingleBlockType:hasSingleBlockType,directInsertBlock:directInsertBlock,insertOnlyAllowedBlock:insertOnlyAllowedBlock,__experimentalIsQuick:isQuick,onSelectOrClose:onSelectOrClose}=this.props;return hasSingleBlockType||directInsertBlock?this.renderToggle({onToggle:insertOnlyAllowedBlock}):(0,react.createElement)(dropdown.Z,{className:"block-editor-inserter",contentClassName:classnames_default()("block-editor-inserter__popover",{"is-quick":isQuick}),position:position,onToggle:this.onToggle,expandOnMobile:!0,headerTitle:(0,i18n_build_module.__)("Add a block"),renderToggle:this.renderToggle,renderContent:this.renderContent,onClose:onSelectOrClose})}}Inserter.displayName="Inserter",Inserter.__docgenInfo={description:"",methods:[{name:"onToggle",docblock:null,modifiers:[],params:[{name:"isOpen",type:null}],returns:null},{name:"renderToggle",docblock:"Render callback to display Dropdown toggle element.\n\n@param {Object}   options\n@param {Function} options.onToggle Callback to invoke when toggle is\n                                   pressed.\n@param {boolean}  options.isOpen   Whether dropdown is currently open.\n\n@return {WPElement} Dropdown toggle element.",modifiers:[],params:[{name:"_ref2"}],returns:{description:"Dropdown toggle element.",type:{name:"WPElement"}},description:"Render callback to display Dropdown toggle element."},{name:"renderContent",docblock:"Render callback to display Dropdown content element.\n\n@param {Object}   options\n@param {Function} options.onClose Callback to invoke when dropdown is\n                                  closed.\n\n@return {WPElement} Dropdown content element.",modifiers:[],params:[{name:"_ref3"}],returns:{description:"Dropdown content element.",type:{name:"WPElement"}},description:"Render callback to display Dropdown content element."}],displayName:"Inserter"};var inserter=(0,compose.Z)([(0,with_select.Z)(((select,_ref4)=>{var _getBlockVariations;let{clientId:clientId,rootClientId:rootClientId}=_ref4;const{getBlockRootClientId:getBlockRootClientId,hasInserterItems:hasInserterItems,__experimentalGetAllowedBlocks:__experimentalGetAllowedBlocks,__experimentalGetDirectInsertBlock:__experimentalGetDirectInsertBlock,getSettings:getSettings}=select(store),{getBlockVariations:getBlockVariations}=select(build_module.h);rootClientId=rootClientId||getBlockRootClientId(clientId)||void 0;const allowedBlocks=__experimentalGetAllowedBlocks(rootClientId),directInsertBlock=__experimentalGetDirectInsertBlock(rootClientId),settings=getSettings(),hasSingleBlockType=1===(null==allowedBlocks?void 0:allowedBlocks.length)&&0===(null===(_getBlockVariations=getBlockVariations(allowedBlocks[0].name,"inserter"))||void 0===_getBlockVariations?void 0:_getBlockVariations.length);let allowedBlockType=!1;return hasSingleBlockType&&(allowedBlockType=allowedBlocks[0]),{hasItems:hasInserterItems(rootClientId),hasSingleBlockType:hasSingleBlockType,blockTitle:allowedBlockType?allowedBlockType.title:"",allowedBlockType:allowedBlockType,directInsertBlock:directInsertBlock,rootClientId:rootClientId,prioritizePatterns:settings.__experimentalPreferPatternsOnRoot&&!rootClientId}})),(0,with_dispatch.Z)(((dispatch,ownProps,_ref5)=>{let{select:select}=_ref5;return{insertOnlyAllowedBlock(){const{rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,hasSingleBlockType:hasSingleBlockType,allowedBlockType:allowedBlockType,directInsertBlock:directInsertBlock,onSelectOrClose:onSelectOrClose,selectBlockOnInsert:selectBlockOnInsert}=ownProps;if(!hasSingleBlockType&&!directInsertBlock)return;const{insertBlock:insertBlock}=dispatch(store);let blockToInsert;if(directInsertBlock){const newAttributes=function getAdjacentBlockAttributes(attributesToCopy){const{getBlock:getBlock,getPreviousBlockClientId:getPreviousBlockClientId}=select(store);if(!attributesToCopy||!clientId&&!rootClientId)return{};const result={};let adjacentAttributes={};if(clientId){const currentBlock=getBlock(clientId),previousBlock=getBlock(getPreviousBlockClientId(clientId));(null==currentBlock?void 0:currentBlock.name)===(null==previousBlock?void 0:previousBlock.name)&&(adjacentAttributes=(null==previousBlock?void 0:previousBlock.attributes)||{})}else{var _parentBlock$innerBlo;const parentBlock=getBlock(rootClientId);if(null!=parentBlock&&null!==(_parentBlock$innerBlo=parentBlock.innerBlocks)&&void 0!==_parentBlock$innerBlo&&_parentBlock$innerBlo.length){const lastInnerBlock=parentBlock.innerBlocks[parentBlock.innerBlocks.length-1];directInsertBlock&&(null==directInsertBlock?void 0:directInsertBlock.name)===lastInnerBlock.name&&(adjacentAttributes=lastInnerBlock.attributes)}}return attributesToCopy.forEach((attribute=>{adjacentAttributes.hasOwnProperty(attribute)&&(result[attribute]=adjacentAttributes[attribute])})),result}(directInsertBlock.attributesToCopy);blockToInsert=(0,build_module.j4)(directInsertBlock.name,{...directInsertBlock.attributes||{},...newAttributes})}else blockToInsert=(0,build_module.j4)(allowedBlockType.name);var _blockToInsert;(insertBlock(blockToInsert,function getInsertionIndex(){const{getBlockIndex:getBlockIndex,getBlockSelectionEnd:getBlockSelectionEnd,getBlockOrder:getBlockOrder,getBlockRootClientId:getBlockRootClientId}=select(store);if(clientId)return getBlockIndex(clientId);const end=getBlockSelectionEnd();return!isAppender&&end&&getBlockRootClientId(end)===rootClientId?getBlockIndex(end)+1:getBlockOrder(rootClientId).length}(),rootClientId,selectBlockOnInsert),onSelectOrClose)&&onSelectOrClose({clientId:null===(_blockToInsert=blockToInsert)||void 0===_blockToInsert?void 0:_blockToInsert.clientId});const message=(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s block added"),allowedBlockType.title);(0,a11y_build_module.D)(message)}}})),(0,if_condition.Z)((_ref6=>{let{hasItems:hasItems,isAppender:isAppender,rootClientId:rootClientId,clientId:clientId}=_ref6;return hasItems||!isAppender&&!rootClientId&&!clientId}))])(Inserter);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/build-module/components/inserter/index.js"]={name:"Inserter",docgenInfo:Inserter.__docgenInfo,path:"packages/block-editor/build-module/components/inserter/index.js"});var default_block_appender=(0,compose.Z)((0,with_select.Z)(((select,ownProps)=>{const{getBlockCount:getBlockCount,getSettings:getSettings,getTemplateLock:getTemplateLock}=select(store),isEmpty=!getBlockCount(ownProps.rootClientId),{bodyPlaceholder:bodyPlaceholder}=getSettings();return{showPrompt:isEmpty,isLocked:!!getTemplateLock(ownProps.rootClientId),placeholder:bodyPlaceholder}})),(0,with_dispatch.Z)(((dispatch,ownProps)=>{const{insertDefaultBlock:insertDefaultBlock,startTyping:startTyping}=dispatch(store);return{onAppend(){const{rootClientId:rootClientId}=ownProps;insertDefaultBlock(void 0,rootClientId),startTyping()}}})))((function DefaultBlockAppender(_ref){let{isLocked:isLocked,onAppend:onAppend,showPrompt:showPrompt,placeholder:placeholder,rootClientId:rootClientId}=_ref;if(isLocked)return null;const value=(0,html_entities_build_module.S)(placeholder)||(0,i18n_build_module.__)("Type / to choose a block");return(0,react.createElement)("div",{"data-root-client-id":rootClientId||"",className:classnames_default()("block-editor-default-block-appender",{"has-visible-prompt":showPrompt})},(0,react.createElement)("p",{tabIndex:"0",role:"button","aria-label":(0,i18n_build_module.__)("Add default block"),className:"block-editor-default-block-appender__content",onKeyDown:event=>{keycodes_build_module.K5!==event.keyCode&&keycodes_build_module.L_!==event.keyCode||onAppend()},onClick:()=>onAppend(),onFocus:()=>{showPrompt&&onAppend()}},showPrompt?value:"\ufeff"),(0,react.createElement)(inserter,{rootClientId:rootClientId,position:"bottom right",isAppender:!0,__experimentalIsQuick:!0}))}));function ButtonBlockAppender(_ref,ref){let{rootClientId:rootClientId,className:className,onFocus:onFocus,tabIndex:tabIndex}=_ref;return(0,react.createElement)(inserter,{position:"bottom center",rootClientId:rootClientId,__experimentalIsQuick:!0,renderToggle:_ref2=>{let label,{onToggle:onToggle,disabled:disabled,isOpen:isOpen,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType}=_ref2;label=hasSingleBlockType?(0,i18n_build_module.gB)((0,i18n_build_module._x)("Add %s","directly add the only allowed block"),blockTitle):(0,i18n_build_module._x)("Add block","Generic label for block inserter button");const isToggleButton=!hasSingleBlockType;let inserterButton=(0,react.createElement)(build_module_button.Z,{ref:ref,onFocus:onFocus,tabIndex:tabIndex,className:classnames_default()(className,"block-editor-button-block-appender"),onClick:onToggle,"aria-haspopup":isToggleButton?"true":void 0,"aria-expanded":isToggleButton?isOpen:void 0,disabled:disabled,label:label},!hasSingleBlockType&&(0,react.createElement)(visually_hidden_component.Z,{as:"span"},label),(0,react.createElement)(build_module_icon.Z,{icon:plus.Z}));return(isToggleButton||hasSingleBlockType)&&(inserterButton=(0,react.createElement)(tooltip.Z,{text:label},inserterButton)),inserterButton},isAppender:!0})}(0,react.forwardRef)(((props,ref)=>((0,deprecated_build_module.Z)("wp.blockEditor.ButtonBlockerAppender",{alternative:"wp.blockEditor.ButtonBlockAppender",since:"5.9"}),ButtonBlockAppender(props,ref))));var button_block_appender=(0,react.forwardRef)(ButtonBlockAppender);var block_list_appender=function BlockListAppender(_ref){let{rootClientId:rootClientId,renderAppender:CustomAppender,className:className,tagName:TagName="div"}=_ref;const{hideInserter:hideInserter,canInsertDefaultBlock:canInsertDefaultBlock,selectedBlockClientId:selectedBlockClientId}=(0,use_select.Z)((select=>{const{canInsertBlockType:canInsertBlockType,getTemplateLock:getTemplateLock,getSelectedBlockClientId:getSelectedBlockClientId,__unstableGetEditorMode:__unstableGetEditorMode}=select(store);return{hideInserter:!!getTemplateLock(rootClientId)||"zoom-out"===__unstableGetEditorMode(),canInsertDefaultBlock:canInsertBlockType((0,build_module.UT)(),rootClientId),selectedBlockClientId:getSelectedBlockClientId()}}),[rootClientId]);if(hideInserter||!1===CustomAppender)return null;let appender;if(CustomAppender)appender=(0,react.createElement)(CustomAppender,null);else{if(!(selectedBlockClientId===rootClientId||!rootClientId&&!selectedBlockClientId))return null;appender=canInsertDefaultBlock?(0,react.createElement)(default_block_appender,{rootClientId:rootClientId}):(0,react.createElement)(button_block_appender,{rootClientId:rootClientId,className:"block-list-appender__toggle"})}return(0,react.createElement)(TagName,{tabIndex:-1,className:classnames_default()("block-list-appender wp-block",className),contentEditable:!1,"data-block":!0},appender)},motion=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion.mjs");const inbetween_MAX_POPOVER_RECOMPUTE_COUNTER=Number.MAX_SAFE_INTEGER;(0,react.createContext)();var inbetween=function BlockPopoverInbetween(_ref){let{previousClientId:previousClientId,nextClientId:nextClientId,children:children,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,...props}=_ref;const[popoverRecomputeCounter,forcePopoverRecompute]=(0,react.useReducer)((s=>(s+1)%inbetween_MAX_POPOVER_RECOMPUTE_COUNTER),0),{orientation:orientation,rootClientId:rootClientId,isVisible:isVisible}=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlockListSettings:getBlockListSettings,getBlockRootClientId:getBlockRootClientId,isBlockVisible:isBlockVisible}=select(store),_rootClientId=getBlockRootClientId(null!=previousClientId?previousClientId:nextClientId);return{orientation:(null===(_getBlockListSettings=getBlockListSettings(_rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation)||"vertical",rootClientId:_rootClientId,isVisible:isBlockVisible(previousClientId)&&isBlockVisible(nextClientId)}}),[previousClientId,nextClientId]),previousElement=useBlockElement(previousClientId),nextElement=useBlockElement(nextClientId),isVertical="vertical"===orientation,style=(0,react.useMemo)((()=>{if(popoverRecomputeCounter<0||!previousElement&&!nextElement||!isVisible)return{};const previousRect=previousElement?previousElement.getBoundingClientRect():null,nextRect=nextElement?nextElement.getBoundingClientRect():null;if(isVertical)return{width:previousRect?previousRect.width:nextRect.width,height:nextRect&&previousRect?nextRect.top-previousRect.bottom:0};let width=0;return previousRect&&nextRect&&(width=(0,i18n_build_module.dZ)()?previousRect.left-nextRect.right:nextRect.left-previousRect.right),{width:width,height:previousRect?previousRect.height:nextRect.height}}),[previousElement,nextElement,isVertical,popoverRecomputeCounter,isVisible]),popoverAnchor=(0,react.useMemo)((()=>{if(popoverRecomputeCounter<0||!previousElement&&!nextElement||!isVisible)return;const{ownerDocument:ownerDocument}=previousElement||nextElement;return{ownerDocument:ownerDocument,getBoundingClientRect(){const previousRect=previousElement?previousElement.getBoundingClientRect():null,nextRect=nextElement?nextElement.getBoundingClientRect():null;let left=0,top=0;return isVertical?(top=previousRect?previousRect.bottom:nextRect.top,left=(0,i18n_build_module.dZ)()?previousRect?previousRect.right:nextRect.right:previousRect?previousRect.left:nextRect.left):(top=previousRect?previousRect.top:nextRect.top,left=(0,i18n_build_module.dZ)()?previousRect?previousRect.left:nextRect.right:previousRect?previousRect.right:nextRect.left),new window.DOMRect(left,top,0,0)}}}),[previousElement,nextElement,popoverRecomputeCounter,isVertical,isVisible]),popoverScrollRef=use_popover_scroll(__unstableContentRef);return(0,react.useLayoutEffect)((()=>{if(!previousElement)return;const observer=new window.MutationObserver(forcePopoverRecompute);return observer.observe(previousElement,{attributes:!0}),()=>{observer.disconnect()}}),[previousElement]),(0,react.useLayoutEffect)((()=>{if(!nextElement)return;const observer=new window.MutationObserver(forcePopoverRecompute);return observer.observe(nextElement,{attributes:!0}),()=>{observer.disconnect()}}),[nextElement]),(0,react.useLayoutEffect)((()=>{if(previousElement)return previousElement.ownerDocument.defaultView.addEventListener("resize",forcePopoverRecompute),()=>{var _previousElement$owne;null===(_previousElement$owne=previousElement.ownerDocument.defaultView)||void 0===_previousElement$owne||_previousElement$owne.removeEventListener("resize",forcePopoverRecompute)}}),[previousElement]),(previousElement||nextElement)&&isVisible?(0,react.createElement)(popover.Z,(0,esm_extends.Z)({ref:popoverScrollRef,animate:!1,anchor:popoverAnchor,focusOnMount:!1,__unstableSlotName:__unstablePopoverSlot||null,key:nextClientId+"--"+rootClientId},props,{className:classnames_default()("block-editor-block-popover","block-editor-block-popover__inbetween",props.className),resize:!1,flip:!1,placement:"bottom-start",variant:"unstyled"}),(0,react.createElement)("div",{className:"block-editor-block-popover__inbetween-container",style:style},children)):null};const animateVariants={hide:{opacity:0,scaleY:.75},show:{opacity:1,scaleY:1},exit:{opacity:0,scaleY:.9}};var drop_zone=function BlockDropZonePopover(_ref){let{__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref;const{clientId:clientId}=(0,use_select.Z)((select=>{const{getBlockOrder:getBlockOrder,getBlockInsertionPoint:getBlockInsertionPoint}=select(store),insertionPoint=getBlockInsertionPoint(),order=getBlockOrder(insertionPoint.rootClientId);return order.length?{clientId:order[insertionPoint.index]}:{}}),[]),reducedMotion=(0,use_reduced_motion.Z)();return(0,react.createElement)(block_popover,{clientId:clientId,__unstableCoverTarget:!0,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,className:"block-editor-block-popover__drop-zone"},(0,react.createElement)(motion.E.div,{"data-testid":"block-popover-drop-zone",initial:reducedMotion?animateVariants.show:animateVariants.hide,animate:animateVariants.show,exit:reducedMotion?animateVariants.show:animateVariants.exit,className:"block-editor-block-popover__drop-zone-foreground"}))};const insertion_point_InsertionPointOpenRef=(0,react.createContext)();function InbetweenInsertionPointPopover(_ref){let{__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref;const{selectBlock:selectBlock,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store),openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),ref=(0,react.useRef)(),{orientation:orientation,previousClientId:previousClientId,nextClientId:nextClientId,rootClientId:rootClientId,isInserterShown:isInserterShown,isDistractionFree:isDistractionFree,isNavigationMode:isNavigationMode}=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlockOrder:getBlockOrder,getBlockListSettings:getBlockListSettings,getBlockInsertionPoint:getBlockInsertionPoint,isBlockBeingDragged:isBlockBeingDragged,getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId,getSettings:getSettings,isNavigationMode:_isNavigationMode}=select(store),insertionPoint=getBlockInsertionPoint(),order=getBlockOrder(insertionPoint.rootClientId);if(!order.length)return{};let _previousClientId=order[insertionPoint.index-1],_nextClientId=order[insertionPoint.index];for(;isBlockBeingDragged(_previousClientId);)_previousClientId=getPreviousBlockClientId(_previousClientId);for(;isBlockBeingDragged(_nextClientId);)_nextClientId=getNextBlockClientId(_nextClientId);const settings=getSettings();return{previousClientId:_previousClientId,nextClientId:_nextClientId,orientation:(null===(_getBlockListSettings=getBlockListSettings(insertionPoint.rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation)||"vertical",rootClientId:insertionPoint.rootClientId,isNavigationMode:_isNavigationMode(),isDistractionFree:settings.isDistractionFree,isInserterShown:null==insertionPoint?void 0:insertionPoint.__unstableWithInserter}}),[]),disableMotion=(0,use_reduced_motion.Z)();const lineVariants={start:{opacity:0,scale:0},rest:{opacity:1,scale:1,transition:{delay:isInserterShown?.5:0,type:"tween"}},hover:{opacity:1,scale:1,transition:{delay:.5,type:"tween"}}},inserterVariants={start:{scale:disableMotion?1:0},rest:{scale:1,transition:{delay:.4,type:"tween"}}};if(isDistractionFree&&!isNavigationMode)return null;const className=classnames_default()("block-editor-block-list__insertion-point","is-"+orientation);return(0,react.createElement)(inbetween,{previousClientId:previousClientId,nextClientId:nextClientId,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef},(0,react.createElement)(motion.E.div,{layout:!disableMotion,initial:disableMotion?"rest":"start",animate:"rest",whileHover:"hover",whileTap:"pressed",exit:"start",ref:ref,tabIndex:-1,onClick:function onClick(event){event.target===ref.current&&nextClientId&&selectBlock(nextClientId,-1)},onFocus:function onFocus(event){event.target!==ref.current&&(openRef.current=!0)},className:classnames_default()(className,{"is-with-inserter":isInserterShown}),onHoverEnd:function maybeHideInserterPoint(event){event.target!==ref.current||openRef.current||hideInsertionPoint()}},(0,react.createElement)(motion.E.div,{variants:lineVariants,className:"block-editor-block-list__insertion-point-indicator","data-testid":"block-list-insertion-point-indicator"}),isInserterShown&&(0,react.createElement)(motion.E.div,{variants:inserterVariants,className:classnames_default()("block-editor-block-list__insertion-point-inserter")},(0,react.createElement)(inserter,{position:"bottom center",clientId:nextClientId,rootClientId:rootClientId,__experimentalIsQuick:!0,onToggle:isOpen=>{openRef.current=isOpen},onSelectOrClose:()=>{openRef.current=!1}}))))}function InsertionPoint(props){const{insertionPoint:insertionPoint,isVisible:isVisible}=(0,use_select.Z)((select=>{const{getBlockInsertionPoint:getBlockInsertionPoint,isBlockInsertionPointVisible:isBlockInsertionPointVisible}=select(store);return{insertionPoint:getBlockInsertionPoint(),isVisible:isBlockInsertionPointVisible()}}),[]);return isVisible?"replace"===insertionPoint.operation?(0,react.createElement)(drop_zone,(0,esm_extends.Z)({key:`${insertionPoint.rootClientId}-${insertionPoint.index}`},props)):(0,react.createElement)(InbetweenInsertionPointPopover,props):null}function useInBetweenInserter(){const openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),isInBetweenInserterDisabled=(0,use_select.Z)((select=>select(store).getSettings().isDistractionFree||"zoom-out"===select(store).__unstableGetEditorMode()),[]),{getBlockListSettings:getBlockListSettings,getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex,isBlockInsertionPointVisible:isBlockInsertionPointVisible,isMultiSelecting:isMultiSelecting,getSelectedBlockClientIds:getSelectedBlockClientIds,getTemplateLock:getTemplateLock,__unstableIsWithinBlockOverlay:__unstableIsWithinBlockOverlay}=(0,use_select.Z)(store),{showInsertionPoint:showInsertionPoint,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store);return(0,use_ref_effect.Z)((node=>{if(!isInBetweenInserterDisabled)return node.addEventListener("mousemove",onMouseMove),()=>{node.removeEventListener("mousemove",onMouseMove)};function onMouseMove(event){var _getBlockListSettings;if(openRef.current)return;if(isMultiSelecting())return;if(!event.target.classList.contains("block-editor-block-list__layout"))return void hideInsertionPoint();let rootClientId;if(!event.target.classList.contains("is-root-container")){rootClientId=(event.target.getAttribute("data-block")?event.target:event.target.closest("[data-block]")).getAttribute("data-block")}if(getTemplateLock(rootClientId))return;const orientation=(null===(_getBlockListSettings=getBlockListSettings(rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation)||"vertical",offsetTop=event.clientY,offsetLeft=event.clientX;let element=Array.from(event.target.children).find((blockEl=>{const blockElRect=blockEl.getBoundingClientRect();return blockEl.classList.contains("wp-block")&&"vertical"===orientation&&blockElRect.top>offsetTop||blockEl.classList.contains("wp-block")&&"horizontal"===orientation&&blockElRect.left>offsetLeft}));if(!element)return void hideInsertionPoint();if(!element.id&&(element=element.firstElementChild,!element))return void hideInsertionPoint();const clientId=element.id.slice("block-".length);if(!clientId||__unstableIsWithinBlockOverlay(clientId))return;if(getSelectedBlockClientIds().includes(clientId))return;const elementRect=element.getBoundingClientRect();if("horizontal"===orientation&&(event.clientY>elementRect.bottom||event.clientY<elementRect.top)||"vertical"===orientation&&(event.clientX>elementRect.right||event.clientX<elementRect.left))return void hideInsertionPoint();const index=getBlockIndex(clientId);0!==index?showInsertionPoint(rootClientId,index,{__unstableWithInserter:!0}):hideInsertionPoint()}}),[openRef,getBlockListSettings,getBlockRootClientId,getBlockIndex,isBlockInsertionPointVisible,isMultiSelecting,showInsertionPoint,hideInsertionPoint,getSelectedBlockClientIds,isInBetweenInserterDisabled])}const requestIdleCallback="undefined"==typeof window?callback=>{setTimeout((()=>callback(Date.now())),0)}:window.requestIdleCallback||window.requestAnimationFrame,cancelIdleCallback="undefined"==typeof window?clearTimeout:window.cancelIdleCallback||window.cancelAnimationFrame;function useBlockDisplayInformation(clientId){return(0,use_select.Z)((select=>{if(!clientId)return null;const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(store),{getBlockType:getBlockType,getActiveBlockVariation:getActiveBlockVariation}=select(build_module.h),blockName=getBlockName(clientId),blockType=getBlockType(blockName);if(!blockType)return null;const attributes=getBlockAttributes(clientId),match=getActiveBlockVariation(blockName,attributes),isSynced=(0,build_module.vr)(blockType)||(0,build_module.zQ)(blockType),blockTypeInfo={isSynced:isSynced,title:blockType.title,icon:blockType.icon,description:blockType.description,anchor:null==attributes?void 0:attributes.anchor};return match?{isSynced:isSynced,title:match.title||blockType.title,icon:match.icon||blockType.icon,description:match.description||blockType.description,anchor:null==attributes?void 0:attributes.anchor}:blockTypeInfo}),[clientId])}function useBlockDisplayTitle(_ref){let{clientId:clientId,maximumLength:maximumLength,context:context}=_ref;const{attributes:attributes,name:name,reusableBlockTitle:reusableBlockTitle}=(0,use_select.Z)((select=>{if(!clientId)return{};const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes,__experimentalGetReusableBlockTitle:__experimentalGetReusableBlockTitle}=select(store),blockName=getBlockName(clientId);if(!blockName)return{};const isReusable=(0,build_module.vr)((0,build_module.ck)(blockName));return{attributes:getBlockAttributes(clientId),name:blockName,reusableBlockTitle:isReusable&&__experimentalGetReusableBlockTitle(getBlockAttributes(clientId).ref)}}),[clientId]),blockInformation=useBlockDisplayInformation(clientId);if(!name||!blockInformation)return null;const blockType=(0,build_module.ck)(name),blockLabel=blockType?(0,build_module.Iu)(blockType,attributes,context):null,label=reusableBlockTitle||blockLabel,blockTitle=label&&label!==blockType.title?label:blockInformation.title;if(maximumLength&&maximumLength>0&&blockTitle.length>maximumLength){const omission="...";return blockTitle.slice(0,maximumLength-omission.length)+omission}return blockTitle}function BlockTitle(_ref){let{clientId:clientId,maximumLength:maximumLength,context:context}=_ref;return useBlockDisplayTitle({clientId:clientId,maximumLength:maximumLength,context:context})}var block_draggable=_ref=>{let{children:children,clientIds:clientIds,cloneClassname:cloneClassname,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref;const{srcRootClientId:srcRootClientId,isDraggable:isDraggable,icon:icon}=(0,use_select.Z)((select=>{var _getBlockType;const{canMoveBlocks:canMoveBlocks,getBlockRootClientId:getBlockRootClientId,getBlockName:getBlockName}=select(store),rootClientId=getBlockRootClientId(clientIds[0]),blockName=getBlockName(clientIds[0]);return{srcRootClientId:rootClientId,isDraggable:canMoveBlocks(clientIds,rootClientId),icon:null===(_getBlockType=(0,build_module.ck)(blockName))||void 0===_getBlockType?void 0:_getBlockType.icon}}),[clientIds]),isDragging=(0,react.useRef)(!1),[startScrolling,scrollOnDragOver,stopScrolling]=function useScrollWhenDragging(){const dragStartY=(0,react.useRef)(null),velocityY=(0,react.useRef)(null),scrollParentY=(0,react.useRef)(null),scrollEditorInterval=(0,react.useRef)(null);return(0,react.useEffect)((()=>()=>{scrollEditorInterval.current&&(clearInterval(scrollEditorInterval.current),scrollEditorInterval.current=null)}),[]),[(0,react.useCallback)((event=>{dragStartY.current=event.clientY,scrollParentY.current=(0,get_scroll_container.Z)(event.target),scrollEditorInterval.current=setInterval((()=>{if(scrollParentY.current&&velocityY.current){const newTop=scrollParentY.current.scrollTop+velocityY.current;scrollParentY.current.scroll({top:newTop})}}),25)}),[]),(0,react.useCallback)((event=>{if(!scrollParentY.current)return;const scrollParentHeight=scrollParentY.current.offsetHeight,offsetDragStartPosition=dragStartY.current-scrollParentY.current.offsetTop,offsetDragPosition=event.clientY-scrollParentY.current.offsetTop;if(event.clientY>offsetDragStartPosition){const moveableDistance=Math.max(scrollParentHeight-offsetDragStartPosition-50,0),distancePercentage=Math.max(offsetDragPosition-offsetDragStartPosition-50,0)/moveableDistance;velocityY.current=25*distancePercentage}else if(event.clientY<offsetDragStartPosition){const moveableDistance=Math.max(offsetDragStartPosition-50,0),distancePercentage=Math.max(offsetDragStartPosition-offsetDragPosition-50,0)/moveableDistance;velocityY.current=-25*distancePercentage}else velocityY.current=0}),[]),()=>{dragStartY.current=null,scrollParentY.current=null,scrollEditorInterval.current&&(clearInterval(scrollEditorInterval.current),scrollEditorInterval.current=null)}]}(),{startDraggingBlocks:startDraggingBlocks,stopDraggingBlocks:stopDraggingBlocks}=(0,use_dispatch.Z)(store);if((0,react.useEffect)((()=>()=>{isDragging.current&&stopDraggingBlocks()}),[]),!isDraggable)return children({draggable:!1});const transferData={type:"block",srcClientIds:clientIds,srcRootClientId:srcRootClientId};return(0,react.createElement)(draggable.Z,{cloneClassname:cloneClassname,__experimentalTransferDataType:"wp-blocks",transferData:transferData,onDragStart:event=>{startDraggingBlocks(clientIds),isDragging.current=!0,startScrolling(event),onDragStart&&onDragStart()},onDragOver:scrollOnDragOver,onDragEnd:()=>{stopDraggingBlocks(),isDragging.current=!1,stopScrolling(),onDragEnd&&onDragEnd()},__experimentalDragComponent:(0,react.createElement)(BlockDraggableChip,{count:clientIds.length,icon:icon})},(_ref2=>{let{onDraggableStart:onDraggableStart,onDraggableEnd:onDraggableEnd}=_ref2;return children({draggable:!0,onDragStart:onDraggableStart,onDragEnd:onDraggableEnd})}))},toolbar_item=__webpack_require__("./packages/components/build-module/toolbar-item/index.js"),chevron_up=__webpack_require__("./packages/icons/build-module/library/chevron-up.js"),chevron_down=__webpack_require__("./packages/icons/build-module/library/chevron-down.js");const getMovementDirection=(moveDirection,orientation)=>"up"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.dZ)()?"right":"left":"up":"down"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.dZ)()?"left":"right":"down":null;function getBlockMoverDescription(selectedCount,type,firstIndex,isFirst,isLast,dir,orientation){const position=firstIndex+1;if(selectedCount>1)return function getMultiBlockMoverDescription(selectedCount,firstIndex,isFirst,isLast,dir,orientation){const position=firstIndex+1;if(isFirst&&isLast)return(0,i18n_build_module.__)("All blocks are selected, and cannot be moved");if(dir>0&&!isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d down by one place"),selectedCount,position);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d left by one place"),selectedCount,position);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d right by one place"),selectedCount,position)}if(dir>0&&isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved down as they are already at the bottom");if("left"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved left as they are already are at the leftmost position");if("right"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved right as they are already are at the rightmost position")}if(dir<0&&!isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d up by one place"),selectedCount,position);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d left by one place"),selectedCount,position);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d right by one place"),selectedCount,position)}if(dir<0&&isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved up as they are already at the top");if("left"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved left as they are already are at the leftmost position");if("right"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved right as they are already are at the rightmost position")}}(selectedCount,firstIndex,isFirst,isLast,dir,orientation);if(isFirst&&isLast)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %s is the only block, and cannot be moved"),type);if(dir>0&&!isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d down to position %3$d"),type,position,position+1);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d left to position %3$d"),type,position,position+1);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d right to position %3$d"),type,position,position+1)}if(dir>0&&isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the end of the content and cant be moved down"),type);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the end of the content and cant be moved left"),type);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the end of the content and cant be moved right"),type)}if(dir<0&&!isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d up to position %3$d"),type,position,position-1);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d left to position %3$d"),type,position,position-1);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Move %1$s block from position %2$d right to position %3$d"),type,position,position-1)}if(dir<0&&isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the beginning of the content and cant be moved up"),type);if("left"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the beginning of the content and cant be moved left"),type);if("right"===movementDirection)return(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$s is at the beginning of the content and cant be moved right"),type)}}const getArrowIcon=(direction,orientation)=>"up"===direction?"horizontal"===orientation?(0,i18n_build_module.dZ)()?chevron_right.Z:chevron_left.Z:chevron_up.Z:"down"===direction?"horizontal"===orientation?(0,i18n_build_module.dZ)()?chevron_left.Z:chevron_right.Z:chevron_down.Z:null,getMovementDirectionLabel=(moveDirection,orientation)=>"up"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.dZ)()?(0,i18n_build_module.__)("Move right"):(0,i18n_build_module.__)("Move left"):(0,i18n_build_module.__)("Move up"):"down"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.dZ)()?(0,i18n_build_module.__)("Move left"):(0,i18n_build_module.__)("Move right"):(0,i18n_build_module.__)("Move down"):null,BlockMoverButton=(0,react.forwardRef)(((_ref,ref)=>{let{clientIds:clientIds,direction:direction,orientation:moverOrientation,...props}=_ref;const instanceId=(0,use_instance_id.Z)(BlockMoverButton),normalizedClientIds=Array.isArray(clientIds)?clientIds:[clientIds],blocksCount=normalizedClientIds.length,{blockType:blockType,isDisabled:isDisabled,rootClientId:rootClientId,isFirst:isFirst,isLast:isLast,firstIndex:firstIndex,orientation:orientation="vertical"}=(0,use_select.Z)((select=>{const{getBlockIndex:getBlockIndex,getBlockRootClientId:getBlockRootClientId,getBlockOrder:getBlockOrder,getBlock:getBlock,getBlockListSettings:getBlockListSettings}=select(store),firstClientId=normalizedClientIds[0],blockRootClientId=getBlockRootClientId(firstClientId),firstBlockIndex=getBlockIndex(firstClientId),lastBlockIndex=getBlockIndex(normalizedClientIds[normalizedClientIds.length-1]),blockOrder=getBlockOrder(blockRootClientId),block=getBlock(firstClientId),isFirstBlock=0===firstBlockIndex,isLastBlock=lastBlockIndex===blockOrder.length-1,{orientation:blockListOrientation}=getBlockListSettings(blockRootClientId)||{};return{blockType:block?(0,build_module.ck)(block.name):null,isDisabled:"up"===direction?isFirstBlock:isLastBlock,rootClientId:blockRootClientId,firstIndex:firstBlockIndex,isFirst:isFirstBlock,isLast:isLastBlock,orientation:moverOrientation||blockListOrientation}}),[clientIds,direction]),{moveBlocksDown:moveBlocksDown,moveBlocksUp:moveBlocksUp}=(0,use_dispatch.Z)(store),moverFunction="up"===direction?moveBlocksUp:moveBlocksDown,descriptionId=`block-editor-block-mover-button__description-${instanceId}`;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({ref:ref,className:classnames_default()("block-editor-block-mover-button",`is-${direction}-button`),icon:getArrowIcon(direction,orientation),label:getMovementDirectionLabel(direction,orientation),"aria-describedby":descriptionId},props,{onClick:isDisabled?null:event=>{moverFunction(clientIds,rootClientId),props.onClick&&props.onClick(event)},disabled:isDisabled,__experimentalIsFocusable:!0})),(0,react.createElement)(visually_hidden_component.Z,{id:descriptionId},getBlockMoverDescription(blocksCount,blockType&&blockType.title,firstIndex,isFirst,isLast,"up"===direction?-1:1,orientation)))})),BlockMoverUpButton=(0,react.forwardRef)(((props,ref)=>(0,react.createElement)(BlockMoverButton,(0,esm_extends.Z)({direction:"up",ref:ref},props)))),BlockMoverDownButton=(0,react.forwardRef)(((props,ref)=>(0,react.createElement)(BlockMoverButton,(0,esm_extends.Z)({direction:"down",ref:ref},props))));var block_mover=function BlockMover(_ref){let{clientIds:clientIds,hideDragHandle:hideDragHandle}=_ref;const{canMove:canMove,rootClientId:rootClientId,isFirst:isFirst,isLast:isLast,orientation:orientation}=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlockIndex:getBlockIndex,getBlockListSettings:getBlockListSettings,canMoveBlocks:canMoveBlocks,getBlockOrder:getBlockOrder,getBlockRootClientId:getBlockRootClientId}=select(store),normalizedClientIds=Array.isArray(clientIds)?clientIds:[clientIds],firstClientId=normalizedClientIds[0],_rootClientId=getBlockRootClientId(firstClientId),firstIndex=getBlockIndex(firstClientId),lastIndex=getBlockIndex(normalizedClientIds[normalizedClientIds.length-1]),blockOrder=getBlockOrder(_rootClientId);return{canMove:canMoveBlocks(clientIds,_rootClientId),rootClientId:_rootClientId,isFirst:0===firstIndex,isLast:lastIndex===blockOrder.length-1,orientation:null===(_getBlockListSettings=getBlockListSettings(_rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation}}),[clientIds]);if(!canMove||isFirst&&isLast&&!rootClientId)return null;const dragHandleLabel=(0,i18n_build_module.__)("Drag");return(0,react.createElement)(toolbar_group.Z,{className:classnames_default()("block-editor-block-mover",{"is-horizontal":"horizontal"===orientation})},!hideDragHandle&&(0,react.createElement)(block_draggable,{clientIds:clientIds},(draggableProps=>(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({icon:drag_handle.Z,className:"block-editor-block-mover__drag-handle","aria-hidden":"true",label:dragHandleLabel,tabIndex:"-1"},draggableProps)))),(0,react.createElement)("div",{className:"block-editor-block-mover__move-button-container"},(0,react.createElement)(toolbar_item.Z,null,(itemProps=>(0,react.createElement)(BlockMoverUpButton,(0,esm_extends.Z)({clientIds:clientIds},itemProps)))),(0,react.createElement)(toolbar_item.Z,null,(itemProps=>(0,react.createElement)(BlockMoverDownButton,(0,esm_extends.Z)({clientIds:clientIds},itemProps))))))};var block_selection_button=function BlockSelectionButton(_ref){let{clientId:clientId,rootClientId:rootClientId}=_ref;const blockInformation=useBlockDisplayInformation(clientId),selected=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlock:getBlock,getBlockIndex:getBlockIndex,hasBlockMovingClientId:hasBlockMovingClientId,getBlockListSettings:getBlockListSettings,__unstableGetEditorMode:__unstableGetEditorMode}=select(store),index=getBlockIndex(clientId),{name:name,attributes:attributes}=getBlock(clientId);return{index:index,name:name,attributes:attributes,blockMovingMode:hasBlockMovingClientId(),orientation:null===(_getBlockListSettings=getBlockListSettings(rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation,editorMode:__unstableGetEditorMode()}}),[clientId,rootClientId]),{index:index,name:name,attributes:attributes,blockMovingMode:blockMovingMode,orientation:orientation,editorMode:editorMode}=selected,{setNavigationMode:setNavigationMode,removeBlock:removeBlock}=(0,use_dispatch.Z)(store),ref=(0,react.useRef)(),blockType=(0,build_module.ck)(name),label=(0,build_module.DK)(blockType,attributes,index+1,orientation);(0,react.useEffect)((()=>{ref.current.focus(),(0,a11y_build_module.D)(label)}),[label]);const blockElement=useBlockElement(clientId),{hasBlockMovingClientId:hasBlockMovingClientId,getBlockIndex:getBlockIndex,getBlockRootClientId:getBlockRootClientId,getClientIdsOfDescendants:getClientIdsOfDescendants,getSelectedBlockClientId:getSelectedBlockClientId,getMultiSelectedBlocksEndClientId:getMultiSelectedBlocksEndClientId,getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId}=(0,use_select.Z)(store),{selectBlock:selectBlock,clearSelectedBlock:clearSelectedBlock,setBlockMovingClientId:setBlockMovingClientId,moveBlockToPosition:moveBlockToPosition}=(0,use_dispatch.Z)(store),classNames=classnames_default()("block-editor-block-list__block-selection-button",{"is-block-moving-mode":!!blockMovingMode}),dragHandleLabel=(0,i18n_build_module.__)("Drag");return(0,react.createElement)("div",{className:classNames},(0,react.createElement)(component.Z,{justify:"center",className:"block-editor-block-list__block-selection-button__content"},(0,react.createElement)(flex_item_component.Z,null,(0,react.createElement)(block_icon,{icon:null==blockInformation?void 0:blockInformation.icon,showColors:!0})),(0,react.createElement)(flex_item_component.Z,null,"zoom-out"===editorMode&&(0,react.createElement)(block_mover,{clientIds:[clientId],hideDragHandle:!0}),"navigation"===editorMode&&(0,react.createElement)(block_draggable,{clientIds:[clientId]},(draggableProps=>(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({icon:drag_handle.Z,className:"block-selection-button_drag-handle","aria-hidden":"true",label:dragHandleLabel,tabIndex:"-1"},draggableProps))))),(0,react.createElement)(flex_item_component.Z,null,(0,react.createElement)(build_module_button.Z,{ref:ref,onClick:"navigation"===editorMode?()=>setNavigationMode(!1):void 0,onKeyDown:function onKeyDown(event){const{keyCode:keyCode}=event,isUp=keyCode===keycodes_build_module.UP,isDown=keyCode===keycodes_build_module.WV,isLeft=keyCode===keycodes_build_module.RL,isRight=keyCode===keycodes_build_module.pX,isTab=keyCode===keycodes_build_module.Mf,isEscape=keyCode===keycodes_build_module.hY,isEnter=keyCode===keycodes_build_module.K5,isSpace=keyCode===keycodes_build_module.L_,isShift=event.shiftKey;if(keyCode===keycodes_build_module.ZH||keyCode===keycodes_build_module.yY)return removeBlock(clientId),void event.preventDefault();const selectedBlockClientId=getSelectedBlockClientId(),selectionEndClientId=getMultiSelectedBlocksEndClientId(),selectionBeforeEndClientId=getPreviousBlockClientId(selectionEndClientId||selectedBlockClientId),selectionAfterEndClientId=getNextBlockClientId(selectionEndClientId||selectedBlockClientId),navigateUp=isTab&&isShift||isUp,navigateDown=isTab&&!isShift||isDown,navigateOut=isLeft,navigateIn=isRight;let focusedBlockUid;if(navigateUp)focusedBlockUid=selectionBeforeEndClientId;else if(navigateDown)focusedBlockUid=selectionAfterEndClientId;else if(navigateOut){var _getBlockRootClientId;focusedBlockUid=null!==(_getBlockRootClientId=getBlockRootClientId(selectedBlockClientId))&&void 0!==_getBlockRootClientId?_getBlockRootClientId:selectedBlockClientId}else if(navigateIn){var _getClientIdsOfDescen;focusedBlockUid=null!==(_getClientIdsOfDescen=getClientIdsOfDescendants([selectedBlockClientId])[0])&&void 0!==_getClientIdsOfDescen?_getClientIdsOfDescen:selectedBlockClientId}const startingBlockClientId=hasBlockMovingClientId();if(isEscape&&startingBlockClientId&&!event.defaultPrevented&&(setBlockMovingClientId(null),event.preventDefault()),(isEnter||isSpace)&&startingBlockClientId){const sourceRoot=getBlockRootClientId(startingBlockClientId),destRoot=getBlockRootClientId(selectedBlockClientId),sourceBlockIndex=getBlockIndex(startingBlockClientId);let destinationBlockIndex=getBlockIndex(selectedBlockClientId);sourceBlockIndex<destinationBlockIndex&&sourceRoot===destRoot&&(destinationBlockIndex-=1),moveBlockToPosition(startingBlockClientId,sourceRoot,destRoot,destinationBlockIndex),selectBlock(startingBlockClientId),setBlockMovingClientId(null)}if(navigateDown||navigateUp||navigateOut||navigateIn)if(focusedBlockUid)event.preventDefault(),selectBlock(focusedBlockUid);else if(isTab&&selectedBlockClientId){let nextTabbable;if(navigateDown){nextTabbable=blockElement;do{nextTabbable=dom_build_module.T_.tabbable.findNext(nextTabbable)}while(nextTabbable&&blockElement.contains(nextTabbable));nextTabbable||(nextTabbable=blockElement.ownerDocument.defaultView.frameElement,nextTabbable=dom_build_module.T_.tabbable.findNext(nextTabbable))}else nextTabbable=dom_build_module.T_.tabbable.findPrevious(blockElement);nextTabbable&&(event.preventDefault(),nextTabbable.focus(),clearSelectedBlock())}},label:label,showTooltip:!1,className:"block-selection-button_select-button"},(0,react.createElement)(BlockTitle,{clientId:clientId,maximumLength:35})))))},toolbar=__webpack_require__("./packages/components/build-module/toolbar/index.js"),navigable_container_menu=__webpack_require__("./packages/components/build-module/navigable-container/menu.js");function getAllToolbarItemsIn(container){return Array.from(container.querySelectorAll("[data-toolbar-item]"))}function useToolbarFocus(ref,focusOnMount,isAccessibleToolbar,defaultIndex,onIndexChange){const[initialFocusOnMount]=(0,react.useState)(focusOnMount),[initialIndex]=(0,react.useState)(defaultIndex),focusToolbar=(0,react.useCallback)((()=>{!function focusFirstTabbableIn(container){const[firstTabbable]=dom_build_module.T_.tabbable.find(container);firstTabbable&&firstTabbable.focus({preventScroll:!0})}(ref.current)}),[]);(0,keyboard_shortcuts_build_module.bx)("core/block-editor/focus-toolbar",focusToolbar),(0,react.useEffect)((()=>{initialFocusOnMount&&focusToolbar()}),[isAccessibleToolbar,initialFocusOnMount,focusToolbar]),(0,react.useEffect)((()=>{let raf=0;return initialIndex&&!initialFocusOnMount&&(raf=window.requestAnimationFrame((()=>{const items=getAllToolbarItemsIn(ref.current),index=initialIndex||0;items[index]&&function hasFocusWithin(container){return container.contains(container.ownerDocument.activeElement)}(ref.current)&&items[index].focus({preventScroll:!0})}))),()=>{if(window.cancelAnimationFrame(raf),!onIndexChange||!ref.current)return;const index=getAllToolbarItemsIn(ref.current).findIndex((item=>0===item.tabIndex));onIndexChange(index)}}),[initialIndex,initialFocusOnMount])}var navigable_toolbar=function NavigableToolbar(_ref){let{children:children,focusOnMount:focusOnMount,__experimentalInitialIndex:initialIndex,__experimentalOnIndexChange:onIndexChange,...props}=_ref;const ref=(0,react.useRef)(),isAccessibleToolbar=function useIsAccessibleToolbar(ref){const[isAccessibleToolbar,setIsAccessibleToolbar]=(0,react.useState)(!0),determineIsAccessibleToolbar=(0,react.useCallback)((()=>{const onlyToolbarItem=function hasOnlyToolbarItem(elements){return!elements.some((element=>!("toolbarItem"in element.dataset)))}(dom_build_module.T_.tabbable.find(ref.current));onlyToolbarItem||(0,deprecated_build_module.Z)("Using custom components as toolbar controls",{since:"5.6",alternative:"ToolbarItem, ToolbarButton or ToolbarDropdownMenu components",link:"https://developer.wordpress.org/block-editor/components/toolbar-button/#inside-blockcontrols"}),setIsAccessibleToolbar(onlyToolbarItem)}),[]);return(0,react.useLayoutEffect)((()=>{const observer=new window.MutationObserver(determineIsAccessibleToolbar);return observer.observe(ref.current,{childList:!0,subtree:!0}),()=>observer.disconnect()}),[isAccessibleToolbar]),isAccessibleToolbar}(ref);return useToolbarFocus(ref,focusOnMount,isAccessibleToolbar,initialIndex,onIndexChange),isAccessibleToolbar?(0,react.createElement)(toolbar.Z,(0,esm_extends.Z)({label:props["aria-label"],ref:ref},props),children):(0,react.createElement)(navigable_container_menu.Z,(0,esm_extends.Z)({orientation:"horizontal",role:"toolbar",ref:ref},props),children)},toolbar_button=__webpack_require__("./packages/components/build-module/toolbar-button/index.js");const{clearTimeout:utils_clearTimeout,setTimeout:utils_setTimeout}=window,utils_noop=()=>{},DEBOUNCE_TIMEOUT=200;function useDebouncedShowMovers(_ref){let{ref:ref,isFocused:isFocused,debounceTimeout:debounceTimeout=DEBOUNCE_TIMEOUT,onChange:onChange=utils_noop}=_ref;const[showMovers,setShowMovers]=(0,react.useState)(!1),timeoutRef=(0,react.useRef)(),handleOnChange=nextIsFocused=>{null!=ref&&ref.current&&setShowMovers(nextIsFocused),onChange(nextIsFocused)},shouldHideMovers=()=>{const isHovered=(null==ref?void 0:ref.current)&&ref.current.matches(":hover");return!isFocused&&!isHovered},clearTimeoutRef=()=>{const timeout=timeoutRef.current;timeout&&utils_clearTimeout&&utils_clearTimeout(timeout)};return(0,react.useEffect)((()=>()=>{handleOnChange(!1),clearTimeoutRef()}),[]),{showMovers:showMovers,debouncedShowMovers:event=>{event&&event.stopPropagation(),clearTimeoutRef(),showMovers||handleOnChange(!0)},debouncedHideMovers:event=>{event&&event.stopPropagation(),clearTimeoutRef(),timeoutRef.current=utils_setTimeout((()=>{shouldHideMovers()&&handleOnChange(!1)}),debounceTimeout)}}}function useShowMoversGestures(_ref2){let{ref:ref,debounceTimeout:debounceTimeout=DEBOUNCE_TIMEOUT,onChange:onChange=utils_noop}=_ref2;const[isFocused,setIsFocused]=(0,react.useState)(!1),{showMovers:showMovers,debouncedShowMovers:debouncedShowMovers,debouncedHideMovers:debouncedHideMovers}=useDebouncedShowMovers({ref:ref,debounceTimeout:debounceTimeout,isFocused:isFocused,onChange:onChange}),registerRef=(0,react.useRef)(!1),isFocusedWithin=()=>(null==ref?void 0:ref.current)&&ref.current.contains(ref.current.ownerDocument.activeElement);return(0,react.useEffect)((()=>{const node=ref.current,handleOnFocus=()=>{isFocusedWithin()&&(setIsFocused(!0),debouncedShowMovers())},handleOnBlur=()=>{isFocusedWithin()||(setIsFocused(!1),debouncedHideMovers())};return node&&!registerRef.current&&(node.addEventListener("focus",handleOnFocus,!0),node.addEventListener("blur",handleOnBlur,!0),registerRef.current=!0),()=>{node&&(node.removeEventListener("focus",handleOnFocus),node.removeEventListener("blur",handleOnBlur))}}),[ref,registerRef,setIsFocused,debouncedShowMovers,debouncedHideMovers]),{showMovers:showMovers,gestures:{onMouseMove:debouncedShowMovers,onMouseLeave:debouncedHideMovers}}}function BlockParentSelector(){const{selectBlock:selectBlock,toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store),{firstParentClientId:firstParentClientId,shouldHide:shouldHide,isDistractionFree:isDistractionFree}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockParents:getBlockParents,getSelectedBlockClientId:getSelectedBlockClientId,getSettings:getSettings}=select(store),{hasBlockSupport:hasBlockSupport}=select(build_module.h),parents=getBlockParents(getSelectedBlockClientId()),_firstParentClientId=parents[parents.length-1],parentBlockName=getBlockName(_firstParentClientId),_parentBlockType=(0,build_module.ck)(parentBlockName),settings=getSettings();return{firstParentClientId:_firstParentClientId,shouldHide:!hasBlockSupport(_parentBlockType,"__experimentalParentSelector",!0),isDistractionFree:settings.isDistractionFree}}),[]),blockInformation=useBlockDisplayInformation(firstParentClientId),nodeRef=(0,react.useRef)(),{gestures:showMoversGestures}=useShowMoversGestures({ref:nodeRef,onChange(isFocused){isFocused&&isDistractionFree||toggleBlockHighlight(firstParentClientId,isFocused)}});return shouldHide||void 0===firstParentClientId?null:(0,react.createElement)("div",(0,esm_extends.Z)({className:"block-editor-block-parent-selector",key:firstParentClientId,ref:nodeRef},showMoversGestures),(0,react.createElement)(toolbar_button.Z,{className:"block-editor-block-parent-selector__button",onClick:()=>selectBlock(firstParentClientId),label:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Select %s"),null==blockInformation?void 0:blockInformation.title),showTooltip:!0,icon:(0,react.createElement)(block_icon,{icon:null==blockInformation?void 0:blockInformation.icon})}))}var copy=__webpack_require__("./packages/icons/build-module/library/copy.js");function PreviewBlockPopover(_ref){let{blocks:blocks}=_ref;return(0,react.createElement)("div",{className:"block-editor-block-switcher__popover__preview__parent"},(0,react.createElement)("div",{className:"block-editor-block-switcher__popover__preview__container"},(0,react.createElement)(popover.Z,{className:"block-editor-block-switcher__preview__popover",placement:"bottom-start",focusOnMount:!1},(0,react.createElement)("div",{className:"block-editor-block-switcher__preview"},(0,react.createElement)("div",{className:"block-editor-block-switcher__preview-title"},(0,i18n_build_module.__)("Preview")),(0,react.createElement)(block_preview,{viewportWidth:500,blocks:blocks})))))}function RestTransformationItems(_ref4){let{restTransformations:restTransformations,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName}=_ref4;return restTransformations.map((item=>(0,react.createElement)(BlockTranformationItem,{key:item.name,item:item,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName})))}function BlockTranformationItem(_ref5){let{item:item,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName}=_ref5;const{name:name,icon:icon,title:title,isDisabled:isDisabled}=item;return(0,react.createElement)(menu_item.Z,{className:(0,build_module.hq)(name),onClick:event=>{event.preventDefault(),onSelect(name)},disabled:isDisabled,onMouseLeave:()=>setHoveredTransformItemName(null),onMouseEnter:()=>setHoveredTransformItemName(name)},(0,react.createElement)(block_icon,{icon:icon,showColors:!0}),title)}var block_transformations_menu=_ref3=>{let{className:className,possibleBlockTransformations:possibleBlockTransformations,onSelect:onSelect,blocks:blocks}=_ref3;const[hoveredTransformItemName,setHoveredTransformItemName]=(0,react.useState)(),{priorityTextTransformations:priorityTextTransformations,restTransformations:restTransformations}=function useGroupedTransforms(possibleBlockTransformations){const priorityContentTranformationBlocks={"core/paragraph":1,"core/heading":2,"core/list":3,"core/quote":4},transformations=(0,react.useMemo)((()=>{const priorityTextTranformsNames=Object.keys(priorityContentTranformationBlocks);return possibleBlockTransformations.reduce(((accumulator,item)=>{const{name:name}=item;return priorityTextTranformsNames.includes(name)?accumulator.priorityTextTransformations.push(item):accumulator.restTransformations.push(item),accumulator}),{priorityTextTransformations:[],restTransformations:[]})}),[possibleBlockTransformations]);return transformations.priorityTextTransformations.sort(((_ref,_ref2)=>{let{name:currentName}=_ref,{name:nextName}=_ref2;return priorityContentTranformationBlocks[currentName]<priorityContentTranformationBlocks[nextName]?-1:1})),transformations}(possibleBlockTransformations),hasBothContentTransformations=priorityTextTransformations.length&&restTransformations.length,restTransformItems=!!restTransformations.length&&(0,react.createElement)(RestTransformationItems,{restTransformations:restTransformations,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName});return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(menu_group.Z,{label:(0,i18n_build_module.__)("Transform to"),className:className},hoveredTransformItemName&&(0,react.createElement)(PreviewBlockPopover,{blocks:(0,build_module.m4)(blocks,hoveredTransformItemName)}),priorityTextTransformations.map((item=>(0,react.createElement)(BlockTranformationItem,{key:item.name,item:item,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName}))),!hasBothContentTransformations&&restTransformItems),!!hasBothContentTransformations&&(0,react.createElement)(menu_group.Z,{className:className},restTransformItems))},text_component=__webpack_require__("./packages/components/build-module/text/component.js"),library_check=__webpack_require__("./packages/icons/build-module/library/check.js"),token_list_build_module=__webpack_require__("./packages/token-list/build-module/index.js");function replaceActiveStyle(className,activeStyle,newStyle){const list=new token_list_build_module.Z(className);return activeStyle&&list.remove("is-style-"+activeStyle.name),list.add("is-style-"+newStyle.name),list.value}function getDefaultStyle(styles){return null==styles?void 0:styles.find((style=>style.isDefault))}function useStylesForBlocks(_ref){let{clientId:clientId,onSwitch:onSwitch}=_ref;const{styles:styles,block:block,blockType:blockType,className:className}=(0,use_select.Z)((select=>{const{getBlock:getBlock}=select(store),block=getBlock(clientId);if(!block)return{};const blockType=(0,build_module.ck)(block.name),{getBlockStyles:getBlockStyles}=select(build_module.h);return{block:block,blockType:blockType,styles:getBlockStyles(block.name),className:block.attributes.className||""}}),[clientId]),{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store),stylesToRender=function getRenderedStyles(styles){return styles&&0!==styles.length?getDefaultStyle(styles)?styles:[{name:"default",label:(0,i18n_build_module._x)("Default","block style"),isDefault:!0},...styles]:[]}(styles),activeStyle=function getActiveStyle(styles,className){for(const style of new token_list_build_module.Z(className).values()){if(-1===style.indexOf("is-style-"))continue;const potentialStyleName=style.substring(9),activeStyle=null==styles?void 0:styles.find((_ref=>{let{name:name}=_ref;return name===potentialStyleName}));if(activeStyle)return activeStyle}return getDefaultStyle(styles)}(stylesToRender,className),genericPreviewBlock=function useGenericPreviewBlock(block,type){return(0,react.useMemo)((()=>{const example=null==type?void 0:type.example,blockName=null==type?void 0:type.name;return example&&blockName?(0,build_module.Wf)(blockName,{attributes:example.attributes,innerBlocks:example.innerBlocks}):block?(0,build_module.Wm)(block):void 0}),[null!=type&&type.example?null==block?void 0:block.name:block,type])}(block,blockType);return{onSelect:style=>{const styleClassName=replaceActiveStyle(className,activeStyle,style);updateBlockAttributes(clientId,{className:styleClassName}),onSwitch()},stylesToRender:stylesToRender,activeStyle:activeStyle,genericPreviewBlock:genericPreviewBlock,className:className}}const menu_items_noop=()=>{};function BlockStylesMenuItems(_ref){let{clientId:clientId,onSwitch:onSwitch=menu_items_noop}=_ref;const{onSelect:onSelect,stylesToRender:stylesToRender,activeStyle:activeStyle}=useStylesForBlocks({clientId:clientId,onSwitch:onSwitch});return stylesToRender&&0!==stylesToRender.length?(0,react.createElement)(react.Fragment,null,stylesToRender.map((style=>{const menuItemText=style.label||style.name;return(0,react.createElement)(menu_item.Z,{key:style.name,icon:activeStyle.name===style.name?library_check.Z:null,onClick:()=>onSelect(style)},(0,react.createElement)(text_component.Z,{as:"span",limit:18,ellipsizeMode:"tail",truncate:!0},menuItemText))}))):null}function BlockStylesMenu(_ref){let{hoveredBlock:hoveredBlock,onSwitch:onSwitch}=_ref;const{clientId:clientId}=hoveredBlock;return(0,react.createElement)(menu_group.Z,{label:(0,i18n_build_module.__)("Styles"),className:"block-editor-block-switcher__styles__menugroup"},(0,react.createElement)(BlockStylesMenuItems,{clientId:clientId,onSwitch:onSwitch}))}const getMatchingBlockByName=function(block,selectedBlockName){let consumedBlocks=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const{clientId:clientId,name:name,innerBlocks:innerBlocks=[]}=block;if(!consumedBlocks.has(clientId)){if(name===selectedBlockName)return block;for(const innerBlock of innerBlocks){const match=getMatchingBlockByName(innerBlock,selectedBlockName,consumedBlocks);if(match)return match}}},transformMatchingBlock=(match,selectedBlock)=>{const retainedBlockAttributes=((name,attributes)=>{const contentAttributes=(0,build_module.A$)(name,"content");return null!=contentAttributes&&contentAttributes.length?contentAttributes.reduce(((_accumulator,attribute)=>(attributes[attribute]&&(_accumulator[attribute]=attributes[attribute]),_accumulator)),{}):attributes})(selectedBlock.name,selectedBlock.attributes);match.attributes={...match.attributes,...retainedBlockAttributes}};var use_transformed_patterns=(patterns,selectedBlocks)=>(0,react.useMemo)((()=>patterns.reduce(((accumulator,_pattern)=>{const transformedBlocks=((selectedBlocks,patternBlocks)=>{const _patternBlocks=patternBlocks.map((block=>(0,build_module.Wm)(block))),consumedBlocks=new Set;for(const selectedBlock of selectedBlocks){let isMatch=!1;for(const patternBlock of _patternBlocks){const match=getMatchingBlockByName(patternBlock,selectedBlock.name,consumedBlocks);if(match){isMatch=!0,consumedBlocks.add(match.clientId),transformMatchingBlock(match,selectedBlock);break}}if(!isMatch)return}return _patternBlocks})(selectedBlocks,_pattern.blocks);return transformedBlocks&&accumulator.push({..._pattern,transformedBlocks:transformedBlocks}),accumulator}),[])),[patterns,selectedBlocks]);function PreviewPatternsPopover(_ref2){let{patterns:patterns,onSelect:onSelect}=_ref2;return(0,react.createElement)("div",{className:"block-editor-block-switcher__popover__preview__parent"},(0,react.createElement)("div",{className:"block-editor-block-switcher__popover__preview__container"},(0,react.createElement)(popover.Z,{className:"block-editor-block-switcher__preview__popover",position:"bottom right"},(0,react.createElement)("div",{className:"block-editor-block-switcher__preview"},(0,react.createElement)("div",{className:"block-editor-block-switcher__preview-title"},(0,i18n_build_module.__)("Preview")),(0,react.createElement)(BlockPatternsList,{patterns:patterns,onSelect:onSelect})))))}function BlockPatternsList(_ref3){let{patterns:patterns,onSelect:onSelect}=_ref3;const composite=(0,CompositeState.u)();return(0,react.createElement)(Composite.b,(0,esm_extends.Z)({},composite,{role:"listbox",className:"block-editor-block-switcher__preview-patterns-container","aria-label":(0,i18n_build_module.__)("Patterns list")}),patterns.map((pattern=>(0,react.createElement)(pattern_transformations_menu_BlockPattern,{key:pattern.name,pattern:pattern,onSelect:onSelect,composite:composite}))))}function pattern_transformations_menu_BlockPattern(_ref4){let{pattern:pattern,onSelect:onSelect,composite:composite}=_ref4;const baseClassName="block-editor-block-switcher__preview-patterns-container",descriptionId=(0,use_instance_id.Z)(pattern_transformations_menu_BlockPattern,`${baseClassName}-list__item-description`);return(0,react.createElement)("div",{className:`${baseClassName}-list__list-item`,"aria-label":pattern.title,"aria-describedby":pattern.description?descriptionId:void 0},(0,react.createElement)(CompositeItem.A,(0,esm_extends.Z)({role:"option",as:"div"},composite,{className:`${baseClassName}-list__item`,onClick:()=>onSelect(pattern.transformedBlocks)}),(0,react.createElement)(block_preview,{blocks:pattern.transformedBlocks,viewportWidth:pattern.viewportWidth||500}),(0,react.createElement)("div",{className:`${baseClassName}-list__item-title`},pattern.title)),!!pattern.description&&(0,react.createElement)(visually_hidden_component.Z,{id:descriptionId},pattern.description))}var pattern_transformations_menu=function PatternTransformationsMenu(_ref){let{blocks:blocks,patterns:statePatterns,onSelect:onSelect}=_ref;const[showTransforms,setShowTransforms]=(0,react.useState)(!1),patterns=use_transformed_patterns(statePatterns,blocks);return patterns.length?(0,react.createElement)(menu_group.Z,{className:"block-editor-block-switcher__pattern__transforms__menugroup"},showTransforms&&(0,react.createElement)(PreviewPatternsPopover,{patterns:patterns,onSelect:onSelect}),(0,react.createElement)(menu_item.Z,{onClick:event=>{event.preventDefault(),setShowTransforms(!showTransforms)},icon:chevron_right.Z},(0,i18n_build_module.__)("Patterns"))):null};const BlockSwitcherDropdownMenu=_ref=>{let{clientIds:clientIds,blocks:blocks}=_ref;const{replaceBlocks:replaceBlocks,multiSelect:multiSelect}=(0,use_dispatch.Z)(store),blockInformation=useBlockDisplayInformation(blocks[0].clientId),{possibleBlockTransformations:possibleBlockTransformations,canRemove:canRemove,hasBlockStyles:hasBlockStyles,icon:icon,patterns:patterns}=(0,use_select.Z)((select=>{const{getBlockRootClientId:getBlockRootClientId,getBlockTransformItems:getBlockTransformItems,__experimentalGetPatternTransformItems:__experimentalGetPatternTransformItems}=select(store),{getBlockStyles:getBlockStyles,getBlockType:getBlockType}=select(build_module.h),{canRemoveBlocks:canRemoveBlocks}=select(store),rootClientId=getBlockRootClientId(Array.isArray(clientIds)?clientIds[0]:clientIds),[{name:firstBlockName}]=blocks,_isSingleBlockSelected=1===blocks.length,styles=_isSingleBlockSelected&&getBlockStyles(firstBlockName);let _icon;if(_isSingleBlockSelected)_icon=null==blockInformation?void 0:blockInformation.icon;else{var _getBlockType;_icon=1===new Set(blocks.map((_ref2=>{let{name:name}=_ref2;return name}))).size?null===(_getBlockType=getBlockType(firstBlockName))||void 0===_getBlockType?void 0:_getBlockType.icon:copy.Z}return{possibleBlockTransformations:getBlockTransformItems(blocks,rootClientId),canRemove:canRemoveBlocks(clientIds,rootClientId),hasBlockStyles:!(null==styles||!styles.length),icon:_icon,patterns:__experimentalGetPatternTransformItems(blocks,rootClientId)}}),[clientIds,blocks,null==blockInformation?void 0:blockInformation.icon]),blockTitle=useBlockDisplayTitle({clientId:Array.isArray(clientIds)?clientIds[0]:clientIds,maximumLength:35}),isReusable=1===blocks.length&&(0,build_module.vr)(blocks[0]),isTemplate=1===blocks.length&&(0,build_module.zQ)(blocks[0]);function selectForMultipleBlocks(insertedBlocks){insertedBlocks.length>1&&multiSelect(insertedBlocks[0].clientId,insertedBlocks[insertedBlocks.length-1].clientId)}const hasPossibleBlockTransformations=!!possibleBlockTransformations.length&&canRemove&&!isTemplate,hasPatternTransformation=!(null==patterns||!patterns.length)&&canRemove;if(!hasBlockStyles&&!hasPossibleBlockTransformations)return(0,react.createElement)(toolbar_group.Z,null,(0,react.createElement)(toolbar_button.Z,{disabled:!0,className:"block-editor-block-switcher__no-switcher-icon",title:blockTitle,icon:(0,react.createElement)(react.Fragment,null,(0,react.createElement)(block_icon,{icon:icon,showColors:!0}),(isReusable||isTemplate)&&(0,react.createElement)("span",{className:"block-editor-block-switcher__toggle-text"},blockTitle))}));const blockSwitcherLabel=blockTitle,blockSwitcherDescription=1===blocks.length?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s: Change block type or style"),blockTitle):(0,i18n_build_module.gB)((0,i18n_build_module._n)("Change type of %d block","Change type of %d blocks",blocks.length),blocks.length),showDropDown=hasBlockStyles||hasPossibleBlockTransformations||hasPatternTransformation;return(0,react.createElement)(toolbar_group.Z,null,(0,react.createElement)(toolbar_item.Z,null,(toggleProps=>(0,react.createElement)(dropdown_menu.Z,{className:"block-editor-block-switcher",label:blockSwitcherLabel,popoverProps:{position:"bottom right",variant:"toolbar",className:"block-editor-block-switcher__popover"},icon:(0,react.createElement)(react.Fragment,null,(0,react.createElement)(block_icon,{icon:icon,className:"block-editor-block-switcher__toggle",showColors:!0}),(isReusable||isTemplate)&&(0,react.createElement)("span",{className:"block-editor-block-switcher__toggle-text"},blockTitle)),toggleProps:{describedBy:blockSwitcherDescription,...toggleProps},menuProps:{orientation:"both"}},(_ref3=>{let{onClose:onClose}=_ref3;return showDropDown&&(0,react.createElement)("div",{className:"block-editor-block-switcher__container"},hasPatternTransformation&&(0,react.createElement)(pattern_transformations_menu,{blocks:blocks,patterns:patterns,onSelect:transformedBlocks=>{!function onPatternTransform(transformedBlocks){replaceBlocks(clientIds,transformedBlocks),selectForMultipleBlocks(transformedBlocks)}(transformedBlocks),onClose()}}),hasPossibleBlockTransformations&&(0,react.createElement)(block_transformations_menu,{className:"block-editor-block-switcher__transforms__menugroup",possibleBlockTransformations:possibleBlockTransformations,blocks:blocks,onSelect:name=>{!function onBlockTransform(name){const newBlocks=(0,build_module.m4)(blocks,name);replaceBlocks(clientIds,newBlocks),selectForMultipleBlocks(newBlocks)}(name),onClose()}}),hasBlockStyles&&(0,react.createElement)(BlockStylesMenu,{hoveredBlock:blocks[0],onSwitch:onClose}))})))))};var block_switcher=_ref4=>{let{clientIds:clientIds}=_ref4;const blocks=(0,use_select.Z)((select=>select(store).getBlocksByClientId(clientIds)),[clientIds]);return!blocks.length||blocks.some((block=>!block))?null:(0,react.createElement)(BlockSwitcherDropdownMenu,{clientIds:clientIds,blocks:blocks})};const{Fill:__unstableBlockToolbarLastItem,Slot:block_toolbar_last_item_Slot}=(0,slot_fill.up)("__unstableBlockToolbarLastItem");__unstableBlockToolbarLastItem.Slot=block_toolbar_last_item_Slot;var block_toolbar_last_item=__unstableBlockToolbarLastItem,more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js"),use_copy_to_clipboard=__webpack_require__("./packages/compose/build-module/hooks/use-copy-to-clipboard/index.js");function useNotifyCopy(){const{getBlockName:getBlockName}=(0,use_select.Z)(store),{getBlockType:getBlockType}=(0,use_select.Z)(build_module.h),{createSuccessNotice:createSuccessNotice}=(0,use_dispatch.Z)(notices_build_module.h);return(0,react.useCallback)(((eventType,selectedBlockClientIds)=>{let notice="";if(1===selectedBlockClientIds.length){var _getBlockType;const clientId=selectedBlockClientIds[0],title=null===(_getBlockType=getBlockType(getBlockName(clientId)))||void 0===_getBlockType?void 0:_getBlockType.title;notice="copy"===eventType?(0,i18n_build_module.gB)((0,i18n_build_module.__)('Copied "%s" to clipboard.'),title):(0,i18n_build_module.gB)((0,i18n_build_module.__)('Moved "%s" to clipboard.'),title)}else notice="copy"===eventType?(0,i18n_build_module.gB)((0,i18n_build_module._n)("Copied %d block to clipboard.","Copied %d blocks to clipboard.",selectedBlockClientIds.length),selectedBlockClientIds.length):(0,i18n_build_module.gB)((0,i18n_build_module._n)("Moved %d block to clipboard.","Moved %d blocks to clipboard.",selectedBlockClientIds.length),selectedBlockClientIds.length);createSuccessNotice(notice,{type:"snackbar"})}),[])}function BlockActions(_ref){let{clientIds:clientIds,children:children,__experimentalUpdateSelection:updateSelection}=_ref;const{canInsertBlockType:canInsertBlockType,getBlockRootClientId:getBlockRootClientId,getBlocksByClientId:getBlocksByClientId,canMoveBlocks:canMoveBlocks,canRemoveBlocks:canRemoveBlocks}=(0,use_select.Z)(store),{getDefaultBlockName:getDefaultBlockName,getGroupingBlockName:getGroupingBlockName}=(0,use_select.Z)(build_module.h),blocks=getBlocksByClientId(clientIds),rootClientId=getBlockRootClientId(clientIds[0]),canDuplicate=blocks.every((block=>!!block&&(0,build_module.zb)(block.name,"multiple",!0)&&canInsertBlockType(block.name,rootClientId))),canInsertDefaultBlock=canInsertBlockType(getDefaultBlockName(),rootClientId),canMove=canMoveBlocks(clientIds,rootClientId),canRemove=canRemoveBlocks(clientIds,rootClientId),{removeBlocks:removeBlocks,replaceBlocks:replaceBlocks,duplicateBlocks:duplicateBlocks,insertAfterBlock:insertAfterBlock,insertBeforeBlock:insertBeforeBlock,flashBlock:flashBlock,setBlockMovingClientId:setBlockMovingClientId,setNavigationMode:setNavigationMode,selectBlock:selectBlock}=(0,use_dispatch.Z)(store),notifyCopy=useNotifyCopy();return children({canDuplicate:canDuplicate,canInsertDefaultBlock:canInsertDefaultBlock,canMove:canMove,canRemove:canRemove,rootClientId:rootClientId,blocks:blocks,onDuplicate:()=>duplicateBlocks(clientIds,updateSelection),onRemove:()=>removeBlocks(clientIds,updateSelection),onInsertBefore(){const clientId=Array.isArray(clientIds)?clientIds[0]:clientId;insertBeforeBlock(clientId)},onInsertAfter(){const clientId=Array.isArray(clientIds)?clientIds[clientIds.length-1]:clientId;insertAfterBlock(clientId)},onMoveTo(){setNavigationMode(!0),selectBlock(clientIds[0]),setBlockMovingClientId(clientIds[0])},onGroup(){if(!blocks.length)return;const groupingBlockName=getGroupingBlockName(),newBlocks=(0,build_module.m4)(blocks,groupingBlockName);newBlocks&&replaceBlocks(clientIds,newBlocks)},onUngroup(){if(!blocks.length)return;const innerBlocks=blocks[0].innerBlocks;innerBlocks.length&&replaceBlocks(clientIds,innerBlocks)},onCopy(){const selectedBlockClientIds=blocks.map((_ref2=>{let{clientId:clientId}=_ref2;return clientId}));1===blocks.length&&flashBlock(selectedBlockClientIds[0]),notifyCopy("copy",selectedBlockClientIds)}})}const block_mode_toggle_noop=()=>{};var block_mode_toggle=(0,compose.Z)([(0,with_select.Z)(((select,_ref2)=>{let{clientId:clientId}=_ref2;const{getBlock:getBlock,getBlockMode:getBlockMode,getSettings:getSettings}=select(store),block=getBlock(clientId),isCodeEditingEnabled=getSettings().codeEditingEnabled;return{mode:getBlockMode(clientId),blockType:block?(0,build_module.ck)(block.name):null,isCodeEditingEnabled:isCodeEditingEnabled}})),(0,with_dispatch.Z)(((dispatch,_ref3)=>{let{onToggle:onToggle=block_mode_toggle_noop,clientId:clientId}=_ref3;return{onToggleMode(){dispatch(store).toggleBlockMode(clientId),onToggle()}}}))])((function BlockModeToggle(_ref){let{blockType:blockType,mode:mode,onToggleMode:onToggleMode,small:small=!1,isCodeEditingEnabled:isCodeEditingEnabled=!0}=_ref;if(!blockType||!(0,build_module.zb)(blockType,"html",!0)||!isCodeEditingEnabled)return null;const label="visual"===mode?(0,i18n_build_module.__)("Edit as HTML"):(0,i18n_build_module.__)("Edit visually");return(0,react.createElement)(menu_item.Z,{onClick:onToggleMode},!small&&label)}));var block_html_convert_button=(0,compose.Z)((0,with_select.Z)(((select,_ref)=>{let{clientId:clientId}=_ref;const block=select(store).getBlock(clientId);return{block:block,shouldRender:block&&"core/html"===block.name}})),(0,with_dispatch.Z)(((dispatch,_ref2)=>{let{block:block}=_ref2;return{onClick:()=>dispatch(store).replaceBlocks(block.clientId,(0,build_module.AF)({HTML:(0,build_module.Jo)(block)}))}})))((function BlockConvertButton(_ref){let{shouldRender:shouldRender,onClick:onClick,small:small}=_ref;if(!shouldRender)return null;const label=(0,i18n_build_module.__)("Convert to Blocks");return(0,react.createElement)(menu_item.Z,{onClick:onClick},!small&&label)}));const{Fill:__unstableBlockSettingsMenuFirstItem,Slot:block_settings_menu_first_item_Slot}=(0,slot_fill.up)("__unstableBlockSettingsMenuFirstItem");__unstableBlockSettingsMenuFirstItem.Slot=block_settings_menu_first_item_Slot;var block_settings_menu_first_item=__unstableBlockSettingsMenuFirstItem;function ConvertToGroupButton(_ref){let{clientIds:clientIds,isGroupable:isGroupable,isUngroupable:isUngroupable,blocksSelection:blocksSelection,groupingBlockName:groupingBlockName,onClose:onClose=(()=>{})}=_ref;const{replaceBlocks:replaceBlocks}=(0,use_dispatch.Z)(store);return isGroupable||isUngroupable?(0,react.createElement)(react.Fragment,null,isGroupable&&(0,react.createElement)(menu_item.Z,{onClick:()=>{(()=>{const newBlocks=(0,build_module.m4)(blocksSelection,groupingBlockName);newBlocks&&replaceBlocks(clientIds,newBlocks)})(),onClose()}},(0,i18n_build_module._x)("Group","verb")),isUngroupable&&(0,react.createElement)(menu_item.Z,{onClick:()=>{(()=>{const innerBlocks=blocksSelection[0].innerBlocks;innerBlocks.length&&replaceBlocks(clientIds,innerBlocks)})(),onClose()}},(0,i18n_build_module._x)("Ungroup","Ungrouping blocks from within a Group block back into individual blocks within the Editor "))):null}function useConvertToGroupButtonProps(){const{clientIds:clientIds,isGroupable:isGroupable,isUngroupable:isUngroupable,blocksSelection:blocksSelection,groupingBlockName:groupingBlockName}=(0,use_select.Z)((select=>{var _blocksSelection$;const{getBlockRootClientId:getBlockRootClientId,getBlocksByClientId:getBlocksByClientId,canInsertBlockType:canInsertBlockType,getSelectedBlockClientIds:getSelectedBlockClientIds}=select(store),{getGroupingBlockName:getGroupingBlockName}=select(build_module.h),_clientIds=getSelectedBlockClientIds(),_groupingBlockName=getGroupingBlockName(),groupingBlockAvailable=canInsertBlockType(_groupingBlockName,null!=_clientIds&&_clientIds.length?getBlockRootClientId(_clientIds[0]):void 0),_blocksSelection=getBlocksByClientId(_clientIds),isSingleGroupingBlock=1===_blocksSelection.length&&(null===(_blocksSelection$=_blocksSelection[0])||void 0===_blocksSelection$?void 0:_blocksSelection$.name)===_groupingBlockName;return{clientIds:_clientIds,isGroupable:groupingBlockAvailable&&_blocksSelection.length,isUngroupable:isSingleGroupingBlock&&!!_blocksSelection[0].innerBlocks.length,blocksSelection:_blocksSelection,groupingBlockName:_groupingBlockName}}),[]);return{clientIds:clientIds,isGroupable:isGroupable,isUngroupable:isUngroupable,blocksSelection:blocksSelection,groupingBlockName:groupingBlockName}}function useBlockLock(clientId){return(0,use_select.Z)((select=>{const{canEditBlock:canEditBlock,canMoveBlock:canMoveBlock,canRemoveBlock:canRemoveBlock,canLockBlockType:canLockBlockType,getBlockName:getBlockName,getBlockRootClientId:getBlockRootClientId,getTemplateLock:getTemplateLock}=select(store),rootClientId=getBlockRootClientId(clientId),canEdit=canEditBlock(clientId),canMove=canMoveBlock(clientId,rootClientId),canRemove=canRemoveBlock(clientId,rootClientId);return{canEdit:canEdit,canMove:canMove,canRemove:canRemove,canLock:canLockBlockType(getBlockName(clientId)),isContentLocked:"contentOnly"===getTemplateLock(clientId),isLocked:!canEdit||!canMove||!canRemove}}),[clientId])}var unlock=__webpack_require__("./packages/icons/build-module/library/unlock.js"),lock_outline=__webpack_require__("./packages/icons/build-module/library/lock-outline.js"),checkbox_control=__webpack_require__("./packages/components/build-module/checkbox-control/index.js"),library_lock=__webpack_require__("./packages/icons/build-module/library/lock.js");const ALLOWS_EDIT_LOCKING=["core/block","core/navigation"];function getTemplateLockValue(lock){return lock.remove&&lock.move?"all":!(!lock.remove||lock.move)&&"insert"}function BlockLockModal(_ref){let{clientId:clientId,onClose:onClose}=_ref;const[lock,setLock]=(0,react.useState)({move:!1,remove:!1}),{canEdit:canEdit,canMove:canMove,canRemove:canRemove}=useBlockLock(clientId),{allowsEditLocking:allowsEditLocking,templateLock:templateLock,hasTemplateLock:hasTemplateLock}=(0,use_select.Z)((select=>{var _getBlockAttributes,_blockType$attributes;const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(store),blockName=getBlockName(clientId),blockType=(0,build_module.ck)(blockName);return{allowsEditLocking:ALLOWS_EDIT_LOCKING.includes(blockName),templateLock:null===(_getBlockAttributes=getBlockAttributes(clientId))||void 0===_getBlockAttributes?void 0:_getBlockAttributes.templateLock,hasTemplateLock:!(null==blockType||null===(_blockType$attributes=blockType.attributes)||void 0===_blockType$attributes||!_blockType$attributes.templateLock)}}),[clientId]),[applyTemplateLock,setApplyTemplateLock]=(0,react.useState)(!!templateLock),{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store),blockInformation=useBlockDisplayInformation(clientId),instanceId=(0,use_instance_id.Z)(BlockLockModal,"block-editor-block-lock-modal__options-title");(0,react.useEffect)((()=>{setLock({move:!canMove,remove:!canRemove,...allowsEditLocking?{edit:!canEdit}:{}})}),[canEdit,canMove,canRemove,allowsEditLocking]);const isAllChecked=Object.values(lock).every(Boolean),isMixed=Object.values(lock).some(Boolean)&&!isAllChecked;return(0,react.createElement)(modal.Z,{title:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Lock %s"),blockInformation.title),overlayClassName:"block-editor-block-lock-modal",closeLabel:(0,i18n_build_module.__)("Close"),onRequestClose:onClose},(0,react.createElement)("p",null,(0,i18n_build_module.__)("Choose specific attributes to restrict or lock all available options.")),(0,react.createElement)("form",{onSubmit:event=>{event.preventDefault(),updateBlockAttributes([clientId],{lock:lock,templateLock:applyTemplateLock?getTemplateLockValue(lock):void 0}),onClose()}},(0,react.createElement)("div",{role:"group","aria-labelledby":instanceId,className:"block-editor-block-lock-modal__options"},(0,react.createElement)(checkbox_control.C,{__nextHasNoMarginBottom:!0,className:"block-editor-block-lock-modal__options-title",label:(0,react.createElement)("span",{id:instanceId},(0,i18n_build_module.__)("Lock all")),checked:isAllChecked,indeterminate:isMixed,onChange:newValue=>setLock({move:newValue,remove:newValue,...allowsEditLocking?{edit:newValue}:{}})}),(0,react.createElement)("ul",{className:"block-editor-block-lock-modal__checklist"},allowsEditLocking&&(0,react.createElement)("li",{className:"block-editor-block-lock-modal__checklist-item"},(0,react.createElement)(checkbox_control.C,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Restrict editing"),checked:!!lock.edit,onChange:edit=>setLock((prevLock=>({...prevLock,edit:edit})))}),(0,react.createElement)(components_build_module_icon.Z,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.edit?library_lock.Z:unlock.Z})),(0,react.createElement)("li",{className:"block-editor-block-lock-modal__checklist-item"},(0,react.createElement)(checkbox_control.C,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Disable movement"),checked:lock.move,onChange:move=>setLock((prevLock=>({...prevLock,move:move})))}),(0,react.createElement)(components_build_module_icon.Z,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.move?library_lock.Z:unlock.Z})),(0,react.createElement)("li",{className:"block-editor-block-lock-modal__checklist-item"},(0,react.createElement)(checkbox_control.C,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Prevent removal"),checked:lock.remove,onChange:remove=>setLock((prevLock=>({...prevLock,remove:remove})))}),(0,react.createElement)(components_build_module_icon.Z,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.remove?library_lock.Z:unlock.Z}))),hasTemplateLock&&(0,react.createElement)(toggle_control.Z,{className:"block-editor-block-lock-modal__template-lock",label:(0,i18n_build_module.__)("Apply to all blocks inside"),checked:applyTemplateLock,disabled:lock.move&&!lock.remove,onChange:()=>setApplyTemplateLock(!applyTemplateLock)})),(0,react.createElement)(component.Z,{className:"block-editor-block-lock-modal__actions",justify:"flex-end",expanded:!1},(0,react.createElement)(flex_item_component.Z,null,(0,react.createElement)(build_module_button.Z,{variant:"tertiary",onClick:onClose},(0,i18n_build_module.__)("Cancel"))),(0,react.createElement)(flex_item_component.Z,null,(0,react.createElement)(build_module_button.Z,{variant:"primary",type:"submit"},(0,i18n_build_module.__)("Apply"))))))}function BlockLockMenuItem(_ref){let{clientId:clientId}=_ref;const{canLock:canLock,isLocked:isLocked}=useBlockLock(clientId),[isModalOpen,toggleModal]=(0,react.useReducer)((isActive=>!isActive),!1);if(!canLock)return null;const label=isLocked?(0,i18n_build_module.__)("Unlock"):(0,i18n_build_module.__)("Lock");return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(menu_item.Z,{icon:isLocked?unlock.Z:lock_outline.Z,onClick:toggleModal},label),isModalOpen&&(0,react.createElement)(BlockLockModal,{clientId:clientId,onClose:toggleModal}))}const{Fill:Fill,Slot:block_settings_menu_controls_Slot}=(0,slot_fill.up)("BlockSettingsMenuControls");function BlockSettingsMenuControls(_ref2){let{...props}=_ref2;return(0,react.createElement)(style_provider.Z,{document:document},(0,react.createElement)(Fill,props))}BlockSettingsMenuControls.Slot=_ref=>{let{fillProps:fillProps,clientIds:clientIds=null,__unstableDisplayLocation:__unstableDisplayLocation}=_ref;const{selectedBlocks:selectedBlocks,selectedClientIds:selectedClientIds,canRemove:canRemove}=(0,use_select.Z)((select=>{const{getBlocksByClientId:getBlocksByClientId,getSelectedBlockClientIds:getSelectedBlockClientIds,canRemoveBlocks:canRemoveBlocks}=select(store),ids=null!==clientIds?clientIds:getSelectedBlockClientIds();return{selectedBlocks:(0,lodash.map)(getBlocksByClientId(ids).filter(Boolean),(block=>block.name)),selectedClientIds:ids,canRemove:canRemoveBlocks(ids)}}),[clientIds]),{canLock:canLock}=useBlockLock(selectedClientIds[0]),showLockButton=1===selectedClientIds.length&&canLock,convertToGroupButtonProps=useConvertToGroupButtonProps(),{isGroupable:isGroupable,isUngroupable:isUngroupable}=convertToGroupButtonProps,showConvertToGroupButton=(isGroupable||isUngroupable)&&canRemove;return(0,react.createElement)(block_settings_menu_controls_Slot,{fillProps:{...fillProps,__unstableDisplayLocation:__unstableDisplayLocation,selectedBlocks:selectedBlocks,selectedClientIds:selectedClientIds}},(fills=>!(null!=fills&&fills.length)>0&&!showConvertToGroupButton&&!showLockButton?null:(0,react.createElement)(menu_group.Z,null,showLockButton&&(0,react.createElement)(BlockLockMenuItem,{clientId:selectedClientIds[0]}),fills,showConvertToGroupButton&&(0,react.createElement)(ConvertToGroupButton,(0,esm_extends.Z)({},convertToGroupButtonProps,{onClose:null==fillProps?void 0:fillProps.onClose})))))};var block_settings_menu_controls=BlockSettingsMenuControls;const block_settings_dropdown_noop=()=>{},block_settings_dropdown_POPOVER_PROPS={className:"block-editor-block-settings-menu__popover",position:"bottom right",variant:"toolbar"};function CopyMenuItem(_ref){let{blocks:blocks,onCopy:onCopy}=_ref;const ref=(0,use_copy_to_clipboard.Z)((()=>(0,build_module.qC)(blocks)),onCopy),copyMenuItemLabel=blocks.length>1?(0,i18n_build_module.__)("Copy blocks"):(0,i18n_build_module.__)("Copy block");return(0,react.createElement)(menu_item.Z,{ref:ref},copyMenuItemLabel)}var block_settings_dropdown=function BlockSettingsDropdown(_ref2){let{clientIds:clientIds,__experimentalSelectBlock:__experimentalSelectBlock,children:children,__unstableDisplayLocation:__unstableDisplayLocation,...props}=_ref2;const blockClientIds=Array.isArray(clientIds)?clientIds:[clientIds],count=blockClientIds.length,firstBlockClientId=blockClientIds[0],{firstParentClientId:firstParentClientId,isDistractionFree:isDistractionFree,onlyBlock:onlyBlock,parentBlockType:parentBlockType,previousBlockClientId:previousBlockClientId,nextBlockClientId:nextBlockClientId,selectedBlockClientIds:selectedBlockClientIds}=(0,use_select.Z)((select=>{const{getBlockCount:getBlockCount,getBlockName:getBlockName,getBlockRootClientId:getBlockRootClientId,getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId,getSelectedBlockClientIds:getSelectedBlockClientIds,getSettings:getSettings,getBlockAttributes:getBlockAttributes}=select(store),{getActiveBlockVariation:getActiveBlockVariation}=select(build_module.h),_firstParentClientId=getBlockRootClientId(firstBlockClientId),parentBlockName=_firstParentClientId&&getBlockName(_firstParentClientId);return{firstParentClientId:_firstParentClientId,isDistractionFree:getSettings().isDistractionFree,onlyBlock:1===getBlockCount(_firstParentClientId),parentBlockType:_firstParentClientId&&(getActiveBlockVariation(parentBlockName,getBlockAttributes(_firstParentClientId))||(0,build_module.ck)(parentBlockName)),previousBlockClientId:getPreviousBlockClientId(firstBlockClientId),nextBlockClientId:getNextBlockClientId(firstBlockClientId),selectedBlockClientIds:getSelectedBlockClientIds()}}),[firstBlockClientId]),shortcuts=(0,use_select.Z)((select=>{const{getShortcutRepresentation:getShortcutRepresentation}=select(keyboard_shortcuts_build_module.h);return{duplicate:getShortcutRepresentation("core/block-editor/duplicate"),remove:getShortcutRepresentation("core/block-editor/remove"),insertAfter:getShortcutRepresentation("core/block-editor/insert-after"),insertBefore:getShortcutRepresentation("core/block-editor/insert-before")}}),[]),{selectBlock:selectBlock,toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store),updateSelectionAfterDuplicate=(0,react.useCallback)(__experimentalSelectBlock?async clientIdsPromise=>{const ids=await clientIdsPromise;ids&&ids[0]&&__experimentalSelectBlock(ids[0])}:block_settings_dropdown_noop,[__experimentalSelectBlock]),blockTitle=useBlockDisplayTitle({clientId:firstBlockClientId,maximumLength:25}),updateSelectionAfterRemove=(0,react.useCallback)(__experimentalSelectBlock?()=>{const blockToSelect=previousBlockClientId||nextBlockClientId;blockToSelect&&selectedBlockClientIds.includes(firstBlockClientId)&&!selectedBlockClientIds.includes(blockToSelect)&&__experimentalSelectBlock(blockToSelect)}:block_settings_dropdown_noop,[__experimentalSelectBlock,previousBlockClientId,nextBlockClientId,selectedBlockClientIds]),label=(0,i18n_build_module.gB)((0,i18n_build_module.__)("Remove %s"),blockTitle),removeBlockLabel=1===count?label:(0,i18n_build_module.__)("Remove blocks"),selectParentButtonRef=(0,react.useRef)(),{gestures:showParentOutlineGestures}=useShowMoversGestures({ref:selectParentButtonRef,onChange(isFocused){isFocused&&isDistractionFree||toggleBlockHighlight(firstParentClientId,isFocused)}}),parentBlockIsSelected=null==selectedBlockClientIds?void 0:selectedBlockClientIds.includes(firstParentClientId);return(0,react.createElement)(BlockActions,{clientIds:clientIds,__experimentalUpdateSelection:!__experimentalSelectBlock},(_ref3=>{let{canDuplicate:canDuplicate,canInsertDefaultBlock:canInsertDefaultBlock,canMove:canMove,canRemove:canRemove,onDuplicate:onDuplicate,onInsertAfter:onInsertAfter,onInsertBefore:onInsertBefore,onRemove:onRemove,onCopy:onCopy,onMoveTo:onMoveTo,blocks:blocks}=_ref3;return(0,react.createElement)(dropdown_menu.Z,(0,esm_extends.Z)({icon:more_vertical.Z,label:(0,i18n_build_module.__)("Options"),className:"block-editor-block-settings-menu",popoverProps:block_settings_dropdown_POPOVER_PROPS,noIcons:!0},props),(_ref4=>{let{onClose:onClose}=_ref4;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(menu_group.Z,null,(0,react.createElement)(block_settings_menu_first_item.Slot,{fillProps:{onClose:onClose}}),!parentBlockIsSelected&&!!firstParentClientId&&(0,react.createElement)(menu_item.Z,(0,esm_extends.Z)({},showParentOutlineGestures,{ref:selectParentButtonRef,icon:(0,react.createElement)(block_icon,{icon:parentBlockType.icon}),onClick:()=>selectBlock(firstParentClientId)}),(0,i18n_build_module.gB)((0,i18n_build_module.__)("Select parent block (%s)"),parentBlockType.title)),1===count&&(0,react.createElement)(block_html_convert_button,{clientId:firstBlockClientId}),(0,react.createElement)(CopyMenuItem,{blocks:blocks,onCopy:onCopy}),canDuplicate&&(0,react.createElement)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onDuplicate,updateSelectionAfterDuplicate),shortcut:shortcuts.duplicate},(0,i18n_build_module.__)("Duplicate")),canInsertDefaultBlock&&(0,react.createElement)(react.Fragment,null,(0,react.createElement)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onInsertBefore),shortcut:shortcuts.insertBefore},(0,i18n_build_module.__)("Insert before")),(0,react.createElement)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onInsertAfter),shortcut:shortcuts.insertAfter},(0,i18n_build_module.__)("Insert after"))),canMove&&!onlyBlock&&(0,react.createElement)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onMoveTo)},(0,i18n_build_module.__)("Move to")),1===count&&(0,react.createElement)(block_mode_toggle,{clientId:firstBlockClientId,onToggle:onClose})),(0,react.createElement)(block_settings_menu_controls.Slot,{fillProps:{onClose:onClose},clientIds:clientIds,__unstableDisplayLocation:__unstableDisplayLocation}),"function"==typeof children?children({onClose:onClose}):react.Children.map((child=>(0,react.cloneElement)(child,{onClose:onClose}))),canRemove&&(0,react.createElement)(menu_group.Z,null,(0,react.createElement)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onRemove,updateSelectionAfterRemove),shortcut:shortcuts.remove},removeBlockLabel)))}))}))};var block_settings_menu=function BlockSettingsMenu(_ref){let{clientIds:clientIds,...props}=_ref;return(0,react.createElement)(toolbar_group.Z,null,(0,react.createElement)(toolbar_item.Z,null,(toggleProps=>(0,react.createElement)(block_settings_dropdown,(0,esm_extends.Z)({clientIds:clientIds,toggleProps:toggleProps},props)))))};function BlockLockToolbar(_ref){let{clientId:clientId}=_ref;const blockInformation=useBlockDisplayInformation(clientId),{canEdit:canEdit,canMove:canMove,canRemove:canRemove,canLock:canLock}=useBlockLock(clientId),[isModalOpen,toggleModal]=(0,react.useReducer)((isActive=>!isActive),!1);return canLock?canEdit&&canMove&&canRemove?null:(0,react.createElement)(react.Fragment,null,(0,react.createElement)(toolbar_group.Z,{className:"block-editor-block-lock-toolbar"},(0,react.createElement)(toolbar_button.Z,{icon:library_lock.Z,label:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Unlock %s"),blockInformation.title),onClick:toggleModal})),isModalOpen&&(0,react.createElement)(BlockLockModal,{clientId:clientId,onClose:toggleModal})):null}var library_group=__webpack_require__("./packages/icons/build-module/library/group.js"),row=__webpack_require__("./packages/icons/build-module/library/row.js"),stack=__webpack_require__("./packages/icons/build-module/library/stack.js");const layouts={group:{type:"constrained"},row:{type:"flex",flexWrap:"nowrap"},stack:{type:"flex",orientation:"vertical"}};var convert_to_group_buttons_toolbar=function BlockGroupToolbar(){const{blocksSelection:blocksSelection,clientIds:clientIds,groupingBlockName:groupingBlockName,isGroupable:isGroupable}=useConvertToGroupButtonProps(),{replaceBlocks:replaceBlocks}=(0,use_dispatch.Z)(store),{canRemove:canRemove,variations:variations}=(0,use_select.Z)((select=>{const{canRemoveBlocks:canRemoveBlocks}=select(store),{getBlockVariations:getBlockVariations}=select(build_module.h);return{canRemove:canRemoveBlocks(clientIds),variations:getBlockVariations(groupingBlockName,"transform")}}),[clientIds,groupingBlockName]),onConvertToGroup=layout=>{const newBlocks=(0,build_module.m4)(blocksSelection,groupingBlockName);"string"!=typeof layout&&(layout="group"),newBlocks&&newBlocks.length>0&&(newBlocks[0].attributes.layout=layouts[layout],replaceBlocks(clientIds,newBlocks))};if(!isGroupable||!canRemove)return null;const canInsertRow=!!variations.find((_ref=>{let{name:name}=_ref;return"group-row"===name})),canInsertStack=!!variations.find((_ref2=>{let{name:name}=_ref2;return"group-stack"===name}));return(0,react.createElement)(toolbar_group.Z,null,(0,react.createElement)(toolbar_button.Z,{icon:library_group.Z,label:(0,i18n_build_module._x)("Group","verb"),onClick:onConvertToGroup}),canInsertRow&&(0,react.createElement)(toolbar_button.Z,{icon:row.Z,label:(0,i18n_build_module._x)("Row","single horizontal line"),onClick:()=>onConvertToGroup("row")}),canInsertStack&&(0,react.createElement)(toolbar_button.Z,{icon:stack.Z,label:(0,i18n_build_module._x)("Stack","verb"),onClick:()=>onConvertToGroup("stack")}))};function BlockEditVisuallyButton(_ref){let{clientIds:clientIds}=_ref;const clientId=1===clientIds.length?clientIds[0]:void 0,canEditVisually=(0,use_select.Z)((select=>!!clientId&&"html"===select(store).getBlockMode(clientId)),[clientId]),{toggleBlockMode:toggleBlockMode}=(0,use_dispatch.Z)(store);return canEditVisually?(0,react.createElement)(toolbar_group.Z,null,(0,react.createElement)(toolbar_button.Z,{onClick:()=>{toggleBlockMode(clientId)}},(0,i18n_build_module.__)("Edit visually"))):null}var block_name_context=(0,react.createContext)("");var block_toolbar=_ref=>{let{hideDragHandle:hideDragHandle}=_ref;const{blockClientIds:blockClientIds,blockClientId:blockClientId,blockType:blockType,hasFixedToolbar:hasFixedToolbar,isDistractionFree:isDistractionFree,isValid:isValid,isVisual:isVisual,isContentLocked:isContentLocked}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockMode:getBlockMode,getSelectedBlockClientIds:getSelectedBlockClientIds,isBlockValid:isBlockValid,getBlockRootClientId:getBlockRootClientId,getSettings:getSettings,__unstableGetContentLockingParent:__unstableGetContentLockingParent}=select(store),selectedBlockClientIds=getSelectedBlockClientIds(),selectedBlockClientId=selectedBlockClientIds[0],blockRootClientId=getBlockRootClientId(selectedBlockClientId),settings=getSettings();return{blockClientIds:selectedBlockClientIds,blockClientId:selectedBlockClientId,blockType:selectedBlockClientId&&(0,build_module.ck)(getBlockName(selectedBlockClientId)),hasFixedToolbar:settings.hasFixedToolbar,isDistractionFree:settings.isDistractionFree,rootClientId:blockRootClientId,isValid:selectedBlockClientIds.every((id=>isBlockValid(id))),isVisual:selectedBlockClientIds.every((id=>"visual"===getBlockMode(id))),isContentLocked:!!__unstableGetContentLockingParent(selectedBlockClientId)}}),[]),{toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store),nodeRef=(0,react.useRef)(),{showMovers:showMovers,gestures:showMoversGestures}=useShowMoversGestures({ref:nodeRef,onChange(isFocused){isFocused&&isDistractionFree||toggleBlockHighlight(blockClientId,isFocused)}}),displayHeaderToolbar=(0,use_viewport_match.Z)("medium","<")||hasFixedToolbar;if(blockType&&!(0,build_module.zb)(blockType,"__experimentalToolbar",!0))return null;const shouldShowMovers=displayHeaderToolbar||showMovers;if(0===blockClientIds.length)return null;const shouldShowVisualToolbar=isValid&&isVisual,isMultiToolbar=blockClientIds.length>1,isSynced=(0,build_module.vr)(blockType)||(0,build_module.zQ)(blockType),classes=classnames_default()("block-editor-block-toolbar",{"is-showing-movers":shouldShowMovers,"is-synced":isSynced});return(0,react.createElement)("div",{className:classes},!isMultiToolbar&&!displayHeaderToolbar&&!isContentLocked&&(0,react.createElement)(BlockParentSelector,null),(0,react.createElement)("div",(0,esm_extends.Z)({ref:nodeRef},showMoversGestures),(shouldShowVisualToolbar||isMultiToolbar)&&!isContentLocked&&(0,react.createElement)(toolbar_group.Z,{className:"block-editor-block-toolbar__block-controls"},(0,react.createElement)(block_switcher,{clientIds:blockClientIds}),!isMultiToolbar&&(0,react.createElement)(BlockLockToolbar,{clientId:blockClientIds[0]}),(0,react.createElement)(block_mover,{clientIds:blockClientIds,hideDragHandle:hideDragHandle}))),shouldShowVisualToolbar&&isMultiToolbar&&(0,react.createElement)(convert_to_group_buttons_toolbar,null),shouldShowVisualToolbar&&(0,react.createElement)(react.Fragment,null,(0,react.createElement)(block_controls.Slot,{group:"parent",className:"block-editor-block-toolbar__slot"}),(0,react.createElement)(block_controls.Slot,{group:"block",className:"block-editor-block-toolbar__slot"}),(0,react.createElement)(block_controls.Slot,{className:"block-editor-block-toolbar__slot"}),(0,react.createElement)(block_controls.Slot,{group:"inline",className:"block-editor-block-toolbar__slot"}),(0,react.createElement)(block_controls.Slot,{group:"other",className:"block-editor-block-toolbar__slot"}),(0,react.createElement)(block_name_context.Provider,{value:null==blockType?void 0:blockType.name},(0,react.createElement)(block_toolbar_last_item.Slot,null))),(0,react.createElement)(BlockEditVisuallyButton,{clientIds:blockClientIds}),!isContentLocked&&(0,react.createElement)(block_settings_menu,{clientIds:blockClientIds}))};var block_contextual_toolbar=function BlockContextualToolbar(_ref){let{focusOnMount:focusOnMount,isFixed:isFixed,...props}=_ref;const{blockType:blockType,hasParents:hasParents,showParentSelector:showParentSelector}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockParents:getBlockParents,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableGetContentLockingParent:__unstableGetContentLockingParent}=select(store),{getBlockType:getBlockType}=select(build_module.h),selectedBlockClientIds=getSelectedBlockClientIds(),selectedBlockClientId=selectedBlockClientIds[0],parents=getBlockParents(selectedBlockClientId),parentBlockType=getBlockType(getBlockName(parents[parents.length-1]));return{blockType:selectedBlockClientId&&getBlockType(getBlockName(selectedBlockClientId)),hasParents:parents.length,showParentSelector:parentBlockType&&(0,build_module.zb)(parentBlockType,"__experimentalParentSelector",!0)&&selectedBlockClientIds.length<=1&&!__unstableGetContentLockingParent(selectedBlockClientId)}}),[]);if(blockType&&!(0,build_module.zb)(blockType,"__experimentalToolbar",!0))return null;const classes=classnames_default()("block-editor-block-contextual-toolbar",{"has-parent":hasParents&&showParentSelector,"is-fixed":isFixed});return(0,react.createElement)(navigable_toolbar,(0,esm_extends.Z)({focusOnMount:focusOnMount,className:classes,"aria-label":(0,i18n_build_module.__)("Block tools")},props),(0,react.createElement)(block_toolbar,{hideDragHandle:isFixed}))};const COMMON_PROPS={placement:"top-start"},DEFAULT_PROPS={...COMMON_PROPS,flip:!1,shift:!0},RESTRICTED_HEIGHT_PROPS={...COMMON_PROPS,flip:!0,shift:!1};function getProps(contentElement,selectedBlockElement,toolbarHeight){if(!contentElement||!selectedBlockElement)return DEFAULT_PROPS;const blockRect=selectedBlockElement.getBoundingClientRect(),contentRect=contentElement.getBoundingClientRect(),viewportHeight=contentElement.ownerDocument.documentElement.clientHeight,hasSpaceForToolbarAbove=blockRect.top-contentRect.top>toolbarHeight,isBlockTallerThanViewport=blockRect.height>viewportHeight-toolbarHeight;return hasSpaceForToolbarAbove||isBlockTallerThanViewport?DEFAULT_PROPS:RESTRICTED_HEIGHT_PROPS}function selected_block_popover_selector(select){const{__unstableGetEditorMode:__unstableGetEditorMode,isMultiSelecting:isMultiSelecting,hasMultiSelection:hasMultiSelection,isTyping:isTyping,__experimentalIsBlockInterfaceHidden:isBlockInterfaceHidden,getSettings:getSettings,getLastMultiSelectedBlockClientId:getLastMultiSelectedBlockClientId}=select(store);return{editorMode:__unstableGetEditorMode(),isMultiSelecting:isMultiSelecting(),isTyping:isTyping(),isBlockInterfaceHidden:isBlockInterfaceHidden(),hasFixedToolbar:getSettings().hasFixedToolbar,isDistractionFree:getSettings().isDistractionFree,lastClientId:hasMultiSelection()?getLastMultiSelectedBlockClientId():null}}function SelectedBlockPopover(_ref){let{clientId:clientId,rootClientId:rootClientId,isEmptyDefaultBlock:isEmptyDefaultBlock,showContents:showContents,capturingClientId:capturingClientId,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref;const{editorMode:editorMode,isMultiSelecting:isMultiSelecting,isTyping:isTyping,isBlockInterfaceHidden:isBlockInterfaceHidden,hasFixedToolbar:hasFixedToolbar,isDistractionFree:isDistractionFree,lastClientId:lastClientId}=(0,use_select.Z)(selected_block_popover_selector,[]),isInsertionPointVisible=(0,use_select.Z)((select=>{const{isBlockInsertionPointVisible:isBlockInsertionPointVisible,getBlockInsertionPoint:getBlockInsertionPoint,getBlockOrder:getBlockOrder}=select(store);if(!isBlockInsertionPointVisible())return!1;const insertionPoint=getBlockInsertionPoint();return getBlockOrder(insertionPoint.rootClientId)[insertionPoint.index]===clientId}),[clientId]),isLargeViewport=(0,use_viewport_match.Z)("medium"),isToolbarForced=(0,react.useRef)(!1),{stopTyping:stopTyping}=(0,use_dispatch.Z)(store),showEmptyBlockSideInserter=!isTyping&&"edit"===editorMode&&isEmptyDefaultBlock,shouldShowBreadcrumb="navigation"===editorMode||"zoom-out"===editorMode,shouldShowContextualToolbar="edit"===editorMode&&!hasFixedToolbar&&isLargeViewport&&!isMultiSelecting&&!showEmptyBlockSideInserter&&!isTyping&&!isBlockInterfaceHidden,canFocusHiddenToolbar=!("edit"!==editorMode||shouldShowContextualToolbar||hasFixedToolbar||isDistractionFree||isEmptyDefaultBlock);(0,keyboard_shortcuts_build_module.bx)("core/block-editor/focus-toolbar",(()=>{isToolbarForced.current=!0,stopTyping(!0)}),{isDisabled:!canFocusHiddenToolbar}),(0,react.useEffect)((()=>{isToolbarForced.current=!1}));const initialToolbarItemIndexRef=(0,react.useRef)(),popoverProps=function useBlockToolbarPopoverProps(_ref){let{contentElement:contentElement,clientId:clientId}=_ref;const selectedBlockElement=useBlockElement(clientId),[toolbarHeight,setToolbarHeight]=(0,react.useState)(0),[props,setProps]=(0,react.useState)((()=>getProps(contentElement,selectedBlockElement,toolbarHeight))),blockIndex=(0,use_select.Z)((select=>select(store).getBlockIndex(clientId)),[clientId]),popoverRef=(0,use_ref_effect.Z)((popoverNode=>{setToolbarHeight(popoverNode.offsetHeight)}),[]),updateProps=(0,react.useCallback)((()=>setProps(getProps(contentElement,selectedBlockElement,toolbarHeight))),[contentElement,selectedBlockElement,toolbarHeight]);return(0,react.useLayoutEffect)(updateProps,[blockIndex,updateProps]),(0,react.useLayoutEffect)((()=>{var _contentElement$owner,_contentView$addEvent,_selectedBlockElement;if(!contentElement||!selectedBlockElement)return;const contentView=null==contentElement||null===(_contentElement$owner=contentElement.ownerDocument)||void 0===_contentElement$owner?void 0:_contentElement$owner.defaultView;let resizeObserver;null==contentView||null===(_contentView$addEvent=contentView.addEventHandler)||void 0===_contentView$addEvent||_contentView$addEvent.call(contentView,"resize",updateProps);const blockView=null==selectedBlockElement||null===(_selectedBlockElement=selectedBlockElement.ownerDocument)||void 0===_selectedBlockElement?void 0:_selectedBlockElement.defaultView;return blockView.ResizeObserver&&(resizeObserver=new blockView.ResizeObserver(updateProps),resizeObserver.observe(selectedBlockElement)),()=>{var _contentView$removeEv;null==contentView||null===(_contentView$removeEv=contentView.removeEventHandler)||void 0===_contentView$removeEv||_contentView$removeEv.call(contentView,"resize",updateProps),resizeObserver&&resizeObserver.disconnect()}}),[updateProps,contentElement,selectedBlockElement]),{...props,ref:popoverRef}}({contentElement:null==__unstableContentRef?void 0:__unstableContentRef.current,clientId:clientId});return shouldShowBreadcrumb||shouldShowContextualToolbar||showEmptyBlockSideInserter?(0,react.createElement)(react.Fragment,null,showEmptyBlockSideInserter&&(0,react.createElement)(block_popover,(0,esm_extends.Z)({clientId:capturingClientId||clientId,__unstableCoverTarget:!0,bottomClientId:lastClientId,className:classnames_default()("block-editor-block-list__block-side-inserter-popover",{"is-insertion-point-visible":isInsertionPointVisible}),__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,resize:!1,shift:!1},popoverProps),(0,react.createElement)("div",{className:"block-editor-block-list__empty-block-inserter"},(0,react.createElement)(inserter,{position:"bottom right",rootClientId:rootClientId,clientId:clientId,__experimentalIsQuick:!0}))),(shouldShowBreadcrumb||shouldShowContextualToolbar)&&(0,react.createElement)(block_popover,(0,esm_extends.Z)({clientId:capturingClientId||clientId,bottomClientId:lastClientId,className:classnames_default()("block-editor-block-list__block-popover",{"is-insertion-point-visible":isInsertionPointVisible}),__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,resize:!1},popoverProps),shouldShowContextualToolbar&&showContents&&(0,react.createElement)(block_contextual_toolbar,{focusOnMount:isToolbarForced.current,__experimentalInitialIndex:initialToolbarItemIndexRef.current,__experimentalOnIndexChange:index=>{initialToolbarItemIndexRef.current=index},key:clientId}),shouldShowBreadcrumb&&(0,react.createElement)(block_selection_button,{clientId:clientId,rootClientId:rootClientId}))):null}function wrapperSelector(select){const{getSelectedBlockClientId:getSelectedBlockClientId,getFirstMultiSelectedBlockClientId:getFirstMultiSelectedBlockClientId,getBlockRootClientId:getBlockRootClientId,getBlock:getBlock,getBlockParents:getBlockParents,getSettings:getSettings,isNavigationMode:_isNavigationMode,__experimentalGetBlockListSettingsForBlocks:__experimentalGetBlockListSettingsForBlocks}=select(store),clientId=getSelectedBlockClientId()||getFirstMultiSelectedBlockClientId();if(!clientId)return;const{name:name,attributes:attributes={}}=getBlock(clientId)||{},blockParentsClientIds=getBlockParents(clientId),parentBlockListSettings=__experimentalGetBlockListSettingsForBlocks(blockParentsClientIds),capturingClientId=blockParentsClientIds.find((parentClientId=>{var _parentBlockListSetti;return null===(_parentBlockListSetti=parentBlockListSettings[parentClientId])||void 0===_parentBlockListSetti?void 0:_parentBlockListSetti.__experimentalCaptureToolbars})),settings=getSettings();return{clientId:clientId,rootClientId:getBlockRootClientId(clientId),name:name,isDistractionFree:settings.isDistractionFree,isNavigationMode:_isNavigationMode(),isEmptyDefaultBlock:name&&(0,build_module.ZP)({name:name,attributes:attributes}),capturingClientId:capturingClientId}}function WrappedBlockPopover(_ref2){let{__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref2;const selected=(0,use_select.Z)(wrapperSelector,[]);if(!selected)return null;const{clientId:clientId,rootClientId:rootClientId,name:name,isEmptyDefaultBlock:isEmptyDefaultBlock,capturingClientId:capturingClientId,isDistractionFree:isDistractionFree,isNavigationMode:isNavigationMode}=selected;return name?(0,react.createElement)(SelectedBlockPopover,{clientId:clientId,rootClientId:rootClientId,isEmptyDefaultBlock:isEmptyDefaultBlock,showContents:!isDistractionFree||isNavigationMode,capturingClientId:capturingClientId,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}):null}function BlockToolsBackCompat(_ref){let{children:children}=_ref;const openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),isDisabled=(0,react.useContext)(disabled.Z.Context);return openRef||isDisabled?children:((0,deprecated_build_module.Z)('wp.components.Popover.Slot name="block-toolbar"',{alternative:"wp.blockEditor.BlockTools",since:"5.8",version:"6.3"}),(0,react.createElement)(InsertionPoint,{__unstablePopoverSlot:"block-toolbar"},(0,react.createElement)(WrappedBlockPopover,{__unstablePopoverSlot:"block-toolbar"}),children))}var with_client_id=(0,create_higher_order_component.o)((WrappedComponent=>props=>{const{clientId:clientId}=useBlockEditContext();return(0,react.createElement)(WrappedComponent,(0,esm_extends.Z)({},props,{clientId:clientId}))}),"withClientId");var inner_blocks_button_block_appender=with_client_id((_ref=>{let{clientId:clientId,showSeparator:showSeparator,isFloating:isFloating,onAddBlock:onAddBlock,isToggle:isToggle}=_ref;return(0,react.createElement)(button_block_appender,{className:classnames_default()({"block-list-appender__toggle":isToggle}),rootClientId:clientId,showSeparator:showSeparator,isFloating:isFloating,onAddBlock:onAddBlock})}));var inner_blocks_default_block_appender=(0,compose.Z)([with_client_id,(0,with_select.Z)(((select,_ref2)=>{let{clientId:clientId}=_ref2;const{getBlockOrder:getBlockOrder}=select(store),blockClientIds=getBlockOrder(clientId);return{lastBlockClientId:blockClientIds[blockClientIds.length-1]}}))])((_ref=>{let{clientId:clientId}=_ref;return(0,react.createElement)(default_block_appender,{rootClientId:clientId})}));const pendingSettingsUpdates=new WeakMap;const BLOCK_CONTEXT_CACHE=new WeakMap;function getBlockContext(attributes,blockType){BLOCK_CONTEXT_CACHE.has(blockType)||BLOCK_CONTEXT_CACHE.set(blockType,new WeakMap);const blockTypeCache=BLOCK_CONTEXT_CACHE.get(blockType);if(!blockTypeCache.has(attributes)){const context=(0,lodash.mapValues)(blockType.providesContext,(attributeName=>attributes[attributeName]));blockTypeCache.set(attributes,context)}return blockTypeCache.get(attributes)}var use_throttle=__webpack_require__("./packages/compose/build-module/hooks/use-throttle/index.js"),use_drop_zone=__webpack_require__("./packages/compose/build-module/hooks/use-drop-zone/index.js"),data_transfer=__webpack_require__("./packages/dom/build-module/data-transfer.js");function onBlockDrop(targetRootClientId,targetBlockIndex,getBlockIndex,getClientIdsOfDescendants,moveBlocks,insertOrReplaceBlocks,clearSelectedBlock){return event=>{const{srcRootClientId:sourceRootClientId,srcClientIds:sourceClientIds,type:dropType,blocks:blocks}=function parseDropEvent(event){let result={srcRootClientId:null,srcClientIds:null,srcIndex:null,type:null,blocks:null};if(!event.dataTransfer)return result;try{result=Object.assign(result,JSON.parse(event.dataTransfer.getData("wp-blocks")))}catch(err){return result}return result}(event);if("inserter"===dropType){clearSelectedBlock();const blocksToInsert=blocks.map((block=>(0,build_module.Wm)(block)));insertOrReplaceBlocks(blocksToInsert,!0,null)}if("block"===dropType){const sourceBlockIndex=getBlockIndex(sourceClientIds[0]);if(sourceRootClientId===targetRootClientId&&sourceBlockIndex===targetBlockIndex)return;if(sourceClientIds.includes(targetRootClientId)||getClientIdsOfDescendants(sourceClientIds).some((id=>id===targetRootClientId)))return;const isAtSameLevel=sourceRootClientId===targetRootClientId,draggedBlockCount=sourceClientIds.length;moveBlocks(sourceClientIds,sourceRootClientId,isAtSameLevel&&sourceBlockIndex<targetBlockIndex?targetBlockIndex-draggedBlockCount:targetBlockIndex)}}}function onFilesDrop(targetRootClientId,targetBlockIndex,hasUploadPermissions,updateBlockAttributes,canInsertBlockType,insertOrReplaceBlocks){return files=>{if(!hasUploadPermissions)return;const transformation=(0,build_module.MC)((0,build_module.Xn)("from"),(transform=>"files"===transform.type&&canInsertBlockType(transform.blockName,targetRootClientId)&&transform.isMatch(files)));if(transformation){const blocks=transformation.transform(files,updateBlockAttributes);insertOrReplaceBlocks(blocks)}}}function onHTMLDrop(targetRootClientId,targetBlockIndex,insertOrReplaceBlocks){return HTML=>{const blocks=(0,build_module.ag)({HTML:HTML,mode:"BLOCKS"});blocks.length&&insertOrReplaceBlocks(blocks)}}function useOnBlockDrop(targetRootClientId,targetBlockIndex){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{operation:operation="insert"}=options,hasUploadPermissions=(0,use_select.Z)((select=>select(store).getSettings().mediaUpload),[]),{canInsertBlockType:canInsertBlockType,getBlockIndex:getBlockIndex,getClientIdsOfDescendants:getClientIdsOfDescendants,getBlockOrder:getBlockOrder,getBlocksByClientId:getBlocksByClientId}=(0,use_select.Z)(store),{insertBlocks:insertBlocks,moveBlocksToPosition:moveBlocksToPosition,updateBlockAttributes:updateBlockAttributes,clearSelectedBlock:clearSelectedBlock,replaceBlocks:replaceBlocks,removeBlocks:removeBlocks}=(0,use_dispatch.Z)(store),registry=(0,use_registry.Z)(),insertOrReplaceBlocks=(0,react.useCallback)((function(blocks){let updateSelection=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],initialPosition=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("replace"===operation){const clientId=getBlockOrder(targetRootClientId)[targetBlockIndex];replaceBlocks(clientId,blocks,void 0,initialPosition)}else insertBlocks(blocks,targetBlockIndex,targetRootClientId,updateSelection,initialPosition)}),[operation,getBlockOrder,insertBlocks,replaceBlocks,targetBlockIndex,targetRootClientId]),moveBlocks=(0,react.useCallback)(((sourceClientIds,sourceRootClientId,insertIndex)=>{if("replace"===operation){const sourceBlocks=getBlocksByClientId(sourceClientIds),targetBlockClientId=getBlockOrder(targetRootClientId)[targetBlockIndex];registry.batch((()=>{removeBlocks(sourceClientIds,!1),replaceBlocks(targetBlockClientId,sourceBlocks,void 0,0)}))}else moveBlocksToPosition(sourceClientIds,sourceRootClientId,targetRootClientId,insertIndex)}),[operation,getBlockOrder,getBlocksByClientId,insertBlocks,moveBlocksToPosition,removeBlocks,targetBlockIndex,targetRootClientId]),_onDrop=onBlockDrop(targetRootClientId,targetBlockIndex,getBlockIndex,getClientIdsOfDescendants,moveBlocks,insertOrReplaceBlocks,clearSelectedBlock),_onFilesDrop=onFilesDrop(targetRootClientId,0,hasUploadPermissions,updateBlockAttributes,canInsertBlockType,insertOrReplaceBlocks),_onHTMLDrop=onHTMLDrop(0,0,insertOrReplaceBlocks);return event=>{const files=(0,data_transfer.f)(event.dataTransfer),html=event.dataTransfer.getData("text/html");html?_onHTMLDrop(html):files.length?_onFilesDrop(files):_onDrop(event)}}function getDistanceFromPointToEdge(point,rect,edge){const isHorizontal="top"===edge||"bottom"===edge,{x:x,y:y}=point,pointLateralPosition=isHorizontal?x:y,pointForwardPosition=isHorizontal?y:x,edgeStart=isHorizontal?rect.left:rect.top,edgeEnd=isHorizontal?rect.right:rect.bottom,edgeForwardPosition=rect[edge];let edgeLateralPosition;return edgeLateralPosition=pointLateralPosition>=edgeStart&&pointLateralPosition<=edgeEnd?pointLateralPosition:pointLateralPosition<edgeEnd?edgeStart:edgeEnd,Math.sqrt((pointLateralPosition-edgeLateralPosition)**2+(pointForwardPosition-edgeForwardPosition)**2)}function getDistanceToNearestEdge(point,rect){let candidateDistance,candidateEdge,allowedEdges=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["top","bottom","left","right"];return allowedEdges.forEach((edge=>{const distance=getDistanceFromPointToEdge(point,rect,edge);(void 0===candidateDistance||distance<candidateDistance)&&(candidateDistance=distance,candidateEdge=edge)})),[candidateDistance,candidateEdge]}function isPointContainedByRect(point,rect){return rect.left<=point.x&&rect.right>=point.x&&rect.top<=point.y&&rect.bottom>=point.y}function getDropTargetPosition(blocksData,position){var _blocksData$nearestIn,_blocksData$adjacentI;let orientation=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical";const allowedEdges="horizontal"===orientation?["left","right"]:["top","bottom"],isRightToLeft=(0,i18n_build_module.dZ)();let nearestIndex=0,insertPosition="before",minDistance=1/0;blocksData.forEach((_ref=>{let{isUnmodifiedDefaultBlock:isUnmodifiedDefaultBlock,getBoundingClientRect:getBoundingClientRect,blockIndex:blockIndex}=_ref;const rect=getBoundingClientRect();let[distance,edge]=getDistanceToNearestEdge(position,rect,allowedEdges);isUnmodifiedDefaultBlock&&isPointContainedByRect(position,rect)&&(distance=0),distance<minDistance&&(insertPosition="bottom"===edge||!isRightToLeft&&"right"===edge||isRightToLeft&&"left"===edge?"after":"before",minDistance=distance,nearestIndex=blockIndex)}));const adjacentIndex=nearestIndex+("after"===insertPosition?1:-1),isNearestBlockUnmodifiedDefaultBlock=!(null===(_blocksData$nearestIn=blocksData[nearestIndex])||void 0===_blocksData$nearestIn||!_blocksData$nearestIn.isUnmodifiedDefaultBlock),isAdjacentBlockUnmodifiedDefaultBlock=!(null===(_blocksData$adjacentI=blocksData[adjacentIndex])||void 0===_blocksData$adjacentI||!_blocksData$adjacentI.isUnmodifiedDefaultBlock);if(!isNearestBlockUnmodifiedDefaultBlock&&!isAdjacentBlockUnmodifiedDefaultBlock){return["after"===insertPosition?nearestIndex+1:nearestIndex,"insert"]}return[isNearestBlockUnmodifiedDefaultBlock?nearestIndex:adjacentIndex,"replace"]}function useBlockDropZone(){let{rootClientId:targetRootClientId=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[dropTarget,setDropTarget]=(0,react.useState)({index:null,operation:"insert"}),isDisabled=(0,use_select.Z)((select=>{const{getTemplateLock:getTemplateLock,__unstableIsWithinBlockOverlay:__unstableIsWithinBlockOverlay,__unstableHasActiveBlockOverlayActive:__unstableHasActiveBlockOverlayActive}=select(store),templateLock=getTemplateLock(targetRootClientId);return["all","contentOnly"].some((lock=>lock===templateLock))||__unstableHasActiveBlockOverlayActive(targetRootClientId)||__unstableIsWithinBlockOverlay(targetRootClientId)}),[targetRootClientId]),{getBlockListSettings:getBlockListSettings,getBlocks:getBlocks,getBlockIndex:getBlockIndex}=(0,use_select.Z)(store),{showInsertionPoint:showInsertionPoint,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store),onBlockDrop=useOnBlockDrop(targetRootClientId,dropTarget.index,{operation:dropTarget.operation}),throttled=(0,use_throttle.Z)((0,react.useCallback)(((event,ownerDocument)=>{var _getBlockListSettings;const blocks=getBlocks(targetRootClientId);if(0===blocks.length)return void setDropTarget({index:0,operation:"insert"});const blocksData=blocks.map((block=>{const clientId=block.clientId;return{isUnmodifiedDefaultBlock:(0,build_module.ZP)(block),getBoundingClientRect:()=>ownerDocument.getElementById(`block-${clientId}`).getBoundingClientRect(),blockIndex:getBlockIndex(clientId)}})),[targetIndex,operation]=getDropTargetPosition(blocksData,{x:event.clientX,y:event.clientY},null===(_getBlockListSettings=getBlockListSettings(targetRootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation);setDropTarget({index:targetIndex,operation:operation}),showInsertionPoint(targetRootClientId,targetIndex,{operation:operation})}),[targetRootClientId]),200);return(0,use_drop_zone.Z)({isDisabled:isDisabled,onDrop:onBlockDrop,onDragOver(event){throttled(event,event.currentTarget.ownerDocument)},onDragLeave(){throttled.cancel(),hideInsertionPoint()},onDragEnd(){throttled.cancel(),hideInsertionPoint()}})}function UncontrolledInnerBlocks(props){const{clientId:clientId,allowedBlocks:allowedBlocks,__experimentalDefaultBlock:__experimentalDefaultBlock,__experimentalDirectInsert:__experimentalDirectInsert,template:template,templateLock:templateLock,wrapperRef:wrapperRef,templateInsertUpdatesSelection:templateInsertUpdatesSelection,__experimentalCaptureToolbars:captureToolbars,__experimentalAppenderTagName:__experimentalAppenderTagName,renderAppender:renderAppender,orientation:orientation,placeholder:placeholder,__experimentalLayout:__experimentalLayout}=props;!function useNestedSettingsUpdate(clientId,allowedBlocks,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,captureToolbars,orientation,layout){const{updateBlockListSettings:updateBlockListSettings}=(0,use_dispatch.Z)(store),registry=(0,use_registry.Z)(),{blockListSettings:blockListSettings,parentLock:parentLock}=(0,use_select.Z)((select=>{const rootClientId=select(store).getBlockRootClientId(clientId);return{blockListSettings:select(store).getBlockListSettings(clientId),parentLock:select(store).getTemplateLock(rootClientId)}}),[clientId]),_allowedBlocks=(0,react.useMemo)((()=>allowedBlocks),allowedBlocks);(0,react.useLayoutEffect)((()=>{const newSettings={allowedBlocks:_allowedBlocks,templateLock:void 0===templateLock||"contentOnly"===parentLock?parentLock:templateLock};if(void 0!==captureToolbars&&(newSettings.__experimentalCaptureToolbars=captureToolbars),void 0!==orientation)newSettings.orientation=orientation;else{const layoutType=layouts_getLayoutType(null==layout?void 0:layout.type);newSettings.orientation=layoutType.getOrientation(layout)}void 0!==__experimentalDefaultBlock&&(newSettings.__experimentalDefaultBlock=__experimentalDefaultBlock),void 0!==__experimentalDirectInsert&&(newSettings.__experimentalDirectInsert=__experimentalDirectInsert),(0,is_shallow_equal_build_module.ZP)(blockListSettings,newSettings)||(pendingSettingsUpdates.get(registry)||pendingSettingsUpdates.set(registry,[]),pendingSettingsUpdates.get(registry).push([clientId,newSettings]),window.queueMicrotask((()=>{var _pendingSettingsUpdat;null!==(_pendingSettingsUpdat=pendingSettingsUpdates.get(registry))&&void 0!==_pendingSettingsUpdat&&_pendingSettingsUpdat.length&&registry.batch((()=>{pendingSettingsUpdates.get(registry).forEach((args=>{updateBlockListSettings(...args)})),pendingSettingsUpdates.set(registry,[])}))})))}),[clientId,blockListSettings,_allowedBlocks,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,parentLock,captureToolbars,orientation,updateBlockListSettings,layout,registry])}(clientId,allowedBlocks,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,captureToolbars,orientation,__experimentalLayout),function useInnerBlockTemplateSync(clientId,template,templateLock,templateInsertUpdatesSelection){const{getBlocks:getBlocks,getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,isBlockSelected:isBlockSelected}=(0,use_select.Z)(store),{replaceInnerBlocks:replaceInnerBlocks,__unstableMarkNextChangeAsNotPersistent:__unstableMarkNextChangeAsNotPersistent}=(0,use_dispatch.Z)(store),{innerBlocks:innerBlocks}=(0,use_select.Z)((select=>({innerBlocks:select(store).getBlocks(clientId)})),[clientId]),existingTemplate=(0,react.useRef)(null);(0,react.useLayoutEffect)((()=>{let isCancelled=!1;return window.queueMicrotask((()=>{if(isCancelled)return;const currentInnerBlocks=getBlocks(clientId),shouldApplyTemplate=0===currentInnerBlocks.length||"all"===templateLock||"contentOnly"===templateLock,hasTemplateChanged=!es6_default()(template,existingTemplate.current);if(!shouldApplyTemplate||!hasTemplateChanged)return;existingTemplate.current=template;const nextBlocks=(0,build_module.fw)(currentInnerBlocks,template);es6_default()(nextBlocks,currentInnerBlocks)||(__unstableMarkNextChangeAsNotPersistent(),replaceInnerBlocks(clientId,nextBlocks,0===currentInnerBlocks.length&&templateInsertUpdatesSelection&&0!==nextBlocks.length&&isBlockSelected(clientId),getSelectedBlocksInitialCaretPosition()))})),()=>{isCancelled=!0}}),[innerBlocks,template,templateLock,clientId])}(clientId,template,templateLock,templateInsertUpdatesSelection);const{context:context,name:name}=(0,use_select.Z)((select=>{const block=select(store).getBlock(clientId);if(!block)return{};const blockType=(0,build_module.ck)(block.name);return blockType&&blockType.providesContext?{context:getBlockContext(block.attributes,blockType),name:block.name}:{}}),[clientId]),{allowSizingOnChildren:allowSizingOnChildren=!1}=(0,build_module.Dx)(name,"__experimentalLayout")||{},layout=(0,react.useMemo)((()=>({...__experimentalLayout,...allowSizingOnChildren&&{allowSizingOnChildren:!0}})),[__experimentalLayout,allowSizingOnChildren]);return(0,react.createElement)(BlockContextProvider,{value:context},(0,react.createElement)(BlockListItems,{rootClientId:clientId,renderAppender:renderAppender,__experimentalAppenderTagName:__experimentalAppenderTagName,__experimentalLayout:layout,wrapperRef:wrapperRef,placeholder:placeholder}))}function ControlledInnerBlocks(props){return useBlockSync(props),(0,react.createElement)(UncontrolledInnerBlocks,props)}const ForwardedInnerBlocks=(0,react.forwardRef)(((props,ref)=>{const innerBlocksProps=useInnerBlocksProps({ref:ref},props);return(0,react.createElement)("div",{className:"block-editor-inner-blocks"},(0,react.createElement)("div",innerBlocksProps))}));function useInnerBlocksProps(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{__unstableDisableLayoutClassNames:__unstableDisableLayoutClassNames,__unstableDisableDropZone:__unstableDisableDropZone}=options,{clientId:clientId,__unstableLayoutClassNames:layoutClassNames=""}=useBlockEditContext(),isSmallScreen=(0,use_viewport_match.Z)("medium","<"),{__experimentalCaptureToolbars:__experimentalCaptureToolbars,hasOverlay:hasOverlay}=(0,use_select.Z)((select=>{if(!clientId)return{};const{getBlockName:getBlockName,isBlockSelected:isBlockSelected,hasSelectedInnerBlock:hasSelectedInnerBlock,__unstableGetEditorMode:__unstableGetEditorMode}=select(store),blockName=getBlockName(clientId),enableClickThrough="navigation"===__unstableGetEditorMode()||isSmallScreen;return{__experimentalCaptureToolbars:select(build_module.h).hasBlockSupport(blockName,"__experimentalExposeControlsToChildren",!1),hasOverlay:"core/template"!==blockName&&!isBlockSelected(clientId)&&!hasSelectedInnerBlock(clientId,!0)&&enableClickThrough}}),[clientId,isSmallScreen]),blockDropZoneRef=useBlockDropZone({rootClientId:clientId}),ref=(0,use_merge_refs.Z)([props.ref,__unstableDisableDropZone?null:blockDropZoneRef]),innerBlocksProps={__experimentalCaptureToolbars:__experimentalCaptureToolbars,...options},InnerBlocks=innerBlocksProps.value&&innerBlocksProps.onChange?ControlledInnerBlocks:UncontrolledInnerBlocks;return{...props,ref:ref,className:classnames_default()(props.className,"block-editor-block-list__layout",__unstableDisableLayoutClassNames?"":layoutClassNames,{"has-overlay":hasOverlay}),children:clientId?(0,react.createElement)(InnerBlocks,(0,esm_extends.Z)({},innerBlocksProps,{clientId:clientId})):(0,react.createElement)(BlockListItems,options)}}useInnerBlocksProps.save=build_module.cZ,ForwardedInnerBlocks.DefaultBlockAppender=inner_blocks_default_block_appender,ForwardedInnerBlocks.ButtonBlockAppender=inner_blocks_button_block_appender,ForwardedInnerBlocks.Content=()=>useInnerBlocksProps.save().children;var inner_blocks=ForwardedInnerBlocks;const elementContext=(0,react.createContext)(),IntersectionObserver=(0,react.createContext)(),pendingBlockVisibilityUpdatesPerRegistry=new WeakMap;function Root(_ref){let{className:className,...settings}=_ref;const[element,setElement]=(0,react.useState)(),isLargeViewport=(0,use_viewport_match.Z)("medium"),{isOutlineMode:isOutlineMode,isFocusMode:isFocusMode,editorMode:editorMode}=(0,use_select.Z)((select=>{const{getSettings:getSettings,__unstableGetEditorMode:__unstableGetEditorMode}=select(store),{outlineMode:outlineMode,focusMode:focusMode}=getSettings();return{isOutlineMode:outlineMode,isFocusMode:focusMode,editorMode:__unstableGetEditorMode()}}),[]),registry=(0,use_registry.Z)(),{setBlockVisibility:setBlockVisibility}=(0,use_dispatch.Z)(store),delayedBlockVisibilityUpdates=(0,use_debounce.Z)((0,react.useCallback)((()=>{const updates={};pendingBlockVisibilityUpdatesPerRegistry.get(registry).forEach((_ref2=>{let[id,isIntersecting]=_ref2;updates[id]=isIntersecting})),setBlockVisibility(updates)}),[registry]),300,{trailing:!0}),intersectionObserver=(0,react.useMemo)((()=>{const{IntersectionObserver:Observer}=window;if(Observer)return new Observer((entries=>{pendingBlockVisibilityUpdatesPerRegistry.get(registry)||pendingBlockVisibilityUpdatesPerRegistry.set(registry,[]);for(const entry of entries){const clientId=entry.target.getAttribute("data-block");pendingBlockVisibilityUpdatesPerRegistry.get(registry).push([clientId,entry.isIntersecting])}delayedBlockVisibilityUpdates()}))}),[]),innerBlocksProps=useInnerBlocksProps({ref:(0,use_merge_refs.Z)([useBlockSelectionClearer(),useInBetweenInserter(),setElement]),className:classnames_default()("is-root-container",className,{"is-outline-mode":isOutlineMode,"is-focus-mode":isFocusMode&&isLargeViewport,"is-navigate-mode":"navigation"===editorMode})},settings);return(0,react.createElement)(elementContext.Provider,{value:element},(0,react.createElement)(IntersectionObserver.Provider,{value:intersectionObserver},(0,react.createElement)("div",innerBlocksProps)))}function BlockList(settings){return function usePreParsePatterns(){const{patterns:patterns,isPreviewMode:isPreviewMode}=(0,use_select.Z)((_select=>{const{__experimentalBlockPatterns:__experimentalBlockPatterns,__unstableIsPreviewMode:__unstableIsPreviewMode}=_select(store).getSettings();return{patterns:__experimentalBlockPatterns,isPreviewMode:__unstableIsPreviewMode}}),[]);return(0,react.useEffect)((()=>{if(isPreviewMode)return;if(null==patterns||!patterns.length)return;let handle,index=-1;const callback=()=>{index++,index>=patterns.length||((0,data_build_module.Ys)(store).__experimentalGetParsedPattern(patterns[index].name),handle=requestIdleCallback(callback))};return handle=requestIdleCallback(callback),()=>cancelIdleCallback(handle)}),[patterns,isPreviewMode]),null}(),(0,react.createElement)(BlockToolsBackCompat,null,(0,react.createElement)(Provider,{value:DEFAULT_BLOCK_EDIT_CONTEXT},(0,react.createElement)(Root,settings)))}function Items(_ref3){let{placeholder:placeholder,rootClientId:rootClientId,renderAppender:renderAppender,__experimentalAppenderTagName:__experimentalAppenderTagName,__experimentalLayout:layout=defaultLayout}=_ref3;const{order:order,selectedBlocks:selectedBlocks,visibleBlocks:visibleBlocks}=(0,use_select.Z)((select=>{const{getBlockOrder:getBlockOrder,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableGetVisibleBlocks:__unstableGetVisibleBlocks}=select(store);return{order:getBlockOrder(rootClientId),selectedBlocks:getSelectedBlockClientIds(),visibleBlocks:__unstableGetVisibleBlocks()}}),[rootClientId]);return(0,react.createElement)(LayoutProvider,{value:layout},order.map((clientId=>(0,react.createElement)(async_mode_provider_context.ZP,{key:clientId,value:!visibleBlocks.has(clientId)&&!selectedBlocks.includes(clientId)},(0,react.createElement)(block,{rootClientId:rootClientId,clientId:clientId})))),order.length<1&&placeholder,(0,react.createElement)(block_list_appender,{tagName:__experimentalAppenderTagName,rootClientId:rootClientId,renderAppender:renderAppender}))}function BlockListItems(props){return(0,react.createElement)(async_mode_provider_context.ZP,{value:!1},(0,react.createElement)(Items,props))}BlockList.__unstableElementContext=elementContext;var border_box_control_utils=__webpack_require__("./packages/components/build-module/border-box-control/utils.js"),context_connect=__webpack_require__("./packages/components/build-module/ui/context/context-connect.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),rtl=__webpack_require__("./packages/components/build-module/utils/rtl.js"),colors_values=__webpack_require__("./packages/components/build-module/utils/colors-values.js"),config_values=__webpack_require__("./packages/components/build-module/utils/config-values.js");const borderBoxControl=(0,emotion_react_browser_esm.iv)("","","",""),wrapper={name:"bjn8wh",styles:"position:relative"},borderBoxStyleWithFallback=border=>{const{color:color=colors_values.D.gray[200],style:style="solid",width:width=config_values.Z.borderWidth}=border||{};return`${color} ${!!width&&"0"!==width||!!color?style||"solid":style} ${width!==config_values.Z.borderWidth?`clamp(1px, ${width}, 10px)`:width}`},centeredBorderControl={name:"1nwbfnf",styles:"grid-column:span 2;margin:0 auto"};var use_context_system=__webpack_require__("./packages/components/build-module/ui/context/use-context-system.js"),use_cx=__webpack_require__("./packages/components/build-module/utils/hooks/use-cx.js");function useBorderBoxControlLinkedButton(props){const{className:className,size:size="default",...otherProps}=(0,use_context_system.y)(props,"BorderBoxControlLinkedButton"),cx=(0,use_cx.I)();return{...otherProps,className:(0,react.useMemo)((()=>cx((size=>(0,emotion_react_browser_esm.iv)("position:absolute;top:","__unstable-large"===size?"8px":"3px",";",(0,rtl.b)({right:0})()," line-height:0;","","",""))(size),className)),[className,cx,size])}}var border_box_control_linked_button_component=(0,context_connect.Iq)(((props,forwardedRef)=>{const{className:className,isLinked:isLinked,...buttonProps}=useBorderBoxControlLinkedButton(props),label=isLinked?(0,i18n_build_module.__)("Unlink sides"):(0,i18n_build_module.__)("Link sides");return(0,react.createElement)(tooltip.Z,{text:label},(0,react.createElement)(view_component.Z,{className:className},(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({},buttonProps,{isSmall:!0,icon:isLinked?library_link.Z:link_off.Z,iconSize:24,"aria-label":label,ref:forwardedRef}))))}),"BorderBoxControlLinkedButton");function useBorderBoxControlVisualizer(props){const{className:className,value:value,size:size="default",...otherProps}=(0,use_context_system.y)(props,"BorderBoxControlVisualizer"),cx=(0,use_cx.I)();return{...otherProps,className:(0,react.useMemo)((()=>cx(((borders,size)=>(0,emotion_react_browser_esm.iv)("position:absolute;top:","__unstable-large"===size?"20px":"15px",";right:","__unstable-large"===size?"39px":"29px",";bottom:","__unstable-large"===size?"20px":"15px",";left:","__unstable-large"===size?"39px":"29px",";border-top:",borderBoxStyleWithFallback(null==borders?void 0:borders.top),";border-bottom:",borderBoxStyleWithFallback(null==borders?void 0:borders.bottom),";",(0,rtl.b)({borderLeft:borderBoxStyleWithFallback(null==borders?void 0:borders.left)})()," ",(0,rtl.b)({borderRight:borderBoxStyleWithFallback(null==borders?void 0:borders.right)})(),";","","",""))(value,size),className)),[cx,className,value,size]),value:value}}var border_box_control_visualizer_component=(0,context_connect.Iq)(((props,forwardedRef)=>{const{value:value,...otherProps}=useBorderBoxControlVisualizer(props);return(0,react.createElement)(view_component.Z,(0,esm_extends.Z)({},otherProps,{ref:forwardedRef}))}),"BorderBoxControlVisualizer"),close_small=__webpack_require__("./packages/icons/build-module/library/close-small.js"),line_solid=__webpack_require__("./packages/icons/build-module/library/line-solid.js"),line_dashed=__webpack_require__("./packages/icons/build-module/library/line-dashed.js"),line_dotted=__webpack_require__("./packages/icons/build-module/library/line-dotted.js"),base_control_styles=__webpack_require__("./packages/components/build-module/base-control/styles/base-control-styles.js"),box_sizing=__webpack_require__("./packages/components/build-module/utils/box-sizing.js"),space=__webpack_require__("./packages/components/build-module/ui/utils/space.js"),unit_control_styles=__webpack_require__("./packages/components/build-module/unit-control/styles/unit-control-styles.js");const labelStyles={name:"f3vz0n",styles:"font-weight:500"},focusBoxShadow=(0,emotion_react_browser_esm.iv)("box-shadow:inset 0 0 0 ",config_values.Z.borderWidth," ",colors_values.D.ui.borderFocus,";","","",""),borderControl=(0,emotion_react_browser_esm.iv)("border:0;padding:0;margin:0;",box_sizing.p,";","","",""),styles_wrapperWidth=(0,emotion_react_browser_esm.iv)(unit_control_styles.Ke,"{flex:0 0 auto;}","","",""),colorIndicatorWrapper=(border,size)=>{const{style:style}=border||{};return(0,emotion_react_browser_esm.iv)("border-radius:9999px;border:2px solid transparent;",style?(border=>{const{color:color,style:style}=border||{},fallbackColor=style&&"none"!==style?colors_values.D.gray[300]:void 0;return(0,emotion_react_browser_esm.iv)("border-style:","none"===style?"solid":style,";border-color:",color||fallbackColor,";","","","")})(border):void 0," width:","__unstable-large"===size?"24px":"22px",";height:","__unstable-large"===size?"24px":"22px",";padding:","__unstable-large"===size?"2px":"1px",";&>span{height:",(0,space.D)(4),";width:",(0,space.D)(4),";background:linear-gradient(\n\t\t\t\t-45deg,\n\t\t\t\ttransparent 48%,\n\t\t\t\trgb( 0 0 0 / 20% ) 48%,\n\t\t\t\trgb( 0 0 0 / 20% ) 52%,\n\t\t\t\ttransparent 52%\n\t\t\t);}","","","")},borderControlPopoverControls=(0,emotion_react_browser_esm.iv)("width:",228,"px;>div:first-of-type>",base_control_styles.ar,"{margin-bottom:0;",labelStyles,";}&& ",base_control_styles.ar,"+button:not( .has-text ){min-width:24px;padding:0;}","","",""),borderControlPopoverContent=(0,emotion_react_browser_esm.iv)("","","",""),borderColorIndicator=(0,emotion_react_browser_esm.iv)("","","",""),resetButton=(0,emotion_react_browser_esm.iv)("justify-content:center;width:100%;&&{border-top:",config_values.Z.borderWidth," solid ",colors_values.D.gray[200],";border-top-left-radius:0;border-top-right-radius:0;height:46px;}","","",""),borderControlStylePicker=(0,emotion_react_browser_esm.iv)(base_control_styles.ar,"{",labelStyles,";}","","",""),borderStyleButton={name:"1486260",styles:"&&&&&{min-width:30px;width:30px;height:30px;padding:3px;}"};const BORDER_STYLES=[{label:(0,i18n_build_module.__)("Solid"),icon:line_solid.Z,value:"solid"},{label:(0,i18n_build_module.__)("Dashed"),icon:line_dashed.Z,value:"dashed"},{label:(0,i18n_build_module.__)("Dotted"),icon:line_dotted.Z,value:"dotted"}],Label=props=>{const{label:label,hideLabelFromVision:hideLabelFromVision}=props;return label?hideLabelFromVision?(0,react.createElement)(visually_hidden_component.Z,{as:"label"},label):(0,react.createElement)(base_control_styles.ar,null,label):null};var border_control_style_picker_component=(0,context_connect.Iq)(((props,forwardedRef)=>{const{buttonClassName:buttonClassName,hideLabelFromVision:hideLabelFromVision,label:label,onChange:onChange,value:value,...otherProps}=function useBorderControlStylePicker(props){const{className:className,...otherProps}=(0,use_context_system.y)(props,"BorderControlStylePicker"),cx=(0,use_cx.I)();return{...otherProps,className:(0,react.useMemo)((()=>cx(borderControlStylePicker,className)),[className,cx]),buttonClassName:(0,react.useMemo)((()=>cx(borderStyleButton)),[cx])}}(props);return(0,react.createElement)(view_component.Z,(0,esm_extends.Z)({},otherProps,{ref:forwardedRef}),(0,react.createElement)(Label,{label:label,hideLabelFromVision:hideLabelFromVision}),(0,react.createElement)(component.Z,{justify:"flex-start",gap:1},BORDER_STYLES.map((borderStyle=>(0,react.createElement)(build_module_button.Z,{key:borderStyle.value,className:buttonClassName,icon:borderStyle.icon,isSmall:!0,isPressed:borderStyle.value===value,onClick:()=>onChange(borderStyle.value===value?void 0:borderStyle.value),"aria-label":borderStyle.label,label:borderStyle.label,showTooltip:!0})))))}),"BorderControlStylePicker");var color_indicator=(0,react.forwardRef)((function UnforwardedColorIndicator(props,forwardedRef){const{className:className,colorValue:colorValue,...additionalProps}=props;return(0,react.createElement)("span",(0,esm_extends.Z)({className:classnames_default()("component-color-indicator",className),style:{background:colorValue},ref:forwardedRef},additionalProps))})),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),number_control=__webpack_require__("./packages/components/build-module/number-control/index.js"),select_control=__webpack_require__("./packages/components/build-module/select-control/index.js"),input_control_styles=__webpack_require__("./packages/components/build-module/input-control/styles/input-control-styles.js");const NumberControlWrapper=(0,emotion_styled_base_browser_esm.Z)(number_control.Z,{target:"ez9hsf47"})(input_control_styles.W2,"{width:",(0,space.D)(24),";}"),SelectControl=(0,emotion_styled_base_browser_esm.Z)(select_control.Z,{target:"ez9hsf46"})("margin-left:",(0,space.D)(-2),";width:5em;",input_control_styles.Kg,"{display:none;}"),RangeControl=(0,emotion_styled_base_browser_esm.Z)(range_control.Z,{target:"ez9hsf45"})("flex:1;margin-right:",(0,space.D)(2),";"),interactiveHueStyles=`\n.react-colorful__interactive {\n\twidth: calc( 100% - ${(0,space.D)(2)} );\n\tmargin-left: ${(0,space.D)(1)};\n}`,AuxiliaryColorArtefactWrapper=(0,emotion_styled_base_browser_esm.Z)("div",{target:"ez9hsf44"})("padding-top:",(0,space.D)(2),";padding-right:0;padding-left:0;padding-bottom:0;"),AuxiliaryColorArtefactHStackHeader=(0,emotion_styled_base_browser_esm.Z)(h_stack_component.Z,{target:"ez9hsf43"})("padding-left:",(0,space.D)(4),";padding-right:",(0,space.D)(4),";"),ColorInputWrapper=(0,emotion_styled_base_browser_esm.Z)(component.Z,{target:"ez9hsf42"})("padding-top:",(0,space.D)(4),";padding-left:",(0,space.D)(4),";padding-right:",(0,space.D)(3),";padding-bottom:",(0,space.D)(5),";"),ColorfulWrapper=(0,emotion_styled_base_browser_esm.Z)("div",{target:"ez9hsf41"})(box_sizing.p,";width:216px;.react-colorful{display:flex;flex-direction:column;align-items:center;width:216px;height:auto;overflow:hidden;}.react-colorful__saturation{width:100%;border-radius:0;height:216px;margin-bottom:",(0,space.D)(4),";border-bottom:none;}.react-colorful__hue,.react-colorful__alpha{width:184px;height:16px;border-radius:16px;margin-bottom:",(0,space.D)(2),";}.react-colorful__pointer{height:16px;width:16px;border:none;box-shadow:0 0 2px 0 rgba( 0, 0, 0, 0.25 );outline:2px solid transparent;}.react-colorful__pointer-fill{box-shadow:inset 0 0 0 ",config_values.Z.borderWidthFocus," #fff;}",interactiveHueStyles," ",base_control_styles.ob,"{margin-bottom:0;}"),CopyButton=(0,emotion_styled_base_browser_esm.Z)(build_module_button.Z,{target:"ez9hsf40"})("&&&&&{min-width:",(0,space.D)(6),";padding:0;>svg{margin-right:0;}}");var TooltipState=__webpack_require__("./node_modules/reakit/es/Tooltip/TooltipState.js"),TooltipReference=__webpack_require__("./node_modules/reakit/es/Tooltip/TooltipReference.js");const TooltipContext=(0,react.createContext)({});var Tooltip=__webpack_require__("./node_modules/reakit/es/Tooltip/Tooltip.js");var shortcut_component=(0,context_connect.Iq)((function Shortcut(props,forwardedRef){const{as:asProp="span",shortcut:shortcut,className:className,...otherProps}=(0,use_context_system.y)(props,"Shortcut");if(!shortcut)return null;let displayText,ariaLabel;return"string"==typeof shortcut?displayText=shortcut:(displayText=shortcut.display,ariaLabel=shortcut.ariaLabel),(0,react.createElement)(view_component.Z,(0,esm_extends.Z)({as:asProp,className:className,"aria-label":ariaLabel,ref:forwardedRef},otherProps),displayText)}),"Shortcut");const TooltipContent=(0,emotion_react_browser_esm.iv)("z-index:",1000002,";box-sizing:border-box;opacity:0;outline:none;transform-origin:top center;transition:opacity ",config_values.Z.transitionDurationFastest," ease;font-size:",config_values.Z.fontSize,";&[data-enter]{opacity:1;}","","",""),TooltipPopoverView=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e7tfjmw1"})("background:rgba( 0, 0, 0, 0.8 );border-radius:2px;box-shadow:0 0 0 1px rgba( 255, 255, 255, 0.04 );color:",colors_values.D.white,";padding:4px 8px;"),noOutline={name:"12mkfdx",styles:"outline:none"},TooltipShortcut=(0,emotion_styled_base_browser_esm.Z)(shortcut_component,{target:"e7tfjmw0"})("display:inline-block;margin-left:",(0,space.D)(1),";"),{TooltipPopoverView:content_TooltipPopoverView}=tooltip_styles_namespaceObject;var tooltip_content=(0,context_connect.Iq)((function content_TooltipContent(props,forwardedRef){const{children:children,className:className,...otherProps}=(0,use_context_system.y)(props,"TooltipContent"),{tooltip:tooltip}=(0,react.useContext)(TooltipContext),classes=(0,use_cx.I)()(TooltipContent,className);return(0,react.createElement)(Tooltip.u,(0,esm_extends.Z)({as:view_component.Z},otherProps,tooltip,{className:classes,ref:forwardedRef}),(0,react.createElement)(content_TooltipPopoverView,null,children))}),"TooltipContent");const ConnectedTooltip=(0,context_connect.Iq)((function component_Tooltip(props,forwardedRef){const{animated:animated=!0,animationDuration:animationDuration=160,baseId:baseId,children:children,content:content,focusable:focusable=!0,gutter:gutter=4,id:id,modal:modal=!0,placement:placement,visible:visible=!1,shortcut:shortcut,...otherProps}=(0,use_context_system.y)(props,"Tooltip"),tooltip=(0,TooltipState.K)({animated:animated?animationDuration:void 0,baseId:baseId||id,gutter:gutter,placement:placement,visible:visible,...otherProps}),contextProps=(0,react.useMemo)((()=>({tooltip:tooltip})),[tooltip]);return(0,react.createElement)(TooltipContext.Provider,{value:contextProps},content&&(0,react.createElement)(tooltip_content,{unstable_portal:modal,ref:forwardedRef},content,shortcut&&(0,react.createElement)(TooltipShortcut,{shortcut:shortcut})),children&&(0,react.createElement)(TooltipReference.v,(0,esm_extends.Z)({},tooltip,children.props,{ref:null==children?void 0:children.ref}),(referenceProps=>(focusable||(referenceProps.tabIndex=void 0),(0,react.cloneElement)(children,referenceProps)))))}),"Tooltip");var tooltip_component=ConnectedTooltip;const ColorCopyButton=props=>{const{color:color,colorType:colorType}=props,[copiedColor,setCopiedColor]=(0,react.useState)(null),copyTimer=(0,react.useRef)(),copyRef=(0,use_copy_to_clipboard.Z)((()=>{switch(colorType){case"hsl":return color.toHslString();case"rgb":return color.toRgbString();default:return color.toHex()}}),(()=>{copyTimer.current&&clearTimeout(copyTimer.current),setCopiedColor(color.toHex()),copyTimer.current=setTimeout((()=>{setCopiedColor(null),copyTimer.current=void 0}),3e3)}));return(0,react.useEffect)((()=>()=>{copyTimer.current&&clearTimeout(copyTimer.current)}),[]),(0,react.createElement)(tooltip_component,{content:(0,react.createElement)(text_component.Z,{color:"white"},copiedColor===color.toHex()?(0,i18n_build_module.__)("Copied!"):(0,i18n_build_module.__)("Copy")),placement:"bottom"},(0,react.createElement)(CopyButton,{isSmall:!0,ref:copyRef,icon:copy.Z,showTooltip:!1}))},InputWithSlider=_ref=>{let{min:min,max:max,label:label,abbreviation:abbreviation,onChange:onChange,value:value}=_ref;return(0,react.createElement)(h_stack_component.Z,{spacing:4},(0,react.createElement)(NumberControlWrapper,{min:min,max:max,label:label,hideLabelFromVision:!0,value:value,onChange:newValue=>{onChange(newValue?"string"!=typeof newValue?newValue:parseInt(newValue,10):0)},prefix:(0,react.createElement)(spacer_component.Z,{as:text_component.Z,paddingLeft:(0,space.D)(4),color:colors_values.D.ui.theme,lineHeight:1},abbreviation),spinControls:"none",size:"__unstable-large"}),(0,react.createElement)(RangeControl,{__nextHasNoMarginBottom:!0,label:label,hideLabelFromVision:!0,min:min,max:max,value:value,onChange:onChange,withInputField:!1}))},RgbInput=_ref=>{let{color:color,onChange:onChange,enableAlpha:enableAlpha}=_ref;const{r:r,g:g,b:b,a:a}=color.toRgb();return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(InputWithSlider,{min:0,max:255,label:"Red",abbreviation:"R",value:r,onChange:nextR=>onChange((0,colord.Vi)({r:nextR,g:g,b:b,a:a}))}),(0,react.createElement)(InputWithSlider,{min:0,max:255,label:"Green",abbreviation:"G",value:g,onChange:nextG=>onChange((0,colord.Vi)({r:r,g:nextG,b:b,a:a}))}),(0,react.createElement)(InputWithSlider,{min:0,max:255,label:"Blue",abbreviation:"B",value:b,onChange:nextB=>onChange((0,colord.Vi)({r:r,g:g,b:nextB,a:a}))}),enableAlpha&&(0,react.createElement)(InputWithSlider,{min:0,max:100,label:"Alpha",abbreviation:"A",value:Math.trunc(100*a),onChange:nextA=>onChange((0,colord.Vi)({r:r,g:g,b:b,a:nextA/100}))}))},HslInput=_ref=>{let{color:color,onChange:onChange,enableAlpha:enableAlpha}=_ref;const{h:h,s:s,l:l,a:a}=color.toHsl();return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(InputWithSlider,{min:0,max:359,label:"Hue",abbreviation:"H",value:h,onChange:nextH=>{onChange((0,colord.Vi)({h:nextH,s:s,l:l,a:a}))}}),(0,react.createElement)(InputWithSlider,{min:0,max:100,label:"Saturation",abbreviation:"S",value:s,onChange:nextS=>{onChange((0,colord.Vi)({h:h,s:nextS,l:l,a:a}))}}),(0,react.createElement)(InputWithSlider,{min:0,max:100,label:"Lightness",abbreviation:"L",value:l,onChange:nextL=>{onChange((0,colord.Vi)({h:h,s:s,l:nextL,a:a}))}}),enableAlpha&&(0,react.createElement)(InputWithSlider,{min:0,max:100,label:"Alpha",abbreviation:"A",value:Math.trunc(100*a),onChange:nextA=>{onChange((0,colord.Vi)({h:h,s:s,l:l,a:nextA/100}))}}))};var input_control=__webpack_require__("./packages/components/build-module/input-control/index.js");const HexInput=_ref=>{let{color:color,onChange:onChange,enableAlpha:enableAlpha}=_ref;return(0,react.createElement)(input_control.gs,{prefix:(0,react.createElement)(spacer_component.Z,{as:text_component.Z,marginLeft:(0,space.D)(4),color:colors_values.D.ui.theme,lineHeight:1},"#"),value:color.toHex().slice(1).toUpperCase(),onChange:nextValue=>{if(!nextValue)return;const hexValue=nextValue.startsWith("#")?nextValue:"#"+nextValue;onChange((0,colord.Vi)(hexValue))},maxLength:enableAlpha?9:7,label:(0,i18n_build_module.__)("Hex color"),hideLabelFromVision:!0,size:"__unstable-large",__unstableStateReducer:(state,action)=>{var _action$payload,_action$payload$event,_state$value,_state$value2;const nativeEvent=null===(_action$payload=action.payload)||void 0===_action$payload||null===(_action$payload$event=_action$payload.event)||void 0===_action$payload$event?void 0:_action$payload$event.nativeEvent;if("insertFromPaste"!==(null==nativeEvent?void 0:nativeEvent.inputType))return{...state};const value=null!==(_state$value=state.value)&&void 0!==_state$value&&_state$value.startsWith("#")?state.value.slice(1).toUpperCase():null===(_state$value2=state.value)||void 0===_state$value2?void 0:_state$value2.toUpperCase();return{...state,value:value}},__unstableInputWidth:"9em"})},ColorInput=_ref=>{let{colorType:colorType,color:color,onChange:onChange,enableAlpha:enableAlpha}=_ref;const props={color:color,onChange:onChange,enableAlpha:enableAlpha};switch(colorType){case"hsl":return(0,react.createElement)(HslInput,props);case"rgb":return(0,react.createElement)(RgbInput,props);default:return(0,react.createElement)(HexInput,props)}};var index_module=__webpack_require__("./node_modules/react-colorful/dist/index.module.js");const Picker=_ref=>{let{color:color,enableAlpha:enableAlpha,onChange:onChange}=_ref;const Component=enableAlpha?index_module.ef:index_module.W_,rgbColor=(0,react.useMemo)((()=>color.toRgbString()),[color]);return(0,react.createElement)(Component,{color:rgbColor,onChange:nextColor=>{onChange((0,colord.Vi)(nextColor))}})};var use_controlled_value=__webpack_require__("./packages/components/build-module/utils/hooks/use-controlled-value.js");(0,colord.l7)([names.Z]);const options=[{label:"RGB",value:"rgb"},{label:"HSL",value:"hsl"},{label:"Hex",value:"hex"}];var color_picker_component=(0,context_connect.Iq)(((props,forwardedRef)=>{const{enableAlpha:enableAlpha=!1,color:colorProp,onChange:onChange,defaultValue:defaultValue="#fff",copyFormat:copyFormat,...divProps}=(0,use_context_system.y)(props,"ColorPicker"),[color,setColor]=(0,use_controlled_value.O)({onChange:onChange,value:colorProp,defaultValue:defaultValue}),safeColordColor=(0,react.useMemo)((()=>(0,colord.Vi)(color||"")),[color]),debouncedSetColor=(0,use_debounce.Z)(setColor),handleChange=(0,react.useCallback)((nextValue=>{debouncedSetColor(nextValue.toHex())}),[debouncedSetColor]),[colorType,setColorType]=(0,react.useState)(copyFormat||"hex");return(0,react.createElement)(ColorfulWrapper,(0,esm_extends.Z)({ref:forwardedRef},divProps),(0,react.createElement)(Picker,{onChange:handleChange,color:safeColordColor,enableAlpha:enableAlpha}),(0,react.createElement)(AuxiliaryColorArtefactWrapper,null,(0,react.createElement)(AuxiliaryColorArtefactHStackHeader,{justify:"space-between"},(0,react.createElement)(SelectControl,{options:options,value:colorType,onChange:nextColorType=>setColorType(nextColorType),label:(0,i18n_build_module.__)("Color format"),hideLabelFromVision:!0}),(0,react.createElement)(ColorCopyButton,{color:safeColordColor,colorType:copyFormat||colorType})),(0,react.createElement)(ColorInputWrapper,{direction:"column",gap:2},(0,react.createElement)(ColorInput,{colorType:colorType,color:safeColordColor,onChange:handleChange,enableAlpha:enableAlpha}))))}),"ColorPicker"),memize=__webpack_require__("./node_modules/memize/index.js");function getColorFromLegacyProps(color){if(void 0!==color)return"string"==typeof color?color:color.hex?color.hex:void 0}const transformColorStringToLegacyColor=__webpack_require__.n(memize)()((color=>{const colordColor=(0,colord.Vi)(color),hex=colordColor.toHex(),rgb=colordColor.toRgb(),hsv=colordColor.toHsv(),hsl=colordColor.toHsl();return{hex:hex,rgb:rgb,hsv:hsv,hsl:hsl,source:"hex",oldHue:hsl.h}}));const LegacyAdapter=props=>(0,react.createElement)(color_picker_component,function useDeprecatedProps(props){const{onChangeComplete:onChangeComplete}=props,legacyChangeHandler=(0,react.useCallback)((color=>{onChangeComplete(transformColorStringToLegacyColor(color))}),[onChangeComplete]);return function isLegacyProps(props){var _props$color;return void 0!==props.onChangeComplete||void 0!==props.disableAlpha||"string"==typeof(null===(_props$color=props.color)||void 0===_props$color?void 0:_props$color.hex)}(props)?{color:getColorFromLegacyProps(props.color),enableAlpha:!props.disableAlpha,onChange:legacyChangeHandler}:{...props,color:props.color,enableAlpha:props.enableAlpha,onChange:props.onChange}}(props));function CircularOptionPicker(props){const{actions:actions,className:className,options:options,children:children}=props;return(0,react.createElement)("div",{className:classnames_default()("components-circular-option-picker",className)},(0,react.createElement)("div",{className:"components-circular-option-picker__swatches"},options),children,actions&&(0,react.createElement)("div",{className:"components-circular-option-picker__custom-clear-wrapper"},actions))}CircularOptionPicker.Option=function Option(props){const{className:className,isSelected:isSelected,selectedIconProps:selectedIconProps,tooltipText:tooltipText,...additionalProps}=props,optionButton=(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({isPressed:isSelected,className:"components-circular-option-picker__option"},additionalProps));return(0,react.createElement)("div",{className:classnames_default()(className,"components-circular-option-picker__option-wrapper")},tooltipText?(0,react.createElement)(tooltip.Z,{text:tooltipText},optionButton):optionButton,isSelected&&(0,react.createElement)(build_module_icon.Z,(0,esm_extends.Z)({icon:library_check.Z},selectedIconProps||{})))},CircularOptionPicker.ButtonAction=function ButtonAction(props){const{className:className,children:children,...additionalProps}=props;return(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({className:classnames_default()("components-circular-option-picker__clear",className),variant:"tertiary"},additionalProps),children)},CircularOptionPicker.DropdownLinkAction=function DropdownLinkAction(props){const{buttonProps:buttonProps,className:className,dropdownProps:dropdownProps,linkText:linkText}=props;return(0,react.createElement)(dropdown.Z,(0,esm_extends.Z)({className:classnames_default()("components-circular-option-picker__dropdown-link-action",className),renderToggle:_ref=>{let{isOpen:isOpen,onToggle:onToggle}=_ref;return(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({"aria-expanded":isOpen,"aria-haspopup":"true",onClick:onToggle,variant:"link"},buttonProps),linkText)}},dropdownProps))};const ColorHeading=(0,emotion_styled_base_browser_esm.Z)(heading_component.Z,{target:"ev9wop70"})({name:"13lxv2o",styles:"text-transform:uppercase;line-height:24px;font-weight:500;&&&{font-size:11px;margin-bottom:0;}"}),DropdownContentWrapperDiv=(0,emotion_styled_base_browser_esm.Z)("div",{target:"eovvns30"})("margin-left:",(0,space.D)(-2),";margin-right:",(0,space.D)(-2),";&:first-of-type{margin-top:",(0,space.D)(-2),";}&:last-of-type{margin-bottom:",(0,space.D)(-2),";}",(_ref=>{let{paddingSize:paddingSize="small"}=_ref;if("none"===paddingSize)return;const paddingValues={small:(0,space.D)(2),medium:(0,space.D)(4)};return(0,emotion_react_browser_esm.iv)("padding:",paddingValues[paddingSize]||paddingValues.small,";","","","")}),";");var dropdown_content_wrapper=(0,context_connect.Iq)((function UnconnectedDropdownContentWrapper(props,forwardedRef){const{paddingSize:paddingSize="small",...derivedProps}=(0,use_context_system.y)(props,"DropdownContentWrapper");return(0,react.createElement)(DropdownContentWrapperDiv,(0,esm_extends.Z)({},derivedProps,{paddingSize:paddingSize,ref:forwardedRef}))}),"DropdownContentWrapper");function SinglePalette(_ref){let{className:className,clearColor:clearColor,colors:colors,onChange:onChange,value:value,actions:actions}=_ref;const colorOptions=(0,react.useMemo)((()=>colors.map(((_ref2,index)=>{let{color:color,name:name}=_ref2;const colordColor=(0,colord.Vi)(color),isSelected=value===color;return(0,react.createElement)(CircularOptionPicker.Option,{key:`${color}-${index}`,isSelected:isSelected,selectedIconProps:isSelected?{fill:colordColor.contrast()>colordColor.contrast("#000")?"#fff":"#000"}:{},tooltipText:name||(0,i18n_build_module.gB)((0,i18n_build_module.__)("Color code: %s"),color),style:{backgroundColor:color,color:color},onClick:isSelected?clearColor:()=>onChange(color,index),"aria-label":name?(0,i18n_build_module.gB)((0,i18n_build_module.__)("Color: %s"),name):(0,i18n_build_module.gB)((0,i18n_build_module.__)("Color code: %s"),color)})}))),[colors,value,onChange,clearColor]);return(0,react.createElement)(CircularOptionPicker,{className:className,options:colorOptions,actions:actions})}function MultiplePalettes(_ref3){let{className:className,clearColor:clearColor,colors:colors,onChange:onChange,value:value,actions:actions}=_ref3;return 0===colors.length?null:(0,react.createElement)(v_stack_component.Z,{spacing:3,className:className},colors.map(((_ref4,index)=>{let{name:name,colors:colorPalette}=_ref4;return(0,react.createElement)(v_stack_component.Z,{spacing:2,key:index},(0,react.createElement)(ColorHeading,null,name),(0,react.createElement)(SinglePalette,{clearColor:clearColor,colors:colorPalette,onChange:newColor=>onChange(newColor,index),value:value,actions:colors.length===index+1?actions:null}))})))}function CustomColorPickerDropdown(_ref5){let{isRenderedInSidebar:isRenderedInSidebar,popoverProps:receivedPopoverProps,...props}=_ref5;const popoverProps=(0,react.useMemo)((()=>({shift:!0,...isRenderedInSidebar?{placement:"left-start",offset:34}:{placement:"bottom",offset:8},...receivedPopoverProps})),[isRenderedInSidebar,receivedPopoverProps]);return(0,react.createElement)(dropdown.Z,(0,esm_extends.Z)({contentClassName:"components-color-palette__custom-color-dropdown-content",popoverProps:popoverProps},props))}(0,colord.l7)([names.Z,a11y.Z]);const ColorPalette=(0,react.forwardRef)((function UnforwardedColorPalette(props,forwardedRef){const{clearable:clearable=!0,colors:colors=[],disableCustomColors:disableCustomColors=!1,enableAlpha:enableAlpha=!1,onChange:onChange,value:value,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins=!1,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar=!1,...otherProps}=props,clearColor=(0,react.useCallback)((()=>onChange(void 0)),[onChange]),buttonLabelName=(0,react.useMemo)((()=>function(currentValue){let colors=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],showMultiplePalettes=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!currentValue)return"";const currentValueIsCssVariable=/^var\(/.test(currentValue),normalizedCurrentValue=currentValueIsCssVariable?currentValue:(0,colord.Vi)(currentValue).toHex(),colorPalettes=showMultiplePalettes?colors:[{colors:colors}];for(const{colors:paletteColors}of colorPalettes)for(const{name:colorName,color:colorValue}of paletteColors)if(normalizedCurrentValue===(currentValueIsCssVariable?colorValue:(0,colord.Vi)(colorValue).toHex()))return colorName;return(0,i18n_build_module.__)("Custom")}(value,colors,__experimentalHasMultipleOrigins)),[value,colors,__experimentalHasMultipleOrigins]);if(colors.length>0&&__experimentalHasMultipleOrigins!==(colors=>colors.every((colorObj=>Array.isArray(colorObj.colors))))(colors))return console.warn("wp.components.ColorPalette: please specify a format for the `colors` prop that is compatible with the `__experimentalHasMultipleOrigins` prop."),null;const colordColor=(0,colord.Vi)(null!=value?value:""),valueWithoutLeadingHash=null!=value&&value.startsWith("#")?value.substring(1):null!=value?value:"",customColorAccessibleLabel=valueWithoutLeadingHash?(0,i18n_build_module.gB)((0,i18n_build_module.__)('Custom color picker. The currently selected color is called "%1$s" and has a value of "%2$s".'),buttonLabelName,valueWithoutLeadingHash):(0,i18n_build_module.__)("Custom color picker."),paletteCommonProps={clearable:clearable,clearColor:clearColor,onChange:onChange,value:value,actions:!!clearable&&(0,react.createElement)(CircularOptionPicker.ButtonAction,{onClick:clearColor},(0,i18n_build_module.__)("Clear"))};return(0,react.createElement)(v_stack_component.Z,(0,esm_extends.Z)({spacing:3,ref:forwardedRef},otherProps),!disableCustomColors&&(0,react.createElement)(CustomColorPickerDropdown,{isRenderedInSidebar:__experimentalIsRenderedInSidebar,renderContent:()=>(0,react.createElement)(dropdown_content_wrapper,{paddingSize:"none"},(0,react.createElement)(LegacyAdapter,{color:value,onChange:color=>onChange(color),enableAlpha:enableAlpha})),renderToggle:_ref6=>{let{isOpen:isOpen,onToggle:onToggle}=_ref6;return(0,react.createElement)(component.Z,{as:"button",justify:"space-between",align:"flex-start",className:"components-color-palette__custom-color","aria-expanded":isOpen,"aria-haspopup":"true",onClick:onToggle,"aria-label":customColorAccessibleLabel,style:(currentValue=value,void 0===currentValue||0===(0,colord.Vi)(currentValue).alpha()?{color:"#000"}:{background:value,color:colordColor.contrast()>colordColor.contrast("#000")?"#fff":"#000"})},(0,react.createElement)(flex_item_component.Z,{isBlock:!0,as:truncate_component.Z,className:"components-color-palette__custom-color-name"},buttonLabelName),(0,react.createElement)(flex_item_component.Z,{as:"span",className:"components-color-palette__custom-color-value"},valueWithoutLeadingHash));var currentValue}}),__experimentalHasMultipleOrigins?(0,react.createElement)(MultiplePalettes,(0,esm_extends.Z)({},paletteCommonProps,{colors:colors})):(0,react.createElement)(SinglePalette,(0,esm_extends.Z)({},paletteCommonProps,{colors:colors})))}));var color_palette=ColorPalette;function useBorderControlDropdown(props){const{border:border,className:className,colors:colors=[],enableAlpha:enableAlpha=!1,enableStyle:enableStyle=!0,onChange:onChange,previousStyleSelection:previousStyleSelection,size:size="default",__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins=!1,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar=!1,...otherProps}=(0,use_context_system.y)(props,"BorderControlDropdown"),[widthValue]=(0,utils.YX)(null==border?void 0:border.width),hasZeroWidth=0===widthValue,cx=(0,use_cx.I)(),classes=(0,react.useMemo)((()=>cx((size=>(0,emotion_react_browser_esm.iv)("background:#fff;&&>button{height:","__unstable-large"===size?"40px":"30px",";width:","__unstable-large"===size?"40px":"30px",";padding:0;display:flex;align-items:center;justify-content:center;",(0,rtl.b)({borderRadius:"2px 0 0 2px"},{borderRadius:"0 2px 2px 0"})()," border:",config_values.Z.borderWidth," solid ",colors_values.D.ui.border,";&:focus,&:hover:not( :disabled ){",focusBoxShadow," border-color:",colors_values.D.ui.borderFocus,";z-index:1;position:relative;}}","","",""))(size),className)),[className,cx,size]),indicatorClassName=(0,react.useMemo)((()=>cx(borderColorIndicator)),[cx]),indicatorWrapperClassName=(0,react.useMemo)((()=>cx(colorIndicatorWrapper(border,size))),[border,cx,size]),popoverControlsClassName=(0,react.useMemo)((()=>cx(borderControlPopoverControls)),[cx]),popoverContentClassName=(0,react.useMemo)((()=>cx(borderControlPopoverContent)),[cx]),resetButtonClassName=(0,react.useMemo)((()=>cx(resetButton)),[cx]);return{...otherProps,border:border,className:classes,colors:colors,enableAlpha:enableAlpha,enableStyle:enableStyle,indicatorClassName:indicatorClassName,indicatorWrapperClassName:indicatorWrapperClassName,onColorChange:color=>{const style="none"===(null==border?void 0:border.style)?previousStyleSelection:null==border?void 0:border.style,width=hasZeroWidth&&color?"1px":null==border?void 0:border.width;onChange({color:color,style:style,width:width})},onStyleChange:style=>{const width=hasZeroWidth&&style?"1px":null==border?void 0:border.width;onChange({...border,style:style,width:width})},onReset:()=>{onChange({...border,color:void 0,style:void 0})},popoverContentClassName:popoverContentClassName,popoverControlsClassName:popoverControlsClassName,resetButtonClassName:resetButtonClassName,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar}}const component_noop=()=>{},ConnectedBorderControlDropdown=(0,context_connect.Iq)(((props,forwardedRef)=>{const{__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,border:border,colors:colors,disableCustomColors:disableCustomColors,enableAlpha:enableAlpha,enableStyle:enableStyle,indicatorClassName:indicatorClassName,indicatorWrapperClassName:indicatorWrapperClassName,onReset:onReset,onColorChange:onColorChange,onStyleChange:onStyleChange,popoverContentClassName:popoverContentClassName,popoverControlsClassName:popoverControlsClassName,resetButtonClassName:resetButtonClassName,showDropdownHeader:showDropdownHeader,__unstablePopoverProps:__unstablePopoverProps,...otherProps}=useBorderControlDropdown(props),{color:color,style:style}=border||{},colorObject=((colorValue,colors,hasMultipleColorOrigins)=>{if(colorValue&&colors){if(hasMultipleColorOrigins){let matchedColor;return colors.some((origin=>origin.colors.some((color=>color.color===colorValue&&(matchedColor=color,!0))))),matchedColor}return colors.find((color=>color.color===colorValue))}})(color,colors,!!__experimentalHasMultipleOrigins),toggleAriaLabel=((colorValue,colorObject,style,isStyleEnabled)=>isStyleEnabled?colorObject?style?(0,i18n_build_module.gB)('Border color and style picker. The currently selected color is called "%1$s" and has a value of "%2$s". The currently selected style is "%3$s".',colorObject.name,colorObject.color,style):(0,i18n_build_module.gB)('Border color and style picker. The currently selected color is called "%1$s" and has a value of "%2$s".',colorObject.name,colorObject.color):colorValue?style?(0,i18n_build_module.gB)('Border color and style picker. The currently selected color has a value of "%1$s". The currently selected style is "%2$s".',colorValue,style):(0,i18n_build_module.gB)('Border color and style picker. The currently selected color has a value of "%1$s".',colorValue):(0,i18n_build_module.__)("Border color and style picker."):colorObject?(0,i18n_build_module.gB)('Border color picker. The currently selected color is called "%1$s" and has a value of "%2$s".',colorObject.name,colorObject.color):colorValue?(0,i18n_build_module.gB)('Border color picker. The currently selected color has a value of "%1$s".',colorValue):(0,i18n_build_module.__)("Border color picker."))(color,colorObject,style,enableStyle),showResetButton=color||style&&"none"!==style,dropdownPosition=__experimentalIsRenderedInSidebar?"bottom left":void 0;return(0,react.createElement)(dropdown.Z,(0,esm_extends.Z)({renderToggle:_ref=>{let{onToggle:onToggle=component_noop}=_ref;return(0,react.createElement)(build_module_button.Z,{onClick:onToggle,variant:"tertiary","aria-label":toggleAriaLabel,position:dropdownPosition,label:(0,i18n_build_module.__)("Border color and style picker"),showTooltip:!0},(0,react.createElement)("span",{className:indicatorWrapperClassName},(0,react.createElement)(color_indicator,{className:indicatorClassName,colorValue:color})))},renderContent:_ref2=>{let{onClose:onClose}=_ref2;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(dropdown_content_wrapper,{paddingSize:"medium"},(0,react.createElement)(v_stack_component.Z,{className:popoverControlsClassName,spacing:6},showDropdownHeader?(0,react.createElement)(h_stack_component.Z,null,(0,react.createElement)(base_control_styles.ar,null,(0,i18n_build_module.__)("Border color")),(0,react.createElement)(build_module_button.Z,{isSmall:!0,label:(0,i18n_build_module.__)("Close border color"),icon:close_small.Z,onClick:onClose})):void 0,(0,react.createElement)(color_palette,{className:popoverContentClassName,value:color,onChange:onColorChange,colors:colors,disableCustomColors:disableCustomColors,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,clearable:!1,enableAlpha:enableAlpha}),enableStyle&&(0,react.createElement)(border_control_style_picker_component,{label:(0,i18n_build_module.__)("Style"),value:style,onChange:onStyleChange}))),showResetButton&&(0,react.createElement)(dropdown_content_wrapper,{paddingSize:"none"},(0,react.createElement)(build_module_button.Z,{className:resetButtonClassName,variant:"tertiary",onClick:()=>{onReset(),onClose()}},(0,i18n_build_module.__)("Reset to default"))))},popoverProps:{...__unstablePopoverProps}},otherProps,{ref:forwardedRef}))}),"BorderControlDropdown");var border_control_dropdown_component=ConnectedBorderControlDropdown;function useBorderControl(props){const{className:className,colors:colors=[],isCompact:isCompact,onChange:onChange,enableAlpha:enableAlpha=!0,enableStyle:enableStyle=!0,shouldSanitizeBorder:shouldSanitizeBorder=!0,size:size="default",value:border,width:width,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins=!1,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar=!1,...otherProps}=(0,use_context_system.y)(props,"BorderControl"),[widthValue,originalWidthUnit]=(0,utils.YX)(null==border?void 0:border.width),widthUnit=originalWidthUnit||"px",hadPreviousZeroWidth=0===widthValue,[colorSelection,setColorSelection]=(0,react.useState)(),[styleSelection,setStyleSelection]=(0,react.useState)(),onBorderChange=(0,react.useCallback)((newBorder=>{if(shouldSanitizeBorder)return onChange((border=>{const hasNoWidth=void 0===(null==border?void 0:border.width)||""===border.width,hasNoColor=void 0===(null==border?void 0:border.color);if(!hasNoWidth||!hasNoColor)return border})(newBorder));onChange(newBorder)}),[onChange,shouldSanitizeBorder]),onWidthChange=(0,react.useCallback)((newWidth=>{const newWidthValue=""===newWidth?void 0:newWidth,[parsedValue]=(0,utils.YX)(newWidth),hasZeroWidth=0===parsedValue,updatedBorder={...border,width:newWidthValue};hasZeroWidth&&!hadPreviousZeroWidth&&(setColorSelection(null==border?void 0:border.color),setStyleSelection(null==border?void 0:border.style),updatedBorder.color=void 0,updatedBorder.style="none"),!hasZeroWidth&&hadPreviousZeroWidth&&(void 0===updatedBorder.color&&(updatedBorder.color=colorSelection),"none"===updatedBorder.style&&(updatedBorder.style=styleSelection)),onBorderChange(updatedBorder)}),[border,hadPreviousZeroWidth,colorSelection,styleSelection,onBorderChange]),onSliderChange=(0,react.useCallback)((value=>{onWidthChange(`${value}${widthUnit}`)}),[onWidthChange,widthUnit]),cx=(0,use_cx.I)(),classes=(0,react.useMemo)((()=>cx(borderControl,className)),[className,cx]);let wrapperWidth=width;isCompact&&(wrapperWidth="__unstable-large"===size?"116px":"90px");const innerWrapperClassName=(0,react.useMemo)((()=>{const widthStyle=!!wrapperWidth&&styles_wrapperWidth,heightStyle=(size=>(0,emotion_react_browser_esm.iv)("height:","__unstable-large"===size?"40px":"30px",";","","",""))(size);return cx((0,emotion_react_browser_esm.iv)(unit_control_styles.Ke,"{flex:1 1 40%;}&& ",unit_control_styles.mY,"{min-height:0;}","","",""),widthStyle,heightStyle)}),[wrapperWidth,cx,size]),sliderClassName=(0,react.useMemo)((()=>cx((0,emotion_react_browser_esm.iv)("flex:1 1 60%;",(0,rtl.b)({marginRight:(0,space.D)(3)})(),";","","",""))),[cx]);return{...otherProps,className:classes,colors:colors,enableAlpha:enableAlpha,enableStyle:enableStyle,innerWrapperClassName:innerWrapperClassName,inputWidth:wrapperWidth,onBorderChange:onBorderChange,onSliderChange:onSliderChange,onWidthChange:onWidthChange,previousStyleSelection:styleSelection,sliderClassName:sliderClassName,value:border,widthUnit:widthUnit,widthValue:widthValue,size:size,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar}}const BorderLabel=props=>{const{label:label,hideLabelFromVision:hideLabelFromVision}=props;return label?hideLabelFromVision?(0,react.createElement)(visually_hidden_component.Z,{as:"legend"},label):(0,react.createElement)(base_control_styles.ar,{as:"legend"},label):null};var border_control_component=(0,context_connect.Iq)(((props,forwardedRef)=>{const{colors:colors,disableCustomColors:disableCustomColors,disableUnits:disableUnits,enableAlpha:enableAlpha,enableStyle:enableStyle,hideLabelFromVision:hideLabelFromVision,innerWrapperClassName:innerWrapperClassName,inputWidth:inputWidth,label:label,onBorderChange:onBorderChange,onSliderChange:onSliderChange,onWidthChange:onWidthChange,placeholder:placeholder,__unstablePopoverProps:__unstablePopoverProps,previousStyleSelection:previousStyleSelection,showDropdownHeader:showDropdownHeader,size:size,sliderClassName:sliderClassName,value:border,widthUnit:widthUnit,widthValue:widthValue,withSlider:withSlider,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,...otherProps}=useBorderControl(props);return(0,react.createElement)(view_component.Z,(0,esm_extends.Z)({as:"fieldset"},otherProps,{ref:forwardedRef}),(0,react.createElement)(BorderLabel,{label:label,hideLabelFromVision:hideLabelFromVision}),(0,react.createElement)(h_stack_component.Z,{spacing:4,className:innerWrapperClassName},(0,react.createElement)(unit_control.ZP,{prefix:(0,react.createElement)(border_control_dropdown_component,{border:border,colors:colors,__unstablePopoverProps:__unstablePopoverProps,disableCustomColors:disableCustomColors,enableAlpha:enableAlpha,enableStyle:enableStyle,onChange:onBorderChange,previousStyleSelection:previousStyleSelection,showDropdownHeader:showDropdownHeader,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,size:size}),label:(0,i18n_build_module.__)("Border width"),hideLabelFromVision:!0,min:0,onChange:onWidthChange,value:(null==border?void 0:border.width)||"",placeholder:placeholder,disableUnits:disableUnits,__unstableInputWidth:inputWidth,size:size}),withSlider&&(0,react.createElement)(range_control.Z,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Border width"),hideLabelFromVision:!0,className:sliderClassName,initialPosition:0,max:100,min:0,onChange:onSliderChange,step:["px","%"].includes(widthUnit)?1:.1,value:widthValue||void 0,withInputField:!1})))}),"BorderControl"),grid_component=__webpack_require__("./packages/components/build-module/grid/component.js");function useBorderBoxControlSplitControls(props){const{className:className,colors:colors=[],enableAlpha:enableAlpha=!1,enableStyle:enableStyle=!0,size:size="default",__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins=!1,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar=!1,...otherProps}=(0,use_context_system.y)(props,"BorderBoxControlSplitControls"),cx=(0,use_cx.I)(),classes=(0,react.useMemo)((()=>cx((size=>(0,emotion_react_browser_esm.iv)("position:relative;flex:1;width:","__unstable-large"===size?void 0:"80%",";","","",""))(size),className)),[cx,className,size]);return{...otherProps,centeredClassName:(0,react.useMemo)((()=>cx(centeredBorderControl,className)),[cx,className]),className:classes,colors:colors,enableAlpha:enableAlpha,enableStyle:enableStyle,rightAlignedClassName:(0,react.useMemo)((()=>cx((0,emotion_react_browser_esm.iv)((0,rtl.b)({marginLeft:"auto"})(),";","","",""),className)),[cx,className]),size:size,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar}}var border_box_control_split_controls_component=(0,context_connect.Iq)(((props,forwardedRef)=>{const{centeredClassName:centeredClassName,colors:colors,disableCustomColors:disableCustomColors,enableAlpha:enableAlpha,enableStyle:enableStyle,onChange:onChange,popoverPlacement:popoverPlacement,popoverOffset:popoverOffset,rightAlignedClassName:rightAlignedClassName,size:size="default",value:value,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,...otherProps}=useBorderBoxControlSplitControls(props),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>popoverPlacement?{placement:popoverPlacement,offset:popoverOffset,anchor:popoverAnchor,shift:!0}:void 0),[popoverPlacement,popoverOffset,popoverAnchor]),sharedBorderControlProps={colors:colors,disableCustomColors:disableCustomColors,enableAlpha:enableAlpha,enableStyle:enableStyle,isCompact:!0,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,size:size},mergedRef=(0,use_merge_refs.Z)([setPopoverAnchor,forwardedRef]);return(0,react.createElement)(grid_component.Z,(0,esm_extends.Z)({},otherProps,{ref:mergedRef,gap:4}),(0,react.createElement)(border_box_control_visualizer_component,{value:value,size:size}),(0,react.createElement)(border_control_component,(0,esm_extends.Z)({className:centeredClassName,hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Top border"),onChange:newBorder=>onChange(newBorder,"top"),__unstablePopoverProps:popoverProps,value:null==value?void 0:value.top},sharedBorderControlProps)),(0,react.createElement)(border_control_component,(0,esm_extends.Z)({hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Left border"),onChange:newBorder=>onChange(newBorder,"left"),__unstablePopoverProps:popoverProps,value:null==value?void 0:value.left},sharedBorderControlProps)),(0,react.createElement)(border_control_component,(0,esm_extends.Z)({className:rightAlignedClassName,hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Right border"),onChange:newBorder=>onChange(newBorder,"right"),__unstablePopoverProps:popoverProps,value:null==value?void 0:value.right},sharedBorderControlProps)),(0,react.createElement)(border_control_component,(0,esm_extends.Z)({className:centeredClassName,hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Bottom border"),onChange:newBorder=>onChange(newBorder,"bottom"),__unstablePopoverProps:popoverProps,value:null==value?void 0:value.bottom},sharedBorderControlProps)))}),"BorderBoxControlSplitControls");function useBorderBoxControl(props){const{className:className,colors:colors=[],onChange:onChange,enableAlpha:enableAlpha=!1,enableStyle:enableStyle=!0,size:size="default",value:value,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins=!1,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar=!1,...otherProps}=(0,use_context_system.y)(props,"BorderBoxControl"),mixedBorders=(0,border_box_control_utils.Le)(value),splitBorders=(0,border_box_control_utils.Al)(value),linkedValue=splitBorders?(0,border_box_control_utils.TZ)(value):value,splitValue=splitBorders?value:(0,border_box_control_utils.vw)(value),hasWidthValue=!isNaN(parseFloat(`${null==linkedValue?void 0:linkedValue.width}`)),[isLinked,setIsLinked]=(0,react.useState)(!mixedBorders),cx=(0,use_cx.I)(),classes=(0,react.useMemo)((()=>cx(borderBoxControl,className)),[cx,className]),linkedControlClassName=(0,react.useMemo)((()=>cx((0,emotion_react_browser_esm.iv)("flex:1;",(0,rtl.b)({marginRight:"24px"})(),";","","",""))),[cx]),wrapperClassName=(0,react.useMemo)((()=>cx(wrapper)),[cx]);return{...otherProps,className:classes,colors:colors,disableUnits:mixedBorders&&!hasWidthValue,enableAlpha:enableAlpha,enableStyle:enableStyle,hasMixedBorders:mixedBorders,isLinked:isLinked,linkedControlClassName:linkedControlClassName,onLinkedChange:newBorder=>{if(!newBorder)return onChange(void 0);if(!mixedBorders||(0,border_box_control_utils.n7)(newBorder))return onChange((0,border_box_control_utils.TT)(newBorder)?void 0:newBorder);const changes=(0,border_box_control_utils.gH)(linkedValue,newBorder),updatedBorders={top:{...null==value?void 0:value.top,...changes},right:{...null==value?void 0:value.right,...changes},bottom:{...null==value?void 0:value.bottom,...changes},left:{...null==value?void 0:value.left,...changes}};if((0,border_box_control_utils.Le)(updatedBorders))return onChange(updatedBorders);const filteredResult=(0,border_box_control_utils.TT)(updatedBorders.top)?void 0:updatedBorders.top;onChange(filteredResult)},onSplitChange:(newBorder,side)=>{const updatedBorders={...splitValue,[side]:newBorder};(0,border_box_control_utils.Le)(updatedBorders)?onChange(updatedBorders):onChange(newBorder)},toggleLinked:()=>setIsLinked(!isLinked),linkedValue:linkedValue,size:size,splitValue:splitValue,wrapperClassName:wrapperClassName,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar}}const component_BorderLabel=props=>{const{label:label,hideLabelFromVision:hideLabelFromVision}=props;return label?hideLabelFromVision?(0,react.createElement)(visually_hidden_component.Z,{as:"label"},label):(0,react.createElement)(base_control_styles.ar,null,label):null},BorderBoxControl=(0,context_connect.Iq)(((props,forwardedRef)=>{const{className:className,colors:colors,disableCustomColors:disableCustomColors,disableUnits:disableUnits,enableAlpha:enableAlpha,enableStyle:enableStyle,hasMixedBorders:hasMixedBorders,hideLabelFromVision:hideLabelFromVision,isLinked:isLinked,label:label,linkedControlClassName:linkedControlClassName,linkedValue:linkedValue,onLinkedChange:onLinkedChange,onSplitChange:onSplitChange,popoverPlacement:popoverPlacement,popoverOffset:popoverOffset,size:size,splitValue:splitValue,toggleLinked:toggleLinked,wrapperClassName:wrapperClassName,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,...otherProps}=useBorderBoxControl(props),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>popoverPlacement?{placement:popoverPlacement,offset:popoverOffset,anchor:popoverAnchor,shift:!0}:void 0),[popoverPlacement,popoverOffset,popoverAnchor]),mergedRef=(0,use_merge_refs.Z)([setPopoverAnchor,forwardedRef]);return(0,react.createElement)(view_component.Z,(0,esm_extends.Z)({className:className},otherProps,{ref:mergedRef}),(0,react.createElement)(component_BorderLabel,{label:label,hideLabelFromVision:hideLabelFromVision}),(0,react.createElement)(view_component.Z,{className:wrapperClassName},isLinked?(0,react.createElement)(border_control_component,{className:linkedControlClassName,colors:colors,disableUnits:disableUnits,disableCustomColors:disableCustomColors,enableAlpha:enableAlpha,enableStyle:enableStyle,onChange:onLinkedChange,placeholder:hasMixedBorders?(0,i18n_build_module.__)("Mixed"):void 0,__unstablePopoverProps:popoverProps,shouldSanitizeBorder:!1,value:linkedValue,withSlider:!0,width:"__unstable-large"===size?"116px":"110px",__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,size:size}):(0,react.createElement)(border_box_control_split_controls_component,{colors:colors,disableCustomColors:disableCustomColors,enableAlpha:enableAlpha,enableStyle:enableStyle,onChange:onSplitChange,popoverPlacement:popoverPlacement,popoverOffset:popoverOffset,value:splitValue,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,size:size}),(0,react.createElement)(border_box_control_linked_button_component,{onClick:toggleLinked,isLinked:isLinked,size:size})))}),"BorderBoxControl");var border_box_control_component=BorderBoxControl;function utils_mode(inputArray){return[...inputArray].sort(((a,b)=>inputArray.filter((v=>v===b)).length-inputArray.filter((v=>v===a)).length)).shift()}function getAllUnit(){let selectedUnits=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{flat:flat,...cornerUnits}=selectedUnits;return flat||utils_mode(Object.values(cornerUnits).filter(Boolean))||"px"}function getAllValue(){let values=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("string"==typeof values)return values;const parsedQuantitiesAndUnits=Object.values(values).map((value=>(0,utils.YX)(value))),allValues=parsedQuantitiesAndUnits.map((value=>{var _value$;return null!==(_value$=value[0])&&void 0!==_value$?_value$:""})),allUnits=parsedQuantitiesAndUnits.map((value=>value[1])),value=allValues.every((v=>v===allValues[0]))?allValues[0]:"",unit=utils_mode(allUnits),allValue=0===value||value?`${value}${unit}`:void 0;return allValue}function hasMixedValues(){let values=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const allValue=getAllValue(values),isMixed="string"!=typeof values&&isNaN(parseFloat(allValue));return isMixed}function hasDefinedValues(values){if(!values)return!1;if("string"==typeof values)return!0;return!!Object.values(values).filter((value=>!!value||0===value)).length}function all_input_control_AllInputControl(_ref){let{onChange:onChange,selectedUnits:selectedUnits,setSelectedUnits:setSelectedUnits,values:values,...props}=_ref,allValue=getAllValue(values);void 0===allValue&&(allValue=getAllUnit(selectedUnits));const isMixed=hasDefinedValues(values)&&hasMixedValues(values),allPlaceholder=isMixed?(0,i18n_build_module.__)("Mixed"):null;return(0,react.createElement)(unit_control.ZP,(0,esm_extends.Z)({},props,{"aria-label":(0,i18n_build_module.__)("Border radius"),disableUnits:isMixed,isOnly:!0,value:allValue,onChange:next=>{const isNumeric=!isNaN(parseFloat(next));onChange(isNumeric?next:void 0)},onUnitChange:unit=>{setSelectedUnits({topLeft:unit,topRight:unit,bottomLeft:unit,bottomRight:unit})},placeholder:allPlaceholder,size:"__unstable-large"}))}const CORNERS={topLeft:(0,i18n_build_module.__)("Top left"),topRight:(0,i18n_build_module.__)("Top right"),bottomLeft:(0,i18n_build_module.__)("Bottom left"),bottomRight:(0,i18n_build_module.__)("Bottom right")};function input_controls_BoxInputControls(_ref){let{onChange:onChange,selectedUnits:selectedUnits,setSelectedUnits:setSelectedUnits,values:valuesProp,...props}=_ref;const createHandleOnChange=corner=>next=>{if(!onChange)return;const nextValue=!isNaN(parseFloat(next))?next:void 0;onChange({...values,[corner]:nextValue})},values="string"!=typeof valuesProp?valuesProp:{topLeft:valuesProp,topRight:valuesProp,bottomLeft:valuesProp,bottomRight:valuesProp};return(0,react.createElement)("div",{className:"components-border-radius-control__input-controls-wrapper"},Object.entries(CORNERS).map((_ref2=>{let[corner,label]=_ref2;const[parsedQuantity,parsedUnit]=(0,utils.YX)(values[corner]),computedUnit=values[corner]?parsedUnit:selectedUnits[corner]||selectedUnits.flat;return(0,react.createElement)(tooltip.Z,{text:label,position:"top",key:corner},(0,react.createElement)("div",{className:"components-border-radius-control__tooltip-wrapper"},(0,react.createElement)(unit_control.ZP,(0,esm_extends.Z)({},props,{"aria-label":label,value:[parsedQuantity,computedUnit].join(""),onChange:createHandleOnChange(corner),onUnitChange:(side=corner,next=>{const newUnits={...selectedUnits};newUnits[side]=next,setSelectedUnits(newUnits)}),size:"__unstable-large"}))));var side})))}function linked_button_LinkedButton(_ref){let{isLinked:isLinked,...props}=_ref;const label=isLinked?(0,i18n_build_module.__)("Unlink radii"):(0,i18n_build_module.__)("Link radii");return(0,react.createElement)(tooltip.Z,{text:label},(0,react.createElement)("span",null,(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({},props,{className:"component-border-radius-control__linked-button",isSmall:!0,icon:isLinked?library_link.Z:link_off.Z,iconSize:24,"aria-label":label}))))}const border_radius_control_DEFAULT_VALUES={topLeft:void 0,topRight:void 0,bottomLeft:void 0,bottomRight:void 0},MAX_BORDER_RADIUS_VALUES={px:100,em:20,rem:20};function BorderRadiusControl(_ref){let{onChange:onChange,values:values}=_ref;const[isLinked,setIsLinked]=(0,react.useState)(!hasDefinedValues(values)||!hasMixedValues(values)),[selectedUnits,setSelectedUnits]=(0,react.useState)({flat:"string"==typeof values?(0,utils.YX)(values)[1]:void 0,topLeft:(0,utils.YX)(null==values?void 0:values.topLeft)[1],topRight:(0,utils.YX)(null==values?void 0:values.topRight)[1],bottomLeft:(0,utils.YX)(null==values?void 0:values.bottomLeft)[1],bottomRight:(0,utils.YX)(null==values?void 0:values.bottomRight)[1]}),units=(0,utils.nj)({availableUnits:use_setting_useSetting("spacing.units")||["px","em","rem"]}),unit=getAllUnit(selectedUnits),unitConfig=units&&units.find((item=>item.value===unit)),step=(null==unitConfig?void 0:unitConfig.step)||1,[allValue]=(0,utils.YX)(getAllValue(values));return(0,react.createElement)("fieldset",{className:"components-border-radius-control"},(0,react.createElement)(base_control.ZP.VisualLabel,{as:"legend"},(0,i18n_build_module.__)("Radius")),(0,react.createElement)("div",{className:"components-border-radius-control__wrapper"},isLinked?(0,react.createElement)(react.Fragment,null,(0,react.createElement)(all_input_control_AllInputControl,{className:"components-border-radius-control__unit-control",values:values,min:0,onChange:onChange,selectedUnits:selectedUnits,setSelectedUnits:setSelectedUnits,units:units}),(0,react.createElement)(range_control.Z,{label:(0,i18n_build_module.__)("Border radius"),hideLabelFromVision:!0,className:"components-border-radius-control__range-control",value:null!=allValue?allValue:"",min:0,max:MAX_BORDER_RADIUS_VALUES[unit],initialPosition:0,withInputField:!1,onChange:next=>{onChange(void 0!==next?`${next}${unit}`:void 0)},step:step,__nextHasNoMarginBottom:!0})):(0,react.createElement)(input_controls_BoxInputControls,{min:0,onChange:onChange,selectedUnits:selectedUnits,setSelectedUnits:setSelectedUnits,values:values||border_radius_control_DEFAULT_VALUES,units:units}),(0,react.createElement)(linked_button_LinkedButton,{onClick:()=>setIsLinked(!isLinked),isLinked:isLinked})))}function BorderRadiusEdit(props){var _style$border;const{attributes:{style:style},setAttributes:setAttributes}=props;return(0,react.createElement)(BorderRadiusControl,{values:null==style||null===(_style$border=style.border)||void 0===_style$border?void 0:_style$border.radius,onChange:newRadius=>{const newStyle=cleanEmptyObject({...style,border:{...null==style?void 0:style.border,radius:newRadius}});setAttributes({style:newStyle})}})}(0,colord.l7)([names.Z,a11y.Z]);const getColorObjectByAttributeValues=(colors,definedColor,customColor)=>{if(definedColor){const colorObj=null==colors?void 0:colors.find((color=>color.slug===definedColor));if(colorObj)return colorObj}return{color:customColor}},getColorObjectByColorValue=(colors,colorValue)=>null==colors?void 0:colors.find((color=>color.color===colorValue));function getColorClassName(colorContextName,colorSlug){if(colorContextName&&colorSlug)return`has-${(0,lodash.kebabCase)(colorSlug)}-${colorContextName}`}function useMultipleOriginColorsAndGradients(){const colorGradientSettings=function useCommonSingleMultipleSelects(){return{disableCustomColors:!use_setting_useSetting("color.custom"),disableCustomGradients:!use_setting_useSetting("color.customGradient")}}(),customColors=use_setting_useSetting("color.palette.custom"),themeColors=use_setting_useSetting("color.palette.theme"),defaultColors=use_setting_useSetting("color.palette.default"),shouldDisplayDefaultColors=use_setting_useSetting("color.defaultPalette");colorGradientSettings.colors=(0,react.useMemo)((()=>{const result=[];return themeColors&&themeColors.length&&result.push({name:(0,i18n_build_module._x)("Theme","Indicates this palette comes from the theme."),colors:themeColors}),shouldDisplayDefaultColors&&defaultColors&&defaultColors.length&&result.push({name:(0,i18n_build_module._x)("Default","Indicates this palette comes from WordPress."),colors:defaultColors}),customColors&&customColors.length&&result.push({name:(0,i18n_build_module._x)("Custom","Indicates this palette comes from the theme."),colors:customColors}),result}),[defaultColors,themeColors,customColors]);const customGradients=use_setting_useSetting("color.gradients.custom"),themeGradients=use_setting_useSetting("color.gradients.theme"),defaultGradients=use_setting_useSetting("color.gradients.default"),shouldDisplayDefaultGradients=use_setting_useSetting("color.defaultGradients");return colorGradientSettings.gradients=(0,react.useMemo)((()=>{const result=[];return themeGradients&&themeGradients.length&&result.push({name:(0,i18n_build_module._x)("Theme","Indicates this palette comes from the theme."),gradients:themeGradients}),shouldDisplayDefaultGradients&&defaultGradients&&defaultGradients.length&&result.push({name:(0,i18n_build_module._x)("Default","Indicates this palette comes from WordPress."),gradients:defaultGradients}),customGradients&&customGradients.length&&result.push({name:(0,i18n_build_module._x)("Custom","Indicates this palette is created by the user."),gradients:customGradients}),result}),[customGradients,themeGradients,defaultGradients]),colorGradientSettings}const borderSides=["top","right","bottom","left"],resetBorderFilter=newAttributes=>{var _newAttributes$style,_newAttributes$style$;return{...newAttributes,borderColor:void 0,style:{...newAttributes.style,border:{radius:null===(_newAttributes$style=newAttributes.style)||void 0===_newAttributes$style||null===(_newAttributes$style$=_newAttributes$style.border)||void 0===_newAttributes$style$?void 0:_newAttributes$style$.radius}}}},getColorByProperty=(colors,property,value)=>{let matchedColor;return colors.some((origin=>origin.colors.some((color=>color[property]===value&&(matchedColor=color,!0))))),matchedColor},getMultiOriginColor=_ref2=>{let{colors:colors,namedColor:namedColor,customColor:customColor}=_ref2;if(namedColor){const colorObject=getColorByProperty(colors,"slug",namedColor);if(colorObject)return colorObject}if(!customColor)return{color:void 0};const colorObject=getColorByProperty(colors,"color",customColor);return colorObject||{color:customColor}};function getColorSlugFromVariable(value){const namedColor=/var:preset\|color\|(.+)/.exec(value);return namedColor&&namedColor[1]?namedColor[1]:null}function BorderPanel(props){const{attributes:attributes,clientId:clientId,setAttributes:setAttributes}=props,{style:style}=attributes,{colors:colors}=useMultipleOriginColorsAndGradients(),isSupported=hasBorderSupport(props.name),isColorSupported=use_setting_useSetting("border.color")&&hasBorderSupport(props.name,"color"),isRadiusSupported=use_setting_useSetting("border.radius")&&hasBorderSupport(props.name,"radius"),isStyleSupported=use_setting_useSetting("border.style")&&hasBorderSupport(props.name,"style"),isWidthSupported=use_setting_useSetting("border.width")&&hasBorderSupport(props.name,"width");if([!isColorSupported,!isRadiusSupported,!isStyleSupported,!isWidthSupported].every(Boolean)||!isSupported)return null;const defaultBorderControls=(0,build_module.Dx)(props.name,["__experimentalBorder","__experimentalDefaultControls"]),showBorderByDefault=(null==defaultBorderControls?void 0:defaultBorderControls.color)||(null==defaultBorderControls?void 0:defaultBorderControls.width),hydratedBorder=((attributes,colors)=>{const{borderColor:borderColor,style:style}=attributes,{border:borderStyles}=style||{};if(borderColor){const{color:color}=getMultiOriginColor({colors:colors,namedColor:borderColor});return color?{...borderStyles,color:color}:borderStyles}if(!borderStyles)return borderStyles;const hydratedBorderStyles={...borderStyles};return borderSides.forEach((side=>{var _hydratedBorderStyles;const colorSlug=getColorSlugFromVariable(null===(_hydratedBorderStyles=hydratedBorderStyles[side])||void 0===_hydratedBorderStyles?void 0:_hydratedBorderStyles.color);if(colorSlug){const{color:color}=getMultiOriginColor({colors:colors,namedColor:colorSlug});hydratedBorderStyles[side]={...hydratedBorderStyles[side],color:color}}})),hydratedBorderStyles})(attributes,colors);return(0,react.createElement)(inspector_controls,{__experimentalGroup:"border"},(isWidthSupported||isColorSupported)&&(0,react.createElement)(tools_panel_item_component.Z,{hasValue:()=>(props=>{const{borderColor:borderColor,style:style}=props.attributes;return(0,border_box_control_utils.lX)(null==style?void 0:style.border)||!!borderColor})(props),label:(0,i18n_build_module.__)("Border"),onDeselect:()=>(_ref=>{var _style$border;let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({borderColor:void 0,style:{...style,border:cleanEmptyObject({radius:null==style||null===(_style$border=style.border)||void 0===_style$border?void 0:_style$border.radius})}})})(props),isShownByDefault:showBorderByDefault,resetAllFilter:resetBorderFilter,panelId:clientId},(0,react.createElement)(border_box_control_component,{colors:colors,enableAlpha:!0,enableStyle:isStyleSupported,onChange:newBorder=>{var _style$border2;let newBorderColor,newBorderStyles={...newBorder};if((0,border_box_control_utils.Al)(newBorder))newBorderStyles={top:{...newBorder.top},right:{...newBorder.right},bottom:{...newBorder.bottom},left:{...newBorder.left}},borderSides.forEach((side=>{var _newBorder$side;if(null!==(_newBorder$side=newBorder[side])&&void 0!==_newBorder$side&&_newBorder$side.color){var _newBorder$side2;const colorObject=getMultiOriginColor({colors:colors,customColor:null===(_newBorder$side2=newBorder[side])||void 0===_newBorder$side2?void 0:_newBorder$side2.color});colorObject.slug&&(newBorderStyles[side].color=`var:preset|color|${colorObject.slug}`)}}));else if(null!=newBorder&&newBorder.color){const customColor=null==newBorder?void 0:newBorder.color,colorObject=getMultiOriginColor({colors:colors,customColor:customColor});colorObject.slug&&(newBorderColor=colorObject.slug,newBorderStyles.color=void 0)}const newStyle=cleanEmptyObject({...style,border:{radius:null==style||null===(_style$border2=style.border)||void 0===_style$border2?void 0:_style$border2.radius,...newBorderStyles}});setAttributes({style:newStyle,borderColor:newBorderColor})},popoverOffset:40,popoverPlacement:"left-start",size:"__unstable-large",value:hydratedBorder,__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0})),isRadiusSupported&&(0,react.createElement)(tools_panel_item_component.Z,{hasValue:()=>function hasBorderRadiusValue(props){var _props$attributes$sty,_props$attributes$sty2;const borderRadius=null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.border)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.radius;return"object"==typeof borderRadius?Object.entries(borderRadius).some(Boolean):!!borderRadius}(props),label:(0,i18n_build_module.__)("Radius"),onDeselect:()=>function resetBorderRadius(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:removeBorderAttribute(style,"radius")})}(props),isShownByDefault:null==defaultBorderControls?void 0:defaultBorderControls.radius,resetAllFilter:newAttributes=>{var _newAttributes$style2;return{...newAttributes,style:{...newAttributes.style,border:{...null===(_newAttributes$style2=newAttributes.style)||void 0===_newAttributes$style2?void 0:_newAttributes$style2.border,radius:void 0}}}},panelId:clientId},(0,react.createElement)(BorderRadiusEdit,props)))}function hasBorderSupport(blockName){let feature=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";if("web"!==platform.Z.OS)return!1;const support=(0,build_module.Dx)(blockName,"__experimentalBorder");return!0===support||("any"===feature?!!(null!=support&&support.color||null!=support&&support.radius||null!=support&&support.width||null!=support&&support.style):!(null==support||!support[feature]))}function removeBorderAttribute(style,attribute){return cleanEmptyObject({...style,border:{...null==style?void 0:style.border,[attribute]:void 0}})}function border_addSaveProps(props,blockType,attributes){if(!hasBorderSupport(blockType,"color")||shouldSkipSerialization(blockType,"__experimentalBorder","color"))return props;const borderClasses=getBorderClasses(attributes),newClassName=classnames_default()(props.className,borderClasses);return props.className=newClassName||void 0,props}function getBorderClasses(attributes){var _style$border3;const{borderColor:borderColor,style:style}=attributes,borderColorClass=getColorClassName("border-color",borderColor);return classnames_default()({"has-border-color":borderColor||(null==style||null===(_style$border3=style.border)||void 0===_style$border3?void 0:_style$border3.color),[borderColorClass]:!!borderColorClass})}const withBorderColorPaletteStyles=(0,create_higher_order_component.o)((BlockListBlock=>props=>{var _style$border4,_style$border4$top,_style$border5,_style$border5$right,_style$border6,_style$border6$bottom,_style$border7,_style$border7$left,_props$wrapperProps;const{name:name,attributes:attributes}=props,{borderColor:borderColor,style:style}=attributes,{colors:colors}=useMultipleOriginColorsAndGradients();if(!hasBorderSupport(name,"color")||shouldSkipSerialization(name,"__experimentalBorder","color"))return(0,react.createElement)(BlockListBlock,props);const{color:borderColorValue}=getMultiOriginColor({colors:colors,namedColor:borderColor}),{color:borderTopColor}=getMultiOriginColor({colors:colors,namedColor:getColorSlugFromVariable(null==style||null===(_style$border4=style.border)||void 0===_style$border4||null===(_style$border4$top=_style$border4.top)||void 0===_style$border4$top?void 0:_style$border4$top.color)}),{color:borderRightColor}=getMultiOriginColor({colors:colors,namedColor:getColorSlugFromVariable(null==style||null===(_style$border5=style.border)||void 0===_style$border5||null===(_style$border5$right=_style$border5.right)||void 0===_style$border5$right?void 0:_style$border5$right.color)}),{color:borderBottomColor}=getMultiOriginColor({colors:colors,namedColor:getColorSlugFromVariable(null==style||null===(_style$border6=style.border)||void 0===_style$border6||null===(_style$border6$bottom=_style$border6.bottom)||void 0===_style$border6$bottom?void 0:_style$border6$bottom.color)}),{color:borderLeftColor}=getMultiOriginColor({colors:colors,namedColor:getColorSlugFromVariable(null==style||null===(_style$border7=style.border)||void 0===_style$border7||null===(_style$border7$left=_style$border7.left)||void 0===_style$border7$left?void 0:_style$border7$left.color)}),extraStyles={borderTopColor:borderTopColor||borderColorValue,borderRightColor:borderRightColor||borderColorValue,borderBottomColor:borderBottomColor||borderColorValue,borderLeftColor:borderLeftColor||borderColorValue};let wrapperProps=props.wrapperProps;return wrapperProps={...props.wrapperProps,style:{...null===(_props$wrapperProps=props.wrapperProps)||void 0===_props$wrapperProps?void 0:_props$wrapperProps.style,...extraStyles}},(0,react.createElement)(BlockListBlock,(0,esm_extends.Z)({},props,{wrapperProps:wrapperProps}))}));function __experimentalGetGradientClass(gradientSlug){if(gradientSlug)return`has-${gradientSlug}-gradient-background`}function getGradientValueBySlug(gradients,slug){const gradient=null==gradients?void 0:gradients.find((g=>g.slug===slug));return gradient&&gradient.gradient}function getGradientSlugByValue(gradients,value){const gradient=function __experimentalGetGradientObjectByGradientValue(gradients,value){return null==gradients?void 0:gradients.find((g=>g.gradient===value))}(gradients,value);return gradient&&gradient.slug}function __experimentalUseGradient(){let{gradientAttribute:gradientAttribute="gradient",customGradientAttribute:customGradientAttribute="customGradient"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clientId:clientId}=useBlockEditContext(),userGradientPalette=use_setting_useSetting("color.gradients.custom"),themeGradientPalette=use_setting_useSetting("color.gradients.theme"),defaultGradientPalette=use_setting_useSetting("color.gradients.default"),allGradients=(0,react.useMemo)((()=>[...userGradientPalette||[],...themeGradientPalette||[],...defaultGradientPalette||[]]),[userGradientPalette,themeGradientPalette,defaultGradientPalette]),{gradient:gradient,customGradient:customGradient}=(0,use_select.Z)((select=>{const{getBlockAttributes:getBlockAttributes}=select(store),attributes=getBlockAttributes(clientId)||{};return{customGradient:attributes[customGradientAttribute],gradient:attributes[gradientAttribute]}}),[clientId,gradientAttribute,customGradientAttribute]),{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store),setGradient=(0,react.useCallback)((newGradientValue=>{const slug=getGradientSlugByValue(allGradients,newGradientValue);updateBlockAttributes(clientId,slug?{[gradientAttribute]:slug,[customGradientAttribute]:void 0}:{[gradientAttribute]:void 0,[customGradientAttribute]:newGradientValue})}),[allGradients,clientId,updateBlockAttributes]),gradientClass=__experimentalGetGradientClass(gradient);let gradientValue;return gradientValue=gradient?getGradientValueBySlug(allGradients,gradient):customGradient,{gradientClass:gradientClass,gradientValue:gradientValue,setGradient:setGradient}}(0,hooks_build_module.KJ)("blocks.registerBlockType","core/border/addAttributes",(function addAttributes(settings){return hasBorderSupport(settings,"color")?settings.attributes.borderColor?settings:{...settings,attributes:{...settings.attributes,borderColor:{type:"string"}}}:settings})),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/border/addSaveProps",border_addSaveProps),(0,hooks_build_module.KJ)("blocks.registerBlockType","core/border/addEditProps",(function addEditProps(settings){if(!hasBorderSupport(settings,"color")||shouldSkipSerialization(settings,"__experimentalBorder","color"))return settings;const existingGetEditWrapperProps=settings.getEditWrapperProps;return settings.getEditWrapperProps=attributes=>{let props={};return existingGetEditWrapperProps&&(props=existingGetEditWrapperProps(attributes)),border_addSaveProps(props,settings,attributes)},settings})),(0,hooks_build_module.KJ)("editor.BlockListBlock","core/border/with-border-color-palette-styles",withBorderColorPaletteStyles);var use_dragging=__webpack_require__("./packages/compose/build-module/hooks/use-dragging/index.js");const deprecatedBottomMargin=_ref=>{let{__nextHasNoMarginBottom:__nextHasNoMarginBottom}=_ref;return __nextHasNoMarginBottom?"":(0,emotion_react_browser_esm.iv)("margin-bottom:",(0,space.D)(2),";","","","")},angle_picker_control_styles_Root=(0,emotion_styled_base_browser_esm.Z)(component.Z,{target:"e65ony43"})(deprecatedBottomMargin,";"),CircleRoot=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e65ony42"})("border-radius:50%;border:",config_values.Z.borderWidth," solid ",colors_values.D.ui.border,";box-sizing:border-box;cursor:grab;height:",32,"px;overflow:hidden;width:",32,"px;"),CircleIndicatorWrapper=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e65ony41"})({name:"1r307gh",styles:"box-sizing:border-box;position:relative;width:100%;height:100%;:focus-visible{outline:none;}"}),CircleIndicator=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e65ony40"})("background:",colors_values.D.ui.theme,";border-radius:50%;border:",3,"px solid ",colors_values.D.ui.theme,";bottom:0;box-sizing:border-box;display:block;height:0px;left:0;margin:auto;position:absolute;right:0;top:-",16,"px;width:0px;");var angle_circle=function AngleCircle(_ref){let{value:value,onChange:onChange,...props}=_ref;const angleCircleRef=(0,react.useRef)(),angleCircleCenter=(0,react.useRef)(),previousCursorValue=(0,react.useRef)(),changeAngleToPosition=event=>{const{x:centerX,y:centerY}=angleCircleCenter.current;event.preventDefault(),event.target.focus(),onChange(function getAngle(centerX,centerY,pointX,pointY){const y=pointY-centerY,x=pointX-centerX,angleInRadians=Math.atan2(y,x),angleInDeg=Math.round(angleInRadians*(180/Math.PI))+90;if(angleInDeg<0)return 360+angleInDeg;return angleInDeg}(centerX,centerY,event.clientX,event.clientY))},{startDrag:startDrag,isDragging:isDragging}=(0,use_dragging.Z)({onDragStart:event=>{(()=>{const rect=angleCircleRef.current.getBoundingClientRect();angleCircleCenter.current={x:rect.x+rect.width/2,y:rect.y+rect.height/2}})(),changeAngleToPosition(event)},onDragMove:changeAngleToPosition,onDragEnd:changeAngleToPosition});return(0,react.useEffect)((()=>{isDragging?(void 0===previousCursorValue.current&&(previousCursorValue.current=document.body.style.cursor),document.body.style.cursor="grabbing"):(document.body.style.cursor=previousCursorValue.current||null,previousCursorValue.current=void 0)}),[isDragging]),(0,react.createElement)(CircleRoot,(0,esm_extends.Z)({ref:angleCircleRef,onMouseDown:startDrag,className:"components-angle-picker-control__angle-circle",style:isDragging?{cursor:"grabbing"}:void 0},props),(0,react.createElement)(CircleIndicatorWrapper,{style:value?{transform:`rotate(${value}deg)`}:void 0,className:"components-angle-picker-control__angle-circle-indicator-wrapper",tabIndex:-1},(0,react.createElement)(CircleIndicator,{className:"components-angle-picker-control__angle-circle-indicator"})))};function AnglePickerControl(_ref){let{__nextHasNoMarginBottom:__nextHasNoMarginBottom=!1,className:className,label:label=(0,i18n_build_module.__)("Angle"),onChange:onChange,value:value}=_ref;__nextHasNoMarginBottom||(0,deprecated_build_module.Z)("Bottom margin styles for wp.components.AnglePickerControl",{since:"6.1",version:"6.4",hint:"Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version."});const classes=classnames_default()("components-angle-picker-control",className);return(0,react.createElement)(angle_picker_control_styles_Root,{__nextHasNoMarginBottom:__nextHasNoMarginBottom,className:classes,gap:4},(0,react.createElement)(flex_block_component.Z,null,(0,react.createElement)(number_control.Z,{label:label,className:"components-angle-picker-control__input-field",max:360,min:0,onChange:unprocessedValue=>{const inputValue=""!==unprocessedValue?parseInt(unprocessedValue,10):0;onChange(inputValue)},size:"__unstable-large",step:"1",value:value,spinControls:"none",suffix:(0,react.createElement)(spacer_component.Z,{as:text_component.Z,marginBottom:0,marginRight:(0,space.D)(3),style:{color:colors_values.D.ui.theme}},"")})),(0,react.createElement)(flex_item_component.Z,{style:{marginBottom:(0,space.D)(1),marginTop:"auto"}},(0,react.createElement)(angle_circle,{"aria-hidden":"true",value:value,onChange:onChange})))}function clampPercent(value){return Math.max(0,Math.min(100,value))}function updateControlPoint(points,index,newPoint){const newValue=points.slice();return newValue[index]=newPoint,newValue}function updateControlPointPosition(points,index,newPosition){if(function isOverlapping(value,initialIndex,newPosition){let minDistance=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const initialPosition=value[initialIndex].position,minPosition=Math.min(initialPosition,newPosition),maxPosition=Math.max(initialPosition,newPosition);return value.some(((_ref,index)=>{let{position:position}=_ref;return index!==initialIndex&&(Math.abs(position-newPosition)<minDistance||minPosition<position&&position<maxPosition)}))}(points,index,newPosition))return points;return updateControlPoint(points,index,{...points[index],position:newPosition})}function updateControlPointColor(points,index,newColor){return updateControlPoint(points,index,{...points[index],color:newColor})}function getHorizontalRelativeGradientPosition(mouseXCoordinate,containerElement){if(!containerElement)return;const{x:x,width:width}=containerElement.getBoundingClientRect(),absolutePositionValue=mouseXCoordinate-x;return Math.round(clampPercent(100*absolutePositionValue/width))}function ControlPointButton(_ref){let{isOpen:isOpen,position:position,color:color,...additionalProps}=_ref;const descriptionId=`components-custom-gradient-picker__control-point-button-description-${(0,use_instance_id.Z)(ControlPointButton)}`;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({"aria-label":(0,i18n_build_module.gB)((0,i18n_build_module.__)("Gradient control point at position %1$s%% with color code %2$s."),position,color),"aria-describedby":descriptionId,"aria-haspopup":"true","aria-expanded":isOpen,className:classnames_default()("components-custom-gradient-picker__control-point-button",{"is-active":isOpen})},additionalProps)),(0,react.createElement)(visually_hidden_component.Z,{id:descriptionId},(0,i18n_build_module.__)("Use your left or right arrow keys or drag and drop with the mouse to change the gradient position. Press the button to change the color or remove the control point.")))}function GradientColorPickerDropdown(_ref2){let{isRenderedInSidebar:isRenderedInSidebar,className:className,...props}=_ref2;const popoverProps=(0,react.useMemo)((()=>({placement:"bottom",offset:8})),[]),mergedClassName=classnames_default()("components-custom-gradient-picker__control-point-dropdown",className);return(0,react.createElement)(CustomColorPickerDropdown,(0,esm_extends.Z)({isRenderedInSidebar:isRenderedInSidebar,popoverProps:popoverProps,className:mergedClassName},props))}function ControlPoints(_ref3){let{disableRemove:disableRemove,disableAlpha:disableAlpha,gradientPickerDomRef:gradientPickerDomRef,ignoreMarkerPosition:ignoreMarkerPosition,value:controlPoints,onChange:onChange,onStartControlPointChange:onStartControlPointChange,onStopControlPointChange:onStopControlPointChange,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar}=_ref3;const controlPointMoveState=(0,react.useRef)(),onMouseMove=event=>{const relativePosition=getHorizontalRelativeGradientPosition(event.clientX,gradientPickerDomRef.current),{initialPosition:initialPosition,index:index,significantMoveHappened:significantMoveHappened}=controlPointMoveState.current;!significantMoveHappened&&Math.abs(initialPosition-relativePosition)>=5&&(controlPointMoveState.current.significantMoveHappened=!0),onChange(updateControlPointPosition(controlPoints,index,relativePosition))},cleanEventListeners=()=>{window&&window.removeEventListener&&controlPointMoveState.current&&controlPointMoveState.current.listenersActivated&&(window.removeEventListener("mousemove",onMouseMove),window.removeEventListener("mouseup",cleanEventListeners),onStopControlPointChange(),controlPointMoveState.current.listenersActivated=!1)},cleanEventListenersRef=(0,react.useRef)();return cleanEventListenersRef.current=cleanEventListeners,(0,react.useEffect)((()=>()=>{cleanEventListenersRef.current()}),[]),controlPoints.map(((point,index)=>{const initialPosition=null==point?void 0:point.position;return ignoreMarkerPosition!==initialPosition&&(0,react.createElement)(GradientColorPickerDropdown,{isRenderedInSidebar:__experimentalIsRenderedInSidebar,key:index,onClose:onStopControlPointChange,renderToggle:_ref4=>{let{isOpen:isOpen,onToggle:onToggle}=_ref4;return(0,react.createElement)(ControlPointButton,{key:index,onClick:()=>{controlPointMoveState.current&&controlPointMoveState.current.significantMoveHappened||(isOpen?onStopControlPointChange():onStartControlPointChange(),onToggle())},onMouseDown:()=>{window&&window.addEventListener&&(controlPointMoveState.current={initialPosition:initialPosition,index:index,significantMoveHappened:!1,listenersActivated:!0},onStartControlPointChange(),window.addEventListener("mousemove",onMouseMove),window.addEventListener("mouseup",cleanEventListeners))},onKeyDown:event=>{"ArrowLeft"===event.code?(event.stopPropagation(),onChange(updateControlPointPosition(controlPoints,index,clampPercent(point.position-10)))):"ArrowRight"===event.code&&(event.stopPropagation(),onChange(updateControlPointPosition(controlPoints,index,clampPercent(point.position+10))))},isOpen:isOpen,position:point.position,color:point.color})},renderContent:_ref5=>{let{onClose:onClose}=_ref5;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(LegacyAdapter,{enableAlpha:!disableAlpha,color:point.color,onChange:color=>{onChange(updateControlPointColor(controlPoints,index,(0,colord.Vi)(color).toRgbString()))}}),!disableRemove&&controlPoints.length>2&&(0,react.createElement)(h_stack_component.Z,{className:"components-custom-gradient-picker__remove-control-point-wrapper",alignment:"center"},(0,react.createElement)(build_module_button.Z,{onClick:()=>{onChange(function removeControlPoint(points,index){return points.filter(((point,pointIndex)=>pointIndex!==index))}(controlPoints,index)),onClose()},variant:"link"},(0,i18n_build_module.__)("Remove Control Point"))))},style:{left:`${point.position}%`,transform:"translateX( -50% )"}})}))}ControlPoints.InsertPoint=function InsertPoint(_ref6){let{value:controlPoints,onChange:onChange,onOpenInserter:onOpenInserter,onCloseInserter:onCloseInserter,insertPosition:insertPosition,disableAlpha:disableAlpha,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar}=_ref6;const[alreadyInsertedPoint,setAlreadyInsertedPoint]=(0,react.useState)(!1);return(0,react.createElement)(GradientColorPickerDropdown,{isRenderedInSidebar:__experimentalIsRenderedInSidebar,className:"components-custom-gradient-picker__inserter",onClose:()=>{onCloseInserter()},renderToggle:_ref7=>{let{isOpen:isOpen,onToggle:onToggle}=_ref7;return(0,react.createElement)(build_module_button.Z,{"aria-expanded":isOpen,"aria-haspopup":"true",onClick:()=>{isOpen?onCloseInserter():(setAlreadyInsertedPoint(!1),onOpenInserter()),onToggle()},className:"components-custom-gradient-picker__insert-point-dropdown",icon:plus.Z})},renderContent:()=>(0,react.createElement)(LegacyAdapter,{enableAlpha:!disableAlpha,onChange:color=>{alreadyInsertedPoint?onChange(function updateControlPointColorByPosition(points,position,newColor){const index=points.findIndex((point=>point.position===position));return updateControlPointColor(points,index,newColor)}(controlPoints,insertPosition,(0,colord.Vi)(color).toRgbString())):(onChange(function addControlPoint(points,position,color){const nextIndex=points.findIndex((point=>point.position>position)),newPoint={color:color,position:position},newPoints=points.slice();return newPoints.splice(nextIndex-1,0,newPoint),newPoints}(controlPoints,insertPosition,(0,colord.Vi)(color).toRgbString())),setAlreadyInsertedPoint(!0))}}),style:null!==insertPosition?{left:`${insertPosition}%`,transform:"translateX( -50% )"}:void 0})};var control_points=ControlPoints;function customGradientBarReducer(state,action){switch(action.type){case"MOVE_INSERTER":if("IDLE"===state.id||"MOVING_INSERTER"===state.id)return{id:"MOVING_INSERTER",insertPosition:action.insertPosition};break;case"STOP_INSERTER_MOVE":if("MOVING_INSERTER"===state.id)return{id:"IDLE"};break;case"OPEN_INSERTER":if("MOVING_INSERTER"===state.id)return{id:"INSERTING_CONTROL_POINT",insertPosition:state.insertPosition};break;case"CLOSE_INSERTER":if("INSERTING_CONTROL_POINT"===state.id)return{id:"IDLE"};break;case"START_CONTROL_CHANGE":if("IDLE"===state.id)return{id:"MOVING_CONTROL_POINT"};break;case"STOP_CONTROL_CHANGE":if("MOVING_CONTROL_POINT"===state.id)return{id:"IDLE"}}return state}const customGradientBarReducerInitialState={id:"IDLE"};function CustomGradientBar(_ref){let{background:background,hasGradient:hasGradient,value:controlPoints,onChange:onChange,disableInserter:disableInserter=!1,disableAlpha:disableAlpha=!1,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar}=_ref;const gradientMarkersContainerDomRef=(0,react.useRef)(),[gradientBarState,gradientBarStateDispatch]=(0,react.useReducer)(customGradientBarReducer,customGradientBarReducerInitialState),onMouseEnterAndMove=event=>{const insertPosition=getHorizontalRelativeGradientPosition(event.clientX,gradientMarkersContainerDomRef.current);controlPoints.some((_ref2=>{let{position:position}=_ref2;return Math.abs(insertPosition-position)<10}))?"MOVING_INSERTER"===gradientBarState.id&&gradientBarStateDispatch({type:"STOP_INSERTER_MOVE"}):gradientBarStateDispatch({type:"MOVE_INSERTER",insertPosition:insertPosition})},isMovingInserter="MOVING_INSERTER"===gradientBarState.id,isInsertingControlPoint="INSERTING_CONTROL_POINT"===gradientBarState.id;return(0,react.createElement)("div",{className:classnames_default()("components-custom-gradient-picker__gradient-bar",{"has-gradient":hasGradient}),onMouseEnter:onMouseEnterAndMove,onMouseMove:onMouseEnterAndMove,style:{background:background},onMouseLeave:()=>{gradientBarStateDispatch({type:"STOP_INSERTER_MOVE"})}},(0,react.createElement)("div",{ref:gradientMarkersContainerDomRef,className:"components-custom-gradient-picker__markers-container"},!disableInserter&&(isMovingInserter||isInsertingControlPoint)&&(0,react.createElement)(control_points.InsertPoint,{__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,disableAlpha:disableAlpha,insertPosition:gradientBarState.insertPosition,value:controlPoints,onChange:onChange,onOpenInserter:()=>{gradientBarStateDispatch({type:"OPEN_INSERTER"})},onCloseInserter:()=>{gradientBarStateDispatch({type:"CLOSE_INSERTER"})}}),(0,react.createElement)(control_points,{__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,disableAlpha:disableAlpha,disableRemove:disableInserter,gradientPickerDomRef:gradientMarkersContainerDomRef,ignoreMarkerPosition:isInsertingControlPoint?gradientBarState.insertPosition:void 0,value:controlPoints,onChange:onChange,onStartControlPointChange:()=>{gradientBarStateDispatch({type:"START_CONTROL_CHANGE"})},onStopControlPointChange:()=>{gradientBarStateDispatch({type:"STOP_CONTROL_CHANGE"})}})))}var node=__webpack_require__("./node_modules/gradient-parser/build/node.js");const DEFAULT_GRADIENT="linear-gradient(135deg, rgba(6, 147, 227, 1) 0%, rgb(155, 81, 224) 100%)",HORIZONTAL_GRADIENT_ORIENTATION={type:"angular",value:90},GRADIENT_OPTIONS=[{value:"linear-gradient",label:(0,i18n_build_module.__)("Linear")},{value:"radial-gradient",label:(0,i18n_build_module.__)("Radial")}],DIRECTIONAL_ORIENTATION_ANGLE_MAP={top:0,"top right":45,"right top":45,right:90,"right bottom":135,"bottom right":135,bottom:180,"bottom left":225,"left bottom":225,left:270,"top left":315,"left top":315};function serializeGradientColorStop(_ref2){let{type:type,value:value,length:length}=_ref2;return`${function serializeGradientColor(_ref){let{type:type,value:value}=_ref;return"literal"===type?value:"hex"===type?`#${value}`:`${type}(${value.join(",")})`}({type:type,value:value})} ${function serializeGradientPosition(position){if(!position)return"";const{value:value,type:type}=position;return`${value}${type}`}(length)}`}function serializeGradient(_ref3){let{type:type,orientation:orientation,colorStops:colorStops}=_ref3;const serializedOrientation=function serializeGradientOrientation(orientation){if(orientation&&"angular"===orientation.type)return`${orientation.value}deg`}(orientation);return`${type}(${[serializedOrientation,...colorStops.sort(((colorStop1,colorStop2)=>{var _colorStop1$length$va,_colorStop1$length,_colorStop2$length$va,_colorStop2$length;return(null!==(_colorStop1$length$va=null==colorStop1||null===(_colorStop1$length=colorStop1.length)||void 0===_colorStop1$length?void 0:_colorStop1$length.value)&&void 0!==_colorStop1$length$va?_colorStop1$length$va:0)-(null!==(_colorStop2$length$va=null==colorStop2||null===(_colorStop2$length=colorStop2.length)||void 0===_colorStop2$length?void 0:_colorStop2$length.value)&&void 0!==_colorStop2$length$va?_colorStop2$length$va:0)})).map(serializeGradientColorStop)].filter(Boolean).join(",")})`}function hasUnsupportedLength(item){return void 0===item.length||"%"!==item.length.type}function getStopCssColor(colorStop){switch(colorStop.type){case"hex":return`#${colorStop.value}`;case"literal":return colorStop.value;case"rgb":case"rgba":return`${colorStop.type}(${colorStop.value.join(",")})`;default:return"transparent"}}(0,colord.l7)([names.Z]);const SelectWrapper=(0,emotion_styled_base_browser_esm.Z)(flex_block_component.Z,{target:"e99xvul1"})({name:"1gvx10y",styles:"flex-grow:5"}),AccessoryWrapper=(0,emotion_styled_base_browser_esm.Z)(flex_block_component.Z,{target:"e99xvul0"})({name:"1gvx10y",styles:"flex-grow:5"}),GradientAnglePicker=_ref=>{var _gradientAST$orientat,_gradientAST$orientat2;let{gradientAST:gradientAST,hasGradient:hasGradient,onChange:onChange}=_ref;const angle=null!==(_gradientAST$orientat=null==gradientAST||null===(_gradientAST$orientat2=gradientAST.orientation)||void 0===_gradientAST$orientat2?void 0:_gradientAST$orientat2.value)&&void 0!==_gradientAST$orientat?_gradientAST$orientat:180;return(0,react.createElement)(AnglePickerControl,{__nextHasNoMarginBottom:!0,onChange:newAngle=>{onChange(serializeGradient({...gradientAST,orientation:{type:"angular",value:newAngle}}))},labelPosition:"top",value:hasGradient?angle:""})},GradientTypePicker=_ref2=>{let{gradientAST:gradientAST,hasGradient:hasGradient,onChange:onChange}=_ref2;const{type:type}=gradientAST;return(0,react.createElement)(select_control.Z,{__nextHasNoMarginBottom:!0,className:"components-custom-gradient-picker__type-picker",label:(0,i18n_build_module.__)("Type"),labelPosition:"top",onChange:next=>{"linear-gradient"===next&&onChange(serializeGradient({...gradientAST,...gradientAST.orientation?{}:{orientation:HORIZONTAL_GRADIENT_ORIENTATION},type:"linear-gradient"})),"radial-gradient"===next&&(()=>{const{orientation:orientation,...restGradientAST}=gradientAST;onChange(serializeGradient({...restGradientAST,type:"radial-gradient"}))})()},options:GRADIENT_OPTIONS,size:"__unstable-large",value:hasGradient&&type})};function CustomGradientPicker(_ref3){let{__nextHasNoMargin:__nextHasNoMargin=!1,value:value,onChange:onChange,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar}=_ref3;const gradientAST=function getGradientAstWithDefault(value){var _gradientAST$orientat;let gradientAST;try{gradientAST=node.parse(value)[0],gradientAST.value=value}catch(error){gradientAST=node.parse(DEFAULT_GRADIENT)[0],gradientAST.value=DEFAULT_GRADIENT}if("directional"===(null===(_gradientAST$orientat=gradientAST.orientation)||void 0===_gradientAST$orientat?void 0:_gradientAST$orientat.type)&&(gradientAST.orientation.type="angular",gradientAST.orientation.value=DIRECTIONAL_ORIENTATION_ANGLE_MAP[gradientAST.orientation.value].toString()),gradientAST.colorStops.some(hasUnsupportedLength)){const{colorStops:colorStops}=gradientAST,step=100/(colorStops.length-1);colorStops.forEach(((stop,index)=>{stop.length={value:step*index,type:"%"}})),gradientAST.value=serializeGradient(gradientAST)}return gradientAST}(value),background=function getLinearGradientRepresentation(gradientAST){return serializeGradient({type:"linear-gradient",orientation:HORIZONTAL_GRADIENT_ORIENTATION,colorStops:gradientAST.colorStops})}(gradientAST),hasGradient=gradientAST.value!==DEFAULT_GRADIENT,controlPoints=gradientAST.colorStops.map((colorStop=>({color:getStopCssColor(colorStop),position:parseInt(colorStop.length.value)})));return __nextHasNoMargin||(0,deprecated_build_module.Z)("Outer margin styles for wp.components.CustomGradientPicker",{since:"6.1",version:"6.4",hint:"Set the `__nextHasNoMargin` prop to true to start opting into the new styles, which will become the default in a future version"}),(0,react.createElement)(v_stack_component.Z,{spacing:4,className:classnames_default()("components-custom-gradient-picker",{"is-next-has-no-margin":__nextHasNoMargin})},(0,react.createElement)(CustomGradientBar,{__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,background:background,hasGradient:hasGradient,value:controlPoints,onChange:newControlPoints=>{onChange(serializeGradient(function getGradientAstWithControlPoints(gradientAST,newControlPoints){return{...gradientAST,colorStops:newControlPoints.map((_ref=>{let{position:position,color:color}=_ref;const{r:r,g:g,b:b,a:a}=(0,colord.Vi)(color).toRgb();return{length:{type:"%",value:null==position?void 0:position.toString()},type:a<1?"rgba":"rgb",value:a<1?[r,g,b,a]:[r,g,b]}}))}}(gradientAST,newControlPoints)))}}),(0,react.createElement)(component.Z,{gap:3,className:"components-custom-gradient-picker__ui-line"},(0,react.createElement)(SelectWrapper,null,(0,react.createElement)(GradientTypePicker,{gradientAST:gradientAST,hasGradient:hasGradient,onChange:onChange})),(0,react.createElement)(AccessoryWrapper,null,"linear-gradient"===gradientAST.type&&(0,react.createElement)(GradientAnglePicker,{gradientAST:gradientAST,hasGradient:hasGradient,onChange:onChange}))))}function SingleOrigin(_ref){let{className:className,clearGradient:clearGradient,gradients:gradients,onChange:onChange,value:value,actions:actions}=_ref;const gradientOptions=(0,react.useMemo)((()=>gradients.map(((_ref2,index)=>{let{gradient:gradient,name:name}=_ref2;return(0,react.createElement)(CircularOptionPicker.Option,{key:gradient,value:gradient,isSelected:value===gradient,tooltipText:name||(0,i18n_build_module.gB)((0,i18n_build_module.__)("Gradient code: %s"),gradient),style:{color:"rgba( 0,0,0,0 )",background:gradient},onClick:value===gradient?clearGradient:()=>onChange(gradient,index),"aria-label":name?(0,i18n_build_module.gB)((0,i18n_build_module.__)("Gradient: %s"),name):(0,i18n_build_module.gB)((0,i18n_build_module.__)("Gradient code: %s"),gradient)})}))),[gradients,value,onChange,clearGradient]);return(0,react.createElement)(CircularOptionPicker,{className:className,options:gradientOptions,actions:actions})}function MultipleOrigin(_ref3){let{className:className,clearGradient:clearGradient,gradients:gradients,onChange:onChange,value:value,actions:actions}=_ref3;return(0,react.createElement)(v_stack_component.Z,{spacing:3,className:className},gradients.map(((_ref4,index)=>{let{name:name,gradients:gradientSet}=_ref4;return(0,react.createElement)(v_stack_component.Z,{spacing:2,key:index},(0,react.createElement)(ColorHeading,null,name),(0,react.createElement)(SingleOrigin,(0,esm_extends.Z)({clearGradient:clearGradient,gradients:gradientSet,onChange:gradient=>onChange(gradient,index),value:value},gradients.length===index+1?{actions:actions}:{})))})))}function GradientPicker(_ref5){let{__nextHasNoMargin:__nextHasNoMargin=!1,className:className,gradients:gradients,onChange:onChange,value:value,clearable:clearable=!0,disableCustomGradients:disableCustomGradients=!1,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar}=_ref5;const clearGradient=(0,react.useCallback)((()=>onChange(void 0)),[onChange]),Component=__experimentalHasMultipleOrigins&&null!=gradients&&gradients.length?MultipleOrigin:SingleOrigin;__nextHasNoMargin||(0,deprecated_build_module.Z)("Outer margin styles for wp.components.GradientPicker",{since:"6.1",version:"6.4",hint:"Set the `__nextHasNoMargin` prop to true to start opting into the new styles, which will become the default in a future version"});const deprecatedMarginSpacerProps=__nextHasNoMargin?{}:{marginTop:null!=gradients&&gradients.length?void 0:3,marginBottom:clearable?0:6};return(0,react.createElement)(spacer_component.Z,(0,esm_extends.Z)({marginBottom:0},deprecatedMarginSpacerProps),(0,react.createElement)(v_stack_component.Z,{spacing:null!=gradients&&gradients.length?4:0},!disableCustomGradients&&(0,react.createElement)(CustomGradientPicker,{__nextHasNoMargin:!0,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,value:value,onChange:onChange}),((null==gradients?void 0:gradients.length)||clearable)&&(0,react.createElement)(Component,{className:className,clearable:clearable,clearGradient:clearGradient,gradients:gradients,onChange:onChange,value:value,actions:clearable&&!disableCustomGradients&&(0,react.createElement)(CircularOptionPicker.ButtonAction,{onClick:clearGradient},(0,i18n_build_module.__)("Clear"))})))}const colorsAndGradientKeys=["colors","disableCustomColors","gradients","disableCustomGradients"],TAB_COLOR={name:"color",title:"Solid",value:"color"},TAB_GRADIENT={name:"gradient",title:"Gradient",value:"gradient"},TABS_SETTINGS=[TAB_COLOR,TAB_GRADIENT];function ColorGradientControlInner(_ref){let{colors:colors,gradients:gradients,disableCustomColors:disableCustomColors,disableCustomGradients:disableCustomGradients,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,className:className,label:label,onColorChange:onColorChange,onGradientChange:onGradientChange,colorValue:colorValue,gradientValue:gradientValue,clearable:clearable,showTitle:showTitle=!0,enableAlpha:enableAlpha}=_ref;const canChooseAColor=onColorChange&&(!(0,lodash.isEmpty)(colors)||!disableCustomColors),canChooseAGradient=onGradientChange&&(!(0,lodash.isEmpty)(gradients)||!disableCustomGradients);if(!canChooseAColor&&!canChooseAGradient)return null;const tabPanels={[TAB_COLOR.value]:(0,react.createElement)(color_palette,{value:colorValue,onChange:canChooseAGradient?newColor=>{onColorChange(newColor),onGradientChange()}:onColorChange,colors:colors,disableCustomColors:disableCustomColors,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,clearable:clearable,enableAlpha:enableAlpha}),[TAB_GRADIENT.value]:(0,react.createElement)(GradientPicker,{__nextHasNoMargin:!0,value:gradientValue,onChange:canChooseAColor?newGradient=>{onGradientChange(newGradient),onColorChange()}:onGradientChange,gradients:gradients,disableCustomGradients:disableCustomGradients,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,clearable:clearable})},renderPanelType=type=>(0,react.createElement)("div",{className:"block-editor-color-gradient-control__panel"},tabPanels[type]);return(0,react.createElement)(base_control.ZP,{__nextHasNoMarginBottom:!0,className:classnames_default()("block-editor-color-gradient-control",className)},(0,react.createElement)("fieldset",{className:"block-editor-color-gradient-control__fieldset"},(0,react.createElement)(v_stack_component.Z,{spacing:1},showTitle&&(0,react.createElement)("legend",null,(0,react.createElement)("div",{className:"block-editor-color-gradient-control__color-indicator"},(0,react.createElement)(base_control.ZP.VisualLabel,null,label))),canChooseAColor&&canChooseAGradient&&(0,react.createElement)(tab_panel.Z,{className:"block-editor-color-gradient-control__tabs",tabs:TABS_SETTINGS,initialTabName:gradientValue?TAB_GRADIENT.value:!!canChooseAColor&&TAB_COLOR.value},(tab=>renderPanelType(tab.value))),!canChooseAGradient&&renderPanelType(TAB_COLOR.value),!canChooseAColor&&renderPanelType(TAB_GRADIENT.value))))}function ColorGradientControlSelect(props){const colorGradientSettings={};return colorGradientSettings.colors=use_setting_useSetting("color.palette"),colorGradientSettings.gradients=use_setting_useSetting("color.gradients"),colorGradientSettings.disableCustomColors=!use_setting_useSetting("color.custom"),colorGradientSettings.disableCustomGradients=!use_setting_useSetting("color.customGradient"),(0,react.createElement)(ColorGradientControlInner,(0,esm_extends.Z)({},colorGradientSettings,props))}var control=function ColorGradientControl(props){return colorsAndGradientKeys.every((key=>props.hasOwnProperty(key)))?(0,react.createElement)(ColorGradientControlInner,props):(0,react.createElement)(ColorGradientControlSelect,props)};const WithToolsPanelItem=_ref=>{let{setting:setting,children:children,panelId:panelId,...props}=_ref;return(0,react.createElement)(tools_panel_item_component.Z,(0,esm_extends.Z)({hasValue:()=>!!setting.colorValue||!!setting.gradientValue,label:setting.label,onDeselect:()=>{setting.colorValue?setting.onColorChange():setting.gradientValue&&setting.onGradientChange()},isShownByDefault:void 0===setting.isShownByDefault||setting.isShownByDefault},props,{className:"block-editor-tools-panel-color-gradient-settings__item",panelId:panelId,resetAllFilter:setting.resetAllFilter}),children)},LabeledColorIndicator=_ref2=>{let{colorValue:colorValue,label:label}=_ref2;return(0,react.createElement)(h_stack_component.Z,{justify:"flex-start"},(0,react.createElement)(color_indicator,{className:"block-editor-panel-color-gradient-settings__color-indicator",colorValue:colorValue}),(0,react.createElement)(flex_item_component.Z,{className:"block-editor-panel-color-gradient-settings__color-name",title:label},label))},renderToggle=settings=>_ref3=>{let{onToggle:onToggle,isOpen:isOpen}=_ref3;const{colorValue:colorValue,label:label}=settings,toggleProps={onClick:onToggle,className:classnames_default()("block-editor-panel-color-gradient-settings__dropdown",{"is-open":isOpen}),"aria-expanded":isOpen};return(0,react.createElement)(build_module_button.Z,toggleProps,(0,react.createElement)(LabeledColorIndicator,{colorValue:colorValue,label:label}))};function ColorGradientSettingsDropdown(_ref4){let popoverProps,{colors:colors,disableCustomColors:disableCustomColors,disableCustomGradients:disableCustomGradients,enableAlpha:enableAlpha,gradients:gradients,settings:settings,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,...props}=_ref4;return __experimentalIsRenderedInSidebar&&(popoverProps={placement:"left-start",offset:36,shift:!0}),(0,react.createElement)(react.Fragment,null,settings.map(((setting,index)=>{var _setting$gradientValu;const controlProps={clearable:!1,colorValue:setting.colorValue,colors:colors,disableCustomColors:disableCustomColors,disableCustomGradients:disableCustomGradients,enableAlpha:enableAlpha,gradientValue:setting.gradientValue,gradients:gradients,label:setting.label,onColorChange:setting.onColorChange,onGradientChange:setting.onGradientChange,showTitle:!1,__experimentalHasMultipleOrigins:__experimentalHasMultipleOrigins,__experimentalIsRenderedInSidebar:__experimentalIsRenderedInSidebar,...setting},toggleSettings={colorValue:null!==(_setting$gradientValu=setting.gradientValue)&&void 0!==_setting$gradientValu?_setting$gradientValu:setting.colorValue,label:setting.label};return setting&&(0,react.createElement)(WithToolsPanelItem,(0,esm_extends.Z)({key:index,setting:setting},props),(0,react.createElement)(dropdown.Z,{popoverProps:popoverProps,className:"block-editor-tools-panel-color-gradient-settings__dropdown",renderToggle:renderToggle(toggleSettings),renderContent:()=>(0,react.createElement)(dropdown_content_wrapper,{paddingSize:"none"},(0,react.createElement)("div",{className:"block-editor-panel-color-gradient-settings__dropdown-content"},(0,react.createElement)(control,controlProps)))}))})))}var notice=__webpack_require__("./packages/components/build-module/notice/index.js");(0,colord.l7)([names.Z,a11y.Z]);var contrast_checker=function ContrastChecker(_ref){let{backgroundColor:backgroundColor,fallbackBackgroundColor:fallbackBackgroundColor,fallbackTextColor:fallbackTextColor,fallbackLinkColor:fallbackLinkColor,fontSize:fontSize,isLargeText:isLargeText,textColor:textColor,linkColor:linkColor,enableAlphaChecker:enableAlphaChecker=!1}=_ref;const currentBackgroundColor=backgroundColor||fallbackBackgroundColor;if(!currentBackgroundColor)return null;const currentTextColor=textColor||fallbackTextColor,currentLinkColor=linkColor||fallbackLinkColor;if(!currentTextColor&&!currentLinkColor)return null;const textColors=[{color:currentTextColor,description:(0,i18n_build_module.__)("text color")},{color:currentLinkColor,description:(0,i18n_build_module.__)("link color")}],colordBackgroundColor=(0,colord.Vi)(currentBackgroundColor),backgroundColorHasTransparency=colordBackgroundColor.alpha()<1,backgroundColorBrightness=colordBackgroundColor.brightness(),isReadableOptions={level:"AA",size:isLargeText||!1!==isLargeText&&fontSize>=24?"large":"small"};let message="",speakMessage="";for(const item of textColors){if(!item.color)continue;const colordTextColor=(0,colord.Vi)(item.color),isColordTextReadable=colordTextColor.isReadable(colordBackgroundColor,isReadableOptions),textHasTransparency=colordTextColor.alpha()<1;if(!isColordTextReadable){if(backgroundColorHasTransparency||textHasTransparency)continue;message=backgroundColorBrightness<colordTextColor.brightness()?(0,i18n_build_module.gB)((0,i18n_build_module.__)("This color combination may be hard for people to read. Try using a darker background color and/or a brighter %s."),item.description):(0,i18n_build_module.gB)((0,i18n_build_module.__)("This color combination may be hard for people to read. Try using a brighter background color and/or a darker %s."),item.description),speakMessage=(0,i18n_build_module.__)("This color combination may be hard for people to read.");break}textHasTransparency&&enableAlphaChecker&&(message=(0,i18n_build_module.__)("Transparent text may be hard for people to read."),speakMessage=(0,i18n_build_module.__)("Transparent text may be hard for people to read."))}return message?((0,a11y_build_module.D)(speakMessage),(0,react.createElement)("div",{className:"block-editor-contrast-checker"},(0,react.createElement)(notice.Z,{spokenMessage:null,status:"warning",isDismissible:!1},message))):null};function getComputedStyle(node){return node.ownerDocument.defaultView.getComputedStyle(node)}function ColorPanel(_ref){let{enableAlpha:enableAlpha=!1,settings:settings,clientId:clientId,enableContrastChecking:enableContrastChecking=!0}=_ref;const[detectedBackgroundColor,setDetectedBackgroundColor]=(0,react.useState)(),[detectedColor,setDetectedColor]=(0,react.useState)(),[detectedLinkColor,setDetectedLinkColor]=(0,react.useState)(),ref=useBlockRef(clientId),definedColors=settings.filter((setting=>null==setting?void 0:setting.colorValue));(0,react.useEffect)((()=>{var _ref$current;if(!enableContrastChecking)return;if(!definedColors.length)return detectedBackgroundColor&&setDetectedBackgroundColor(),detectedColor&&setDetectedColor(),void(detectedLinkColor&&setDetectedColor());if(!ref.current)return;setDetectedColor(getComputedStyle(ref.current).color);const firstLinkElement=null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.querySelector("a");firstLinkElement&&firstLinkElement.innerText&&setDetectedLinkColor(getComputedStyle(firstLinkElement).color);let backgroundColorNode=ref.current,backgroundColor=getComputedStyle(backgroundColorNode).backgroundColor;for(;"rgba(0, 0, 0, 0)"===backgroundColor&&backgroundColorNode.parentNode&&backgroundColorNode.parentNode.nodeType===backgroundColorNode.parentNode.ELEMENT_NODE;)backgroundColorNode=backgroundColorNode.parentNode,backgroundColor=getComputedStyle(backgroundColorNode).backgroundColor;setDetectedBackgroundColor(backgroundColor)}));const colorGradientSettings=useMultipleOriginColorsAndGradients();return(0,react.createElement)(inspector_controls,{__experimentalGroup:"color"},(0,react.createElement)(ColorGradientSettingsDropdown,(0,esm_extends.Z)({enableAlpha:enableAlpha,panelId:clientId,settings:settings,__experimentalIsItemGroup:!1,__experimentalHasMultipleOrigins:!0,__experimentalIsRenderedInSidebar:!0},colorGradientSettings)),enableContrastChecking&&(0,react.createElement)(contrast_checker,{backgroundColor:detectedBackgroundColor,textColor:detectedColor,enableAlphaChecker:enableAlpha,linkColor:detectedLinkColor}))}const hasColorSupport=blockType=>{const colorSupport=(0,build_module.Dx)(blockType,"color");return colorSupport&&(!0===colorSupport.link||!0===colorSupport.gradient||!1!==colorSupport.background||!1!==colorSupport.text)},hasLinkColorSupport=blockType=>{if("web"!==platform.Z.OS)return!1;const colorSupport=(0,build_module.Dx)(blockType,"color");return null!==colorSupport&&"object"==typeof colorSupport&&!!colorSupport.link},hasGradientSupport=blockType=>{const colorSupport=(0,build_module.Dx)(blockType,"color");return null!==colorSupport&&"object"==typeof colorSupport&&!!colorSupport.gradients},hasBackgroundColorSupport=blockType=>{const colorSupport=(0,build_module.Dx)(blockType,"color");return colorSupport&&!1!==colorSupport.background},hasTextColorSupport=blockType=>{const colorSupport=(0,build_module.Dx)(blockType,"color");return colorSupport&&!1!==colorSupport.text},clearColorFromStyles=(path,style)=>cleanEmptyObject(immutableSet(style,path,void 0)),resetAllTextFilter=attributes=>({textColor:void 0,style:clearColorFromStyles(["color","text"],attributes.style)}),resetAllLinkFilter=attributes=>({style:clearColorFromStyles(["elements","link","color","text"],attributes.style)}),clearBackgroundAndGradient=attributes=>{var _attributes$style;return{backgroundColor:void 0,gradient:void 0,style:{...attributes.style,color:{...null===(_attributes$style=attributes.style)||void 0===_attributes$style?void 0:_attributes$style.color,background:void 0,gradient:void 0}}}};function color_addSaveProps(props,blockType,attributes){var _style$color,_style$color2,_style$color3,_style$color4,_style$elements,_style$elements$link;if(!hasColorSupport(blockType)||shouldSkipSerialization(blockType,"color"))return props;const hasGradient=hasGradientSupport(blockType),{backgroundColor:backgroundColor,textColor:textColor,gradient:gradient,style:style}=attributes,shouldSerialize=feature=>!shouldSkipSerialization(blockType,"color",feature),textClass=shouldSerialize("text")?getColorClassName("color",textColor):void 0,gradientClass=shouldSerialize("gradients")?__experimentalGetGradientClass(gradient):void 0,backgroundClass=shouldSerialize("background")?getColorClassName("background-color",backgroundColor):void 0,serializeHasBackground=shouldSerialize("background")||shouldSerialize("gradients"),hasBackground=backgroundColor||(null==style||null===(_style$color=style.color)||void 0===_style$color?void 0:_style$color.background)||hasGradient&&(gradient||(null==style||null===(_style$color2=style.color)||void 0===_style$color2?void 0:_style$color2.gradient)),newClassName=classnames_default()(props.className,textClass,gradientClass,{[backgroundClass]:!(hasGradient&&null!=style&&null!==(_style$color3=style.color)&&void 0!==_style$color3&&_style$color3.gradient||!backgroundClass),"has-text-color":shouldSerialize("text")&&(textColor||(null==style||null===(_style$color4=style.color)||void 0===_style$color4?void 0:_style$color4.text)),"has-background":serializeHasBackground&&hasBackground,"has-link-color":shouldSerialize("link")&&(null==style||null===(_style$elements=style.elements)||void 0===_style$elements||null===(_style$elements$link=_style$elements.link)||void 0===_style$elements$link?void 0:_style$elements$link.color)});return props.className=newClassName||void 0,props}const getLinkColorFromAttributeValue=(colors,value)=>{const attributeParsed=/var:preset\|color\|(.+)/.exec(value);return attributeParsed&&attributeParsed[1]?getColorObjectByAttributeValues(colors,attributeParsed[1]).color:value};function ColorEdit(props){var _style$color6,_style$color7,_style$color8,_style$elements2,_style$elements2$link,_style$elements2$link2;const{name:blockName,attributes:attributes}=props,userPalette=use_setting_useSetting("color.palette.custom"),themePalette=use_setting_useSetting("color.palette.theme"),defaultPalette=use_setting_useSetting("color.palette.default"),allSolids=(0,react.useMemo)((()=>[...userPalette||[],...themePalette||[],...defaultPalette||[]]),[userPalette,themePalette,defaultPalette]),userGradientPalette=use_setting_useSetting("color.gradients.custom"),themeGradientPalette=use_setting_useSetting("color.gradients.theme"),defaultGradientPalette=use_setting_useSetting("color.gradients.default"),allGradients=(0,react.useMemo)((()=>[...userGradientPalette||[],...themeGradientPalette||[],...defaultGradientPalette||[]]),[userGradientPalette,themeGradientPalette,defaultGradientPalette]),areCustomSolidsEnabled=use_setting_useSetting("color.custom"),areCustomGradientsEnabled=use_setting_useSetting("color.customGradient"),isBackgroundEnabled=use_setting_useSetting("color.background"),isLinkEnabled=use_setting_useSetting("color.link"),isTextEnabled=use_setting_useSetting("color.text"),solidsEnabled=areCustomSolidsEnabled||!themePalette||(null==themePalette?void 0:themePalette.length)>0,gradientsEnabled=areCustomGradientsEnabled||!themeGradientPalette||(null==themeGradientPalette?void 0:themeGradientPalette.length)>0,localAttributes=(0,react.useRef)(attributes);if((0,react.useEffect)((()=>{localAttributes.current=attributes}),[attributes]),!hasColorSupport(blockName))return null;const hasLinkColor=hasLinkColorSupport(blockName)&&isLinkEnabled&&solidsEnabled,hasTextColor=hasTextColorSupport(blockName)&&isTextEnabled&&solidsEnabled,hasBackgroundColor=hasBackgroundColorSupport(blockName)&&isBackgroundEnabled&&solidsEnabled,hasGradientColor=hasGradientSupport(blockName)&&gradientsEnabled;if(!(hasLinkColor||hasTextColor||hasBackgroundColor||hasGradientColor))return null;const{style:style,textColor:textColor,backgroundColor:backgroundColor,gradient:gradient}=attributes;let gradientValue;if(hasGradientColor&&gradient)gradientValue=getGradientValueBySlug(allGradients,gradient);else if(hasGradientColor){var _style$color5;gradientValue=null==style||null===(_style$color5=style.color)||void 0===_style$color5?void 0:_style$color5.gradient}const onChangeColor=name=>value=>{var _localAttributes$curr,_localAttributes$curr2;const colorObject=getColorObjectByColorValue(allSolids,value),attributeName=name+"Color",newStyle={...localAttributes.current.style,color:{...null===(_localAttributes$curr=localAttributes.current)||void 0===_localAttributes$curr||null===(_localAttributes$curr2=_localAttributes$curr.style)||void 0===_localAttributes$curr2?void 0:_localAttributes$curr2.color,[name]:null!=colorObject&&colorObject.slug?void 0:value}},newNamedColor=null!=colorObject&&colorObject.slug?colorObject.slug:void 0,newAttributes={style:cleanEmptyObject(newStyle),[attributeName]:newNamedColor};props.setAttributes(newAttributes),localAttributes.current={...localAttributes.current,...newAttributes}},defaultColorControls=(0,build_module.Dx)(props.name,["color","__experimentalDefaultControls"]),enableContrastChecking="web"===platform.Z.OS&&!gradient&&!(null!=style&&null!==(_style$color6=style.color)&&void 0!==_style$color6&&_style$color6.gradient)&&hasBackgroundColor&&(hasLinkColor||hasTextColor)&&!1!==(0,build_module.Dx)(props.name,["color","enableContrastChecker"]);return(0,react.createElement)(ColorPanel,{enableContrastChecking:enableContrastChecking,clientId:props.clientId,enableAlpha:!0,settings:[...hasTextColor?[{label:(0,i18n_build_module.__)("Text"),onColorChange:onChangeColor("text"),colorValue:getColorObjectByAttributeValues(allSolids,textColor,null==style||null===(_style$color7=style.color)||void 0===_style$color7?void 0:_style$color7.text).color,isShownByDefault:null==defaultColorControls?void 0:defaultColorControls.text,resetAllFilter:resetAllTextFilter}]:[],...hasBackgroundColor||hasGradientColor?[{label:(0,i18n_build_module.__)("Background"),onColorChange:hasBackgroundColor?onChangeColor("background"):void 0,colorValue:getColorObjectByAttributeValues(allSolids,backgroundColor,null==style||null===(_style$color8=style.color)||void 0===_style$color8?void 0:_style$color8.background).color,gradientValue:gradientValue,onGradientChange:hasGradientColor?value=>{const slug=getGradientSlugByValue(allGradients,value);let newAttributes;if(slug){var _localAttributes$curr3,_localAttributes$curr4,_localAttributes$curr5;const newStyle={...null===(_localAttributes$curr3=localAttributes.current)||void 0===_localAttributes$curr3?void 0:_localAttributes$curr3.style,color:{...null===(_localAttributes$curr4=localAttributes.current)||void 0===_localAttributes$curr4||null===(_localAttributes$curr5=_localAttributes$curr4.style)||void 0===_localAttributes$curr5?void 0:_localAttributes$curr5.color,gradient:void 0}};newAttributes={style:cleanEmptyObject(newStyle),gradient:slug}}else{var _localAttributes$curr6,_localAttributes$curr7,_localAttributes$curr8;const newStyle={...null===(_localAttributes$curr6=localAttributes.current)||void 0===_localAttributes$curr6?void 0:_localAttributes$curr6.style,color:{...null===(_localAttributes$curr7=localAttributes.current)||void 0===_localAttributes$curr7||null===(_localAttributes$curr8=_localAttributes$curr7.style)||void 0===_localAttributes$curr8?void 0:_localAttributes$curr8.color,gradient:value}};newAttributes={style:cleanEmptyObject(newStyle),gradient:void 0}}props.setAttributes(newAttributes),localAttributes.current={...localAttributes.current,...newAttributes}}:void 0,isShownByDefault:null==defaultColorControls?void 0:defaultColorControls.background,resetAllFilter:clearBackgroundAndGradient}]:[],...hasLinkColor?[{label:(0,i18n_build_module.__)("Link"),onColorChange:value=>{var _localAttributes$curr9;const colorObject=getColorObjectByColorValue(allSolids,value),newLinkColorValue=null!=colorObject&&colorObject.slug?`var:preset|color|${colorObject.slug}`:value,newStyle=cleanEmptyObject(immutableSet(null===(_localAttributes$curr9=localAttributes.current)||void 0===_localAttributes$curr9?void 0:_localAttributes$curr9.style,["elements","link","color","text"],newLinkColorValue));props.setAttributes({style:newStyle}),localAttributes.current={...localAttributes.current,style:newStyle}},colorValue:getLinkColorFromAttributeValue(allSolids,null==style||null===(_style$elements2=style.elements)||void 0===_style$elements2||null===(_style$elements2$link=_style$elements2.link)||void 0===_style$elements2$link||null===(_style$elements2$link2=_style$elements2$link.color)||void 0===_style$elements2$link2?void 0:_style$elements2$link2.text),isShownByDefault:null==defaultColorControls?void 0:defaultColorControls.link,resetAllFilter:resetAllLinkFilter}]:[]]})}const withColorPaletteStyles=(0,create_higher_order_component.o)((BlockListBlock=>props=>{var _props$wrapperProps;const{name:name,attributes:attributes}=props,{backgroundColor:backgroundColor,textColor:textColor}=attributes,userPalette=use_setting_useSetting("color.palette.custom")||[],themePalette=use_setting_useSetting("color.palette.theme")||[],defaultPalette=use_setting_useSetting("color.palette.default")||[],colors=(0,react.useMemo)((()=>[...userPalette||[],...themePalette||[],...defaultPalette||[]]),[userPalette,themePalette,defaultPalette]);if(!hasColorSupport(name)||shouldSkipSerialization(name,"color"))return(0,react.createElement)(BlockListBlock,props);const extraStyles={};var _getColorObjectByAttr,_getColorObjectByAttr2;textColor&&!shouldSkipSerialization(name,"color","text")&&(extraStyles.color=null===(_getColorObjectByAttr=getColorObjectByAttributeValues(colors,textColor))||void 0===_getColorObjectByAttr?void 0:_getColorObjectByAttr.color);backgroundColor&&!shouldSkipSerialization(name,"color","background")&&(extraStyles.backgroundColor=null===(_getColorObjectByAttr2=getColorObjectByAttributeValues(colors,backgroundColor))||void 0===_getColorObjectByAttr2?void 0:_getColorObjectByAttr2.color);let wrapperProps=props.wrapperProps;return wrapperProps={...props.wrapperProps,style:{...extraStyles,...null===(_props$wrapperProps=props.wrapperProps)||void 0===_props$wrapperProps?void 0:_props$wrapperProps.style}},(0,react.createElement)(BlockListBlock,(0,esm_extends.Z)({},props,{wrapperProps:wrapperProps}))})),MIGRATION_PATHS={linkColor:[["style","elements","link","color","text"]],textColor:[["textColor"],["style","color","text"]],backgroundColor:[["backgroundColor"],["style","color","background"]],gradient:[["gradient"],["style","color","gradient"]]};(0,hooks_build_module.KJ)("blocks.registerBlockType","core/color/addAttribute",(function color_addAttributes(settings){return hasColorSupport(settings)?(settings.attributes.backgroundColor||Object.assign(settings.attributes,{backgroundColor:{type:"string"}}),settings.attributes.textColor||Object.assign(settings.attributes,{textColor:{type:"string"}}),hasGradientSupport(settings)&&!settings.attributes.gradient&&Object.assign(settings.attributes,{gradient:{type:"string"}}),settings):settings})),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/color/addSaveProps",color_addSaveProps),(0,hooks_build_module.KJ)("blocks.registerBlockType","core/color/addEditProps",(function color_addEditProps(settings){if(!hasColorSupport(settings)||shouldSkipSerialization(settings,"color"))return settings;const existingGetEditWrapperProps=settings.getEditWrapperProps;return settings.getEditWrapperProps=attributes=>{let props={};return existingGetEditWrapperProps&&(props=existingGetEditWrapperProps(attributes)),color_addSaveProps(props,settings,attributes)},settings})),(0,hooks_build_module.KJ)("editor.BlockListBlock","core/color/with-color-palette-styles",withColorPaletteStyles),(0,hooks_build_module.KJ)("blocks.switchToBlockType.transformedBlock","core/color/addTransforms",(function color_addTransforms(result,source,index,results){const destinationBlockType=result.name;return transformStyles({linkColor:hasLinkColorSupport(destinationBlockType),textColor:hasTextColorSupport(destinationBlockType),backgroundColor:hasBackgroundColorSupport(destinationBlockType),gradient:hasGradientSupport(destinationBlockType)},MIGRATION_PATHS,result,source,index,results)}));const FONT_STYLES=[{name:(0,i18n_build_module._x)("Regular","font style"),value:"normal"},{name:(0,i18n_build_module._x)("Italic","font style"),value:"italic"}],FONT_WEIGHTS=[{name:(0,i18n_build_module._x)("Thin","font weight"),value:"100"},{name:(0,i18n_build_module._x)("Extra Light","font weight"),value:"200"},{name:(0,i18n_build_module._x)("Light","font weight"),value:"300"},{name:(0,i18n_build_module._x)("Regular","font weight"),value:"400"},{name:(0,i18n_build_module._x)("Medium","font weight"),value:"500"},{name:(0,i18n_build_module._x)("Semi Bold","font weight"),value:"600"},{name:(0,i18n_build_module._x)("Bold","font weight"),value:"700"},{name:(0,i18n_build_module._x)("Extra Bold","font weight"),value:"800"},{name:(0,i18n_build_module._x)("Black","font weight"),value:"900"}],getFontAppearanceLabel=(hasFontStyles,hasFontWeights)=>hasFontStyles?hasFontWeights?(0,i18n_build_module.__)("Appearance"):(0,i18n_build_module.__)("Font style"):(0,i18n_build_module.__)("Font weight");function FontAppearanceControl(props){const{onChange:onChange,hasFontStyles:hasFontStyles=!0,hasFontWeights:hasFontWeights=!0,value:{fontStyle:fontStyle,fontWeight:fontWeight},...otherProps}=props,hasStylesOrWeights=hasFontStyles||hasFontWeights,label=getFontAppearanceLabel(hasFontStyles,hasFontWeights),defaultOption={key:"default",name:(0,i18n_build_module.__)("Default"),style:{fontStyle:void 0,fontWeight:void 0}},selectOptions=(0,react.useMemo)((()=>hasFontStyles&&hasFontWeights?(()=>{const combinedOptions=[defaultOption];return FONT_STYLES.forEach((_ref=>{let{name:styleName,value:styleValue}=_ref;FONT_WEIGHTS.forEach((_ref2=>{let{name:weightName,value:weightValue}=_ref2;const optionName="normal"===styleValue?weightName:(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s %2$s"),weightName,styleName);combinedOptions.push({key:`${styleValue}-${weightValue}`,name:optionName,style:{fontStyle:styleValue,fontWeight:weightValue}})}))})),combinedOptions})():hasFontStyles?(()=>{const combinedOptions=[defaultOption];return FONT_STYLES.forEach((_ref3=>{let{name:name,value:value}=_ref3;combinedOptions.push({key:value,name:name,style:{fontStyle:value,fontWeight:void 0}})})),combinedOptions})():(()=>{const combinedOptions=[defaultOption];return FONT_WEIGHTS.forEach((_ref4=>{let{name:name,value:value}=_ref4;combinedOptions.push({key:value,name:name,style:{fontStyle:void 0,fontWeight:value}})})),combinedOptions})()),[props.options]),currentSelection=selectOptions.find((option=>option.style.fontStyle===fontStyle&&option.style.fontWeight===fontWeight))||selectOptions[0];return hasStylesOrWeights&&(0,react.createElement)(custom_select_control.Z,(0,esm_extends.Z)({},otherProps,{className:"components-font-appearance-control",label:label,describedBy:currentSelection?hasFontStyles?hasFontWeights?(0,i18n_build_module.gB)((0,i18n_build_module.__)("Currently selected font appearance: %s"),currentSelection.name):(0,i18n_build_module.gB)((0,i18n_build_module.__)("Currently selected font style: %s"),currentSelection.name):(0,i18n_build_module.gB)((0,i18n_build_module.__)("Currently selected font weight: %s"),currentSelection.name):(0,i18n_build_module.__)("No selected font appearance"),options:selectOptions,value:currentSelection,onChange:_ref5=>{let{selectedItem:selectedItem}=_ref5;return onChange(selectedItem.style)},__nextUnconstrainedWidth:!0}))}var line_height_control=_ref=>{let{value:lineHeight,onChange:onChange,__nextHasNoMarginBottom:__nextHasNoMarginBottom=!1,__unstableInputWidth:__unstableInputWidth="60px",...otherProps}=_ref;const isDefined=function isLineHeightDefined(lineHeight){return void 0!==lineHeight&&""!==lineHeight}(lineHeight),value=isDefined?lineHeight:"";__nextHasNoMarginBottom||(0,deprecated_build_module.Z)("Bottom margin styles for wp.blockEditor.LineHeightControl",{since:"6.0",version:"6.4",hint:"Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version"});const deprecatedStyles=__nextHasNoMarginBottom?void 0:{marginBottom:24};return(0,react.createElement)("div",{className:"block-editor-line-height-control",style:deprecatedStyles},(0,react.createElement)(number_control.Z,(0,esm_extends.Z)({},otherProps,{__unstableInputWidth:__unstableInputWidth,__unstableStateReducer:(state,action)=>{var _action$payload$event;const wasTypedOrPasted=["insertText","insertFromPaste"].includes(null===(_action$payload$event=action.payload.event.nativeEvent)||void 0===_action$payload$event?void 0:_action$payload$event.inputType),value=((nextValue,wasTypedOrPasted)=>{if(isDefined)return nextValue;switch(`${nextValue}`){case"0.1":return 1.6;case"0":return wasTypedOrPasted?nextValue:1.4;case"":return 1.5;default:return nextValue}})(state.value,wasTypedOrPasted);return{...state,value:value}},onChange:onChange,label:(0,i18n_build_module.__)("Line height"),placeholder:1.5,step:.1,value:value,min:0,spinControls:"custom"})))};function LineHeightEdit(props){var _style$typography;const{attributes:{style:style},setAttributes:setAttributes}=props;return(0,react.createElement)(line_height_control,{__unstableInputWidth:"100%",__nextHasNoMarginBottom:!0,value:null==style||null===(_style$typography=style.typography)||void 0===_style$typography?void 0:_style$typography.lineHeight,onChange:newLineHeightValue=>{const newStyle={...style,typography:{...null==style?void 0:style.typography,lineHeight:newLineHeightValue}};setAttributes({style:cleanEmptyObject(newStyle)})},size:"__unstable-large"})}function useIsLineHeightDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!use_setting_useSetting("typography.lineHeight");return!(0,build_module.zb)(blockName,"typography.lineHeight")||isDisabled}function FontAppearanceEdit(props){var _style$typography,_style$typography2;const{attributes:{style:style},setAttributes:setAttributes}=props,hasFontStyles=!useIsFontStyleDisabled(props),hasFontWeights=!useIsFontWeightDisabled(props),fontStyle=null==style||null===(_style$typography=style.typography)||void 0===_style$typography?void 0:_style$typography.fontStyle,fontWeight=null==style||null===(_style$typography2=style.typography)||void 0===_style$typography2?void 0:_style$typography2.fontWeight;return(0,react.createElement)(FontAppearanceControl,{onChange:newStyles=>{setAttributes({style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,fontStyle:newStyles.fontStyle,fontWeight:newStyles.fontWeight}})})},hasFontStyles:hasFontStyles,hasFontWeights:hasFontWeights,value:{fontStyle:fontStyle,fontWeight:fontWeight},size:"__unstable-large"})}function useIsFontStyleDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const styleSupport=(0,build_module.zb)(blockName,"typography.__experimentalFontStyle"),hasFontStyles=use_setting_useSetting("typography.fontStyle");return!styleSupport||!hasFontStyles}function useIsFontWeightDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const weightSupport=(0,build_module.zb)(blockName,"typography.__experimentalFontWeight"),hasFontWeights=use_setting_useSetting("typography.fontWeight");return!weightSupport||!hasFontWeights}function useIsFontAppearanceDisabled(props){const stylesDisabled=useIsFontStyleDisabled(props),weightsDisabled=useIsFontWeightDisabled(props);return stylesDisabled&&weightsDisabled}function FontFamilyControl(_ref){let{value:value="",onChange:onChange,fontFamilies:fontFamilies,...props}=_ref;const blockLevelFontFamilies=use_setting_useSetting("typography.fontFamilies");if(fontFamilies||(fontFamilies=blockLevelFontFamilies),(0,lodash.isEmpty)(fontFamilies))return null;const options=[{value:"",label:(0,i18n_build_module.__)("Default")},...fontFamilies.map((_ref2=>{let{fontFamily:fontFamily,name:name}=_ref2;return{value:fontFamily,label:name||fontFamily}}))];return(0,react.createElement)(select_control.Z,(0,esm_extends.Z)({label:(0,i18n_build_module.__)("Font"),options:options,value:value,onChange:onChange,labelPosition:"top"},props))}const FONT_FAMILY_SUPPORT_KEY="typography.__experimentalFontFamily";function font_family_addSaveProps(props,blockType,attributes){if(!(0,build_module.zb)(blockType,FONT_FAMILY_SUPPORT_KEY))return props;if(shouldSkipSerialization(blockType,TYPOGRAPHY_SUPPORT_KEY,"fontFamily"))return props;if(null==attributes||!attributes.fontFamily)return props;const classes=new token_list_build_module.Z(props.className);classes.add(`has-${(0,lodash.kebabCase)(null==attributes?void 0:attributes.fontFamily)}-font-family`);const newClassName=classes.value;return props.className=newClassName||void 0,props}function FontFamilyEdit(_ref){var _fontFamilies$find;let{setAttributes:setAttributes,attributes:{fontFamily:fontFamily}}=_ref;const fontFamilies=use_setting_useSetting("typography.fontFamilies"),value=null==fontFamilies||null===(_fontFamilies$find=fontFamilies.find((_ref2=>{let{slug:slug}=_ref2;return fontFamily===slug})))||void 0===_fontFamilies$find?void 0:_fontFamilies$find.fontFamily;return(0,react.createElement)(FontFamilyControl,{className:"block-editor-hooks-font-family-control",fontFamilies:fontFamilies,value:value,onChange:function onChange(newValue){const predefinedFontFamily=null==fontFamilies?void 0:fontFamilies.find((_ref3=>{let{fontFamily:f}=_ref3;return f===newValue}));setAttributes({fontFamily:null==predefinedFontFamily?void 0:predefinedFontFamily.slug})},size:"__unstable-large",__nextHasNoMarginBottom:!0})}function useIsFontFamilyDisabled(_ref4){let{name:name}=_ref4;const fontFamilies=use_setting_useSetting("typography.fontFamilies");return!fontFamilies||0===fontFamilies.length||!(0,build_module.zb)(name,FONT_FAMILY_SUPPORT_KEY)}(0,hooks_build_module.KJ)("blocks.registerBlockType","core/fontFamily/addAttribute",(function font_family_addAttributes(settings){return(0,build_module.zb)(settings,FONT_FAMILY_SUPPORT_KEY)?(settings.attributes.fontFamily||Object.assign(settings.attributes,{fontFamily:{type:"string"}}),settings):settings})),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/fontFamily/addSaveProps",font_family_addSaveProps),(0,hooks_build_module.KJ)("blocks.registerBlockType","core/fontFamily/addEditProps",(function font_family_addEditProps(settings){if(!(0,build_module.zb)(settings,FONT_FAMILY_SUPPORT_KEY))return settings;const existingGetEditWrapperProps=settings.getEditWrapperProps;return settings.getEditWrapperProps=attributes=>{let props={};return existingGetEditWrapperProps&&(props=existingGetEditWrapperProps(attributes)),font_family_addSaveProps(props,settings,attributes)},settings}));const getFontSize=(fontSizes,fontSizeAttribute,customFontSizeAttribute)=>{if(fontSizeAttribute){const fontSizeObject=null==fontSizes?void 0:fontSizes.find((_ref=>{let{slug:slug}=_ref;return slug===fontSizeAttribute}));if(fontSizeObject)return fontSizeObject}return{size:customFontSizeAttribute}};function getFontSizeClass(fontSizeSlug){if(fontSizeSlug)return`has-${(0,lodash.kebabCase)(fontSizeSlug)}-font-size`}function getCommonSizeUnit(fontSizes){const[firstFontSize,...otherFontSizes]=fontSizes;if(!firstFontSize)return null;const[,firstUnit]=(0,utils.YX)(firstFontSize.size);return otherFontSizes.every((fontSize=>{const[,unit]=(0,utils.YX)(fontSize.size);return unit===firstUnit}))?firstUnit:null}const Container=(0,emotion_styled_base_browser_esm.Z)("fieldset",{target:"e8tqeku4"})({name:"1t1ytme",styles:"border:0;margin:0;padding:0"}),HeaderLabel=(0,emotion_styled_base_browser_esm.Z)(base_control.ZP.VisualLabel,{target:"e8tqeku3"})("display:flex;gap:",(0,space.D)(1),";justify-content:flex-start;margin-bottom:0;"),HeaderHint=(0,emotion_styled_base_browser_esm.Z)("span",{target:"e8tqeku2"})("color:",colors_values.D.gray[700],";"),Controls=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e8tqeku1"})((props=>!props.__nextHasNoMarginBottom&&`margin-bottom: ${(0,space.D)(6)};`),";"),ResetButton=(0,emotion_styled_base_browser_esm.Z)(build_module_button.Z,{target:"e8tqeku0"})("&&&{height:",(props=>"__unstable-large"===props.size?"40px":"30px"),";}"),DEFAULT_OPTION={key:"default",name:(0,i18n_build_module.__)("Default"),value:void 0},CUSTOM_OPTION={key:"custom",name:(0,i18n_build_module.__)("Custom")};var font_size_picker_select=props=>{var _options$find;const{fontSizes:fontSizes,value:value,disableCustomFontSizes:disableCustomFontSizes,size:size,onChange:onChange,onSelectCustom:onSelectCustom}=props,areAllSizesSameUnit=!!getCommonSizeUnit(fontSizes),options=[DEFAULT_OPTION,...fontSizes.map((fontSize=>{let hint;if(areAllSizesSameUnit){const[quantity]=(0,utils.YX)(fontSize.size);void 0!==quantity&&(hint=String(quantity))}else(function isSimpleCssValue(value){return/^[\d\.]+(px|em|rem|vw|vh|%)?$/i.test(String(value))})(fontSize.size)&&(hint=String(fontSize.size));return{key:fontSize.slug,name:fontSize.name||fontSize.slug,value:fontSize.size,__experimentalHint:hint}})),...disableCustomFontSizes?[]:[CUSTOM_OPTION]],selectedOption=value?null!==(_options$find=options.find((option=>option.value===value)))&&void 0!==_options$find?_options$find:CUSTOM_OPTION:DEFAULT_OPTION;return(0,react.createElement)(custom_select_control.Z,{__nextUnconstrainedWidth:!0,className:"components-font-size-picker__select",label:(0,i18n_build_module.__)("Font size"),hideLabelFromVision:!0,describedBy:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Currently selected font size: %s"),selectedOption.name),options:options,value:selectedOption,__experimentalShowSelectedHint:!0,onChange:_ref=>{let{selectedItem:selectedItem}=_ref;selectedItem===CUSTOM_OPTION?onSelectCustom():onChange(selectedItem.value)},size:size})};const T_SHIRT_ABBREVIATIONS=[(0,i18n_build_module.__)("S"),(0,i18n_build_module.__)("M"),(0,i18n_build_module.__)("L"),(0,i18n_build_module.__)("XL"),(0,i18n_build_module.__)("XXL")],T_SHIRT_NAMES=[(0,i18n_build_module.__)("Small"),(0,i18n_build_module.__)("Medium"),(0,i18n_build_module.__)("Large"),(0,i18n_build_module.__)("Extra Large"),(0,i18n_build_module.__)("Extra Extra Large")];var font_size_picker_toggle_group=props=>{const{fontSizes:fontSizes,value:value,__nextHasNoMarginBottom:__nextHasNoMarginBottom,size:size,onChange:onChange}=props;return(0,react.createElement)(toggle_group_control_component.Z,{__nextHasNoMarginBottom:__nextHasNoMarginBottom,label:(0,i18n_build_module.__)("Font size"),hideLabelFromVision:!0,value:value,onChange:onChange,isBlock:!0,size:size},fontSizes.map(((fontSize,index)=>(0,react.createElement)(toggle_group_control_option_component.Z,{key:fontSize.slug,value:fontSize.size,label:T_SHIRT_ABBREVIATIONS[index],"aria-label":fontSize.name||T_SHIRT_NAMES[index],showTooltip:!0}))))};var font_size_picker=(0,react.forwardRef)(((props,ref)=>{var _fontSizes$;const{__nextHasNoMarginBottom:__nextHasNoMarginBottom=!1,fallbackFontSize:fallbackFontSize,fontSizes:fontSizes=[],disableCustomFontSizes:disableCustomFontSizes=!1,onChange:onChange,size:size="default",value:value,withSlider:withSlider=!1,withReset:withReset=!0}=props;__nextHasNoMarginBottom||(0,deprecated_build_module.Z)("Bottom margin styles for wp.components.FontSizePicker",{since:"6.1",version:"6.4",hint:"Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version."});const units=(0,utils.nj)({availableUnits:["px","em","rem"]}),shouldUseSelectControl=fontSizes.length>5,selectedFontSize=fontSizes.find((fontSize=>fontSize.size===value)),isCustomValue=!!value&&!selectedFontSize,[showCustomValueControl,setShowCustomValueControl]=(0,react.useState)(!disableCustomFontSizes&&isCustomValue),headerHint=(0,react.useMemo)((()=>{if(showCustomValueControl)return(0,i18n_build_module.__)("Custom");if(!shouldUseSelectControl)return selectedFontSize?selectedFontSize.name||T_SHIRT_NAMES[fontSizes.indexOf(selectedFontSize)]:"";const commonUnit=getCommonSizeUnit(fontSizes);return commonUnit?`(${commonUnit})`:""}),[showCustomValueControl,shouldUseSelectControl,selectedFontSize,fontSizes]);if(0===fontSizes.length&&disableCustomFontSizes)return null;const hasUnits="string"==typeof value||"string"==typeof(null===(_fontSizes$=fontSizes[0])||void 0===_fontSizes$?void 0:_fontSizes$.size),[valueQuantity,valueUnit]=(0,utils.YX)(value,units),isValueUnitRelative=!!valueUnit&&["em","rem"].includes(valueUnit);return(0,react.createElement)(Container,{ref:ref,className:"components-font-size-picker"},(0,react.createElement)(visually_hidden_component.Z,{as:"legend"},(0,i18n_build_module.__)("Font size")),(0,react.createElement)(spacer_component.Z,null,(0,react.createElement)(h_stack_component.Z,{className:"components-font-size-picker__header"},(0,react.createElement)(HeaderLabel,{"aria-label":`${(0,i18n_build_module.__)("Size")} ${headerHint||""}`},(0,i18n_build_module.__)("Size"),headerHint&&(0,react.createElement)(HeaderHint,{className:"components-font-size-picker__header__hint"},headerHint)),!disableCustomFontSizes&&(0,react.createElement)(build_module_button.Z,{label:showCustomValueControl?(0,i18n_build_module.__)("Use size preset"):(0,i18n_build_module.__)("Set custom size"),icon:library_settings.Z,onClick:()=>{setShowCustomValueControl(!showCustomValueControl)},isPressed:showCustomValueControl,isSmall:!0}))),(0,react.createElement)(Controls,{className:"components-font-size-picker__controls",__nextHasNoMarginBottom:__nextHasNoMarginBottom},!!fontSizes.length&&shouldUseSelectControl&&!showCustomValueControl&&(0,react.createElement)(font_size_picker_select,{fontSizes:fontSizes,value:value,disableCustomFontSizes:disableCustomFontSizes,size:size,onChange:newValue=>{void 0===newValue?null==onChange||onChange(void 0):null==onChange||onChange(hasUnits?newValue:Number(newValue),fontSizes.find((fontSize=>fontSize.size===newValue)))},onSelectCustom:()=>setShowCustomValueControl(!0)}),!shouldUseSelectControl&&!showCustomValueControl&&(0,react.createElement)(font_size_picker_toggle_group,{fontSizes:fontSizes,value:value,__nextHasNoMarginBottom:__nextHasNoMarginBottom,size:size,onChange:newValue=>{void 0===newValue?null==onChange||onChange(void 0):null==onChange||onChange(hasUnits?newValue:Number(newValue),fontSizes.find((fontSize=>fontSize.size===newValue)))}}),!disableCustomFontSizes&&showCustomValueControl&&(0,react.createElement)(component.Z,{className:"components-font-size-picker__custom-size-control"},(0,react.createElement)(flex_item_component.Z,{isBlock:!0},(0,react.createElement)(unit_control.ZP,{label:(0,i18n_build_module.__)("Custom"),labelPosition:"top",hideLabelFromVision:!0,value:value,onChange:newValue=>{void 0===newValue?null==onChange||onChange(void 0):null==onChange||onChange(hasUnits?newValue:parseInt(newValue,10))},size:size,units:hasUnits?units:[],min:0})),withSlider&&(0,react.createElement)(flex_item_component.Z,{isBlock:!0},(0,react.createElement)(spacer_component.Z,{marginX:2,marginBottom:0},(0,react.createElement)(range_control.Z,{__nextHasNoMarginBottom:__nextHasNoMarginBottom,className:"components-font-size-picker__custom-input",label:(0,i18n_build_module.__)("Custom Size"),hideLabelFromVision:!0,value:valueQuantity,initialPosition:fallbackFontSize,withInputField:!1,onChange:newValue=>{void 0===newValue?null==onChange||onChange(void 0):hasUnits?null==onChange||onChange(newValue+(null!=valueUnit?valueUnit:"px")):null==onChange||onChange(newValue)},min:0,max:isValueUnitRelative?10:100,step:isValueUnitRelative?.1:1}))),withReset&&(0,react.createElement)(flex_item_component.Z,null,(0,react.createElement)(ResetButton,{disabled:void 0===value,onClick:()=>{null==onChange||onChange(void 0)},isSmall:!0,variant:"secondary",size:size},(0,i18n_build_module.__)("Reset"))))))}));var font_sizes_font_size_picker=function font_size_picker_FontSizePicker(props){const fontSizes=use_setting_useSetting("typography.fontSizes"),disableCustomFontSizes=!use_setting_useSetting("typography.customFontSize");return(0,react.createElement)(font_size_picker,(0,esm_extends.Z)({},props,{fontSizes:fontSizes,disableCustomFontSizes:disableCustomFontSizes}))};const DEFAULT_MAXIMUM_VIEWPORT_WIDTH="1600px",DEFAULT_MINIMUM_VIEWPORT_WIDTH="768px",DEFAULT_SCALE_FACTOR=1,DEFAULT_MINIMUM_FONT_SIZE_FACTOR=.75;function getComputedFluidTypographyValue(_ref){let{minimumFontSize:minimumFontSize,maximumFontSize:maximumFontSize,fontSize:fontSize,minimumViewPortWidth:minimumViewPortWidth=DEFAULT_MINIMUM_VIEWPORT_WIDTH,maximumViewPortWidth:maximumViewPortWidth=DEFAULT_MAXIMUM_VIEWPORT_WIDTH,scaleFactor:scaleFactor=DEFAULT_SCALE_FACTOR,minimumFontSizeFactor:minimumFontSizeFactor=DEFAULT_MINIMUM_FONT_SIZE_FACTOR,minimumFontSizeLimit:minimumFontSizeLimit}=_ref;if(minimumFontSizeLimit=getTypographyValueAndUnit(minimumFontSizeLimit)?minimumFontSizeLimit:"14px",fontSize){const fontSizeParsed=getTypographyValueAndUnit(fontSize);if(null==fontSizeParsed||!fontSizeParsed.unit)return null;const minimumFontSizeLimitParsed=getTypographyValueAndUnit(minimumFontSizeLimit,{coerceTo:fontSizeParsed.unit});if(null!=minimumFontSizeLimitParsed&&minimumFontSizeLimitParsed.value&&!minimumFontSize&&!maximumFontSize&&(null==fontSizeParsed?void 0:fontSizeParsed.value)<=(null==minimumFontSizeLimitParsed?void 0:minimumFontSizeLimitParsed.value))return null;if(maximumFontSize||(maximumFontSize=`${fontSizeParsed.value}${fontSizeParsed.unit}`),!minimumFontSize){const calculatedMinimumFontSize=roundToPrecision(fontSizeParsed.value*minimumFontSizeFactor,3);minimumFontSize=null!=minimumFontSizeLimitParsed&&minimumFontSizeLimitParsed.value&&calculatedMinimumFontSize<(null==minimumFontSizeLimitParsed?void 0:minimumFontSizeLimitParsed.value)?`${minimumFontSizeLimitParsed.value}${minimumFontSizeLimitParsed.unit}`:`${calculatedMinimumFontSize}${fontSizeParsed.unit}`}}const minimumFontSizeParsed=getTypographyValueAndUnit(minimumFontSize),fontSizeUnit=(null==minimumFontSizeParsed?void 0:minimumFontSizeParsed.unit)||"rem",maximumFontSizeParsed=getTypographyValueAndUnit(maximumFontSize,{coerceTo:fontSizeUnit});if(!minimumFontSizeParsed||!maximumFontSizeParsed)return null;const minimumFontSizeRem=getTypographyValueAndUnit(minimumFontSize,{coerceTo:"rem"}),maximumViewPortWidthParsed=getTypographyValueAndUnit(maximumViewPortWidth,{coerceTo:fontSizeUnit}),minumumViewPortWidthParsed=getTypographyValueAndUnit(minimumViewPortWidth,{coerceTo:fontSizeUnit});if(!maximumViewPortWidthParsed||!minumumViewPortWidthParsed||!minimumFontSizeRem)return null;const minViewPortWidthOffsetValue=roundToPrecision(minumumViewPortWidthParsed.value/100,3),viewPortWidthOffset=roundToPrecision(minViewPortWidthOffsetValue,3)+fontSizeUnit,linearFactorScaled=roundToPrecision(((maximumFontSizeParsed.value-minimumFontSizeParsed.value)/(maximumViewPortWidthParsed.value-minumumViewPortWidthParsed.value)*100||1)*scaleFactor,3);return`clamp(${minimumFontSize}, ${`${minimumFontSizeRem.value}${minimumFontSizeRem.unit} + ((1vw - ${viewPortWidthOffset}) * ${linearFactorScaled})`}, ${maximumFontSize})`}function getTypographyValueAndUnit(rawValue){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof rawValue&&"number"!=typeof rawValue)return null;isFinite(rawValue)&&(rawValue=`${rawValue}px`);const{coerceTo:coerceTo,rootSizeValue:rootSizeValue,acceptableUnits:acceptableUnits}={coerceTo:"",rootSizeValue:16,acceptableUnits:["rem","px","em"],...options},acceptableUnitsGroup=null==acceptableUnits?void 0:acceptableUnits.join("|"),regexUnits=new RegExp(`^(\\d*\\.?\\d+)(${acceptableUnitsGroup}){1,1}$`),matches=rawValue.match(regexUnits);if(!matches||matches.length<3)return null;let[,value,unit]=matches,returnValue=parseFloat(value);return"px"!==coerceTo||"em"!==unit&&"rem"!==unit||(returnValue*=rootSizeValue,unit=coerceTo),"px"!==unit||"em"!==coerceTo&&"rem"!==coerceTo||(returnValue/=rootSizeValue,unit=coerceTo),"em"!==coerceTo&&"rem"!==coerceTo||"em"!==unit&&"rem"!==unit||(unit=coerceTo),{value:roundToPrecision(returnValue,3),unit:unit}}function roundToPrecision(value){let digits=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const base=Math.pow(10,digits);return Number.isFinite(value)?parseFloat(Math.round(value*base)/base):void 0}function font_size_addSaveProps(props,blockType,attributes){if(!(0,build_module.zb)(blockType,"typography.fontSize"))return props;if(shouldSkipSerialization(blockType,TYPOGRAPHY_SUPPORT_KEY,"fontSize"))return props;const classes=new token_list_build_module.Z(props.className);classes.add(getFontSizeClass(attributes.fontSize));const newClassName=classes.value;return props.className=newClassName||void 0,props}function FontSizeEdit(props){var _style$typography,_style$typography2;const{attributes:{fontSize:fontSize,style:style},setAttributes:setAttributes}=props,fontSizes=use_setting_useSetting("typography.fontSizes"),fontSizeObject=getFontSize(fontSizes,fontSize,null==style||null===(_style$typography=style.typography)||void 0===_style$typography?void 0:_style$typography.fontSize),fontSizeValue=(null==fontSizeObject?void 0:fontSizeObject.size)||(null==style||null===(_style$typography2=style.typography)||void 0===_style$typography2?void 0:_style$typography2.fontSize)||fontSize;return(0,react.createElement)(font_sizes_font_size_picker,{onChange:value=>{const fontSizeSlug=function getFontSizeObjectByValue(fontSizes,value){return(null==fontSizes?void 0:fontSizes.find((_ref2=>{let{size:size}=_ref2;return size===value})))||{size:value}}(fontSizes,value).slug;setAttributes({style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,fontSize:fontSizeSlug?void 0:value}}),fontSize:fontSizeSlug})},value:fontSizeValue,withReset:!1,withSlider:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})}function useIsFontSizeDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const fontSizes=use_setting_useSetting("typography.fontSizes"),hasFontSizes=!(null==fontSizes||!fontSizes.length);return!(0,build_module.zb)(blockName,"typography.fontSize")||!hasFontSizes}const withFontSizeInlineStyles=(0,create_higher_order_component.o)((BlockListBlock=>props=>{var _style$typography4,_style$typography5;const fontSizes=use_setting_useSetting("typography.fontSizes"),{name:blockName,attributes:{fontSize:fontSize,style:style},wrapperProps:wrapperProps}=props;if(!(0,build_module.zb)(blockName,"typography.fontSize")||shouldSkipSerialization(blockName,TYPOGRAPHY_SUPPORT_KEY,"fontSize")||!fontSize||null!=style&&null!==(_style$typography4=style.typography)&&void 0!==_style$typography4&&_style$typography4.fontSize)return(0,react.createElement)(BlockListBlock,props);const fontSizeValue=getFontSize(fontSizes,fontSize,null==style||null===(_style$typography5=style.typography)||void 0===_style$typography5?void 0:_style$typography5.fontSize).size,newProps={...props,wrapperProps:{...wrapperProps,style:{fontSize:fontSizeValue,...null==wrapperProps?void 0:wrapperProps.style}}};return(0,react.createElement)(BlockListBlock,newProps)}),"withFontSizeInlineStyles"),font_size_MIGRATION_PATHS={fontSize:[["fontSize"],["style","typography","fontSize"]]};(0,hooks_build_module.KJ)("blocks.registerBlockType","core/font/addAttribute",(function font_size_addAttributes(settings){return(0,build_module.zb)(settings,"typography.fontSize")?(settings.attributes.fontSize||Object.assign(settings.attributes,{fontSize:{type:"string"}}),settings):settings})),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/font/addSaveProps",font_size_addSaveProps),(0,hooks_build_module.KJ)("blocks.registerBlockType","core/font/addEditProps",(function font_size_addEditProps(settings){if(!(0,build_module.zb)(settings,"typography.fontSize"))return settings;const existingGetEditWrapperProps=settings.getEditWrapperProps;return settings.getEditWrapperProps=attributes=>{let props={};return existingGetEditWrapperProps&&(props=existingGetEditWrapperProps(attributes)),font_size_addSaveProps(props,settings,attributes)},settings})),(0,hooks_build_module.KJ)("editor.BlockListBlock","core/font-size/with-font-size-inline-styles",withFontSizeInlineStyles),(0,hooks_build_module.KJ)("blocks.switchToBlockType.transformedBlock","core/font-size/addTransforms",(function font_size_addTransforms(result,source,index,results){const destinationBlockType=result.name;return transformStyles({fontSize:(0,build_module.zb)(destinationBlockType,"typography.fontSize")},font_size_MIGRATION_PATHS,result,source,index,results)})),(0,hooks_build_module.KJ)("blocks.registerBlockType","core/font-size/addEditPropsForFluidCustomFontSizes",(function addEditPropsForFluidCustomFontSizes(blockType){if(!(0,build_module.zb)(blockType,"typography.fontSize")||shouldSkipSerialization(blockType,TYPOGRAPHY_SUPPORT_KEY,"fontSize"))return blockType;const existingGetEditWrapperProps=blockType.getEditWrapperProps;return blockType.getEditWrapperProps=attributes=>{var _wrapperProps$style,_select$getSettings$_,_select$getSettings$_2;const wrapperProps=existingGetEditWrapperProps?existingGetEditWrapperProps(attributes):{},fontSize=null==wrapperProps||null===(_wrapperProps$style=wrapperProps.style)||void 0===_wrapperProps$style?void 0:_wrapperProps$style.fontSize,fluidTypographyConfig=null===(_select$getSettings$_=(0,data_build_module.Ys)(store).getSettings().__experimentalFeatures)||void 0===_select$getSettings$_||null===(_select$getSettings$_2=_select$getSettings$_.typography)||void 0===_select$getSettings$_2?void 0:_select$getSettings$_2.fluid,fluidTypographySettings="object"==typeof fluidTypographyConfig?fluidTypographyConfig:{},newFontSize=fontSize&&fluidTypographyConfig?getComputedFluidTypographyValue({fontSize:fontSize,minimumFontSizeLimit:null==fluidTypographySettings?void 0:fluidTypographySettings.minFontSize}):null;return null===newFontSize?wrapperProps:{...wrapperProps,style:{...null==wrapperProps?void 0:wrapperProps.style,fontSize:newFontSize}}},blockType}),11);var library_reset=__webpack_require__("./packages/icons/build-module/library/reset.js"),format_underline=__webpack_require__("./packages/icons/build-module/library/format-underline.js"),format_strikethrough=__webpack_require__("./packages/icons/build-module/library/format-strikethrough.js");const TEXT_DECORATIONS=[{name:(0,i18n_build_module.__)("None"),value:"none",icon:library_reset.Z},{name:(0,i18n_build_module.__)("Underline"),value:"underline",icon:format_underline.Z},{name:(0,i18n_build_module.__)("Strikethrough"),value:"line-through",icon:format_strikethrough.Z}];function TextDecorationControl(_ref){let{value:value,onChange:onChange,className:className}=_ref;return(0,react.createElement)("fieldset",{className:classnames_default()("block-editor-text-decoration-control",className)},(0,react.createElement)(base_control.ZP.VisualLabel,{as:"legend"},(0,i18n_build_module.__)("Decoration")),(0,react.createElement)("div",{className:"block-editor-text-decoration-control__buttons"},TEXT_DECORATIONS.map((textDecoration=>(0,react.createElement)(build_module_button.Z,{key:textDecoration.value,icon:textDecoration.icon,label:textDecoration.name,isPressed:textDecoration.value===value,onClick:()=>{onChange(textDecoration.value===value?void 0:textDecoration.value)}})))))}function TextDecorationEdit(props){var _style$typography;const{attributes:{style:style},setAttributes:setAttributes}=props;return(0,react.createElement)(TextDecorationControl,{value:null==style||null===(_style$typography=style.typography)||void 0===_style$typography?void 0:_style$typography.textDecoration,onChange:function onChange(newDecoration){setAttributes({style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,textDecoration:newDecoration}})})},size:"__unstable-large"})}function useIsTextDecorationDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const notSupported=!(0,build_module.zb)(blockName,"typography.__experimentalTextDecoration"),hasTextDecoration=use_setting_useSetting("typography.textDecoration");return notSupported||!hasTextDecoration}var format_uppercase=__webpack_require__("./packages/icons/build-module/library/format-uppercase.js"),format_lowercase=__webpack_require__("./packages/icons/build-module/library/format-lowercase.js"),format_capitalize=__webpack_require__("./packages/icons/build-module/library/format-capitalize.js");const TEXT_TRANSFORMS=[{name:(0,i18n_build_module.__)("None"),value:"none",icon:library_reset.Z},{name:(0,i18n_build_module.__)("Uppercase"),value:"uppercase",icon:format_uppercase.Z},{name:(0,i18n_build_module.__)("Lowercase"),value:"lowercase",icon:format_lowercase.Z},{name:(0,i18n_build_module.__)("Capitalize"),value:"capitalize",icon:format_capitalize.Z}];function TextTransformControl(_ref){let{className:className,value:value,onChange:onChange}=_ref;return(0,react.createElement)("fieldset",{className:classnames_default()("block-editor-text-transform-control",className)},(0,react.createElement)(base_control.ZP.VisualLabel,{as:"legend"},(0,i18n_build_module.__)("Letter case")),(0,react.createElement)("div",{className:"block-editor-text-transform-control__buttons"},TEXT_TRANSFORMS.map((textTransform=>(0,react.createElement)(build_module_button.Z,{key:textTransform.value,icon:textTransform.icon,label:textTransform.name,isPressed:textTransform.value===value,onClick:()=>{onChange(textTransform.value===value?void 0:textTransform.value)}})))))}function TextTransformEdit(props){var _style$typography;const{attributes:{style:style},setAttributes:setAttributes}=props;return(0,react.createElement)(TextTransformControl,{value:null==style||null===(_style$typography=style.typography)||void 0===_style$typography?void 0:_style$typography.textTransform,onChange:function onChange(newTransform){setAttributes({style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,textTransform:newTransform}})})},size:"__unstable-large"})}function useIsTextTransformDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const notSupported=!(0,build_module.zb)(blockName,"typography.__experimentalTextTransform"),hasTextTransforms=use_setting_useSetting("typography.textTransform");return notSupported||!hasTextTransforms}function LetterSpacingControl(_ref){let{value:value,onChange:onChange,__unstableInputWidth:__unstableInputWidth="60px",...otherProps}=_ref;const units=(0,utils.nj)({availableUnits:use_setting_useSetting("spacing.units")||["px","em","rem"],defaultValues:{px:2,em:.2,rem:.2}});return(0,react.createElement)(unit_control.ZP,(0,esm_extends.Z)({},otherProps,{label:(0,i18n_build_module.__)("Letter spacing"),value:value,__unstableInputWidth:__unstableInputWidth,units:units,onChange:onChange}))}function LetterSpacingEdit(props){var _style$typography;const{attributes:{style:style},setAttributes:setAttributes}=props;return(0,react.createElement)(LetterSpacingControl,{value:null==style||null===(_style$typography=style.typography)||void 0===_style$typography?void 0:_style$typography.letterSpacing,onChange:function onChange(newSpacing){setAttributes({style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,letterSpacing:newSpacing}})})},__unstableInputWidth:"100%",size:"__unstable-large"})}function useIsLetterSpacingDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const notSupported=!(0,build_module.zb)(blockName,"typography.__experimentalLetterSpacing"),hasLetterSpacing=use_setting_useSetting("typography.letterSpacing");return notSupported||!hasLetterSpacing}const TYPOGRAPHY_SUPPORT_KEY="typography",TYPOGRAPHY_SUPPORT_KEYS=["typography.lineHeight","typography.fontSize","typography.__experimentalFontStyle","typography.__experimentalFontWeight",FONT_FAMILY_SUPPORT_KEY,"typography.__experimentalTextDecoration","typography.__experimentalTextTransform","typography.__experimentalLetterSpacing"];function TypographyPanel(props){const{clientId:clientId}=props,isFontFamilyDisabled=useIsFontFamilyDisabled(props),isFontSizeDisabled=useIsFontSizeDisabled(props),isFontAppearanceDisabled=useIsFontAppearanceDisabled(props),isLineHeightDisabled=useIsLineHeightDisabled(props),isTextDecorationDisabled=useIsTextDecorationDisabled(props),isTextTransformDisabled=useIsTextTransformDisabled(props),isLetterSpacingDisabled=useIsLetterSpacingDisabled(props),hasFontStyles=!useIsFontStyleDisabled(props),hasFontWeights=!useIsFontWeightDisabled(props),isDisabled=function useIsTypographyDisabled(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const configs=[useIsFontAppearanceDisabled(props),useIsFontSizeDisabled(props),useIsLineHeightDisabled(props),useIsFontFamilyDisabled(props),useIsTextDecorationDisabled(props),useIsTextTransformDisabled(props),useIsLetterSpacingDisabled(props)];return configs.filter(Boolean).length===configs.length}(props),isSupported=hasTypographySupport(props.name);if(isDisabled||!isSupported)return null;const defaultControls=(0,build_module.Dx)(props.name,[TYPOGRAPHY_SUPPORT_KEY,"__experimentalDefaultControls"]),createResetAllFilter=attribute=>newAttributes=>{var _newAttributes$style;return{...newAttributes,style:{...newAttributes.style,typography:{...null===(_newAttributes$style=newAttributes.style)||void 0===_newAttributes$style?void 0:_newAttributes$style.typography,[attribute]:void 0}}}};return(0,react.createElement)(inspector_controls,{__experimentalGroup:"typography"},!isFontFamilyDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{hasValue:()=>function hasFontFamilyValue(props){return!!props.attributes.fontFamily}(props),label:(0,i18n_build_module.__)("Font family"),onDeselect:()=>function resetFontFamily(_ref5){let{setAttributes:setAttributes}=_ref5;setAttributes({fontFamily:void 0})}(props),isShownByDefault:null==defaultControls?void 0:defaultControls.fontFamily,resetAllFilter:newAttributes=>({...newAttributes,fontFamily:void 0}),panelId:clientId},(0,react.createElement)(FontFamilyEdit,props)),!isFontSizeDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{hasValue:()=>function hasFontSizeValue(props){var _style$typography3;const{fontSize:fontSize,style:style}=props.attributes;return!!fontSize||!(null==style||null===(_style$typography3=style.typography)||void 0===_style$typography3||!_style$typography3.fontSize)}(props),label:(0,i18n_build_module.__)("Font size"),onDeselect:()=>function resetFontSize(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({fontSize:void 0,style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,fontSize:void 0}})})}(props),isShownByDefault:null==defaultControls?void 0:defaultControls.fontSize,resetAllFilter:newAttributes=>{var _newAttributes$style2;return{...newAttributes,fontSize:void 0,style:{...newAttributes.style,typography:{...null===(_newAttributes$style2=newAttributes.style)||void 0===_newAttributes$style2?void 0:_newAttributes$style2.typography,fontSize:void 0}}}},panelId:clientId},(0,react.createElement)(FontSizeEdit,props)),!isFontAppearanceDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{className:"single-column",hasValue:()=>function hasFontAppearanceValue(props){var _props$attributes$sty;const{fontStyle:fontStyle,fontWeight:fontWeight}=(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty?void 0:_props$attributes$sty.typography)||{};return!!fontStyle||!!fontWeight}(props),label:getFontAppearanceLabel(hasFontStyles,hasFontWeights),onDeselect:()=>function resetFontAppearance(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,fontStyle:void 0,fontWeight:void 0}})})}(props),isShownByDefault:null==defaultControls?void 0:defaultControls.fontAppearance,resetAllFilter:newAttributes=>{var _newAttributes$style3;return{...newAttributes,style:{...newAttributes.style,typography:{...null===(_newAttributes$style3=newAttributes.style)||void 0===_newAttributes$style3?void 0:_newAttributes$style3.typography,fontStyle:void 0,fontWeight:void 0}}}},panelId:clientId},(0,react.createElement)(FontAppearanceEdit,props)),!isLineHeightDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{className:"single-column",hasValue:()=>function hasLineHeightValue(props){var _props$attributes$sty,_props$attributes$sty2;return!(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.typography)||void 0===_props$attributes$sty2||!_props$attributes$sty2.lineHeight)}(props),label:(0,i18n_build_module.__)("Line height"),onDeselect:()=>function resetLineHeight(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,lineHeight:void 0}})})}(props),isShownByDefault:null==defaultControls?void 0:defaultControls.lineHeight,resetAllFilter:createResetAllFilter("lineHeight"),panelId:clientId},(0,react.createElement)(LineHeightEdit,props)),!isLetterSpacingDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{className:"single-column",hasValue:()=>function hasLetterSpacingValue(props){var _props$attributes$sty,_props$attributes$sty2;return!(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.typography)||void 0===_props$attributes$sty2||!_props$attributes$sty2.letterSpacing)}(props),label:(0,i18n_build_module.__)("Letter spacing"),onDeselect:()=>function resetLetterSpacing(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,letterSpacing:void 0}})})}(props),isShownByDefault:null==defaultControls?void 0:defaultControls.letterSpacing,resetAllFilter:createResetAllFilter("letterSpacing"),panelId:clientId},(0,react.createElement)(LetterSpacingEdit,props)),!isTextDecorationDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{className:"single-column",hasValue:()=>function hasTextDecorationValue(props){var _props$attributes$sty,_props$attributes$sty2;return!(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.typography)||void 0===_props$attributes$sty2||!_props$attributes$sty2.textDecoration)}(props),label:(0,i18n_build_module.__)("Decoration"),onDeselect:()=>function resetTextDecoration(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,textDecoration:void 0}})})}(props),isShownByDefault:null==defaultControls?void 0:defaultControls.textDecoration,resetAllFilter:createResetAllFilter("textDecoration"),panelId:clientId},(0,react.createElement)(TextDecorationEdit,props)),!isTextTransformDisabled&&(0,react.createElement)(tools_panel_item_component.Z,{hasValue:()=>function hasTextTransformValue(props){var _props$attributes$sty,_props$attributes$sty2;return!(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.typography)||void 0===_props$attributes$sty2||!_props$attributes$sty2.textTransform)}(props),label:(0,i18n_build_module.__)("Letter case"),onDeselect:()=>function resetTextTransform(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,typography:{...null==style?void 0:style.typography,textTransform:void 0}})})}(props),isShownByDefault:null==defaultControls?void 0:defaultControls.textTransform,resetAllFilter:createResetAllFilter("textTransform"),panelId:clientId},(0,react.createElement)(TextTransformEdit,props)))}const hasTypographySupport=blockName=>TYPOGRAPHY_SUPPORT_KEYS.some((key=>(0,build_module.zb)(blockName,key)));const styleSupportKeys=[...TYPOGRAPHY_SUPPORT_KEYS,"__experimentalBorder","color",DIMENSIONS_SUPPORT_KEY,SPACING_SUPPORT_KEY],hasStyleSupport=blockType=>styleSupportKeys.some((key=>(0,build_module.zb)(blockType,key)));function getInlineStyles(){let styles=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const output={};return(0,style_engine_build_module.R)(styles).forEach((rule=>{output[rule.key]=rule.value})),output}const skipSerializationPathsEdit={"__experimentalBorder.__experimentalSkipSerialization":["border"],"color.__experimentalSkipSerialization":["color"],[`${TYPOGRAPHY_SUPPORT_KEY}.__experimentalSkipSerialization`]:[TYPOGRAPHY_SUPPORT_KEY],[`${DIMENSIONS_SUPPORT_KEY}.__experimentalSkipSerialization`]:[DIMENSIONS_SUPPORT_KEY],[`${SPACING_SUPPORT_KEY}.__experimentalSkipSerialization`]:[SPACING_SUPPORT_KEY]},skipSerializationPathsSave={...skipSerializationPathsEdit,[`${SPACING_SUPPORT_KEY}`]:["spacing.blockGap"]},renamedFeatures={gradients:"gradient"};function omitStyle(style,paths){let preserveReference=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!style)return style;let newStyle=style;return preserveReference||(newStyle=JSON.parse(JSON.stringify(style))),Array.isArray(paths)||(paths=[paths]),paths.forEach((path=>{if(Array.isArray(path)||(path=path.split(".")),path.length>1){const[firstSubpath,...restPath]=path;omitStyle(newStyle[firstSubpath],[restPath],!0)}else 1===path.length&&delete newStyle[path[0]]})),newStyle}function style_addSaveProps(props,blockType,attributes){let skipPaths=arguments.length>3&&void 0!==arguments[3]?arguments[3]:skipSerializationPathsSave;if(!hasStyleSupport(blockType))return props;let{style:style}=attributes;return Object.entries(skipPaths).forEach((_ref=>{let[indicator,path]=_ref;const skipSerialization=(0,build_module.Dx)(blockType,indicator);!0===skipSerialization&&(style=omitStyle(style,path)),Array.isArray(skipSerialization)&&skipSerialization.forEach((featureName=>{const feature=renamedFeatures[featureName]||featureName;style=omitStyle(style,[[...path,feature]])}))})),props.style={...getInlineStyles(style),...props.style},props}const withBlockControls=(0,create_higher_order_component.o)((BlockEdit=>props=>{const shouldDisplayControls=useDisplayBlockControls();return(0,react.createElement)(react.Fragment,null,shouldDisplayControls&&(0,react.createElement)(react.Fragment,null,(0,react.createElement)(ColorEdit,props),(0,react.createElement)(TypographyPanel,props),(0,react.createElement)(BorderPanel,props),(0,react.createElement)(DimensionsPanel,props)),(0,react.createElement)(BlockEdit,props))}),"withToolbarControls"),withElementsStyles=(0,create_higher_order_component.o)((BlockListBlock=>props=>{var _props$attributes$sty2,_props$attributes$sty3;const blockElementsContainerIdentifier=`wp-elements-${(0,use_instance_id.Z)(BlockListBlock)}`,skipLinkColorSerialization=shouldSkipSerialization(props.name,"color","link"),styles=(0,react.useMemo)((()=>{var _props$attributes$sty;const rawElementsStyles=null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty?void 0:_props$attributes$sty.elements,elementCssRules=[];if(rawElementsStyles&&Object.keys(rawElementsStyles).length>0){var _rawElementsStyles$li;const filteredElementsStyles={...rawElementsStyles,link:{...rawElementsStyles.link,color:skipLinkColorSerialization||null===(_rawElementsStyles$li=rawElementsStyles.link)||void 0===_rawElementsStyles$li?void 0:_rawElementsStyles$li.color}};for(const[elementName,elementStyles]of Object.entries(filteredElementsStyles)){const cssRule=(0,style_engine_build_module.P)(elementStyles,{selector:`.editor-styles-wrapper .${blockElementsContainerIdentifier} ${build_module.qO[elementName]}`});cssRule&&elementCssRules.push(cssRule)}}return elementCssRules.length>0?elementCssRules:void 0}),[null===(_props$attributes$sty2=props.attributes.style)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.elements]),element=(0,react.useContext)(BlockList.__unstableElementContext);return(0,react.createElement)(react.Fragment,null,styles&&element&&(0,react_dom.createPortal)((0,react.createElement)("style",{dangerouslySetInnerHTML:{__html:styles}}),element),(0,react.createElement)(BlockListBlock,(0,esm_extends.Z)({},props,{className:null!==(_props$attributes$sty3=props.attributes.style)&&void 0!==_props$attributes$sty3&&_props$attributes$sty3.elements?classnames_default()(props.className,blockElementsContainerIdentifier):props.className})))}));(0,hooks_build_module.KJ)("blocks.registerBlockType","core/style/addAttribute",(function style_addAttribute(settings){return hasStyleSupport(settings)?(settings.attributes.style||Object.assign(settings.attributes,{style:{type:"object"}}),settings):settings})),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/style/addSaveProps",style_addSaveProps),(0,hooks_build_module.KJ)("blocks.registerBlockType","core/style/addEditProps",(function style_addEditProps(settings){if(!hasStyleSupport(settings))return settings;const existingGetEditWrapperProps=settings.getEditWrapperProps;return settings.getEditWrapperProps=attributes=>{let props={};return existingGetEditWrapperProps&&(props=existingGetEditWrapperProps(attributes)),style_addSaveProps(props,settings,attributes,skipSerializationPathsEdit)},settings})),(0,hooks_build_module.KJ)("editor.BlockEdit","core/style/with-block-controls",withBlockControls),(0,hooks_build_module.KJ)("editor.BlockListBlock","core/editor/with-elements-styles",withElementsStyles);(0,hooks_build_module.KJ)("blocks.registerBlockType","core/settings/addAttribute",(function settings_addAttribute(settings){var _settings$attributes,blockType;return blockType=settings,(0,build_module.zb)(blockType,"__experimentalSettings",!1)?(null!=settings&&null!==(_settings$attributes=settings.attributes)&&void 0!==_settings$attributes&&_settings$attributes.settings||(settings.attributes={...settings.attributes,settings:{type:"object"}}),settings):settings}));var swatch=__webpack_require__("./packages/icons/build-module/library/swatch.js");function getGradientFromCSSColors(){let colors=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],angle=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"90deg";const l=100/colors.length,stops=colors.map(((c,i)=>`${c} ${i*l}%, ${c} ${(i+1)*l}%`)).join(", ");return`linear-gradient( ${angle}, ${stops} )`}(0,colord.l7)([names.Z]);var duotone_swatch=function DuotoneSwatch(_ref){let{values:values}=_ref;return values?(0,react.createElement)(color_indicator,{colorValue:getGradientFromCSSColors(values,"135deg")}):(0,react.createElement)(components_build_module_icon.Z,{icon:swatch.Z})};function ColorOption(_ref){let{label:label,value:value,colors:colors,disableCustomColors:disableCustomColors,enableAlpha:enableAlpha,onChange:onChange}=_ref;const[isOpen,setIsOpen]=(0,react.useState)(!1);return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(build_module_button.Z,{className:"components-color-list-picker__swatch-button",onClick:()=>setIsOpen((prev=>!prev))},(0,react.createElement)(h_stack_component.Z,{justify:"flex-start",spacing:2},value?(0,react.createElement)(color_indicator,{colorValue:value,className:"components-color-list-picker__swatch-color"}):(0,react.createElement)(components_build_module_icon.Z,{icon:swatch.Z}),(0,react.createElement)("span",null,label))),isOpen&&(0,react.createElement)(color_palette,{className:"components-color-list-picker__color-picker",colors:colors,value:value,clearable:!1,onChange:onChange,disableCustomColors:disableCustomColors,enableAlpha:enableAlpha}))}var color_list_picker=function ColorListPicker(_ref2){let{colors:colors,labels:labels,value:value=[],disableCustomColors:disableCustomColors,enableAlpha:enableAlpha,onChange:onChange}=_ref2;return(0,react.createElement)("div",{className:"components-color-list-picker"},labels.map(((label,index)=>(0,react.createElement)(ColorOption,{key:index,label:label,value:value[index],colors:colors,disableCustomColors:disableCustomColors,enableAlpha:enableAlpha,onChange:newColor=>{const newColors=value.slice();newColors[index]=newColor,onChange(newColors)}}))))};const PLACEHOLDER_VALUES=["#333","#CCC"];function CustomDuotoneBar(_ref){let{value:value,onChange:onChange}=_ref;const hasGradient=!!value,values=hasGradient?value:PLACEHOLDER_VALUES,background=getGradientFromCSSColors(values),controlPoints=function getColorStopsFromColors(colors){return colors.map(((color,i)=>({position:100*i/(colors.length-1),color:color})))}(values);return(0,react.createElement)(CustomGradientBar,{disableInserter:!0,background:background,hasGradient:hasGradient,value:controlPoints,onChange:newColorStops=>{const newValue=function getColorsFromColorStops(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((_ref4=>{let{color:color}=_ref4;return color}))}(newColorStops);onChange(newValue)}})}var duotone_picker=function DuotonePicker(_ref){let{clearable:clearable=!0,unsetable:unsetable=!0,colorPalette:colorPalette,duotonePalette:duotonePalette,disableCustomColors:disableCustomColors,disableCustomDuotone:disableCustomDuotone,value:value,onChange:onChange}=_ref;const[defaultDark,defaultLight]=(0,react.useMemo)((()=>function getDefaultColors(palette){return!palette||palette.length<2?["#000","#fff"]:palette.map((_ref=>{let{color:color}=_ref;return{color:color,brightness:(0,colord.Vi)(color).brightness()}})).reduce(((_ref2,current)=>{let[min,max]=_ref2;return[current.brightness<=min.brightness?current:min,current.brightness>=max.brightness?current:max]}),[{brightness:1},{brightness:0}]).map((_ref3=>{let{color:color}=_ref3;return color}))}(colorPalette)),[colorPalette]),isUnset="unset"===value,unsetOption=(0,react.createElement)(CircularOptionPicker.Option,{key:"unset",value:"unset",isSelected:isUnset,tooltipText:(0,i18n_build_module.__)("Unset"),className:"components-duotone-picker__color-indicator",onClick:()=>{onChange(isUnset?void 0:"unset")}}),options=duotonePalette.map((_ref2=>{let{colors:colors,slug:slug,name:name}=_ref2;const style={background:getGradientFromCSSColors(colors,"135deg"),color:"transparent"},tooltipText=null!=name?name:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Duotone code: %s"),slug),label=name?(0,i18n_build_module.gB)((0,i18n_build_module.__)("Duotone: %s"),name):tooltipText,isSelected=es6_default()(colors,value);return(0,react.createElement)(CircularOptionPicker.Option,{key:slug,value:colors,isSelected:isSelected,"aria-label":label,tooltipText:tooltipText,style:style,onClick:()=>{onChange(isSelected?void 0:colors)}})}));return(0,react.createElement)(CircularOptionPicker,{options:unsetable?[unsetOption,...options]:options,actions:!!clearable&&(0,react.createElement)(CircularOptionPicker.ButtonAction,{onClick:()=>onChange(void 0)},(0,i18n_build_module.__)("Clear"))},(0,react.createElement)(spacer_component.Z,{paddingTop:4},(0,react.createElement)(v_stack_component.Z,{spacing:3},!disableCustomColors&&!disableCustomDuotone&&(0,react.createElement)(CustomDuotoneBar,{value:isUnset?void 0:value,onChange:onChange}),!disableCustomDuotone&&(0,react.createElement)(color_list_picker,{labels:[(0,i18n_build_module.__)("Shadows"),(0,i18n_build_module.__)("Highlights")],colors:colorPalette,value:isUnset?void 0:value,disableCustomColors:disableCustomColors,enableAlpha:!0,onChange:newColors=>{newColors[0]||(newColors[0]=defaultDark),newColors[1]||(newColors[1]=defaultLight);const newValue=newColors.length>=2?newColors:void 0;onChange(newValue)}}))))};var library_filter=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M12 4 4 19h16L12 4zm0 3.2 5.5 10.3H12V7.2z"}));var duotone_control=function DuotoneControl(_ref){let toolbarIcon,{colorPalette:colorPalette,duotonePalette:duotonePalette,disableCustomColors:disableCustomColors,disableCustomDuotone:disableCustomDuotone,value:value,onChange:onChange}=_ref;return toolbarIcon="unset"===value?(0,react.createElement)(color_indicator,{className:"block-editor-duotone-control__unset-indicator"}):value?(0,react.createElement)(duotone_swatch,{values:value}):(0,react.createElement)(build_module_icon.Z,{icon:library_filter}),(0,react.createElement)(dropdown.Z,{popoverProps:{className:"block-editor-duotone-control__popover",headerTitle:(0,i18n_build_module.__)("Duotone"),variant:"toolbar"},renderToggle:_ref2=>{let{isOpen:isOpen,onToggle:onToggle}=_ref2;return(0,react.createElement)(toolbar_button.Z,{showTooltip:!0,onClick:onToggle,"aria-haspopup":"true","aria-expanded":isOpen,onKeyDown:event=>{isOpen||event.keyCode!==keycodes_build_module.WV||(event.preventDefault(),onToggle())},label:(0,i18n_build_module.__)("Apply duotone filter"),icon:toolbarIcon})},renderContent:()=>(0,react.createElement)(menu_group.Z,{label:(0,i18n_build_module.__)("Duotone")},(0,react.createElement)("div",{className:"block-editor-duotone-control__description"},(0,i18n_build_module.__)("Create a two-tone color effect without losing your original image.")),(0,react.createElement)(duotone_picker,{colorPalette:colorPalette,duotonePalette:duotonePalette,disableCustomColors:disableCustomColors,disableCustomDuotone:disableCustomDuotone,value:value,onChange:onChange}))})};const duotone_EMPTY_ARRAY=[];function InlineDuotone(_ref){let{selector:selector,id:id,colors:colors}=_ref;return"unset"===colors?(0,react.createElement)(DuotoneUnsetStylesheet,{selector:selector}):(0,react.createElement)(react.Fragment,null,(0,react.createElement)(DuotoneFilter,{id:id,colors:colors}),(0,react.createElement)(DuotoneStylesheet,{id:id,selector:selector}))}function useMultiOriginPresets(_ref2){let{presetSetting:presetSetting,defaultSetting:defaultSetting}=_ref2;const disableDefault=!use_setting_useSetting(defaultSetting),userPresets=use_setting_useSetting(`${presetSetting}.custom`)||duotone_EMPTY_ARRAY,themePresets=use_setting_useSetting(`${presetSetting}.theme`)||duotone_EMPTY_ARRAY,defaultPresets=use_setting_useSetting(`${presetSetting}.default`)||duotone_EMPTY_ARRAY;return(0,react.useMemo)((()=>[...userPresets,...themePresets,...disableDefault?duotone_EMPTY_ARRAY:defaultPresets]),[disableDefault,userPresets,themePresets,defaultPresets])}function DuotonePanel(_ref3){var _style$color;let{attributes:attributes,setAttributes:setAttributes}=_ref3;const style=null==attributes?void 0:attributes.style,duotone=null==style||null===(_style$color=style.color)||void 0===_style$color?void 0:_style$color.duotone,duotonePalette=useMultiOriginPresets({presetSetting:"color.duotone",defaultSetting:"color.defaultDuotone"}),colorPalette=useMultiOriginPresets({presetSetting:"color.palette",defaultSetting:"color.defaultPalette"}),disableCustomColors=!use_setting_useSetting("color.custom"),disableCustomDuotone=!use_setting_useSetting("color.customDuotone")||0===(null==colorPalette?void 0:colorPalette.length)&&disableCustomColors;return 0===(null==duotonePalette?void 0:duotonePalette.length)&&disableCustomDuotone?null:(0,react.createElement)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0},(0,react.createElement)(duotone_control,{duotonePalette:duotonePalette,colorPalette:colorPalette,disableCustomDuotone:disableCustomDuotone,disableCustomColors:disableCustomColors,value:duotone,onChange:newDuotone=>{const newStyle={...style,color:{...null==style?void 0:style.color,duotone:newDuotone}};setAttributes({style:newStyle})}}))}(0,colord.l7)([names.Z]);const withDuotoneControls=(0,create_higher_order_component.o)((BlockEdit=>props=>{const hasDuotoneSupport=(0,build_module.zb)(props.name,"color.__experimentalDuotone"),isContentLocked=(0,use_select.Z)((select=>select(store).__unstableGetContentLockingParent(props.clientId)),[props.clientId]);return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(BlockEdit,props),hasDuotoneSupport&&!isContentLocked&&(0,react.createElement)(DuotonePanel,props))}),"withDuotoneControls");const withDuotoneStyles=(0,create_higher_order_component.o)((BlockListBlock=>props=>{var _props$attributes,_props$attributes$sty,_props$attributes$sty2;const duotoneSupport=(0,build_module.Dx)(props.name,"color.__experimentalDuotone"),colors=null==props||null===(_props$attributes=props.attributes)||void 0===_props$attributes||null===(_props$attributes$sty=_props$attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.color)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.duotone;if(!duotoneSupport||!colors)return(0,react.createElement)(BlockListBlock,props);const id=`wp-duotone-${(0,use_instance_id.Z)(BlockListBlock)}`,selectorsGroup=function scopeSelector(scope,selector){const scopes=scope.split(","),selectors=selector.split(","),selectorsScoped=[];return scopes.forEach((outer=>{selectors.forEach((inner=>{selectorsScoped.push(`${outer.trim()} ${inner.trim()}`)}))})),selectorsScoped.join(", ")}(`.editor-styles-wrapper .${id}`,duotoneSupport),className=classnames_default()(null==props?void 0:props.className,id),element=(0,react.useContext)(BlockList.__unstableElementContext);return(0,react.createElement)(react.Fragment,null,element&&(0,react_dom.createPortal)((0,react.createElement)(InlineDuotone,{selector:selectorsGroup,id:id,colors:colors}),element),(0,react.createElement)(BlockListBlock,(0,esm_extends.Z)({},props,{className:className})))}),"withDuotoneStyles");(0,hooks_build_module.KJ)("blocks.registerBlockType","core/editor/duotone/add-attributes",(function addDuotoneAttributes(settings){return(0,build_module.zb)(settings,"color.__experimentalDuotone")?(settings.attributes.style||Object.assign(settings.attributes,{style:{type:"object"}}),settings):settings})),(0,hooks_build_module.KJ)("editor.BlockEdit","core/editor/duotone/with-editor-controls",withDuotoneControls),(0,hooks_build_module.KJ)("editor.BlockListBlock","core/editor/duotone/with-styles",withDuotoneStyles);var button_group=__webpack_require__("./packages/components/build-module/button-group/index.js");function LayoutPanel(_ref){let{setAttributes:setAttributes,attributes:attributes,name:blockName}=_ref;const{layout:layout}=attributes,defaultThemeLayout=use_setting_useSetting("layout"),themeSupportsLayout=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store);return getSettings().supportsLayout}),[]),layoutBlockSupport=(0,build_module.Dx)(blockName,"__experimentalLayout",{}),{allowSwitching:allowSwitching,allowEditing:allowEditing=!0,allowInheriting:allowInheriting=!0,default:defaultBlockLayout}=layoutBlockSupport;if(!allowEditing)return null;const showInheritToggle=!(!allowInheriting||!defaultThemeLayout||null!=layout&&layout.type&&"default"!==(null==layout?void 0:layout.type)&&"constrained"!==(null==layout?void 0:layout.type)&&(null==layout||!layout.inherit)),usedLayout=layout||defaultBlockLayout||{},{inherit:inherit=!1,type:type="default",contentSize:contentSize=null}=usedLayout;if(("default"===type||"constrained"===type)&&!themeSupportsLayout)return null;const layoutType=layouts_getLayoutType(type),constrainedType=layouts_getLayoutType("constrained"),displayControlsForLegacyLayouts=!usedLayout.type&&(contentSize||inherit),hasContentSizeOrLegacySettings=!!inherit||!!contentSize,onChangeLayout=newLayout=>setAttributes({layout:newLayout});return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(inspector_controls,null,(0,react.createElement)(body.Z,{title:(0,i18n_build_module.__)("Layout")},showInheritToggle&&(0,react.createElement)(react.Fragment,null,(0,react.createElement)(toggle_control.Z,{className:"block-editor-hooks__toggle-control",label:(0,i18n_build_module.__)("Inner blocks use content width"),checked:"constrained"===(null==layoutType?void 0:layoutType.name)||hasContentSizeOrLegacySettings,onChange:()=>setAttributes({layout:{type:"constrained"===(null==layoutType?void 0:layoutType.name)||hasContentSizeOrLegacySettings?"default":"constrained"}}),help:"constrained"===(null==layoutType?void 0:layoutType.name)||hasContentSizeOrLegacySettings?(0,i18n_build_module.__)("Nested blocks use content width with options for full and wide widths."):(0,i18n_build_module.__)("Nested blocks will fill the width of this container. Toggle to constrain.")})),!inherit&&allowSwitching&&(0,react.createElement)(LayoutTypeSwitcher,{type:type,onChange:newType=>setAttributes({layout:{type:newType}})}),layoutType&&"default"!==layoutType.name&&(0,react.createElement)(layoutType.inspectorControls,{layout:usedLayout,onChange:onChangeLayout,layoutBlockSupport:layoutBlockSupport}),constrainedType&&displayControlsForLegacyLayouts&&(0,react.createElement)(constrainedType.inspectorControls,{layout:usedLayout,onChange:onChangeLayout,layoutBlockSupport:layoutBlockSupport}))),!inherit&&layoutType&&(0,react.createElement)(layoutType.toolBarControls,{layout:usedLayout,onChange:onChangeLayout,layoutBlockSupport:layoutBlockSupport}))}function LayoutTypeSwitcher(_ref2){let{type:type,onChange:onChange}=_ref2;return(0,react.createElement)(button_group.Z,null,function getLayoutTypes(){return layoutTypes}().map((_ref3=>{let{name:name,label:label}=_ref3;return(0,react.createElement)(build_module_button.Z,{key:name,isPressed:type===name,onClick:()=>onChange(name)},label)})))}const withInspectorControls=(0,create_higher_order_component.o)((BlockEdit=>props=>{const{name:blockName}=props;return[(0,build_module.zb)(blockName,"__experimentalLayout")&&(0,react.createElement)(LayoutPanel,(0,esm_extends.Z)({key:"layout"},props)),(0,react.createElement)(BlockEdit,(0,esm_extends.Z)({key:"edit"},props))]}),"withInspectorControls"),withLayoutStyles=(0,create_higher_order_component.o)((BlockListBlock=>props=>{const{name:name,attributes:attributes,block:block}=props,hasLayoutBlockSupport=(0,build_module.zb)(name,"__experimentalLayout"),disableLayoutStyles=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store);return!!getSettings().disableLayoutStyles})),shouldRenderLayoutStyles=hasLayoutBlockSupport&&!disableLayoutStyles,id=(0,use_instance_id.Z)(BlockListBlock),defaultThemeLayout=use_setting_useSetting("layout")||{},element=(0,react.useContext)(BlockList.__unstableElementContext),{layout:layout}=attributes,{default:defaultBlockLayout}=(0,build_module.Dx)(name,"__experimentalLayout")||{},usedLayout=null!=layout&&layout.inherit||null!=layout&&layout.contentSize||null!=layout&&layout.wideSize?{...layout,type:"constrained"}:layout||defaultBlockLayout||{},layoutClasses=hasLayoutBlockSupport?function useLayoutClasses(){var _globalLayoutSettings,_globalLayoutSettings2;let block=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const rootPaddingAlignment=(0,use_select.Z)((select=>{var _getSettings$__experi;const{getSettings:getSettings}=select(store);return null===(_getSettings$__experi=getSettings().__experimentalFeatures)||void 0===_getSettings$__experi?void 0:_getSettings$__experi.useRootPaddingAwareAlignments}),[]),globalLayoutSettings=use_setting_useSetting("layout")||{},{attributes:attributes={},name:name}=block,{layout:layout}=attributes,{default:defaultBlockLayout}=(0,build_module.Dx)(name,"__experimentalLayout")||{},usedLayout=null!=layout&&layout.inherit||null!=layout&&layout.contentSize||null!=layout&&layout.wideSize?{...layout,type:"constrained"}:layout||defaultBlockLayout||{},layoutClassnames=[];var _globalLayoutSettings3,_globalLayoutSettings4;return null!=globalLayoutSettings&&null!==(_globalLayoutSettings=globalLayoutSettings.definitions)&&void 0!==_globalLayoutSettings&&null!==(_globalLayoutSettings2=_globalLayoutSettings[(null==usedLayout?void 0:usedLayout.type)||"default"])&&void 0!==_globalLayoutSettings2&&_globalLayoutSettings2.className&&layoutClassnames.push(null==globalLayoutSettings||null===(_globalLayoutSettings3=globalLayoutSettings.definitions)||void 0===_globalLayoutSettings3||null===(_globalLayoutSettings4=_globalLayoutSettings3[(null==usedLayout?void 0:usedLayout.type)||"default"])||void 0===_globalLayoutSettings4?void 0:_globalLayoutSettings4.className),(null!=usedLayout&&usedLayout.inherit||null!=usedLayout&&usedLayout.contentSize||"constrained"===(null==usedLayout?void 0:usedLayout.type))&&rootPaddingAlignment&&layoutClassnames.push("has-global-padding"),null!=usedLayout&&usedLayout.orientation&&layoutClassnames.push(`is-${(0,lodash.kebabCase)(usedLayout.orientation)}`),null!=usedLayout&&usedLayout.justifyContent&&layoutClassnames.push(`is-content-justification-${(0,lodash.kebabCase)(usedLayout.justifyContent)}`),null!=usedLayout&&usedLayout.flexWrap&&"nowrap"===usedLayout.flexWrap&&layoutClassnames.push("is-nowrap"),layoutClassnames}(block):null,selector=`.wp-container-${id}.wp-container-${id}`,hasBlockGapSupport=null!==use_setting_useSetting("spacing.blockGap");let css;if(shouldRenderLayoutStyles){var _fullLayoutType$getLa2;const fullLayoutType=layouts_getLayoutType((null==usedLayout?void 0:usedLayout.type)||"default");css=null==fullLayoutType||null===(_fullLayoutType$getLa2=fullLayoutType.getLayoutStyle)||void 0===_fullLayoutType$getLa2?void 0:_fullLayoutType$getLa2.call(fullLayoutType,{blockName:name,selector:selector,layout:usedLayout,layoutDefinitions:null==defaultThemeLayout?void 0:defaultThemeLayout.definitions,style:null==attributes?void 0:attributes.style,hasBlockGapSupport:hasBlockGapSupport})}const layoutClassNames=classnames_default()({[`wp-container-${id}`]:shouldRenderLayoutStyles&&!!css},layoutClasses);return(0,react.createElement)(react.Fragment,null,shouldRenderLayoutStyles&&element&&!!css&&(0,react_dom.createPortal)((0,react.createElement)(LayoutStyle,{blockName:name,selector:selector,css:css,layout:usedLayout,style:null==attributes?void 0:attributes.style}),element),(0,react.createElement)(BlockListBlock,(0,esm_extends.Z)({},props,{__unstableLayoutClassNames:layoutClassNames})))})),withChildLayoutStyles=(0,create_higher_order_component.o)((BlockListBlock=>props=>{const{attributes:attributes}=props,{style:{layout:layout={}}={}}=attributes,{selfStretch:selfStretch,flexSize:flexSize}=layout,hasChildLayout=selfStretch||flexSize,disableLayoutStyles=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store);return!!getSettings().disableLayoutStyles})),shouldRenderChildLayoutStyles=hasChildLayout&&!disableLayoutStyles,element=(0,react.useContext)(BlockList.__unstableElementContext),id=(0,use_instance_id.Z)(BlockListBlock),selector=`.wp-container-content-${id}`;let css="";"fixed"===selfStretch&&flexSize?css+=`${selector} {\n\t\t\t\tflex-basis: ${flexSize};\n\t\t\t\tbox-sizing: border-box;\n\t\t\t}`:"fill"===selfStretch&&(css+=`${selector} {\n\t\t\t\tflex-grow: 1;\n\t\t\t}`);const className=classnames_default()(null==props?void 0:props.className,{[`wp-container-content-${id}`]:shouldRenderChildLayoutStyles&&!!css});return(0,react.createElement)(react.Fragment,null,shouldRenderChildLayoutStyles&&element&&!!css&&(0,react_dom.createPortal)((0,react.createElement)("style",null,css),element),(0,react.createElement)(BlockListBlock,(0,esm_extends.Z)({},props,{className:className})))}));function StopEditingAsBlocksOnOutsideSelect(_ref){let{clientId:clientId,stopEditingAsBlock:stopEditingAsBlock}=_ref;const isBlockOrDescendantSelected=(0,use_select.Z)((select=>{const{isBlockSelected:isBlockSelected,hasSelectedInnerBlock:hasSelectedInnerBlock}=select(store);return isBlockSelected(clientId)||hasSelectedInnerBlock(clientId,!0)}),[clientId]);return(0,react.useEffect)((()=>{isBlockOrDescendantSelected||stopEditingAsBlock()}),[isBlockOrDescendantSelected]),null}(0,hooks_build_module.KJ)("blocks.registerBlockType","core/layout/addAttribute",(function layout_addAttribute(settings){var _settings$attributes$,_settings$attributes;return"type"in(null!==(_settings$attributes$=null===(_settings$attributes=settings.attributes)||void 0===_settings$attributes?void 0:_settings$attributes.layout)&&void 0!==_settings$attributes$?_settings$attributes$:{})||(0,build_module.zb)(settings,"__experimentalLayout")&&(settings.attributes={...settings.attributes,layout:{type:"object"}}),settings})),(0,hooks_build_module.KJ)("editor.BlockListBlock","core/editor/layout/with-layout-styles",withLayoutStyles),(0,hooks_build_module.KJ)("editor.BlockListBlock","core/editor/layout/with-child-layout-styles",withChildLayoutStyles),(0,hooks_build_module.KJ)("editor.BlockEdit","core/editor/layout/with-inspector-controls",withInspectorControls);const content_lock_ui_withBlockControls=(0,create_higher_order_component.o)((BlockEdit=>props=>{const{getBlockListSettings:getBlockListSettings,getSettings:getSettings}=(0,use_select.Z)(store),focusModeToRevert=(0,react.useRef)(),{templateLock:templateLock,isLockedByParent:isLockedByParent,isEditingAsBlocks:isEditingAsBlocks}=(0,use_select.Z)((select=>{const{__unstableGetContentLockingParent:__unstableGetContentLockingParent,getTemplateLock:getTemplateLock,__unstableGetTemporarilyEditingAsBlocks:__unstableGetTemporarilyEditingAsBlocks}=select(store);return{templateLock:getTemplateLock(props.clientId),isLockedByParent:!!__unstableGetContentLockingParent(props.clientId),isEditingAsBlocks:__unstableGetTemporarilyEditingAsBlocks()===props.clientId}}),[props.clientId]),{updateSettings:updateSettings,updateBlockListSettings:updateBlockListSettings,__unstableSetTemporarilyEditingAsBlocks:__unstableSetTemporarilyEditingAsBlocks}=(0,use_dispatch.Z)(store),isContentLocked=!isLockedByParent&&"contentOnly"===templateLock,{__unstableMarkNextChangeAsNotPersistent:__unstableMarkNextChangeAsNotPersistent,updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store),stopEditingAsBlock=(0,react.useCallback)((()=>{__unstableMarkNextChangeAsNotPersistent(),updateBlockAttributes(props.clientId,{templateLock:"contentOnly"}),updateBlockListSettings(props.clientId,{...getBlockListSettings(props.clientId),templateLock:"contentOnly"}),updateSettings({focusMode:focusModeToRevert.current}),__unstableSetTemporarilyEditingAsBlocks()}),[props.clientId,focusModeToRevert,updateSettings,updateBlockListSettings,getBlockListSettings,__unstableMarkNextChangeAsNotPersistent,updateBlockAttributes,__unstableSetTemporarilyEditingAsBlocks]);return isContentLocked||isEditingAsBlocks?(0,react.createElement)(react.Fragment,null,isEditingAsBlocks&&!isContentLocked&&(0,react.createElement)(react.Fragment,null,(0,react.createElement)(StopEditingAsBlocksOnOutsideSelect,{clientId:props.clientId,stopEditingAsBlock:stopEditingAsBlock}),(0,react.createElement)(block_controls,{group:"other"},(0,react.createElement)(toolbar_button.Z,{onClick:()=>{stopEditingAsBlock()}},(0,i18n_build_module.__)("Done")))),!isEditingAsBlocks&&isContentLocked&&props.isSelected&&(0,react.createElement)(block_settings_menu_controls,null,(_ref2=>{let{onClose:onClose}=_ref2;return(0,react.createElement)(menu_item.Z,{onClick:()=>{__unstableMarkNextChangeAsNotPersistent(),updateBlockAttributes(props.clientId,{templateLock:void 0}),updateBlockListSettings(props.clientId,{...getBlockListSettings(props.clientId),templateLock:!1}),focusModeToRevert.current=getSettings().focusMode,updateSettings({focusMode:!0}),__unstableSetTemporarilyEditingAsBlocks(props.clientId),onClose()}},(0,i18n_build_module.__)("Modify"))})),(0,react.createElement)(BlockEdit,(0,esm_extends.Z)({},props,{className:classnames_default()(props.className,isEditingAsBlocks&&"is-content-locked-editing-as-blocks")}))):(0,react.createElement)(BlockEdit,props)}),"withToolbarControls");(0,hooks_build_module.KJ)("editor.BlockEdit","core/content-lock-ui/with-block-controls",content_lock_ui_withBlockControls);function hasBlockMetadataSupport(blockType){let feature=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const support=(0,build_module.Dx)(blockType,"__experimentalMetadata");return!!(!0===support||null!=support&&support[feature])}function getBorderClassesAndStyles(attributes){var _attributes$style;const border=(null===(_attributes$style=attributes.style)||void 0===_attributes$style?void 0:_attributes$style.border)||{};return{className:getBorderClasses(attributes)||void 0,style:getInlineStyles({border:border})}}function useBorderProps(attributes){const{colors:colors}=useMultipleOriginColorsAndGradients(),borderProps=getBorderClassesAndStyles(attributes),{borderColor:borderColor}=attributes;if(borderColor){const borderColorObject=getMultiOriginColor({colors:colors,namedColor:borderColor});borderProps.style.borderColor=borderColorObject.color}return borderProps}function getColorClassesAndStyles(attributes){var _style$color,_style$color2,_style$color3,_style$color4,_style$elements,_style$elements$link;const{backgroundColor:backgroundColor,textColor:textColor,gradient:gradient,style:style}=attributes,backgroundClass=getColorClassName("background-color",backgroundColor),textClass=getColorClassName("color",textColor),gradientClass=__experimentalGetGradientClass(gradient),hasGradient=gradientClass||(null==style||null===(_style$color=style.color)||void 0===_style$color?void 0:_style$color.gradient);return{className:classnames_default()(textClass,gradientClass,{[backgroundClass]:!hasGradient&&!!backgroundClass,"has-text-color":textColor||(null==style||null===(_style$color2=style.color)||void 0===_style$color2?void 0:_style$color2.text),"has-background":backgroundColor||(null==style||null===(_style$color3=style.color)||void 0===_style$color3?void 0:_style$color3.background)||gradient||(null==style||null===(_style$color4=style.color)||void 0===_style$color4?void 0:_style$color4.gradient),"has-link-color":null==style||null===(_style$elements=style.elements)||void 0===_style$elements||null===(_style$elements$link=_style$elements.link)||void 0===_style$elements$link?void 0:_style$elements$link.color})||void 0,style:getInlineStyles({color:(null==style?void 0:style.color)||{}})}}(0,hooks_build_module.KJ)("blocks.registerBlockType","core/metadata/addMetaAttribute",(function addMetaAttribute(blockTypeSettings){var _blockTypeSettings$at,_blockTypeSettings$at2;return null!=blockTypeSettings&&null!==(_blockTypeSettings$at=blockTypeSettings.attributes)&&void 0!==_blockTypeSettings$at&&null!==(_blockTypeSettings$at2=_blockTypeSettings$at.metadata)&&void 0!==_blockTypeSettings$at2&&_blockTypeSettings$at2.type||hasBlockMetadataSupport(blockTypeSettings,"name",!1)&&(blockTypeSettings.attributes={...blockTypeSettings.attributes,metadata:{type:"object"}}),blockTypeSettings})),(0,hooks_build_module.KJ)("blocks.getSaveContent.extraProps","core/metadata/save-props",(function metadata_addSaveProps(extraProps,blockType,attributes){return hasBlockMetadataSupport(blockType)&&(extraProps.metadata=attributes.metadata),extraProps})),(0,hooks_build_module.KJ)("blocks.registerBlockType","core/metadata/addLabelCallback",(function addLabelCallback(settings){return settings.__experimentalLabel||hasBlockMetadataSupport(settings,"name",!1)&&(settings.__experimentalLabel=(attributes,_ref)=>{let{context:context}=_ref;const{metadata:metadata}=attributes;if("list-view"===context&&null!=metadata&&metadata.name)return metadata.name}),settings}));const EMPTY_OBJECT={};function useColorProps(attributes){const{backgroundColor:backgroundColor,textColor:textColor,gradient:gradient}=attributes,userPalette=use_setting_useSetting("color.palette.custom")||[],themePalette=use_setting_useSetting("color.palette.theme")||[],defaultPalette=use_setting_useSetting("color.palette.default")||[],gradientsPerOrigin=use_setting_useSetting("color.gradients")||EMPTY_OBJECT,colors=(0,react.useMemo)((()=>[...userPalette||[],...themePalette||[],...defaultPalette||[]]),[userPalette,themePalette,defaultPalette]),gradients=(0,react.useMemo)((()=>[...(null==gradientsPerOrigin?void 0:gradientsPerOrigin.custom)||[],...(null==gradientsPerOrigin?void 0:gradientsPerOrigin.theme)||[],...(null==gradientsPerOrigin?void 0:gradientsPerOrigin.default)||[]]),[gradientsPerOrigin]),colorProps=getColorClassesAndStyles(attributes);if(backgroundColor){const backgroundColorObject=getColorObjectByAttributeValues(colors,backgroundColor);colorProps.style.backgroundColor=backgroundColorObject.color}if(gradient&&(colorProps.style.background=getGradientValueBySlug(gradients,gradient)),textColor){const textColorObject=getColorObjectByAttributeValues(colors,textColor);colorProps.style.color=textColorObject.color}return colorProps}function getSpacingClassesAndStyles(attributes){const{style:style}=attributes;return{style:getInlineStyles({spacing:(null==style?void 0:style.spacing)||{}})}}function getTypographyClassesAndStyles(attributes,fluidTypographySettings){var _attributes$style;let typographyStyles=(null==attributes||null===(_attributes$style=attributes.style)||void 0===_attributes$style?void 0:_attributes$style.typography)||{};if(fluidTypographySettings&&(!0===fluidTypographySettings||0!==Object.keys(fluidTypographySettings).length)){var _attributes$style2,_attributes$style2$ty,_attributes$style3,_attributes$style3$ty;const newFontSize=getComputedFluidTypographyValue({fontSize:null==attributes||null===(_attributes$style2=attributes.style)||void 0===_attributes$style2||null===(_attributes$style2$ty=_attributes$style2.typography)||void 0===_attributes$style2$ty?void 0:_attributes$style2$ty.fontSize,minimumFontSizeLimit:null==fluidTypographySettings?void 0:fluidTypographySettings.minFontSize})||(null==attributes||null===(_attributes$style3=attributes.style)||void 0===_attributes$style3||null===(_attributes$style3$ty=_attributes$style3.typography)||void 0===_attributes$style3$ty?void 0:_attributes$style3$ty.fontSize);typographyStyles={...typographyStyles,fontSize:newFontSize}}const style=getInlineStyles({typography:typographyStyles}),fontFamilyClassName=null!=attributes&&attributes.fontFamily?`has-${(0,lodash.kebabCase)(attributes.fontFamily)}-font-family`:"";return{className:classnames_default()(fontFamilyClassName,getFontSizeClass(null==attributes?void 0:attributes.fontSize)),style:style}}function useCachedTruthy(value){const[cachedValue,setCachedValue]=(0,react.useState)(value);return(0,react.useEffect)((()=>{value&&setCachedValue(value)}),[value]),cachedValue}const upperFirst=_ref=>{let[firstLetter,...rest]=_ref;return firstLetter.toUpperCase()+rest.join("")},withEditorColorPalette=()=>(0,create_higher_order_component.o)((WrappedComponent=>props=>{const userPalette=use_setting_useSetting("color.palette.custom"),themePalette=use_setting_useSetting("color.palette.theme"),defaultPalette=use_setting_useSetting("color.palette.default"),allColors=(0,react.useMemo)((()=>[...userPalette||[],...themePalette||[],...defaultPalette||[]]),[userPalette,themePalette,defaultPalette]);return(0,react.createElement)(WrappedComponent,(0,esm_extends.Z)({},props,{colors:allColors}))}),"withEditorColorPalette");function createColorHOC(colorTypes,withColorPalette){const colorMap=colorTypes.reduce(((colorObject,colorType)=>({...colorObject,..."string"==typeof colorType?{[colorType]:(0,lodash.kebabCase)(colorType)}:colorType})),{});return(0,compose.Z)([withColorPalette,WrappedComponent=>class extends react.Component{constructor(props){super(props),this.setters=this.createSetters(),this.colorUtils={getMostReadableColor:this.getMostReadableColor.bind(this)},this.state={}}getMostReadableColor(colorValue){const{colors:colors}=this.props;return function getMostReadableColor(colors,colorValue){const colordColor=(0,colord.Vi)(colorValue),getColorContrast=_ref=>{let{color:color}=_ref;return colordColor.contrast(color)},maxContrast=Math.max(...colors.map(getColorContrast));return colors.find((color=>getColorContrast(color)===maxContrast)).color}(colors,colorValue)}createSetters(){return Object.keys(colorMap).reduce(((settersAccumulator,colorAttributeName)=>{const upperFirstColorAttributeName=upperFirst(colorAttributeName),customColorAttributeName=`custom${upperFirstColorAttributeName}`;return settersAccumulator[`set${upperFirstColorAttributeName}`]=this.createSetColor(colorAttributeName,customColorAttributeName),settersAccumulator}),{})}createSetColor(colorAttributeName,customColorAttributeName){return colorValue=>{const colorObject=getColorObjectByColorValue(this.props.colors,colorValue);this.props.setAttributes({[colorAttributeName]:colorObject&&colorObject.slug?colorObject.slug:void 0,[customColorAttributeName]:colorObject&&colorObject.slug?void 0:colorValue})}}static getDerivedStateFromProps(_ref2,previousState){let{attributes:attributes,colors:colors}=_ref2;return Object.entries(colorMap).reduce(((newState,_ref3)=>{let[colorAttributeName,colorContext]=_ref3;const colorObject=getColorObjectByAttributeValues(colors,attributes[colorAttributeName],attributes[`custom${upperFirst(colorAttributeName)}`]),previousColorObject=previousState[colorAttributeName];return(null==previousColorObject?void 0:previousColorObject.color)===colorObject.color&&previousColorObject?newState[colorAttributeName]=previousColorObject:newState[colorAttributeName]={...colorObject,class:getColorClassName(colorContext,colorObject.slug)},newState}),{})}render(){return(0,react.createElement)(WrappedComponent,(0,esm_extends.Z)({},this.props,{colors:void 0},this.state,this.setters,{colorUtils:this.colorUtils}))}}])}function withColors(){const withColorPalette=withEditorColorPalette();for(var _len2=arguments.length,colorTypes=new Array(_len2),_key2=0;_key2<_len2;_key2++)colorTypes[_key2]=arguments[_key2];return(0,create_higher_order_component.o)(createColorHOC(colorTypes,withColorPalette),"withColors")}var align_left=__webpack_require__("./packages/icons/build-module/library/align-left.js"),align_center=__webpack_require__("./packages/icons/build-module/library/align-center.js"),align_right=__webpack_require__("./packages/icons/build-module/library/align-right.js");const DEFAULT_ALIGNMENT_CONTROLS=[{icon:align_left.Z,title:(0,i18n_build_module.__)("Align text left"),align:"left"},{icon:align_center.Z,title:(0,i18n_build_module.__)("Align text center"),align:"center"},{icon:align_right.Z,title:(0,i18n_build_module.__)("Align text right"),align:"right"}],ui_POPOVER_PROPS={position:"bottom right",variant:"toolbar"};var alignment_control_ui=function AlignmentUI(_ref){let{value:value,onChange:onChange,alignmentControls:alignmentControls=DEFAULT_ALIGNMENT_CONTROLS,label:label=(0,i18n_build_module.__)("Align"),describedBy:describedBy=(0,i18n_build_module.__)("Change text alignment"),isCollapsed:isCollapsed=!0,isToolbar:isToolbar}=_ref;function applyOrUnset(align){return()=>onChange(value===align?void 0:align)}const activeAlignment=alignmentControls.find((control=>control.align===value)),UIComponent=isToolbar?toolbar_group.Z:toolbar_dropdown_menu.Z,extraProps=isToolbar?{isCollapsed:isCollapsed}:{toggleProps:{describedBy:describedBy},popoverProps:ui_POPOVER_PROPS};return(0,react.createElement)(UIComponent,(0,esm_extends.Z)({icon:function setIcon(){return activeAlignment?activeAlignment.icon:(0,i18n_build_module.dZ)()?align_right.Z:align_left.Z}(),label:label,controls:alignmentControls.map((control=>{const{align:align}=control,isActive=value===align;return{...control,isActive:isActive,role:isCollapsed?"menuitemradio":void 0,onClick:applyOrUnset(align)}}))},extraProps))};const AlignmentControl=props=>(0,react.createElement)(alignment_control_ui,(0,esm_extends.Z)({},props,{isToolbar:!1})),AlignmentToolbar=props=>(0,react.createElement)(alignment_control_ui,(0,esm_extends.Z)({},props,{isToolbar:!0}));var library_fullscreen=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M4.2 9h1.5V5.8H9V4.2H4.2V9zm14 9.2H15v1.5h4.8V15h-1.5v3.2zM15 4.2v1.5h3.2V9h1.5V4.2H15zM5.8 15H4.2v4.8H9v-1.5H5.8V15z"}));var block_full_height_alignment_control=function BlockFullHeightAlignmentControl(_ref){let{isActive:isActive,label:label=(0,i18n_build_module.__)("Toggle full height"),onToggle:onToggle,isDisabled:isDisabled}=_ref;return(0,react.createElement)(toolbar_button.Z,{isActive:isActive,icon:library_fullscreen,label:label,onClick:()=>onToggle(!isActive),disabled:isDisabled})};const GRID=[["top left","top center","top right"],["center left","center center","center right"],["bottom left","bottom center","bottom right"]],ALIGNMENT_LABEL={"top left":(0,i18n_build_module.__)("Top Left"),"top center":(0,i18n_build_module.__)("Top Center"),"top right":(0,i18n_build_module.__)("Top Right"),"center left":(0,i18n_build_module.__)("Center Left"),"center center":(0,i18n_build_module.__)("Center Center"),center:(0,i18n_build_module.__)("Center Center"),"center right":(0,i18n_build_module.__)("Center Right"),"bottom left":(0,i18n_build_module.__)("Bottom Left"),"bottom center":(0,i18n_build_module.__)("Bottom Center"),"bottom right":(0,i18n_build_module.__)("Bottom Right")},ALIGNMENTS=GRID.flat();function transformValue(value){return("center"===value?"center center":value).replace("-"," ")}function getItemId(prefixId,value){return`${prefixId}-${transformValue(value).replace(" ","-")}`}var reduce_motion=__webpack_require__("./packages/components/build-module/utils/reduce-motion.js");var _ref={name:"93uojk",styles:"border-radius:2px;box-sizing:border-box;direction:ltr;display:grid;grid-template-columns:repeat( 3, 1fr );outline:none"};const rootBase=()=>_ref,alignment_matrix_control_styles_Root=(0,emotion_styled_base_browser_esm.Z)("div",{target:"ecapk1j3"})(rootBase,";border:1px solid transparent;cursor:pointer;grid-template-columns:auto;",(_ref2=>{let{size:size=92}=_ref2;return(0,emotion_react_browser_esm.iv)("grid-template-rows:repeat( 3, calc( ",size,"px / 3 ) );width:",size,"px;","","","")}),";"),Row=(0,emotion_styled_base_browser_esm.Z)("div",{target:"ecapk1j2"})({name:"1x5gbbj",styles:"box-sizing:border-box;display:grid;grid-template-columns:repeat( 3, 1fr )"}),pointBase=props=>(0,emotion_react_browser_esm.iv)("background:currentColor;box-sizing:border-box;display:grid;margin:auto;transition:all 120ms linear;",(0,reduce_motion.r)("transition")," ",(_ref3=>{let{isActive:isActive}=_ref3;const boxShadow=isActive?`0 0 0 2px ${colors_values.D.gray[900]}`:null,pointColor=isActive?colors_values.D.gray[900]:colors_values.D.gray[400],pointColorHover=isActive?colors_values.D.gray[900]:colors_values.D.ui.theme;return(0,emotion_react_browser_esm.iv)("box-shadow:",boxShadow,";color:",pointColor,";*:hover>&{color:",pointColorHover,";}","","","")})(props),";","","",""),Point=(0,emotion_styled_base_browser_esm.Z)("span",{target:"ecapk1j1"})("height:6px;width:6px;",pointBase,";"),Cell=(0,emotion_styled_base_browser_esm.Z)("span",{target:"ecapk1j0"})({name:"rjf3ub",styles:"appearance:none;border:none;box-sizing:border-box;margin:0;display:flex;position:relative;outline:none;align-items:center;justify-content:center;padding:0"});function cell_Cell(_ref){let{isActive:isActive=!1,value:value,...props}=_ref;const tooltipText=ALIGNMENT_LABEL[value];return(0,react.createElement)(tooltip.Z,{text:tooltipText},(0,react.createElement)(CompositeItem.A,(0,esm_extends.Z)({as:Cell,role:"gridcell"},props),(0,react.createElement)(visually_hidden_component.Z,null,value),(0,react.createElement)(Point,{isActive:isActive,role:"presentation"})))}(0,emotion_styled_base_browser_esm.Z)("div",{target:"erowt52"})({name:"ogl07i",styles:"box-sizing:border-box;padding:2px"});const alignment_matrix_control_icon_styles_Root=(0,emotion_styled_base_browser_esm.Z)("div",{target:"erowt51"})("transform-origin:top left;height:100%;width:100%;",rootBase,";",(()=>(0,emotion_react_browser_esm.iv)({gridTemplateRows:"repeat( 3, calc( 21px / 3))",padding:1.5,maxHeight:24,maxWidth:24},"","","","")),";",(_ref=>{let{disablePointerEvents:disablePointerEvents}=_ref;return(0,emotion_react_browser_esm.iv)({pointerEvents:disablePointerEvents?"none":void 0},"","","","")}),";"),alignment_matrix_control_icon_styles_Point=(0,emotion_styled_base_browser_esm.Z)("span",{target:"erowt50"})("height:2px;width:2px;",pointBase,";",(_ref2=>{let{isActive:isActive}=_ref2;const boxShadow=isActive?"0 0 0 1px currentColor":null;return(0,emotion_react_browser_esm.iv)("box-shadow:",boxShadow,";color:currentColor;*:hover>&{color:currentColor;}","","","")}),";"),alignment_matrix_control_icon_styles_Cell=Cell,BASE_SIZE=24;var icon=function AlignmentMatrixControlIcon(_ref){let{className:className,disablePointerEvents:disablePointerEvents=!0,size:size=BASE_SIZE,style:style={},value:value="center",...props}=_ref;const alignIndex=function getAlignmentIndex(){const item=transformValue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"center"),index=ALIGNMENTS.indexOf(item);return index>-1?index:void 0}(value),scale=(size/BASE_SIZE).toFixed(2),classes=classnames_default()("component-alignment-matrix-control-icon",className),styles={...style,transform:`scale(${scale})`};return(0,react.createElement)(alignment_matrix_control_icon_styles_Root,(0,esm_extends.Z)({},props,{className:classes,disablePointerEvents:disablePointerEvents,role:"presentation",style:styles}),ALIGNMENTS.map(((align,index)=>{const isActive=alignIndex===index;return(0,react.createElement)(alignment_matrix_control_icon_styles_Cell,{key:align},(0,react.createElement)(alignment_matrix_control_icon_styles_Point,{isActive:isActive}))})))};const alignment_matrix_control_noop=()=>{};function AlignmentMatrixControl(_ref){let{className:className,id:id,label:label=(0,i18n_build_module.__)("Alignment Matrix Control"),defaultValue:defaultValue="center center",value:value,onChange:onChange=alignment_matrix_control_noop,width:width=92,...props}=_ref;const[immutableDefaultValue]=(0,react.useState)(null!=value?value:defaultValue),baseId=function useBaseId(id){const instanceId=(0,use_instance_id.Z)(AlignmentMatrixControl,"alignment-matrix-control");return id||instanceId}(id),initialCurrentId=getItemId(baseId,immutableDefaultValue),composite=(0,CompositeState.u)({baseId:baseId,currentId:initialCurrentId,rtl:(0,i18n_build_module.dZ)()}),{setCurrentId:setCurrentId}=composite;(0,react.useEffect)((()=>{void 0!==value&&setCurrentId(getItemId(baseId,value))}),[value,setCurrentId,baseId]);const classes=classnames_default()("component-alignment-matrix-control",className);return(0,react.createElement)(Composite.b,(0,esm_extends.Z)({},props,composite,{"aria-label":label,as:alignment_matrix_control_styles_Root,className:classes,role:"grid",size:width}),GRID.map(((cells,index)=>(0,react.createElement)(CompositeGroup.E,(0,esm_extends.Z)({},composite,{as:Row,role:"row",key:index}),cells.map((cell=>{const cellId=getItemId(baseId,cell),isActive=composite.currentId===cellId;return(0,react.createElement)(cell_Cell,(0,esm_extends.Z)({},composite,{id:cellId,isActive:isActive,key:cell,value:cell,onFocus:()=>{onChange(cell)},tabIndex:isActive?0:-1}))}))))))}AlignmentMatrixControl.Icon=icon;var alignment_matrix_control=AlignmentMatrixControl;const block_alignment_matrix_control_noop=()=>{};var block_alignment_matrix_control=function BlockAlignmentMatrixControl(props){const{label:label=(0,i18n_build_module.__)("Change matrix alignment"),onChange:onChange=block_alignment_matrix_control_noop,value:value="center",isDisabled:isDisabled}=props,icon=(0,react.createElement)(alignment_matrix_control.Icon,{value:value});return(0,react.createElement)(dropdown.Z,{position:"bottom right",popoverProps:{variant:"toolbar"},renderToggle:_ref=>{let{onToggle:onToggle,isOpen:isOpen}=_ref;return(0,react.createElement)(toolbar_button.Z,{onClick:onToggle,"aria-haspopup":"true","aria-expanded":isOpen,onKeyDown:event=>{isOpen||event.keyCode!==keycodes_build_module.WV||(event.preventDefault(),onToggle())},label:label,icon:icon,showTooltip:!0,disabled:isDisabled})},renderContent:()=>(0,react.createElement)(alignment_matrix_control,{hasFocusBorder:!1,onChange:onChange,value:value})})},build_module_placeholder=__webpack_require__("./packages/components/build-module/placeholder/index.js"),layout=__webpack_require__("./packages/icons/build-module/library/layout.js");var block_variation_picker=function BlockVariationPicker(_ref){let{icon:icon=layout.Z,label:label=(0,i18n_build_module.__)("Choose variation"),instructions:instructions=(0,i18n_build_module.__)("Select a variation to start with."),variations:variations,onSelect:onSelect,allowSkip:allowSkip}=_ref;const classes=classnames_default()("block-editor-block-variation-picker",{"has-many-variations":variations.length>4});return(0,react.createElement)(build_module_placeholder.Z,{icon:icon,label:label,instructions:instructions,className:classes},(0,react.createElement)("ul",{className:"block-editor-block-variation-picker__variations",role:"list","aria-label":(0,i18n_build_module.__)("Block variations")},variations.map((variation=>(0,react.createElement)("li",{key:variation.name},(0,react.createElement)(build_module_button.Z,{variant:"secondary",icon:variation.icon,iconSize:48,onClick:()=>onSelect(variation),className:"block-editor-block-variation-picker__variation",label:variation.description||variation.title}),(0,react.createElement)("span",{className:"block-editor-block-variation-picker__variation-label"},variation.title))))),allowSkip&&(0,react.createElement)("div",{className:"block-editor-block-variation-picker__skip"},(0,react.createElement)(build_module_button.Z,{variant:"link",onClick:()=>onSelect()},(0,i18n_build_module.__)("Skip"))))},grid=__webpack_require__("./packages/icons/build-module/library/grid.js");const VIEWMODES={carousel:"carousel",grid:"grid"},Actions=_ref=>{let{onBlockPatternSelect:onBlockPatternSelect}=_ref;return(0,react.createElement)("div",{className:"block-editor-block-pattern-setup__actions"},(0,react.createElement)(build_module_button.Z,{variant:"primary",onClick:onBlockPatternSelect},(0,i18n_build_module.__)("Choose")))},CarouselNavigation=_ref2=>{let{handlePrevious:handlePrevious,handleNext:handleNext,activeSlide:activeSlide,totalSlides:totalSlides}=_ref2;return(0,react.createElement)("div",{className:"block-editor-block-pattern-setup__navigation"},(0,react.createElement)(build_module_button.Z,{icon:chevron_left.Z,label:(0,i18n_build_module.__)("Previous pattern"),onClick:handlePrevious,disabled:0===activeSlide}),(0,react.createElement)(build_module_button.Z,{icon:chevron_right.Z,label:(0,i18n_build_module.__)("Next pattern"),onClick:handleNext,disabled:activeSlide===totalSlides-1}))};var setup_toolbar=_ref3=>{let{viewMode:viewMode,setViewMode:setViewMode,handlePrevious:handlePrevious,handleNext:handleNext,activeSlide:activeSlide,totalSlides:totalSlides,onBlockPatternSelect:onBlockPatternSelect}=_ref3;const isCarouselView=viewMode===VIEWMODES.carousel,displayControls=(0,react.createElement)("div",{className:"block-editor-block-pattern-setup__display-controls"},(0,react.createElement)(build_module_button.Z,{icon:stretch_full_width,label:(0,i18n_build_module.__)("Carousel view"),onClick:()=>setViewMode(VIEWMODES.carousel),isPressed:isCarouselView}),(0,react.createElement)(build_module_button.Z,{icon:grid.Z,label:(0,i18n_build_module.__)("Grid view"),onClick:()=>setViewMode(VIEWMODES.grid),isPressed:viewMode===VIEWMODES.grid}));return(0,react.createElement)("div",{className:"block-editor-block-pattern-setup__toolbar"},isCarouselView&&(0,react.createElement)(CarouselNavigation,{handlePrevious:handlePrevious,handleNext:handleNext,activeSlide:activeSlide,totalSlides:totalSlides}),displayControls,isCarouselView&&(0,react.createElement)(Actions,{onBlockPatternSelect:onBlockPatternSelect}))};var use_patterns_setup=function usePatternsSetup(clientId,blockName,filterPatternsFn){return(0,use_select.Z)((select=>{const{getBlockRootClientId:getBlockRootClientId,__experimentalGetPatternsByBlockTypes:__experimentalGetPatternsByBlockTypes,__experimentalGetAllowedPatterns:__experimentalGetAllowedPatterns}=select(store),rootClientId=getBlockRootClientId(clientId);return filterPatternsFn?__experimentalGetAllowedPatterns(rootClientId).filter(filterPatternsFn):__experimentalGetPatternsByBlockTypes(blockName,rootClientId)}),[clientId,blockName,filterPatternsFn])};const SetupContent=_ref=>{let{viewMode:viewMode,activeSlide:activeSlide,patterns:patterns,onBlockPatternSelect:onBlockPatternSelect}=_ref;const composite=(0,CompositeState.u)(),containerClass="block-editor-block-pattern-setup__container";if(viewMode===VIEWMODES.carousel){const slideClass=new Map([[activeSlide,"active-slide"],[activeSlide-1,"previous-slide"],[activeSlide+1,"next-slide"]]);return(0,react.createElement)("div",{className:"block-editor-block-pattern-setup__carousel"},(0,react.createElement)("div",{className:containerClass},(0,react.createElement)("ul",{className:"carousel-container"},patterns.map(((pattern,index)=>(0,react.createElement)(BlockPatternSlide,{className:slideClass.get(index)||"",key:pattern.name,pattern:pattern}))))))}return(0,react.createElement)("div",{className:"block-editor-block-pattern-setup__grid"},(0,react.createElement)(Composite.b,(0,esm_extends.Z)({},composite,{role:"listbox",className:containerClass,"aria-label":(0,i18n_build_module.__)("Patterns list")}),patterns.map((pattern=>(0,react.createElement)(block_pattern_setup_BlockPattern,{key:pattern.name,pattern:pattern,onSelect:onBlockPatternSelect,composite:composite})))))};function block_pattern_setup_BlockPattern(_ref2){let{pattern:pattern,onSelect:onSelect,composite:composite}=_ref2;const baseClassName="block-editor-block-pattern-setup-list",{blocks:blocks,description:description,viewportWidth:viewportWidth=700}=pattern,descriptionId=(0,use_instance_id.Z)(block_pattern_setup_BlockPattern,`${baseClassName}__item-description`);return(0,react.createElement)("div",{className:`${baseClassName}__list-item`,"aria-label":pattern.title,"aria-describedby":pattern.description?descriptionId:void 0},(0,react.createElement)(CompositeItem.A,(0,esm_extends.Z)({role:"option",as:"div"},composite,{className:`${baseClassName}__item`,onClick:()=>onSelect(blocks)}),(0,react.createElement)(block_preview,{blocks:blocks,viewportWidth:viewportWidth})),!!description&&(0,react.createElement)(visually_hidden_component.Z,{id:descriptionId},description))}function BlockPatternSlide(_ref3){let{className:className,pattern:pattern,minHeight:minHeight}=_ref3;const{blocks:blocks,title:title,description:description}=pattern,descriptionId=(0,use_instance_id.Z)(BlockPatternSlide,"block-editor-block-pattern-setup-list__item-description");return(0,react.createElement)("li",{className:`pattern-slide ${className}`,"aria-label":title,"aria-describedby":description?descriptionId:void 0},(0,react.createElement)(block_preview,{blocks:blocks,__experimentalMinHeight:minHeight}),!!description&&(0,react.createElement)(visually_hidden_component.Z,{id:descriptionId},description))}var block_pattern_setup=_ref4=>{let{clientId:clientId,blockName:blockName,filterPatternsFn:filterPatternsFn,onBlockPatternSelect:onBlockPatternSelect,initialViewMode:initialViewMode=VIEWMODES.carousel}=_ref4;const[viewMode,setViewMode]=(0,react.useState)(initialViewMode),[activeSlide,setActiveSlide]=(0,react.useState)(0),{replaceBlock:replaceBlock}=(0,use_dispatch.Z)(store),patterns=use_patterns_setup(clientId,blockName,filterPatternsFn);if(null==patterns||!patterns.length)return null;const onPatternSelectCallback=onBlockPatternSelect||(blocks=>{const clonedBlocks=blocks.map((block=>(0,build_module.Wm)(block)));replaceBlock(clientId,clonedBlocks)});return(0,react.createElement)(react.Fragment,null,(0,react.createElement)("div",{className:`block-editor-block-pattern-setup view-mode-${viewMode}`},(0,react.createElement)(SetupContent,{viewMode:viewMode,activeSlide:activeSlide,patterns:patterns,onBlockPatternSelect:onPatternSelectCallback}),(0,react.createElement)(setup_toolbar,{viewMode:viewMode,setViewMode:setViewMode,activeSlide:activeSlide,totalSlides:patterns.length,handleNext:()=>{setActiveSlide((active=>active+1))},handlePrevious:()=>{setActiveSlide((active=>active-1))},onBlockPatternSelect:()=>{onPatternSelectCallback(patterns[activeSlide].blocks)}})))},components_color_palette=(0,create_higher_order_component.o)((WrappedComponent=>props=>{const colorsFeature=use_setting_useSetting("color.palette"),disableCustomColorsFeature=!use_setting_useSetting("color.custom"),colors=void 0===props.colors?colorsFeature:props.colors,disableCustomColors=void 0===props.disableCustomColors?disableCustomColorsFeature:props.disableCustomColors,hasColorsToChoose=!(0,lodash.isEmpty)(colors)||!disableCustomColors;return(0,react.createElement)(WrappedComponent,(0,esm_extends.Z)({},props,{colors:colors,disableCustomColors:disableCustomColors,hasColorsToChoose:hasColorsToChoose}))}),"withColorContext")(color_palette),date_build_module=__webpack_require__("./packages/date/build-module/index.js");const EXAMPLE_DATE=new Date(2022,0,25);function DateFormatPicker(_ref){let{format:format,defaultFormat:defaultFormat,onChange:onChange}=_ref;return(0,react.createElement)("fieldset",{className:"block-editor-date-format-picker"},(0,react.createElement)(visually_hidden_component.Z,{as:"legend"},(0,i18n_build_module.__)("Date format")),(0,react.createElement)(toggle_control.Z,{label:(0,react.createElement)(react.Fragment,null,(0,i18n_build_module.__)("Default format"),(0,react.createElement)("span",{className:"block-editor-date-format-picker__default-format-toggle-control__hint"},(0,date_build_module.K_)(defaultFormat,EXAMPLE_DATE))),checked:!format,onChange:checked=>onChange(checked?null:defaultFormat)}),format&&(0,react.createElement)(NonDefaultControls,{format:format,onChange:onChange}))}function NonDefaultControls(_ref2){var _suggestedOptions$fin;let{format:format,onChange:onChange}=_ref2;const suggestedFormats=[...new Set(["Y-m-d",(0,i18n_build_module._x)("n/j/Y","short date format"),(0,i18n_build_module._x)("n/j/Y g:i A","short date format with time"),(0,i18n_build_module._x)("M j, Y","medium date format"),(0,i18n_build_module._x)("M j, Y g:i A","medium date format with time"),(0,i18n_build_module._x)("F j, Y","long date format"),(0,i18n_build_module._x)("M j","short date format without the year")])],suggestedOptions=suggestedFormats.map(((suggestedFormat,index)=>({key:`suggested-${index}`,name:(0,date_build_module.K_)(suggestedFormat,EXAMPLE_DATE),format:suggestedFormat}))),customOption={key:"custom",name:(0,i18n_build_module.__)("Custom"),className:"block-editor-date-format-picker__custom-format-select-control__custom-option",__experimentalHint:(0,i18n_build_module.__)("Enter your own date format")},[isCustom,setIsCustom]=(0,react.useState)((()=>!!format&&!suggestedFormats.includes(format)));return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(base_control.ZP,{className:"block-editor-date-format-picker__custom-format-select-control"},(0,react.createElement)(custom_select_control.Z,{__nextUnconstrainedWidth:!0,label:(0,i18n_build_module.__)("Choose a format"),options:[...suggestedOptions,customOption],value:isCustom?customOption:null!==(_suggestedOptions$fin=suggestedOptions.find((option=>option.format===format)))&&void 0!==_suggestedOptions$fin?_suggestedOptions$fin:customOption,onChange:_ref3=>{let{selectedItem:selectedItem}=_ref3;selectedItem===customOption?setIsCustom(!0):(setIsCustom(!1),onChange(selectedItem.format))}})),isCustom&&(0,react.createElement)(text_control.Z,{label:(0,i18n_build_module.__)("Custom format"),hideLabelFromVision:!0,help:(0,create_interpolate_element.Z)((0,i18n_build_module.__)("Enter a date or time <Link>format string</Link>."),{Link:(0,react.createElement)(external_link.Z,{href:(0,i18n_build_module.__)("https://wordpress.org/support/article/formatting-date-and-time/")})}),value:format,onChange:value=>onChange(value)}))}var react_easy_crop_index_module=__webpack_require__("./node_modules/react-easy-crop/index.module.js");const image_editor_constants_POPOVER_PROPS={position:"bottom right",variant:"toolbar"};var api_fetch_build_module=__webpack_require__("./packages/api-fetch/build-module/index.js"),strip_html=__webpack_require__("./packages/dom/build-module/dom/strip-html.js");function useTransformImage(imageProperties,isEditing){const transformState=function useTransformState(_ref){let{url:url,naturalWidth:naturalWidth,naturalHeight:naturalHeight}=_ref;const[editedUrl,setEditedUrl]=(0,react.useState)(),[crop,setCrop]=(0,react.useState)(),[position,setPosition]=(0,react.useState)({x:0,y:0}),[zoom,setZoom]=(0,react.useState)(),[rotation,setRotation]=(0,react.useState)(),[aspect,setAspect]=(0,react.useState)(),[defaultAspect,setDefaultAspect]=(0,react.useState)(),initializeTransformValues=(0,react.useCallback)((()=>{setPosition({x:0,y:0}),setZoom(100),setRotation(0),setAspect(naturalWidth/naturalHeight),setDefaultAspect(naturalWidth/naturalHeight)}),[naturalWidth,naturalHeight,setPosition,setZoom,setRotation,setAspect,setDefaultAspect]),rotateClockwise=(0,react.useCallback)((()=>{const angle=(rotation+90)%360;let naturalAspectRatio=naturalWidth/naturalHeight;if(rotation%180==90&&(naturalAspectRatio=naturalHeight/naturalWidth),0===angle)return setEditedUrl(),setRotation(angle),setAspect(naturalWidth/naturalHeight),void setPosition({x:-position.y*naturalAspectRatio,y:position.x*naturalAspectRatio});const el=new window.Image;el.src=url,el.onload=function editImage(event){const canvas=document.createElement("canvas");let translateX=0,translateY=0;angle%180?(canvas.width=event.target.height,canvas.height=event.target.width):(canvas.width=event.target.width,canvas.height=event.target.height),90!==angle&&180!==angle||(translateX=canvas.width),270!==angle&&180!==angle||(translateY=canvas.height);const context=canvas.getContext("2d");context.translate(translateX,translateY),context.rotate(angle*Math.PI/180),context.drawImage(event.target,0,0),canvas.toBlob((blob=>{setEditedUrl(URL.createObjectURL(blob)),setRotation(angle),setAspect(canvas.width/canvas.height),setPosition({x:-position.y*naturalAspectRatio,y:position.x*naturalAspectRatio})}))};const imgCrossOrigin=(0,hooks_build_module.O)("media.crossOrigin",void 0,url);"string"==typeof imgCrossOrigin&&(el.crossOrigin=imgCrossOrigin)}),[rotation,naturalWidth,naturalHeight,setEditedUrl,setRotation,setAspect,setPosition]);return(0,react.useMemo)((()=>({editedUrl:editedUrl,setEditedUrl:setEditedUrl,crop:crop,setCrop:setCrop,position:position,setPosition:setPosition,zoom:zoom,setZoom:setZoom,rotation:rotation,setRotation:setRotation,rotateClockwise:rotateClockwise,aspect:aspect,setAspect:setAspect,defaultAspect:defaultAspect,initializeTransformValues:initializeTransformValues})),[editedUrl,setEditedUrl,crop,setCrop,position,setPosition,zoom,setZoom,rotation,setRotation,rotateClockwise,aspect,setAspect,defaultAspect,initializeTransformValues])}(imageProperties),{initializeTransformValues:initializeTransformValues}=transformState;return(0,react.useEffect)((()=>{isEditing&&initializeTransformValues()}),[isEditing,initializeTransformValues]),transformState}const ImageEditingContext=(0,react.createContext)({}),useImageEditingContext=()=>(0,react.useContext)(ImageEditingContext);function ImageEditingProvider(_ref){let{id:id,url:url,naturalWidth:naturalWidth,naturalHeight:naturalHeight,isEditing:isEditing,onFinishEditing:onFinishEditing,onSaveImage:onSaveImage,children:children}=_ref;const transformImage=useTransformImage({url:url,naturalWidth:naturalWidth,naturalHeight:naturalHeight},isEditing),saveImage=function useSaveImage(_ref){let{crop:crop,rotation:rotation,height:height,width:width,aspect:aspect,url:url,id:id,onSaveImage:onSaveImage,onFinishEditing:onFinishEditing}=_ref;const{createErrorNotice:createErrorNotice}=(0,use_dispatch.Z)(notices_build_module.h),[isInProgress,setIsInProgress]=(0,react.useState)(!1),cancel=(0,react.useCallback)((()=>{setIsInProgress(!1),onFinishEditing()}),[setIsInProgress,onFinishEditing]),apply=(0,react.useCallback)((()=>{setIsInProgress(!0);let attrs={};(crop.width<99.9||crop.height<99.9)&&(attrs=crop),rotation>0&&(attrs.rotation=rotation),attrs.src=url,(0,api_fetch_build_module.Z)({path:`/wp/v2/media/${id}/edit`,method:"POST",data:attrs}).then((response=>{onSaveImage({id:response.id,url:response.source_url,height:height&&width?width/aspect:void 0})})).catch((error=>{createErrorNotice((0,i18n_build_module.gB)((0,i18n_build_module.__)("Could not edit image. %s"),(0,strip_html.Z)(error.message)),{id:"image-editing-error",type:"snackbar"})})).finally((()=>{setIsInProgress(!1),onFinishEditing()}))}),[setIsInProgress,crop,rotation,height,width,aspect,url,onSaveImage,createErrorNotice,setIsInProgress,onFinishEditing]);return(0,react.useMemo)((()=>({isInProgress:isInProgress,apply:apply,cancel:cancel})),[isInProgress,apply,cancel])}({id:id,url:url,onSaveImage:onSaveImage,onFinishEditing:onFinishEditing,...transformImage}),providerValue=(0,react.useMemo)((()=>({...transformImage,...saveImage})),[transformImage,saveImage]);return(0,react.createElement)(ImageEditingContext.Provider,{value:providerValue},children)}function ImageCropper(_ref){let{url:url,width:width,height:height,clientWidth:clientWidth,naturalHeight:naturalHeight,naturalWidth:naturalWidth,borderProps:borderProps}=_ref;const{isInProgress:isInProgress,editedUrl:editedUrl,position:position,zoom:zoom,aspect:aspect,setPosition:setPosition,setCrop:setCrop,setZoom:setZoom,rotation:rotation}=useImageEditingContext();let editedHeight=height||clientWidth*naturalHeight/naturalWidth;return rotation%180==90&&(editedHeight=clientWidth*naturalWidth/naturalHeight),(0,react.createElement)("div",{className:classnames_default()("wp-block-image__crop-area",null==borderProps?void 0:borderProps.className,{"is-applying":isInProgress}),style:{...null==borderProps?void 0:borderProps.style,width:width||clientWidth,height:editedHeight}},(0,react.createElement)(react_easy_crop_index_module.ZP,{image:editedUrl||url,disabled:isInProgress,minZoom:1,maxZoom:3,crop:position,zoom:zoom/100,aspect:aspect,onCropChange:setPosition,onCropComplete:newCropPercent=>{setCrop(newCropPercent)},onZoomChange:newZoom=>{setZoom(100*newZoom)}}),isInProgress&&(0,react.createElement)(spinner.ZP,null))}var search=__webpack_require__("./packages/icons/build-module/library/search.js");function ZoomDropdown(){const{isInProgress:isInProgress,zoom:zoom,setZoom:setZoom}=useImageEditingContext();return(0,react.createElement)(dropdown.Z,{contentClassName:"wp-block-image__zoom",popoverProps:image_editor_constants_POPOVER_PROPS,renderToggle:_ref=>{let{isOpen:isOpen,onToggle:onToggle}=_ref;return(0,react.createElement)(toolbar_button.Z,{icon:search.Z,label:(0,i18n_build_module.__)("Zoom"),onClick:onToggle,"aria-expanded":isOpen,disabled:isInProgress})},renderContent:()=>(0,react.createElement)(range_control.Z,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Zoom"),min:100,max:300,value:Math.round(zoom),onChange:setZoom})})}var aspect_ratio=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M18.5 5.5h-13c-1.1 0-2 .9-2 2v9c0 1.1.9 2 2 2h13c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2zm.5 11c0 .3-.2.5-.5.5h-13c-.3 0-.5-.2-.5-.5v-9c0-.3.2-.5.5-.5h13c.3 0 .5.2.5.5v9zM6.5 12H8v-2h2V8.5H6.5V12zm9.5 2h-2v1.5h3.5V12H16v2z"}));function AspectGroup(_ref){let{aspectRatios:aspectRatios,isDisabled:isDisabled,label:label,onClick:onClick,value:value}=_ref;return(0,react.createElement)(menu_group.Z,{label:label},aspectRatios.map((_ref2=>{let{title:title,aspect:aspect}=_ref2;return(0,react.createElement)(menu_item.Z,{key:aspect,disabled:isDisabled,onClick:()=>{onClick(aspect)},role:"menuitemradio",isSelected:aspect===value,icon:aspect===value?library_check.Z:void 0},title)})))}function AspectRatioDropdown(_ref3){let{toggleProps:toggleProps}=_ref3;const{isInProgress:isInProgress,aspect:aspect,setAspect:setAspect,defaultAspect:defaultAspect}=useImageEditingContext();return(0,react.createElement)(dropdown_menu.Z,{icon:aspect_ratio,label:(0,i18n_build_module.__)("Aspect Ratio"),popoverProps:image_editor_constants_POPOVER_PROPS,toggleProps:toggleProps,className:"wp-block-image__aspect-ratio"},(_ref4=>{let{onClose:onClose}=_ref4;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(AspectGroup,{isDisabled:isInProgress,onClick:newAspect=>{setAspect(newAspect),onClose()},value:aspect,aspectRatios:[{title:(0,i18n_build_module.__)("Original"),aspect:defaultAspect},{title:(0,i18n_build_module.__)("Square"),aspect:1}]}),(0,react.createElement)(AspectGroup,{label:(0,i18n_build_module.__)("Landscape"),isDisabled:isInProgress,onClick:newAspect=>{setAspect(newAspect),onClose()},value:aspect,aspectRatios:[{title:(0,i18n_build_module.__)("16:10"),aspect:1.6},{title:(0,i18n_build_module.__)("16:9"),aspect:16/9},{title:(0,i18n_build_module.__)("4:3"),aspect:4/3},{title:(0,i18n_build_module.__)("3:2"),aspect:1.5}]}),(0,react.createElement)(AspectGroup,{label:(0,i18n_build_module.__)("Portrait"),isDisabled:isInProgress,onClick:newAspect=>{setAspect(newAspect),onClose()},value:aspect,aspectRatios:[{title:(0,i18n_build_module.__)("10:16"),aspect:.625},{title:(0,i18n_build_module.__)("9:16"),aspect:9/16},{title:(0,i18n_build_module.__)("3:4"),aspect:3/4},{title:(0,i18n_build_module.__)("2:3"),aspect:2/3}]}))}))}var rotate_right=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M15.1 4.8l-3-2.5V4c-4.4 0-8 3.6-8 8 0 3.7 2.5 6.9 6 7.7.3.1.6.1 1 .2l.2-1.5c-.4 0-.7-.1-1.1-.2l-.1.2v-.2c-2.6-.8-4.5-3.3-4.5-6.2 0-3.6 2.9-6.5 6.5-6.5v1.8l3-2.5zM20 11c-.2-1.4-.7-2.7-1.6-3.8l-1.2.8c.7.9 1.1 2 1.3 3.1L20 11zm-1.5 1.8c-.1.5-.2 1.1-.4 1.6s-.5 1-.8 1.5l1.2.9c.4-.5.8-1.1 1-1.8s.5-1.3.5-2l-1.5-.2zm-5.6 5.6l.2 1.5c1.4-.2 2.7-.7 3.8-1.6l-.9-1.1c-.9.7-2 1.1-3.1 1.2z"}));function RotationButton(){const{isInProgress:isInProgress,rotateClockwise:rotateClockwise}=useImageEditingContext();return(0,react.createElement)(toolbar_button.Z,{icon:rotate_right,label:(0,i18n_build_module.__)("Rotate"),onClick:rotateClockwise,disabled:isInProgress})}function FormControls(){const{isInProgress:isInProgress,apply:apply,cancel:cancel}=useImageEditingContext();return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(toolbar_button.Z,{onClick:apply,disabled:isInProgress},(0,i18n_build_module.__)("Apply")),(0,react.createElement)(toolbar_button.Z,{onClick:cancel},(0,i18n_build_module.__)("Cancel")))}function ImageEditor(_ref){let{url:url,width:width,height:height,clientWidth:clientWidth,naturalHeight:naturalHeight,naturalWidth:naturalWidth,borderProps:borderProps}=_ref;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(ImageCropper,{borderProps:borderProps,url:url,width:width,height:height,clientWidth:clientWidth,naturalHeight:naturalHeight,naturalWidth:naturalWidth}),(0,react.createElement)(block_controls,null,(0,react.createElement)(toolbar_group.Z,null,(0,react.createElement)(ZoomDropdown,null),(0,react.createElement)(toolbar_item.Z,null,(toggleProps=>(0,react.createElement)(AspectRatioDropdown,{toggleProps:toggleProps}))),(0,react.createElement)(RotationButton,null)),(0,react.createElement)(toolbar_group.Z,null,(0,react.createElement)(FormControls,null))))}const IMAGE_SIZE_PRESETS=[25,50,75,100],image_size_control_noop=()=>{};function ImageSizeControl(_ref){let{imageSizeHelp:imageSizeHelp,imageWidth:imageWidth,imageHeight:imageHeight,imageSizeOptions:imageSizeOptions=[],isResizable:isResizable=!0,slug:slug,width:width,height:height,onChange:onChange,onChangeImage:onChangeImage=image_size_control_noop}=_ref;const{currentHeight:currentHeight,currentWidth:currentWidth,updateDimension:updateDimension,updateDimensions:updateDimensions}=function useDimensionHandler(customHeight,customWidth,defaultHeight,defaultWidth,onChange){var _ref,_ref2;const[currentWidth,setCurrentWidth]=(0,react.useState)(null!==(_ref=null!=customWidth?customWidth:defaultWidth)&&void 0!==_ref?_ref:""),[currentHeight,setCurrentHeight]=(0,react.useState)(null!==(_ref2=null!=customHeight?customHeight:defaultHeight)&&void 0!==_ref2?_ref2:"");return(0,react.useEffect)((()=>{void 0===customWidth&&void 0!==defaultWidth&&setCurrentWidth(defaultWidth),void 0===customHeight&&void 0!==defaultHeight&&setCurrentHeight(defaultHeight)}),[defaultWidth,defaultHeight]),(0,react.useEffect)((()=>{void 0!==customWidth&&Number.parseInt(customWidth)!==Number.parseInt(currentWidth)&&setCurrentWidth(customWidth),void 0!==customHeight&&Number.parseInt(customHeight)!==Number.parseInt(currentHeight)&&setCurrentHeight(customHeight)}),[customWidth,customHeight]),{currentHeight:currentHeight,currentWidth:currentWidth,updateDimension:(dimension,value)=>{"width"===dimension?setCurrentWidth(value):setCurrentHeight(value),onChange({[dimension]:""===value?void 0:parseInt(value,10)})},updateDimensions:(nextHeight,nextWidth)=>{setCurrentHeight(null!=nextHeight?nextHeight:defaultHeight),setCurrentWidth(null!=nextWidth?nextWidth:defaultWidth),onChange({height:nextHeight,width:nextWidth})}}}(height,width,imageHeight,imageWidth,onChange);return(0,react.createElement)(react.Fragment,null,!(0,lodash.isEmpty)(imageSizeOptions)&&(0,react.createElement)(select_control.Z,{label:(0,i18n_build_module.__)("Image size"),value:slug,options:imageSizeOptions,onChange:onChangeImage,help:imageSizeHelp}),isResizable&&(0,react.createElement)("div",{className:"block-editor-image-size-control"},(0,react.createElement)("p",{className:"block-editor-image-size-control__row"},(0,i18n_build_module.__)("Image dimensions")),(0,react.createElement)("div",{className:"block-editor-image-size-control__row"},(0,react.createElement)(text_control.Z,{type:"number",className:"block-editor-image-size-control__width",label:(0,i18n_build_module.__)("Width"),value:currentWidth,min:1,onChange:value=>updateDimension("width",value)}),(0,react.createElement)(text_control.Z,{type:"number",className:"block-editor-image-size-control__height",label:(0,i18n_build_module.__)("Height"),value:currentHeight,min:1,onChange:value=>updateDimension("height",value)})),(0,react.createElement)("div",{className:"block-editor-image-size-control__row"},(0,react.createElement)(button_group.Z,{"aria-label":(0,i18n_build_module.__)("Image size presets")},IMAGE_SIZE_PRESETS.map((scale=>{const scaledWidth=Math.round(imageWidth*(scale/100)),scaledHeight=Math.round(imageHeight*(scale/100)),isCurrent=currentWidth===scaledWidth&&currentHeight===scaledHeight;return(0,react.createElement)(build_module_button.Z,{key:scale,isSmall:!0,variant:isCurrent?"primary":void 0,isPressed:isCurrent,onClick:()=>updateDimensions(scaledHeight,scaledWidth)},scale,"%")}))),(0,react.createElement)(build_module_button.Z,{isSmall:!0,onClick:()=>updateDimensions()},(0,i18n_build_module.__)("Reset")))))}var keyboard_return=__webpack_require__("./packages/icons/build-module/library/keyboard-return.js");const settings_drawer_noop=()=>{};var settings_drawer=_ref=>{let{value:value,onChange:onChange=settings_drawer_noop,settings:settings}=_ref;if(!settings||!settings.length)return null;const handleSettingChange=setting=>newValue=>{onChange({...value,[setting.id]:newValue})},theSettings=settings.map((setting=>(0,react.createElement)(toggle_control.Z,{className:"block-editor-link-control__setting",key:setting.id,label:setting.title,onChange:handleSettingChange(setting),checked:!!value&&!!value[setting.id]})));return(0,react.createElement)("fieldset",{className:"block-editor-link-control__settings"},(0,react.createElement)(visually_hidden_component.Z,{as:"legend"},(0,i18n_build_module.__)("Currently selected link settings")),theSettings)},dom_scroll_into_view_lib=__webpack_require__("./node_modules/dom-scroll-into-view/lib/index.js"),lib_default=__webpack_require__.n(dom_scroll_into_view_lib),with_spoken_messages=__webpack_require__("./packages/components/build-module/higher-order/with-spoken-messages/index.js"),debounce=__webpack_require__("./packages/compose/build-module/utils/debounce/index.js"),with_safe_timeout=__webpack_require__("./packages/compose/build-module/higher-order/with-safe-timeout/index.js"),with_instance_id=__webpack_require__("./packages/compose/build-module/higher-order/with-instance-id/index.js"),is_url=__webpack_require__("./packages/url/build-module/is-url.js");function isFunction(maybeFunc){return"function"==typeof maybeFunc}class URLInput extends react.Component{constructor(props){super(props),this.onChange=this.onChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.selectLink=this.selectLink.bind(this),this.handleOnClick=this.handleOnClick.bind(this),this.bindSuggestionNode=this.bindSuggestionNode.bind(this),this.autocompleteRef=props.autocompleteRef||(0,react.createRef)(),this.inputRef=(0,react.createRef)(),this.updateSuggestions=(0,debounce.D)(this.updateSuggestions.bind(this),200),this.suggestionNodes=[],this.suggestionsRequest=null,this.state={suggestions:[],showSuggestions:!1,isUpdatingSuggestions:!1,suggestionsValue:null,selectedSuggestion:null,suggestionsListboxId:"",suggestionOptionIdPrefix:""}}componentDidUpdate(prevProps){const{showSuggestions:showSuggestions,selectedSuggestion:selectedSuggestion}=this.state,{value:value,__experimentalShowInitialSuggestions:__experimentalShowInitialSuggestions=!1}=this.props;showSuggestions&&null!==selectedSuggestion&&this.suggestionNodes[selectedSuggestion]&&!this.scrollingIntoView&&(this.scrollingIntoView=!0,lib_default()(this.suggestionNodes[selectedSuggestion],this.autocompleteRef.current,{onlyScrollIfNeeded:!0}),this.props.setTimeout((()=>{this.scrollingIntoView=!1}),100)),prevProps.value===value||this.props.disableSuggestions||this.state.isUpdatingSuggestions||(null!=value&&value.length?this.updateSuggestions(value):__experimentalShowInitialSuggestions&&this.updateSuggestions())}componentDidMount(){this.shouldShowInitialSuggestions()&&this.updateSuggestions()}componentWillUnmount(){var _this$suggestionsRequ,_this$suggestionsRequ2;null===(_this$suggestionsRequ=this.suggestionsRequest)||void 0===_this$suggestionsRequ||null===(_this$suggestionsRequ2=_this$suggestionsRequ.cancel)||void 0===_this$suggestionsRequ2||_this$suggestionsRequ2.call(_this$suggestionsRequ),this.suggestionsRequest=null}bindSuggestionNode(index){return ref=>{this.suggestionNodes[index]=ref}}shouldShowInitialSuggestions(){const{__experimentalShowInitialSuggestions:__experimentalShowInitialSuggestions=!1,value:value}=this.props;return __experimentalShowInitialSuggestions&&!(value&&value.length)}updateSuggestions(){var _value;let value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{__experimentalFetchLinkSuggestions:fetchLinkSuggestions,__experimentalHandleURLSuggestions:handleURLSuggestions}=this.props;if(!fetchLinkSuggestions)return;const isInitialSuggestions=!(null!==(_value=value)&&void 0!==_value&&_value.length);var _this$suggestionsRequ3,_this$suggestionsRequ4;if(value=value.trim(),!isInitialSuggestions&&(value.length<2||!handleURLSuggestions&&(0,is_url.P)(value)))return null===(_this$suggestionsRequ3=this.suggestionsRequest)||void 0===_this$suggestionsRequ3||null===(_this$suggestionsRequ4=_this$suggestionsRequ3.cancel)||void 0===_this$suggestionsRequ4||_this$suggestionsRequ4.call(_this$suggestionsRequ3),this.suggestionsRequest=null,void this.setState({suggestions:[],showSuggestions:!1,suggestionsValue:value,selectedSuggestion:null,loading:!1});this.setState({isUpdatingSuggestions:!0,selectedSuggestion:null,loading:!0});const request=fetchLinkSuggestions(value,{isInitialSuggestions:isInitialSuggestions});request.then((suggestions=>{this.suggestionsRequest===request&&(this.setState({suggestions:suggestions,isUpdatingSuggestions:!1,suggestionsValue:value,loading:!1,showSuggestions:!!suggestions.length}),suggestions.length?this.props.debouncedSpeak((0,i18n_build_module.gB)((0,i18n_build_module._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",suggestions.length),suggestions.length),"assertive"):this.props.debouncedSpeak((0,i18n_build_module.__)("No results."),"assertive"))})).catch((()=>{this.suggestionsRequest===request&&this.setState({isUpdatingSuggestions:!1,loading:!1})})),this.suggestionsRequest=request}onChange(event){this.props.onChange(event.target.value)}onFocus(){const{suggestions:suggestions}=this.state,{disableSuggestions:disableSuggestions,value:value}=this.props;!value||disableSuggestions||this.state.isUpdatingSuggestions||suggestions&&suggestions.length||this.updateSuggestions(value)}onKeyDown(event){const{showSuggestions:showSuggestions,selectedSuggestion:selectedSuggestion,suggestions:suggestions,loading:loading}=this.state;if(!showSuggestions||!suggestions.length||loading){switch(event.keyCode){case keycodes_build_module.UP:0!==event.target.selectionStart&&(event.preventDefault(),event.target.setSelectionRange(0,0));break;case keycodes_build_module.WV:this.props.value.length!==event.target.selectionStart&&(event.preventDefault(),event.target.setSelectionRange(this.props.value.length,this.props.value.length));break;case keycodes_build_module.K5:event.preventDefault(),this.props.onSubmit&&this.props.onSubmit(null,event)}return}const suggestion=this.state.suggestions[this.state.selectedSuggestion];switch(event.keyCode){case keycodes_build_module.UP:{event.preventDefault();const previousIndex=selectedSuggestion?selectedSuggestion-1:suggestions.length-1;this.setState({selectedSuggestion:previousIndex});break}case keycodes_build_module.WV:{event.preventDefault();const nextIndex=null===selectedSuggestion||selectedSuggestion===suggestions.length-1?0:selectedSuggestion+1;this.setState({selectedSuggestion:nextIndex});break}case keycodes_build_module.Mf:null!==this.state.selectedSuggestion&&(this.selectLink(suggestion),this.props.speak((0,i18n_build_module.__)("Link selected.")));break;case keycodes_build_module.K5:event.preventDefault(),null!==this.state.selectedSuggestion?(this.selectLink(suggestion),this.props.onSubmit&&this.props.onSubmit(suggestion,event)):this.props.onSubmit&&this.props.onSubmit(null,event)}}selectLink(suggestion){this.props.onChange(suggestion.url,suggestion),this.setState({selectedSuggestion:null,showSuggestions:!1})}handleOnClick(suggestion){this.selectLink(suggestion),this.inputRef.current.focus()}static getDerivedStateFromProps(_ref,_ref2){let{value:value,instanceId:instanceId,disableSuggestions:disableSuggestions,__experimentalShowInitialSuggestions:__experimentalShowInitialSuggestions=!1}=_ref,{showSuggestions:showSuggestions}=_ref2,shouldShowSuggestions=showSuggestions;const hasValue=value&&value.length;return __experimentalShowInitialSuggestions||hasValue||(shouldShowSuggestions=!1),!0===disableSuggestions&&(shouldShowSuggestions=!1),{showSuggestions:shouldShowSuggestions,suggestionsListboxId:`block-editor-url-input-suggestions-${instanceId}`,suggestionOptionIdPrefix:`block-editor-url-input-suggestion-${instanceId}`}}render(){return(0,react.createElement)(react.Fragment,null,this.renderControl(),this.renderSuggestions())}renderControl(){const{label:label=null,className:className,isFullWidth:isFullWidth,instanceId:instanceId,placeholder:placeholder=(0,i18n_build_module.__)("Paste URL or type to search"),__experimentalRenderControl:renderControl,value:value=""}=this.props,{loading:loading,showSuggestions:showSuggestions,selectedSuggestion:selectedSuggestion,suggestionsListboxId:suggestionsListboxId,suggestionOptionIdPrefix:suggestionOptionIdPrefix}=this.state,inputId=`url-input-control-${instanceId}`,controlProps={id:inputId,label:label,className:classnames_default()("block-editor-url-input",className,{"is-full-width":isFullWidth})},inputProps={id:inputId,value:value,required:!0,className:"block-editor-url-input__input",type:"text",onChange:this.onChange,onFocus:this.onFocus,placeholder:placeholder,onKeyDown:this.onKeyDown,role:"combobox","aria-label":label?void 0:(0,i18n_build_module.__)("URL"),"aria-expanded":showSuggestions,"aria-autocomplete":"list","aria-controls":suggestionsListboxId,"aria-activedescendant":null!==selectedSuggestion?`${suggestionOptionIdPrefix}-${selectedSuggestion}`:void 0,ref:this.inputRef};return renderControl?renderControl(controlProps,inputProps,loading):(0,react.createElement)(base_control.ZP,controlProps,(0,react.createElement)("input",inputProps),loading&&(0,react.createElement)(spinner.ZP,null))}renderSuggestions(){const{className:className,__experimentalRenderSuggestions:renderSuggestions}=this.props,{showSuggestions:showSuggestions,suggestions:suggestions,suggestionsValue:suggestionsValue,selectedSuggestion:selectedSuggestion,suggestionsListboxId:suggestionsListboxId,suggestionOptionIdPrefix:suggestionOptionIdPrefix,loading:loading}=this.state;if(!showSuggestions||0===suggestions.length)return null;const suggestionsListProps={id:suggestionsListboxId,ref:this.autocompleteRef,role:"listbox"},buildSuggestionItemProps=(suggestion,index)=>({role:"option",tabIndex:"-1",id:`${suggestionOptionIdPrefix}-${index}`,ref:this.bindSuggestionNode(index),"aria-selected":index===selectedSuggestion});return isFunction(renderSuggestions)?renderSuggestions({suggestions:suggestions,selectedSuggestion:selectedSuggestion,suggestionsListProps:suggestionsListProps,buildSuggestionItemProps:buildSuggestionItemProps,isLoading:loading,handleSuggestionClick:this.handleOnClick,isInitialSuggestions:!(null!=suggestionsValue&&suggestionsValue.length),currentInputValue:suggestionsValue}):(0,react.createElement)(popover.Z,{placement:"bottom",focusOnMount:!1},(0,react.createElement)("div",(0,esm_extends.Z)({},suggestionsListProps,{className:classnames_default()("block-editor-url-input__suggestions",`${className}__suggestions`)}),suggestions.map(((suggestion,index)=>(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({},buildSuggestionItemProps(0,index),{key:suggestion.id,className:classnames_default()("block-editor-url-input__suggestion",{"is-selected":index===selectedSuggestion}),onClick:()=>this.handleOnClick(suggestion)}),suggestion.title)))))}}URLInput.displayName="URLInput",URLInput.__docgenInfo={description:"",methods:[{name:"bindSuggestionNode",docblock:null,modifiers:[],params:[{name:"index",type:null}],returns:null},{name:"shouldShowInitialSuggestions",docblock:null,modifiers:[],params:[],returns:null},{name:"updateSuggestions",docblock:null,modifiers:[],params:[],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"onFocus",docblock:null,modifiers:[],params:[],returns:null},{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"selectLink",docblock:null,modifiers:[],params:[{name:"suggestion",type:null}],returns:null},{name:"handleOnClick",docblock:null,modifiers:[],params:[{name:"suggestion",type:null}],returns:null},{name:"renderControl",docblock:null,modifiers:[],params:[],returns:null},{name:"renderSuggestions",docblock:null,modifiers:[],params:[],returns:null}],displayName:"URLInput"};var url_input=(0,compose.Z)(with_safe_timeout.Z,with_spoken_messages.Z,with_instance_id.Z,(0,with_select.Z)(((select,props)=>{if(isFunction(props.__experimentalFetchLinkSuggestions))return;const{getSettings:getSettings}=select(store);return{__experimentalFetchLinkSuggestions:getSettings().__experimentalFetchLinkSuggestions}})))(URLInput);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/build-module/components/url-input/index.js"]={name:"URLInput",docgenInfo:URLInput.__docgenInfo,path:"packages/block-editor/build-module/components/url-input/index.js"});var search_create_button=_ref=>{let text,{searchTerm:searchTerm,onClick:onClick,itemProps:itemProps,isSelected:isSelected,buttonText:buttonText}=_ref;return searchTerm?(text=buttonText?"function"==typeof buttonText?buttonText(searchTerm):buttonText:(0,create_interpolate_element.Z)((0,i18n_build_module.gB)((0,i18n_build_module.__)("Create: <mark>%s</mark>"),searchTerm),{mark:(0,react.createElement)("mark",null)}),(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({},itemProps,{className:classnames_default()("block-editor-link-control__search-create block-editor-link-control__search-item",{"is-selected":isSelected}),onClick:onClick}),(0,react.createElement)(build_module_icon.Z,{className:"block-editor-link-control__search-item-icon",icon:plus.Z}),(0,react.createElement)("span",{className:"block-editor-link-control__search-item-header"},(0,react.createElement)("span",{className:"block-editor-link-control__search-item-title"},text)))):null},filter_url_for_display=__webpack_require__("./packages/url/build-module/filter-url-for-display.js"),safe_decode_uri=__webpack_require__("./packages/url/build-module/safe-decode-uri.js"),strings=__webpack_require__("./packages/components/build-module/utils/strings.js");var text_highlight=props=>{const{text:text="",highlight:highlight=""}=props,trimmedHighlightText=highlight.trim();if(!trimmedHighlightText)return(0,react.createElement)(react.Fragment,null,text);const regex=new RegExp(`(${(0,strings.h)(trimmedHighlightText)})`,"gi");return(0,create_interpolate_element.Z)(text.replace(regex,"<mark>$&</mark>"),{mark:(0,react.createElement)("mark",null)})},post_list=__webpack_require__("./packages/icons/build-module/library/post-list.js"),page=__webpack_require__("./packages/icons/build-module/library/page.js"),tag=__webpack_require__("./packages/icons/build-module/library/tag.js"),category=__webpack_require__("./packages/icons/build-module/library/category.js"),file=__webpack_require__("./packages/icons/build-module/library/file.js");var library_globe=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M12 3.3c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8s-4-8.8-8.8-8.8zm6.5 5.5h-2.6C15.4 7.3 14.8 6 14 5c2 .6 3.6 2 4.5 3.8zm.7 3.2c0 .6-.1 1.2-.2 1.8h-2.9c.1-.6.1-1.2.1-1.8s-.1-1.2-.1-1.8H19c.2.6.2 1.2.2 1.8zM12 18.7c-1-.7-1.8-1.9-2.3-3.5h4.6c-.5 1.6-1.3 2.9-2.3 3.5zm-2.6-4.9c-.1-.6-.1-1.1-.1-1.8 0-.6.1-1.2.1-1.8h5.2c.1.6.1 1.1.1 1.8s-.1 1.2-.1 1.8H9.4zM4.8 12c0-.6.1-1.2.2-1.8h2.9c-.1.6-.1 1.2-.1 1.8 0 .6.1 1.2.1 1.8H5c-.2-.6-.2-1.2-.2-1.8zM12 5.3c1 .7 1.8 1.9 2.3 3.5H9.7c.5-1.6 1.3-2.9 2.3-3.5zM10 5c-.8 1-1.4 2.3-1.8 3.8H5.5C6.4 7 8 5.6 10 5zM5.5 15.3h2.6c.4 1.5 1 2.8 1.8 3.7-1.8-.6-3.5-2-4.4-3.7zM14 19c.8-1 1.4-2.2 1.8-3.7h2.6C17.6 17 16 18.4 14 19z"}));const ICONS_MAP={post:post_list.Z,page:page.Z,post_tag:tag.Z,category:category.Z,attachment:file.Z};function SearchItemIcon(_ref){let{isURL:isURL,suggestion:suggestion}=_ref,icon=null;return isURL?icon=library_globe:suggestion.type in ICONS_MAP&&(icon=ICONS_MAP[suggestion.type]),icon?(0,react.createElement)(build_module_icon.Z,{className:"block-editor-link-control__search-item-icon",icon:icon}):null}var search_item=_ref2=>{let{itemProps:itemProps,suggestion:suggestion,isSelected:isSelected=!1,onClick:onClick,isURL:isURL=!1,searchTerm:searchTerm="",shouldShowType:shouldShowType=!1}=_ref2;return(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({},itemProps,{onClick:onClick,className:classnames_default()("block-editor-link-control__search-item",{"is-selected":isSelected,"is-url":isURL,"is-entity":!isURL})}),(0,react.createElement)(SearchItemIcon,{suggestion:suggestion,isURL:isURL}),(0,react.createElement)("span",{className:"block-editor-link-control__search-item-header"},(0,react.createElement)("span",{className:"block-editor-link-control__search-item-title"},(0,react.createElement)(text_highlight,{text:suggestion.title,highlight:searchTerm})),(0,react.createElement)("span",{"aria-hidden":!isURL,className:"block-editor-link-control__search-item-info"},!isURL&&((0,filter_url_for_display.w)((0,safe_decode_uri.x)(suggestion.url))||""),isURL&&(0,i18n_build_module.__)("Press ENTER to add this link"))),shouldShowType&&suggestion.type&&(0,react.createElement)("span",{className:"block-editor-link-control__search-item-type"},function getVisualTypeName(suggestion){if(suggestion.isFrontPage)return"front page";return"post_tag"===suggestion.type?"tag":suggestion.type}(suggestion)))};const LINK_ENTRY_TYPES=["URL","mailto","tel","internal"],DEFAULT_LINK_SETTINGS=[{id:"opensInNewTab",title:(0,i18n_build_module.__)("Open in new tab")}];function LinkControlSearchResults(_ref){let{instanceId:instanceId,withCreateSuggestion:withCreateSuggestion,currentInputValue:currentInputValue,handleSuggestionClick:handleSuggestionClick,suggestionsListProps:suggestionsListProps,buildSuggestionItemProps:buildSuggestionItemProps,suggestions:suggestions,selectedSuggestion:selectedSuggestion,isLoading:isLoading,isInitialSuggestions:isInitialSuggestions,createSuggestionButtonText:createSuggestionButtonText,suggestionsQuery:suggestionsQuery}=_ref;const resultsListClasses=classnames_default()("block-editor-link-control__search-results",{"is-loading":isLoading}),isSingleDirectEntryResult=1===suggestions.length&&LINK_ENTRY_TYPES.includes(suggestions[0].type),shouldShowCreateSuggestion=withCreateSuggestion&&!isSingleDirectEntryResult&&!isInitialSuggestions,shouldShowSuggestionsTypes=!(null!=suggestionsQuery&&suggestionsQuery.type),searchResultsLabelId=`block-editor-link-control-search-results-label-${instanceId}`,labelText=isInitialSuggestions?(0,i18n_build_module.__)("Recently updated"):(0,i18n_build_module.gB)((0,i18n_build_module.__)('Search results for "%s"'),currentInputValue),searchResultsLabel=(0,react.createElement)(isInitialSuggestions?react.Fragment:visually_hidden_component.Z,{},(0,react.createElement)("span",{className:"block-editor-link-control__search-results-label",id:searchResultsLabelId},labelText));return(0,react.createElement)("div",{className:"block-editor-link-control__search-results-wrapper"},searchResultsLabel,(0,react.createElement)("div",(0,esm_extends.Z)({},suggestionsListProps,{className:resultsListClasses,"aria-labelledby":searchResultsLabelId}),suggestions.map(((suggestion,index)=>shouldShowCreateSuggestion&&"__CREATE__"===suggestion.type?(0,react.createElement)(search_create_button,{searchTerm:currentInputValue,buttonText:createSuggestionButtonText,onClick:()=>handleSuggestionClick(suggestion),key:suggestion.type,itemProps:buildSuggestionItemProps(suggestion,index),isSelected:index===selectedSuggestion}):"__CREATE__"===suggestion.type?null:(0,react.createElement)(search_item,{key:`${suggestion.id}-${suggestion.type}`,itemProps:buildSuggestionItemProps(suggestion,index),suggestion:suggestion,index:index,onClick:()=>{handleSuggestionClick(suggestion)},isSelected:index===selectedSuggestion,isURL:LINK_ENTRY_TYPES.includes(suggestion.type),searchTerm:currentInputValue,shouldShowType:shouldShowSuggestionsTypes,isFrontPage:null==suggestion?void 0:suggestion.isFrontPage})))))}var get_protocol=__webpack_require__("./packages/url/build-module/get-protocol.js"),prepend_http=__webpack_require__("./packages/url/build-module/prepend-http.js");function isURLLike(val){const isInternal=null==val?void 0:val.startsWith("#");return(0,is_url.P)(val)||val&&val.includes("www.")||isInternal}const handleNoop=()=>Promise.resolve([]),handleDirectEntry=val=>{let type="URL";const protocol=(0,get_protocol.E)(val)||"";return protocol.includes("mailto")&&(type="mailto"),protocol.includes("tel")&&(type="tel"),null!=val&&val.startsWith("#")&&(type="internal"),Promise.resolve([{id:val,title:val,url:"URL"===type?(0,prepend_http.u)(val):val,type:type}])};function useSearchHandler(suggestionsQuery,allowDirectEntry,withCreateSuggestion,withURLSuggestion){const{fetchSearchSuggestions:fetchSearchSuggestions,pageOnFront:pageOnFront}=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store);return{pageOnFront:getSettings().pageOnFront,fetchSearchSuggestions:getSettings().__experimentalFetchLinkSuggestions}}),[]),directEntryHandler=allowDirectEntry?handleDirectEntry:handleNoop;return(0,react.useCallback)(((val,_ref)=>{let{isInitialSuggestions:isInitialSuggestions}=_ref;return isURLLike(val)?directEntryHandler(val,{isInitialSuggestions:isInitialSuggestions}):(async(val,suggestionsQuery,fetchSearchSuggestions,directEntryHandler,withCreateSuggestion,withURLSuggestion,pageOnFront)=>{const{isInitialSuggestions:isInitialSuggestions}=suggestionsQuery;let resultsIncludeFrontPage=!1,results=await Promise.all([fetchSearchSuggestions(val,suggestionsQuery),directEntryHandler(val)]);results[0]=results[0].map((result=>Number(result.id)===pageOnFront?(resultsIncludeFrontPage=!0,result.isFrontPage=!0,result):result));const couldBeURL=!val.includes(" ");return results=!resultsIncludeFrontPage&&couldBeURL&&withURLSuggestion&&!isInitialSuggestions?results[0].concat(results[1]):results[0],isInitialSuggestions||isURLLike(val)||!withCreateSuggestion?results:results.concat({title:val,url:val,type:"__CREATE__"})})(val,{...suggestionsQuery,isInitialSuggestions:isInitialSuggestions},fetchSearchSuggestions,directEntryHandler,withCreateSuggestion,withURLSuggestion,pageOnFront)}),[directEntryHandler,fetchSearchSuggestions,withCreateSuggestion])}const noopSearchHandler=()=>Promise.resolve([]),search_input_noop=()=>{},LinkControlSearchInput=(0,react.forwardRef)(((_ref,ref)=>{let{value:value,children:children,currentLink:currentLink={},className:className=null,placeholder:placeholder=null,withCreateSuggestion:withCreateSuggestion=!1,onCreateSuggestion:onCreateSuggestion=search_input_noop,onChange:onChange=search_input_noop,onSelect:onSelect=search_input_noop,showSuggestions:showSuggestions=!0,renderSuggestions:renderSuggestions=(props=>(0,react.createElement)(LinkControlSearchResults,props)),fetchSuggestions:fetchSuggestions=null,allowDirectEntry:allowDirectEntry=!0,showInitialSuggestions:showInitialSuggestions=!1,suggestionsQuery:suggestionsQuery={},withURLSuggestion:withURLSuggestion=!0,createSuggestionButtonText:createSuggestionButtonText,useLabel:useLabel=!1}=_ref;const genericSearchHandler=useSearchHandler(suggestionsQuery,allowDirectEntry,withCreateSuggestion,withURLSuggestion),searchHandler=showSuggestions?fetchSuggestions||genericSearchHandler:noopSearchHandler,instanceId=(0,use_instance_id.Z)(LinkControlSearchInput),[focusedSuggestion,setFocusedSuggestion]=(0,react.useState)(),onSuggestionSelected=async selectedSuggestion=>{let suggestion=selectedSuggestion;if("__CREATE__"!==selectedSuggestion.type){if(allowDirectEntry||suggestion&&Object.keys(suggestion).length>=1){const{id:id,url:url,...restLinkProps}=null!=currentLink?currentLink:{};onSelect({...restLinkProps,...suggestion},suggestion)}}else try{var _suggestion;suggestion=await onCreateSuggestion(selectedSuggestion.title),null!==(_suggestion=suggestion)&&void 0!==_suggestion&&_suggestion.url&&onSelect(suggestion)}catch(e){}},inputClasses=classnames_default()(className,{"has-no-label":!useLabel});return(0,react.createElement)("div",{className:"block-editor-link-control__search-input-container"},(0,react.createElement)(url_input,{label:useLabel?"URL":void 0,className:inputClasses,value:value,onChange:(selection,suggestion)=>{onChange(selection),setFocusedSuggestion(suggestion)},placeholder:null!=placeholder?placeholder:(0,i18n_build_module.__)("Search or type url"),__experimentalRenderSuggestions:showSuggestions?props=>renderSuggestions({...props,instanceId:instanceId,withCreateSuggestion:withCreateSuggestion,createSuggestionButtonText:createSuggestionButtonText,suggestionsQuery:suggestionsQuery,handleSuggestionClick:suggestion=>{props.handleSuggestionClick&&props.handleSuggestionClick(suggestion),onSuggestionSelected(suggestion)}}):null,__experimentalFetchLinkSuggestions:searchHandler,__experimentalHandleURLSuggestions:!0,__experimentalShowInitialSuggestions:showInitialSuggestions,onSubmit:(suggestion,event)=>{var _value$trim;const hasSuggestion=suggestion||focusedSuggestion;hasSuggestion||null!=value&&null!==(_value$trim=value.trim())&&void 0!==_value$trim&&_value$trim.length?onSuggestionSelected(hasSuggestion||{url:value}):event.preventDefault()},ref:ref}),children)}));var search_input=LinkControlSearchInput;var library_info=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})),library_edit=__webpack_require__("./packages/icons/build-module/library/edit.js");const{Slot:ViewerSlot,Fill:ViewerFill}=(0,slot_fill.up)("BlockEditorLinkControlViewer");function use_rich_url_data_reducer(state,action){switch(action.type){case"RESOLVED":return{...state,isFetching:!1,richData:action.richData};case"ERROR":return{...state,isFetching:!1,richData:null};case"LOADING":return{...state,isFetching:!0};default:throw new Error(`Unexpected action type ${action.type}`)}}var use_rich_url_data=function useRemoteUrlData(url){const[state,dispatch]=(0,react.useReducer)(use_rich_url_data_reducer,{richData:null,isFetching:!1}),{fetchRichUrlData:fetchRichUrlData}=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store);return{fetchRichUrlData:getSettings().__experimentalFetchRichUrlData}}),[]);return(0,react.useEffect)((()=>{if(null!=url&&url.length&&fetchRichUrlData&&"undefined"!=typeof AbortController){dispatch({type:"LOADING"});const controller=new window.AbortController,signal=controller.signal;return fetchRichUrlData(url,{signal:signal}).then((urlData=>{dispatch({type:"RESOLVED",richData:urlData})})).catch((()=>{signal.aborted||dispatch({type:"ERROR"})})),()=>{controller.abort()}}}),[url]),state};function LinkPreview(_ref){var _value$url;let{value:value,onEditClick:onEditClick,hasRichPreviews:hasRichPreviews=!1,hasUnlinkControl:hasUnlinkControl=!1,onRemove:onRemove}=_ref;const showRichPreviews=hasRichPreviews?null==value?void 0:value.url:null,{richData:richData,isFetching:isFetching}=use_rich_url_data(showRichPreviews),hasRichData=richData&&Object.keys(richData).length,displayURL=value&&(0,filter_url_for_display.w)((0,safe_decode_uri.x)(value.url),16)||"",displayTitle=(null==richData?void 0:richData.title)||(null==value?void 0:value.title)||displayURL,isEmptyURL=!(null!=value&&null!==(_value$url=value.url)&&void 0!==_value$url&&_value$url.length);let icon;return icon=null!=richData&&richData.icon?(0,react.createElement)("img",{src:null==richData?void 0:richData.icon,alt:""}):isEmptyURL?(0,react.createElement)(build_module_icon.Z,{icon:library_info,size:32}):(0,react.createElement)(build_module_icon.Z,{icon:library_globe}),(0,react.createElement)("div",{"aria-label":(0,i18n_build_module.__)("Currently selected"),className:classnames_default()("block-editor-link-control__search-item",{"is-current":!0,"is-rich":hasRichData,"is-fetching":!!isFetching,"is-preview":!0,"is-error":isEmptyURL})},(0,react.createElement)("div",{className:"block-editor-link-control__search-item-top"},(0,react.createElement)("span",{className:"block-editor-link-control__search-item-header"},(0,react.createElement)("span",{className:classnames_default()("block-editor-link-control__search-item-icon",{"is-image":null==richData?void 0:richData.icon})},icon),(0,react.createElement)("span",{className:"block-editor-link-control__search-item-details"},isEmptyURL?(0,react.createElement)("span",{className:"block-editor-link-control__search-item-error-notice"},(0,i18n_build_module.__)("Link is empty")):(0,react.createElement)(react.Fragment,null,(0,react.createElement)(external_link.Z,{className:"block-editor-link-control__search-item-title",href:value.url},(0,strip_html.Z)(displayTitle)),(null==value?void 0:value.url)&&(0,react.createElement)("span",{className:"block-editor-link-control__search-item-info"},displayURL)))),(0,react.createElement)(build_module_button.Z,{icon:library_edit.Z,label:(0,i18n_build_module.__)("Edit"),className:"block-editor-link-control__search-item-action",onClick:onEditClick,iconSize:24}),hasUnlinkControl&&(0,react.createElement)(build_module_button.Z,{icon:link_off.Z,label:(0,i18n_build_module.__)("Unlink"),className:"block-editor-link-control__search-item-action block-editor-link-control__unlink",onClick:onRemove,iconSize:24}),(0,react.createElement)(ViewerSlot,{fillProps:value})),!!(hasRichData&&(null!=richData&&richData.image||null!=richData&&richData.description)||isFetching)&&(0,react.createElement)("div",{className:"block-editor-link-control__search-item-bottom"},((null==richData?void 0:richData.image)||isFetching)&&(0,react.createElement)("div",{"aria-hidden":!(null!=richData&&richData.image),className:classnames_default()("block-editor-link-control__search-item-image",{"is-placeholder":!(null!=richData&&richData.image)})},(null==richData?void 0:richData.image)&&(0,react.createElement)("img",{src:null==richData?void 0:richData.image,alt:""})),((null==richData?void 0:richData.description)||isFetching)&&(0,react.createElement)("div",{"aria-hidden":!(null!=richData&&richData.description),className:classnames_default()("block-editor-link-control__search-item-description",{"is-placeholder":!(null!=richData&&richData.description)})},(null==richData?void 0:richData.description)&&(0,react.createElement)(text_component.Z,{truncate:!0,numberOfLines:"2"},richData.description))))}const makeCancelable=promise=>{let hasCanceled_=!1;return{promise:new Promise(((resolve,reject)=>{promise.then((val=>hasCanceled_?reject({isCanceled:!0}):resolve(val)),(error=>reject(hasCanceled_?{isCanceled:!0}:error)))})),cancel(){hasCanceled_=!0}}};function useInternalInputValue(value){const[internalInputValue,setInternalInputValue]=(0,react.useState)(value||"");return(0,react.useEffect)((()=>{value&&value!==internalInputValue&&setInternalInputValue(value)}),[value]),[internalInputValue,setInternalInputValue]}const link_control_noop=()=>{};function LinkControl(_ref){var _currentUrlInputValue,_value$url,_value$url$trim;let{searchInputPlaceholder:searchInputPlaceholder,value:value,settings:settings=DEFAULT_LINK_SETTINGS,onChange:onChange=link_control_noop,onRemove:onRemove,noDirectEntry:noDirectEntry=!1,showSuggestions:showSuggestions=!0,showInitialSuggestions:showInitialSuggestions,forceIsEditingLink:forceIsEditingLink,createSuggestion:createSuggestion,withCreateSuggestion:withCreateSuggestion,inputValue:propInputValue="",suggestionsQuery:suggestionsQuery={},noURLSuggestion:noURLSuggestion=!1,createSuggestionButtonText:createSuggestionButtonText,hasRichPreviews:hasRichPreviews=!1,hasTextControl:hasTextControl=!1,renderControlBottom:renderControlBottom=null}=_ref;void 0===withCreateSuggestion&&createSuggestion&&(withCreateSuggestion=!0);const isMounting=(0,react.useRef)(!0),wrapperNode=(0,react.useRef)(),textInputRef=(0,react.useRef)(),isEndingEditWithFocus=(0,react.useRef)(!1),[internalUrlInputValue,setInternalUrlInputValue]=useInternalInputValue((null==value?void 0:value.url)||""),[internalTextInputValue,setInternalTextInputValue]=useInternalInputValue((null==value?void 0:value.title)||""),[isEditingLink,setIsEditingLink]=(0,react.useState)(void 0!==forceIsEditingLink?forceIsEditingLink:!value||!value.url),{createPage:createPage,isCreatingPage:isCreatingPage,errorMessage:errorMessage}=function useCreatePage(handleCreatePage){const cancelableCreateSuggestion=(0,react.useRef)(),[isCreatingPage,setIsCreatingPage]=(0,react.useState)(!1),[errorMessage,setErrorMessage]=(0,react.useState)(null);return(0,react.useEffect)((()=>()=>{cancelableCreateSuggestion.current&&cancelableCreateSuggestion.current.cancel()}),[]),{createPage:async function(suggestionTitle){setIsCreatingPage(!0),setErrorMessage(null);try{return cancelableCreateSuggestion.current=makeCancelable(Promise.resolve(handleCreatePage(suggestionTitle))),await cancelableCreateSuggestion.current.promise}catch(error){if(error&&error.isCanceled)return;throw setErrorMessage(error.message||(0,i18n_build_module.__)("An unknown error occurred during creation. Please try again.")),error}finally{setIsCreatingPage(!1)}},isCreatingPage:isCreatingPage,errorMessage:errorMessage}}(createSuggestion);(0,react.useEffect)((()=>{void 0!==forceIsEditingLink&&forceIsEditingLink!==isEditingLink&&setIsEditingLink(forceIsEditingLink)}),[forceIsEditingLink]),(0,react.useEffect)((()=>{if(isMounting.current)return void(isMounting.current=!1);const whichFocusTargetIndex=null!=textInputRef&&textInputRef.current?1:0;(dom_build_module.T_.focusable.find(wrapperNode.current)[whichFocusTargetIndex]||wrapperNode.current).focus(),isEndingEditWithFocus.current=!1}),[isEditingLink,isCreatingPage]);const stopEditing=()=>{var _wrapperNode$current;isEndingEditWithFocus.current=!(null===(_wrapperNode$current=wrapperNode.current)||void 0===_wrapperNode$current||!_wrapperNode$current.contains(wrapperNode.current.ownerDocument.activeElement)),setIsEditingLink(!1)},handleSubmit=()=>{currentUrlInputValue===(null==value?void 0:value.url)&&internalTextInputValue===(null==value?void 0:value.title)||onChange({...value,url:currentUrlInputValue,title:internalTextInputValue}),stopEditing()},currentUrlInputValue=propInputValue||internalUrlInputValue,currentInputIsEmpty=!(null!=currentUrlInputValue&&null!==(_currentUrlInputValue=currentUrlInputValue.trim())&&void 0!==_currentUrlInputValue&&_currentUrlInputValue.length),shownUnlinkControl=onRemove&&value&&!isEditingLink&&!isCreatingPage,showSettingsDrawer=!(null==settings||!settings.length),showTextControl=(null==value||null===(_value$url=value.url)||void 0===_value$url||null===(_value$url$trim=_value$url.trim())||void 0===_value$url$trim?void 0:_value$url$trim.length)>0&&hasTextControl;return(0,react.createElement)("div",{tabIndex:-1,ref:wrapperNode,className:"block-editor-link-control"},isCreatingPage&&(0,react.createElement)("div",{className:"block-editor-link-control__loading"},(0,react.createElement)(spinner.ZP,null)," ",(0,i18n_build_module.__)("Creating"),""),(isEditingLink||!value)&&!isCreatingPage&&(0,react.createElement)(react.Fragment,null,(0,react.createElement)("div",{className:classnames_default()({"block-editor-link-control__search-input-wrapper":!0,"has-text-control":showTextControl})},showTextControl&&(0,react.createElement)(text_control.Z,{ref:textInputRef,className:"block-editor-link-control__field block-editor-link-control__text-content",label:"Text",value:internalTextInputValue,onChange:setInternalTextInputValue,onKeyDown:event=>{const{keyCode:keyCode}=event;keyCode!==keycodes_build_module.K5||currentInputIsEmpty||(event.preventDefault(),handleSubmit())}}),(0,react.createElement)(search_input,{currentLink:value,className:"block-editor-link-control__field block-editor-link-control__search-input",placeholder:searchInputPlaceholder,value:currentUrlInputValue,withCreateSuggestion:withCreateSuggestion,onCreateSuggestion:createPage,onChange:setInternalUrlInputValue,onSelect:updatedValue=>{onChange({...updatedValue,title:internalTextInputValue||(null==updatedValue?void 0:updatedValue.title)}),stopEditing()},showInitialSuggestions:showInitialSuggestions,allowDirectEntry:!noDirectEntry,showSuggestions:showSuggestions,suggestionsQuery:suggestionsQuery,withURLSuggestion:!noURLSuggestion,createSuggestionButtonText:createSuggestionButtonText,useLabel:showTextControl},(0,react.createElement)("div",{className:"block-editor-link-control__search-actions"},(0,react.createElement)(build_module_button.Z,{onClick:handleSubmit,label:(0,i18n_build_module.__)("Submit"),icon:keyboard_return.Z,className:"block-editor-link-control__search-submit",disabled:currentInputIsEmpty})))),errorMessage&&(0,react.createElement)(notice.Z,{className:"block-editor-link-control__search-error",status:"error",isDismissible:!1},errorMessage)),value&&!isEditingLink&&!isCreatingPage&&(0,react.createElement)(LinkPreview,{key:null==value?void 0:value.url,value:value,onEditClick:()=>setIsEditingLink(!0),hasRichPreviews:hasRichPreviews,hasUnlinkControl:shownUnlinkControl,onRemove:onRemove}),showSettingsDrawer&&(0,react.createElement)("div",{className:"block-editor-link-control__tools"},(0,react.createElement)(settings_drawer,{value:value,settings:settings,onChange:onChange})),renderControlBottom&&renderControlBottom())}LinkControl.ViewerFill=ViewerFill;var link_control=LinkControl;const RovingTabIndexContext=(0,react.createContext)(),RovingTabIndexProvider=RovingTabIndexContext.Provider;function RovingTabIndex(_ref){let{children:children}=_ref;const[lastFocusedElement,setLastFocusedElement]=(0,react.useState)(),providerValue=(0,react.useMemo)((()=>({lastFocusedElement:lastFocusedElement,setLastFocusedElement:setLastFocusedElement})),[lastFocusedElement]);return(0,react.createElement)(RovingTabIndexProvider,{value:providerValue},children)}function getRowFocusables(rowElement){const focusablesInRow=dom_build_module.T_.focusable.find(rowElement,{sequential:!0});if(focusablesInRow&&focusablesInRow.length)return focusablesInRow.filter((focusable=>focusable.closest('[role="row"]')===rowElement))}var tree_grid=(0,react.forwardRef)((function TreeGrid(_ref,ref){let{children:children,onExpandRow:onExpandRow=(()=>{}),onCollapseRow:onCollapseRow=(()=>{}),onFocusRow:onFocusRow=(()=>{}),applicationAriaLabel:applicationAriaLabel,...props}=_ref;const onKeyDown=(0,react.useCallback)((event=>{const{keyCode:keyCode,metaKey:metaKey,ctrlKey:ctrlKey,altKey:altKey}=event;if(metaKey||ctrlKey||altKey||![keycodes_build_module.UP,keycodes_build_module.WV,keycodes_build_module.RL,keycodes_build_module.pX,keycodes_build_module.Sd,keycodes_build_module.uR].includes(keyCode))return;event.stopPropagation();const{activeElement:activeElement}=document,{currentTarget:treeGridElement}=event;if(!treeGridElement.contains(activeElement))return;const activeRow=activeElement.closest('[role="row"]'),focusablesInRow=getRowFocusables(activeRow),currentColumnIndex=focusablesInRow.indexOf(activeElement),canExpandCollapse=0===currentColumnIndex,cannotFocusNextColumn=canExpandCollapse&&"false"===activeRow.getAttribute("aria-expanded")&&keyCode===keycodes_build_module.pX;if([keycodes_build_module.RL,keycodes_build_module.pX].includes(keyCode)){let nextIndex;if(nextIndex=keyCode===keycodes_build_module.RL?Math.max(0,currentColumnIndex-1):Math.min(currentColumnIndex+1,focusablesInRow.length-1),canExpandCollapse){if(keyCode===keycodes_build_module.RL){var _activeRow$getAttribu,_getRowFocusables,_getRowFocusables$;if("true"===activeRow.getAttribute("aria-expanded"))return onCollapseRow(activeRow),void event.preventDefault();const level=Math.max(parseInt(null!==(_activeRow$getAttribu=null==activeRow?void 0:activeRow.getAttribute("aria-level"))&&void 0!==_activeRow$getAttribu?_activeRow$getAttribu:1,10)-1,1),rows=Array.from(treeGridElement.querySelectorAll('[role="row"]'));let parentRow=activeRow;for(let i=rows.indexOf(activeRow);i>=0;i--)if(parseInt(rows[i].getAttribute("aria-level"),10)===level){parentRow=rows[i];break}null===(_getRowFocusables=getRowFocusables(parentRow))||void 0===_getRowFocusables||null===(_getRowFocusables$=_getRowFocusables[0])||void 0===_getRowFocusables$||_getRowFocusables$.focus()}if(keyCode===keycodes_build_module.pX){if("false"===activeRow.getAttribute("aria-expanded"))return onExpandRow(activeRow),void event.preventDefault();const focusableItems=getRowFocusables(activeRow);var _focusableItems;if(focusableItems.length>0)null===(_focusableItems=focusableItems[focusableItems.length-1])||void 0===_focusableItems||_focusableItems.focus()}return void event.preventDefault()}if(cannotFocusNextColumn)return;focusablesInRow[nextIndex].focus(),event.preventDefault()}else if([keycodes_build_module.UP,keycodes_build_module.WV].includes(keyCode)){const rows=Array.from(treeGridElement.querySelectorAll('[role="row"]')),currentRowIndex=rows.indexOf(activeRow);let nextRowIndex;if(nextRowIndex=keyCode===keycodes_build_module.UP?Math.max(0,currentRowIndex-1):Math.min(currentRowIndex+1,rows.length-1),nextRowIndex===currentRowIndex)return void event.preventDefault();const focusablesInNextRow=getRowFocusables(rows[nextRowIndex]);if(!focusablesInNextRow||!focusablesInNextRow.length)return void event.preventDefault();focusablesInNextRow[Math.min(currentColumnIndex,focusablesInNextRow.length-1)].focus(),onFocusRow(event,activeRow,rows[nextRowIndex]),event.preventDefault()}else if([keycodes_build_module.Sd,keycodes_build_module.uR].includes(keyCode)){const rows=Array.from(treeGridElement.querySelectorAll('[role="row"]')),currentRowIndex=rows.indexOf(activeRow);let nextRowIndex;if(nextRowIndex=keyCode===keycodes_build_module.Sd?0:rows.length-1,nextRowIndex===currentRowIndex)return void event.preventDefault();const focusablesInNextRow=getRowFocusables(rows[nextRowIndex]);if(!focusablesInNextRow||!focusablesInNextRow.length)return void event.preventDefault();focusablesInNextRow[Math.min(currentColumnIndex,focusablesInNextRow.length-1)].focus(),onFocusRow(event,activeRow,rows[nextRowIndex]),event.preventDefault()}}),[onExpandRow,onCollapseRow,onFocusRow]);return(0,react.createElement)(RovingTabIndex,null,(0,react.createElement)("div",{role:"application","aria-label":applicationAriaLabel},(0,react.createElement)("table",(0,esm_extends.Z)({},props,{role:"treegrid",onKeyDown:onKeyDown,ref:ref}),(0,react.createElement)("tbody",null,children))))}));var tree_grid_row=(0,react.forwardRef)((function TreeGridRow(_ref,ref){let{children:children,level:level,positionInSet:positionInSet,setSize:setSize,isExpanded:isExpanded,...props}=_ref;return(0,react.createElement)("tr",(0,esm_extends.Z)({},props,{ref:ref,role:"row","aria-level":level,"aria-posinset":positionInSet,"aria-setsize":setSize,"aria-expanded":isExpanded}),children)})),roving_tab_index_item=(0,react.forwardRef)((function RovingTabIndexItem(_ref,forwardedRef){let{children:children,as:Component,...props}=_ref;const localRef=(0,react.useRef)(),ref=forwardedRef||localRef,{lastFocusedElement:lastFocusedElement,setLastFocusedElement:setLastFocusedElement}=(0,react.useContext)(RovingTabIndexContext);let tabIndex;lastFocusedElement&&(tabIndex=lastFocusedElement===ref.current?0:-1);const allProps={ref:ref,tabIndex:tabIndex,onFocus:event=>setLastFocusedElement(event.target),...props};return"function"==typeof children?children(allProps):(0,react.createElement)(Component,allProps,children)})),item=(0,react.forwardRef)((function TreeGridItem(_ref,ref){let{children:children,...props}=_ref;return(0,react.createElement)(roving_tab_index_item,(0,esm_extends.Z)({ref:ref},props),children)})),cell=(0,react.forwardRef)((function TreeGridCell(_ref,ref){let{children:children,withoutGridItem:withoutGridItem=!1,...props}=_ref;return(0,react.createElement)("td",(0,esm_extends.Z)({},props,{role:"gridcell"}),withoutGridItem?children:(0,react.createElement)(item,{ref:ref},children))}));const AnimatedTreeGridRow=(0,react_spring_web_esm.q)(tree_grid_row);function ListViewLeaf(_ref){let{isSelected:isSelected,position:position,level:level,rowCount:rowCount,children:children,className:className,path:path,...props}=_ref;const ref=use_moving_animation({isSelected:isSelected,adjustScrolling:!1,enableAnimation:!0,triggerAnimationOnChange:path});return(0,react.createElement)(AnimatedTreeGridRow,(0,esm_extends.Z)({ref:ref,className:classnames_default()("block-editor-list-view-leaf","offcanvas-editor-list-view-leaf",className),level:level,positionInSet:position,setSize:rowCount},props),children)}var lock_small=(0,react.createElement)(svg.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,react.createElement)(svg.y$,{fillRule:"evenodd",clipRule:"evenodd",d:"M15 11h-.2V9c0-1.5-1.2-2.8-2.8-2.8S9.2 7.5 9.2 9v2H9c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1h6c.6 0 1-.4 1-1v-4c0-.6-.4-1-1-1zm-1.8 0h-2.5V9c0-.7.6-1.2 1.2-1.2s1.2.6 1.2 1.2v2z"}));var chevron_left_small=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z"}));var chevron_right_small=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z"}));function ListViewExpander(_ref){let{onClick:onClick}=_ref;return(0,react.createElement)("span",{className:"block-editor-list-view__expander",onClick:event=>onClick(event,{forceToggle:!0}),"aria-hidden":"true"},(0,react.createElement)(build_module_icon.Z,{icon:(0,i18n_build_module.dZ)()?chevron_left_small:chevron_right_small}))}var block_select_button=(0,react.forwardRef)((function ListViewBlockSelectButton(_ref,ref){let{className:className,block:{clientId:clientId},onClick:onClick,onToggleExpanded:onToggleExpanded,tabIndex:tabIndex,onFocus:onFocus,onDragStart:onDragStart,onDragEnd:onDragEnd,draggable:draggable}=_ref;const blockInformation=useBlockDisplayInformation(clientId),blockTitle=useBlockDisplayTitle({clientId:clientId,context:"list-view"}),{isLocked:isLocked}=useBlockLock(clientId);return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(build_module_button.Z,{className:classnames_default()("block-editor-list-view-block-select-button",className),onClick:onClick,onKeyDown:function onKeyDownHandler(event){event.keyCode!==keycodes_build_module.K5&&event.keyCode!==keycodes_build_module.L_||onClick(event)},ref:ref,tabIndex:tabIndex,onFocus:onFocus,onDragStart:event=>{event.dataTransfer.clearData(),null==onDragStart||onDragStart(event)},onDragEnd:onDragEnd,draggable:draggable,href:`#block-${clientId}`,"aria-hidden":!0},(0,react.createElement)(ListViewExpander,{onClick:onToggleExpanded}),(0,react.createElement)(block_icon,{icon:null==blockInformation?void 0:blockInformation.icon,showColors:!0,context:"list-view"}),(0,react.createElement)(h_stack_component.Z,{alignment:"center",className:"block-editor-list-view-block-select-button__label-wrapper",justify:"flex-start",spacing:1},(0,react.createElement)("span",{className:"block-editor-list-view-block-select-button__title"},(0,react.createElement)(truncate_component.Z,{ellipsizeMode:"auto"},blockTitle)),(null==blockInformation?void 0:blockInformation.anchor)&&(0,react.createElement)("span",{className:"block-editor-list-view-block-select-button__anchor-wrapper"},(0,react.createElement)(truncate_component.Z,{className:"block-editor-list-view-block-select-button__anchor",ellipsizeMode:"auto"},blockInformation.anchor)),isLocked&&(0,react.createElement)("span",{className:"block-editor-list-view-block-select-button__lock"},(0,react.createElement)(build_module_icon.Z,{icon:lock_small})))))}));const ListViewBlockContents=(0,react.forwardRef)(((_ref,ref)=>{let{onClick:onClick,onToggleExpanded:onToggleExpanded,block:block,isSelected:isSelected,position:position,siblingBlockCount:siblingBlockCount,level:level,isExpanded:isExpanded,selectedClientIds:selectedClientIds,...props}=_ref;const{clientId:clientId}=block,{blockMovingClientId:blockMovingClientId,selectedBlockInBlockEditor:selectedBlockInBlockEditor}=(0,use_select.Z)((select=>{const{hasBlockMovingClientId:hasBlockMovingClientId,getSelectedBlockClientId:getSelectedBlockClientId}=select(store);return{blockMovingClientId:hasBlockMovingClientId(),selectedBlockInBlockEditor:getSelectedBlockClientId()}}),[clientId]),isBlockMoveTarget=blockMovingClientId&&selectedBlockInBlockEditor===clientId,className=classnames_default()("block-editor-list-view-block-contents",{"is-dropping-before":isBlockMoveTarget}),draggableClientIds=selectedClientIds.includes(clientId)?selectedClientIds:[clientId];return(0,react.createElement)(block_draggable,{clientIds:draggableClientIds},(_ref2=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref2;return(0,react.createElement)(block_select_button,(0,esm_extends.Z)({ref:ref,className:className,block:block,onClick:onClick,onToggleExpanded:onToggleExpanded,isSelected:isSelected,position:position,siblingBlockCount:siblingBlockCount,level:level,draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd,isExpanded:isExpanded},props))}))}));var block_contents=ListViewBlockContents,block_edit_button=(0,react.forwardRef)((function BlockEditButton(_ref,ref){let{clientId:clientId,...props}=_ref;const{selectBlock:selectBlock}=(0,use_dispatch.Z)(store);return(0,react.createElement)(build_module_button.Z,(0,esm_extends.Z)({},props,{ref:ref,icon:library_edit.Z,onClick:()=>{selectBlock(clientId)}}))}));const ListViewContext=(0,react.createContext)({}),useListViewContext=()=>(0,react.useContext)(ListViewContext);var off_canvas_editor_block=(0,react.memo)((function ListViewBlock(_ref){let{block:{clientId:clientId},isDragged:isDragged,isSelected:isSelected,isBranchSelected:isBranchSelected,selectBlock:selectBlock,position:position,level:level,rowCount:rowCount,siblingBlockCount:siblingBlockCount,showBlockMovers:showBlockMovers,path:path,isExpanded:isExpanded,selectedClientIds:selectedClientIds,preventAnnouncement:preventAnnouncement,selectBlockInCanvas:selectBlockInCanvas}=_ref;const cellRef=(0,react.useRef)(null),[isHovered,setIsHovered]=(0,react.useState)(!1),{isLocked:isLocked,isContentLocked:isContentLocked}=useBlockLock(clientId),forceSelectionContentLock=(0,use_select.Z)((select=>!isSelected&&(!!isContentLocked&&select(store).hasSelectedInnerBlock(clientId,!0))),[isContentLocked,clientId,isSelected]),isFirstSelectedBlock=forceSelectionContentLock||isSelected&&selectedClientIds[0]===clientId,isLastSelectedBlock=forceSelectionContentLock||isSelected&&selectedClientIds[selectedClientIds.length-1]===clientId,{insertBlock:insertBlock,replaceBlock:replaceBlock,toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store),blockInformation=useBlockDisplayInformation(clientId),block=(0,use_select.Z)((select=>select(store).getBlock(clientId)),[clientId]);(0,react.useEffect)((()=>{!isTreeGridMounted&&isSelected&&cellRef.current.focus()}),[]);const onMouseEnter=(0,react.useCallback)((()=>{setIsHovered(!0),toggleBlockHighlight(clientId,!0)}),[clientId,setIsHovered,toggleBlockHighlight]),onMouseLeave=(0,react.useCallback)((()=>{setIsHovered(!1),toggleBlockHighlight(clientId,!1)}),[clientId,setIsHovered,toggleBlockHighlight]),selectEditorBlock=(0,react.useCallback)((event=>{selectBlock(event,clientId),event.preventDefault()}),[clientId,selectBlock]),updateSelection=(0,react.useCallback)((newClientId=>{selectBlock(void 0,newClientId)}),[selectBlock]),{isTreeGridMounted:isTreeGridMounted,expand:expand,collapse:collapse}=useListViewContext(),toggleExpanded=(0,react.useCallback)((event=>{event.preventDefault(),event.stopPropagation(),!0===isExpanded?collapse(clientId):!1===isExpanded&&expand(clientId)}),[clientId,expand,collapse,isExpanded]),instanceId=(0,use_instance_id.Z)(ListViewBlock);if(!block)return null;const showBlockActions=!!block&&(0,build_module.zb)(block.name,"__experimentalToolbar",!0),descriptionId=`list-view-block-select-button__${instanceId}`,blockPositionDescription=((position,siblingCount,level)=>(0,i18n_build_module.gB)((0,i18n_build_module.__)("Block %1$d of %2$d, Level %3$d"),position,siblingCount,level))(position,siblingBlockCount,level);let blockAriaLabel=(0,i18n_build_module.__)("Link");blockInformation&&(blockAriaLabel=isLocked?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s link (locked)"),blockInformation.title):(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s link"),blockInformation.title));const settingsAriaLabel=blockInformation?(0,i18n_build_module.gB)((0,i18n_build_module.__)("Options for %s block"),blockInformation.title):(0,i18n_build_module.__)("Options"),editAriaLabel=blockInformation?(0,i18n_build_module.gB)((0,i18n_build_module.__)("Edit %s block"),blockInformation.title):(0,i18n_build_module.__)("Edit"),isEditable=!!block&&"core/page-list-item"!==block.name,hasRenderedMovers=showBlockMovers&&siblingBlockCount>0,moverCellClassName=classnames_default()("block-editor-list-view-block__mover-cell",{"is-visible":isHovered||isSelected}),listViewBlockSettingsClassName=classnames_default()("block-editor-list-view-block__menu-cell",{"is-visible":isHovered||isFirstSelectedBlock}),listViewBlockEditClassName=classnames_default()("block-editor-list-view-block__menu-cell",{"is-visible":isHovered||isFirstSelectedBlock});let colSpan;hasRenderedMovers?colSpan=2:showBlockActions||(colSpan=3);const classes=classnames_default()({"is-selected":isSelected||forceSelectionContentLock,"is-first-selected":isFirstSelectedBlock,"is-last-selected":isLastSelectedBlock,"is-branch-selected":isBranchSelected,"is-dragging":isDragged,"has-single-cell":!showBlockActions}),dropdownClientIds=selectedClientIds.includes(clientId)?selectedClientIds:[clientId];return(0,react.createElement)(ListViewLeaf,{className:classes,onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave,onFocus:onMouseEnter,onBlur:onMouseLeave,level:level,position:position,rowCount:rowCount,path:path,id:`list-view-block-${clientId}`,"data-block":clientId,isExpanded:isContentLocked?void 0:isExpanded,"aria-selected":!!isSelected||forceSelectionContentLock},(0,react.createElement)(cell,{className:"block-editor-list-view-block__contents-cell",colSpan:colSpan,ref:cellRef,"aria-label":blockAriaLabel,"aria-selected":!!isSelected||forceSelectionContentLock,"aria-expanded":isContentLocked?void 0:isExpanded,"aria-describedby":descriptionId},(_ref2=>{let{ref:ref,tabIndex:tabIndex,onFocus:onFocus}=_ref2;return(0,react.createElement)("div",{className:"block-editor-list-view-block__contents-container"},(0,react.createElement)(block_contents,{block:block,onClick:selectBlockInCanvas?selectEditorBlock:event=>{event.preventDefault()},onToggleExpanded:toggleExpanded,isSelected:isSelected,position:position,siblingBlockCount:siblingBlockCount,level:level,ref:ref,tabIndex:tabIndex,onFocus:onFocus,isExpanded:isExpanded,selectedClientIds:selectedClientIds,preventAnnouncement:preventAnnouncement}),(0,react.createElement)("div",{className:"block-editor-list-view-block-select-button__description",id:descriptionId},blockPositionDescription))})),hasRenderedMovers&&(0,react.createElement)(react.Fragment,null,(0,react.createElement)(cell,{className:moverCellClassName,withoutGridItem:!0},(0,react.createElement)(item,null,(_ref3=>{let{ref:ref,tabIndex:tabIndex,onFocus:onFocus}=_ref3;return(0,react.createElement)(BlockMoverUpButton,{orientation:"vertical",clientIds:[clientId],ref:ref,tabIndex:tabIndex,onFocus:onFocus})})),(0,react.createElement)(item,null,(_ref4=>{let{ref:ref,tabIndex:tabIndex,onFocus:onFocus}=_ref4;return(0,react.createElement)(BlockMoverDownButton,{orientation:"vertical",clientIds:[clientId],ref:ref,tabIndex:tabIndex,onFocus:onFocus})})))),showBlockActions&&(0,react.createElement)(react.Fragment,null,isEditable&&(0,react.createElement)(cell,{className:listViewBlockEditClassName,"aria-selected":!!isSelected||forceSelectionContentLock},(props=>(0,react.createElement)(block_edit_button,(0,esm_extends.Z)({},props,{label:editAriaLabel,clientId:clientId})))),(0,react.createElement)(cell,{className:listViewBlockSettingsClassName,"aria-selected":!!isSelected||forceSelectionContentLock,colSpan:isEditable?1:2},(_ref5=>{let{ref:ref,tabIndex:tabIndex,onFocus:onFocus}=_ref5;return(0,react.createElement)(block_settings_dropdown,{clientIds:dropdownClientIds,icon:more_vertical.Z,label:settingsAriaLabel,toggleProps:{ref:ref,className:"block-editor-list-view-block__menu",tabIndex:tabIndex,onFocus:onFocus},disableOpenOnArrowDown:!0,__experimentalSelectBlock:updateSelection},(_ref6=>{let{onClose:onClose}=_ref6;return(0,react.createElement)(menu_item.Z,{onClick:()=>{const newLink=(0,build_module.j4)("core/navigation-link");if("core/navigation-submenu"===block.name){const updateSelectionOnInsert=!1;insertBlock(newLink,block.innerBlocks.length,clientId,updateSelectionOnInsert)}else{const newSubmenu=(0,build_module.j4)("core/navigation-submenu",block.attributes,block.innerBlocks?[...block.innerBlocks,newLink]:[newLink]);replaceBlock(clientId,newSubmenu)}onClose()}},(0,i18n_build_module.__)("Add submenu item"))}))}))))}));function countBlocks(block,expandedState,draggedClientIds,isExpandedByDefault){var _expandedState$block$;if(null==draggedClientIds?void 0:draggedClientIds.includes(block.clientId))return 0;return(null!==(_expandedState$block$=expandedState[block.clientId])&&void 0!==_expandedState$block$?_expandedState$block$:isExpandedByDefault)?1+block.innerBlocks.reduce(countReducer(expandedState,draggedClientIds,isExpandedByDefault),0):1}const countReducer=(expandedState,draggedClientIds,isExpandedByDefault)=>(count,block)=>{var _expandedState$block$2;if(null==draggedClientIds?void 0:draggedClientIds.includes(block.clientId))return count;return(null!==(_expandedState$block$2=expandedState[block.clientId])&&void 0!==_expandedState$block$2?_expandedState$block$2:isExpandedByDefault)&&block.innerBlocks.length>0?count+countBlocks(block,expandedState,draggedClientIds,isExpandedByDefault):count+1},branch_noop=()=>{};var branch=(0,react.memo)((function ListViewBranch(props){const{blocks:blocks,selectBlock:selectBlock=branch_noop,showBlockMovers:showBlockMovers,selectedClientIds:selectedClientIds,level:level=1,path:path="",isBranchSelected:isBranchSelected=!1,listPosition:listPosition=0,fixedListWindow:fixedListWindow,isExpanded:isExpanded,parentId:parentId,shouldShowInnerBlocks:shouldShowInnerBlocks=!0,selectBlockInCanvas:selectBlockInCanvas}=props,isContentLocked=(0,use_select.Z)((select=>!(!parentId||"contentOnly"!==select(store).getTemplateLock(parentId))),[parentId]),{expandedState:expandedState,draggedClientIds:draggedClientIds}=useListViewContext();if(isContentLocked)return null;const filteredBlocks=blocks.filter(Boolean),blockCount=filteredBlocks.length;let nextPosition=listPosition;return(0,react.createElement)(react.Fragment,null,filteredBlocks.map(((block,index)=>{var _expandedState$client;const{clientId:clientId,innerBlocks:innerBlocks}=block;index>0&&(nextPosition+=countBlocks(filteredBlocks[index-1],expandedState,draggedClientIds,isExpanded));const{itemInView:itemInView}=fixedListWindow,blockInView=itemInView(nextPosition),position=index+1,updatedPath=path.length>0?`${path}_${position}`:`${position}`,hasNestedBlocks=!(null==innerBlocks||!innerBlocks.length),shouldExpand=hasNestedBlocks&&shouldShowInnerBlocks?null!==(_expandedState$client=expandedState[clientId])&&void 0!==_expandedState$client?_expandedState$client:isExpanded:void 0,isDragged=!(null==draggedClientIds||!draggedClientIds.includes(clientId)),showBlock=isDragged||blockInView,isSelected=((clientId,selectedBlockClientIds)=>Array.isArray(selectedBlockClientIds)&&selectedBlockClientIds.length?-1!==selectedBlockClientIds.indexOf(clientId):selectedBlockClientIds===clientId)(clientId,selectedClientIds),isSelectedBranch=isBranchSelected||isSelected&&hasNestedBlocks;return(0,react.createElement)(async_mode_provider_context.ZP,{key:clientId,value:!isSelected},showBlock&&(0,react.createElement)(off_canvas_editor_block,{block:block,selectBlock:selectBlock,isSelected:isSelected,isBranchSelected:isSelectedBranch,isDragged:isDragged,level:level,position:position,rowCount:blockCount,siblingBlockCount:blockCount,showBlockMovers:showBlockMovers,path:updatedPath,isExpanded:shouldExpand,listPosition:nextPosition,selectedClientIds:selectedClientIds,selectBlockInCanvas:selectBlockInCanvas}),!showBlock&&(0,react.createElement)("tr",null,(0,react.createElement)("td",{className:"block-editor-list-view-placeholder"})),hasNestedBlocks&&shouldExpand&&!isDragged&&(0,react.createElement)(ListViewBranch,{parentId:clientId,blocks:innerBlocks,selectBlock:selectBlock,showBlockMovers:showBlockMovers,level:level+1,path:updatedPath,listPosition:nextPosition+1,fixedListWindow:fixedListWindow,isBranchSelected:isSelectedBranch,selectedClientIds:selectedClientIds,isExpanded:isExpanded,selectBlockInCanvas:selectBlockInCanvas}))})))}));function ListViewDropIndicator(_ref){let{listViewRef:listViewRef,blockDropTarget:blockDropTarget}=_ref;const{rootClientId:rootClientId,clientId:clientId,dropPosition:dropPosition}=blockDropTarget||{},[rootBlockElement,blockElement]=(0,react.useMemo)((()=>{if(!listViewRef.current)return[];return[rootClientId?listViewRef.current.querySelector(`[data-block="${rootClientId}"]`):void 0,clientId?listViewRef.current.querySelector(`[data-block="${clientId}"]`):void 0]}),[rootClientId,clientId]),targetElement=blockElement||rootBlockElement,getDropIndicatorIndent=(0,react.useCallback)((()=>{if(!rootBlockElement)return 0;const targetElementRect=targetElement.getBoundingClientRect();return rootBlockElement.querySelector(".block-editor-block-icon").getBoundingClientRect().right-targetElementRect.left}),[rootBlockElement,targetElement]),style=(0,react.useMemo)((()=>{if(!targetElement)return{};const indent=getDropIndicatorIndent();return{width:targetElement.offsetWidth-indent}}),[getDropIndicatorIndent,targetElement]),popoverAnchor=(0,react.useMemo)((()=>{if(targetElement&&("top"===dropPosition||"bottom"===dropPosition||"inside"===dropPosition))return{ownerDocument:targetElement.ownerDocument,getBoundingClientRect(){const rect=targetElement.getBoundingClientRect(),indent=getDropIndicatorIndent(),left=rect.left+indent,right=rect.right;let top=0,bottom=0;"top"===dropPosition?(top=rect.top,bottom=rect.top):(top=rect.bottom,bottom=rect.bottom);const width=right-left,height=bottom-top;return new window.DOMRect(left,top,width,height)}}}),[targetElement,dropPosition,getDropIndicatorIndent]);return targetElement?(0,react.createElement)(popover.Z,{animate:!1,anchor:popoverAnchor,focusOnMount:!1,className:"block-editor-list-view-drop-indicator",variant:"unstyled"},(0,react.createElement)("div",{style:style,className:"block-editor-list-view-drop-indicator__line"})):null}function useBlockSelection(){const{clearSelectedBlock:clearSelectedBlock,multiSelect:multiSelect,selectBlock:selectBlock}=(0,use_dispatch.Z)(store),{getBlockName:getBlockName,getBlockParents:getBlockParents,getBlockSelectionStart:getBlockSelectionStart,getBlockSelectionEnd:getBlockSelectionEnd,getSelectedBlockClientIds:getSelectedBlockClientIds,hasMultiSelection:hasMultiSelection,hasSelectedBlock:hasSelectedBlock}=(0,use_select.Z)(store),{getBlockType:getBlockType}=(0,use_select.Z)(build_module.h);return{updateBlockSelection:(0,react.useCallback)((async(event,clientId,destinationClientId)=>{if(null==event||!event.shiftKey)return void selectBlock(clientId);event.preventDefault();const isKeyPress="keydown"===event.type&&(event.keyCode===keycodes_build_module.UP||event.keyCode===keycodes_build_module.WV||event.keyCode===keycodes_build_module.Sd||event.keyCode===keycodes_build_module.uR);if(!isKeyPress&&!hasSelectedBlock()&&!hasMultiSelection())return void selectBlock(clientId,null);const selectedBlocks=getSelectedBlockClientIds(),clientIdWithParents=[...getBlockParents(clientId),clientId];isKeyPress&&!selectedBlocks.some((blockId=>clientIdWithParents.includes(blockId)))&&await clearSelectedBlock();let startTarget=getBlockSelectionStart(),endTarget=clientId;isKeyPress&&(hasSelectedBlock()||hasMultiSelection()||(startTarget=clientId),destinationClientId&&(endTarget=destinationClientId));const startParents=getBlockParents(startTarget),endParents=getBlockParents(endTarget),{start:start,end:end}=function getCommonDepthClientIds(startId,endId,startParents,endParents){const startPath=[...startParents,startId],endPath=[...endParents,endId],depth=Math.min(startPath.length,endPath.length)-1;return{start:startPath[depth],end:endPath[depth]}}(startTarget,endTarget,startParents,endParents);await multiSelect(start,end,null);const updatedSelectedBlocks=getSelectedBlockClientIds();if((event.keyCode===keycodes_build_module.Sd||event.keyCode===keycodes_build_module.uR)&&updatedSelectedBlocks.length>1)return;const selectionDiff=selectedBlocks.filter((blockId=>!updatedSelectedBlocks.includes(blockId)));let label;if(1===selectionDiff.length){var _getBlockType;const title=null===(_getBlockType=getBlockType(getBlockName(selectionDiff[0])))||void 0===_getBlockType?void 0:_getBlockType.title;title&&(label=(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s deselected."),title))}else selectionDiff.length>1&&(label=(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s blocks deselected."),selectionDiff.length));label&&(0,a11y_build_module.D)(label)}),[clearSelectedBlock,getBlockName,getBlockType,getBlockParents,getBlockSelectionStart,getBlockSelectionEnd,getSelectedBlockClientIds,hasMultiSelection,hasSelectedBlock,multiSelect,selectBlock])}}const ALLOWED_DROP_EDGES=["top","bottom"];function useListViewDropZone(){const{getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex,getBlockCount:getBlockCount,getDraggedBlockClientIds:getDraggedBlockClientIds,canInsertBlocks:canInsertBlocks}=(0,use_select.Z)(store),[target,setTarget]=(0,react.useState)(),{rootClientId:targetRootClientId,blockIndex:targetBlockIndex}=target||{},onBlockDrop=useOnBlockDrop(targetRootClientId,targetBlockIndex),draggedBlockClientIds=getDraggedBlockClientIds(),throttled=(0,use_throttle.Z)((0,react.useCallback)(((event,currentTarget)=>{const position={x:event.clientX,y:event.clientY},isBlockDrag=!(null==draggedBlockClientIds||!draggedBlockClientIds.length),newTarget=function getListViewDropTarget(blocksData,position){let candidateEdge,candidateBlockData,candidateDistance,candidateRect;for(const blockData of blocksData){if(blockData.isDraggedBlock)continue;const rect=blockData.element.getBoundingClientRect(),[distance,edge]=getDistanceToNearestEdge(position,rect,ALLOWED_DROP_EDGES),isCursorWithinBlock=isPointContainedByRect(position,rect);if(void 0===candidateDistance||distance<candidateDistance||isCursorWithinBlock){candidateDistance=distance;const index=blocksData.indexOf(blockData),previousBlockData=blocksData[index-1];if("top"===edge&&previousBlockData&&previousBlockData.rootClientId===blockData.rootClientId&&!previousBlockData.isDraggedBlock?(candidateBlockData=previousBlockData,candidateEdge="bottom",candidateRect=previousBlockData.element.getBoundingClientRect()):(candidateBlockData=blockData,candidateEdge=edge,candidateRect=rect),isCursorWithinBlock)break}}if(!candidateBlockData)return;const isDraggingBelow="bottom"===candidateEdge;if(isDraggingBelow&&candidateBlockData.canInsertDraggedBlocksAsChild&&(candidateBlockData.innerBlockCount>0||function isNestingGesture(point,rect){const blockCenterX=rect.left+rect.width/2;return point.x>blockCenterX}(position,candidateRect)))return{rootClientId:candidateBlockData.clientId,blockIndex:0,dropPosition:"inside"};if(!candidateBlockData.canInsertDraggedBlocksAsSibling)return;const offset=isDraggingBelow?1:0;return{rootClientId:candidateBlockData.rootClientId,clientId:candidateBlockData.clientId,blockIndex:candidateBlockData.blockIndex+offset,dropPosition:candidateEdge}}(Array.from(currentTarget.querySelectorAll("[data-block]")).map((blockElement=>{const clientId=blockElement.dataset.block,rootClientId=getBlockRootClientId(clientId);return{clientId:clientId,rootClientId:rootClientId,blockIndex:getBlockIndex(clientId),element:blockElement,isDraggedBlock:!!isBlockDrag&&draggedBlockClientIds.includes(clientId),innerBlockCount:getBlockCount(clientId),canInsertDraggedBlocksAsSibling:!isBlockDrag||canInsertBlocks(draggedBlockClientIds,rootClientId),canInsertDraggedBlocksAsChild:!isBlockDrag||canInsertBlocks(draggedBlockClientIds,clientId)}})),position);newTarget&&setTarget(newTarget)}),[draggedBlockClientIds]),200);return{ref:(0,use_drop_zone.Z)({onDrop:onBlockDrop,onDragOver(event){throttled(event,event.currentTarget)},onDragEnd(){throttled.cancel(),setTarget(null)}}),target:target}}function getSuggestionsQuery(type,kind){switch(type){case"post":case"page":return{type:"post",subtype:type};case"category":return{type:"term",subtype:"category"};case"tag":return{type:"term",subtype:"post_tag"};case"post_format":return{type:"post-format"};default:return"taxonomy"===kind?{type:"term",subtype:type}:"post-type"===kind?{type:"post",subtype:type}:{}}}function LinkControlTransforms(_ref){let{clientId:clientId}=_ref;const{getBlock:getBlock,blockTransforms:blockTransforms}=(0,use_select.Z)((select=>{const{getBlock:_getBlock,getBlockRootClientId:getBlockRootClientId,getBlockTransformItems:getBlockTransformItems}=select(store);return{getBlock:_getBlock,blockTransforms:getBlockTransformItems(_getBlock(clientId),getBlockRootClientId(clientId))}}),[clientId]),{replaceBlock:replaceBlock}=(0,use_dispatch.Z)(store),featuredBlocks=["core/page-list","core/site-logo","core/social-links","core/search"],transforms=blockTransforms.filter((item=>featuredBlocks.includes(item.name)));return null!=transforms&&transforms.length&&clientId?(0,react.createElement)("div",{className:"link-control-transform"},(0,react.createElement)("h3",{className:"link-control-transform__subheading"},(0,i18n_build_module.__)("Transform")),(0,react.createElement)("div",{className:"link-control-transform__items"},transforms.map(((item,index)=>(0,react.createElement)(build_module_button.Z,{key:`transform-${index}`,onClick:()=>replaceBlock(clientId,(0,build_module.m4)(getBlock(clientId),item.name)),className:"link-control-transform__item"},(0,react.createElement)(block_icon,{icon:item.icon}),item.title))))):null}function LinkUI(props){const{label:label,url:url,opensInNewTab:opensInNewTab,type:type,kind:kind}=props.link,link={url:url,opensInNewTab:opensInNewTab,title:label&&(0,strip_html.Z)(label)};return(0,react.createElement)(popover.Z,{placement:"bottom",onClose:props.onClose,anchor:props.anchor,shift:!0},(0,react.createElement)(link_control,{hasTextControl:!0,hasRichPreviews:!0,className:props.className,value:link,showInitialSuggestions:!0,withCreateSuggestion:props.hasCreateSuggestion,noDirectEntry:!!type,noURLSuggestion:!!type,suggestionsQuery:getSuggestionsQuery(type,kind),onChange:props.onChange,onRemove:props.onRemove,renderControlBottom:url?null:()=>(0,react.createElement)(LinkControlTransforms,{clientId:props.clientId})}))}var escape_html_build_module=__webpack_require__("./packages/escape-html/build-module/index.js");const BLOCKS_WITH_LINK_UI_SUPPORT=["core/navigation-link","core/navigation-submenu"],Appender=(0,react.forwardRef)(((props,ref)=>{const[insertedBlockClientId,setInsertedBlockClientId]=(0,react.useState)(),{hideInserter:hideInserter,clientId:clientId}=(0,use_select.Z)((select=>{const{getTemplateLock:getTemplateLock,__unstableGetEditorMode:__unstableGetEditorMode,getSelectedBlockClientId:getSelectedBlockClientId}=select(store),_clientId=getSelectedBlockClientId();return{clientId:getSelectedBlockClientId(),hideInserter:!!getTemplateLock(_clientId)||"zoom-out"===__unstableGetEditorMode()}}),[]),{insertedBlockAttributes:insertedBlockAttributes,insertedBlockName:insertedBlockName}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(store);return{insertedBlockAttributes:getBlockAttributes(insertedBlockClientId),insertedBlockName:getBlockName(insertedBlockClientId)}}),[insertedBlockClientId]),{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store);let maybeLinkUI;return insertedBlockClientId&&null!=BLOCKS_WITH_LINK_UI_SUPPORT&&BLOCKS_WITH_LINK_UI_SUPPORT.includes(insertedBlockName)&&(maybeLinkUI=(0,react.createElement)(LinkUI,{clientId:insertedBlockClientId,link:insertedBlockAttributes,onClose:()=>setInsertedBlockClientId(null),hasCreateSuggestion:!1,onChange:updatedValue=>{var _insertedBlockClientId;!function(){let updatedValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},setAttributes=arguments.length>1?arguments[1]:void 0,blockAttributes=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{label:originalLabel="",kind:originalKind="",type:originalType=""}=blockAttributes,{title:newLabel="",url:newUrl="",opensInNewTab:opensInNewTab,id:id,kind:newKind=originalKind,type:newType=originalType}=updatedValue,newLabelWithoutHttp=newLabel.replace(/http(s?):\/\//gi,""),newUrlWithoutHttp=newUrl.replace(/http(s?):\/\//gi,""),label=newLabel&&newLabel!==originalLabel&&newLabelWithoutHttp!==newUrlWithoutHttp?(0,escape_html_build_module.r)(newLabel):originalLabel||(0,escape_html_build_module.r)(newUrlWithoutHttp),type="post_tag"===newType?"tag":newType.replace("-","_"),isBuiltInType=["post","page","tag","category"].indexOf(type)>-1,kind=!newKind&&!isBuiltInType||"custom"===newKind?"custom":newKind;setAttributes({...newUrl&&{url:encodeURI((0,safe_decode_uri.x)(newUrl))},...label&&{label:label},...void 0!==opensInNewTab&&{opensInNewTab:opensInNewTab},...id&&Number.isInteger(id)&&{id:id},...kind&&{kind:kind},...type&&"URL"!==type&&{type:type}})}(updatedValue,(_insertedBlockClientId=insertedBlockClientId,_updatedAttributes=>{updateBlockAttributes(_insertedBlockClientId,_updatedAttributes)}),insertedBlockAttributes),setInsertedBlockClientId(null)}})),hideInserter?null:(0,react.createElement)("div",{className:"offcanvas-editor__appender"},maybeLinkUI,(0,react.createElement)(inserter,(0,esm_extends.Z)({ref:ref,rootClientId:clientId,position:"bottom right",isAppender:!0,selectBlockOnInsert:!1,onSelectOrClose:_insertedBlock=>{null!=_insertedBlock&&_insertedBlock.clientId&&setInsertedBlockClientId(null==_insertedBlock?void 0:_insertedBlock.clientId)},__experimentalIsQuick:!0},props)))})),expanded=(state,action)=>Array.isArray(action.clientIds)?{...state,...action.clientIds.reduce(((newState,id)=>({...newState,[id]:"expand"===action.type})),{})}:state;var off_canvas_editor=(0,react.forwardRef)((function __ExperimentalOffCanvasEditor(_ref,ref){let{id:id,blocks:blocks,showBlockMovers:showBlockMovers=!1,isExpanded:isExpanded=!1,selectBlockInCanvas:selectBlockInCanvas=!0}=_ref;const{clientIdsTree:clientIdsTree,draggedClientIds:draggedClientIds,selectedClientIds:selectedClientIds}=function useListViewClientIds(blocks){return(0,use_select.Z)((select=>{const{getDraggedBlockClientIds:getDraggedBlockClientIds,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableGetClientIdsTree:__unstableGetClientIdsTree}=select(store);return{selectedClientIds:getSelectedBlockClientIds(),draggedClientIds:getDraggedBlockClientIds(),clientIdsTree:blocks||__unstableGetClientIdsTree()}}),[blocks])}(blocks),{visibleBlockCount:visibleBlockCount,shouldShowInnerBlocks:shouldShowInnerBlocks}=(0,use_select.Z)((select=>{const{getGlobalBlockCount:getGlobalBlockCount,getClientIdsOfDescendants:getClientIdsOfDescendants,__unstableGetEditorMode:__unstableGetEditorMode}=select(store),draggedBlockCount=(null==draggedClientIds?void 0:draggedClientIds.length)>0?getClientIdsOfDescendants(draggedClientIds).length+1:0;return{visibleBlockCount:getGlobalBlockCount()-draggedBlockCount,shouldShowInnerBlocks:"zoom-out"!==__unstableGetEditorMode()}}),[draggedClientIds]),{updateBlockSelection:updateBlockSelection}=useBlockSelection(),[expandedState,setExpandedState]=(0,react.useReducer)(expanded,{}),{ref:dropZoneRef,target:blockDropTarget}=useListViewDropZone(),elementRef=(0,react.useRef)(),treeGridRef=(0,use_merge_refs.Z)([elementRef,dropZoneRef,ref]),isMounted=(0,react.useRef)(!1),{setSelectedTreeId:setSelectedTreeId}=function useListViewExpandSelectedItem(_ref){let{firstSelectedBlockClientId:firstSelectedBlockClientId,setExpandedState:setExpandedState}=_ref;const[selectedTreeId,setSelectedTreeId]=(0,react.useState)(null),{selectedBlockParentClientIds:selectedBlockParentClientIds}=(0,use_select.Z)((select=>{const{getBlockParents:getBlockParents}=select(store);return{selectedBlockParentClientIds:getBlockParents(firstSelectedBlockClientId,!1)}}),[firstSelectedBlockClientId]),parentClientIds=Array.isArray(selectedBlockParentClientIds)&&selectedBlockParentClientIds.length?selectedBlockParentClientIds:null;return(0,react.useEffect)((()=>{selectedTreeId!==firstSelectedBlockClientId&&parentClientIds&&setExpandedState({type:"expand",clientIds:selectedBlockParentClientIds})}),[firstSelectedBlockClientId]),{setSelectedTreeId:setSelectedTreeId}}({firstSelectedBlockClientId:selectedClientIds[0],setExpandedState:setExpandedState}),selectEditorBlock=(0,react.useCallback)(((event,blockClientId)=>{updateBlockSelection(event,blockClientId),setSelectedTreeId(blockClientId)}),[setSelectedTreeId,updateBlockSelection]);(0,react.useEffect)((()=>{isMounted.current=!0}),[]);const[fixedListWindow]=function useFixedWindowList(elementRef,itemHeight,totalItems,options){var _options$initWindowSi,_options$useWindowing;const initWindowSize=null!==(_options$initWindowSi=null==options?void 0:options.initWindowSize)&&void 0!==_options$initWindowSi?_options$initWindowSi:30,useWindowing=null===(_options$useWindowing=null==options?void 0:options.useWindowing)||void 0===_options$useWindowing||_options$useWindowing,[fixedListWindow,setFixedListWindow]=(0,react.useState)({visibleItems:initWindowSize,start:0,end:initWindowSize,itemInView:index=>index>=0&&index<=initWindowSize});return(0,react.useLayoutEffect)((()=>{var _scrollContainer$owne,_scrollContainer$owne2,_scrollContainer$owne3,_scrollContainer$owne4;if(!useWindowing)return;const scrollContainer=(0,get_scroll_container.Z)(elementRef.current),measureWindow=initRender=>{var _options$windowOversc;if(!scrollContainer)return;const visibleItems=Math.ceil(scrollContainer.clientHeight/itemHeight),windowOverscan=initRender?visibleItems:null!==(_options$windowOversc=null==options?void 0:options.windowOverscan)&&void 0!==_options$windowOversc?_options$windowOversc:visibleItems,firstViewableIndex=Math.floor(scrollContainer.scrollTop/itemHeight),start=Math.max(0,firstViewableIndex-windowOverscan),end=Math.min(totalItems-1,firstViewableIndex+visibleItems+windowOverscan);setFixedListWindow((lastWindow=>{const nextWindow={visibleItems:visibleItems,start:start,end:end,itemInView:index=>start<=index&&index<=end};return lastWindow.start!==nextWindow.start||lastWindow.end!==nextWindow.end||lastWindow.visibleItems!==nextWindow.visibleItems?nextWindow:lastWindow}))};measureWindow(!0);const debounceMeasureList=(0,debounce.D)((()=>{measureWindow()}),16);return null==scrollContainer||scrollContainer.addEventListener("scroll",debounceMeasureList),null==scrollContainer||null===(_scrollContainer$owne=scrollContainer.ownerDocument)||void 0===_scrollContainer$owne||null===(_scrollContainer$owne2=_scrollContainer$owne.defaultView)||void 0===_scrollContainer$owne2||_scrollContainer$owne2.addEventListener("resize",debounceMeasureList),null==scrollContainer||null===(_scrollContainer$owne3=scrollContainer.ownerDocument)||void 0===_scrollContainer$owne3||null===(_scrollContainer$owne4=_scrollContainer$owne3.defaultView)||void 0===_scrollContainer$owne4||_scrollContainer$owne4.addEventListener("resize",debounceMeasureList),()=>{var _scrollContainer$owne5,_scrollContainer$owne6;null==scrollContainer||scrollContainer.removeEventListener("scroll",debounceMeasureList),null==scrollContainer||null===(_scrollContainer$owne5=scrollContainer.ownerDocument)||void 0===_scrollContainer$owne5||null===(_scrollContainer$owne6=_scrollContainer$owne5.defaultView)||void 0===_scrollContainer$owne6||_scrollContainer$owne6.removeEventListener("resize",debounceMeasureList)}}),[itemHeight,elementRef,totalItems]),(0,react.useLayoutEffect)((()=>{var _scrollContainer$owne7,_scrollContainer$owne8;if(!useWindowing)return;const scrollContainer=(0,get_scroll_container.Z)(elementRef.current),handleKeyDown=event=>{switch(event.keyCode){case keycodes_build_module.Sd:return null==scrollContainer?void 0:scrollContainer.scrollTo({top:0});case keycodes_build_module.uR:return null==scrollContainer?void 0:scrollContainer.scrollTo({top:totalItems*itemHeight});case keycodes_build_module.wx:return null==scrollContainer?void 0:scrollContainer.scrollTo({top:scrollContainer.scrollTop-fixedListWindow.visibleItems*itemHeight});case keycodes_build_module.Bi:return null==scrollContainer?void 0:scrollContainer.scrollTo({top:scrollContainer.scrollTop+fixedListWindow.visibleItems*itemHeight})}};return null==scrollContainer||null===(_scrollContainer$owne7=scrollContainer.ownerDocument)||void 0===_scrollContainer$owne7||null===(_scrollContainer$owne8=_scrollContainer$owne7.defaultView)||void 0===_scrollContainer$owne8||_scrollContainer$owne8.addEventListener("keydown",handleKeyDown),()=>{var _scrollContainer$owne9,_scrollContainer$owne10;null==scrollContainer||null===(_scrollContainer$owne9=scrollContainer.ownerDocument)||void 0===_scrollContainer$owne9||null===(_scrollContainer$owne10=_scrollContainer$owne9.defaultView)||void 0===_scrollContainer$owne10||_scrollContainer$owne10.removeEventListener("keydown",handleKeyDown)}}),[totalItems,itemHeight,elementRef,fixedListWindow.visibleItems]),[fixedListWindow,setFixedListWindow]}(elementRef,36,visibleBlockCount,{useWindowing:!0,windowOverscan:40}),expand=(0,react.useCallback)((blockClientId=>{blockClientId&&setExpandedState({type:"expand",clientIds:[blockClientId]})}),[setExpandedState]),collapse=(0,react.useCallback)((blockClientId=>{blockClientId&&setExpandedState({type:"collapse",clientIds:[blockClientId]})}),[setExpandedState]),expandRow=(0,react.useCallback)((row=>{var _row$dataset;expand(null==row||null===(_row$dataset=row.dataset)||void 0===_row$dataset?void 0:_row$dataset.block)}),[expand]),collapseRow=(0,react.useCallback)((row=>{var _row$dataset2;collapse(null==row||null===(_row$dataset2=row.dataset)||void 0===_row$dataset2?void 0:_row$dataset2.block)}),[collapse]),focusRow=(0,react.useCallback)(((event,startRow,endRow)=>{var _startRow$dataset,_endRow$dataset;event.shiftKey&&updateBlockSelection(event,null==startRow||null===(_startRow$dataset=startRow.dataset)||void 0===_startRow$dataset?void 0:_startRow$dataset.block,null==endRow||null===(_endRow$dataset=endRow.dataset)||void 0===_endRow$dataset?void 0:_endRow$dataset.block)}),[updateBlockSelection]),contextValue=(0,react.useMemo)((()=>({isTreeGridMounted:isMounted.current,draggedClientIds:draggedClientIds,expandedState:expandedState,expand:expand,collapse:collapse})),[isMounted.current,draggedClientIds,expandedState,expand,collapse]);return(0,react.createElement)(async_mode_provider_context.ZP,{value:!0},(0,react.createElement)(ListViewDropIndicator,{listViewRef:elementRef,blockDropTarget:blockDropTarget}),(0,react.createElement)("div",{className:"offcanvas-editor-list-view-tree-wrapper"},(0,react.createElement)(tree_grid,{id:id,className:"block-editor-list-view-tree","aria-label":(0,i18n_build_module.__)("Block navigation structure"),ref:treeGridRef,onCollapseRow:collapseRow,onExpandRow:expandRow,onFocusRow:focusRow,applicationAriaLabel:(0,i18n_build_module.__)("Block navigation structure")},(0,react.createElement)(ListViewContext.Provider,{value:contextValue},(0,react.createElement)(branch,{blocks:clientIdsTree,selectBlock:selectEditorBlock,showBlockMovers:showBlockMovers,fixedListWindow:fixedListWindow,selectedClientIds:selectedClientIds,isExpanded:isExpanded,shouldShowInnerBlocks:shouldShowInnerBlocks,selectBlockInCanvas:selectBlockInCanvas}),(0,react.createElement)(tree_grid_row,{level:1,setSize:1,positionInSet:1,isExpanded:!0},(0,react.createElement)(cell,null,(treeGridCellProps=>(0,react.createElement)(Appender,treeGridCellProps))))))))})),form_file_upload=__webpack_require__("./packages/components/build-module/form-file-upload/index.js"),media=__webpack_require__("./packages/icons/build-module/library/media.js"),upload=__webpack_require__("./packages/icons/build-module/library/upload.js"),post_featured_image=__webpack_require__("./packages/icons/build-module/library/post-featured-image.js");const media_replace_flow_noop=()=>{};let uniqueId=0;var media_replace_flow=(0,compose.Z)([(0,with_dispatch.Z)((dispatch=>{const{createNotice:createNotice,removeNotice:removeNotice}=dispatch(notices_build_module.h);return{createNotice:createNotice,removeNotice:removeNotice}})),(0,with_filters.Z)("editor.MediaReplaceFlow")])((_ref=>{let{mediaURL:mediaURL,mediaId:mediaId,mediaIds:mediaIds,allowedTypes:allowedTypes,accept:accept,onError:onError,onSelect:onSelect,onSelectURL:onSelectURL,onToggleFeaturedImage:onToggleFeaturedImage,useFeaturedImage:useFeaturedImage,onFilesUpload:onFilesUpload=media_replace_flow_noop,name:name=(0,i18n_build_module.__)("Replace"),createNotice:createNotice,removeNotice:removeNotice,children:children,multiple:multiple=!1,addToGallery:addToGallery,handleUpload:handleUpload=!0}=_ref;const mediaUpload=(0,use_select.Z)((select=>select(store).getSettings().mediaUpload),[]),editMediaButtonRef=(0,react.useRef)(),errorNoticeID="block-editor/media-replace-flow/error-notice/"+ ++uniqueId,onUploadError=message=>{const safeMessage=(0,strip_html.Z)(message);onError?onError(safeMessage):setTimeout((()=>{createNotice("error",safeMessage,{speak:!0,id:errorNoticeID,isDismissible:!0})}),1e3)},selectMedia=(media,closeMenu)=>{useFeaturedImage&&onToggleFeaturedImage&&onToggleFeaturedImage(),closeMenu(),onSelect(media),(0,a11y_build_module.D)((0,i18n_build_module.__)("The media file has been replaced")),removeNotice(errorNoticeID)},openOnArrowDown=event=>{event.keyCode===keycodes_build_module.WV&&(event.preventDefault(),event.target.click())},gallery=multiple&&!(!allowedTypes||0===allowedTypes.length)&&allowedTypes.every((allowedType=>"image"===allowedType||allowedType.startsWith("image/")));return(0,react.createElement)(dropdown.Z,{popoverProps:{variant:"toolbar"},contentClassName:"block-editor-media-replace-flow__options",renderToggle:_ref3=>{let{isOpen:isOpen,onToggle:onToggle}=_ref3;return(0,react.createElement)(toolbar_button.Z,{ref:editMediaButtonRef,"aria-expanded":isOpen,"aria-haspopup":"true",onClick:onToggle,onKeyDown:openOnArrowDown},name)},renderContent:_ref4=>{let{onClose:onClose}=_ref4;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(navigable_container_menu.Z,{className:"block-editor-media-replace-flow__media-upload-menu"},(0,react.createElement)(react.Fragment,null,(0,react.createElement)(media_upload,{gallery:gallery,addToGallery:addToGallery,multiple:multiple,value:multiple?mediaIds:mediaId,onSelect:media=>selectMedia(media,onClose),allowedTypes:allowedTypes,render:_ref5=>{let{open:open}=_ref5;return(0,react.createElement)(menu_item.Z,{icon:media.Z,onClick:open},(0,i18n_build_module.__)("Open Media Library"))}}),(0,react.createElement)(check,null,(0,react.createElement)(form_file_upload.Z,{onChange:event=>{((event,closeMenu)=>{const files=event.target.files;if(!handleUpload)return closeMenu(),onSelect(files);onFilesUpload(files),mediaUpload({allowedTypes:allowedTypes,filesList:files,onFileChange:_ref2=>{let[media]=_ref2;selectMedia(media,closeMenu)},onError:onUploadError})})(event,onClose)},accept:accept,multiple:multiple,render:_ref6=>{let{openFileDialog:openFileDialog}=_ref6;return(0,react.createElement)(menu_item.Z,{icon:upload.Z,onClick:()=>{openFileDialog()}},(0,i18n_build_module.__)("Upload"))}}))),onToggleFeaturedImage&&(0,react.createElement)(menu_item.Z,{icon:post_featured_image.Z,onClick:onToggleFeaturedImage,isPressed:useFeaturedImage},(0,i18n_build_module.__)("Use featured image")),children),onSelectURL&&(0,react.createElement)("form",{className:"block-editor-media-flow__url-input"},(0,react.createElement)("span",{className:"block-editor-media-replace-flow__image-url-label"},(0,i18n_build_module.__)("Current media URL:")),(0,react.createElement)(tooltip.Z,{text:mediaURL,position:"bottom"},(0,react.createElement)("div",null,(0,react.createElement)(link_control,{value:{url:mediaURL},settings:[],showSuggestions:!1,onChange:_ref7=>{let{url:url}=_ref7;onSelectURL(url),editMediaButtonRef.current.focus()}})))))}})})),AnimatePresence=__webpack_require__("./node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs");var build_module_drop_zone=function DropZoneComponent(_ref){let{className:className,label:label,onFilesDrop:onFilesDrop,onHTMLDrop:onHTMLDrop,onDrop:onDrop,...restProps}=_ref;const[isDraggingOverDocument,setIsDraggingOverDocument]=(0,react.useState)(),[isDraggingOverElement,setIsDraggingOverElement]=(0,react.useState)(),[type,setType]=(0,react.useState)(),ref=(0,use_drop_zone.Z)({onDrop(event){var _event$dataTransfer;const files=event.dataTransfer?(0,data_transfer.f)(event.dataTransfer):[],html=null===(_event$dataTransfer=event.dataTransfer)||void 0===_event$dataTransfer?void 0:_event$dataTransfer.getData("text/html");html&&onHTMLDrop?onHTMLDrop(html):files.length&&onFilesDrop?onFilesDrop(files):onDrop&&onDrop(event)},onDragStart(event){var _event$dataTransfer2,_event$dataTransfer3;setIsDraggingOverDocument(!0);let _type="default";null!==(_event$dataTransfer2=event.dataTransfer)&&void 0!==_event$dataTransfer2&&_event$dataTransfer2.types.includes("text/html")?_type="html":(null!==(_event$dataTransfer3=event.dataTransfer)&&void 0!==_event$dataTransfer3&&_event$dataTransfer3.types.includes("Files")||(event.dataTransfer?(0,data_transfer.f)(event.dataTransfer):[]).length>0)&&(_type="file"),setType(_type)},onDragEnd(){setIsDraggingOverDocument(!1),setType(void 0)},onDragEnter(){setIsDraggingOverElement(!0)},onDragLeave(){setIsDraggingOverElement(!1)}}),disableMotion=(0,use_reduced_motion.Z)();let children;const backdrop={hidden:{scaleY:0,opacity:0},show:{scaleY:1,opacity:1,transition:{type:"tween",duration:.2,delay:.1,delayChildren:.2}},exit:{scaleY:1,opacity:0,transition:{duration:.3,delayChildren:0}}},foreground={hidden:{opacity:0,scale:.75},show:{opacity:1,scale:1},exit:{opacity:0,scale:.9}};isDraggingOverElement&&(children=(0,react.createElement)(motion.E.div,{variants:backdrop,initial:disableMotion?"show":"hidden",animate:"show",exit:disableMotion?"show":"exit",className:"components-drop-zone__content",style:{pointerEvents:"none"}},(0,react.createElement)(motion.E.div,{variants:foreground},(0,react.createElement)(build_module_icon.Z,{icon:upload.Z,className:"components-drop-zone__content-icon"}),(0,react.createElement)("span",{className:"components-drop-zone__content-text"},label||(0,i18n_build_module.__)("Drop files to upload")))));const classes=classnames_default()("components-drop-zone",className,{"is-active":(isDraggingOverDocument||isDraggingOverElement)&&("file"===type&&onFilesDrop||"html"===type&&onHTMLDrop||"default"===type&&onDrop),"is-dragging-over-document":isDraggingOverDocument,"is-dragging-over-element":isDraggingOverElement,[`is-dragging-${type}`]:!!type});return(0,react.createElement)("div",(0,esm_extends.Z)({},restProps,{ref:ref,className:classes}),disableMotion?children:(0,react.createElement)(AnimatePresence.M,null,children))},popover_utils=__webpack_require__("./packages/components/build-module/popover/utils.js");function LinkViewerURL(_ref){let{url:url,urlLabel:urlLabel,className:className}=_ref;const linkClassName=classnames_default()(className,"block-editor-url-popover__link-viewer-url");return url?(0,react.createElement)(external_link.Z,{className:linkClassName,href:url},urlLabel||(0,filter_url_for_display.w)((0,safe_decode_uri.x)(url))):(0,react.createElement)("span",{className:linkClassName})}function URLPopover(_ref){let computedPlacement,{additionalControls:additionalControls,children:children,renderSettings:renderSettings,placement:placement,focusOnMount:focusOnMount="firstElement",position:position,...popoverProps}=_ref;void 0!==position&&(0,deprecated_build_module.Z)("`position` prop in wp.blockEditor.URLPopover",{since:"6.2",alternative:"`placement` prop"}),void 0!==placement?computedPlacement=placement:void 0!==position&&(computedPlacement=(0,popover_utils.KF)(position)),computedPlacement=computedPlacement||"bottom";const[isSettingsExpanded,setIsSettingsExpanded]=(0,react.useState)(!1),showSettings=!!renderSettings&&isSettingsExpanded;return(0,react.createElement)(popover.Z,(0,esm_extends.Z)({className:"block-editor-url-popover",focusOnMount:focusOnMount,placement:computedPlacement,shift:!0},popoverProps),(0,react.createElement)("div",{className:"block-editor-url-popover__input-container"},(0,react.createElement)("div",{className:"block-editor-url-popover__row"},children,!!renderSettings&&(0,react.createElement)(build_module_button.Z,{className:"block-editor-url-popover__settings-toggle",icon:chevron_down.Z,label:(0,i18n_build_module.__)("Link settings"),onClick:()=>{setIsSettingsExpanded(!isSettingsExpanded)},"aria-expanded":isSettingsExpanded})),showSettings&&(0,react.createElement)("div",{className:"block-editor-url-popover__row block-editor-url-popover__settings"},renderSettings())),additionalControls&&!showSettings&&(0,react.createElement)("div",{className:"block-editor-url-popover__additional-controls"},additionalControls))}URLPopover.LinkEditor=function LinkEditor(_ref){let{autocompleteRef:autocompleteRef,className:className,onChangeInputValue:onChangeInputValue,value:value,...props}=_ref;return(0,react.createElement)("form",(0,esm_extends.Z)({className:classnames_default()("block-editor-url-popover__link-editor",className)},props),(0,react.createElement)(url_input,{value:value,onChange:onChangeInputValue,autocompleteRef:autocompleteRef}),(0,react.createElement)(build_module_button.Z,{icon:keyboard_return.Z,label:(0,i18n_build_module.__)("Apply"),type:"submit"}))},URLPopover.LinkViewer=function LinkViewer(_ref){let{className:className,linkClassName:linkClassName,onEditLinkClick:onEditLinkClick,url:url,urlLabel:urlLabel,...props}=_ref;return(0,react.createElement)("div",(0,esm_extends.Z)({className:classnames_default()("block-editor-url-popover__link-viewer",className)},props),(0,react.createElement)(LinkViewerURL,{url:url,urlLabel:urlLabel,className:linkClassName}),onEditLinkClick&&(0,react.createElement)(build_module_button.Z,{icon:library_edit.Z,label:(0,i18n_build_module.__)("Edit"),onClick:onEditLinkClick}))};var url_popover=URLPopover;const media_placeholder_noop=()=>{},InsertFromURLPopover=_ref=>{let{src:src,onChange:onChange,onSubmit:onSubmit,onClose:onClose}=_ref;return(0,react.createElement)(url_popover,{onClose:onClose},(0,react.createElement)("form",{className:"block-editor-media-placeholder__url-input-form",onSubmit:onSubmit},(0,react.createElement)("input",{className:"block-editor-media-placeholder__url-input-field",type:"text","aria-label":(0,i18n_build_module.__)("URL"),placeholder:(0,i18n_build_module.__)("Paste or type URL"),onChange:onChange,value:src}),(0,react.createElement)(build_module_button.Z,{className:"block-editor-media-placeholder__url-input-submit-button",icon:keyboard_return.Z,label:(0,i18n_build_module.__)("Apply"),type:"submit"})))};var media_placeholder=(0,with_filters.Z)("editor.MediaPlaceholder")((function MediaPlaceholder(_ref2){let{value:value={},allowedTypes:allowedTypes,className:className,icon:icon,labels:labels={},mediaPreview:mediaPreview,notices:notices,isAppender:isAppender,accept:accept,addToGallery:addToGallery,multiple:multiple=!1,handleUpload:handleUpload=!0,disableDropZone:disableDropZone,disableMediaButtons:disableMediaButtons,onError:onError,onSelect:onSelect,onCancel:onCancel,onSelectURL:onSelectURL,onToggleFeaturedImage:onToggleFeaturedImage,onDoubleClick:onDoubleClick,onFilesPreUpload:onFilesPreUpload=media_placeholder_noop,onHTMLDrop:onHTMLDrop=media_placeholder_noop,children:children,mediaLibraryButton:mediaLibraryButton,placeholder:placeholder,style:style}=_ref2;const mediaUpload=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store);return getSettings().mediaUpload}),[]),[src,setSrc]=(0,react.useState)(""),[isURLInputVisible,setIsURLInputVisible]=(0,react.useState)(!1);(0,react.useEffect)((()=>{var _value$src;setSrc(null!==(_value$src=null==value?void 0:value.src)&&void 0!==_value$src?_value$src:"")}),[null==value?void 0:value.src]);const onChangeSrc=event=>{setSrc(event.target.value)},openURLInput=()=>{setIsURLInputVisible(!0)},closeURLInput=()=>{setIsURLInputVisible(!1)},onSubmitSrc=event=>{event.preventDefault(),src&&onSelectURL&&(onSelectURL(src),closeURLInput())},onFilesUpload=files=>{if(!handleUpload)return onSelect(files);let setMedia;if(onFilesPreUpload(files),multiple)if(addToGallery){let lastMediaPassed=[];setMedia=newMedia=>{const filteredMedia=(null!=value?value:[]).filter((item=>item.id?!lastMediaPassed.some((_ref3=>{let{id:id}=_ref3;return Number(id)===Number(item.id)})):!lastMediaPassed.some((_ref4=>{let{urlSlug:urlSlug}=_ref4;return item.url.includes(urlSlug)}))));onSelect(filteredMedia.concat(newMedia)),lastMediaPassed=newMedia.map((media=>{const cutOffIndex=media.url.lastIndexOf("."),urlSlug=media.url.slice(0,cutOffIndex);return{id:media.id,urlSlug:urlSlug}}))}}else setMedia=onSelect;else setMedia=_ref5=>{let[media]=_ref5;return onSelect(media)};mediaUpload({allowedTypes:allowedTypes,filesList:files,onFileChange:setMedia,onError:onError})},onUpload=event=>{onFilesUpload(event.target.files)},renderPlaceholder=null!=placeholder?placeholder:content=>{let{instructions:instructions,title:title}=labels;if(mediaUpload||onSelectURL||(instructions=(0,i18n_build_module.__)("To edit this block, you need permission to upload media.")),void 0===instructions||void 0===title){const typesAllowed=null!=allowedTypes?allowedTypes:[],[firstAllowedType]=typesAllowed,isOneType=1===typesAllowed.length,isAudio=isOneType&&"audio"===firstAllowedType,isImage=isOneType&&"image"===firstAllowedType,isVideo=isOneType&&"video"===firstAllowedType;void 0===instructions&&mediaUpload&&(instructions=(0,i18n_build_module.__)("Upload a media file or pick one from your media library."),isAudio?instructions=(0,i18n_build_module.__)("Upload an audio file, pick one from your media library, or add one with a URL."):isImage?instructions=(0,i18n_build_module.__)("Upload an image file, pick one from your media library, or add one with a URL."):isVideo&&(instructions=(0,i18n_build_module.__)("Upload a video file, pick one from your media library, or add one with a URL."))),void 0===title&&(title=(0,i18n_build_module.__)("Media"),isAudio?title=(0,i18n_build_module.__)("Audio"):isImage?title=(0,i18n_build_module.__)("Image"):isVideo&&(title=(0,i18n_build_module.__)("Video")))}const placeholderClassName=classnames_default()("block-editor-media-placeholder",className,{"is-appender":isAppender});return(0,react.createElement)(build_module_placeholder.Z,{icon:icon,label:title,instructions:instructions,className:placeholderClassName,notices:notices,onDoubleClick:onDoubleClick,preview:mediaPreview,style:style},content,children)},renderDropZone=()=>disableDropZone?null:(0,react.createElement)(build_module_drop_zone,{onFilesDrop:onFilesUpload,onHTMLDrop:onHTMLDrop}),renderCancelLink=()=>onCancel&&(0,react.createElement)(build_module_button.Z,{className:"block-editor-media-placeholder__cancel-button",title:(0,i18n_build_module.__)("Cancel"),variant:"link",onClick:onCancel},(0,i18n_build_module.__)("Cancel")),renderUrlSelectionUI=()=>onSelectURL&&(0,react.createElement)("div",{className:"block-editor-media-placeholder__url-input-container"},(0,react.createElement)(build_module_button.Z,{className:"block-editor-media-placeholder__button",onClick:openURLInput,isPressed:isURLInputVisible,variant:"tertiary"},(0,i18n_build_module.__)("Insert from URL")),isURLInputVisible&&(0,react.createElement)(InsertFromURLPopover,{src:src,onChange:onChangeSrc,onSubmit:onSubmitSrc,onClose:closeURLInput})),renderFeaturedImageToggle=()=>onToggleFeaturedImage&&(0,react.createElement)("div",{className:"block-editor-media-placeholder__url-input-container"},(0,react.createElement)(build_module_button.Z,{className:"block-editor-media-placeholder__button",onClick:onToggleFeaturedImage,variant:"tertiary"},(0,i18n_build_module.__)("Use featured image")));return disableMediaButtons?(0,react.createElement)(check,null,renderDropZone()):(0,react.createElement)(check,{fallback:renderPlaceholder(renderUrlSelectionUI())},(()=>{const libraryButton=null!=mediaLibraryButton?mediaLibraryButton:_ref6=>{let{open:open}=_ref6;return(0,react.createElement)(build_module_button.Z,{variant:"tertiary",onClick:()=>{open()}},(0,i18n_build_module.__)("Media Library"))},uploadMediaLibraryButton=(0,react.createElement)(media_upload,{addToGallery:addToGallery,gallery:multiple&&!(!allowedTypes||0===allowedTypes.length)&&allowedTypes.every((allowedType=>"image"===allowedType||allowedType.startsWith("image/"))),multiple:multiple,onSelect:onSelect,allowedTypes:allowedTypes,mode:"browse",value:Array.isArray(value)?value.map((_ref7=>{let{id:id}=_ref7;return id})):value.id,render:libraryButton});if(mediaUpload&&isAppender)return(0,react.createElement)(react.Fragment,null,renderDropZone(),(0,react.createElement)(form_file_upload.Z,{onChange:onUpload,accept:accept,multiple:multiple,render:_ref8=>{let{openFileDialog:openFileDialog}=_ref8;const content=(0,react.createElement)(react.Fragment,null,(0,react.createElement)(build_module_button.Z,{variant:"primary",className:classnames_default()("block-editor-media-placeholder__button","block-editor-media-placeholder__upload-button"),onClick:openFileDialog},(0,i18n_build_module.__)("Upload")),uploadMediaLibraryButton,renderUrlSelectionUI(),renderFeaturedImageToggle(),renderCancelLink());return renderPlaceholder(content)}}));if(mediaUpload){const content=(0,react.createElement)(react.Fragment,null,renderDropZone(),(0,react.createElement)(form_file_upload.Z,{variant:"primary",className:classnames_default()("block-editor-media-placeholder__button","block-editor-media-placeholder__upload-button"),onChange:onUpload,accept:accept,multiple:multiple},(0,i18n_build_module.__)("Upload")),uploadMediaLibraryButton,renderUrlSelectionUI(),renderFeaturedImageToggle(),renderCancelLink());return renderPlaceholder(content)}return renderPlaceholder(uploadMediaLibraryButton)})())})),build_module_serialize=__webpack_require__("./packages/element/build-module/serialize.js");function getDefaultUseItems(autocompleter){return filterValue=>{const[items,setItems]=(0,react.useState)([]);return(0,react.useLayoutEffect)((()=>{const{options:options,isDebounced:isDebounced}=autocompleter,loadOptions=(0,debounce.D)((()=>{const promise=Promise.resolve("function"==typeof options?options(filterValue):options).then((optionsData=>{if(promise.canceled)return;const keyedOptions=optionsData.map(((optionData,optionIndex)=>({key:`${autocompleter.name}-${optionIndex}`,value:optionData,label:autocompleter.getOptionLabel(optionData),keywords:autocompleter.getOptionKeywords?autocompleter.getOptionKeywords(optionData):[],isDisabled:!!autocompleter.isOptionDisabled&&autocompleter.isOptionDisabled(optionData)}))),search=new RegExp("(?:\\b|\\s|^)"+(0,strings.h)(filterValue),"i");setItems(function filterOptions(search){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],maxResults=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;const filtered=[];for(let i=0;i<options.length;i++){const option=options[i];let{keywords:keywords=[]}=option;if("string"==typeof option.label&&(keywords=[...keywords,option.label]),keywords.some((keyword=>search.test(remove_accents_default()(keyword))))&&(filtered.push(option),filtered.length===maxResults))break}return filtered}(search,keyedOptions))}));return promise}),isDebounced?250:0),promise=loadOptions();return()=>{loadOptions.cancel(),promise&&(promise.canceled=!0)}}),[filterValue]),[items]}}function getAutoCompleterUI(autocompleter){const useItems=autocompleter.useItems?autocompleter.useItems:getDefaultUseItems(autocompleter);return function AutocompleterUI(_ref){let{filterValue:filterValue,instanceId:instanceId,listBoxId:listBoxId,className:className,selectedIndex:selectedIndex,onChangeOptions:onChangeOptions,onSelect:onSelect,onReset:onReset,reset:reset,value:value,contentRef:contentRef}=_ref;const[items]=useItems(filterValue),popoverAnchor=(0,rich_text_build_module.Wb)({editableContentElement:contentRef.current,value:value}),popoverRef=(0,react.useRef)();return function useOnClickOutside(ref,handler){(0,react.useEffect)((()=>{const listener=event=>{ref.current&&!ref.current.contains(event.target)&&handler(event)};return document.addEventListener("mousedown",listener),document.addEventListener("touchstart",listener),()=>{document.removeEventListener("mousedown",listener),document.removeEventListener("touchstart",listener)}}),[handler])}(popoverRef,reset),(0,react.useLayoutEffect)((()=>{onChangeOptions(items)}),[items]),!items.length>0?null:(0,react.createElement)(popover.Z,{focusOnMount:!1,onClose:onReset,placement:"top-start",className:"components-autocomplete__popover",anchor:popoverAnchor,ref:popoverRef},(0,react.createElement)("div",{id:listBoxId,role:"listbox",className:"components-autocomplete__results"},(0,lodash.map)(items,((option,index)=>(0,react.createElement)(build_module_button.Z,{key:option.key,id:`components-autocomplete-item-${instanceId}-${option.key}`,role:"option","aria-selected":index===selectedIndex,disabled:option.isDisabled,className:classnames_default()("components-autocomplete__result",className,{"is-selected":index===selectedIndex}),onClick:()=>onSelect(option)},option.label)))))}}function useAutocomplete(_ref){let{record:record,onChange:onChange,onReplace:onReplace,completers:completers,contentRef:contentRef}=_ref;const debouncedSpeak=(0,use_debounce.Z)(a11y_build_module.D,500),instanceId=(0,use_instance_id.Z)(useAutocomplete),[selectedIndex,setSelectedIndex]=(0,react.useState)(0),[filteredOptions,setFilteredOptions]=(0,react.useState)([]),[filterValue,setFilterValue]=(0,react.useState)(""),[autocompleter,setAutocompleter]=(0,react.useState)(null),[AutocompleterUI,setAutocompleterUI]=(0,react.useState)(null),backspacing=(0,react.useRef)(!1);function select(option){const{getOptionCompletion:getOptionCompletion}=autocompleter||{};if(!option.isDisabled){if(getOptionCompletion){const completion=getOptionCompletion(option.value,filterValue),{action:action,value:value}=void 0===completion.action||void 0===completion.value?{action:"insert-at-caret",value:completion}:completion;if("replace"===action)return void onReplace([value]);"insert-at-caret"===action&&function insertCompletion(replacement){const end=record.start,start=end-autocompleter.triggerPrefix.length-filterValue.length,toInsert=(0,rich_text_build_module.Ue)({html:(0,build_module_serialize.ZP)(replacement)});onChange((0,rich_text_build_module.$T)(record,toInsert,start,end))}(value)}reset()}}function reset(){setSelectedIndex(0),setFilteredOptions([]),setFilterValue(""),setAutocompleter(null),setAutocompleterUI(null)}const textContent=(0,react.useMemo)((()=>{if((0,rich_text_build_module.zb)(record))return(0,rich_text_build_module.FB)((0,rich_text_build_module.tP)(record,0))}),[record]);(0,react.useEffect)((()=>{if(!textContent)return void reset();const text=remove_accents_default()(textContent),textAfterSelection=(0,rich_text_build_module.FB)((0,rich_text_build_module.tP)(record,void 0,(0,rich_text_build_module.FB)(record).length)),completer=null==completers?void 0:completers.find((_ref2=>{let{triggerPrefix:triggerPrefix,allowContext:allowContext}=_ref2;const index=text.lastIndexOf(triggerPrefix);if(-1===index)return!1;const textWithoutTrigger=text.slice(index+triggerPrefix.length);if(textWithoutTrigger.length>50)return!1;const mismatch=0===filteredOptions.length,hasOneTriggerWord=1===textWithoutTrigger.split(/\s/).length,matchingWhileBackspacing=backspacing.current&&textWithoutTrigger.split(/\s/).length<=3;return!(mismatch&&!matchingWhileBackspacing&&!hasOneTriggerWord)&&(!(allowContext&&!allowContext(text.slice(0,index),textAfterSelection))&&(!/^\s/.test(textWithoutTrigger)&&!/\s\s+$/.test(textWithoutTrigger)&&/[\u0000-\uFFFF]*$/.test(textWithoutTrigger)))}));if(!completer)return void reset();const safeTrigger=(0,strings.h)(completer.triggerPrefix),match=text.slice(text.lastIndexOf(completer.triggerPrefix)).match(new RegExp(`${safeTrigger}([\0-]*)$`)),query=match&&match[1];setAutocompleter(completer),setAutocompleterUI((()=>completer!==autocompleter?getAutoCompleterUI(completer):AutocompleterUI)),setFilterValue(query)}),[textContent]);const{key:selectedKey=""}=filteredOptions[selectedIndex]||{},{className:className}=autocompleter||{},isExpanded=!!autocompleter&&filteredOptions.length>0,listBoxId=isExpanded?`components-autocomplete-listbox-${instanceId}`:null;return{listBoxId:listBoxId,activeId:isExpanded?`components-autocomplete-item-${instanceId}-${selectedKey}`:null,onKeyDown:function handleKeyDown(event){if(backspacing.current="Backspace"===event.key,autocompleter&&0!==filteredOptions.length&&!event.defaultPrevented&&!event.isComposing&&229!==event.keyCode){switch(event.key){case"ArrowUp":setSelectedIndex((0===selectedIndex?filteredOptions.length:selectedIndex)-1);break;case"ArrowDown":setSelectedIndex((selectedIndex+1)%filteredOptions.length);break;case"Escape":setAutocompleter(null),setAutocompleterUI(null),event.preventDefault();break;case"Enter":select(filteredOptions[selectedIndex]);break;case"ArrowLeft":case"ArrowRight":return void reset();default:return}event.preventDefault()}},popover:void 0!==record.start&&AutocompleterUI&&(0,react.createElement)(AutocompleterUI,{className:className,filterValue:filterValue,instanceId:instanceId,listBoxId:listBoxId,selectedIndex:selectedIndex,onChangeOptions:function onChangeOptions(options){setSelectedIndex(options.length===filteredOptions.length?selectedIndex:0),setFilteredOptions(options),function announce(options){debouncedSpeak&&(options.length?debouncedSpeak((0,i18n_build_module.gB)((0,i18n_build_module._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",options.length),options.length),"assertive"):debouncedSpeak((0,i18n_build_module.__)("No results."),"assertive"))}(options)},onSelect:select,value:record,contentRef:contentRef,reset:reset})}}const block_noop=()=>{};var autocompleters_block=function createBlockCompleter(){return{name:"blocks",className:"block-editor-autocompleters__block",triggerPrefix:"/",useItems(filterValue){const{rootClientId:rootClientId,selectedBlockName:selectedBlockName}=(0,use_select.Z)((select=>{const{getSelectedBlockClientId:getSelectedBlockClientId,getBlockName:getBlockName,getBlockInsertionPoint:getBlockInsertionPoint}=select(store),selectedBlockClientId=getSelectedBlockClientId();return{selectedBlockName:selectedBlockClientId?getBlockName(selectedBlockClientId):null,rootClientId:getBlockInsertionPoint().rootClientId}}),[]),[items,categories,collections]=use_block_types_state(rootClientId,block_noop),filteredItems=(0,react.useMemo)((()=>(filterValue.trim()?searchBlockItems(items,categories,collections,filterValue):orderBy(items,"frecency","desc")).filter((item=>item.name!==selectedBlockName)).slice(0,9)),[filterValue,selectedBlockName,items,categories,collections]),options=(0,react.useMemo)((()=>filteredItems.map((blockItem=>{const{title:title,icon:icon,isDisabled:isDisabled}=blockItem;return{key:`block-${blockItem.id}`,value:blockItem,label:(0,react.createElement)(react.Fragment,null,(0,react.createElement)(block_icon,{key:"icon",icon:icon,showColors:!0}),title),isDisabled:isDisabled}}))),[filteredItems]);return[options]},allowContext:(before,after)=>!(/\S/.test(before)||/\S/.test(after)),getOptionCompletion(inserterItem){const{name:name,initialAttributes:initialAttributes,innerBlocks:innerBlocks}=inserterItem;return{action:"replace",value:(0,build_module.j4)(name,initialAttributes,(0,build_module.ne)(innerBlocks))}}}}();var library_post=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"m7.3 9.7 1.4 1.4c.2-.2.3-.3.4-.5 0 0 0-.1.1-.1.3-.5.4-1.1.3-1.6L12 7 9 4 7.2 6.5c-.6-.1-1.1 0-1.6.3 0 0-.1 0-.1.1-.3.1-.4.2-.6.4l1.4 1.4L4 11v1h1l2.3-2.3zM4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4z"}));var autocompleters_link=function createLinkCompleter(){return{name:"links",className:"block-editor-autocompleters__link",triggerPrefix:"[[",options:async letters=>{let options=await(0,api_fetch_build_module.Z)({path:(0,add_query_args.f)("/wp/v2/search",{per_page:10,search:letters,type:"post",order_by:"menu_order"})});return options=options.filter((option=>""!==option.title)),options},getOptionKeywords:item=>[...item.title.split(/\s+/)],getOptionLabel:item=>(0,react.createElement)(react.Fragment,null,(0,react.createElement)(build_module_icon.Z,{key:"icon",icon:"page"===item.subtype?page.Z:library_post}),item.title),getOptionCompletion:item=>(0,react.createElement)("a",{href:item.url},item.title)}}();const autocomplete_EMPTY_ARRAY=[];function useCompleters(_ref){let{completers:completers=autocomplete_EMPTY_ARRAY}=_ref;const{name:name}=useBlockEditContext();return(0,react.useMemo)((()=>{let filteredCompleters=[...completers,autocompleters_link];return(name===(0,build_module.UT)()||(0,build_module.Dx)(name,"__experimentalSlashInserter",!1))&&(filteredCompleters=[...filteredCompleters,autocompleters_block]),(0,hooks_build_module.H7)("editor.Autocomplete.completers")&&(filteredCompleters===completers&&(filteredCompleters=filteredCompleters.map(lodash.clone)),filteredCompleters=(0,hooks_build_module.O)("editor.Autocomplete.completers",filteredCompleters,name)),filteredCompleters}),[completers,name])}function useBlockEditorAutocompleteProps(props){return function useAutocompleteProps(options){const[isVisible,setIsVisible]=(0,react.useState)(!1),ref=(0,react.useRef)(),recordAfterInput=(0,react.useRef)(),onKeyDownRef=(0,react.useRef)(),{popover:popover,listBoxId:listBoxId,activeId:activeId,onKeyDown:onKeyDown}=useAutocomplete({...options,contentRef:ref});onKeyDownRef.current=onKeyDown,(0,react.useEffect)((()=>{isVisible&&(recordAfterInput.current?recordAfterInput.current.start===options.record.start&&recordAfterInput.current.end===options.record.end||(setIsVisible(!1),recordAfterInput.current=null):recordAfterInput.current=options.record)}),[options.record]);const mergedRefs=(0,use_merge_refs.Z)([ref,(0,use_ref_effect.Z)((element=>{function _onKeyDown(event){onKeyDownRef.current(event)}function _onInput(){setIsVisible(!0),recordAfterInput.current=null}return element.addEventListener("keydown",_onKeyDown),element.addEventListener("input",_onInput),()=>{element.removeEventListener("keydown",_onKeyDown),element.removeEventListener("input",_onInput)}}),[])]);return isVisible?{ref:mergedRefs,children:popover,"aria-autocomplete":listBoxId?"list":void 0,"aria-owns":listBoxId,"aria-activedescendant":activeId}:{ref:mergedRefs}}({...props,completers:useCompleters(props)})}const format_toolbar_POPOVER_PROPS={position:"bottom right",variant:"toolbar"};var format_toolbar=()=>(0,react.createElement)(react.Fragment,null,["bold","italic","link","unknown"].map((format=>(0,react.createElement)(slot_fill.g7,{name:`RichText.ToolbarControls.${format}`,key:format}))),(0,react.createElement)(slot_fill.g7,{name:"RichText.ToolbarControls"},(fills=>{if(!fills.length)return null;const allProps=fills.map((_ref=>{let[{props:props}]=_ref;return props})),hasActive=allProps.some((_ref2=>{let{isActive:isActive}=_ref2;return isActive}));return(0,react.createElement)(toolbar_item.Z,null,(toggleProps=>(0,react.createElement)(dropdown_menu.Z,{icon:chevron_down.Z,label:(0,i18n_build_module.__)("More"),toggleProps:{...toggleProps,className:classnames_default()(toggleProps.className,{"is-pressed":hasActive}),describedBy:(0,i18n_build_module.__)("Displays more block tools")},controls:orderBy(fills.map((_ref3=>{let[{props:props}]=_ref3;return props})),"title"),popoverProps:format_toolbar_POPOVER_PROPS})))})));function InlineSelectionToolbar(_ref){let{value:value,editableContentElement:editableContentElement,activeFormats:activeFormats}=_ref;const lastFormat=activeFormats[activeFormats.length-1],lastFormatType=null==lastFormat?void 0:lastFormat.type,settings=(0,use_select.Z)((select=>select(rich_text_build_module.h).getFormatType(lastFormatType)),[lastFormatType]),popoverAnchor=(0,rich_text_build_module.Wb)({editableContentElement:editableContentElement,value:value,settings:settings});return(0,react.createElement)(InlineToolbar,{popoverAnchor:popoverAnchor})}function InlineToolbar(_ref2){let{popoverAnchor:popoverAnchor}=_ref2;return(0,react.createElement)(popover.Z,{placement:"top",focusOnMount:!1,anchor:popoverAnchor,className:"block-editor-rich-text__inline-format-toolbar",__unstableSlotName:"block-toolbar"},(0,react.createElement)(navigable_toolbar,{className:"block-editor-rich-text__inline-format-toolbar-group","aria-label":(0,i18n_build_module.__)("Format tools")},(0,react.createElement)(toolbar_group.Z,null,(0,react.createElement)(format_toolbar,null))))}var format_toolbar_container=_ref3=>{let{inline:inline,editableContentElement:editableContentElement,value:value}=_ref3;const hasInlineToolbar=(0,use_select.Z)((select=>select(store).getSettings().hasInlineToolbar),[]);if(inline)return(0,react.createElement)(InlineToolbar,{popoverAnchor:editableContentElement});if(hasInlineToolbar){const activeFormats=(0,rich_text_build_module.DL)(value);return(0,rich_text_build_module.zb)(value)&&!activeFormats.length?null:(0,react.createElement)(InlineSelectionToolbar,{editableContentElement:editableContentElement,value:value,activeFormats:activeFormats})}return(0,react.createElement)(block_controls,{group:"inline"},(0,react.createElement)(format_toolbar,null))};function useUndoAutomaticChange(){const{didAutomaticChange:didAutomaticChange,getSettings:getSettings}=(0,use_select.Z)(store);return(0,use_ref_effect.Z)((element=>{function onKeyDown(event){const{keyCode:keyCode}=event;if(event.defaultPrevented)return;if(keyCode!==keycodes_build_module.yY&&keyCode!==keycodes_build_module.ZH&&keyCode!==keycodes_build_module.hY)return;const{__experimentalUndo:__experimentalUndo}=getSettings();__experimentalUndo&&didAutomaticChange()&&(event.preventDefault(),__experimentalUndo())}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}}),[])}var shortcode_build_module=__webpack_require__("./packages/shortcode/build-module/index.js");function addActiveFormats(value,activeFormats){if(null!=activeFormats&&activeFormats.length){let index=value.formats.length;for(;index--;)value.formats[index]=[...activeFormats,...value.formats[index]||[]]}}function getMultilineTag(multiline){if(!0===multiline||"p"===multiline||"li"===multiline)return!0===multiline?"p":multiline}function getAllowedFormats(_ref){let{allowedFormats:allowedFormats,disableFormats:disableFormats}=_ref;return disableFormats?getAllowedFormats.EMPTY_ARRAY:allowedFormats}getAllowedFormats.EMPTY_ARRAY=[];function splitValue(_ref){let{value:value,pastedBlocks:pastedBlocks=[],onReplace:onReplace,onSplit:onSplit,onSplitMiddle:onSplitMiddle,multilineTag:multilineTag}=_ref;if(!onReplace||!onSplit)return;const{start:start=0,end:end=0}=value,valueWithEnsuredSelection={...value,start:start,end:end},blocks=[],[before,after]=(0,rich_text_build_module.Vl)(valueWithEnsuredSelection),hasPastedBlocks=pastedBlocks.length>0;let lastPastedBlockIndex=-1;const isAfterOriginal=(0,rich_text_build_module.xb)(before)&&!(0,rich_text_build_module.xb)(after);hasPastedBlocks&&(0,rich_text_build_module.xb)(before)||(blocks.push(onSplit((0,rich_text_build_module.Jz)({value:before,multilineTag:multilineTag}),!isAfterOriginal)),lastPastedBlockIndex+=1),hasPastedBlocks?(blocks.push(...pastedBlocks),lastPastedBlockIndex+=pastedBlocks.length):onSplitMiddle&&blocks.push(onSplitMiddle()),(hasPastedBlocks||onSplitMiddle)&&(0,rich_text_build_module.xb)(after)||blocks.push(onSplit((0,rich_text_build_module.Jz)({value:after,multilineTag:multilineTag}),isAfterOriginal));onReplace(blocks,hasPastedBlocks?lastPastedBlockIndex:1,hasPastedBlocks?-1:0)}function shouldDismissPastedFiles(files,html){if(html&&1===(null==files?void 0:files.length)&&0===files[0].type.indexOf("image/")){var _html$match;const IMAGE_TAG=/<\s*img\b/gi;if(1!==(null===(_html$match=html.match(IMAGE_TAG))||void 0===_html$match?void 0:_html$match.length))return!0;const IMG_WITH_LOCAL_SRC=/<\s*img\b[^>]*\bsrc="file:\/\//i;if(html.match(IMG_WITH_LOCAL_SRC))return!0}return!1}function adjustLines(value,isMultiline){return isMultiline?(0,rich_text_build_module.gx)(value,/\n+/g,rich_text_build_module.M4):(0,rich_text_build_module.gx)(value,new RegExp(rich_text_build_module.M4,"g"),"\n")}function usePasteHandler(props){const propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{function _onPaste(event){const{isSelected:isSelected,disableFormats:disableFormats,onChange:onChange,value:value,formatTypes:formatTypes,tagName:tagName,onReplace:onReplace,onSplit:onSplit,onSplitMiddle:onSplitMiddle,__unstableEmbedURLOnPaste:__unstableEmbedURLOnPaste,multilineTag:multilineTag,preserveWhiteSpace:preserveWhiteSpace,pastePlainText:pastePlainText}=propsRef.current;if(!isSelected)return;const{clipboardData:clipboardData}=event;let plainText="",html="";try{plainText=clipboardData.getData("text/plain"),html=clipboardData.getData("text/html")}catch(error1){try{html=clipboardData.getData("Text")}catch(error2){return}}if(html=function removeWindowsFragments(html){const startStr="\x3c!--StartFragment--\x3e",startIdx=html.indexOf(startStr);if(!(startIdx>-1))return html;html=html.substring(startIdx+startStr.length);const endStr="\x3c!--EndFragment--\x3e",endIdx=html.indexOf(endStr);endIdx>-1&&(html=html.substring(0,endIdx));return html}(html),html=function removeCharsetMetaTag(html){const metaTag="<meta charset='utf-8'>";if(html.startsWith(metaTag))return html.slice(metaTag.length);return html}(html),event.preventDefault(),window.console.log("Received HTML:\n\n",html),window.console.log("Received plain text:\n\n",plainText),disableFormats)return void onChange((0,rich_text_build_module.$T)(value,plainText));const transformed=formatTypes.reduce(((accumlator,_ref)=>{let{__unstablePasteRule:__unstablePasteRule}=_ref;return __unstablePasteRule&&accumlator===value&&(accumlator=__unstablePasteRule(value,{html:html,plainText:plainText})),accumlator}),value);if(transformed!==value)return void onChange(transformed);const files=[...(0,data_transfer.f)(clipboardData)];if("true"===clipboardData.getData("rich-text")){const pastedMultilineTag=clipboardData.getData("rich-text-multi-line-tag")||void 0;let pastedValue=(0,rich_text_build_module.Ue)({html:html,multilineTag:pastedMultilineTag,multilineWrapperTags:"li"===pastedMultilineTag?["ul","ol"]:void 0,preserveWhiteSpace:preserveWhiteSpace});return pastedValue=adjustLines(pastedValue,!!multilineTag),addActiveFormats(pastedValue,value.activeFormats),void onChange((0,rich_text_build_module.$T)(value,pastedValue))}if(pastePlainText)return void onChange((0,rich_text_build_module.$T)(value,(0,rich_text_build_module.Ue)({text:plainText})));if(null!=files&&files.length&&window.console.log("Received items:\n\n",files),null!=files&&files.length&&!shouldDismissPastedFiles(files,html)){const fromTransforms=(0,build_module.Xn)("from"),blocks=files.reduce(((accumulator,file)=>{const transformation=(0,build_module.MC)(fromTransforms,(transform=>"files"===transform.type&&transform.isMatch([file])));return transformation&&accumulator.push(transformation.transform([file])),accumulator}),[]).flat();if(!blocks.length)return;return void(onReplace&&(0,rich_text_build_module.xb)(value)?onReplace(blocks):splitValue({value:value,pastedBlocks:blocks,onReplace:onReplace,onSplit:onSplit,onSplitMiddle:onSplitMiddle,multilineTag:multilineTag}))}let mode=onReplace&&onSplit?"AUTO":"INLINE";var text;"AUTO"===mode&&(0,rich_text_build_module.xb)(value)&&(text=plainText,(0,shortcode_build_module.kd)(".*").test(text))&&(mode="BLOCKS"),__unstableEmbedURLOnPaste&&(0,rich_text_build_module.xb)(value)&&(0,is_url.P)(plainText.trim())&&(mode="BLOCKS");const content=(0,build_module.ag)({HTML:html,plainText:plainText,mode:mode,tagName:tagName,preserveWhiteSpace:preserveWhiteSpace});if("string"==typeof content){let valueToInsert=(0,rich_text_build_module.Ue)({html:content});valueToInsert=adjustLines(valueToInsert,!!multilineTag),addActiveFormats(valueToInsert,value.activeFormats),onChange((0,rich_text_build_module.$T)(value,valueToInsert))}else content.length>0&&(onReplace&&(0,rich_text_build_module.xb)(value)?onReplace(content,content.length-1,-1):splitValue({value:value,pastedBlocks:content,onReplace:onReplace,onSplit:onSplit,onSplitMiddle:onSplitMiddle,multilineTag:multilineTag}))}return element.addEventListener("paste",_onPaste),()=>{element.removeEventListener("paste",_onPaste)}}),[])}const wrapSelectionSettings=["`",'"',"'","",""];function useBeforeInputRules(props){const{__unstableMarkLastChangeAsPersistent:__unstableMarkLastChangeAsPersistent,__unstableMarkAutomaticChange:__unstableMarkAutomaticChange}=(0,use_dispatch.Z)(store),propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{function onInput(event){const{inputType:inputType,data:data}=event,{value:value,onChange:onChange}=propsRef.current;if("insertText"!==inputType)return;if((0,rich_text_build_module.zb)(value))return;const pair=(0,hooks_build_module.O)("blockEditor.wrapSelectionSettings",wrapSelectionSettings).find((_ref=>{let[startChar,endChar]=_ref;return startChar===data||endChar===data}));if(!pair)return;const[startChar,endChar=startChar]=pair,start=value.start,end=value.end+startChar.length;let newValue=(0,rich_text_build_module.$T)(value,startChar,start,start);newValue=(0,rich_text_build_module.$T)(newValue,endChar,end,end),__unstableMarkLastChangeAsPersistent(),onChange(newValue),__unstableMarkAutomaticChange();const init={};for(const key in event)init[key]=event[key];init.data=endChar;const{ownerDocument:ownerDocument}=element,{defaultView:defaultView}=ownerDocument,newEvent=new defaultView.InputEvent("input",init);event.target.dispatchEvent(newEvent),event.preventDefault()}return element.addEventListener("beforeinput",onInput),()=>{element.removeEventListener("beforeinput",onInput)}}),[])}function findSelection(blocks){let i=blocks.length;for(;i--;){const attributeKey=retrieveSelectedAttribute(blocks[i].attributes);if(attributeKey)return blocks[i].attributes[attributeKey]=blocks[i].attributes[attributeKey].replace("",""),blocks[i].clientId;const nestedSelection=findSelection(blocks[i].innerBlocks);if(nestedSelection)return nestedSelection}}function useInputRules(props){const{__unstableMarkLastChangeAsPersistent:__unstableMarkLastChangeAsPersistent,__unstableMarkAutomaticChange:__unstableMarkAutomaticChange}=(0,use_dispatch.Z)(store),propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{function inputRule(){const{value:value,onReplace:onReplace,selectionChange:selectionChange}=propsRef.current;if(!onReplace)return;const{start:start,text:text}=value;if(" "!==text.slice(start-1,start))return;const trimmedTextBefore=text.slice(0,start).trim(),prefixTransforms=(0,build_module.Xn)("from").filter((_ref=>{let{type:type}=_ref;return"prefix"===type})),transformation=(0,build_module.MC)(prefixTransforms,(_ref2=>{let{prefix:prefix}=_ref2;return trimmedTextBefore===prefix}));if(!transformation)return;const content=(0,rich_text_build_module.Jz)({value:(0,rich_text_build_module.$T)(value,"",0,start)}),block=transformation.transform(content);selectionChange(findSelection([block])),onReplace([block]),__unstableMarkAutomaticChange()}function onInput(event){const{inputType:inputType,type:type}=event,{value:value,onChange:onChange,__unstableAllowPrefixTransformations:__unstableAllowPrefixTransformations,formatTypes:formatTypes}=propsRef.current;if("insertText"!==inputType&&"compositionend"!==type)return;__unstableAllowPrefixTransformations&&inputRule&&inputRule();const transformed=formatTypes.reduce(((accumlator,_ref3)=>{let{__unstableInputRule:__unstableInputRule}=_ref3;return __unstableInputRule&&(accumlator=__unstableInputRule(accumlator)),accumlator}),function preventEventDiscovery(value){const{start:start,text:text}=value;return start<"tales of gutenberg".length||"tales of gutenberg"!==text.slice(start-"tales of gutenberg".length,start).toLowerCase()?value:(0,rich_text_build_module.$T)(value," ")}(value));transformed!==value&&(__unstableMarkLastChangeAsPersistent(),onChange({...transformed,activeFormats:value.activeFormats}),__unstableMarkAutomaticChange())}return element.addEventListener("input",onInput),element.addEventListener("compositionend",onInput),()=>{element.removeEventListener("input",onInput),element.removeEventListener("compositionend",onInput)}}),[])}function useEnter(props){const{__unstableMarkAutomaticChange:__unstableMarkAutomaticChange}=(0,use_dispatch.Z)(store),propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{function onKeyDown(event){if(event.defaultPrevented)return;const{removeEditorOnlyFormats:removeEditorOnlyFormats,value:value,onReplace:onReplace,onSplit:onSplit,onSplitMiddle:onSplitMiddle,multilineTag:multilineTag,onChange:onChange,disableLineBreaks:disableLineBreaks,onSplitAtEnd:onSplitAtEnd}=propsRef.current;if(event.keyCode!==keycodes_build_module.K5)return;event.preventDefault();const _value={...value};_value.formats=removeEditorOnlyFormats(value);const canSplit=onReplace&&onSplit;if(onReplace){const transforms=(0,build_module.Xn)("from").filter((_ref=>{let{type:type}=_ref;return"enter"===type})),transformation=(0,build_module.MC)(transforms,(item=>item.regExp.test(_value.text)));transformation&&(onReplace([transformation.transform({content:_value.text})]),__unstableMarkAutomaticChange())}if(multilineTag)event.shiftKey?disableLineBreaks||onChange((0,rich_text_build_module.$T)(_value,"\n")):canSplit&&(0,rich_text_build_module.If)(_value)?splitValue({value:_value,onReplace:onReplace,onSplit:onSplit,onSplitMiddle:onSplitMiddle,multilineTag:multilineTag}):onChange((0,rich_text_build_module.cw)(_value));else{const{text:text,start:start,end:end}=_value,canSplitAtEnd=onSplitAtEnd&&start===end&&end===text.length;event.shiftKey||!canSplit&&!canSplitAtEnd?disableLineBreaks||onChange((0,rich_text_build_module.$T)(_value,"\n")):!canSplit&&canSplitAtEnd?onSplitAtEnd():canSplit&&splitValue({value:_value,onReplace:onReplace,onSplit:onSplit,onSplitMiddle:onSplitMiddle,multilineTag:multilineTag})}}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}}),[])}function formatTypesSelector(select){return select(rich_text_build_module.h).getFormatTypes()}const interactiveContentTags=new Set(["a","audio","button","details","embed","iframe","input","label","select","textarea","video"]);function getPrefixedSelectKeys(selected,prefix){return selected[prefix]?selected[prefix]:Object.keys(selected).filter((key=>key.startsWith(prefix+"."))).reduce(((accumulator,key)=>(accumulator[key.slice(prefix.length+1)]=selected[key],accumulator)),{})}function useShortcuts(keyboardShortcuts){return(0,use_ref_effect.Z)((element=>{function onKeyDown(event){for(const keyboardShortcut of keyboardShortcuts.current)keyboardShortcut(event)}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}}),[])}function useInputEvents(inputEvents){return(0,use_ref_effect.Z)((element=>{function onInput(event){for(const keyboardShortcut of inputEvents.current)keyboardShortcut(event)}return element.addEventListener("input",onInput),()=>{element.removeEventListener("input",onInput)}}),[])}function useInsertReplacementText(){const{__unstableMarkLastChangeAsPersistent:__unstableMarkLastChangeAsPersistent}=(0,use_dispatch.Z)(store);return(0,use_ref_effect.Z)((element=>{function onInput(event){"insertReplacementText"===event.inputType&&__unstableMarkLastChangeAsPersistent()}return element.addEventListener("beforeinput",onInput),()=>{element.removeEventListener("beforeinput",onInput)}}),[])}function useFirefoxCompat(){const{isMultiSelecting:isMultiSelecting}=(0,use_select.Z)(store);return(0,use_ref_effect.Z)((element=>{function onFocus(){if(!isMultiSelecting())return;const parentEditable=element.parentElement.closest('[contenteditable="true"]');parentEditable&&parentEditable.focus()}return element.addEventListener("focus",onFocus),()=>{element.removeEventListener("focus",onFocus)}}),[])}function FormatEdit(_ref){let{formatTypes:formatTypes,onChange:onChange,onFocus:onFocus,value:value,forwardedRef:forwardedRef}=_ref;return formatTypes.map((settings=>{const{name:name,edit:Edit}=settings;if(!Edit)return null;const activeFormat=(0,rich_text_build_module.Ye)(value,name);let isActive=void 0!==activeFormat;const activeObject=(0,rich_text_build_module.Jj)(value),isObjectActive=void 0!==activeObject&&activeObject.type===name;if("core/link"===name&&!(0,rich_text_build_module.zb)(value)){var _formats$value$start,_formats;const formats=value.formats,linkFormatAtStart=null===(_formats$value$start=formats[value.start])||void 0===_formats$value$start?void 0:_formats$value$start.find((_ref2=>{let{type:type}=_ref2;return"core/link"===type})),linkFormatAtEnd=null===(_formats=formats[value.end-1])||void 0===_formats?void 0:_formats.find((_ref3=>{let{type:type}=_ref3;return"core/link"===type}));linkFormatAtStart&&linkFormatAtEnd&&linkFormatAtStart===linkFormatAtEnd||(isActive=!1)}return(0,react.createElement)(Edit,{key:name,isActive:isActive,activeAttributes:isActive&&activeFormat.attributes||{},isObjectActive:isObjectActive,activeObjectAttributes:isObjectActive&&activeObject.attributes||{},value:value,onChange:onChange,onFocus:onFocus,contentRef:forwardedRef})}))}const keyboardShortcutContext=(0,react.createContext)(),inputEventContext=(0,react.createContext)();const ForwardedRichTextContainer=(0,react.forwardRef)((function RichTextWrapper(_ref,forwardedRef){let{children:children,tagName:tagName="div",value:originalValue="",onChange:originalOnChange,isSelected:originalIsSelected,multiline:multiline,inlineToolbar:inlineToolbar,wrapperClassName:wrapperClassName,autocompleters:autocompleters,onReplace:onReplace,placeholder:placeholder,allowedFormats:allowedFormats,withoutInteractiveFormatting:withoutInteractiveFormatting,onRemove:onRemove,onMerge:onMerge,onSplit:onSplit,__unstableOnSplitAtEnd:onSplitAtEnd,__unstableOnSplitMiddle:onSplitMiddle,identifier:identifier,preserveWhiteSpace:preserveWhiteSpace,__unstablePastePlainText:pastePlainText,__unstableEmbedURLOnPaste:__unstableEmbedURLOnPaste,__unstableDisableFormats:disableFormats,disableLineBreaks:disableLineBreaks,unstableOnFocus:unstableOnFocus,__unstableAllowPrefixTransformations:__unstableAllowPrefixTransformations,...props}=_ref;multiline&&(0,deprecated_build_module.Z)("wp.blockEditor.RichText multiline prop",{since:"6.1",version:"6.3",alternative:"nested blocks (InnerBlocks)",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/nested-blocks-inner-blocks/"});const instanceId=(0,use_instance_id.Z)(RichTextWrapper);identifier=identifier||instanceId,props=function removeNativeProps(props){const{__unstableMobileNoFocusOnMount:__unstableMobileNoFocusOnMount,deleteEnter:deleteEnter,placeholderTextColor:placeholderTextColor,textAlign:textAlign,selectionColor:selectionColor,tagsToEliminate:tagsToEliminate,rootTagsToEliminate:rootTagsToEliminate,disableEditingMenu:disableEditingMenu,fontSize:fontSize,fontFamily:fontFamily,fontWeight:fontWeight,fontStyle:fontStyle,minWidth:minWidth,maxWidth:maxWidth,setRef:setRef,disableSuggestions:disableSuggestions,disableAutocorrection:disableAutocorrection,...restProps}=props;return restProps}(props);const anchorRef=(0,react.useRef)(),{clientId:clientId}=useBlockEditContext(),{selectionStart:selectionStart,selectionEnd:selectionEnd,isSelected:isSelected}=(0,use_select.Z)((select=>{const{getSelectionStart:getSelectionStart,getSelectionEnd:getSelectionEnd}=select(store),selectionStart=getSelectionStart(),selectionEnd=getSelectionEnd();let isSelected;return void 0===originalIsSelected?isSelected=selectionStart.clientId===clientId&&selectionEnd.clientId===clientId&&selectionStart.attributeKey===identifier:originalIsSelected&&(isSelected=selectionStart.clientId===clientId),{selectionStart:isSelected?selectionStart.offset:void 0,selectionEnd:isSelected?selectionEnd.offset:void 0,isSelected:isSelected}})),{getSelectionStart:getSelectionStart,getSelectionEnd:getSelectionEnd,getBlockRootClientId:getBlockRootClientId}=(0,use_select.Z)(store),{selectionChange:selectionChange}=(0,use_dispatch.Z)(store),multilineTag=getMultilineTag(multiline),adjustedAllowedFormats=getAllowedFormats({allowedFormats:allowedFormats,disableFormats:disableFormats}),hasFormats=!adjustedAllowedFormats||adjustedAllowedFormats.length>0;let adjustedValue=originalValue,adjustedOnChange=originalOnChange;Array.isArray(originalValue)&&((0,deprecated_build_module.Z)("wp.blockEditor.RichText value prop as children type",{since:"6.1",version:"6.3",alternative:"value prop as string",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),adjustedValue=build_module.pI.toHTML(originalValue),adjustedOnChange=newValue=>originalOnChange(build_module.pI.fromDOM((0,rich_text_build_module._b)(document,newValue).childNodes)));const onSelectionChange=(0,react.useCallback)(((start,end)=>{const selection={},unset=void 0===start&&void 0===end;if("number"==typeof start||unset){if(void 0===end&&getBlockRootClientId(clientId)!==getBlockRootClientId(getSelectionEnd().clientId))return;selection.start={clientId:clientId,attributeKey:identifier,offset:start}}if("number"==typeof end||unset){if(void 0===start&&getBlockRootClientId(clientId)!==getBlockRootClientId(getSelectionStart().clientId))return;selection.end={clientId:clientId,attributeKey:identifier,offset:end}}selectionChange(selection)}),[clientId,identifier]),{formatTypes:formatTypes,prepareHandlers:prepareHandlers,valueHandlers:valueHandlers,changeHandlers:changeHandlers,dependencies:dependencies}=function useFormatTypes(_ref2){let{clientId:clientId,identifier:identifier,withoutInteractiveFormatting:withoutInteractiveFormatting,allowedFormats:allowedFormats}=_ref2;const allFormatTypes=(0,use_select.Z)(formatTypesSelector,[]),formatTypes=(0,react.useMemo)((()=>allFormatTypes.filter((_ref3=>{let{name:name,tagName:tagName}=_ref3;return!(allowedFormats&&!allowedFormats.includes(name)||withoutInteractiveFormatting&&interactiveContentTags.has(tagName))}))),[allFormatTypes,allowedFormats,interactiveContentTags]),keyedSelected=(0,use_select.Z)((select=>formatTypes.reduce(((accumulator,type)=>{return type.__experimentalGetPropsForEditableTreePreparation?{...accumulator,...(selected=type.__experimentalGetPropsForEditableTreePreparation(select,{richTextIdentifier:identifier,blockClientId:clientId}),prefix=type.name,"object"!=typeof selected?{[prefix]:selected}:Object.fromEntries(Object.entries(selected).map((_ref=>{let[key,value]=_ref;return[`${prefix}.${key}`,value]}))))}:accumulator;var selected,prefix}),{})),[formatTypes,clientId,identifier]),dispatch=(0,use_dispatch.Z)(),prepareHandlers=[],valueHandlers=[],changeHandlers=[],dependencies=[];for(const key in keyedSelected)dependencies.push(keyedSelected[key]);return formatTypes.forEach((type=>{if(type.__experimentalCreatePrepareEditableTree){const handler=type.__experimentalCreatePrepareEditableTree(getPrefixedSelectKeys(keyedSelected,type.name),{richTextIdentifier:identifier,blockClientId:clientId});type.__experimentalCreateOnChangeEditableValue?valueHandlers.push(handler):prepareHandlers.push(handler)}if(type.__experimentalCreateOnChangeEditableValue){let dispatchers={};type.__experimentalGetPropsForEditableTreeChangeHandler&&(dispatchers=type.__experimentalGetPropsForEditableTreeChangeHandler(dispatch,{richTextIdentifier:identifier,blockClientId:clientId}));const selected=getPrefixedSelectKeys(keyedSelected,type.name);changeHandlers.push(type.__experimentalCreateOnChangeEditableValue({..."object"==typeof selected?selected:{},...dispatchers},{richTextIdentifier:identifier,blockClientId:clientId}))}})),{formatTypes:formatTypes,prepareHandlers:prepareHandlers,valueHandlers:valueHandlers,changeHandlers:changeHandlers,dependencies:dependencies}}({clientId:clientId,identifier:identifier,withoutInteractiveFormatting:withoutInteractiveFormatting,allowedFormats:adjustedAllowedFormats});function removeEditorOnlyFormats(value){return formatTypes.forEach((formatType=>{formatType.__experimentalCreatePrepareEditableTree&&(value=(0,rich_text_build_module.Ir)(value,formatType.name,0,value.text.length))})),value.formats}const{value:value,onChange:onChange,ref:richTextRef}=(0,rich_text_build_module.o2)({value:adjustedValue,onChange(html,_ref2){let{__unstableFormats:__unstableFormats,__unstableText:__unstableText}=_ref2;adjustedOnChange(html),Object.values(changeHandlers).forEach((changeHandler=>{changeHandler(__unstableFormats,__unstableText)}))},selectionStart:selectionStart,selectionEnd:selectionEnd,onSelectionChange:onSelectionChange,placeholder:placeholder,__unstableIsSelected:isSelected,__unstableMultilineTag:multilineTag,__unstableDisableFormats:disableFormats,preserveWhiteSpace:preserveWhiteSpace,__unstableDependencies:[...dependencies,tagName],__unstableAfterParse:function addEditorOnlyFormats(value){return valueHandlers.reduce(((accumulator,fn)=>fn(accumulator,value.text)),value.formats)},__unstableBeforeSerialize:removeEditorOnlyFormats,__unstableAddInvisibleFormats:function addInvisibleFormats(value){return prepareHandlers.reduce(((accumulator,fn)=>fn(accumulator,value.text)),value.formats)}}),autocompleteProps=useBlockEditorAutocompleteProps({onReplace:onReplace,completers:autocompleters,record:value,onChange:onChange});!function useMarkPersistent(_ref){let{html:html,value:value}=_ref;const previousText=(0,react.useRef)(),hasActiveFormats=value.activeFormats&&!!value.activeFormats.length,{__unstableMarkLastChangeAsPersistent:__unstableMarkLastChangeAsPersistent}=(0,use_dispatch.Z)(store);(0,react.useLayoutEffect)((()=>{if(previousText.current){if(previousText.current!==value.text){const timeout=window.setTimeout((()=>{__unstableMarkLastChangeAsPersistent()}),1e3);return previousText.current=value.text,()=>{window.clearTimeout(timeout)}}__unstableMarkLastChangeAsPersistent()}else previousText.current=value.text}),[html,hasActiveFormats])}({html:adjustedValue,value:value});const keyboardShortcuts=(0,react.useRef)(new Set),inputEvents=(0,react.useRef)(new Set);function onFocus(){var _anchorRef$current;null===(_anchorRef$current=anchorRef.current)||void 0===_anchorRef$current||_anchorRef$current.focus()}const TagName=tagName;return(0,react.createElement)(react.Fragment,null,isSelected&&(0,react.createElement)(keyboardShortcutContext.Provider,{value:keyboardShortcuts},(0,react.createElement)(inputEventContext.Provider,{value:inputEvents},(0,react.createElement)(popover.Z.__unstableSlotNameProvider,{value:"__unstable-block-tools-after"},children&&children({value:value,onChange:onChange,onFocus:onFocus}),(0,react.createElement)(FormatEdit,{value:value,onChange:onChange,onFocus:onFocus,formatTypes:formatTypes,forwardedRef:anchorRef})))),isSelected&&hasFormats&&(0,react.createElement)(format_toolbar_container,{inline:inlineToolbar,editableContentElement:anchorRef.current,value:value}),(0,react.createElement)(TagName,(0,esm_extends.Z)({role:"textbox","aria-multiline":!disableLineBreaks,"aria-label":placeholder},props,autocompleteProps,{ref:(0,use_merge_refs.Z)([forwardedRef,autocompleteProps.ref,props.ref,richTextRef,useBeforeInputRules({value:value,onChange:onChange}),useInputRules({value:value,onChange:onChange,__unstableAllowPrefixTransformations:__unstableAllowPrefixTransformations,formatTypes:formatTypes,onReplace:onReplace,selectionChange:selectionChange}),useInsertReplacementText(),(0,use_ref_effect.Z)((node=>{function onKeydown(event){(keycodes_build_module.vd.primary(event,"z")||keycodes_build_module.vd.primary(event,"y")||keycodes_build_module.vd.primaryShift(event,"z"))&&event.preventDefault()}return node.addEventListener("keydown",onKeydown),()=>{node.addEventListener("keydown",onKeydown)}}),[]),useShortcuts(keyboardShortcuts),useInputEvents(inputEvents),useUndoAutomaticChange(),usePasteHandler({isSelected:isSelected,disableFormats:disableFormats,onChange:onChange,value:value,formatTypes:formatTypes,tagName:tagName,onReplace:onReplace,onSplit:onSplit,onSplitMiddle:onSplitMiddle,__unstableEmbedURLOnPaste:__unstableEmbedURLOnPaste,multilineTag:multilineTag,preserveWhiteSpace:preserveWhiteSpace,pastePlainText:pastePlainText}),useEnter({removeEditorOnlyFormats:removeEditorOnlyFormats,value:value,onReplace:onReplace,onSplit:onSplit,onSplitMiddle:onSplitMiddle,multilineTag:multilineTag,onChange:onChange,disableLineBreaks:disableLineBreaks,onSplitAtEnd:onSplitAtEnd}),useFirefoxCompat(),anchorRef]),contentEditable:!0,suppressContentEditableWarning:!0,className:classnames_default()("block-editor-rich-text__editable",props.className,"rich-text"),onFocus:unstableOnFocus,onKeyDown:function onKeyDown(event){const{keyCode:keyCode}=event;if(!event.defaultPrevented&&(keyCode===keycodes_build_module.yY||keyCode===keycodes_build_module.ZH)){const{start:start,end:end,text:text}=value,isReverse=keyCode===keycodes_build_module.ZH,hasActiveFormats=value.activeFormats&&!!value.activeFormats.length;if(!(0,rich_text_build_module.zb)(value)||hasActiveFormats||isReverse&&0!==start||!isReverse&&end!==text.length)return;onMerge&&onMerge(!isReverse),onRemove&&(0,rich_text_build_module.xb)(value)&&isReverse&&onRemove(!isReverse),event.preventDefault()}}})))}));ForwardedRichTextContainer.Content=_ref3=>{let{value:value,tagName:Tag,multiline:multiline,...props}=_ref3;Array.isArray(value)&&((0,deprecated_build_module.Z)("wp.blockEditor.RichText value prop as children type",{since:"6.1",version:"6.3",alternative:"value prop as string",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),value=build_module.pI.toHTML(value));const MultilineTag=getMultilineTag(multiline);!value&&MultilineTag&&(value=`<${MultilineTag}></${MultilineTag}>`);const content=(0,react.createElement)(raw_html.Z,null,value);if(Tag){const{format:format,...restProps}=props;return(0,react.createElement)(Tag,restProps,content)}return content},ForwardedRichTextContainer.isEmpty=value=>!value||0===value.length;var rich_text=ForwardedRichTextContainer;const EditableText=(0,react.forwardRef)(((props,ref)=>(0,react.createElement)(rich_text,(0,esm_extends.Z)({ref:ref},props,{__unstableDisableFormats:!0,preserveWhiteSpace:!0}))));EditableText.Content=_ref=>{let{value:value="",tagName:Tag="div",...props}=_ref;return(0,react.createElement)(Tag,props,value)};var editable_text=EditableText;const PlainText=(0,react.forwardRef)(((_ref,ref)=>{let{__experimentalVersion:__experimentalVersion,...props}=_ref;if(2===__experimentalVersion)return(0,react.createElement)(editable_text,(0,esm_extends.Z)({ref:ref},props));const{className:className,onChange:onChange,...remainingProps}=props;return(0,react.createElement)(lib.Z,(0,esm_extends.Z)({ref:ref,className:classnames_default()("block-editor-plain-text",className),onChange:event=>onChange(event.target.value)},remainingProps))}));var plain_text=PlainText;function RichTextShortcut(_ref){let{character:character,type:type,onUse:onUse}=_ref;const keyboardShortcuts=(0,react.useContext)(keyboardShortcutContext),onUseRef=(0,react.useRef)();return onUseRef.current=onUse,(0,react.useEffect)((()=>{function callback(event){keycodes_build_module.vd[type](event,character)&&(onUseRef.current(),event.preventDefault())}return keyboardShortcuts.current.add(callback),()=>{keyboardShortcuts.current.delete(callback)}}),[character,type]),null}function RichTextToolbarButton(_ref){let shortcut,{name:name,shortcutType:shortcutType,shortcutCharacter:shortcutCharacter,...props}=_ref,fillName="RichText.ToolbarControls";return name&&(fillName+=`.${name}`),shortcutType&&shortcutCharacter&&(shortcut=keycodes_build_module.E_[shortcutType](shortcutCharacter)),(0,react.createElement)(slot_fill.de,{name:fillName},(0,react.createElement)(toolbar_button.Z,(0,esm_extends.Z)({},props,{shortcut:shortcut})))}function __unstableRichTextInputEvent(_ref){let{inputType:inputType,onInput:onInput}=_ref;const callbacks=(0,react.useContext)(inputEventContext),onInputRef=(0,react.useRef)();return onInputRef.current=onInput,(0,react.useEffect)((()=>{function callback(event){event.inputType===inputType&&(onInputRef.current(),event.preventDefault())}return callbacks.current.add(callback),()=>{callbacks.current.delete(callback)}}),[inputType]),null}var library_close=__webpack_require__("./packages/icons/build-module/library/close.js");const NEW_TAB_REL=["noreferrer","noopener"],image_url_input_ui_icon=(0,react.createElement)(svg.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,react.createElement)(svg.y$,{d:"M0,0h24v24H0V0z",fill:"none"}),(0,react.createElement)(svg.y$,{d:"m19 5v14h-14v-14h14m0-2h-14c-1.1 0-2 0.9-2 2v14c0 1.1 0.9 2 2 2h14c1.1 0 2-0.9 2-2v-14c0-1.1-0.9-2-2-2z"}),(0,react.createElement)(svg.y$,{d:"m14.14 11.86l-3 3.87-2.14-2.59-3 3.86h12l-3.86-5.14z"})),ImageURLInputUI=_ref=>{let{linkDestination:linkDestination,onChangeUrl:onChangeUrl,url:url,mediaType:mediaType="image",mediaUrl:mediaUrl,mediaLink:mediaLink,linkTarget:linkTarget,linkClass:linkClass,rel:rel}=_ref;const[isOpen,setIsOpen]=(0,react.useState)(!1),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),openLinkUI=(0,react.useCallback)((()=>{setIsOpen(!0)})),[isEditingLink,setIsEditingLink]=(0,react.useState)(!1),[urlInput,setUrlInput]=(0,react.useState)(null),autocompleteRef=(0,react.useRef)(null),startEditLink=(0,react.useCallback)((()=>{"media"!==linkDestination&&"attachment"!==linkDestination||setUrlInput(""),setIsEditingLink(!0)})),stopEditLink=(0,react.useCallback)((()=>{setIsEditingLink(!1)})),closeLinkUI=(0,react.useCallback)((()=>{setUrlInput(null),stopEditLink(),setIsOpen(!1)})),onFocusOutside=(0,react.useCallback)((()=>event=>{const autocompleteElement=autocompleteRef.current;autocompleteElement&&autocompleteElement.contains(event.target)||(setIsOpen(!1),setUrlInput(null),stopEditLink())})),onSubmitLinkChange=(0,react.useCallback)((()=>event=>{if(urlInput){var _getLinkDestinations$;const selectedDestination=(null===(_getLinkDestinations$=getLinkDestinations().find((destination=>destination.url===urlInput)))||void 0===_getLinkDestinations$?void 0:_getLinkDestinations$.linkDestination)||"custom";onChangeUrl({href:urlInput,linkDestination:selectedDestination})}stopEditLink(),setUrlInput(null),event.preventDefault()})),onLinkRemove=(0,react.useCallback)((()=>{onChangeUrl({linkDestination:"none",href:""})})),getLinkDestinations=()=>{const linkDestinations=[{linkDestination:"media",title:(0,i18n_build_module.__)("Media File"),url:"image"===mediaType?mediaUrl:void 0,icon:image_url_input_ui_icon}];return"image"===mediaType&&mediaLink&&linkDestinations.push({linkDestination:"attachment",title:(0,i18n_build_module.__)("Attachment Page"),url:"image"===mediaType?mediaLink:void 0,icon:(0,react.createElement)(svg.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,react.createElement)(svg.y$,{d:"M0 0h24v24H0V0z",fill:"none"}),(0,react.createElement)(svg.y$,{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"}))}),linkDestinations},advancedOptions=(0,react.createElement)(react.Fragment,null,(0,react.createElement)(toggle_control.Z,{label:(0,i18n_build_module.__)("Open in new tab"),onChange:value=>{const updatedLinkTarget=(value=>{const newLinkTarget=value?"_blank":void 0;let updatedRel;if(newLinkTarget){const rels=(null!=rel?rel:"").split(" ");NEW_TAB_REL.forEach((relVal=>{rels.includes(relVal)||rels.push(relVal)})),updatedRel=rels.join(" ")}else{const rels=(null!=rel?rel:"").split(" ").filter((relVal=>!1===NEW_TAB_REL.includes(relVal)));updatedRel=rels.length?rels.join(" "):void 0}return{linkTarget:newLinkTarget,rel:updatedRel}})(value);onChangeUrl(updatedLinkTarget)},checked:"_blank"===linkTarget}),(0,react.createElement)(text_control.Z,{label:(0,i18n_build_module.__)("Link rel"),value:null!=rel?rel:"",onChange:value=>{onChangeUrl({rel:value})}}),(0,react.createElement)(text_control.Z,{label:(0,i18n_build_module.__)("Link CSS Class"),value:linkClass||"",onChange:value=>{onChangeUrl({linkClass:value})}})),linkEditorValue=null!==urlInput?urlInput:url,urlLabel=(getLinkDestinations().find((destination=>destination.linkDestination===linkDestination))||{}).title;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(toolbar_button.Z,{icon:library_link.Z,className:"components-toolbar__control",label:url?(0,i18n_build_module.__)("Edit link"):(0,i18n_build_module.__)("Insert link"),"aria-expanded":isOpen,onClick:openLinkUI,ref:setPopoverAnchor}),isOpen&&(0,react.createElement)(url_popover,{anchor:popoverAnchor,onFocusOutside:onFocusOutside(),onClose:closeLinkUI,renderSettings:()=>advancedOptions,additionalControls:!linkEditorValue&&(0,react.createElement)(navigable_container_menu.Z,null,(0,lodash.map)(getLinkDestinations(),(link=>(0,react.createElement)(menu_item.Z,{key:link.linkDestination,icon:link.icon,onClick:()=>{setUrlInput(null),(value=>{const linkDestinations=getLinkDestinations();let linkDestinationInput;linkDestinationInput=value?(linkDestinations.find((destination=>destination.url===value))||{linkDestination:"custom"}).linkDestination:"none",onChangeUrl({linkDestination:linkDestinationInput,href:value})})(link.url),stopEditLink()}},link.title))))},(!url||isEditingLink)&&(0,react.createElement)(url_popover.LinkEditor,{className:"block-editor-format-toolbar__link-container-content",value:linkEditorValue,onChangeInputValue:setUrlInput,onSubmit:onSubmitLinkChange(),autocompleteRef:autocompleteRef}),url&&!isEditingLink&&(0,react.createElement)(react.Fragment,null,(0,react.createElement)(url_popover.LinkViewer,{className:"block-editor-format-toolbar__link-container-content",url:url,onEditLinkClick:startEditLink,urlLabel:urlLabel}),(0,react.createElement)(build_module_button.Z,{icon:library_close.Z,label:(0,i18n_build_module.__)("Remove link"),onClick:onLinkRemove}))))};var skip_to_selected_block=(0,with_select.Z)((select=>({selectedBlockClientId:select(store).getBlockSelectionStart()})))((_ref=>{let{selectedBlockClientId:selectedBlockClientId}=_ref;const ref=useBlockRef(selectedBlockClientId);return selectedBlockClientId?(0,react.createElement)(build_module_button.Z,{variant:"secondary",className:"block-editor-skip-to-selected-block",onClick:()=>{ref.current.focus()}},(0,i18n_build_module.__)("Skip to the selected block")):null}));const defaultSettings={HTMLRegExp:/<\/?[a-z][^>]*?>/gi,HTMLcommentRegExp:/<!--[\s\S]*?-->/g,spaceRegExp:/&nbsp;|&#160;/gi,HTMLEntityRegExp:/&\S+?;/g,connectorRegExp:/--|\u2014/g,removeRegExp:new RegExp(["[","!-/:-@[-`{-~","-","-","-","]"].join(""),"g"),astralRegExp:/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wordsRegExp:/\S\s+/g,characters_excluding_spacesRegExp:/\S/g,characters_including_spacesRegExp:/[^\f\n\r\t\v\u00AD\u2028\u2029]/g,l10n:{type:"words"}};function stripTags(settings,text){return text.replace(settings.HTMLRegExp,"\n")}function transposeAstralsToCountableChar(settings,text){return text.replace(settings.astralRegExp,"a")}function stripHTMLEntities(settings,text){return text.replace(settings.HTMLEntityRegExp,"")}function stripConnectors(settings,text){return text.replace(settings.connectorRegExp," ")}function stripRemovables(settings,text){return text.replace(settings.removeRegExp,"")}function stripHTMLComments(settings,text){return text.replace(settings.HTMLcommentRegExp,"")}function stripShortcodes(settings,text){return settings.shortcodesRegExp?text.replace(settings.shortcodesRegExp,"\n"):text}function stripSpaces(settings,text){return text.replace(settings.spaceRegExp," ")}function transposeHTMLEntitiesToCountableChars(settings,text){return text.replace(settings.HTMLEntityRegExp,"a")}function countCharacters(text,regex,settings){var _text$match$length2,_text$match2;return text=[stripTags.bind(null,settings),stripHTMLComments.bind(null,settings),stripShortcodes.bind(null,settings),transposeAstralsToCountableChar.bind(null,settings),stripSpaces.bind(null,settings),transposeHTMLEntitiesToCountableChars.bind(null,settings)].reduce(((result,fn)=>fn(result)),text),null!==(_text$match$length2=null===(_text$match2=(text+="\n").match(regex))||void 0===_text$match2?void 0:_text$match2.length)&&void 0!==_text$match$length2?_text$match$length2:0}function count(text,type,userSettings){const settings=function loadSettings(type,userSettings){var _settings$l10n$shortc,_settings$l10n;const settings=Object.assign({},defaultSettings,userSettings);return settings.shortcodes=null!==(_settings$l10n$shortc=null===(_settings$l10n=settings.l10n)||void 0===_settings$l10n?void 0:_settings$l10n.shortcodes)&&void 0!==_settings$l10n$shortc?_settings$l10n$shortc:[],settings.shortcodes&&settings.shortcodes.length&&(settings.shortcodesRegExp=new RegExp("\\[\\/?(?:"+settings.shortcodes.join("|")+")[^\\]]*?\\]","g")),settings.type=type,"characters_excluding_spaces"!==settings.type&&"characters_including_spaces"!==settings.type&&(settings.type="words"),settings}(type,userSettings);let matchRegExp;switch(settings.type){case"words":return matchRegExp=settings.wordsRegExp,function countWords(text,regex,settings){var _text$match$length,_text$match;return text=[stripTags.bind(null,settings),stripHTMLComments.bind(null,settings),stripShortcodes.bind(null,settings),stripSpaces.bind(null,settings),stripHTMLEntities.bind(null,settings),stripConnectors.bind(null,settings),stripRemovables.bind(null,settings)].reduce(((result,fn)=>fn(result)),text),null!==(_text$match$length=null===(_text$match=(text+="\n").match(regex))||void 0===_text$match?void 0:_text$match.length)&&void 0!==_text$match$length?_text$match$length:0}(text,matchRegExp,settings);case"characters_including_spaces":return matchRegExp=settings.characters_including_spacesRegExp,countCharacters(text,matchRegExp,settings);case"characters_excluding_spaces":return matchRegExp=settings.characters_excluding_spacesRegExp,countCharacters(text,matchRegExp,settings);default:return 0}}var multi_selection_inspector=(0,with_select.Z)((select=>{const{getMultiSelectedBlocks:getMultiSelectedBlocks}=select(store);return{blocks:getMultiSelectedBlocks()}}))((function MultiSelectionInspector(_ref){let{blocks:blocks}=_ref;const words=count((0,build_module.qC)(blocks),"words");return(0,react.createElement)("div",{className:"block-editor-multi-selection-inspector__card"},(0,react.createElement)(block_icon,{icon:copy.Z,showColors:!0}),(0,react.createElement)("div",{className:"block-editor-multi-selection-inspector__card-content"},(0,react.createElement)("div",{className:"block-editor-multi-selection-inspector__card-title"},(0,i18n_build_module.gB)((0,i18n_build_module._n)("%d block","%d blocks",blocks.length),blocks.length)),(0,react.createElement)("div",{className:"block-editor-multi-selection-inspector__card-description"},(0,i18n_build_module.gB)((0,i18n_build_module._n)("%d word","%d words",words),words))))})),menu_items_choice=__webpack_require__("./packages/components/build-module/menu-items-choice/index.js");function VariationsButtons(_ref){let{className:className,onSelectVariation:onSelectVariation,selectedValue:selectedValue,variations:variations}=_ref;return(0,react.createElement)("fieldset",{className:className},(0,react.createElement)(visually_hidden_component.Z,{as:"legend"},(0,i18n_build_module.__)("Transform to variation")),variations.map((variation=>(0,react.createElement)(build_module_button.Z,{key:variation.name,icon:(0,react.createElement)(block_icon,{icon:variation.icon,showColors:!0}),isPressed:selectedValue===variation.name,label:selectedValue===variation.name?variation.title:(0,i18n_build_module.gB)((0,i18n_build_module.__)("Transform to %s"),variation.title),onClick:()=>onSelectVariation(variation.name),"aria-label":variation.title,showTooltip:!0}))))}function VariationsDropdown(_ref2){let{className:className,onSelectVariation:onSelectVariation,selectedValue:selectedValue,variations:variations}=_ref2;const selectOptions=variations.map((_ref3=>{let{name:name,title:title,description:description}=_ref3;return{value:name,label:title,info:description}}));return(0,react.createElement)(dropdown_menu.Z,{className:className,label:(0,i18n_build_module.__)("Transform to variation"),text:(0,i18n_build_module.__)("Transform to variation"),popoverProps:{position:"bottom center",className:`${className}__popover`},icon:chevron_down.Z,toggleProps:{iconPosition:"right"}},(()=>(0,react.createElement)("div",{className:`${className}__container`},(0,react.createElement)(menu_group.Z,null,(0,react.createElement)(menu_items_choice.Z,{choices:selectOptions,value:selectedValue,onSelect:onSelectVariation})))))}var block_variation_transforms=function __experimentalBlockVariationTransforms(_ref4){let{blockClientId:blockClientId}=_ref4;const{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store),{activeBlockVariation:activeBlockVariation,variations:variations}=(0,use_select.Z)((select=>{const{getActiveBlockVariation:getActiveBlockVariation,getBlockVariations:getBlockVariations}=select(build_module.h),{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(store),name=blockClientId&&getBlockName(blockClientId);return{activeBlockVariation:getActiveBlockVariation(name,getBlockAttributes(blockClientId)),variations:name&&getBlockVariations(name,"transform")}}),[blockClientId]),selectedValue=null==activeBlockVariation?void 0:activeBlockVariation.name,hasUniqueIcons=(0,react.useMemo)((()=>{const variationIcons=new Set;return!!variations&&(variations.forEach((variation=>{var _variation$icon;variation.icon&&variationIcons.add((null===(_variation$icon=variation.icon)||void 0===_variation$icon?void 0:_variation$icon.src)||variation.icon)})),variationIcons.size===variations.length)}),[variations]);if(null==variations||!variations.length)return null;const Component=hasUniqueIcons?VariationsButtons:VariationsDropdown;return(0,react.createElement)(Component,{className:"block-editor-block-variation-transforms",onSelectVariation:variationName=>{updateBlockAttributes(blockClientId,{...variations.find((_ref5=>{let{name:name}=_ref5;return name===variationName})).attributes})},selectedValue:selectedValue,variations:variations})};function BlockStylesPreviewPanel(_ref){var _getBlockType;let{genericPreviewBlock:genericPreviewBlock,style:style,className:className,activeStyle:activeStyle}=_ref;const example=null===(_getBlockType=(0,build_module.ck)(genericPreviewBlock.name))||void 0===_getBlockType?void 0:_getBlockType.example,styleClassName=replaceActiveStyle(className,activeStyle,style),previewBlocks=(0,react.useMemo)((()=>({...genericPreviewBlock,title:style.label||style.name,description:style.description,initialAttributes:{...genericPreviewBlock.attributes,className:styleClassName+" block-editor-block-styles__block-preview-container"},example:example})),[genericPreviewBlock,styleClassName]);return(0,react.createElement)(preview_panel,{item:previewBlocks,isStylePreview:!0})}const block_styles_noop=()=>{};function BlockStyles(_ref){let{clientId:clientId,onSwitch:onSwitch=block_styles_noop,onHoverClassName:onHoverClassName=block_styles_noop}=_ref;const{onSelect:onSelect,stylesToRender:stylesToRender,activeStyle:activeStyle,genericPreviewBlock:genericPreviewBlock,className:previewClassName}=useStylesForBlocks({clientId:clientId,onSwitch:onSwitch}),[hoveredStyle,setHoveredStyle]=(0,react.useState)(null),isMobileViewport=(0,use_viewport_match.Z)("medium","<");if(!stylesToRender||0===stylesToRender.length)return null;const debouncedSetHoveredStyle=(0,debounce.D)(setHoveredStyle,250),styleItemHandler=item=>{var _item$name;hoveredStyle!==item?(debouncedSetHoveredStyle(item),onHoverClassName(null!==(_item$name=null==item?void 0:item.name)&&void 0!==_item$name?_item$name:null)):debouncedSetHoveredStyle.cancel()};return(0,react.createElement)("div",{className:"block-editor-block-styles"},(0,react.createElement)("div",{className:"block-editor-block-styles__variants"},stylesToRender.map((style=>{const buttonText=style.label||style.name;return(0,react.createElement)(build_module_button.Z,{className:classnames_default()("block-editor-block-styles__item",{"is-active":activeStyle.name===style.name}),key:style.name,variant:"secondary",label:buttonText,onMouseEnter:()=>styleItemHandler(style),onFocus:()=>styleItemHandler(style),onMouseLeave:()=>styleItemHandler(null),onBlur:()=>styleItemHandler(null),onClick:()=>(style=>{onSelect(style),onHoverClassName(null),setHoveredStyle(null),debouncedSetHoveredStyle.cancel()})(style),"aria-current":activeStyle.name===style.name},(0,react.createElement)(truncate_component.Z,{numberOfLines:1,className:"block-editor-block-styles__item-text"},buttonText))}))),hoveredStyle&&!isMobileViewport&&(0,react.createElement)(popover.Z,{placement:"left-start",offset:20},(0,react.createElement)("div",{className:"block-editor-block-styles__preview-panel",onMouseLeave:()=>styleItemHandler(null)},(0,react.createElement)(BlockStylesPreviewPanel,{activeStyle:activeStyle,className:previewClassName,genericPreviewBlock:genericPreviewBlock,style:hoveredStyle}))))}var block_styles=BlockStyles;function DefaultStylePicker(_ref){let{blockName:blockName}=_ref;const{preferredStyle:preferredStyle,onUpdatePreferredStyleVariations:onUpdatePreferredStyleVariations,styles:styles}=(0,use_select.Z)((select=>{var _preferredStyleVariat,_preferredStyleVariat2;const preferredStyleVariations=select(store).getSettings().__experimentalPreferredStyleVariations;return{preferredStyle:null==preferredStyleVariations||null===(_preferredStyleVariat=preferredStyleVariations.value)||void 0===_preferredStyleVariat?void 0:_preferredStyleVariat[blockName],onUpdatePreferredStyleVariations:null!==(_preferredStyleVariat2=null==preferredStyleVariations?void 0:preferredStyleVariations.onChange)&&void 0!==_preferredStyleVariat2?_preferredStyleVariat2:null,styles:select(build_module.h).getBlockStyles(blockName)}}),[blockName]),selectOptions=(0,react.useMemo)((()=>[{label:(0,i18n_build_module.__)("Not set"),value:""},...styles.map((_ref2=>{let{label:label,name:name}=_ref2;return{label:label,value:name}}))]),[styles]),defaultStyleName=(0,react.useMemo)((()=>{var _getDefaultStyle;return null===(_getDefaultStyle=getDefaultStyle(styles))||void 0===_getDefaultStyle?void 0:_getDefaultStyle.name}),[styles]),selectOnChange=(0,react.useCallback)((blockStyle=>{onUpdatePreferredStyleVariations(blockName,blockStyle)}),[blockName,onUpdatePreferredStyleVariations]);return preferredStyle&&preferredStyle!==defaultStyleName?onUpdatePreferredStyleVariations&&(0,react.createElement)("div",{className:"default-style-picker__default-switcher"},(0,react.createElement)(select_control.Z,{options:selectOptions,value:preferredStyle||"",label:(0,i18n_build_module.__)("Default Style"),onChange:selectOnChange})):null}BlockStyles.Slot=()=>((0,deprecated_build_module.Z)("BlockStyles.Slot",{version:"6.4",since:"6.2"}),null);var library_cog=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})),styles=__webpack_require__("./packages/icons/build-module/library/styles.js");var list_view=(0,react.createElement)(svg.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,react.createElement)(svg.y$,{d:"M13.8 5.2H3v1.5h10.8V5.2zm-3.6 12v1.5H21v-1.5H10.2zm7.2-6H6.6v1.5h10.8v-1.5z"}));const TAB_SETTINGS={name:"settings",title:"Settings",value:"settings",icon:library_cog,className:"block-editor-block-inspector__tab-item"},TAB_STYLES={name:"styles",title:"Styles",value:"styles",icon:styles.Z,className:"block-editor-block-inspector__tab-item"},TAB_LIST_VIEW={name:"list",title:"List View",value:"list-view",icon:list_view,className:"block-editor-block-inspector__tab-item"};var advanced_controls_panel=()=>{const fills=(0,use_slot_fills.Z)(InspectorAdvancedControls.slotName);return Boolean(fills&&fills.length)?(0,react.createElement)(body.Z,{className:"block-editor-block-inspector__advanced",title:(0,i18n_build_module.__)("Advanced"),initialOpen:!1},(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"advanced"})):null};var settings_tab=_ref=>{let{showAdvancedControls:showAdvancedControls=!1}=_ref;return(0,react.createElement)(react.Fragment,null,(0,react.createElement)(inspector_controls.Slot,null),showAdvancedControls&&(0,react.createElement)("div",null,(0,react.createElement)(advanced_controls_panel,null)))};var styles_tab=_ref=>{let{blockName:blockName,clientId:clientId,hasBlockStyles:hasBlockStyles}=_ref;return(0,react.createElement)(react.Fragment,null,hasBlockStyles&&(0,react.createElement)("div",null,(0,react.createElement)(body.Z,{title:(0,i18n_build_module.__)("Styles")},(0,react.createElement)(block_styles,{clientId:clientId}),(0,build_module.zb)(blockName,"defaultStylePicker",!0)&&(0,react.createElement)(DefaultStylePicker,{blockName:blockName}))),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"color",label:(0,i18n_build_module.__)("Color"),className:"color-block-support-panel__inner-wrapper"}),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"typography",label:(0,i18n_build_module.__)("Typography")}),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"dimensions",label:(0,i18n_build_module.__)("Dimensions")}),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"border",label:(0,i18n_build_module.__)("Border")}))};const allowlist=["core/navigation"];var use_is_list_view_tab_disabled=blockName=>!allowlist.includes(blockName);function InspectorControlsTabs(_ref){let{blockName:blockName,clientId:clientId,hasBlockStyles:hasBlockStyles,tabs:tabs}=_ref;const initialTabName=use_is_list_view_tab_disabled(blockName)?void 0:TAB_LIST_VIEW.name;return(0,react.createElement)(tab_panel.Z,{className:"block-editor-block-inspector__tabs",tabs:tabs,initialTabName:initialTabName,key:clientId},(tab=>tab.name===TAB_SETTINGS.name?(0,react.createElement)(settings_tab,{showAdvancedControls:!!blockName}):tab.name===TAB_STYLES.name?(0,react.createElement)(styles_tab,{blockName:blockName,clientId:clientId,hasBlockStyles:hasBlockStyles}):tab.name===TAB_LIST_VIEW.name?(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"list"}):void 0))}const use_inspector_controls_tabs_EMPTY_ARRAY=[];function useInspectorControlsTabs(blockName){const tabs=[],{border:borderGroup,color:colorGroup,default:defaultGroup,dimensions:dimensionsGroup,list:listGroup,typography:typographyGroup}=inspector_controls_groups,listViewDisabled=use_is_list_view_tab_disabled(blockName),listFills=(0,use_slot_fills.Z)(listGroup.Slot.__unstableName);!listViewDisabled&&listFills&&listFills.length&&tabs.push(TAB_LIST_VIEW);[...(0,use_slot_fills.Z)(borderGroup.Slot.__unstableName)||[],...(0,use_slot_fills.Z)(colorGroup.Slot.__unstableName)||[],...(0,use_slot_fills.Z)(dimensionsGroup.Slot.__unstableName)||[],...(0,use_slot_fills.Z)(typographyGroup.Slot.__unstableName)||[]].length&&tabs.push(TAB_STYLES);[...(0,use_slot_fills.Z)(defaultGroup.Slot.__unstableName)||[],...(0,use_slot_fills.Z)(InspectorAdvancedControls.slotName)||[]].length&&tabs.push(TAB_SETTINGS);const showTabs=function getShowTabs(blockName){var _window;let tabSettings=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(null===(_window=window)||void 0===_window||!_window.__experimentalEnableBlockInspectorTabs)&&(void 0!==tabSettings[blockName]?tabSettings[blockName]:void 0===tabSettings.default||tabSettings.default)}(blockName,(0,use_select.Z)((select=>select(store).getSettings().__experimentalBlockInspectorTabs),[]));return showTabs?tabs:use_inspector_controls_tabs_EMPTY_ARRAY}function useContentBlocks(blockTypes,block){const contentBlocksObjectAux=(0,react.useMemo)((()=>blockTypes.reduce(((result,blockType)=>("core/list-item"!==blockType.name&&Object.entries(blockType.attributes).some((_ref=>{let[,{__experimentalRole:__experimentalRole}]=_ref;return"content"===__experimentalRole}))&&(result[blockType.name]=!0),result)),{})),[blockTypes]),isContentBlock=(0,react.useCallback)((blockName=>!!contentBlocksObjectAux[blockName]),[blockTypes]);return(0,react.useMemo)((()=>getContentBlocks([block],isContentBlock)),[block,isContentBlock])}function getContentBlocks(blocks,isContentBlock){const result=[];for(const block of blocks)isContentBlock(block.name)&&result.push(block),result.push(...getContentBlocks(block.innerBlocks,isContentBlock));return result}function BlockNavigationButton(_ref2){let{blockTypes:blockTypes,block:block,selectedBlock:selectedBlock}=_ref2;const{selectBlock:selectBlock}=(0,use_dispatch.Z)(store),blockType=blockTypes.find((_ref3=>{let{name:name}=_ref3;return name===block.name})),isSelected=selectedBlock&&selectedBlock.clientId===block.clientId;return(0,react.createElement)(build_module_button.Z,{isPressed:isSelected,onClick:()=>selectBlock(block.clientId)},(0,react.createElement)(h_stack_component.Z,{justify:"flex-start"},(0,react.createElement)(block_icon,{icon:blockType.icon}),(0,react.createElement)(flex_item_component.Z,null,blockType.title)))}function BlockInspectorLockedBlocks(_ref4){let{topLevelLockedBlock:topLevelLockedBlock}=_ref4;const{blockTypes:blockTypes,block:block,selectedBlock:selectedBlock}=(0,use_select.Z)((select=>({blockTypes:select(build_module.h).getBlockTypes(),block:select(store).getBlock(topLevelLockedBlock),selectedBlock:select(store).getSelectedBlock()})),[topLevelLockedBlock]),blockInformation=useBlockDisplayInformation(topLevelLockedBlock),contentBlocks=useContentBlocks(blockTypes,block);return(0,react.createElement)("div",{className:"block-editor-block-inspector"},(0,react.createElement)(block_card,(0,esm_extends.Z)({},blockInformation,{className:blockInformation.isSynced&&"is-synced"})),(0,react.createElement)(block_variation_transforms,{blockClientId:topLevelLockedBlock}),(0,react.createElement)(v_stack_component.Z,{spacing:1,padding:4,className:"block-editor-block-inspector__block-buttons-container"},(0,react.createElement)("h2",{className:"block-editor-block-card__title"},(0,i18n_build_module.__)("Content")),contentBlocks.map((contentBlock=>(0,react.createElement)(BlockNavigationButton,{selectedBlock:selectedBlock,key:contentBlock.clientId,block:contentBlock,blockTypes:blockTypes})))))}const BlockInspectorSingleBlockWrapper=_ref6=>{let{animate:animate,wrapper:wrapper,children:children}=_ref6;return animate?wrapper(children):children},AnimatedContainer=_ref7=>{let{blockInspectorAnimationSettings:blockInspectorAnimationSettings,selectedBlockClientId:selectedBlockClientId,children:children}=_ref7;const animationOrigin=blockInspectorAnimationSettings&&"leftToRight"===blockInspectorAnimationSettings.enterDirection?-50:50;return(0,react.createElement)(motion.E.div,{animate:{x:0,opacity:1,transition:{ease:"easeInOut",duration:.14}},initial:{x:animationOrigin,opacity:0},key:selectedBlockClientId},children)},BlockInspectorSingleBlock=_ref8=>{let{clientId:clientId,blockName:blockName}=_ref8;const availableTabs=useInspectorControlsTabs(blockName),showTabs=(null==availableTabs?void 0:availableTabs.length)>1,hasBlockStyles=(0,use_select.Z)((select=>{const{getBlockStyles:getBlockStyles}=select(build_module.h),blockStyles=getBlockStyles(blockName);return blockStyles&&blockStyles.length>0}),[blockName]),blockInformation=useBlockDisplayInformation(clientId);return(0,react.createElement)("div",{className:"block-editor-block-inspector"},(0,react.createElement)(block_card,(0,esm_extends.Z)({},blockInformation,{className:blockInformation.isSynced&&"is-synced"})),(0,react.createElement)(block_variation_transforms,{blockClientId:clientId}),showTabs&&(0,react.createElement)(InspectorControlsTabs,{hasBlockStyles:hasBlockStyles,clientId:clientId,blockName:blockName,tabs:availableTabs}),!showTabs&&(0,react.createElement)(react.Fragment,null,hasBlockStyles&&(0,react.createElement)("div",null,(0,react.createElement)(body.Z,{title:(0,i18n_build_module.__)("Styles")},(0,react.createElement)(block_styles,{clientId:clientId}),(0,build_module.zb)(blockName,"defaultStylePicker",!0)&&(0,react.createElement)(DefaultStylePicker,{blockName:blockName}))),(0,react.createElement)(inspector_controls.Slot,null),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"color",label:(0,i18n_build_module.__)("Color"),className:"color-block-support-panel__inner-wrapper"}),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"typography",label:(0,i18n_build_module.__)("Typography")}),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"dimensions",label:(0,i18n_build_module.__)("Dimensions")}),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"border",label:(0,i18n_build_module.__)("Border")}),(0,react.createElement)("div",null,(0,react.createElement)(advanced_controls_panel,null))),(0,react.createElement)(skip_to_selected_block,{key:"back"}))};var block_inspector=_ref5=>{var _window;let{showNoBlockSelectedMessage:showNoBlockSelectedMessage=!0}=_ref5;const{count:count,selectedBlockName:selectedBlockName,selectedBlockClientId:selectedBlockClientId,blockType:blockType,topLevelLockedBlock:topLevelLockedBlock}=(0,use_select.Z)((select=>{const{getSelectedBlockClientId:getSelectedBlockClientId,getSelectedBlockCount:getSelectedBlockCount,getBlockName:getBlockName,__unstableGetContentLockingParent:__unstableGetContentLockingParent,getTemplateLock:getTemplateLock}=select(store),_selectedBlockClientId=getSelectedBlockClientId(),_selectedBlockName=_selectedBlockClientId&&getBlockName(_selectedBlockClientId),_blockType=_selectedBlockName&&(0,build_module.ck)(_selectedBlockName);return{count:getSelectedBlockCount(),selectedBlockClientId:_selectedBlockClientId,selectedBlockName:_selectedBlockName,blockType:_blockType,topLevelLockedBlock:__unstableGetContentLockingParent(_selectedBlockClientId)||("contentOnly"===getTemplateLock(_selectedBlockClientId)?_selectedBlockClientId:void 0)}}),[]),availableTabs=useInspectorControlsTabs(null==blockType?void 0:blockType.name),showTabs=(null==availableTabs?void 0:availableTabs.length)>1,isOffCanvasNavigationEditorEnabled=!0===(null===(_window=window)||void 0===_window?void 0:_window.__experimentalEnableOffCanvasNavigationEditor),blockInspectorAnimationSettings=(0,use_select.Z)((select=>{if(isOffCanvasNavigationEditorEnabled){const globalBlockInspectorAnimationSettings=select(store).getSettings().__experimentalBlockInspectorAnimation;return null==globalBlockInspectorAnimationSettings?void 0:globalBlockInspectorAnimationSettings[blockType.name]}return null}),[selectedBlockClientId,isOffCanvasNavigationEditorEnabled,blockType]);if(count>1)return(0,react.createElement)("div",{className:"block-editor-block-inspector"},(0,react.createElement)(multi_selection_inspector,null),showTabs?(0,react.createElement)(InspectorControlsTabs,{tabs:availableTabs}):(0,react.createElement)(react.Fragment,null,(0,react.createElement)(inspector_controls.Slot,null),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"color",label:(0,i18n_build_module.__)("Color"),className:"color-block-support-panel__inner-wrapper"}),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"typography",label:(0,i18n_build_module.__)("Typography")}),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"dimensions",label:(0,i18n_build_module.__)("Dimensions")}),(0,react.createElement)(inspector_controls.Slot,{__experimentalGroup:"border",label:(0,i18n_build_module.__)("Border")})));const isSelectedBlockUnregistered=selectedBlockName===(0,build_module.qy)();return blockType&&selectedBlockClientId&&!isSelectedBlockUnregistered?topLevelLockedBlock?(0,react.createElement)(BlockInspectorLockedBlocks,{topLevelLockedBlock:topLevelLockedBlock}):(0,react.createElement)(BlockInspectorSingleBlockWrapper,{animate:isOffCanvasNavigationEditorEnabled&&blockInspectorAnimationSettings,wrapper:children=>(0,react.createElement)(AnimatedContainer,{blockInspectorAnimationSettings:blockInspectorAnimationSettings,selectedBlockClientId:selectedBlockClientId},children)},(0,react.createElement)(react.Fragment,null,(0,react.createElement)(BlockInspectorSingleBlock,{clientId:selectedBlockClientId,blockName:blockType.name}))):showNoBlockSelectedMessage?(0,react.createElement)("span",{className:"block-editor-block-inspector__no-blocks"},(0,i18n_build_module.__)("No block selected.")):null};var zoom_out_mode_inserters=function ZoomOutModeInserters(_ref){let{__unstableContentRef:__unstableContentRef}=_ref;const[isReady,setIsReady]=(0,react.useState)(!1),blockOrder=(0,use_select.Z)((select=>select(store).getBlockOrder()),[]);return(0,react.useEffect)((()=>{const timeout=setTimeout((()=>{setIsReady(!0)}),500);return()=>{clearTimeout(timeout)}}),[]),isReady?blockOrder.map(((clientId,index)=>index===blockOrder.length-1?null:(0,react.createElement)(inbetween,{key:clientId,previousClientId:clientId,nextClientId:blockOrder[index+1],__unstableContentRef:__unstableContentRef},(0,react.createElement)("div",{className:"block-editor-block-list__insertion-point-inserter is-with-inserter"},(0,react.createElement)(inserter,{position:"bottom center",clientId:blockOrder[index+1],__experimentalIsQuick:!0}))))):null};function block_tools_selector(select){const{__unstableGetEditorMode:__unstableGetEditorMode,getSettings:getSettings,isTyping:isTyping}=select(store);return{isZoomOutMode:"zoom-out"===__unstableGetEditorMode(),hasFixedToolbar:getSettings().hasFixedToolbar,isTyping:isTyping()}}function BlockTools(_ref){let{children:children,__unstableContentRef:__unstableContentRef,...props}=_ref;const isLargeViewport=(0,use_viewport_match.Z)("medium"),{hasFixedToolbar:hasFixedToolbar,isZoomOutMode:isZoomOutMode,isTyping:isTyping}=(0,use_select.Z)(block_tools_selector,[]),isMatch=(0,keyboard_shortcuts_build_module.sx)(),{getSelectedBlockClientIds:getSelectedBlockClientIds,getBlockRootClientId:getBlockRootClientId}=(0,use_select.Z)(store),{duplicateBlocks:duplicateBlocks,removeBlocks:removeBlocks,insertAfterBlock:insertAfterBlock,insertBeforeBlock:insertBeforeBlock,clearSelectedBlock:clearSelectedBlock,moveBlocksUp:moveBlocksUp,moveBlocksDown:moveBlocksDown}=(0,use_dispatch.Z)(store);const blockToolbarRef=use_popover_scroll(__unstableContentRef),blockToolbarAfterRef=use_popover_scroll(__unstableContentRef);return(0,react.createElement)("div",(0,esm_extends.Z)({},props,{onKeyDown:function onKeyDown(event){if(!event.defaultPrevented)if(isMatch("core/block-editor/move-up",event)){const clientIds=getSelectedBlockClientIds();if(clientIds.length){event.preventDefault();const rootClientId=getBlockRootClientId(clientIds[0]);moveBlocksUp(clientIds,rootClientId)}}else if(isMatch("core/block-editor/move-down",event)){const clientIds=getSelectedBlockClientIds();if(clientIds.length){event.preventDefault();const rootClientId=getBlockRootClientId(clientIds[0]);moveBlocksDown(clientIds,rootClientId)}}else if(isMatch("core/block-editor/duplicate",event)){const clientIds=getSelectedBlockClientIds();clientIds.length&&(event.preventDefault(),duplicateBlocks(clientIds))}else if(isMatch("core/block-editor/remove",event)){const clientIds=getSelectedBlockClientIds();clientIds.length&&(event.preventDefault(),removeBlocks(clientIds))}else if(isMatch("core/block-editor/insert-after",event)){const clientIds=getSelectedBlockClientIds();clientIds.length&&(event.preventDefault(),insertAfterBlock(clientIds[clientIds.length-1]))}else if(isMatch("core/block-editor/insert-before",event)){const clientIds=getSelectedBlockClientIds();clientIds.length&&(event.preventDefault(),insertBeforeBlock(clientIds[0]))}else if(isMatch("core/block-editor/unselect",event)){getSelectedBlockClientIds().length&&(event.preventDefault(),clearSelectedBlock(),event.target.ownerDocument.defaultView.getSelection().removeAllRanges(),null==__unstableContentRef||__unstableContentRef.current.focus())}}}),(0,react.createElement)(insertion_point_InsertionPointOpenRef.Provider,{value:(0,react.useRef)(!1)},!isTyping&&(0,react.createElement)(InsertionPoint,{__unstableContentRef:__unstableContentRef}),!isZoomOutMode&&(hasFixedToolbar||!isLargeViewport)&&(0,react.createElement)(block_contextual_toolbar,{isFixed:!0}),(0,react.createElement)(WrappedBlockPopover,{__unstableContentRef:__unstableContentRef}),(0,react.createElement)(popover.Z.Slot,{name:"block-toolbar",ref:blockToolbarRef}),children,(0,react.createElement)(popover.Z.Slot,{name:"__unstable-block-tools-after",ref:blockToolbarAfterRef}),isZoomOutMode&&(0,react.createElement)(zoom_out_mode_inserters,{__unstableContentRef:__unstableContentRef})))}function KeyboardShortcuts(){return null}KeyboardShortcuts.Register=function KeyboardShortcutsRegister(){const{registerShortcut:registerShortcut}=(0,use_dispatch.Z)(keyboard_shortcuts_build_module.h);return(0,react.useEffect)((()=>{registerShortcut({name:"core/block-editor/duplicate",category:"block",description:(0,i18n_build_module.__)("Duplicate the selected block(s)."),keyCombination:{modifier:"primaryShift",character:"d"}}),registerShortcut({name:"core/block-editor/remove",category:"block",description:(0,i18n_build_module.__)("Remove the selected block(s)."),keyCombination:{modifier:"access",character:"z"}}),registerShortcut({name:"core/block-editor/insert-before",category:"block",description:(0,i18n_build_module.__)("Insert a new block before the selected block(s)."),keyCombination:{modifier:"primaryAlt",character:"t"}}),registerShortcut({name:"core/block-editor/insert-after",category:"block",description:(0,i18n_build_module.__)("Insert a new block after the selected block(s)."),keyCombination:{modifier:"primaryAlt",character:"y"}}),registerShortcut({name:"core/block-editor/delete-multi-selection",category:"block",description:(0,i18n_build_module.__)("Delete selection."),keyCombination:{character:"del"},aliases:[{character:"backspace"}]}),registerShortcut({name:"core/block-editor/select-all",category:"selection",description:(0,i18n_build_module.__)("Select all text when typing. Press again to select all blocks."),keyCombination:{modifier:"primary",character:"a"}}),registerShortcut({name:"core/block-editor/unselect",category:"selection",description:(0,i18n_build_module.__)("Clear selection."),keyCombination:{character:"escape"}}),registerShortcut({name:"core/block-editor/focus-toolbar",category:"global",description:(0,i18n_build_module.__)("Navigate to the nearest toolbar."),keyCombination:{modifier:"alt",character:"F10"}}),registerShortcut({name:"core/block-editor/move-up",category:"block",description:(0,i18n_build_module.__)("Move the selected block(s) up."),keyCombination:{modifier:"secondary",character:"t"}}),registerShortcut({name:"core/block-editor/move-down",category:"block",description:(0,i18n_build_module.__)("Move the selected block(s) down."),keyCombination:{modifier:"secondary",character:"y"}})}),[registerShortcut]),null};var keyboard_shortcuts=KeyboardShortcuts;const KEY_DOWN_ELIGIBLE_KEY_CODES=new Set([keycodes_build_module.UP,keycodes_build_module.pX,keycodes_build_module.WV,keycodes_build_module.RL,keycodes_build_module.K5,keycodes_build_module.ZH]);function useTypingObserver(){const{isTyping:isTyping,hasInlineToolbar:hasInlineToolbar}=(0,use_select.Z)((select=>{const{isTyping:_isTyping,getSettings:getSettings}=select(store);return{isTyping:_isTyping(),hasInlineToolbar:getSettings().hasInlineToolbar}}),[]),{startTyping:startTyping,stopTyping:stopTyping}=(0,use_dispatch.Z)(store),ref1=function useMouseMoveTypingReset(){const isTyping=(0,use_select.Z)((select=>select(store).isTyping()),[]),{stopTyping:stopTyping}=(0,use_dispatch.Z)(store);return(0,use_ref_effect.Z)((node=>{if(!isTyping)return;const{ownerDocument:ownerDocument}=node;let lastClientX,lastClientY;function stopTypingOnMouseMove(event){const{clientX:clientX,clientY:clientY}=event;lastClientX&&lastClientY&&(lastClientX!==clientX||lastClientY!==clientY)&&stopTyping(),lastClientX=clientX,lastClientY=clientY}return ownerDocument.addEventListener("mousemove",stopTypingOnMouseMove),()=>{ownerDocument.removeEventListener("mousemove",stopTypingOnMouseMove)}}),[isTyping,stopTyping])}(),ref2=(0,use_ref_effect.Z)((node=>{const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument,selection=defaultView.getSelection();if(isTyping){let timerId;function stopTypingOnNonTextField(event){const{target:target}=event;timerId=defaultView.setTimeout((()=>{(0,is_text_field.Z)(target)||stopTyping()}))}function stopTypingOnEscapeKey(event){const{keyCode:keyCode}=event;keyCode!==keycodes_build_module.hY&&keyCode!==keycodes_build_module.Mf||stopTyping()}function stopTypingOnSelectionUncollapse(){selection.isCollapsed||stopTyping()}return node.addEventListener("focus",stopTypingOnNonTextField),node.addEventListener("keydown",stopTypingOnEscapeKey),hasInlineToolbar||ownerDocument.addEventListener("selectionchange",stopTypingOnSelectionUncollapse),()=>{defaultView.clearTimeout(timerId),node.removeEventListener("focus",stopTypingOnNonTextField),node.removeEventListener("keydown",stopTypingOnEscapeKey),ownerDocument.removeEventListener("selectionchange",stopTypingOnSelectionUncollapse)}}function startTypingInTextField(event){const{type:type,target:target}=event;(0,is_text_field.Z)(target)&&node.contains(target)&&("keydown"!==type||function isKeyDownEligibleForStartTyping(event){const{keyCode:keyCode,shiftKey:shiftKey}=event;return!shiftKey&&KEY_DOWN_ELIGIBLE_KEY_CODES.has(keyCode)}(event))&&startTyping()}return node.addEventListener("keypress",startTypingInTextField),node.addEventListener("keydown",startTypingInTextField),()=>{node.removeEventListener("keypress",startTypingInTextField),node.removeEventListener("keydown",startTypingInTextField)}}),[isTyping,hasInlineToolbar,startTyping,stopTyping]);return(0,use_merge_refs.Z)([ref1,ref2])}var observe_typing=function ObserveTyping(_ref){let{children:children}=_ref;return(0,react.createElement)("div",{ref:useTypingObserver()},children)};const RenderedRefsContext=(0,react.createContext)({});function RecursionProvider(_ref){let{children:children,uniqueId:uniqueId,blockName:blockName=""}=_ref;const previouslyRenderedBlocks=(0,react.useContext)(RenderedRefsContext),{name:name}=useBlockEditContext();blockName=blockName||name;const newRenderedBlocks=(0,react.useMemo)((()=>function addToBlockType(renderedBlocks,blockName,uniqueId){const result={...renderedBlocks,[blockName]:renderedBlocks[blockName]?new Set(renderedBlocks[blockName]):new Set};return result[blockName].add(uniqueId),result}(previouslyRenderedBlocks,blockName,uniqueId)),[previouslyRenderedBlocks,blockName,uniqueId]);return(0,react.createElement)(RenderedRefsContext.Provider,{value:newRenderedBlocks},children)}function useHasRecursion(uniqueId){var _previouslyRenderedBl;let blockName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const previouslyRenderedBlocks=(0,react.useContext)(RenderedRefsContext),{name:name}=useBlockEditContext();return blockName=blockName||name,Boolean(null===(_previouslyRenderedBl=previouslyRenderedBlocks[blockName])||void 0===_previouslyRenderedBl?void 0:_previouslyRenderedBl.has(uniqueId))}var index_es=__webpack_require__("./node_modules/use-lilius/build/index.es.js"),startOfDay=__webpack_require__("./packages/components/node_modules/date-fns/esm/startOfDay/index.js"),subMonths=__webpack_require__("./packages/components/node_modules/date-fns/esm/subMonths/index.js"),format=__webpack_require__("./packages/components/node_modules/date-fns/esm/format/index.js"),addMonths=__webpack_require__("./packages/components/node_modules/date-fns/esm/addMonths/index.js"),isSameMonth=__webpack_require__("./packages/components/node_modules/date-fns/esm/isSameMonth/index.js"),isEqual=__webpack_require__("./packages/components/node_modules/date-fns/esm/isEqual/index.js"),isSameDay=__webpack_require__("./packages/components/node_modules/date-fns/esm/isSameDay/index.js"),addDays=__webpack_require__("./packages/components/node_modules/date-fns/esm/addDays/index.js"),subWeeks=__webpack_require__("./packages/components/node_modules/date-fns/esm/subWeeks/index.js"),addWeeks=__webpack_require__("./packages/components/node_modules/date-fns/esm/addWeeks/index.js"),startOfWeek=__webpack_require__("./packages/components/node_modules/date-fns/esm/startOfWeek/index.js"),endOfWeek=__webpack_require__("./packages/components/node_modules/date-fns/esm/endOfWeek/index.js"),arrow_left=__webpack_require__("./packages/icons/build-module/library/arrow-left.js");const styles_Wrapper=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e105ri6r5"})({name:"1khn195",styles:"box-sizing:border-box"}),Navigator=(0,emotion_styled_base_browser_esm.Z)(h_stack_component.Z,{target:"e105ri6r4"})("margin-bottom:",(0,space.D)(4),";"),NavigatorHeading=(0,emotion_styled_base_browser_esm.Z)(heading_component.Z,{target:"e105ri6r3"})("font-size:",config_values.Z.fontSize,";font-weight:",config_values.Z.fontWeight,";strong{font-weight:",config_values.Z.fontWeightHeading,";}"),Calendar=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e105ri6r2"})("column-gap:",(0,space.D)(2),";display:grid;grid-template-columns:0.5fr repeat( 5, 1fr ) 0.5fr;justify-items:center;row-gap:",(0,space.D)(2),";"),DayOfWeek=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e105ri6r1"})("color:",colors_values.D.gray[700],";font-size:",config_values.Z.fontSize,";line-height:",config_values.Z.fontLineHeightBase,";&:nth-of-type( 1 ){justify-self:start;}&:nth-of-type( 7 ){justify-self:end;}"),DayButton=(0,emotion_styled_base_browser_esm.Z)(build_module_button.Z,{shouldForwardProp:prop=>!["column","isSelected","isToday","hasEvents"].includes(prop),target:"e105ri6r0"})("grid-column:",(props=>props.column),";position:relative;justify-content:center;",(props=>1===props.column&&"\n\t\tjustify-self: start;\n\t\t")," ",(props=>7===props.column&&"\n\t\tjustify-self: end;\n\t\t")," ",(props=>props.disabled&&"\n\t\tpointer-events: none;\n\t\t")," &&&{border-radius:100%;height:",(0,space.D)(7),";width:",(0,space.D)(7),";",(props=>props.isSelected&&`\n\t\t\tbackground: ${colors_values.D.ui.theme};\n\t\t\tcolor: ${colors_values.D.white};\n\t\t\t`)," ",(props=>!props.isSelected&&props.isToday&&`\n\t\t\tbackground: ${colors_values.D.gray[200]};\n\t\t\t`),";}",(props=>props.hasEvents&&`\n\t\t::before {\n\t\t\tbackground: ${props.isSelected?colors_values.D.white:colors_values.D.ui.theme};\n\t\t\tborder-radius: 2px;\n\t\t\tbottom: 0;\n\t\t\tcontent: " ";\n\t\t\theight: 4px;\n\t\t\tleft: 50%;\n\t\t\tmargin-left: -2px;\n\t\t\tposition: absolute;\n\t\t\twidth: 4px;\n\t\t}\n\t\t`),";");var toDate=__webpack_require__("./packages/components/node_modules/date-fns/esm/toDate/index.js");function inputToDate(input){return"string"==typeof input?new Date(input):(0,toDate.Z)(input)}function Day(_ref2){let{day:day,column:column,isSelected:isSelected,isFocusable:isFocusable,isFocusAllowed:isFocusAllowed,isToday:isToday,isInvalid:isInvalid,numEvents:numEvents,onClick:onClick,onKeyDown:onKeyDown}=_ref2;const ref=(0,react.useRef)();return(0,react.useEffect)((()=>{ref.current&&isFocusable&&isFocusAllowed&&ref.current.focus()}),[isFocusable]),(0,react.createElement)(DayButton,{ref:ref,className:"components-datetime__date__day",disabled:isInvalid,tabIndex:isFocusable?0:-1,"aria-label":getDayLabel(day,isSelected,numEvents),column:column,isSelected:isSelected,isToday:isToday,hasEvents:numEvents>0,onClick:onClick,onKeyDown:onKeyDown},(0,date_build_module.K_)("j",day,-day.getTimezoneOffset()))}function getDayLabel(date,isSelected,numEvents){const{formats:formats}=(0,date_build_module.Gw)(),localizedDate=(0,date_build_module.K_)(formats.date,date,-date.getTimezoneOffset());return isSelected&&numEvents>0?(0,i18n_build_module.gB)((0,i18n_build_module._n)("%1$s. Selected. There is %2$d event","%1$s. Selected. There are %2$d events",numEvents),localizedDate,numEvents):isSelected?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s. Selected"),localizedDate):numEvents>0?(0,i18n_build_module.gB)((0,i18n_build_module._n)("%1$s. There is %2$d event","%1$s. There are %2$d events",numEvents),localizedDate,numEvents):localizedDate}var date=function DatePicker(_ref){let{currentDate:currentDate,onChange:onChange,events:events=[],isInvalidDate:isInvalidDate,onMonthPreviewed:onMonthPreviewed,startOfWeek:weekStartsOn=0}=_ref;const date=currentDate?inputToDate(currentDate):new Date,{calendar:calendar,viewing:viewing,setSelected:setSelected,setViewing:setViewing,isSelected:isSelected,viewPreviousMonth:viewPreviousMonth,viewNextMonth:viewNextMonth}=(0,index_es.YA)({selected:[(0,startOfDay.Z)(date)],viewing:(0,startOfDay.Z)(date),weekStartsOn:weekStartsOn}),[focusable,setFocusable]=(0,react.useState)((0,startOfDay.Z)(date)),[isFocusWithinCalendar,setIsFocusWithinCalendar]=(0,react.useState)(!1),[prevCurrentDate,setPrevCurrentDate]=(0,react.useState)(currentDate);return currentDate!==prevCurrentDate&&(setPrevCurrentDate(currentDate),setSelected([(0,startOfDay.Z)(date)]),setViewing((0,startOfDay.Z)(date)),setFocusable((0,startOfDay.Z)(date))),(0,react.createElement)(styles_Wrapper,{className:"components-datetime__date",role:"application","aria-label":(0,i18n_build_module.__)("Calendar")},(0,react.createElement)(Navigator,null,(0,react.createElement)(build_module_button.Z,{icon:(0,i18n_build_module.dZ)()?arrow_right.Z:arrow_left.Z,variant:"tertiary","aria-label":(0,i18n_build_module.__)("View previous month"),onClick:()=>{viewPreviousMonth(),setFocusable((0,subMonths.Z)(focusable,1)),null==onMonthPreviewed||onMonthPreviewed((0,format.Z)((0,subMonths.Z)(viewing,1),"yyyy-MM-dd'T'HH:mm:ss"))}}),(0,react.createElement)(NavigatorHeading,{level:3},(0,react.createElement)("strong",null,(0,date_build_module.K_)("F",viewing,-viewing.getTimezoneOffset()))," ",(0,date_build_module.K_)("Y",viewing,-viewing.getTimezoneOffset())),(0,react.createElement)(build_module_button.Z,{icon:(0,i18n_build_module.dZ)()?arrow_left.Z:arrow_right.Z,variant:"tertiary","aria-label":(0,i18n_build_module.__)("View next month"),onClick:()=>{viewNextMonth(),setFocusable((0,addMonths.Z)(focusable,1)),null==onMonthPreviewed||onMonthPreviewed((0,format.Z)((0,addMonths.Z)(viewing,1),"yyyy-MM-dd'T'HH:mm:ss"))}})),(0,react.createElement)(Calendar,{onFocus:()=>setIsFocusWithinCalendar(!0),onBlur:()=>setIsFocusWithinCalendar(!1)},calendar[0][0].map((day=>(0,react.createElement)(DayOfWeek,{key:day.toString()},(0,date_build_module.K_)("D",day,-day.getTimezoneOffset())))),calendar[0].map((week=>week.map(((day,index)=>(0,isSameMonth.Z)(day,viewing)?(0,react.createElement)(Day,{key:day.toString(),day:day,column:index+1,isSelected:isSelected(day),isFocusable:(0,isEqual.Z)(day,focusable),isFocusAllowed:isFocusWithinCalendar,isToday:(0,isSameDay.Z)(day,new Date),isInvalid:!!isInvalidDate&&isInvalidDate(day),numEvents:events.filter((event=>(0,isSameDay.Z)(event.date,day))).length,onClick:()=>{setSelected([day]),setFocusable(day),null==onChange||onChange((0,format.Z)(new Date(day.getFullYear(),day.getMonth(),day.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()),"yyyy-MM-dd'T'HH:mm:ss"))},onKeyDown:event=>{let nextFocusable;"ArrowLeft"===event.key&&(nextFocusable=(0,addDays.Z)(day,(0,i18n_build_module.dZ)()?1:-1)),"ArrowRight"===event.key&&(nextFocusable=(0,addDays.Z)(day,(0,i18n_build_module.dZ)()?-1:1)),"ArrowUp"===event.key&&(nextFocusable=(0,subWeeks.Z)(day,1)),"ArrowDown"===event.key&&(nextFocusable=(0,addWeeks.Z)(day,1)),"PageUp"===event.key&&(nextFocusable=(0,subMonths.Z)(day,1)),"PageDown"===event.key&&(nextFocusable=(0,addMonths.Z)(day,1)),"Home"===event.key&&(nextFocusable=(0,startOfWeek.Z)(day)),"End"===event.key&&(nextFocusable=(0,startOfDay.Z)((0,endOfWeek.Z)(day))),nextFocusable&&(event.preventDefault(),setFocusable(nextFocusable),(0,isSameMonth.Z)(nextFocusable,viewing)||(setViewing(nextFocusable),null==onMonthPreviewed||onMonthPreviewed((0,format.Z)(nextFocusable,"yyyy-MM-dd'T'HH:mm:ss"))))}}):null))))))},startOfMinute=__webpack_require__("./packages/components/node_modules/date-fns/esm/startOfMinute/index.js"),set=__webpack_require__("./packages/components/node_modules/date-fns/esm/set/index.js"),setHours=__webpack_require__("./packages/components/node_modules/date-fns/esm/setHours/index.js"),setMonth=__webpack_require__("./packages/components/node_modules/date-fns/esm/setMonth/index.js"),select_control_styles=__webpack_require__("./packages/components/build-module/select-control/styles/select-control-styles.js");const time_styles_Wrapper=(0,emotion_styled_base_browser_esm.Z)("div",{target:"evcr23110"})("box-sizing:border-box;font-size:",config_values.Z.fontSize,";"),Fieldset=(0,emotion_styled_base_browser_esm.Z)("fieldset",{target:"evcr2319"})("border:0;margin:0 0 ",(0,space.D)(4)," 0;padding:0;&:last-child{margin-bottom:0;}"),TimeWrapper=(0,emotion_styled_base_browser_esm.Z)("div",{target:"evcr2318"})({name:"pd0mhc",styles:"direction:ltr;display:flex"}),baseInput=(0,emotion_react_browser_esm.iv)("&&& ",input_control_styles.II,"{padding-left:",(0,space.D)(2),";padding-right:",(0,space.D)(2),";text-align:center;}","","",""),HoursInput=(0,emotion_styled_base_browser_esm.Z)(number_control.Z,{target:"evcr2317"})(baseInput," width:",(0,space.D)(9),";&&& ",input_control_styles.II,"{padding-right:0;}&&& ",input_control_styles.Kg,"{border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;}"),TimeSeparator=(0,emotion_styled_base_browser_esm.Z)("span",{target:"evcr2316"})("border-top:",config_values.Z.borderWidth," solid ",colors_values.D.gray[700],";border-bottom:",config_values.Z.borderWidth," solid ",colors_values.D.gray[700],";line-height:calc(\n\t\t",config_values.Z.controlHeight," - ",config_values.Z.borderWidth," * 2\n\t);display:inline-block;"),MinutesInput=(0,emotion_styled_base_browser_esm.Z)(number_control.Z,{target:"evcr2315"})(baseInput," width:",(0,space.D)(9),";&&& ",input_control_styles.II,"{padding-left:0;}&&& ",input_control_styles.Kg,"{border-left:0;border-top-left-radius:0;border-bottom-left-radius:0;}"),MonthSelectWrapper=(0,emotion_styled_base_browser_esm.Z)("div",{target:"evcr2314"})({name:"1ff36h2",styles:"flex-grow:1"}),MonthSelect=(0,emotion_styled_base_browser_esm.Z)(select_control.Z,{target:"evcr2313"})("height:36px;",select_control_styles.Ph,"{line-height:30px;}"),DayInput=(0,emotion_styled_base_browser_esm.Z)(number_control.Z,{target:"evcr2312"})(baseInput," width:",(0,space.D)(9),";"),YearInput=(0,emotion_styled_base_browser_esm.Z)(number_control.Z,{target:"evcr2311"})(baseInput," width:",(0,space.D)(14),";"),TimeZone=(0,emotion_styled_base_browser_esm.Z)("div",{target:"evcr2310"})({name:"ebu3jh",styles:"text-decoration:underline dotted"});var timezone=()=>{const{timezone:timezone}=(0,date_build_module.Gw)(),userTimezoneOffset=(new Date).getTimezoneOffset()/60*-1;if(Number(timezone.offset)===userTimezoneOffset)return null;const offsetSymbol=Number(timezone.offset)>=0?"+":"",zoneAbbr=""!==timezone.abbr&&isNaN(Number(timezone.abbr))?timezone.abbr:`UTC${offsetSymbol}${timezone.offset}`,timezoneDetail="UTC"===timezone.string?(0,i18n_build_module.__)("Coordinated Universal Time"):`(${zoneAbbr}) ${timezone.string.replace("_"," ")}`;return(0,react.createElement)(tooltip.Z,{position:"top center",text:timezoneDetail},(0,react.createElement)(TimeZone,{className:"components-datetime__timezone"},zoneAbbr))},actions=__webpack_require__("./packages/components/build-module/input-control/reducer/actions.js");function from12hTo24h(hours,isPm){return isPm?(hours%12+12)%24:hours%12}function buildPadInputStateReducer(pad){return(state,action)=>{const nextState={...state};return action.type!==actions.g&&action.type!==actions.Oh&&action.type!==actions.LX||void 0!==nextState.value&&(nextState.value=nextState.value.toString().padStart(pad,"0")),nextState}}var time=function TimePicker(_ref){let{is12Hour:is12Hour,currentTime:currentTime,onChange:onChange}=_ref;const[date,setDate]=(0,react.useState)((()=>currentTime?(0,startOfMinute.Z)(inputToDate(currentTime)):new Date));(0,react.useEffect)((()=>{setDate(currentTime?(0,startOfMinute.Z)(inputToDate(currentTime)):new Date)}),[currentTime]);const{day:day,month:month,year:year,minutes:minutes,hours:hours,am:am}=(0,react.useMemo)((()=>({day:(0,format.Z)(date,"dd"),month:(0,format.Z)(date,"MM"),year:(0,format.Z)(date,"yyyy"),minutes:(0,format.Z)(date,"mm"),hours:(0,format.Z)(date,is12Hour?"hh":"HH"),am:(0,format.Z)(date,"a")})),[date,is12Hour]),buildNumberControlChangeCallback=method=>(value,_ref2)=>{let{event:event}=_ref2;if(!(event.target instanceof HTMLInputElement))return;if(!event.target.validity.valid)return;let numberValue=Number(value);"hours"===method&&is12Hour&&(numberValue=from12hTo24h(numberValue,"PM"===am));const newDate=(0,set.Z)(date,{[method]:numberValue});setDate(newDate),null==onChange||onChange((0,format.Z)(newDate,"yyyy-MM-dd'T'HH:mm:ss"))};function buildAmPmChangeCallback(value){return()=>{if(am===value)return;const parsedHours=parseInt(hours,10),newDate=(0,setHours.Z)(date,from12hTo24h(parsedHours,"PM"===value));setDate(newDate),null==onChange||onChange((0,format.Z)(newDate,"yyyy-MM-dd'T'HH:mm:ss"))}}const dayField=(0,react.createElement)(DayInput,{className:"components-datetime__time-field components-datetime__time-field-day",label:(0,i18n_build_module.__)("Day"),hideLabelFromVision:!0,__next36pxDefaultSize:!0,value:day,step:1,min:1,max:31,required:!0,spinControls:"none",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,onChange:buildNumberControlChangeCallback("date")}),monthField=(0,react.createElement)(MonthSelectWrapper,null,(0,react.createElement)(MonthSelect,{className:"components-datetime__time-field components-datetime__time-field-month",label:(0,i18n_build_module.__)("Month"),hideLabelFromVision:!0,__nextHasNoMarginBottom:!0,value:month,options:[{value:"01",label:(0,i18n_build_module.__)("January")},{value:"02",label:(0,i18n_build_module.__)("February")},{value:"03",label:(0,i18n_build_module.__)("March")},{value:"04",label:(0,i18n_build_module.__)("April")},{value:"05",label:(0,i18n_build_module.__)("May")},{value:"06",label:(0,i18n_build_module.__)("June")},{value:"07",label:(0,i18n_build_module.__)("July")},{value:"08",label:(0,i18n_build_module.__)("August")},{value:"09",label:(0,i18n_build_module.__)("September")},{value:"10",label:(0,i18n_build_module.__)("October")},{value:"11",label:(0,i18n_build_module.__)("November")},{value:"12",label:(0,i18n_build_module.__)("December")}],onChange:value=>{const newDate=(0,setMonth.Z)(date,Number(value)-1);setDate(newDate),null==onChange||onChange((0,format.Z)(newDate,"yyyy-MM-dd'T'HH:mm:ss"))}}));return(0,react.createElement)(time_styles_Wrapper,{className:"components-datetime__time"},(0,react.createElement)(Fieldset,null,(0,react.createElement)(base_control.ZP.VisualLabel,{as:"legend",className:"components-datetime__time-legend"},(0,i18n_build_module.__)("Time")),(0,react.createElement)(h_stack_component.Z,{className:"components-datetime__time-wrapper"},(0,react.createElement)(TimeWrapper,{className:"components-datetime__time-field components-datetime__time-field-time"},(0,react.createElement)(HoursInput,{className:"components-datetime__time-field-hours-input",label:(0,i18n_build_module.__)("Hours"),hideLabelFromVision:!0,__next36pxDefaultSize:!0,value:hours,step:1,min:is12Hour?1:0,max:is12Hour?12:23,required:!0,spinControls:"none",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,onChange:buildNumberControlChangeCallback("hours"),__unstableStateReducer:buildPadInputStateReducer(2)}),(0,react.createElement)(TimeSeparator,{className:"components-datetime__time-separator","aria-hidden":"true"},":"),(0,react.createElement)(MinutesInput,{className:"components-datetime__time-field-minutes-input",label:(0,i18n_build_module.__)("Minutes"),hideLabelFromVision:!0,__next36pxDefaultSize:!0,value:minutes,step:1,min:0,max:59,required:!0,spinControls:"none",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,onChange:buildNumberControlChangeCallback("minutes"),__unstableStateReducer:buildPadInputStateReducer(2)})),is12Hour&&(0,react.createElement)(button_group.Z,{className:"components-datetime__time-field components-datetime__time-field-am-pm"},(0,react.createElement)(build_module_button.Z,{className:"components-datetime__time-am-button",variant:"AM"===am?"primary":"secondary",onClick:buildAmPmChangeCallback("AM")},(0,i18n_build_module.__)("AM")),(0,react.createElement)(build_module_button.Z,{className:"components-datetime__time-pm-button",variant:"PM"===am?"primary":"secondary",onClick:buildAmPmChangeCallback("PM")},(0,i18n_build_module.__)("PM"))),(0,react.createElement)(spacer_component.Z,null),(0,react.createElement)(timezone,null))),(0,react.createElement)(Fieldset,null,(0,react.createElement)(base_control.ZP.VisualLabel,{as:"legend",className:"components-datetime__time-legend"},(0,i18n_build_module.__)("Date")),(0,react.createElement)(h_stack_component.Z,{className:"components-datetime__time-wrapper"},is12Hour?(0,react.createElement)(react.Fragment,null,monthField,dayField):(0,react.createElement)(react.Fragment,null,dayField,monthField),(0,react.createElement)(YearInput,{className:"components-datetime__time-field components-datetime__time-field-year",label:(0,i18n_build_module.__)("Year"),hideLabelFromVision:!0,__next36pxDefaultSize:!0,value:year,step:1,min:1,max:9999,required:!0,spinControls:"none",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,onChange:buildNumberControlChangeCallback("year"),__unstableStateReducer:buildPadInputStateReducer(4)}))))};const date_time_styles_Wrapper=(0,emotion_styled_base_browser_esm.Z)(v_stack_component.Z,{target:"e1p5onf01"})({name:"1khn195",styles:"box-sizing:border-box"}),CalendarHelp=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e1p5onf00"})({name:"l0rwn2",styles:"min-width:260px"}),date_time_noop=()=>{};const DateTimePicker=(0,react.forwardRef)((function UnforwardedDateTimePicker(_ref,ref){let{currentDate:currentDate,is12Hour:is12Hour,isInvalidDate:isInvalidDate,onMonthPreviewed:onMonthPreviewed=date_time_noop,onChange:onChange,events:events,startOfWeek:startOfWeek,__nextRemoveHelpButton:__nextRemoveHelpButton=!1,__nextRemoveResetButton:__nextRemoveResetButton=!1}=_ref;__nextRemoveHelpButton||(0,deprecated_build_module.Z)("Help button in wp.components.DateTimePicker",{since:"13.4",version:"15.8",hint:"Set the `__nextRemoveHelpButton` prop to `true` to remove this warning and opt in to the new behaviour, which will become the default in a future version."}),__nextRemoveResetButton||(0,deprecated_build_module.Z)("Reset button in wp.components.DateTimePicker",{since:"13.4",version:"15.8",hint:"Set the `__nextRemoveResetButton` prop to `true` to remove this warning and opt in to the new behaviour, which will become the default in a future version."});const[calendarHelpIsVisible,setCalendarHelpIsVisible]=(0,react.useState)(!1);return(0,react.createElement)(date_time_styles_Wrapper,{ref:ref,className:"components-datetime",spacing:4},!calendarHelpIsVisible&&(0,react.createElement)(react.Fragment,null,(0,react.createElement)(time,{currentTime:currentDate,onChange:onChange,is12Hour:is12Hour}),(0,react.createElement)(date,{currentDate:currentDate,onChange:onChange,isInvalidDate:isInvalidDate,events:events,onMonthPreviewed:onMonthPreviewed,startOfWeek:startOfWeek})),calendarHelpIsVisible&&(0,react.createElement)(CalendarHelp,{className:"components-datetime__calendar-help"},(0,react.createElement)(heading_component.Z,{level:4},(0,i18n_build_module.__)("Click to Select")),(0,react.createElement)("ul",null,(0,react.createElement)("li",null,(0,i18n_build_module.__)("Click the right or left arrows to select other months in the past or the future.")),(0,react.createElement)("li",null,(0,i18n_build_module.__)("Click the desired day to select it."))),(0,react.createElement)(heading_component.Z,{level:4},(0,i18n_build_module.__)("Navigating with a keyboard")),(0,react.createElement)("ul",null,(0,react.createElement)("li",null,(0,react.createElement)("abbr",{"aria-label":(0,i18n_build_module._x)("Enter","keyboard button")},"")," ",(0,react.createElement)("span",null,(0,i18n_build_module.__)("Select the date in focus."))),(0,react.createElement)("li",null,(0,react.createElement)("abbr",{"aria-label":(0,i18n_build_module.__)("Left and Right Arrows")},"/")," ",(0,i18n_build_module.__)("Move backward (left) or forward (right) by one day.")),(0,react.createElement)("li",null,(0,react.createElement)("abbr",{"aria-label":(0,i18n_build_module.__)("Up and Down Arrows")},"/")," ",(0,i18n_build_module.__)("Move backward (up) or forward (down) by one week.")),(0,react.createElement)("li",null,(0,react.createElement)("abbr",{"aria-label":(0,i18n_build_module.__)("Page Up and Page Down")},(0,i18n_build_module.__)("PgUp/PgDn"))," ",(0,i18n_build_module.__)("Move backward (PgUp) or forward (PgDn) by one month.")),(0,react.createElement)("li",null,(0,react.createElement)("abbr",{"aria-label":(0,i18n_build_module.__)("Home and End")},(0,i18n_build_module.__)("Home/End"))," ",(0,i18n_build_module.__)("Go to the first (Home) or last (End) day of a week.")))),(!__nextRemoveResetButton||!__nextRemoveHelpButton)&&(0,react.createElement)(h_stack_component.Z,{className:"components-datetime__buttons"},!__nextRemoveResetButton&&!calendarHelpIsVisible&&currentDate&&(0,react.createElement)(build_module_button.Z,{className:"components-datetime__date-reset-button",variant:"link",onClick:()=>null==onChange?void 0:onChange(null)},(0,i18n_build_module.__)("Reset")),(0,react.createElement)(spacer_component.Z,null),!__nextRemoveHelpButton&&(0,react.createElement)(build_module_button.Z,{className:"components-datetime__date-help-toggle",variant:"link",onClick:function onClickDescriptionToggle(){setCalendarHelpIsVisible(!calendarHelpIsVisible)}},calendarHelpIsVisible?(0,i18n_build_module.__)("Close"):(0,i18n_build_module.__)("Calendar Help"))))}));var build_module_date_time=DateTimePicker;function InspectorPopoverHeader(_ref){let{title:title,help:help,actions:actions=[],onClose:onClose}=_ref;return(0,react.createElement)(v_stack_component.Z,{className:"block-editor-inspector-popover-header",spacing:4},(0,react.createElement)(h_stack_component.Z,{alignment:"center"},(0,react.createElement)(heading_component.Z,{className:"block-editor-inspector-popover-header__heading",level:2,size:13},title),(0,react.createElement)(spacer_component.Z,null),actions.map((_ref2=>{let{label:label,icon:icon,onClick:onClick}=_ref2;return(0,react.createElement)(build_module_button.Z,{key:label,className:"block-editor-inspector-popover-header__action",label:label,icon:icon,variant:!icon&&"tertiary",onClick:onClick},!icon&&label)})),onClose&&(0,react.createElement)(build_module_button.Z,{className:"block-editor-inspector-popover-header__action",label:(0,i18n_build_module.__)("Close"),icon:close_small.Z,onClick:onClose})),help&&(0,react.createElement)(text_component.Z,null,help))}var publish_date_time_picker=(0,react.forwardRef)((function PublishDateTimePicker(_ref,ref){let{onClose:onClose,onChange:onChange,...additionalProps}=_ref;return(0,react.createElement)("div",{ref:ref,className:"block-editor-publish-date-time-picker"},(0,react.createElement)(InspectorPopoverHeader,{title:(0,i18n_build_module.__)("Publish"),actions:[{label:(0,i18n_build_module.__)("Now"),onClick:()=>null==onChange?void 0:onChange(null)}],onClose:onClose}),(0,react.createElement)(build_module_date_time,(0,esm_extends.Z)({startOfWeek:(0,date_build_module.Gw)().l10n.startOfWeek,__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0,onChange:onChange},additionalProps)))}));const ELEMENT_CLASS_NAMES={button:"wp-element-button",caption:"wp-element-caption"},__experimentalGetElementClassName=element=>ELEMENT_CLASS_NAMES[element]?ELEMENT_CLASS_NAMES[element]:"";function matchesAttributes(blockAttributes,variation){return Object.entries(variation).every((_ref=>{let[key,value]=_ref;return"object"==typeof value&&"object"==typeof blockAttributes[key]?matchesAttributes(blockAttributes[key],value):blockAttributes[key]===value}))}const __experimentalGetMatchingVariation=(blockAttributes,variations)=>{if(!variations||!blockAttributes)return;const matches=variations.filter((_ref2=>{let{attributes:attributes}=_ref2;return!(!attributes||!Object.keys(attributes).length)&&matchesAttributes(blockAttributes,attributes)}));return 1===matches.length?matches[0]:void 0}},"./packages/components/build-module/border-box-control/utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{gH:function(){return getBorderDiff},TZ:function(){return getCommonBorder},vw:function(){return getSplitBorders},Le:function(){return hasMixedBorders},Al:function(){return hasSplitBorders},n7:function(){return isCompleteBorder},lX:function(){return isDefinedBorder},TT:function(){return isEmptyBorder}});const UNITED_VALUE_REGEX=/^([\d.\-+]*)\s*(fr|cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|vw|vh|vmin|vmax|%|cap|ic|rlh|vi|vb|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?$/;const sides=["top","right","bottom","left"],borderProps=["color","style","width"],isEmptyBorder=border=>!border||!borderProps.some((prop=>void 0!==border[prop])),isDefinedBorder=border=>{if(!border)return!1;if(hasSplitBorders(border)){return!sides.every((side=>isEmptyBorder(border[side])))}return!isEmptyBorder(border)},isCompleteBorder=border=>!!border&&borderProps.every((prop=>void 0!==border[prop])),hasSplitBorders=function(){let border=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(border).some((side=>-1!==sides.indexOf(side)))},hasMixedBorders=borders=>{if(!hasSplitBorders(borders))return!1;const shorthandBorders=sides.map((side=>getShorthandBorderStyle(null==borders?void 0:borders[side])));return!shorthandBorders.every((border=>border===shorthandBorders[0]))},getSplitBorders=border=>{if(border&&!isEmptyBorder(border))return{top:border,right:border,bottom:border,left:border}},getBorderDiff=(original,updated)=>{const diff={};return original.color!==updated.color&&(diff.color=updated.color),original.style!==updated.style&&(diff.style=updated.style),original.width!==updated.width&&(diff.width=updated.width),diff},getCommonBorder=borders=>{if(!borders)return;const colors=[],styles=[],widths=[];sides.forEach((side=>{var _borders$side,_borders$side2,_borders$side3;colors.push(null===(_borders$side=borders[side])||void 0===_borders$side?void 0:_borders$side.color),styles.push(null===(_borders$side2=borders[side])||void 0===_borders$side2?void 0:_borders$side2.style),widths.push(null===(_borders$side3=borders[side])||void 0===_borders$side3?void 0:_borders$side3.width)}));const allColorsMatch=colors.every((value=>value===colors[0])),allStylesMatch=styles.every((value=>value===styles[0])),allWidthsMatch=widths.every((value=>value===widths[0]));return{color:allColorsMatch?colors[0]:void 0,style:allStylesMatch?styles[0]:void 0,width:allWidthsMatch?widths[0]:getMostCommonUnit(widths)}},getShorthandBorderStyle=(border,fallbackBorder)=>{if(isEmptyBorder(border))return fallbackBorder;const{color:fallbackColor,style:fallbackStyle,width:fallbackWidth}=fallbackBorder||{},{color:color=fallbackColor,style:style=fallbackStyle,width:width=fallbackWidth}=border;return[width,!!width&&"0"!==width||!!color?style||"solid":style,color].filter(Boolean).join(" ")},getMostCommonUnit=values=>function mode(values){if(0===values.length)return;const map={};let currentMode,maxCount=0;return values.forEach((value=>{map[value]=void 0===map[value]?1:map[value]+1,map[value]>maxCount&&(currentMode=value,maxCount=map[value])})),currentMode}(values.map((value=>void 0===value?void 0:function parseCSSUnitValue(toParse){const matched=toParse.trim().match(UNITED_VALUE_REGEX);if(!matched)return[void 0,void 0];const[,num,unit]=matched;let numParsed=parseFloat(num);return numParsed=Number.isNaN(numParsed)?void 0:numParsed,[numParsed,unit]}(`${value}`)[1])).filter((value=>void 0!==value)))},"./packages/components/build-module/button-group/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);const ButtonGroup=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((function UnforwardedButtonGroup(props,ref){const{className:className,...restProps}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-button-group",className);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("div",(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__.Z)({ref:ref,role:"group",className:classes},restProps))}));__webpack_exports__.Z=ButtonGroup},"./packages/components/build-module/external-link/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return external_link}});var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),external=__webpack_require__("./packages/icons/build-module/library/external.js"),component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),icon=__webpack_require__("./packages/icons/build-module/icon/index.js");const StyledIcon=(0,emotion_styled_base_browser_esm.Z)(icon.Z,{target:"esh4a730"})({name:"rvs7bx",styles:"width:1em;height:1em;margin:0;vertical-align:middle;fill:currentColor"});var external_link=(0,react.forwardRef)((function UnforwardedExternalLink(props,ref){const{href:href,children:children,className:className,rel:rel="",...additionalProps}=props,optimizedRel=[...new Set([...rel.split(" "),"external","noreferrer","noopener"].filter(Boolean))].join(" "),classes=classnames_default()("components-external-link",className),isInternalAnchor=!(null==href||!href.startsWith("#"));return(0,react.createElement)("a",(0,esm_extends.Z)({},additionalProps,{className:classes,href:href,onClick:event=>{isInternalAnchor&&event.preventDefault(),props.onClick&&props.onClick(event)},target:"_blank",rel:optimizedRel,ref:ref}),children,(0,react.createElement)(component.Z,{as:"span"},(0,build_module.__)("(opens in a new tab)")),(0,react.createElement)(StyledIcon,{icon:external.Z,className:"components-external-link__icon"}))}))},"./packages/components/build-module/form-file-upload/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/build-module/button/index.js");__webpack_exports__.Z=function FormFileUpload(_ref){let{accept:accept,children:children,multiple:multiple=!1,onChange:onChange,onClick:onClick,render:render,...props}=_ref;const ref=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),openFileDialog=()=>{var _ref$current;null===(_ref$current=ref.current)||void 0===_ref$current||_ref$current.click()},ui=render?render({openFileDialog:openFileDialog}):(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_button__WEBPACK_IMPORTED_MODULE_1__.Z,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__.Z)({onClick:openFileDialog},props),children);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",{className:"components-form-file-upload"},ui,(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("input",{type:"file",ref:ref,multiple:multiple,style:{display:"none"},accept:accept,onChange:onChange,onClick:onClick,"data-testid":"form-file-upload-input"}))}},"./packages/components/build-module/higher-order/with-spoken-messages/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),_wordpress_a11y__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/a11y/build-module/index.js");__webpack_exports__.Z=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_1__.o)((Component=>props=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)(Component,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__.Z)({},props,{speak:_wordpress_a11y__WEBPACK_IMPORTED_MODULE_0__.D,debouncedSpeak:(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_4__.Z)(_wordpress_a11y__WEBPACK_IMPORTED_MODULE_0__.D,500)}))),"withSpokenMessages")},"./packages/components/build-module/menu-items-choice/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return MenuItemsChoice}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/icons/build-module/library/check.js"),_menu_item__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/build-module/menu-item/index.js");const noop=()=>{};function MenuItemsChoice(_ref){let{choices:choices=[],onHover:onHover=noop,onSelect:onSelect,value:value}=_ref;return choices.map((item=>{const isSelected=value===item.value;return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_menu_item__WEBPACK_IMPORTED_MODULE_1__.Z,{key:item.value,role:"menuitemradio",icon:isSelected&&_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__.Z,info:item.info,isSelected:isSelected,shortcut:item.shortcut,className:"components-menu-items-choice",onClick:()=>{isSelected||onSelect(item.value)},onMouseEnter:()=>onHover(item.value),onMouseLeave:()=>onHover(null),"aria-label":item["aria-label"]},item.label)}))}},"./packages/components/build-module/notice/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/element/build-module/serialize.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/element/build-module/raw-html.js"),_wordpress_a11y__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/a11y/build-module/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/icons/build-module/library/close.js"),___WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/build-module/button/index.js");const noop=()=>{};function getDefaultPoliteness(status){switch(status){case"success":case"warning":case"info":return"polite";default:return"assertive"}}__webpack_exports__.Z=function Notice(_ref){let{className:className,status:status="info",children:children,spokenMessage:spokenMessage=children,onRemove:onRemove=noop,isDismissible:isDismissible=!0,actions:actions=[],politeness:politeness=getDefaultPoliteness(status),__unstableHTML:__unstableHTML,onDismiss:onDismiss=noop}=_ref;!function useSpokenMessage(message,politeness){const spokenMessage="string"==typeof message?message:(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_3__.ZP)(message);(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{spokenMessage&&(0,_wordpress_a11y__WEBPACK_IMPORTED_MODULE_2__.D)(spokenMessage,politeness)}),[spokenMessage,politeness])}(spokenMessage,politeness);const classes=classnames__WEBPACK_IMPORTED_MODULE_0___default()(className,"components-notice","is-"+status,{"is-dismissible":isDismissible});return __unstableHTML&&(children=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.createElement)(_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.Z,null,children)),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.createElement)("div",{className:classes},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.createElement)("div",{className:"components-notice__content"},children,(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.createElement)("div",{className:"components-notice__actions"},actions.map(((_ref2,index)=>{let{className:buttonCustomClasses,label:label,isPrimary:isPrimary,variant:variant,noDefaultClasses:noDefaultClasses=!1,onClick:onClick,url:url}=_ref2,computedVariant=variant;return"primary"===variant||noDefaultClasses||(computedVariant=url?"link":"secondary"),void 0===computedVariant&&isPrimary&&(computedVariant="primary"),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.createElement)(___WEBPACK_IMPORTED_MODULE_6__.Z,{key:index,href:url,variant:computedVariant,onClick:url?void 0:onClick,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-notice__action",buttonCustomClasses)},label)})))),isDismissible&&(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.createElement)(___WEBPACK_IMPORTED_MODULE_6__.Z,{className:"components-notice__dismiss",icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_7__.Z,label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Dismiss this notice"),onClick:event=>{var _event$preventDefault;null==event||null===(_event$preventDefault=event.preventDefault)||void 0===_event$preventDefault||_event$preventDefault.call(event),onDismiss(),onRemove()},showTooltip:!1}))}},"./packages/components/build-module/panel/body.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/compose/build-module/hooks/use-reduced-motion/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/icons/build-module/library/chevron-up.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/icons/build-module/library/chevron-down.js"),_button__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/build-module/button/index.js"),_icon__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/components/build-module/icon/index.js"),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/build-module/utils/hooks/use-controlled-state.js"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/build-module/utils/hooks/use-update-effect.js");const noop=()=>{};const PanelBodyTitle=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(((_ref2,ref)=>{let{isOpened:isOpened,icon:icon,title:title,...props}=_ref2;return title?(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)("h2",{className:"components-panel__body-title"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)(_button__WEBPACK_IMPORTED_MODULE_7__.Z,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__.Z)({className:"components-panel__body-toggle","aria-expanded":isOpened,ref:ref},props),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)("span",{"aria-hidden":"true"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)(_icon__WEBPACK_IMPORTED_MODULE_8__.Z,{className:"components-panel__arrow",icon:isOpened?_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__.Z:_wordpress_icons__WEBPACK_IMPORTED_MODULE_10__.Z})),title,icon&&(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)(_icon__WEBPACK_IMPORTED_MODULE_8__.Z,{icon:icon,className:"components-panel__icon",size:20}))):null})),ForwardedComponent=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)((function PanelBody(_ref,ref){let{buttonProps:buttonProps={},children:children,className:className,icon:icon,initialOpen:initialOpen,onToggle:onToggle=noop,opened:opened,title:title,scrollAfterOpen:scrollAfterOpen=!0}=_ref;const[isOpened,setIsOpened]=(0,_utils__WEBPACK_IMPORTED_MODULE_1__.Z)(opened,{initial:void 0===initialOpen||initialOpen}),nodeRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useRef)(),scrollBehavior=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__.Z)()?"auto":"smooth",scrollAfterOpenRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useRef)();scrollAfterOpenRef.current=scrollAfterOpen,(0,_utils__WEBPACK_IMPORTED_MODULE_4__.Z)((()=>{var _nodeRef$current;isOpened&&scrollAfterOpenRef.current&&null!==(_nodeRef$current=nodeRef.current)&&void 0!==_nodeRef$current&&_nodeRef$current.scrollIntoView&&nodeRef.current.scrollIntoView({inline:"nearest",block:"nearest",behavior:scrollBehavior})}),[isOpened,scrollBehavior]);const classes=classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-panel__body",className,{"is-opened":isOpened});return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)("div",{className:classes,ref:(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_5__.Z)([nodeRef,ref])},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)(PanelBodyTitle,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_6__.Z)({icon:icon,isOpened:isOpened,onClick:event=>{event.preventDefault();const next=!isOpened;setIsOpened(next),onToggle(next)},title:title},buttonProps)),"function"==typeof children?children({opened:isOpened}):isOpened&&children)}));ForwardedComponent.displayName="PanelBody",__webpack_exports__.Z=ForwardedComponent},"./packages/components/build-module/placeholder/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/compose/build-module/hooks/use-resize-observer/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),_icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/build-module/icon/index.js");const PlaceholderIllustration=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_2__.Wj,{className:"components-placeholder__illustration",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 60 60",preserveAspectRatio:"none"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_2__.y$,{vectorEffect:"non-scaling-stroke",d:"M60 60 0 0"}));__webpack_exports__.Z=function Placeholder(props){const{icon:icon,children:children,label:label,instructions:instructions,className:className,notices:notices,preview:preview,isColumnLayout:isColumnLayout,withIllustration:withIllustration,...additionalProps}=props,[resizeListener,{width:width}]=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__.Z)();let modifierClassNames;"number"==typeof width&&(modifierClassNames={"is-large":width>=480,"is-medium":width>=160&&width<480,"is-small":width<160});const classes=classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-placeholder",className,modifierClassNames,withIllustration?"has-illustration":null),fieldsetClasses=classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-placeholder__fieldset",{"is-column-layout":isColumnLayout});return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("div",(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_4__.Z)({},additionalProps,{className:classes}),withIllustration?PlaceholderIllustration:null,resizeListener,notices,preview&&(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("div",{className:"components-placeholder__preview"},preview),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("div",{className:"components-placeholder__label"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)(_icon__WEBPACK_IMPORTED_MODULE_5__.Z,{icon:icon}),label),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("fieldset",{className:fieldsetClasses},!!instructions&&(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("legend",{className:"components-placeholder__instructions"},instructions),children))}},"./packages/components/build-module/select-control/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Y:function(){return SelectControl}});var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_compose__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_base_control__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/build-module/base-control/index.js"),_input_control_input_base__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/build-module/input-control/input-base.js"),_styles_select_control_styles__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/build-module/select-control/styles/select-control-styles.js"),_chevron_down__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/build-module/select-control/chevron-down.js");const noop=()=>{};const SelectControl=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)((function UnforwardedSelectControl(_ref,ref){let{className:className,disabled:disabled=!1,help:help,hideLabelFromVision:hideLabelFromVision,id:idProp,label:label,multiple:multiple=!1,onBlur:onBlur=noop,onChange:onChange=noop,onFocus:onFocus=noop,options:options=[],size:size="default",value:valueProp,labelPosition:labelPosition="top",children:children,prefix:prefix,suffix:suffix,__next36pxDefaultSize:__next36pxDefaultSize=!1,__nextHasNoMarginBottom:__nextHasNoMarginBottom=!1,...props}=_ref;const[isFocused,setIsFocused]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),id=function useUniqueId(idProp){const instanceId=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_1__.Z)(SelectControl);return idProp||`inspector-select-control-${instanceId}`}(idProp),helpId=help?`${id}__help`:void 0;if(!(null!=options&&options.length||children))return null;const classes=classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-select-control",className);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)(_base_control__WEBPACK_IMPORTED_MODULE_3__.ZP,{help:help,id:id,__nextHasNoMarginBottom:__nextHasNoMarginBottom},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)(_input_control_input_base__WEBPACK_IMPORTED_MODULE_4__.Z,{className:classes,disabled:disabled,hideLabelFromVision:hideLabelFromVision,id:id,isFocused:isFocused,label:label,size:size,suffix:suffix||(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)(_chevron_down__WEBPACK_IMPORTED_MODULE_5__.Z,null),prefix:prefix,labelPosition:labelPosition,__next36pxDefaultSize:__next36pxDefaultSize},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)(_styles_select_control_styles__WEBPACK_IMPORTED_MODULE_6__.Ph,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_7__.Z)({},props,{__next36pxDefaultSize:__next36pxDefaultSize,"aria-describedby":helpId,className:"components-select-control__input",disabled:disabled,id:id,multiple:multiple,onBlur:event=>{onBlur(event),setIsFocused(!1)},onChange:event=>{if(multiple){const newValues=Array.from(event.target.options).filter((_ref2=>{let{selected:selected}=_ref2;return selected})).map((_ref3=>{let{value:value}=_ref3;return value}));onChange(newValues)}else onChange(event.target.value,{event:event})},onFocus:event=>{onFocus(event),setIsFocused(!0)},ref:ref,selectSize:size,value:valueProp}),children||options.map(((option,index)=>{const key=option.id||`${option.label}-${option.value}-${index}`;return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)("option",{key:key,value:option.value,disabled:option.disabled},option.label)})))))}));__webpack_exports__.Z=SelectControl},"./packages/components/build-module/text-control/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_base_control__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/base-control/index.js");const TextControl=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((function UnforwardedTextControl(props,ref){const{__nextHasNoMarginBottom:__nextHasNoMarginBottom,label:label,hideLabelFromVision:hideLabelFromVision,value:value,help:help,className:className,onChange:onChange,type:type="text",...additionalProps}=props,id=`inspector-text-control-${(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_0__.Z)(TextControl)}`;return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)(_base_control__WEBPACK_IMPORTED_MODULE_2__.ZP,{__nextHasNoMarginBottom:__nextHasNoMarginBottom,label:label,hideLabelFromVision:hideLabelFromVision,id:id,help:help,className:className},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("input",(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__.Z)({className:"components-text-control__input",type:type,id:id,value:value,onChange:event=>onChange(event.target.value),"aria-describedby":help?id+"__help":void 0,ref:ref},additionalProps)))}));__webpack_exports__.Z=TextControl},"./packages/components/build-module/utils/hooks/use-controlled-value.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{O:function(){return useControlledValue}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useControlledValue(_ref){let{defaultValue:defaultValue,onChange:onChange,value:valueProp}=_ref;const hasValue=void 0!==valueProp,initialValue=hasValue?valueProp:defaultValue,[state,setState]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(initialValue);let setValue;return setValue=hasValue&&"function"==typeof onChange?onChange:hasValue||"function"!=typeof onChange?setState:nextValue=>{onChange(nextValue),setState(nextValue)},[hasValue?valueProp:state,setValue]}},"./packages/components/build-module/utils/strings.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{e:function(){return normalizeTextString},h:function(){return escapeRegExp}});var remove_accents__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(remove_accents__WEBPACK_IMPORTED_MODULE_0__);const ALL_UNICODE_DASH_CHARACTERS=new RegExp(`[${["-","~","","","","","","","","","","","","","","","","","","","","","","","","","",""].join("")}]`,"g"),normalizeTextString=value=>remove_accents__WEBPACK_IMPORTED_MODULE_0___default()(value).toLocaleLowerCase().replace(ALL_UNICODE_DASH_CHARACTERS,"-");function escapeRegExp(string){return string.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}},"./packages/compose/build-module/higher-order/with-instance-id/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_utils_create_higher_order_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),_hooks_use_instance_id__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js");const withInstanceId=(0,_utils_create_higher_order_component__WEBPACK_IMPORTED_MODULE_0__.o)((WrappedComponent=>props=>{const instanceId=(0,_hooks_use_instance_id__WEBPACK_IMPORTED_MODULE_1__.Z)(WrappedComponent);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.createElement)(WrappedComponent,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_3__.Z)({},props,{instanceId:instanceId}))}),"instanceId");__webpack_exports__.Z=withInstanceId},"./packages/compose/build-module/higher-order/with-safe-timeout/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js");const withSafeTimeout=(0,__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js").o)((OriginalComponent=>class WrappedComponent extends _wordpress_element__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(props){super(props),this.timeouts=[],this.setTimeout=this.setTimeout.bind(this),this.clearTimeout=this.clearTimeout.bind(this)}componentWillUnmount(){this.timeouts.forEach(clearTimeout)}setTimeout(fn,delay){const id=setTimeout((()=>{fn(),this.clearTimeout(id)}),delay);return this.timeouts.push(id),id}clearTimeout(id){clearTimeout(id),this.timeouts=this.timeouts.filter((timeoutId=>timeoutId!==id))}render(){return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)(OriginalComponent,(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__.Z)({},this.props,{setTimeout:this.setTimeout,clearTimeout:this.clearTimeout}))}}),"withSafeTimeout");__webpack_exports__.Z=withSafeTimeout},"./packages/compose/build-module/hooks/use-dragging/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useDragging}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_use_isomorphic_layout_effect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/hooks/use-isomorphic-layout-effect/index.js");function useDragging(_ref){let{onDragStart:onDragStart,onDragMove:onDragMove,onDragEnd:onDragEnd}=_ref;const[isDragging,setIsDragging]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),eventsRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)({onDragStart:onDragStart,onDragMove:onDragMove,onDragEnd:onDragEnd});(0,_use_isomorphic_layout_effect__WEBPACK_IMPORTED_MODULE_1__.Z)((()=>{eventsRef.current.onDragStart=onDragStart,eventsRef.current.onDragMove=onDragMove,eventsRef.current.onDragEnd=onDragEnd}),[onDragStart,onDragMove,onDragEnd]);const onMouseMove=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>eventsRef.current.onDragMove&&eventsRef.current.onDragMove(event)),[]),endDrag=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>{eventsRef.current.onDragEnd&&eventsRef.current.onDragEnd(event),document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",endDrag),setIsDragging(!1)}),[]),startDrag=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>{eventsRef.current.onDragStart&&eventsRef.current.onDragStart(event),document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",endDrag),setIsDragging(!0)}),[]);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>{isDragging&&(document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",endDrag))}),[isDragging]),{startDrag:startDrag,endDrag:endDrag,isDragging:isDragging}}},"./packages/icons/build-module/library/align-center.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const alignCenter=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M16.4 4.2H7.6v1.5h8.9V4.2zM4 11.2v1.5h16v-1.5H4zm3.6 8.6h8.9v-1.5H7.6v1.5z"}));__webpack_exports__.Z=alignCenter},"./packages/icons/build-module/library/align-left.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const alignLeft=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M4 19.8h8.9v-1.5H4v1.5zm8.9-15.6H4v1.5h8.9V4.2zm-8.9 7v1.5h16v-1.5H4z"}));__webpack_exports__.Z=alignLeft},"./packages/icons/build-module/library/align-right.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const alignRight=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M11.1 19.8H20v-1.5h-8.9v1.5zm0-15.6v1.5H20V4.2h-8.9zM4 12.8h16v-1.5H4v1.5z"}));__webpack_exports__.Z=alignRight},"./packages/icons/build-module/library/arrow-left.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const arrowLeft=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"}));__webpack_exports__.Z=arrowLeft},"./packages/icons/build-module/library/category.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const category=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"}));__webpack_exports__.Z=category},"./packages/icons/build-module/library/edit.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return edit}});var react=__webpack_require__("./node_modules/react/index.js"),svg=__webpack_require__("./packages/primitives/build-module/svg/index.js");var edit=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"}))},"./packages/icons/build-module/library/external.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const external=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M18.2 17c0 .7-.6 1.2-1.2 1.2H7c-.7 0-1.2-.6-1.2-1.2V7c0-.7.6-1.2 1.2-1.2h3.2V4.2H7C5.5 4.2 4.2 5.5 4.2 7v10c0 1.5 1.2 2.8 2.8 2.8h10c1.5 0 2.8-1.2 2.8-2.8v-3.6h-1.5V17zM14.9 3v1.5h3.7l-6.4 6.4 1.1 1.1 6.4-6.4v3.7h1.5V3h-6.3z"}));__webpack_exports__.Z=external},"./packages/icons/build-module/library/file.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const file=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M19 6.2h-5.9l-.6-1.1c-.3-.7-1-1.1-1.8-1.1H5c-1.1 0-2 .9-2 2v11.8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8.2c0-1.1-.9-2-2-2zm.5 11.6c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h5.8c.2 0 .4.1.4.3l1 2H19c.3 0 .5.2.5.5v9.5z"}));__webpack_exports__.Z=file},"./packages/icons/build-module/library/format-capitalize.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const formatCapitalize=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M7.1 6.8L3.1 18h1.6l1.1-3h4.3l1.1 3h1.6l-4-11.2H7.1zm-.8 6.8L8 8.9l1.7 4.7H6.3zm14.5-1.5c-.3-.6-.7-1.1-1.2-1.5-.6-.4-1.2-.6-1.9-.6-.5 0-.9.1-1.4.3-.4.2-.8.5-1.1.8V6h-1.4v12h1.3l.2-1c.2.4.6.6 1 .8.4.2.9.3 1.4.3.7 0 1.2-.2 1.8-.5.5-.4 1-.9 1.3-1.5.3-.6.5-1.3.5-2.1-.1-.6-.2-1.3-.5-1.9zm-1.7 4c-.4.5-.9.8-1.6.8s-1.2-.2-1.7-.7c-.4-.5-.7-1.2-.7-2.1 0-.9.2-1.6.7-2.1.4-.5 1-.7 1.7-.7s1.2.3 1.6.8c.4.5.6 1.2.6 2 .1.8-.2 1.4-.6 2z"}));__webpack_exports__.Z=formatCapitalize},"./packages/icons/build-module/library/format-lowercase.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const formatLowercase=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M11 16.8c-.1-.1-.2-.3-.3-.5v-2.6c0-.9-.1-1.7-.3-2.2-.2-.5-.5-.9-.9-1.2-.4-.2-.9-.3-1.6-.3-.5 0-1 .1-1.5.2s-.9.3-1.2.6l.2 1.2c.4-.3.7-.4 1.1-.5.3-.1.7-.2 1-.2.6 0 1 .1 1.3.4.3.2.4.7.4 1.4-1.2 0-2.3.2-3.3.7s-1.4 1.1-1.4 2.1c0 .7.2 1.2.7 1.6.4.4 1 .6 1.8.6.9 0 1.7-.4 2.4-1.2.1.3.2.5.4.7.1.2.3.3.6.4.3.1.6.1 1.1.1h.1l.2-1.2h-.1c-.4.1-.6 0-.7-.1zM9.2 16c-.2.3-.5.6-.9.8-.3.1-.7.2-1.1.2-.4 0-.7-.1-.9-.3-.2-.2-.3-.5-.3-.9 0-.6.2-1 .7-1.3.5-.3 1.3-.4 2.5-.5v2zm10.6-3.9c-.3-.6-.7-1.1-1.2-1.5-.6-.4-1.2-.6-1.9-.6-.5 0-.9.1-1.4.3-.4.2-.8.5-1.1.8V6h-1.4v12h1.3l.2-1c.2.4.6.6 1 .8.4.2.9.3 1.4.3.7 0 1.2-.2 1.8-.5.5-.4 1-.9 1.3-1.5.3-.6.5-1.3.5-2.1-.1-.6-.2-1.3-.5-1.9zm-1.7 4c-.4.5-.9.8-1.6.8s-1.2-.2-1.7-.7c-.4-.5-.7-1.2-.7-2.1 0-.9.2-1.6.7-2.1.4-.5 1-.7 1.7-.7s1.2.3 1.6.8c.4.5.6 1.2.6 2s-.2 1.4-.6 2z"}));__webpack_exports__.Z=formatLowercase},"./packages/icons/build-module/library/format-strikethrough.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const formatStrikethrough=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M9.1 9v-.5c0-.6.2-1.1.7-1.4.5-.3 1.2-.5 2-.5.7 0 1.4.1 2.1.3.7.2 1.4.5 2.1.9l.2-1.9c-.6-.3-1.2-.5-1.9-.7-.8-.1-1.6-.2-2.4-.2-1.5 0-2.7.3-3.6 1-.8.7-1.2 1.5-1.2 2.6V9h2zM20 12H4v1h8.3c.3.1.6.2.8.3.5.2.9.5 1.1.8.3.3.4.7.4 1.2 0 .7-.2 1.1-.8 1.5-.5.3-1.2.5-2.1.5-.8 0-1.6-.1-2.4-.3-.8-.2-1.5-.5-2.2-.8L7 18.1c.5.2 1.2.4 2 .6.8.2 1.6.3 2.4.3 1.7 0 3-.3 3.9-1 .9-.7 1.3-1.6 1.3-2.8 0-.9-.2-1.7-.7-2.2H20v-1z"}));__webpack_exports__.Z=formatStrikethrough},"./packages/icons/build-module/library/format-underline.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const formatUnderline=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M7 18v1h10v-1H7zm5-2c1.5 0 2.6-.4 3.4-1.2.8-.8 1.1-2 1.1-3.5V5H15v5.8c0 1.2-.2 2.1-.6 2.8-.4.7-1.2 1-2.4 1s-2-.3-2.4-1c-.4-.7-.6-1.6-.6-2.8V5H7.5v6.2c0 1.5.4 2.7 1.1 3.5.8.9 1.9 1.3 3.4 1.3z"}));__webpack_exports__.Z=formatUnderline},"./packages/icons/build-module/library/format-uppercase.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const formatUppercase=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M6.1 6.8L2.1 18h1.6l1.1-3h4.3l1.1 3h1.6l-4-11.2H6.1zm-.8 6.8L7 8.9l1.7 4.7H5.3zm15.1-.7c-.4-.5-.9-.8-1.6-1 .4-.2.7-.5.8-.9.2-.4.3-.9.3-1.4 0-.9-.3-1.6-.8-2-.6-.5-1.3-.7-2.4-.7h-3.5V18h4.2c1.1 0 2-.3 2.6-.8.6-.6 1-1.4 1-2.4-.1-.8-.3-1.4-.6-1.9zm-5.7-4.7h1.8c.6 0 1.1.1 1.4.4.3.2.5.7.5 1.3 0 .6-.2 1.1-.5 1.3-.3.2-.8.4-1.4.4h-1.8V8.2zm4 8c-.4.3-.9.5-1.5.5h-2.6v-3.8h2.6c1.4 0 2 .6 2 1.9.1.6-.1 1-.5 1.4z"}));__webpack_exports__.Z=formatUppercase},"./packages/icons/build-module/library/grid.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const grid=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7.8 16.5H5c-.3 0-.5-.2-.5-.5v-6.2h6.8v6.7zm0-8.3H4.5V5c0-.3.2-.5.5-.5h6.2v6.7zm8.3 7.8c0 .3-.2.5-.5.5h-6.2v-6.8h6.8V19zm0-7.8h-6.8V4.5H19c.3 0 .5.2.5.5v6.2z",fillRule:"evenodd",clipRule:"evenodd"}));__webpack_exports__.Z=grid},"./packages/icons/build-module/library/keyboard-return.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const keyboardReturn=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M6.734 16.106l2.176-2.38-1.093-1.028-3.846 4.158 3.846 4.157 1.093-1.027-2.176-2.38h2.811c1.125 0 2.25.03 3.374 0 1.428-.001 3.362-.25 4.963-1.277 1.66-1.065 2.868-2.906 2.868-5.859 0-2.479-1.327-4.896-3.65-5.93-1.82-.813-3.044-.8-4.806-.788l-.567.002v1.5c.184 0 .368 0 .553-.002 1.82-.007 2.704-.014 4.21.657 1.854.827 2.76 2.657 2.76 4.561 0 2.472-.973 3.824-2.178 4.596-1.258.807-2.864 1.04-4.163 1.04h-.02c-1.115.03-2.229 0-3.344 0H6.734z"}));__webpack_exports__.Z=keyboardReturn},"./packages/icons/build-module/library/layout.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const layout=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"}));__webpack_exports__.Z=layout},"./packages/icons/build-module/library/line-dashed.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const lineDashed=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{fillRule:"evenodd",d:"M5 11.25h3v1.5H5v-1.5zm5.5 0h3v1.5h-3v-1.5zm8.5 0h-3v1.5h3v-1.5z",clipRule:"evenodd"}));__webpack_exports__.Z=lineDashed},"./packages/icons/build-module/library/line-dotted.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const lineDotted=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{fillRule:"evenodd",d:"M5.25 11.25h1.5v1.5h-1.5v-1.5zm3 0h1.5v1.5h-1.5v-1.5zm4.5 0h-1.5v1.5h1.5v-1.5zm1.5 0h1.5v1.5h-1.5v-1.5zm4.5 0h-1.5v1.5h1.5v-1.5z",clipRule:"evenodd"}));__webpack_exports__.Z=lineDotted},"./packages/icons/build-module/library/line-solid.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const lineSolid=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M5 11.25h14v1.5H5z"}));__webpack_exports__.Z=lineSolid},"./packages/icons/build-module/library/media.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const media=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h13.4c.4 0 .8.4.8.8v13.4zM10 15l5-3-5-3v6z"}));__webpack_exports__.Z=media},"./packages/icons/build-module/library/page.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const page=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M7 5.5h10a.5.5 0 01.5.5v12a.5.5 0 01-.5.5H7a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM17 4H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2zm-1 3.75H8v1.5h8v-1.5zM8 11h8v1.5H8V11zm6 3.25H8v1.5h6v-1.5z"}));__webpack_exports__.Z=page},"./packages/icons/build-module/library/post-featured-image.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const postFeaturedImage=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M19 3H5c-.6 0-1 .4-1 1v7c0 .5.4 1 1 1h14c.5 0 1-.4 1-1V4c0-.6-.4-1-1-1zM5.5 10.5v-.4l1.8-1.3 1.3.8c.3.2.7.2.9-.1L11 8.1l2.4 2.4H5.5zm13 0h-2.9l-4-4c-.3-.3-.8-.3-1.1 0L8.9 8l-1.2-.8c-.3-.2-.6-.2-.9 0l-1.3 1V4.5h13v6zM4 20h9v-1.5H4V20zm0-4h16v-1.5H4V16z"}));__webpack_exports__.Z=postFeaturedImage},"./packages/icons/build-module/library/post-list.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const postList=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v12zM7 11h2V9H7v2zm0 4h2v-2H7v2zm3-4h7V9h-7v2zm0 4h7v-2h-7v2z"}));__webpack_exports__.Z=postList},"./packages/icons/build-module/library/styles.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const styles=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M12 4c-4.4 0-8 3.6-8 8v.1c0 4.1 3.2 7.5 7.2 7.9h.8c4.4 0 8-3.6 8-8s-3.6-8-8-8zm0 15V5c3.9 0 7 3.1 7 7s-3.1 7-7 7z"}));__webpack_exports__.Z=styles},"./packages/icons/build-module/library/swatch.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const swatch=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M5 17.7c.4.5.8.9 1.2 1.2l1.1-1.4c-.4-.3-.7-.6-1-1L5 17.7zM5 6.3l1.4 1.1c.3-.4.6-.7 1-1L6.3 5c-.5.4-.9.8-1.3 1.3zm.1 7.8l-1.7.5c.2.6.4 1.1.7 1.6l1.5-.8c-.2-.4-.4-.8-.5-1.3zM4.8 12v-.7L3 11.1v1.8l1.7-.2c.1-.2.1-.5.1-.7zm3 7.9c.5.3 1.1.5 1.6.7l.5-1.7c-.5-.1-.9-.3-1.3-.5l-.8 1.5zM19 6.3c-.4-.5-.8-.9-1.2-1.2l-1.1 1.4c.4.3.7.6 1 1L19 6.3zm-.1 3.6l1.7-.5c-.2-.6-.4-1.1-.7-1.6l-1.5.8c.2.4.4.8.5 1.3zM5.6 8.6l-1.5-.8c-.3.5-.5 1-.7 1.6l1.7.5c.1-.5.3-.9.5-1.3zm2.2-4.5l.8 1.5c.4-.2.8-.4 1.3-.5l-.5-1.7c-.6.2-1.1.4-1.6.7zm8.8 13.5l1.1 1.4c.5-.4.9-.8 1.2-1.2l-1.4-1.1c-.2.3-.5.6-.9.9zm1.8-2.2l1.5.8c.3-.5.5-1.1.7-1.6l-1.7-.5c-.1.5-.3.9-.5 1.3zm2.6-4.3l-1.7.2v1.4l1.7.2V12v-.9zM11.1 3l.2 1.7h1.4l.2-1.7h-1.8zm3 2.1c.5.1.9.3 1.3.5l.8-1.5c-.5-.3-1.1-.5-1.6-.7l-.5 1.7zM12 19.2h-.7l-.2 1.8h1.8l-.2-1.7c-.2-.1-.5-.1-.7-.1zm2.1-.3l.5 1.7c.6-.2 1.1-.4 1.6-.7l-.8-1.5c-.4.2-.8.4-1.3.5z"}));__webpack_exports__.Z=swatch},"./packages/icons/build-module/library/tag.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const tag=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M20.1 11.2l-6.7-6.7c-.1-.1-.3-.2-.5-.2H5c-.4-.1-.8.3-.8.7v7.8c0 .2.1.4.2.5l6.7 6.7c.2.2.5.4.7.5s.6.2.9.2c.3 0 .6-.1.9-.2.3-.1.5-.3.8-.5l5.6-5.6c.4-.4.7-1 .7-1.6.1-.6-.2-1.2-.6-1.6zM19 13.4L13.4 19c-.1.1-.2.1-.3.2-.2.1-.4.1-.6 0-.1 0-.2-.1-.3-.2l-6.5-6.5V5.8h6.8l6.5 6.5c.2.2.2.4.2.6 0 .1 0 .3-.2.5zM9 8c-.6 0-1 .4-1 1s.4 1 1 1 1-.4 1-1-.4-1-1-1z"}));__webpack_exports__.Z=tag},"./packages/icons/build-module/library/upload.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const upload=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"}));__webpack_exports__.Z=upload},"./packages/url/build-module/filter-url-for-display.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function filterURLForDisplay(url){let maxLength=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,filteredURL=url.replace(/^(?:https?:)\/\/(?:www\.)?/,"");filteredURL.match(/^[^\/]+\/$/)&&(filteredURL=filteredURL.replace("/",""));const mediaRegexp=/([\w|:])*\.(?:jpg|jpeg|gif|png|svg)/;if(!maxLength||filteredURL.length<=maxLength||!filteredURL.match(mediaRegexp))return filteredURL;filteredURL=filteredURL.split("?")[0];const urlPieces=filteredURL.split("/"),file=urlPieces[urlPieces.length-1];if(file.length<=maxLength)return""+filteredURL.slice(-maxLength);const index=file.lastIndexOf("."),[fileName,extension]=[file.slice(0,index),file.slice(index+1)],truncatedFile=fileName.slice(-3)+"."+extension;return file.slice(0,maxLength-truncatedFile.length-1)+""+truncatedFile}__webpack_require__.d(__webpack_exports__,{w:function(){return filterURLForDisplay}})},"./packages/url/build-module/get-protocol.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function getProtocol(url){const matches=/^([^\s:]+:)/.exec(url);if(matches)return matches[1]}__webpack_require__.d(__webpack_exports__,{E:function(){return getProtocol}})},"./packages/url/build-module/is-email.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{J:function(){return isEmail}});const EMAIL_REGEXP=/^(mailto:)?[a-z0-9._%+-]+@[a-z0-9][a-z0-9.-]*\.[a-z]{2,63}$/i;function isEmail(email){return EMAIL_REGEXP.test(email)}},"./packages/url/build-module/is-url.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function isURL(url){try{return new URL(url),!0}catch{return!1}}__webpack_require__.d(__webpack_exports__,{P:function(){return isURL}})},"./packages/url/build-module/prepend-http.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{u:function(){return prependHTTP}});var _is_email__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/url/build-module/is-email.js");const USABLE_HREF_REGEXP=/^(?:[a-z]+:|#|\?|\.|\/)/i;function prependHTTP(url){return url?(url=url.trim(),USABLE_HREF_REGEXP.test(url)||(0,_is_email__WEBPACK_IMPORTED_MODULE_0__.J)(url)?url:"http://"+url):url}},"./packages/url/build-module/safe-decode-uri.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function safeDecodeURI(uri){try{return decodeURI(uri)}catch(uriError){return uri}}__webpack_require__.d(__webpack_exports__,{x:function(){return safeDecodeURI}})}}]);