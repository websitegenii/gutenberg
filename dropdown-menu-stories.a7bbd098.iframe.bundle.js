"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[4598],{"./packages/components/src/dropdown-menu/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/icons/build-module/library/menu.js"),_button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/src/button/index.js"),_dropdown__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/src/dropdown/index.js"),_navigable_container__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/src/navigable-container/menu.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function mergeProps(){let defaultProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const mergedProps={...defaultProps,...props};return props.className&&defaultProps.className&&(mergedProps.className=classnames__WEBPACK_IMPORTED_MODULE_0___default()(props.className,defaultProps.className)),mergedProps}function isFunction(maybeFunc){return"function"==typeof maybeFunc}function DropdownMenu(dropdownMenuProps){const{children:children,className:className,controls:controls,icon:icon=_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__.Z,label:label,popoverProps:popoverProps,toggleProps:toggleProps,menuProps:menuProps,disableOpenOnArrowDown:disableOpenOnArrowDown=!1,text:text,noIcons:noIcons}=dropdownMenuProps;if(!(null!=controls&&controls.length||isFunction(children)))return null;let controlSets;null!=controls&&controls.length&&(controlSets=controls,Array.isArray(controlSets[0])||(controlSets=[controlSets]));const mergedPopoverProps=mergeProps({className:"components-dropdown-menu__popover"},popoverProps);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_dropdown__WEBPACK_IMPORTED_MODULE_3__.Z,{className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-dropdown-menu",className),popoverProps:mergedPopoverProps,renderToggle:_ref=>{var _toggleProps$showTool;let{isOpen:isOpen,onToggle:onToggle}=_ref;const mergedToggleProps=mergeProps({className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-dropdown-menu__toggle",{"is-opened":isOpen})},toggleProps);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_button__WEBPACK_IMPORTED_MODULE_4__.Z,{...mergedToggleProps,icon:icon,onClick:event=>{onToggle(event),mergedToggleProps.onClick&&mergedToggleProps.onClick(event)},onKeyDown:event=>{(event=>{disableOpenOnArrowDown||isOpen||"ArrowDown"!==event.code||(event.preventDefault(),onToggle())})(event),mergedToggleProps.onKeyDown&&mergedToggleProps.onKeyDown(event)},"aria-haspopup":"true","aria-expanded":isOpen,label:label,text:text,showTooltip:null===(_toggleProps$showTool=null==toggleProps?void 0:toggleProps.showTooltip)||void 0===_toggleProps$showTool||_toggleProps$showTool,children:mergedToggleProps.children})},renderContent:props=>{var _controlSets;const mergedMenuProps=mergeProps({"aria-label":label,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-dropdown-menu__menu",{"no-icons":noIcons})},menuProps);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_navigable_container__WEBPACK_IMPORTED_MODULE_5__.Z,{...mergedMenuProps,role:"menu",children:[isFunction(children)?children(props):null,null===(_controlSets=controlSets)||void 0===_controlSets?void 0:_controlSets.flatMap(((controlSet,indexOfSet)=>controlSet.map(((control,indexOfControl)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_button__WEBPACK_IMPORTED_MODULE_4__.Z,{onClick:event=>{event.stopPropagation(),props.onClose(),control.onClick&&control.onClick()},className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-dropdown-menu__menu-item",{"has-separator":indexOfSet>0&&0===indexOfControl,"is-active":control.isActive,"is-icon-only":!control.title}),icon:control.icon,label:control.label,"aria-checked":"menuitemcheckbox"===control.role||"menuitemradio"===control.role?control.isActive:void 0,role:"menuitemcheckbox"===control.role||"menuitemradio"===control.role?control.role:"menuitem",disabled:control.isDisabled,children:control.title},[indexOfSet,indexOfControl].join())))))]})}})}DropdownMenu.displayName="DropdownMenu",DropdownMenu.__docgenInfo={description:"",methods:[],displayName:"DropdownMenu"},__webpack_exports__.Z=DropdownMenu,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/dropdown-menu/index.js"]={name:"DropdownMenu",docgenInfo:DropdownMenu.__docgenInfo,path:"packages/components/src/dropdown-menu/index.js"})},"./packages/components/src/dropdown/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return Dropdown}});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),_popover__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/src/popover/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function Dropdown(props){const{renderContent:renderContent,renderToggle:renderToggle,className:className,contentClassName:contentClassName,expandOnMobile:expandOnMobile,headerTitle:headerTitle,focusOnMount:focusOnMount,position:position,popoverProps:popoverProps,onClose:onClose,onToggle:onToggle,style:style}=props,[fallbackPopoverAnchor,setFallbackPopoverAnchor]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(null),containerRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useRef)(),[isOpen,setIsOpen]=function useObservableState(initialState,onStateChange){const[state,setState]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(initialState);return[state,value=>{setState(value),onStateChange&&onStateChange(value)}]}(!1,onToggle);function close(){onClose&&onClose(),setIsOpen(!1)}(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>()=>{onToggle&&isOpen&&onToggle(!1)}),[onToggle,isOpen]);const args={isOpen:isOpen,onToggle:function toggle(){setIsOpen(!isOpen)},onClose:close},popoverPropsHaveAnchor=!!(null!=popoverProps&&popoverProps.anchor||null!=popoverProps&&popoverProps.anchorRef||null!=popoverProps&&popoverProps.getAnchorRect||null!=popoverProps&&popoverProps.anchorRect);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-dropdown",className),ref:(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__.Z)([setFallbackPopoverAnchor,containerRef]),tabIndex:"-1",style:style,children:[renderToggle(args),isOpen&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_popover__WEBPACK_IMPORTED_MODULE_4__.Z,{position:position,onClose:close,onFocusOutside:function closeIfFocusOutside(){const{ownerDocument:ownerDocument}=containerRef.current,dialog=ownerDocument.activeElement.closest('[role="dialog"]');containerRef.current.contains(ownerDocument.activeElement)||dialog&&!dialog.contains(containerRef.current)||close()},expandOnMobile:expandOnMobile,headerTitle:headerTitle,focusOnMount:focusOnMount,offset:13,anchor:popoverPropsHaveAnchor?void 0:fallbackPopoverAnchor,...popoverProps,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("components-dropdown__content",popoverProps?popoverProps.className:void 0,contentClassName),children:renderContent(args)})]})}Dropdown.displayName="Dropdown",Dropdown.__docgenInfo={description:"",methods:[],displayName:"Dropdown"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/dropdown/index.js"]={name:"Dropdown",docgenInfo:Dropdown.__docgenInfo,path:"packages/components/src/dropdown/index.js"})},"./packages/components/src/navigable-container/container.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_wordpress_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/dom/build-module/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const noop=()=>{},MENU_ITEM_ROLES=["menuitem","menuitemradio","menuitemcheckbox"];class NavigableContainer extends _wordpress_element__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(){super(...arguments),this.onKeyDown=this.onKeyDown.bind(this),this.bindContainer=this.bindContainer.bind(this),this.getFocusableContext=this.getFocusableContext.bind(this),this.getFocusableIndex=this.getFocusableIndex.bind(this)}componentDidMount(){this.container.addEventListener("keydown",this.onKeyDown),this.container.addEventListener("focus",this.onFocus)}componentWillUnmount(){this.container.removeEventListener("keydown",this.onKeyDown),this.container.removeEventListener("focus",this.onFocus)}bindContainer(ref){const{forwardedRef:forwardedRef}=this.props;this.container=ref,"function"==typeof forwardedRef?forwardedRef(ref):forwardedRef&&"current"in forwardedRef&&(forwardedRef.current=ref)}getFocusableContext(target){const{onlyBrowserTabstops:onlyBrowserTabstops}=this.props,focusables=(onlyBrowserTabstops?_wordpress_dom__WEBPACK_IMPORTED_MODULE_2__.T_.tabbable:_wordpress_dom__WEBPACK_IMPORTED_MODULE_2__.T_.focusable).find(this.container),index=this.getFocusableIndex(focusables,target);return index>-1&&target?{index:index,target:target,focusables:focusables}:null}getFocusableIndex(focusables,target){const directIndex=focusables.indexOf(target);if(-1!==directIndex)return directIndex}onKeyDown(event){this.props.onKeyDown&&this.props.onKeyDown(event);const{getFocusableContext:getFocusableContext}=this,{cycle:cycle=!0,eventToOffset:eventToOffset,onNavigate:onNavigate=noop,stopNavigationEvents:stopNavigationEvents}=this.props,offset=eventToOffset(event);if(void 0!==offset&&stopNavigationEvents){event.stopImmediatePropagation();const targetRole=event.target.getAttribute("role"),targetHasMenuItemRole=MENU_ITEM_ROLES.includes(targetRole),isTab="Tab"===event.code;(targetHasMenuItemRole||isTab)&&event.preventDefault()}if(!offset)return;const context=getFocusableContext(event.target.ownerDocument.activeElement);if(!context)return;const{index:index,focusables:focusables}=context,nextIndex=cycle?function cycleValue(value,total,offset){const nextValue=value+offset;return nextValue<0?total+nextValue:nextValue>=total?nextValue-total:nextValue}(index,focusables.length,offset):index+offset;nextIndex>=0&&nextIndex<focusables.length&&(focusables[nextIndex].focus(),onNavigate(nextIndex,focusables[nextIndex]))}render(){const{children:children,stopNavigationEvents:stopNavigationEvents,eventToOffset:eventToOffset,onNavigate:onNavigate,onKeyDown:onKeyDown,cycle:cycle,onlyBrowserTabstops:onlyBrowserTabstops,forwardedRef:forwardedRef,...restProps}=this.props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:this.bindContainer,...restProps,children:children})}}NavigableContainer.displayName="NavigableContainer";const forwardedNavigableContainer=(props,ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NavigableContainer,{...props,forwardedRef:ref});forwardedNavigableContainer.displayName="forwardedNavigableContainer",forwardedNavigableContainer.displayName="NavigableContainer",forwardedNavigableContainer.__docgenInfo={description:"",methods:[],displayName:"NavigableContainer"},__webpack_exports__.Z=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(forwardedNavigableContainer),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/navigable-container/container.js"]={name:"forwardedNavigableContainer",docgenInfo:forwardedNavigableContainer.__docgenInfo,path:"packages/components/src/navigable-container/container.js"})},"./packages/components/src/navigable-container/menu.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_container__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/src/navigable-container/container.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function NavigableMenu(_ref,ref){let{role:role="menu",orientation:orientation="vertical",...rest}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_container__WEBPACK_IMPORTED_MODULE_1__.Z,{ref:ref,stopNavigationEvents:!0,onlyBrowserTabstops:!1,role:role,"aria-orientation":"presentation"===role?null:orientation,eventToOffset:evt=>{const{code:code}=evt;let next=["ArrowDown"],previous=["ArrowUp"];return"horizontal"===orientation&&(next=["ArrowRight"],previous=["ArrowLeft"]),"both"===orientation&&(next=["ArrowRight","ArrowDown"],previous=["ArrowLeft","ArrowUp"]),next.includes(code)?1:previous.includes(code)?-1:["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(code)?0:void 0},...rest})}NavigableMenu.displayName="NavigableMenu",NavigableMenu.__docgenInfo={description:"",methods:[],displayName:"NavigableMenu",props:{role:{defaultValue:{value:"'menu'",computed:!1},required:!1},orientation:{defaultValue:{value:"'vertical'",computed:!1},required:!1}}},__webpack_exports__.Z=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(NavigableMenu),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/navigable-container/menu.js"]={name:"NavigableMenu",docgenInfo:NavigableMenu.__docgenInfo,path:"packages/components/src/navigable-container/menu.js"})},"./packages/icons/build-module/library/arrow-down.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const arrowDown=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z"}));__webpack_exports__.Z=arrowDown},"./packages/icons/build-module/library/menu.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const menu=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M5 5v1.5h14V5H5zm0 7.8h14v-1.5H5v1.5zM5 19h14v-1.5H5V19z"}));__webpack_exports__.Z=menu},"./packages/components/src/dropdown-menu/stories/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{_default:function(){return _default},default:function(){return stories}});var esm=__webpack_require__("./node_modules/@storybook/addon-knobs/dist/esm/index.js"),dropdown_menu=__webpack_require__("./packages/components/src/dropdown-menu/index.js"),react=__webpack_require__("./node_modules/react/index.js"),svg=__webpack_require__("./packages/primitives/build-module/svg/index.js");var arrow_up=(0,react.createElement)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,react.createElement)(svg.y$,{d:"M12 3.9 6.5 9.5l1 1 3.8-3.7V20h1.5V6.8l3.7 3.7 1-1z"})),arrow_down=__webpack_require__("./packages/icons/build-module/library/arrow-down.js"),menu=__webpack_require__("./packages/icons/build-module/library/menu.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),stories={title:"Components/DropdownMenu",component:dropdown_menu.Z,parameters:{sourceLink:"packages/components/src/dropdown-menu",storySource:{source:"/**\n * External dependencies\n */\nimport { text, boolean } from '@storybook/addon-knobs';\n\n/**\n * Internal dependencies\n */\nimport DropdownMenu from '../';\n\n/**\n * WordPress dependencies\n */\nimport { menu, arrowUp, arrowDown } from '@wordpress/icons';\n\nexport default {\n\ttitle: 'Components/DropdownMenu',\n\tcomponent: DropdownMenu,\n\tparameters: {\n\t\tknobs: { disable: false },\n\t},\n};\n\nexport const _default = () => {\n\tconst label = text( 'Label', 'Select a direction.' );\n\tconst firstMenuItemLabel = text( 'First Menu Item Label', 'Up' );\n\tconst secondMenuItemLabel = text( 'First Menu Item Label', 'Down' );\n\tconst toggleButtonTootip = boolean(\n\t\t'Show tooltip on a toggle button',\n\t\ttrue\n\t);\n\n\tconst controls = [\n\t\t{\n\t\t\ttitle: firstMenuItemLabel,\n\t\t\ticon: arrowUp,\n\t\t},\n\t\t{\n\t\t\ttitle: secondMenuItemLabel,\n\t\t\ticon: arrowDown,\n\t\t},\n\t];\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\ticon={ menu }\n\t\t\tlabel={ label }\n\t\t\tcontrols={ controls }\n\t\t\ttoggleProps={ { showTooltip: toggleButtonTootip } }\n\t\t/>\n\t);\n};\n",locationsMap:{default:{startLoc:{col:24,line:24},endLoc:{col:1,line:52},startBody:{col:24,line:24},endBody:{col:1,line:52}}}},knobs:{disable:!1}}};const _default=()=>{const label=(0,esm.fL)("Label","Select a direction."),firstMenuItemLabel=(0,esm.fL)("First Menu Item Label","Up"),secondMenuItemLabel=(0,esm.fL)("First Menu Item Label","Down"),toggleButtonTootip=(0,esm.O7)("Show tooltip on a toggle button",!0),controls=[{title:firstMenuItemLabel,icon:arrow_up},{title:secondMenuItemLabel,icon:arrow_down.Z}];return(0,jsx_runtime.jsx)(dropdown_menu.Z,{icon:menu.Z,label:label,controls:controls,toggleProps:{showTooltip:toggleButtonTootip}})};_default.displayName="_default",_default.__docgenInfo={description:"",methods:[],displayName:"_default"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/dropdown-menu/stories/index.js"]={name:"_default",docgenInfo:_default.__docgenInfo,path:"packages/components/src/dropdown-menu/stories/index.js"})}}]);