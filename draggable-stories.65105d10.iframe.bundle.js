"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[8144],{"./packages/compose/build-module/utils/debounce/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{D:function(){return debounce}});const debounce=(func,wait,options)=>{let lastArgs,lastThis,result,timerId,lastCallTime,maxWait=0,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;function invokeFunc(time){const args=lastArgs,thisArg=lastThis;return lastArgs=void 0,lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args),result}function startTimer(pendingFunc,waitTime){timerId=setTimeout(pendingFunc,waitTime)}function leadingEdge(time){return lastInvokeTime=time,startTimer(timerExpired,wait),leading?invokeFunc(time):result}function getTimeSinceLastCall(time){return time-(lastCallTime||0)}function shouldInvoke(time){const timeSinceLastCall=getTimeSinceLastCall(time);return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){const time=Date.now();if(shouldInvoke(time))return trailingEdge(time);startTimer(timerExpired,function remainingWait(time){const timeSinceLastCall=getTimeSinceLastCall(time),timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?Math.min(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}(time))}function clearTimer(){timerId=void 0}function trailingEdge(time){return clearTimer(),trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function pending(){return void 0!==timerId}function debounced(){const time=Date.now(),isInvoking=shouldInvoke(time);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(lastArgs=args,lastThis=this,lastCallTime=time,isInvoking){if(!pending())return leadingEdge(lastCallTime);if(maxing)return startTimer(timerExpired,wait),invokeFunc(lastCallTime)}return pending()||startTimer(timerExpired,wait),result}return options&&(leading=!!options.leading,maxing="maxWait"in options,void 0!==options.maxWait&&(maxWait=Math.max(options.maxWait,wait)),trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){!function cancelTimer(){void 0!==timerId&&clearTimeout(timerId)}(),lastInvokeTime=0,clearTimer(),lastArgs=lastCallTime=lastThis=void 0},debounced.flush=function flush(){return pending()?trailingEdge(Date.now()):result},debounced.pending=pending,debounced}},"./packages/compose/build-module/utils/throttle/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{P:function(){return throttle}});var _debounce__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/compose/build-module/utils/debounce/index.js");const throttle=(func,wait,options)=>{let leading=!0,trailing=!0;return options&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),(0,_debounce__WEBPACK_IMPORTED_MODULE_0__.D)(func,wait,{leading:leading,trailing:trailing,maxWait:wait})}},"./packages/icons/build-module/icon/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");__webpack_exports__.Z=function Icon(_ref){let{icon:icon,size:size=24,...props}=_ref;return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(icon,{width:size,height:size,...props})}},"./packages/icons/build-module/library/more.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const more=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M4 9v1.5h16V9H4zm12 5.5h4V13h-4v1.5zm-6 0h4V13h-4v1.5zm-6 0h4V13H4v1.5z"}));__webpack_exports__.Z=more},"./packages/primitives/build-module/svg/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Cd:function(){return Circle},G:function(){return G},y$:function(){return Path},UL:function(){return Rect},Wj:function(){return SVG}});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js");const Circle=props=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("circle",props),G=props=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("g",props),Path=props=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("path",props),Rect=props=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("rect",props),SVG=_ref=>{let{className:className,isPressed:isPressed,...props}=_ref;const appliedProps={...props,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()(className,{"is-pressed":isPressed})||void 0,"aria-hidden":!0,focusable:!1};return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("svg",appliedProps)}},"./packages/components/src/draggable/stories/index.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},default:function(){return stories}});var react=__webpack_require__("./node_modules/react/index.js"),icon=__webpack_require__("./packages/icons/build-module/icon/index.js"),more=__webpack_require__("./packages/icons/build-module/library/more.js"),throttle=__webpack_require__("./packages/compose/build-module/utils/throttle/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const bodyClass="is-dragging-components-draggable";function Draggable(_ref){let{children:children,onDragStart:onDragStart,onDragOver:onDragOver,onDragEnd:onDragEnd,cloneClassname:cloneClassname,elementId:elementId,transferData:transferData,__experimentalTransferDataType:transferDataType="text",__experimentalDragComponent:dragComponent}=_ref;const dragComponentRef=(0,react.useRef)(null),cleanup=(0,react.useRef)((()=>{}));return(0,react.useEffect)((()=>()=>{cleanup.current()}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[children({onDraggableStart:function start(event){const{ownerDocument:ownerDocument}=event.target;event.dataTransfer.setData(transferDataType,JSON.stringify(transferData));const cloneWrapper=ownerDocument.createElement("div");cloneWrapper.style.top="0",cloneWrapper.style.left="0";const dragImage=ownerDocument.createElement("div");"function"==typeof event.dataTransfer.setDragImage&&(dragImage.classList.add("components-draggable__invisible-drag-image"),ownerDocument.body.appendChild(dragImage),event.dataTransfer.setDragImage(dragImage,0,0)),cloneWrapper.classList.add("components-draggable__clone"),cloneClassname&&cloneWrapper.classList.add(cloneClassname);let x=0,y=0;if(dragComponentRef.current){x=event.clientX,y=event.clientY,cloneWrapper.style.transform=`translate( ${x}px, ${y}px )`;const clonedDragComponent=ownerDocument.createElement("div");clonedDragComponent.innerHTML=dragComponentRef.current.innerHTML,cloneWrapper.appendChild(clonedDragComponent),ownerDocument.body.appendChild(cloneWrapper)}else{const element=ownerDocument.getElementById(elementId),elementRect=element.getBoundingClientRect(),elementWrapper=element.parentNode,elementTopOffset=elementRect.top,elementLeftOffset=elementRect.left;cloneWrapper.style.width=`${elementRect.width+0}px`;const clone=element.cloneNode(!0);clone.id=`clone-${elementId}`,x=elementLeftOffset-0,y=elementTopOffset-0,cloneWrapper.style.transform=`translate( ${x}px, ${y}px )`,Array.from(clone.querySelectorAll("iframe")).forEach((child=>{var _child$parentNode;return null===(_child$parentNode=child.parentNode)||void 0===_child$parentNode?void 0:_child$parentNode.removeChild(child)})),cloneWrapper.appendChild(clone),null==elementWrapper||elementWrapper.appendChild(cloneWrapper)}let cursorLeft=event.clientX,cursorTop=event.clientY;const throttledDragOver=(0,throttle.P)((function over(e){if(cursorLeft===e.clientX&&cursorTop===e.clientY)return;const nextX=x+e.clientX-cursorLeft,nextY=y+e.clientY-cursorTop;cloneWrapper.style.transform=`translate( ${nextX}px, ${nextY}px )`,cursorLeft=e.clientX,cursorTop=e.clientY,x=nextX,y=nextY,onDragOver&&onDragOver(e)}),16);let timerId;ownerDocument.addEventListener("dragover",throttledDragOver),ownerDocument.body.classList.add(bodyClass),event.persist(),onDragStart&&(timerId=setTimeout((()=>onDragStart(event)))),cleanup.current=()=>{cloneWrapper&&cloneWrapper.parentNode&&cloneWrapper.parentNode.removeChild(cloneWrapper),dragImage&&dragImage.parentNode&&dragImage.parentNode.removeChild(dragImage),ownerDocument.body.classList.remove(bodyClass),ownerDocument.removeEventListener("dragover",throttledDragOver),clearTimeout(timerId)}},onDraggableEnd:function end(event){event.preventDefault(),cleanup.current(),onDragEnd&&onDragEnd(event)}}),dragComponent&&(0,jsx_runtime.jsx)("div",{className:"components-draggable-drag-component-root",style:{display:"none"},ref:dragComponentRef,children:dragComponent})]})}var draggable=Draggable;try{Draggable.displayName="Draggable",Draggable.__docgenInfo={description:'`Draggable` is a Component that provides a way to set up a cross-browser\n(including IE) customizable drag image and the transfer data for the drag\nevent. It decouples the drag handle and the element to drag: use it by\nwrapping the component that will become the drag handle and providing the DOM\nID of the element to drag.\n\nNote that the drag handle needs to declare the `draggable="true"` property\nand bind the `Draggable`s `onDraggableStart` and `onDraggableEnd` event\nhandlers to its own `onDragStart` and `onDragEnd` respectively. `Draggable`\ntakes care of the logic to setup the drag image and the transfer data, but is\nnot concerned with creating an actual DOM element that is draggable.\n\n```jsx\nimport { Draggable, Panel, PanelBody } from \'@wordpress/components\';\nimport { Icon, more } from \'@wordpress/icons\';\n\nconst MyDraggable = () => (\n  <div id="draggable-panel">\n    <Panel header="Draggable panel">\n      <PanelBody>\n        <Draggable elementId="draggable-panel" transferData={ {} }>\n          { ( { onDraggableStart, onDraggableEnd } ) => (\n            <div\n              className="example-drag-handle"\n              draggable\n              onDragStart={ onDraggableStart }\n              onDragEnd={ onDraggableEnd }\n            >\n              <Icon icon={ more } />\n            </div>\n          ) }\n        </Draggable>\n      </PanelBody>\n    </Panel>\n  </div>\n);\n```',displayName:"Draggable",props:{children:{defaultValue:null,description:"Children.",name:"children",required:!0,type:{name:"(props: { onDraggableStart: (event: DragEvent<Element>) => void; onDraggableEnd: (event: DragEvent<Element>) => void; }) => Element"}},cloneClassname:{defaultValue:null,description:"Classname for the cloned element.",name:"cloneClassname",required:!1,type:{name:"string"}},elementId:{defaultValue:null,description:"The HTML id of the element to clone on drag",name:"elementId",required:!0,type:{name:"string"}},onDragEnd:{defaultValue:null,description:"A function called when dragging ends. This callback receives the `event`\nobject from the `dragend` event as its first parameter.",name:"onDragEnd",required:!1,type:{name:"(event: DragEvent<Element>) => void"}},onDragOver:{defaultValue:null,description:"A function called when the element being dragged is dragged over a valid\ndrop target. This callback receives the `event` object from the\n`dragover` event as its first parameter.",name:"onDragOver",required:!1,type:{name:"(event: DragEvent<Element>) => void"}},onDragStart:{defaultValue:null,description:"A function called when dragging starts. This callback receives the\n`event` object from the `dragstart` event as its first parameter.",name:"onDragStart",required:!1,type:{name:"(event: DragEvent<Element>) => void"}},transferData:{defaultValue:null,description:"Arbitrary data object attached to the drag and drop event.",name:"transferData",required:!0,type:{name:"unknown"}},__experimentalTransferDataType:{defaultValue:{value:"'text'"},description:"The transfer data type to set.",name:"__experimentalTransferDataType",required:!1,type:{name:"string"}},__experimentalDragComponent:{defaultValue:null,description:"Component to show when dragging.",name:"__experimentalDragComponent",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/draggable/index.tsx#Draggable"]={docgenInfo:Draggable.__docgenInfo,name:"Draggable",path:"packages/components/src/draggable/index.tsx#Draggable"})}catch(__react_docgen_typescript_loader_error){}var stories={component:draggable,title:"Components/Draggable",argTypes:{elementId:{control:{type:null}},__experimentalDragComponent:{control:{type:null}}},parameters:{sourceLink:"packages/components/src/draggable",actions:{argTypesRegex:"^on.*"},controls:{expanded:!0},docs:{source:{code:""}}}};const DefaultTemplate=args=>{const[isDragging,setDragging]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("p",{children:["Is Dragging? ",isDragging?"Yes":"No!"]}),(0,jsx_runtime.jsx)("div",{id:"draggable-example-box",style:{display:"inline-flex"},children:(0,jsx_runtime.jsx)(draggable,{...args,elementId:"draggable-example-box",children:_ref=>{let{onDraggableStart:onDraggableStart,onDraggableEnd:onDraggableEnd}=_ref;return(0,jsx_runtime.jsx)("div",{onDragStart:event=>{setDragging(!0),onDraggableStart(event)},onDragEnd:event=>{setDragging(!1),onDraggableEnd(event)},draggable:!0,style:{alignItems:"center",display:"flex",justifyContent:"center",width:100,height:100,background:"#ddd"},children:(0,jsx_runtime.jsx)(icon.Z,{icon:more.Z})})}})})]})};DefaultTemplate.displayName="DefaultTemplate";const Default=DefaultTemplate.bind({});Default.args={};try{ComponentMeta.displayName="ComponentMeta",ComponentMeta.__docgenInfo={description:"For the common case where a component's stories are simple components that receives args as props:\n\n```tsx\nexport default { ... } as ComponentMeta<typeof Button>;\n```",displayName:"ComponentMeta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/draggable/stories/index.tsx#ComponentMeta"]={docgenInfo:ComponentMeta.__docgenInfo,name:"ComponentMeta",path:"packages/components/src/draggable/stories/index.tsx#ComponentMeta"})}catch(__react_docgen_typescript_loader_error){}}}]);