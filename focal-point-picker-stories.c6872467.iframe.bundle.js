"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[5093],{"./packages/components/src/utils/hooks/use-controlled-state.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_values__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/src/utils/values.js");const defaultOptions={initial:void 0,fallback:""};__webpack_exports__.Z=function useControlledState(currentState){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultOptions;const{initial:initial,fallback:fallback}={...defaultOptions,...options},[internalState,setInternalState]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(currentState),hasCurrentState=(0,_values__WEBPACK_IMPORTED_MODULE_1__.Jf)(currentState);(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{hasCurrentState&&internalState&&setInternalState(void 0)}),[hasCurrentState,internalState]);const state=(0,_values__WEBPACK_IMPORTED_MODULE_1__.Me)([currentState,internalState,initial],fallback),setState=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((nextState=>{hasCurrentState||setInternalState(nextState)}),[hasCurrentState]);return[state,setState]}},"./packages/compose/build-module/hooks/use-dragging/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useDragging}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_use_isomorphic_layout_effect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/hooks/use-isomorphic-layout-effect/index.js");function useDragging(_ref){let{onDragStart:onDragStart,onDragMove:onDragMove,onDragEnd:onDragEnd}=_ref;const[isDragging,setIsDragging]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),eventsRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)({onDragStart:onDragStart,onDragMove:onDragMove,onDragEnd:onDragEnd});(0,_use_isomorphic_layout_effect__WEBPACK_IMPORTED_MODULE_1__.Z)((()=>{eventsRef.current.onDragStart=onDragStart,eventsRef.current.onDragMove=onDragMove,eventsRef.current.onDragEnd=onDragEnd}),[onDragStart,onDragMove,onDragEnd]);const onMouseMove=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>eventsRef.current.onDragMove&&eventsRef.current.onDragMove(event)),[]),endDrag=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>{eventsRef.current.onDragEnd&&eventsRef.current.onDragEnd(event),document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",endDrag),setIsDragging(!1)}),[]),startDrag=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>{eventsRef.current.onDragStart&&eventsRef.current.onDragStart(event),document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",endDrag),setIsDragging(!0)}),[]);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>{isDragging&&(document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",endDrag))}),[isDragging]),{startDrag:startDrag,endDrag:endDrag,isDragging:isDragging}}},"./packages/compose/build-module/hooks/use-isomorphic-layout-effect/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const useIsomorphicLayoutEffect="undefined"!=typeof window?_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect;__webpack_exports__.Z=useIsomorphicLayoutEffect},"./packages/components/src/focal-point-picker/stories/index.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},Image:function(){return Image},Snapping:function(){return Snapping},Video:function(){return Video},default:function(){return stories}});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),use_dragging=__webpack_require__("./packages/compose/build-module/hooks/use-dragging/index.js"),use_isomorphic_layout_effect=__webpack_require__("./packages/compose/build-module/hooks/use-isomorphic-layout-effect/index.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),base_control=__webpack_require__("./packages/components/src/base-control/index.tsx"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),component=__webpack_require__("./packages/components/src/flex/flex/component.tsx"),unit_control=__webpack_require__("./packages/components/src/unit-control/index.tsx"),colors_values=__webpack_require__("./packages/components/src/utils/colors-values.js");const INITIAL_BOUNDS={width:200,height:170},VIDEO_EXTENSIONS=["avi","mpg","mpeg","mov","mp4","m4v","ogg","ogv","webm","wmv"];function getExtension(){let filename=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const parts=filename.split(".");return parts[parts.length-1]}function fractionToPercentage(fraction){return Math.round(100*fraction)}const MediaWrapper=(0,emotion_styled_base_browser_esm.Z)("div",{target:"eeew7dm8"})({name:"w0nf6b",styles:"background-color:transparent;text-align:center;width:100%"}),MediaContainer=(0,emotion_styled_base_browser_esm.Z)("div",{target:"eeew7dm7"})({name:"megach",styles:"align-items:center;box-shadow:0 0 0 1px rgba( 0, 0, 0, 0.2 );cursor:pointer;display:inline-flex;justify-content:center;margin:auto;position:relative;height:100%;img,video{box-sizing:border-box;display:block;height:auto;margin:0;max-height:100%;max-width:100%;pointer-events:none;user-select:none;width:auto;}"}),MediaPlaceholder=(0,emotion_styled_base_browser_esm.Z)("div",{target:"eeew7dm6"})("background:",colors_values.D.gray[100],";box-sizing:border-box;height:",INITIAL_BOUNDS.height,"px;max-width:280px;min-width:",INITIAL_BOUNDS.width,"px;width:100%;"),StyledUnitControl=(0,emotion_styled_base_browser_esm.Z)(unit_control.ZP,{target:"eeew7dm5"})({name:"1pzk433",styles:"width:100px"});var _ref2={name:"1mn7kwb",styles:"padding-bottom:1em"};const deprecatedBottomMargin=_ref3=>{let{__nextHasNoMarginBottom:__nextHasNoMarginBottom}=_ref3;return __nextHasNoMarginBottom?void 0:_ref2};var _ref={name:"1mn7kwb",styles:"padding-bottom:1em"};const extraHelpTextMargin=_ref4=>{let{hasHelpText:hasHelpText=!1}=_ref4;return hasHelpText?_ref:void 0},ControlWrapper=(0,emotion_styled_base_browser_esm.Z)(component.Z,{target:"eeew7dm4"})("max-width:320px;padding-top:1em;",extraHelpTextMargin," ",deprecatedBottomMargin,";"),GridView=(0,emotion_styled_base_browser_esm.Z)("div",{target:"eeew7dm3"})("left:50%;overflow:hidden;pointer-events:none;position:absolute;top:50%;transform:translate3d( -50%, -50%, 0 );transition:opacity 120ms linear;z-index:1;opacity:",(_ref5=>{let{showOverlay:showOverlay}=_ref5;return showOverlay?1:0}),";"),GridLine=(0,emotion_styled_base_browser_esm.Z)("div",{target:"eeew7dm2"})({name:"1d42i6k",styles:"background:white;box-shadow:0 0 2px rgba( 0, 0, 0, 0.6 );position:absolute;opacity:0.4;transform:translateZ( 0 )"}),GridLineX=(0,emotion_styled_base_browser_esm.Z)(GridLine,{target:"eeew7dm1"})({name:"1qp910y",styles:"height:1px;left:0;right:0"}),GridLineY=(0,emotion_styled_base_browser_esm.Z)(GridLine,{target:"eeew7dm0"})({name:"1oz3zka",styles:"width:1px;top:0;bottom:0"});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const noop=()=>{};function FocalPointPickerControls(_ref){let{__nextHasNoMarginBottom:__nextHasNoMarginBottom,hasHelpText:hasHelpText,onChange:onChange=noop,point:point={x:.5,y:.5}}=_ref;const valueX=fractionToPercentage(point.x),valueY=fractionToPercentage(point.y),handleChange=(value,axis)=>{if(void 0===value)return;const num=parseInt(value,10);isNaN(num)||onChange({...point,[axis]:num/100})};return(0,jsx_runtime.jsxs)(ControlWrapper,{className:"focal-point-picker__controls",__nextHasNoMarginBottom:__nextHasNoMarginBottom,hasHelpText:hasHelpText,children:[(0,jsx_runtime.jsx)(FocalPointUnitControl,{label:(0,build_module.__)("Left"),value:[valueX,"%"].join(""),onChange:next=>handleChange(next,"x"),dragDirection:"e"}),(0,jsx_runtime.jsx)(FocalPointUnitControl,{label:(0,build_module.__)("Top"),value:[valueY,"%"].join(""),onChange:next=>handleChange(next,"y"),dragDirection:"s"})]})}function FocalPointUnitControl(props){return(0,jsx_runtime.jsx)(StyledUnitControl,{className:"focal-point-picker__controls-position-unit-control",labelPosition:"top",max:100,min:0,units:[{value:"%",label:"%"}],...props})}FocalPointPickerControls.displayName="FocalPointPickerControls",FocalPointUnitControl.displayName="FocalPointUnitControl";try{controls.displayName="controls",controls.__docgenInfo={description:"",displayName:"controls",props:{__nextHasNoMarginBottom:{defaultValue:null,description:"",name:"__nextHasNoMarginBottom",required:!1,type:{name:"boolean"}},hasHelpText:{defaultValue:null,description:"A bit of extra bottom margin will be added if a `help` text\nneeds to be rendered under it.",name:"hasHelpText",required:!0,type:{name:"boolean"}},onChange:{defaultValue:{value:"() => {}"},description:"",name:"onChange",required:!1,type:{name:"(value: FocalPoint) => void"}},point:{defaultValue:{value:"{\n\t\tx: 0.5,\n\t\ty: 0.5,\n\t}"},description:"",name:"point",required:!1,type:{name:"FocalPoint"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/focal-point-picker/controls.tsx#controls"]={docgenInfo:controls.__docgenInfo,name:"controls",path:"packages/components/src/focal-point-picker/controls.tsx#controls"})}catch(__react_docgen_typescript_loader_error){}const PointerCircle=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e19snlhg0"})("background-color:transparent;cursor:grab;height:48px;margin:-24px 0 0 -24px;position:absolute;user-select:none;width:48px;will-change:transform;z-index:10000;background:rgba( 255, 255, 255, 0.6 );border-radius:50%;backdrop-filter:blur( 4px );box-shadow:rgb( 0 0 0 / 20% ) 0px 0px 10px;",(_ref=>{let{isDragging:isDragging}=_ref;return isDragging&&"cursor: grabbing;"}),";");function FocalPoint(_ref){let{left:left="50%",top:top="50%",...props}=_ref;const classes=classnames_default()("components-focal-point-picker__icon_container"),style={left:left,top:top};return(0,jsx_runtime.jsx)(PointerCircle,{...props,className:classes,style:style})}FocalPoint.displayName="FocalPoint";try{focalpoint.displayName="focalpoint",focalpoint.__docgenInfo={description:"",displayName:"focalpoint",props:{isDragging:{defaultValue:null,description:"",name:"isDragging",required:!0,type:{name:"boolean"}},left:{defaultValue:{value:"50%"},description:"",name:"left",required:!1,type:{name:"Left<string | number>"}},top:{defaultValue:{value:"50%"},description:"",name:"top",required:!1,type:{name:"Top<string | number>"}},as:{defaultValue:null,description:"The HTML element or React component to render the component as.",name:"as",required:!1,type:{name:"enum",value:[{value:'"symbol"'},{value:'"object"'},{value:'"a"'},{value:'"abbr"'},{value:'"address"'},{value:'"area"'},{value:'"article"'},{value:'"aside"'},{value:'"audio"'},{value:'"b"'},{value:'"base"'},{value:'"bdi"'},{value:'"bdo"'},{value:'"big"'},{value:'"blockquote"'},{value:'"body"'},{value:'"br"'},{value:'"button"'},{value:'"canvas"'},{value:'"caption"'},{value:'"cite"'},{value:'"code"'},{value:'"col"'},{value:'"colgroup"'},{value:'"data"'},{value:'"datalist"'},{value:'"dd"'},{value:'"del"'},{value:'"details"'},{value:'"dfn"'},{value:'"dialog"'},{value:'"div"'},{value:'"dl"'},{value:'"dt"'},{value:'"em"'},{value:'"embed"'},{value:'"fieldset"'},{value:'"figcaption"'},{value:'"figure"'},{value:'"footer"'},{value:'"form"'},{value:'"h1"'},{value:'"h2"'},{value:'"h3"'},{value:'"h4"'},{value:'"h5"'},{value:'"h6"'},{value:'"head"'},{value:'"header"'},{value:'"hgroup"'},{value:'"hr"'},{value:'"html"'},{value:'"i"'},{value:'"iframe"'},{value:'"img"'},{value:'"input"'},{value:'"ins"'},{value:'"kbd"'},{value:'"keygen"'},{value:'"label"'},{value:'"legend"'},{value:'"li"'},{value:'"link"'},{value:'"main"'},{value:'"map"'},{value:'"mark"'},{value:'"menu"'},{value:'"menuitem"'},{value:'"meta"'},{value:'"meter"'},{value:'"nav"'},{value:'"noindex"'},{value:'"noscript"'},{value:'"ol"'},{value:'"optgroup"'},{value:'"option"'},{value:'"output"'},{value:'"p"'},{value:'"param"'},{value:'"picture"'},{value:'"pre"'},{value:'"progress"'},{value:'"q"'},{value:'"rp"'},{value:'"rt"'},{value:'"ruby"'},{value:'"s"'},{value:'"samp"'},{value:'"slot"'},{value:'"script"'},{value:'"section"'},{value:'"select"'},{value:'"small"'},{value:'"source"'},{value:'"span"'},{value:'"strong"'},{value:'"style"'},{value:'"sub"'},{value:'"summary"'},{value:'"sup"'},{value:'"table"'},{value:'"template"'},{value:'"tbody"'},{value:'"td"'},{value:'"textarea"'},{value:'"tfoot"'},{value:'"th"'},{value:'"thead"'},{value:'"time"'},{value:'"title"'},{value:'"tr"'},{value:'"track"'},{value:'"u"'},{value:'"ul"'},{value:'"var"'},{value:'"video"'},{value:'"wbr"'},{value:'"webview"'},{value:'"svg"'},{value:'"animate"'},{value:'"animateMotion"'},{value:'"animateTransform"'},{value:'"circle"'},{value:'"clipPath"'},{value:'"defs"'},{value:'"desc"'},{value:'"ellipse"'},{value:'"feBlend"'},{value:'"feColorMatrix"'},{value:'"feComponentTransfer"'},{value:'"feComposite"'},{value:'"feConvolveMatrix"'},{value:'"feDiffuseLighting"'},{value:'"feDisplacementMap"'},{value:'"feDistantLight"'},{value:'"feDropShadow"'},{value:'"feFlood"'},{value:'"feFuncA"'},{value:'"feFuncB"'},{value:'"feFuncG"'},{value:'"feFuncR"'},{value:'"feGaussianBlur"'},{value:'"feImage"'},{value:'"feMerge"'},{value:'"feMergeNode"'},{value:'"feMorphology"'},{value:'"feOffset"'},{value:'"fePointLight"'},{value:'"feSpecularLighting"'},{value:'"feSpotLight"'},{value:'"feTile"'},{value:'"feTurbulence"'},{value:'"filter"'},{value:'"foreignObject"'},{value:'"g"'},{value:'"image"'},{value:'"line"'},{value:'"linearGradient"'},{value:'"marker"'},{value:'"mask"'},{value:'"metadata"'},{value:'"mpath"'},{value:'"path"'},{value:'"pattern"'},{value:'"polygon"'},{value:'"polyline"'},{value:'"radialGradient"'},{value:'"rect"'},{value:'"stop"'},{value:'"switch"'},{value:'"text"'},{value:'"textPath"'},{value:'"tspan"'},{value:'"use"'},{value:'"view"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/focal-point-picker/focal-point.tsx#focalpoint"]={docgenInfo:focalpoint.__docgenInfo,name:"focalpoint",path:"packages/components/src/focal-point-picker/focal-point.tsx#focalpoint"})}catch(__react_docgen_typescript_loader_error){}function FocalPointPickerGrid(_ref){let{bounds:bounds,...props}=_ref;return(0,jsx_runtime.jsxs)(GridView,{...props,className:"components-focal-point-picker__grid",style:{width:bounds.width,height:bounds.height},children:[(0,jsx_runtime.jsx)(GridLineX,{style:{top:"33%"}}),(0,jsx_runtime.jsx)(GridLineX,{style:{top:"66%"}}),(0,jsx_runtime.jsx)(GridLineY,{style:{left:"33%"}}),(0,jsx_runtime.jsx)(GridLineY,{style:{left:"66%"}})]})}FocalPointPickerGrid.displayName="FocalPointPickerGrid";try{grid.displayName="grid",grid.__docgenInfo={description:"",displayName:"grid",props:{bounds:{defaultValue:null,description:"",name:"bounds",required:!0,type:{name:"{ width: number; height: number; }"}},showOverlay:{defaultValue:null,description:"",name:"showOverlay",required:!1,type:{name:"boolean"}},as:{defaultValue:null,description:"The HTML element or React component to render the component as.",name:"as",required:!1,type:{name:"enum",value:[{value:'"symbol"'},{value:'"object"'},{value:'"a"'},{value:'"abbr"'},{value:'"address"'},{value:'"area"'},{value:'"article"'},{value:'"aside"'},{value:'"audio"'},{value:'"b"'},{value:'"base"'},{value:'"bdi"'},{value:'"bdo"'},{value:'"big"'},{value:'"blockquote"'},{value:'"body"'},{value:'"br"'},{value:'"button"'},{value:'"canvas"'},{value:'"caption"'},{value:'"cite"'},{value:'"code"'},{value:'"col"'},{value:'"colgroup"'},{value:'"data"'},{value:'"datalist"'},{value:'"dd"'},{value:'"del"'},{value:'"details"'},{value:'"dfn"'},{value:'"dialog"'},{value:'"div"'},{value:'"dl"'},{value:'"dt"'},{value:'"em"'},{value:'"embed"'},{value:'"fieldset"'},{value:'"figcaption"'},{value:'"figure"'},{value:'"footer"'},{value:'"form"'},{value:'"h1"'},{value:'"h2"'},{value:'"h3"'},{value:'"h4"'},{value:'"h5"'},{value:'"h6"'},{value:'"head"'},{value:'"header"'},{value:'"hgroup"'},{value:'"hr"'},{value:'"html"'},{value:'"i"'},{value:'"iframe"'},{value:'"img"'},{value:'"input"'},{value:'"ins"'},{value:'"kbd"'},{value:'"keygen"'},{value:'"label"'},{value:'"legend"'},{value:'"li"'},{value:'"link"'},{value:'"main"'},{value:'"map"'},{value:'"mark"'},{value:'"menu"'},{value:'"menuitem"'},{value:'"meta"'},{value:'"meter"'},{value:'"nav"'},{value:'"noindex"'},{value:'"noscript"'},{value:'"ol"'},{value:'"optgroup"'},{value:'"option"'},{value:'"output"'},{value:'"p"'},{value:'"param"'},{value:'"picture"'},{value:'"pre"'},{value:'"progress"'},{value:'"q"'},{value:'"rp"'},{value:'"rt"'},{value:'"ruby"'},{value:'"s"'},{value:'"samp"'},{value:'"slot"'},{value:'"script"'},{value:'"section"'},{value:'"select"'},{value:'"small"'},{value:'"source"'},{value:'"span"'},{value:'"strong"'},{value:'"style"'},{value:'"sub"'},{value:'"summary"'},{value:'"sup"'},{value:'"table"'},{value:'"template"'},{value:'"tbody"'},{value:'"td"'},{value:'"textarea"'},{value:'"tfoot"'},{value:'"th"'},{value:'"thead"'},{value:'"time"'},{value:'"title"'},{value:'"tr"'},{value:'"track"'},{value:'"u"'},{value:'"ul"'},{value:'"var"'},{value:'"video"'},{value:'"wbr"'},{value:'"webview"'},{value:'"svg"'},{value:'"animate"'},{value:'"animateMotion"'},{value:'"animateTransform"'},{value:'"circle"'},{value:'"clipPath"'},{value:'"defs"'},{value:'"desc"'},{value:'"ellipse"'},{value:'"feBlend"'},{value:'"feColorMatrix"'},{value:'"feComponentTransfer"'},{value:'"feComposite"'},{value:'"feConvolveMatrix"'},{value:'"feDiffuseLighting"'},{value:'"feDisplacementMap"'},{value:'"feDistantLight"'},{value:'"feDropShadow"'},{value:'"feFlood"'},{value:'"feFuncA"'},{value:'"feFuncB"'},{value:'"feFuncG"'},{value:'"feFuncR"'},{value:'"feGaussianBlur"'},{value:'"feImage"'},{value:'"feMerge"'},{value:'"feMergeNode"'},{value:'"feMorphology"'},{value:'"feOffset"'},{value:'"fePointLight"'},{value:'"feSpecularLighting"'},{value:'"feSpotLight"'},{value:'"feTile"'},{value:'"feTurbulence"'},{value:'"filter"'},{value:'"foreignObject"'},{value:'"g"'},{value:'"image"'},{value:'"line"'},{value:'"linearGradient"'},{value:'"marker"'},{value:'"mask"'},{value:'"metadata"'},{value:'"mpath"'},{value:'"path"'},{value:'"pattern"'},{value:'"polygon"'},{value:'"polyline"'},{value:'"radialGradient"'},{value:'"rect"'},{value:'"stop"'},{value:'"switch"'},{value:'"text"'},{value:'"textPath"'},{value:'"tspan"'},{value:'"use"'},{value:'"view"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/focal-point-picker/grid.tsx#grid"]={docgenInfo:grid.__docgenInfo,name:"grid",path:"packages/components/src/focal-point-picker/grid.tsx#grid"})}catch(__react_docgen_typescript_loader_error){}function Media(_ref){let{alt:alt,autoPlay:autoPlay,src:src,onLoad:onLoad,mediaRef:mediaRef,muted:muted=!0,...props}=_ref;if(!src)return(0,jsx_runtime.jsx)(MediaPlaceholder,{className:"components-focal-point-picker__media components-focal-point-picker__media--placeholder",ref:mediaRef,...props});const isVideo=function isVideoType(){let filename=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!filename&&VIDEO_EXTENSIONS.includes(getExtension(filename))}(src);return isVideo?(0,jsx_runtime.jsx)("video",{...props,autoPlay:autoPlay,className:"components-focal-point-picker__media components-focal-point-picker__media--video",loop:!0,muted:muted,onLoadedData:onLoad,ref:mediaRef,src:src}):(0,jsx_runtime.jsx)("img",{...props,alt:alt,className:"components-focal-point-picker__media components-focal-point-picker__media--image",onLoad:onLoad,ref:mediaRef,src:src})}try{media.displayName="media",media.__docgenInfo={description:"",displayName:"media",props:{alt:{defaultValue:null,description:"",name:"alt",required:!0,type:{name:"string"}},mediaRef:{defaultValue:null,description:"",name:"mediaRef",required:!1,type:{name:"Ref<HTMLDivElement | HTMLImageElement | HTMLVideoElement>"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!1,type:{name:"ReactEventHandler<HTMLImageElement | HTMLVideoElement>"}},src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/focal-point-picker/media.tsx#media"]={docgenInfo:media.__docgenInfo,name:"media",path:"packages/components/src/focal-point-picker/media.tsx#media"})}catch(__react_docgen_typescript_loader_error){}var use_update_effect=__webpack_require__("./packages/components/src/utils/hooks/use-update-effect.js");function FocalPointPicker(_ref){let{__nextHasNoMarginBottom:__nextHasNoMarginBottom,autoPlay:autoPlay=!0,className:className,help:help,label:label,onChange:onChange,onDrag:onDrag,onDragEnd:onDragEnd,onDragStart:onDragStart,resolvePoint:resolvePoint,url:url,value:valueProp={x:.5,y:.5},...restProps}=_ref;const[point,setPoint]=(0,react.useState)(valueProp),[showGridOverlay,setShowGridOverlay]=(0,react.useState)(!1),{startDrag:startDrag,endDrag:endDrag,isDragging:isDragging}=(0,use_dragging.Z)({onDragStart:event=>{var _dragAreaRef$current;null===(_dragAreaRef$current=dragAreaRef.current)||void 0===_dragAreaRef$current||_dragAreaRef$current.focus();const value=getValueWithinDragArea(event);value&&(null==onDragStart||onDragStart(value,event),setPoint(value))},onDragMove:event=>{event.preventDefault();const value=getValueWithinDragArea(event);value&&(null==onDrag||onDrag(value,event),setPoint(value))},onDragEnd:()=>{null==onDragEnd||onDragEnd(),null==onChange||onChange(point)}}),{x:x,y:y}=isDragging?point:valueProp,dragAreaRef=(0,react.useRef)(null),[bounds,setBounds]=(0,react.useState)(INITIAL_BOUNDS),refUpdateBounds=(0,react.useRef)((()=>{if(!dragAreaRef.current)return;const{clientWidth:width,clientHeight:height}=dragAreaRef.current;setBounds(width>0&&height>0?{width:width,height:height}:{...INITIAL_BOUNDS})}));(0,react.useEffect)((()=>{const updateBounds=refUpdateBounds.current;if(!dragAreaRef.current)return;const{defaultView:defaultView}=dragAreaRef.current.ownerDocument;return null==defaultView||defaultView.addEventListener("resize",updateBounds),()=>null==defaultView?void 0:defaultView.removeEventListener("resize",updateBounds)}),[]),(0,use_isomorphic_layout_effect.Z)((()=>{refUpdateBounds.current()}),[]);const getValueWithinDragArea=_ref2=>{let{clientX:clientX,clientY:clientY,shiftKey:shiftKey}=_ref2;if(!dragAreaRef.current)return;const{top:top,left:left}=dragAreaRef.current.getBoundingClientRect();let nextX=(clientX-left)/bounds.width,nextY=(clientY-top)/bounds.height;return shiftKey&&(nextX=.1*Math.round(nextX/.1),nextY=.1*Math.round(nextY/.1)),getFinalValue({x:nextX,y:nextY})},getFinalValue=value=>{var _resolvePoint;const resolvedValue=null!==(_resolvePoint=null==resolvePoint?void 0:resolvePoint(value))&&void 0!==_resolvePoint?_resolvePoint:value;resolvedValue.x=Math.max(0,Math.min(resolvedValue.x,1)),resolvedValue.y=Math.max(0,Math.min(resolvedValue.y,1));const roundToTwoDecimalPlaces=n=>Math.round(100*n)/100;return{x:roundToTwoDecimalPlaces(resolvedValue.x),y:roundToTwoDecimalPlaces(resolvedValue.y)}},focalPointPosition={left:x*bounds.width,top:y*bounds.height},classes=classnames_default()("components-focal-point-picker-control",className),id=`inspector-focal-point-picker-control-${(0,use_instance_id.Z)(FocalPointPicker)}`;return(0,use_update_effect.Z)((()=>{setShowGridOverlay(!0);const timeout=window.setTimeout((()=>{setShowGridOverlay(!1)}),600);return()=>window.clearTimeout(timeout)}),[x,y]),(0,jsx_runtime.jsxs)(base_control.ZP,{...restProps,__nextHasNoMarginBottom:__nextHasNoMarginBottom,label:label,id:id,help:help,className:classes,children:[(0,jsx_runtime.jsx)(MediaWrapper,{className:"components-focal-point-picker-wrapper",children:(0,jsx_runtime.jsxs)(MediaContainer,{className:"components-focal-point-picker",onKeyDown:event=>{const{code:code,shiftKey:shiftKey}=event;if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(code))return;event.preventDefault();const value={x:x,y:y},step=shiftKey?.1:.01,delta="ArrowUp"===code||"ArrowLeft"===code?-1*step:step,axis="ArrowUp"===code||"ArrowDown"===code?"y":"x";value[axis]=value[axis]+delta,null==onChange||onChange(getFinalValue(value))},onMouseDown:startDrag,onBlur:()=>{isDragging&&endDrag()},ref:dragAreaRef,role:"button",tabIndex:-1,children:[(0,jsx_runtime.jsx)(FocalPointPickerGrid,{bounds:bounds,showOverlay:showGridOverlay}),(0,jsx_runtime.jsx)(Media,{alt:(0,build_module.__)("Media preview"),autoPlay:autoPlay,onLoad:refUpdateBounds.current,src:url}),(0,jsx_runtime.jsx)(FocalPoint,{...focalPointPosition,isDragging:isDragging})]})}),(0,jsx_runtime.jsx)(FocalPointPickerControls,{__nextHasNoMarginBottom:__nextHasNoMarginBottom,hasHelpText:!!help,point:{x:x,y:y},onChange:value=>{null==onChange||onChange(getFinalValue(value))}})]})}FocalPointPicker.displayName="FocalPointPicker";var focal_point_picker=FocalPointPicker;try{FocalPointPicker.displayName="FocalPointPicker",FocalPointPicker.__docgenInfo={description:"Focal Point Picker is a component which creates a UI for identifying the most important visual point of an image.\n\nThis component addresses a specific problem: with large background images it is common to see undesirable crops,\nespecially when viewing on smaller viewports such as mobile phones. This component allows the selection of\nthe point with the most important visual information and returns it as a pair of numbers between 0 and 1.\nThis value can be easily converted into the CSS `background-position` attribute, and will ensure that the\nfocal point is never cropped out, regardless of viewport.\n\n- Example focal point picker value: `{ x: 0.5, y: 0.1 }`\n- Corresponding CSS: `background-position: 50% 10%;`\n\n```jsx\nimport { FocalPointPicker } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\n\nconst Example = () => {\n\tconst [ focalPoint, setFocalPoint ] = useState( {\n\t\tx: 0.5,\n\t\ty: 0.5,\n\t} );\n\n\tconst url = '/path/to/image';\n\n\t// Example function to render the CSS styles based on Focal Point Picker value\n\tconst style = {\n\t\tbackgroundImage: `url(${ url })`,\n\t\tbackgroundPosition: `${ focalPoint.x * 100 }% ${ focalPoint.y * 100 }%`,\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<FocalPointPicker\n\t\t\t\turl={ url }\n\t\t\t\tvalue={ focalPoint }\n\t\t\t\tonDragStart={ setFocalPoint }\n\t\t\t\tonDrag={ setFocalPoint }\n\t\t\t\tonChange={ setFocalPoint }\n\t\t\t/>\n\t\t\t<div style={ style } />\n\t\t</>\n\t);\n};\n```",displayName:"FocalPointPicker",props:{label:{defaultValue:null,description:"If this property is added, a label will be generated using label property as the content.",name:"label",required:!1,type:{name:"ReactNode"}},hideLabelFromVision:{defaultValue:{value:"false"},description:"If true, the label will only be visible to screen readers.",name:"hideLabelFromVision",required:!1,type:{name:"boolean"}},help:{defaultValue:null,description:"Additional description for the control.\n\nIt is preferable to use plain text for `help`, as it can be accessibly associated with the control using `aria-describedby`.\nWhen the `help` contains links, or otherwise non-plain text content, it will be associated with the control using `aria-details`.",name:"help",required:!1,type:{name:"ReactNode"}},__nextHasNoMarginBottom:{defaultValue:{value:"false"},description:"Start opting into the new margin-free styles that will become the default in a future version.",name:"__nextHasNoMarginBottom",required:!1,type:{name:"boolean"}},autoPlay:{defaultValue:{value:"true"},description:"Autoplays HTML5 video. This only applies to video sources (`url`).",name:"autoPlay",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Callback which is called when the focal point changes.",name:"onChange",required:!0,type:{name:"(value: FocalPoint) => void"}},onDrag:{defaultValue:null,description:"",name:"onDrag",required:!1,type:{name:"(value: FocalPoint, event: MouseEvent) => void"}},onDragEnd:{defaultValue:null,description:"Callback which is called at the end of drag operations.",name:"onDragEnd",required:!1,type:{name:"() => void"}},onDragStart:{defaultValue:null,description:"Callback which is called at the start of drag operations.",name:"onDragStart",required:!1,type:{name:"(value: FocalPoint, event: MouseEvent<Element, MouseEvent>) => void"}},resolvePoint:{defaultValue:null,description:"Function which is called before internal updates to the value state.\nIt receives the upcoming value and may return a modified one.",name:"resolvePoint",required:!1,type:{name:"(point: FocalPoint) => FocalPoint"}},url:{defaultValue:null,description:"URL of the image or video to be displayed.",name:"url",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"The focal point. Should be an object containing `x` and `y` params.",name:"value",required:!0,type:{name:"FocalPoint"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/focal-point-picker/index.tsx#FocalPointPicker"]={docgenInfo:FocalPointPicker.__docgenInfo,name:"FocalPointPicker",path:"packages/components/src/focal-point-picker/index.tsx#FocalPointPicker"})}catch(__react_docgen_typescript_loader_error){}var stories={title:"Components/FocalPointPicker",component:focal_point_picker,argTypes:{help:{control:"text"},label:{control:"text"}},parameters:{sourceLink:"packages/components/src/focal-point-picker",actions:{argTypesRegex:"^on.*"},controls:{expanded:!0},docs:{source:{state:"open"}}}};const Template=_ref=>{let{onChange:onChange,...props}=_ref;const[focalPoint,setFocalPoint]=(0,react.useState)({x:.5,y:.5});return(0,jsx_runtime.jsx)(focal_point_picker,{...props,value:focalPoint,onChange:function(){onChange(...arguments),setFocalPoint(...arguments)}})};Template.displayName="Template";const Default=Template.bind({}),Image=Template.bind({});Image.args={...Default.args,url:"https://i0.wp.com/themes.svn.wordpress.org/twentytwenty/1.3/screenshot.png?w=572&strip=al"};const Video=Template.bind({});Video.args={...Default.args,url:"https://interactive-examples.mdn.mozilla.net/media/examples/flower.webm"};const Snapping=Template.bind({});Snapping.args={...Default.args,resolvePoint:value=>{const snapValues={x:[0,.33,.66,1],y:[0,.33,.66,1]};let x=value.x,y=value.y;return snapValues.x.forEach((snapValue=>{snapValue-.05<x&&x<snapValue+.05&&(x=snapValue)})),snapValues.y.forEach((snapValue=>{snapValue-.05<y&&y<snapValue+.05&&(y=snapValue)})),{x:x,y:y}}};try{ComponentMeta.displayName="ComponentMeta",ComponentMeta.__docgenInfo={description:"For the common case where a component's stories are simple components that receives args as props:\n\n```tsx\nexport default { ... } as ComponentMeta<typeof Button>;\n```",displayName:"ComponentMeta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/focal-point-picker/stories/index.tsx#ComponentMeta"]={docgenInfo:ComponentMeta.__docgenInfo,name:"ComponentMeta",path:"packages/components/src/focal-point-picker/stories/index.tsx#ComponentMeta"})}catch(__react_docgen_typescript_loader_error){}}}]);