"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[9190],{"./packages/block-editor/src/components/block-draggable/draggable-chip.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return BlockDraggableChip}});var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/icons/build-module/library/drag-handle.js"),_block_icon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/block-editor/src/components/block-icon/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function BlockDraggableChip(_ref){let{count:count,icon:icon,isPattern:isPattern}=_ref;const patternLabel=isPattern&&(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Pattern");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"block-editor-block-draggable-chip-wrapper",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"block-editor-block-draggable-chip","data-testid":"block-draggable-chip",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Z,{justify:"center",className:"block-editor-block-draggable-chip__content",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.Z,{children:icon?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_block_icon__WEBPACK_IMPORTED_MODULE_4__.Z,{icon:icon}):patternLabel||(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.gB)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__._n)("%d block","%d blocks",count),count)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.Z,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_block_icon__WEBPACK_IMPORTED_MODULE_4__.Z,{icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_5__.Z})})]})})})}BlockDraggableChip.displayName="BlockDraggableChip",BlockDraggableChip.__docgenInfo={description:"",methods:[],displayName:"BlockDraggableChip"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-draggable/draggable-chip.js"]={name:"BlockDraggableChip",docgenInfo:BlockDraggableChip.__docgenInfo,path:"packages/block-editor/src/components/block-draggable/draggable-chip.js"})},"./packages/block-editor/src/components/block-draggable/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return block_draggable}});var build_module=__webpack_require__("./packages/blocks/build-module/index.js"),draggable=__webpack_require__("./packages/components/build-module/draggable/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),react=__webpack_require__("./node_modules/react/index.js"),draggable_chip=__webpack_require__("./packages/block-editor/src/components/block-draggable/draggable-chip.js"),get_scroll_container=__webpack_require__("./packages/dom/build-module/dom/get-scroll-container.js");var store=__webpack_require__("./packages/block-editor/src/store/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const BlockDraggable=_ref=>{let{children:children,clientIds:clientIds,cloneClassname:cloneClassname,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref;const{srcRootClientId:srcRootClientId,isDraggable:isDraggable,icon:icon}=(0,use_select.Z)((select=>{var _getBlockType;const{canMoveBlocks:canMoveBlocks,getBlockRootClientId:getBlockRootClientId,getBlockName:getBlockName}=select(store.h),rootClientId=getBlockRootClientId(clientIds[0]),blockName=getBlockName(clientIds[0]);return{srcRootClientId:rootClientId,isDraggable:canMoveBlocks(clientIds,rootClientId),icon:null===(_getBlockType=(0,build_module.ck)(blockName))||void 0===_getBlockType?void 0:_getBlockType.icon}}),[clientIds]),isDragging=(0,react.useRef)(!1),[startScrolling,scrollOnDragOver,stopScrolling]=function useScrollWhenDragging(){const dragStartY=(0,react.useRef)(null),velocityY=(0,react.useRef)(null),scrollParentY=(0,react.useRef)(null),scrollEditorInterval=(0,react.useRef)(null);return(0,react.useEffect)((()=>()=>{scrollEditorInterval.current&&(clearInterval(scrollEditorInterval.current),scrollEditorInterval.current=null)}),[]),[(0,react.useCallback)((event=>{dragStartY.current=event.clientY,scrollParentY.current=(0,get_scroll_container.Z)(event.target),scrollEditorInterval.current=setInterval((()=>{if(scrollParentY.current&&velocityY.current){const newTop=scrollParentY.current.scrollTop+velocityY.current;scrollParentY.current.scroll({top:newTop})}}),25)}),[]),(0,react.useCallback)((event=>{if(!scrollParentY.current)return;const scrollParentHeight=scrollParentY.current.offsetHeight,offsetDragStartPosition=dragStartY.current-scrollParentY.current.offsetTop,offsetDragPosition=event.clientY-scrollParentY.current.offsetTop;if(event.clientY>offsetDragStartPosition){const moveableDistance=Math.max(scrollParentHeight-offsetDragStartPosition-50,0),distancePercentage=Math.max(offsetDragPosition-offsetDragStartPosition-50,0)/moveableDistance;velocityY.current=25*distancePercentage}else if(event.clientY<offsetDragStartPosition){const moveableDistance=Math.max(offsetDragStartPosition-50,0),distancePercentage=Math.max(offsetDragStartPosition-offsetDragPosition-50,0)/moveableDistance;velocityY.current=-25*distancePercentage}else velocityY.current=0}),[]),()=>{dragStartY.current=null,scrollParentY.current=null,scrollEditorInterval.current&&(clearInterval(scrollEditorInterval.current),scrollEditorInterval.current=null)}]}(),{startDraggingBlocks:startDraggingBlocks,stopDraggingBlocks:stopDraggingBlocks}=(0,use_dispatch.Z)(store.h);if((0,react.useEffect)((()=>()=>{isDragging.current&&stopDraggingBlocks()}),[]),!isDraggable)return children({draggable:!1});const transferData={type:"block",srcClientIds:clientIds,srcRootClientId:srcRootClientId};return(0,jsx_runtime.jsx)(draggable.Z,{cloneClassname:cloneClassname,__experimentalTransferDataType:"wp-blocks",transferData:transferData,onDragStart:event=>{startDraggingBlocks(clientIds),isDragging.current=!0,startScrolling(event),onDragStart&&onDragStart()},onDragOver:scrollOnDragOver,onDragEnd:()=>{stopDraggingBlocks(),isDragging.current=!1,stopScrolling(),onDragEnd&&onDragEnd()},__experimentalDragComponent:(0,jsx_runtime.jsx)(draggable_chip.Z,{count:clientIds.length,icon:icon}),children:_ref2=>{let{onDraggableStart:onDraggableStart,onDraggableEnd:onDraggableEnd}=_ref2;return children({draggable:!0,onDragStart:onDraggableStart,onDragEnd:onDraggableEnd})}})};BlockDraggable.displayName="BlockDraggable",BlockDraggable.__docgenInfo={description:"",methods:[],displayName:"BlockDraggable"};var block_draggable=BlockDraggable;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-draggable/index.js"]={name:"BlockDraggable",docgenInfo:BlockDraggable.__docgenInfo,path:"packages/block-editor/src/components/block-draggable/index.js"})},"./packages/block-editor/src/components/block-edit/context.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{FF:function(){return DEFAULT_BLOCK_EDIT_CONTEXT},Q2:function(){return Provider},Z8:function(){return useBlockEditContext}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const DEFAULT_BLOCK_EDIT_CONTEXT={name:"",isSelected:!1},Context=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createContext)(DEFAULT_BLOCK_EDIT_CONTEXT),{Provider:Provider}=Context;function useBlockEditContext(){return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useContext)(Context)}},"./packages/block-editor/src/components/block-icon/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_wordpress_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/build-module/icon/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/icons/build-module/library/block-default.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function BlockIcon(_ref){var _icon;let{icon:icon,showColors:showColors=!1,className:className,context:context}=_ref;"block-default"===(null===(_icon=icon)||void 0===_icon?void 0:_icon.src)&&(icon={src:_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__.Z});const renderedIcon=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.Z,{icon:icon&&icon.src?icon.src:icon,context:context}),style=showColors?{backgroundColor:icon&&icon.background,color:icon&&icon.foreground}:{};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{style:style,className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("block-editor-block-icon",className,{"has-colors":showColors}),children:renderedIcon})}BlockIcon.displayName="BlockIcon",BlockIcon.__docgenInfo={description:"",methods:[],displayName:"BlockIcon",props:{showColors:{defaultValue:{value:"false",computed:!1},required:!1}}},__webpack_exports__.Z=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.memo)(BlockIcon),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-icon/index.js"]={name:"BlockIcon",docgenInfo:BlockIcon.__docgenInfo,path:"packages/block-editor/src/components/block-icon/index.js"})},"./packages/block-editor/src/components/block-mover/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return block_mover}});var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),drag_handle=__webpack_require__("./packages/icons/build-module/library/drag-handle.js"),toolbar_group=__webpack_require__("./packages/components/build-module/toolbar-group/index.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),toolbar_item=__webpack_require__("./packages/components/build-module/toolbar-item/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),block_draggable=__webpack_require__("./packages/block-editor/src/components/block-draggable/index.js"),blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),react=__webpack_require__("./node_modules/react/index.js"),chevron_right=__webpack_require__("./packages/icons/build-module/library/chevron-right.js"),chevron_left=__webpack_require__("./packages/icons/build-module/library/chevron-left.js"),chevron_up=__webpack_require__("./packages/icons/build-module/library/chevron-up.js"),chevron_down=__webpack_require__("./packages/icons/build-module/library/chevron-down.js");const getMovementDirection=(moveDirection,orientation)=>"up"===moveDirection?"horizontal"===orientation?(0,build_module.dZ)()?"right":"left":"up":"down"===moveDirection?"horizontal"===orientation?(0,build_module.dZ)()?"left":"right":"down":null;function getBlockMoverDescription(selectedCount,type,firstIndex,isFirst,isLast,dir,orientation){const position=firstIndex+1;if(selectedCount>1)return function getMultiBlockMoverDescription(selectedCount,firstIndex,isFirst,isLast,dir,orientation){const position=firstIndex+1;if(isFirst&&isLast)return(0,build_module.__)("All blocks are selected, and cannot be moved");if(dir>0&&!isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$d blocks from position %2$d down by one place"),selectedCount,position);if("left"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$d blocks from position %2$d left by one place"),selectedCount,position);if("right"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$d blocks from position %2$d right by one place"),selectedCount,position)}if(dir>0&&isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,build_module.__)("Blocks cannot be moved down as they are already at the bottom");if("left"===movementDirection)return(0,build_module.__)("Blocks cannot be moved left as they are already are at the leftmost position");if("right"===movementDirection)return(0,build_module.__)("Blocks cannot be moved right as they are already are at the rightmost position")}if(dir<0&&!isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$d blocks from position %2$d up by one place"),selectedCount,position);if("left"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$d blocks from position %2$d left by one place"),selectedCount,position);if("right"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$d blocks from position %2$d right by one place"),selectedCount,position)}if(dir<0&&isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,build_module.__)("Blocks cannot be moved up as they are already at the top");if("left"===movementDirection)return(0,build_module.__)("Blocks cannot be moved left as they are already are at the leftmost position");if("right"===movementDirection)return(0,build_module.__)("Blocks cannot be moved right as they are already are at the rightmost position")}}(selectedCount,firstIndex,isFirst,isLast,dir,orientation);if(isFirst&&isLast)return(0,build_module.gB)((0,build_module.__)("Block %s is the only block, and cannot be moved"),type);if(dir>0&&!isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$s block from position %2$d down to position %3$d"),type,position,position+1);if("left"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$s block from position %2$d left to position %3$d"),type,position,position+1);if("right"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$s block from position %2$d right to position %3$d"),type,position,position+1)}if(dir>0&&isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Block %1$s is at the end of the content and can’t be moved down"),type);if("left"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Block %1$s is at the end of the content and can’t be moved left"),type);if("right"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Block %1$s is at the end of the content and can’t be moved right"),type)}if(dir<0&&!isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$s block from position %2$d up to position %3$d"),type,position,position-1);if("left"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$s block from position %2$d left to position %3$d"),type,position,position-1);if("right"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Move %1$s block from position %2$d right to position %3$d"),type,position,position-1)}if(dir<0&&isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Block %1$s is at the beginning of the content and can’t be moved up"),type);if("left"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Block %1$s is at the beginning of the content and can’t be moved left"),type);if("right"===movementDirection)return(0,build_module.gB)((0,build_module.__)("Block %1$s is at the beginning of the content and can’t be moved right"),type)}}var store=__webpack_require__("./packages/block-editor/src/store/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const getArrowIcon=(direction,orientation)=>"up"===direction?"horizontal"===orientation?(0,build_module.dZ)()?chevron_right.Z:chevron_left.Z:chevron_up.Z:"down"===direction?"horizontal"===orientation?(0,build_module.dZ)()?chevron_left.Z:chevron_right.Z:chevron_down.Z:null,getMovementDirectionLabel=(moveDirection,orientation)=>"up"===moveDirection?"horizontal"===orientation?(0,build_module.dZ)()?(0,build_module.__)("Move right"):(0,build_module.__)("Move left"):(0,build_module.__)("Move up"):"down"===moveDirection?"horizontal"===orientation?(0,build_module.dZ)()?(0,build_module.__)("Move left"):(0,build_module.__)("Move right"):(0,build_module.__)("Move down"):null,BlockMoverButton=(0,react.forwardRef)(((_ref,ref)=>{let{clientIds:clientIds,direction:direction,orientation:moverOrientation,...props}=_ref;const instanceId=(0,use_instance_id.Z)(BlockMoverButton),normalizedClientIds=Array.isArray(clientIds)?clientIds:[clientIds],blocksCount=normalizedClientIds.length,{blockType:blockType,isDisabled:isDisabled,rootClientId:rootClientId,isFirst:isFirst,isLast:isLast,firstIndex:firstIndex,orientation:orientation="vertical"}=(0,use_select.Z)((select=>{const{getBlockIndex:getBlockIndex,getBlockRootClientId:getBlockRootClientId,getBlockOrder:getBlockOrder,getBlock:getBlock,getBlockListSettings:getBlockListSettings}=select(store.h),firstClientId=normalizedClientIds[0],blockRootClientId=getBlockRootClientId(firstClientId),firstBlockIndex=getBlockIndex(firstClientId),lastBlockIndex=getBlockIndex(normalizedClientIds[normalizedClientIds.length-1]),blockOrder=getBlockOrder(blockRootClientId),block=getBlock(firstClientId),isFirstBlock=0===firstBlockIndex,isLastBlock=lastBlockIndex===blockOrder.length-1,{orientation:blockListOrientation}=getBlockListSettings(blockRootClientId)||{};return{blockType:block?(0,blocks_build_module.ck)(block.name):null,isDisabled:"up"===direction?isFirstBlock:isLastBlock,rootClientId:blockRootClientId,firstIndex:firstBlockIndex,isFirst:isFirstBlock,isLast:isLastBlock,orientation:moverOrientation||blockListOrientation}}),[clientIds,direction]),{moveBlocksDown:moveBlocksDown,moveBlocksUp:moveBlocksUp}=(0,use_dispatch.Z)(store.h),moverFunction="up"===direction?moveBlocksUp:moveBlocksDown,descriptionId=`block-editor-block-mover-button__description-${instanceId}`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_button.Z,{ref:ref,className:classnames_default()("block-editor-block-mover-button",`is-${direction}-button`),icon:getArrowIcon(direction,orientation),label:getMovementDirectionLabel(direction,orientation),"aria-describedby":descriptionId,...props,onClick:isDisabled?null:event=>{moverFunction(clientIds,rootClientId),props.onClick&&props.onClick(event)},disabled:isDisabled,__experimentalIsFocusable:!0}),(0,jsx_runtime.jsx)(component.Z,{id:descriptionId,children:getBlockMoverDescription(blocksCount,blockType&&blockType.title,firstIndex,isFirst,isLast,"up"===direction?-1:1,orientation)})]})})),BlockMoverUpButton=(0,react.forwardRef)(((props,ref)=>(0,jsx_runtime.jsx)(BlockMoverButton,{direction:"up",ref:ref,...props}))),BlockMoverDownButton=(0,react.forwardRef)(((props,ref)=>(0,jsx_runtime.jsx)(BlockMoverButton,{direction:"down",ref:ref,...props})));function BlockMover(_ref){let{clientIds:clientIds,hideDragHandle:hideDragHandle}=_ref;const{canMove:canMove,rootClientId:rootClientId,isFirst:isFirst,isLast:isLast,orientation:orientation}=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlockIndex:getBlockIndex,getBlockListSettings:getBlockListSettings,canMoveBlocks:canMoveBlocks,getBlockOrder:getBlockOrder,getBlockRootClientId:getBlockRootClientId}=select(store.h),normalizedClientIds=Array.isArray(clientIds)?clientIds:[clientIds],firstClientId=normalizedClientIds[0],_rootClientId=getBlockRootClientId(firstClientId),firstIndex=getBlockIndex(firstClientId),lastIndex=getBlockIndex(normalizedClientIds[normalizedClientIds.length-1]),blockOrder=getBlockOrder(_rootClientId);return{canMove:canMoveBlocks(clientIds,_rootClientId),rootClientId:_rootClientId,isFirst:0===firstIndex,isLast:lastIndex===blockOrder.length-1,orientation:null===(_getBlockListSettings=getBlockListSettings(_rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation}}),[clientIds]);if(!canMove||isFirst&&isLast&&!rootClientId)return null;const dragHandleLabel=(0,build_module.__)("Drag");return(0,jsx_runtime.jsxs)(toolbar_group.Z,{className:classnames_default()("block-editor-block-mover",{"is-horizontal":"horizontal"===orientation}),children:[!hideDragHandle&&(0,jsx_runtime.jsx)(block_draggable.Z,{clientIds:clientIds,children:draggableProps=>(0,jsx_runtime.jsx)(build_module_button.Z,{icon:drag_handle.Z,className:"block-editor-block-mover__drag-handle","aria-hidden":"true",label:dragHandleLabel,tabIndex:"-1",...draggableProps})}),(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-mover__move-button-container",children:[(0,jsx_runtime.jsx)(toolbar_item.Z,{children:itemProps=>(0,jsx_runtime.jsx)(BlockMoverUpButton,{clientIds:clientIds,...itemProps})}),(0,jsx_runtime.jsx)(toolbar_item.Z,{children:itemProps=>(0,jsx_runtime.jsx)(BlockMoverDownButton,{clientIds:clientIds,...itemProps})})]})]})}BlockMover.displayName="BlockMover",BlockMover.__docgenInfo={description:"",methods:[],displayName:"BlockMover"};var block_mover=BlockMover;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-mover/index.js"]={name:"BlockMover",docgenInfo:BlockMover.__docgenInfo,path:"packages/block-editor/src/components/block-mover/index.js"})},"./packages/block-editor/src/components/height-control/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return HeightControl}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/unit-control/utils.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/build-module/base-control/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/components/build-module/unit-control/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/components/build-module/spacer/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/components/build-module/range-control/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_use_setting__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/components/use-setting/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const RANGE_CONTROL_CUSTOM_SETTINGS={px:{max:1e3,step:1},"%":{max:100,step:1},vw:{max:100,step:1},vh:{max:100,step:1},em:{max:50,step:.1},rem:{max:50,step:.1}};function HeightControl(_ref){var _units$,_RANGE_CONTROL_CUSTOM,_RANGE_CONTROL_CUSTOM2,_RANGE_CONTROL_CUSTOM3,_RANGE_CONTROL_CUSTOM4;let{onChange:onChange,label:label=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Height"),value:value}=_ref;const customRangeValue=parseFloat(value),units=(0,_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.nj)({availableUnits:(0,_use_setting__WEBPACK_IMPORTED_MODULE_3__.Z)("spacing.units")||["%","px","em","rem","vh","vw"]}),selectedUnit=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useMemo)((()=>(0,_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.YX)(value)),[value])[1]||(null===(_units$=units[0])||void 0===_units$?void 0:_units$.value)||"px";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("fieldset",{className:"block-editor-height-control",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_5__.ZP.VisualLabel,{as:"legend",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_6__.Z,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_7__.Z,{isBlock:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_8__.ZP,{value:value,units:units,onChange:onChange,onUnitChange:newUnit=>{const[currentValue,currentUnit]=(0,_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.YX)(value);["em","rem"].includes(newUnit)&&"px"===currentUnit?onChange((currentValue/16).toFixed(2)+newUnit):["em","rem"].includes(currentUnit)&&"px"===newUnit?onChange(Math.round(16*currentValue)+newUnit):["vh","vw","%"].includes(newUnit)&&currentValue>100&&onChange(100+newUnit)},min:0,size:"__unstable-large"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_7__.Z,{isBlock:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_9__.Z,{marginX:2,marginBottom:0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_10__.Z,{value:customRangeValue,min:0,max:null!==(_RANGE_CONTROL_CUSTOM=null===(_RANGE_CONTROL_CUSTOM2=RANGE_CONTROL_CUSTOM_SETTINGS[selectedUnit])||void 0===_RANGE_CONTROL_CUSTOM2?void 0:_RANGE_CONTROL_CUSTOM2.max)&&void 0!==_RANGE_CONTROL_CUSTOM?_RANGE_CONTROL_CUSTOM:100,step:null!==(_RANGE_CONTROL_CUSTOM3=null===(_RANGE_CONTROL_CUSTOM4=RANGE_CONTROL_CUSTOM_SETTINGS[selectedUnit])||void 0===_RANGE_CONTROL_CUSTOM4?void 0:_RANGE_CONTROL_CUSTOM4.step)&&void 0!==_RANGE_CONTROL_CUSTOM3?_RANGE_CONTROL_CUSTOM3:.1,withInputField:!1,onChange:next=>{onChange([next,selectedUnit].join(""))},__nextHasNoMarginBottom:!0})})})]})]})}HeightControl.displayName="HeightControl",HeightControl.__docgenInfo={description:"",methods:[],displayName:"HeightControl",props:{label:{defaultValue:{value:"__( 'Height' )",computed:!0},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/height-control/index.js"]={name:"HeightControl",docgenInfo:HeightControl.__docgenInfo,path:"packages/block-editor/src/components/height-control/index.js"})},"./packages/block-editor/src/components/provider/block-refs-provider.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{N:function(){return BlockRefs},m:function(){return BlockRefsProvider}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const BlockRefs=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createContext)({refs:new Map,callbacks:new Map});function BlockRefsProvider(_ref){let{children:children}=_ref;const value=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>({refs:new Map,callbacks:new Map})),[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(BlockRefs.Provider,{value:value,children:children})}BlockRefsProvider.displayName="BlockRefsProvider",BlockRefsProvider.__docgenInfo={description:"",methods:[],displayName:"BlockRefsProvider"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/provider/block-refs-provider.js"]={name:"BlockRefsProvider",docgenInfo:BlockRefsProvider.__docgenInfo,path:"packages/block-editor/src/components/provider/block-refs-provider.js"})},"./packages/block-editor/src/components/provider/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return provider}});var use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),react=__webpack_require__("./node_modules/react/index.js"),with_registry=__webpack_require__("./packages/data/build-module/components/with-registry/index.js"),build_module_registry=__webpack_require__("./packages/data/build-module/registry.js"),context=__webpack_require__("./packages/data/build-module/components/registry-provider/context.js"),create_higher_order_component=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js"),constants=__webpack_require__("./packages/block-editor/src/store/constants.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");var with_registry_provider=(0,create_higher_order_component.o)((WrappedComponent=>(0,with_registry.Z)((_ref=>{let{useSubRegistry:useSubRegistry=!0,registry:registry,...props}=_ref;if(!useSubRegistry)return(0,jsx_runtime.jsx)(WrappedComponent,{registry:registry,...props});const[subRegistry,setSubRegistry]=(0,react.useState)(null);return(0,react.useEffect)((()=>{const newRegistry=(0,build_module_registry.p)({},registry);newRegistry.registerStore(constants.G,store.i),setSubRegistry(newRegistry)}),[registry]),subRegistry?(0,jsx_runtime.jsx)(context.ZP,{value:subRegistry,children:(0,jsx_runtime.jsx)(WrappedComponent,{registry:subRegistry,...props})}):null}))),"withRegistryProvider"),use_block_sync=__webpack_require__("./packages/block-editor/src/components/provider/use-block-sync.js"),block_refs_provider=__webpack_require__("./packages/block-editor/src/components/provider/block-refs-provider.js");function BlockEditorProvider(props){const{children:children,settings:settings}=props,{updateSettings:updateSettings}=(0,use_dispatch.Z)(store.h);return(0,react.useEffect)((()=>{updateSettings(settings)}),[settings]),(0,use_block_sync.Z)(props),(0,jsx_runtime.jsx)(block_refs_provider.m,{children:children})}BlockEditorProvider.displayName="BlockEditorProvider",BlockEditorProvider.__docgenInfo={description:"@typedef {import('@wordpress/data').WPDataRegistry} WPDataRegistry",methods:[],displayName:"BlockEditorProvider"};var provider=with_registry_provider(BlockEditorProvider);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/provider/index.js"]={name:"BlockEditorProvider",docgenInfo:BlockEditorProvider.__docgenInfo,path:"packages/block-editor/src/components/provider/index.js"})},"./packages/block-editor/src/components/provider/use-block-sync.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useBlockSync}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/store/index.js");const noop=()=>{};function useBlockSync(_ref){let{clientId:clientId=null,value:controlledBlocks,selection:controlledSelection,onChange:onChange=noop,onInput:onInput=noop}=_ref;const registry=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_2__.Z)(),{resetBlocks:resetBlocks,resetSelection:resetSelection,replaceInnerBlocks:replaceInnerBlocks,setHasControlledInnerBlocks:setHasControlledInnerBlocks,__unstableMarkNextChangeAsNotPersistent:__unstableMarkNextChangeAsNotPersistent}=registry.dispatch(_store__WEBPACK_IMPORTED_MODULE_1__.h),{getBlockName:getBlockName,getBlocks:getBlocks}=registry.select(_store__WEBPACK_IMPORTED_MODULE_1__.h),isControlled=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_3__.Z)((select=>!clientId||select(_store__WEBPACK_IMPORTED_MODULE_1__.h).areInnerBlocksControlled(clientId)),[clientId]),pendingChanges=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useRef)({incoming:null,outgoing:[]}),subscribed=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useRef)(!1),setControlledBlocks=()=>{controlledBlocks&&(__unstableMarkNextChangeAsNotPersistent(),clientId?registry.batch((()=>{setHasControlledInnerBlocks(clientId,!0);const storeBlocks=controlledBlocks.map((block=>(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Wm)(block)));subscribed.current&&(pendingChanges.current.incoming=storeBlocks),__unstableMarkNextChangeAsNotPersistent(),replaceInnerBlocks(clientId,storeBlocks)})):(subscribed.current&&(pendingChanges.current.incoming=controlledBlocks),resetBlocks(controlledBlocks)))},onInputRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useRef)(onInput),onChangeRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useRef)(onChange);(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{onInputRef.current=onInput,onChangeRef.current=onChange}),[onInput,onChange]),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{pendingChanges.current.outgoing.includes(controlledBlocks)?pendingChanges.current.outgoing[pendingChanges.current.outgoing.length-1]===controlledBlocks&&(pendingChanges.current.outgoing=[]):getBlocks(clientId)!==controlledBlocks&&(pendingChanges.current.outgoing=[],setControlledBlocks(),controlledSelection&&resetSelection(controlledSelection.selectionStart,controlledSelection.selectionEnd,controlledSelection.initialPosition))}),[controlledBlocks,clientId]),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{isControlled||(pendingChanges.current.outgoing=[],setControlledBlocks())}),[isControlled]),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{const{getSelectionStart:getSelectionStart,getSelectionEnd:getSelectionEnd,getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,isLastBlockChangePersistent:isLastBlockChangePersistent,__unstableIsLastBlockChangeIgnored:__unstableIsLastBlockChangeIgnored,areInnerBlocksControlled:areInnerBlocksControlled}=registry.select(_store__WEBPACK_IMPORTED_MODULE_1__.h);let blocks=getBlocks(clientId),isPersistent=isLastBlockChangePersistent(),previousAreBlocksDifferent=!1;subscribed.current=!0;const unsubscribe=registry.subscribe((()=>{if(null!==clientId&&null===getBlockName(clientId))return;if(!(!clientId||areInnerBlocksControlled(clientId)))return;const newIsPersistent=isLastBlockChangePersistent(),newBlocks=getBlocks(clientId),areBlocksDifferent=newBlocks!==blocks;if(blocks=newBlocks,areBlocksDifferent&&(pendingChanges.current.incoming||__unstableIsLastBlockChangeIgnored()))return pendingChanges.current.incoming=null,void(isPersistent=newIsPersistent);if(areBlocksDifferent||previousAreBlocksDifferent&&!areBlocksDifferent&&newIsPersistent&&!isPersistent){isPersistent=newIsPersistent,pendingChanges.current.outgoing.push(blocks);(isPersistent?onChangeRef.current:onInputRef.current)(blocks,{selection:{selectionStart:getSelectionStart(),selectionEnd:getSelectionEnd(),initialPosition:getSelectedBlocksInitialCaretPosition()}})}previousAreBlocksDifferent=areBlocksDifferent}));return()=>unsubscribe()}),[registry,clientId])}},"./packages/block-editor/src/components/use-setting/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useSetting}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/lodash.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_hooks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/hooks/build-module/index.js"),_block_edit__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/block-editor/src/components/block-edit/context.js"),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/store/index.js");const blockedPaths=["color","border","dimensions","typography","spacing"],deprecatedFlags={"color.palette":settings=>settings.colors,"color.gradients":settings=>settings.gradients,"color.custom":settings=>void 0===settings.disableCustomColors?void 0:!settings.disableCustomColors,"color.customGradient":settings=>void 0===settings.disableCustomGradients?void 0:!settings.disableCustomGradients,"typography.fontSizes":settings=>settings.fontSizes,"typography.customFontSize":settings=>void 0===settings.disableCustomFontSizes?void 0:!settings.disableCustomFontSizes,"typography.lineHeight":settings=>settings.enableCustomLineHeight,"spacing.units":settings=>{if(void 0!==settings.enableCustomUnits)return!0===settings.enableCustomUnits?["px","em","rem","vh","vw","%"]:settings.enableCustomUnits},"spacing.padding":settings=>settings.enableCustomSpacing},prefixedFlags={"border.customColor":"border.color","border.customStyle":"border.style","border.customWidth":"border.width","typography.customFontStyle":"typography.fontStyle","typography.customFontWeight":"typography.fontWeight","typography.customLetterSpacing":"typography.letterSpacing","typography.customTextDecorations":"typography.textDecoration","typography.customTextTransforms":"typography.textTransform","border.customRadius":"border.radius","spacing.customMargin":"spacing.margin","spacing.customPadding":"spacing.padding","typography.customLineHeight":"typography.lineHeight"};function useSetting(path){const{name:blockName,clientId:clientId}=(0,_block_edit__WEBPACK_IMPORTED_MODULE_4__.Z8)();return(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.Z)((select=>{if(blockedPaths.includes(path))return void console.warn("Top level useSetting paths are disabled. Please use a subpath to query the information needed.");let result=(0,_wordpress_hooks__WEBPACK_IMPORTED_MODULE_2__.O)("blockEditor.useSetting.before",void 0,path,clientId,blockName);if(void 0!==result)return result;const normalizedPath=(path=>prefixedFlags[path]||path)(path),candidates=[clientId,...select(_store__WEBPACK_IMPORTED_MODULE_3__.h).getBlockParents(clientId,!0)];for(const candidateClientId of candidates){const candidateBlockName=select(_store__WEBPACK_IMPORTED_MODULE_3__.h).getBlockName(candidateClientId);if((0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__.zb)(candidateBlockName,"__experimentalSettings",!1)){var _get;const candidateAtts=select(_store__WEBPACK_IMPORTED_MODULE_3__.h).getBlockAttributes(candidateClientId);if(result=null!==(_get=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(candidateAtts,`settings.blocks.${blockName}.${normalizedPath}`))&&void 0!==_get?_get:(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(candidateAtts,`settings.${normalizedPath}`),void 0!==result)break}}const settings=select(_store__WEBPACK_IMPORTED_MODULE_3__.h).getSettings();if(void 0===result){var _get2;const defaultsPath=`__experimentalFeatures.${normalizedPath}`,blockPath=`__experimentalFeatures.blocks.${blockName}.${normalizedPath}`;result=null!==(_get2=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(settings,blockPath))&&void 0!==_get2?_get2:(0,lodash__WEBPACK_IMPORTED_MODULE_0__.get)(settings,defaultsPath)}var _ref,_result$custom;if(void 0!==result)return _wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__.yg[normalizedPath]?null!==(_ref=null!==(_result$custom=result.custom)&&void 0!==_result$custom?_result$custom:result.theme)&&void 0!==_ref?_ref:result.default:result;const deprecatedSettingsValue=deprecatedFlags[normalizedPath]?deprecatedFlags[normalizedPath](settings):void 0;return void 0!==deprecatedSettingsValue?deprecatedSettingsValue:"typography.dropCap"===normalizedPath||void 0}),[blockName,clientId,path])}},"./node_modules/reakit-utils/es/canUseDOM.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{N:function(){return canUseDOM}});var _getWindow_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/reakit-utils/es/getWindow.js");var canUseDOM=function checkIsBrowser(){var _window=(0,_getWindow_js__WEBPACK_IMPORTED_MODULE_0__.J)();return Boolean(void 0!==_window&&_window.document&&_window.document.createElement)}()},"./node_modules/reakit-utils/es/dom.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{N:function(){return isUA}});var _canUseDOM_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/reakit-utils/es/canUseDOM.js");function isUA(string){return!!_canUseDOM_js__WEBPACK_IMPORTED_MODULE_0__.N&&-1!==window.navigator.userAgent.indexOf(string)}},"./node_modules/reakit-utils/es/getDocument.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function getDocument(element){return element?element.ownerDocument||element:document}__webpack_require__.d(__webpack_exports__,{M:function(){return getDocument}})},"./node_modules/reakit-utils/es/getWindow.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{J:function(){return getWindow}});var _window,_getDocument_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/reakit-utils/es/getDocument.js");try{_window=window}catch(e){}function getWindow(element){return element&&(0,_getDocument_js__WEBPACK_IMPORTED_MODULE_0__.M)(element).defaultView||_window}},"./node_modules/reakit-utils/es/isSelfTarget.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function isSelfTarget(event){return event.target===event.currentTarget}__webpack_require__.d(__webpack_exports__,{U:function(){return isSelfTarget}})},"./node_modules/reakit-utils/es/useForkRef.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{c:function(){return useForkRef}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function setRef(ref,value){void 0===value&&(value=null),ref&&("function"==typeof ref?ref(value):ref.current=value)}function useForkRef(refA,refB){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return null==refA&&null==refB?null:function(value){setRef(refA,value),setRef(refB,value)}}),[refA,refB])}},"./node_modules/reakit-utils/es/useIsomorphicEffect.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Y:function(){return useIsomorphicEffect}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),useIsomorphicEffect=__webpack_require__("./node_modules/reakit-utils/es/canUseDOM.js").N?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect},"./node_modules/reakit-utils/es/useLiveRef.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{c:function(){return useLiveRef}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_useIsomorphicEffect_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/reakit-utils/es/useIsomorphicEffect.js");function useLiveRef(value){var ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(value);return(0,_useIsomorphicEffect_js__WEBPACK_IMPORTED_MODULE_1__.Y)((function(){ref.current=value})),ref}},"./node_modules/reakit-utils/es/useSealedState.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{T:function(){return useSealedState}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useSealedState(initialState){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialState)[0]}},"./node_modules/reakit-warning/es/index.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){__webpack_require__("./node_modules/react/index.js")},"./node_modules/reakit/es/Id/IdProvider.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{U:function(){return unstable_IdContext}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function generateRandomString(prefix){return void 0===prefix&&(prefix="id"),(prefix?prefix+"-":"")+Math.random().toString(32).substr(2,6)}var unstable_IdContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(generateRandomString)},"./node_modules/reakit/es/Id/IdState.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{C:function(){return unstable_useIdState}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),reakit_utils_useSealedState__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/reakit-utils/es/useSealedState.js"),_IdProvider_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/reakit/es/Id/IdProvider.js");function unstable_useIdState(initialState){void 0===initialState&&(initialState={});var initialBaseId=(0,reakit_utils_useSealedState__WEBPACK_IMPORTED_MODULE_1__.T)(initialState).baseId,generateId=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_IdProvider_js__WEBPACK_IMPORTED_MODULE_2__.U),idCountRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),_React$useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((function(){return initialBaseId||generateId()}));return{baseId:_React$useState[0],setBaseId:_React$useState[1],unstable_idCountRef:idCountRef}}},"./packages/block-editor/src/components/inserter/stories/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return stories},libraryWithPatterns:function(){return libraryWithPatterns},libraryWithPatternsAndReusableBlocks:function(){return libraryWithPatternsAndReusableBlocks},libraryWithoutPatterns:function(){return libraryWithoutPatterns},quickInserter:function(){return quickInserter}});var use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),react=__webpack_require__("./node_modules/react/index.js"),node_modules_classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(node_modules_classnames),component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),search_control=__webpack_require__("./packages/components/build-module/search-control/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),create_interpolate_element=__webpack_require__("./packages/element/build-module/create-interpolate-element.js"),tip=__webpack_require__("./packages/components/build-module/tip/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const globalTips=[(0,create_interpolate_element.Z)((0,build_module.__)("While writing, you can press <kbd>/</kbd> to quickly insert new blocks."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,create_interpolate_element.Z)((0,build_module.__)("Indent a list by pressing <kbd>space</kbd> at the beginning of a line."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,create_interpolate_element.Z)((0,build_module.__)("Outdent a list by pressing <kbd>backspace</kbd> at the beginning of a line."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,build_module.__)("Drag files into the editor to automatically insert media blocks."),(0,build_module.__)("Change a block's type by pressing the block icon on the toolbar.")];function Tips(){const[randomIndex]=(0,react.useState)(Math.floor(Math.random()*globalTips.length));return(0,jsx_runtime.jsx)(tip.Z,{children:globalTips[randomIndex]})}Tips.displayName="Tips",Tips.__docgenInfo={description:"",methods:[],displayName:"Tips"};var tips=Tips;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/tips.js"]={name:"Tips",docgenInfo:Tips.__docgenInfo,path:"packages/block-editor/src/components/inserter/tips.js"});var blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),chevron_right=__webpack_require__("./packages/icons/build-module/library/chevron-right.js"),chevron_left=__webpack_require__("./packages/icons/build-module/library/chevron-left.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),block_icon=__webpack_require__("./packages/block-editor/src/components/block-icon/index.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js");function BlockCard(_ref){var _window;let{title:title,icon:icon,description:description,blockType:blockType,className:className}=_ref;blockType&&((0,deprecated_build_module.Z)("`blockType` property in `BlockCard component`",{since:"5.7",alternative:"`title, icon and description` properties"}),({title:title,icon:icon,description:description}=blockType));const isOffCanvasNavigationEditorEnabled=!0===(null===(_window=window)||void 0===_window?void 0:_window.__experimentalEnableOffCanvasNavigationEditor),{parentNavBlockClientId:parentNavBlockClientId}=(0,use_select.Z)((select=>{const{getSelectedBlockClientId:getSelectedBlockClientId,getBlockParentsByBlockName:getBlockParentsByBlockName}=select(store.h);return{parentNavBlockClientId:getBlockParentsByBlockName(getSelectedBlockClientId(),"core/navigation",!0)[0]}}),[]),{selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h);return(0,jsx_runtime.jsxs)("div",{className:classnames_default()("block-editor-block-card",className),children:[isOffCanvasNavigationEditorEnabled&&parentNavBlockClientId&&(0,jsx_runtime.jsx)(build_module_button.Z,{onClick:()=>selectBlock(parentNavBlockClientId),label:(0,build_module.__)("Go to parent Navigation block"),style:{minWidth:24,padding:0},icon:(0,build_module.dZ)()?chevron_right.Z:chevron_left.Z,isSmall:!0}),(0,jsx_runtime.jsx)(block_icon.Z,{icon:icon,showColors:!0}),(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-card__content",children:[(0,jsx_runtime.jsx)("h2",{className:"block-editor-block-card__title",children:title}),(0,jsx_runtime.jsx)("span",{className:"block-editor-block-card__description",children:description})]})]})}BlockCard.displayName="BlockCard",BlockCard.__docgenInfo={description:"",methods:[],displayName:"BlockCard"};var block_card=BlockCard;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-card/index.js"]={name:"BlockCard",docgenInfo:BlockCard.__docgenInfo,path:"packages/block-editor/src/components/block-card/index.js"});var provider=__webpack_require__("./packages/block-editor/src/components/provider/index.js"),use_resize_observer=__webpack_require__("./packages/compose/build-module/hooks/use-resize-observer/index.js"),pure=__webpack_require__("./packages/compose/build-module/higher-order/pure/index.js"),use_ref_effect=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),disabled=__webpack_require__("./packages/components/build-module/disabled/index.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),context=__webpack_require__("./packages/data/build-module/components/async-mode-provider/context.js"),use_viewport_match=__webpack_require__("./packages/compose/build-module/hooks/use-viewport-match/index.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),raw_html=__webpack_require__("./packages/element/build-module/raw-html.js"),with_filters=__webpack_require__("./packages/components/build-module/higher-order/with-filters/index.js"),with_select=__webpack_require__("./packages/data/build-module/components/with-select/index.js"),with_dispatch=__webpack_require__("./packages/data/build-module/components/with-dispatch/index.js"),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),if_condition=__webpack_require__("./packages/compose/build-module/higher-order/if-condition/index.js"),safe_html=__webpack_require__("./packages/dom/build-module/dom/safe-html.js");const Context=(0,react.createContext)({});function BlockContextProvider(_ref){let{value:value,children:children}=_ref;const context=(0,react.useContext)(Context),nextValue=(0,react.useMemo)((()=>({...context,...value})),[context,value]);return(0,jsx_runtime.jsx)(Context.Provider,{value:nextValue,children:children})}BlockContextProvider.displayName="BlockContextProvider";var block_context=Context;BlockContextProvider.__docgenInfo={description:"Component which merges passed value with current consumed block context.\n\n@see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-context/README.md\n\n@param {BlockContextProviderProps} props",methods:[],displayName:"BlockContextProvider"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-context/index.js"]={name:"BlockContextProvider",docgenInfo:BlockContextProvider.__docgenInfo,path:"packages/block-editor/src/components/block-context/index.js"});const DEFAULT_BLOCK_CONTEXT={},Edit=props=>{const{attributes:attributes={},name:name}=props,blockType=(0,blocks_build_module.ck)(name),blockContext=(0,react.useContext)(block_context),context=(0,react.useMemo)((()=>blockType&&blockType.usesContext?Object.fromEntries(Object.entries(blockContext).filter((_ref=>{let[key]=_ref;return blockType.usesContext.includes(key)}))):DEFAULT_BLOCK_CONTEXT),[blockType,blockContext]);if(!blockType)return null;const Component=blockType.edit||blockType.save;if(blockType.apiVersion>1)return(0,jsx_runtime.jsx)(Component,{...props,context:context});const generatedClassName=(0,blocks_build_module.zb)(blockType,"className",!0)?(0,blocks_build_module.Vk)(name):null,className=classnames_default()(generatedClassName,attributes.className,props.className);return(0,jsx_runtime.jsx)(Component,{...props,context:context,className:className})};Edit.displayName="Edit",Edit.__docgenInfo={description:"",methods:[],displayName:"Edit"};var edit=(0,with_filters.Z)("editor.BlockEdit")(Edit);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-edit/edit.js"]={name:"Edit",docgenInfo:Edit.__docgenInfo,path:"packages/block-editor/src/components/block-edit/edit.js"});var block_edit_context=__webpack_require__("./packages/block-editor/src/components/block-edit/context.js");function BlockEdit(props){const{name:name,isSelected:isSelected,clientId:clientId,__unstableLayoutClassNames:__unstableLayoutClassNames}=props,context={name:name,isSelected:isSelected,clientId:clientId,__unstableLayoutClassNames:__unstableLayoutClassNames};return(0,jsx_runtime.jsx)(block_edit_context.Q2,{value:(0,react.useMemo)((()=>context),Object.values(context)),children:(0,jsx_runtime.jsx)(edit,{...props})})}BlockEdit.displayName="BlockEdit",BlockEdit.__docgenInfo={description:"",methods:[],displayName:"BlockEdit"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-edit/index.js"]={name:"BlockEdit",docgenInfo:BlockEdit.__docgenInfo,path:"packages/block-editor/src/components/block-edit/index.js"});var modal=__webpack_require__("./packages/components/build-module/modal/index.js"),dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),menu_group=__webpack_require__("./packages/components/build-module/menu-group/index.js"),menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js"),more_horizontal=__webpack_require__("./packages/icons/build-module/library/more-horizontal.js");function Warning(_ref){let{className:className,actions:actions,children:children,secondaryActions:secondaryActions}=_ref;return(0,jsx_runtime.jsx)("div",{style:{display:"contents",all:"initial"},children:(0,jsx_runtime.jsx)("div",{className:classnames_default()(className,"block-editor-warning"),children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-warning__contents",children:[(0,jsx_runtime.jsx)("p",{className:"block-editor-warning__message",children:children}),(react.Children.count(actions)>0||secondaryActions)&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-warning__actions",children:[react.Children.count(actions)>0&&react.Children.map(actions,((action,i)=>(0,jsx_runtime.jsx)("span",{className:"block-editor-warning__action",children:action},i))),secondaryActions&&(0,jsx_runtime.jsx)(dropdown_menu.Z,{className:"block-editor-warning__secondary",icon:more_horizontal.Z,label:(0,build_module.__)("More options"),popoverProps:{position:"bottom left",className:"block-editor-warning__dropdown"},noIcons:!0,children:()=>(0,jsx_runtime.jsx)(menu_group.Z,{children:secondaryActions.map(((item,pos)=>(0,jsx_runtime.jsx)(menu_item.Z,{onClick:item.onClick,children:item.title},pos)))})})]})]})})})}Warning.displayName="Warning",Warning.__docgenInfo={description:"",methods:[],displayName:"Warning"};var warning=Warning;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/warning/index.js"]={name:"Warning",docgenInfo:Warning.__docgenInfo,path:"packages/block-editor/src/components/warning/index.js"});var character=__webpack_require__("./node_modules/diff/lib/diff/character.js");function BlockView(_ref){let{title:title,rawContent:rawContent,renderedContent:renderedContent,action:action,actionText:actionText,className:className}=_ref;return(0,jsx_runtime.jsxs)("div",{className:className,children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-compare__content",children:[(0,jsx_runtime.jsx)("h2",{className:"block-editor-block-compare__heading",children:title}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__html",children:rawContent}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__preview edit-post-visual-editor",children:(0,jsx_runtime.jsx)(raw_html.Z,{children:(0,safe_html.Z)(renderedContent)})})]}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__action",children:(0,jsx_runtime.jsx)(build_module_button.Z,{variant:"secondary",tabIndex:"0",onClick:action,children:actionText})})]})}function BlockCompare(_ref){let{block:block,onKeep:onKeep,onConvert:onConvert,convertor:convertor,convertButtonText:convertButtonText}=_ref;const converted=function getConvertedContent(convertedBlock){return(Array.isArray(convertedBlock)?convertedBlock:[convertedBlock]).map((item=>(0,blocks_build_module.kD)(item.name,item.attributes,item.innerBlocks))).join("")}(convertor(block)),difference=function getDifference(originalContent,newContent){return(0,character.Kx)(originalContent,newContent).map(((item,pos)=>{const classes=classnames_default()({"block-editor-block-compare__added":item.added,"block-editor-block-compare__removed":item.removed});return(0,jsx_runtime.jsx)("span",{className:classes,children:item.value},pos)}))}(block.originalContent,converted);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-compare__wrapper",children:[(0,jsx_runtime.jsx)(BlockView,{title:(0,build_module.__)("Current"),className:"block-editor-block-compare__current",action:onKeep,actionText:(0,build_module.__)("Convert to HTML"),rawContent:block.originalContent,renderedContent:block.originalContent}),(0,jsx_runtime.jsx)(BlockView,{title:(0,build_module.__)("After Conversion"),className:"block-editor-block-compare__converted",action:onConvert,actionText:convertButtonText,rawContent:difference,renderedContent:converted})]})}BlockView.displayName="BlockView",BlockView.__docgenInfo={description:"",methods:[],displayName:"BlockView"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-compare/block-view.js"]={name:"BlockView",docgenInfo:BlockView.__docgenInfo,path:"packages/block-editor/src/components/block-compare/block-view.js"}),BlockCompare.displayName="BlockCompare",BlockCompare.__docgenInfo={description:"",methods:[],displayName:"BlockCompare"};var block_compare=BlockCompare;function BlockInvalidWarning(_ref){let{convertToHTML:convertToHTML,convertToBlocks:convertToBlocks,convertToClassic:convertToClassic,attemptBlockRecovery:attemptBlockRecovery,block:block}=_ref;const hasHTMLBlock=!!(0,blocks_build_module.ck)("core/html"),[compare,setCompare]=(0,react.useState)(!1),onCompare=(0,react.useCallback)((()=>setCompare(!0)),[]),onCompareClose=(0,react.useCallback)((()=>setCompare(!1)),[]),hiddenActions=(0,react.useMemo)((()=>[{title:(0,build_module._x)("Resolve","imperative verb"),onClick:onCompare},hasHTMLBlock&&{title:(0,build_module.__)("Convert to HTML"),onClick:convertToHTML},{title:(0,build_module.__)("Convert to Classic Block"),onClick:convertToClassic}].filter(Boolean)),[onCompare,convertToHTML,convertToClassic]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(warning,{actions:[(0,jsx_runtime.jsx)(build_module_button.Z,{onClick:attemptBlockRecovery,variant:"primary",children:(0,build_module.__)("Attempt Block Recovery")},"recover")],secondaryActions:hiddenActions,children:(0,build_module.__)("This block contains unexpected or invalid content.")}),compare&&(0,jsx_runtime.jsx)(modal.Z,{title:(0,build_module.__)("Resolve Block"),onRequestClose:onCompareClose,className:"block-editor-block-compare",children:(0,jsx_runtime.jsx)(block_compare,{block:block,onKeep:convertToHTML,onConvert:convertToBlocks,convertor:blockToBlocks,convertButtonText:(0,build_module.__)("Convert to Blocks")})})]})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-compare/index.js"]={name:"BlockCompare",docgenInfo:BlockCompare.__docgenInfo,path:"packages/block-editor/src/components/block-compare/index.js"});const blockToBlocks=block=>(0,blocks_build_module.AF)({HTML:block.originalContent});BlockInvalidWarning.__docgenInfo={description:"",methods:[],displayName:"BlockInvalidWarning"};var block_invalid_warning=(0,compose.Z)([(0,with_select.Z)(((select,_ref3)=>{let{clientId:clientId}=_ref3;return{block:select(store.h).getBlock(clientId)}})),(0,with_dispatch.Z)(((dispatch,_ref4)=>{let{block:block}=_ref4;const{replaceBlock:replaceBlock}=dispatch(store.h);return{convertToClassic(){replaceBlock(block.clientId,(block=>(0,blocks_build_module.j4)("core/freeform",{content:block.originalContent}))(block))},convertToHTML(){replaceBlock(block.clientId,(block=>(0,blocks_build_module.j4)("core/html",{content:block.originalContent}))(block))},convertToBlocks(){replaceBlock(block.clientId,blockToBlocks(block))},attemptBlockRecovery(){replaceBlock(block.clientId,(_ref2=>{let{name:name,attributes:attributes,innerBlocks:innerBlocks}=_ref2;return(0,blocks_build_module.j4)(name,attributes,innerBlocks)})(block))}}}))])(BlockInvalidWarning);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/block-invalid-warning.js"]={name:"BlockInvalidWarning",docgenInfo:BlockInvalidWarning.__docgenInfo,path:"packages/block-editor/src/components/block-list/block-invalid-warning.js"});const block_crash_warning_warning=(0,jsx_runtime.jsx)(warning,{className:"block-editor-block-list__block-crash-warning",children:(0,build_module.__)("This block has encountered an error and cannot be previewed.")});var block_crash_warning=()=>block_crash_warning_warning;class BlockCrashBoundary extends react.Component{constructor(){super(...arguments),this.state={hasError:!1}}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?this.props.fallback:this.props.children}}BlockCrashBoundary.displayName="BlockCrashBoundary",BlockCrashBoundary.__docgenInfo={description:"",methods:[],displayName:"BlockCrashBoundary"};var block_crash_boundary=BlockCrashBoundary;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/block-crash-boundary.js"]={name:"BlockCrashBoundary",docgenInfo:BlockCrashBoundary.__docgenInfo,path:"packages/block-editor/src/components/block-list/block-crash-boundary.js"});var lib=__webpack_require__("./node_modules/react-autosize-textarea/lib/index.js");function BlockHTML(_ref){let{clientId:clientId}=_ref;const[html,setHtml]=(0,react.useState)(""),block=(0,use_select.Z)((select=>select(store.h).getBlock(clientId)),[clientId]),{updateBlock:updateBlock}=(0,use_dispatch.Z)(store.h);return(0,react.useEffect)((()=>{setHtml((0,blocks_build_module.Jo)(block))}),[block]),(0,jsx_runtime.jsx)(lib.Z,{className:"block-editor-block-list__block-html-textarea",value:html,onBlur:()=>{const blockType=(0,blocks_build_module.ck)(block.name);if(!blockType)return;const attributes=(0,blocks_build_module.DJ)(blockType,html,block.attributes),content=html||(0,blocks_build_module.kD)(blockType,attributes),[isValid]=html?(0,blocks_build_module.lM)({...block,attributes:attributes,originalContent:content}):[!0];updateBlock(clientId,{attributes:attributes,originalContent:content,isValid:isValid}),html||setHtml({content:content})},onChange:event=>setHtml(event.target.value)})}BlockHTML.displayName="BlockHTML",BlockHTML.__docgenInfo={description:"",methods:[],displayName:"BlockHTML"};var block_html=BlockHTML;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/block-html.js"]={name:"BlockHTML",docgenInfo:BlockHTML.__docgenInfo,path:"packages/block-editor/src/components/block-list/block-html.js"});var use_disabled=__webpack_require__("./packages/compose/build-module/hooks/use-disabled/index.js"),react_spring_web_esm=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),use_reduced_motion=__webpack_require__("./packages/compose/build-module/hooks/use-reduced-motion/index.js"),get_scroll_container=__webpack_require__("./packages/dom/build-module/dom/get-scroll-container.js");const counterReducer=state=>state+1,getAbsolutePosition=element=>({top:element.offsetTop,left:element.offsetLeft});var use_moving_animation=function useMovingAnimation(_ref){let{isSelected:isSelected,adjustScrolling:adjustScrolling,enableAnimation:enableAnimation,triggerAnimationOnChange:triggerAnimationOnChange}=_ref;const ref=(0,react.useRef)(),prefersReducedMotion=(0,use_reduced_motion.Z)()||!enableAnimation,[triggeredAnimation,triggerAnimation]=(0,react.useReducer)(counterReducer,0),[finishedAnimation,endAnimation]=(0,react.useReducer)(counterReducer,0),[transform,setTransform]=(0,react.useState)({x:0,y:0}),previous=(0,react.useMemo)((()=>ref.current?getAbsolutePosition(ref.current):null),[triggerAnimationOnChange]),preserveScrollPosition=(0,react.useMemo)((()=>{if(!adjustScrolling||!ref.current)return()=>{};const scrollContainer=(0,get_scroll_container.Z)(ref.current);if(!scrollContainer)return()=>{};const prevRect=ref.current.getBoundingClientRect();return()=>{const diff=ref.current.getBoundingClientRect().top-prevRect.top;diff&&(scrollContainer.scrollTop+=diff)}}),[triggerAnimationOnChange,adjustScrolling]);return(0,react.useLayoutEffect)((()=>{triggeredAnimation&&endAnimation()}),[triggeredAnimation]),(0,react.useLayoutEffect)((()=>{if(!previous)return;if(prefersReducedMotion)return void preserveScrollPosition();ref.current.style.transform=void 0;const destination=getAbsolutePosition(ref.current);triggerAnimation(),setTransform({x:Math.round(previous.left-destination.left),y:Math.round(previous.top-destination.top)})}),[triggerAnimationOnChange]),(0,react_spring_web_esm.useSpring)({from:{x:transform.x,y:transform.y},to:{x:0,y:0},reset:triggeredAnimation!==finishedAnimation,config:{mass:5,tension:2e3,friction:200},immediate:prefersReducedMotion,onChange:function onChange(_ref2){let{value:value}=_ref2;if(!ref.current)return;let{x:x,y:y}=value;x=Math.round(x),y=Math.round(y);const finishedMoving=0===x&&0===y;ref.current.style.transformOrigin="center center",ref.current.style.transform=finishedMoving?void 0:`translate3d(${x}px,${y}px,0)`,ref.current.style.zIndex=isSelected?"1":"",preserveScrollPosition()}}),ref},dom_build_module=__webpack_require__("./packages/dom/build-module/index.js"),is_text_field=__webpack_require__("./packages/dom/build-module/dom/is-text-field.js"),is_form_element=__webpack_require__("./packages/dom/build-module/dom/is-form-element.js"),place_caret_at_horizontal_edge=__webpack_require__("./packages/dom/build-module/dom/place-caret-at-horizontal-edge.js");const BLOCK_SELECTOR=".block-editor-block-list__block",APPENDER_SELECTOR=".block-list-appender",BLOCK_APPENDER_CLASS=".block-editor-button-block-appender";function isInsideRootBlock(blockElement,element){return element.closest([BLOCK_SELECTOR,APPENDER_SELECTOR,BLOCK_APPENDER_CLASS].join(","))===blockElement}function getBlockClientId(node){for(;node&&node.nodeType!==node.ELEMENT_NODE;)node=node.parentNode;if(!node)return;const blockNode=node.closest(BLOCK_SELECTOR);return blockNode?blockNode.id.slice("block-".length):void 0}function useFocusFirstElement(clientId){const ref=(0,react.useRef)(),initialPosition=function useInitialPosition(clientId){return(0,use_select.Z)((select=>{const{getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,__unstableGetEditorMode:__unstableGetEditorMode,isBlockSelected:isBlockSelected}=select(store.h);if(isBlockSelected(clientId)&&"edit"===__unstableGetEditorMode())return getSelectedBlocksInitialCaretPosition()}),[clientId])}(clientId),{isBlockSelected:isBlockSelected,isMultiSelecting:isMultiSelecting}=(0,use_select.Z)(store.h);return(0,react.useEffect)((()=>{if(!isBlockSelected(clientId)||isMultiSelecting())return;if(null==initialPosition)return;if(!ref.current)return;const{ownerDocument:ownerDocument}=ref.current;if(isInsideRootBlock(ref.current,ownerDocument.activeElement))return;const textInputs=dom_build_module.T_.tabbable.find(ref.current).filter((node=>(0,is_text_field.Z)(node))),isReverse=-1===initialPosition,target=textInputs[isReverse?textInputs.length-1:0]||ref.current;if(isInsideRootBlock(ref.current,target)){if(!ref.current.getAttribute("contenteditable")){const focusElement=dom_build_module.T_.tabbable.findNext(ref.current);if(focusElement&&isInsideRootBlock(ref.current,focusElement)&&(0,is_form_element.Z)(focusElement))return void focusElement.focus()}(0,place_caret_at_horizontal_edge.Z)(target,isReverse)}else ref.current.focus()}),[initialPosition,clientId]),ref}function listener(event){if(event.defaultPrevented)return;const action="mouseover"===event.type?"add":"remove";event.preventDefault(),event.currentTarget.classList[action]("is-hovered")}function useIsHovered(){const isEnabled=(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store.h);return getSettings().outlineMode}),[]);return(0,use_ref_effect.Z)((node=>{if(isEnabled)return node.addEventListener("mouseout",listener),node.addEventListener("mouseover",listener),()=>{node.removeEventListener("mouseout",listener),node.removeEventListener("mouseover",listener),node.classList.remove("is-hovered")}}),[isEnabled])}function useBlockClassNames(clientId){return(0,use_select.Z)((select=>{const{isBlockBeingDragged:isBlockBeingDragged,isBlockHighlighted:isBlockHighlighted,isBlockSelected:isBlockSelected,isBlockMultiSelected:isBlockMultiSelected,getBlockName:getBlockName,getSettings:getSettings,hasSelectedInnerBlock:hasSelectedInnerBlock,isTyping:isTyping,__unstableIsFullySelected:__unstableIsFullySelected,__unstableSelectionHasUnmergeableBlock:__unstableSelectionHasUnmergeableBlock}=select(store.h),{outlineMode:outlineMode}=getSettings(),isDragging=isBlockBeingDragged(clientId),isSelected=isBlockSelected(clientId),name=getBlockName(clientId),isAncestorOfSelectedBlock=hasSelectedInnerBlock(clientId,!0),isMultiSelected=isBlockMultiSelected(clientId);return classnames_default()({"is-selected":isSelected,"is-highlighted":isBlockHighlighted(clientId),"is-multi-selected":isMultiSelected,"is-partially-selected":isMultiSelected&&!__unstableIsFullySelected()&&!__unstableSelectionHasUnmergeableBlock(),"is-reusable":(0,blocks_build_module.vr)((0,blocks_build_module.ck)(name)),"is-dragging":isDragging,"has-child-selected":isAncestorOfSelectedBlock,"remove-outline":isSelected&&outlineMode&&isTyping()})}),[clientId])}function useBlockDefaultClassName(clientId){return(0,use_select.Z)((select=>{const name=select(store.h).getBlockName(clientId),blockType=(0,blocks_build_module.ck)(name);if((null==blockType?void 0:blockType.apiVersion)>1)return(0,blocks_build_module.Vk)(name)}),[clientId])}function useBlockCustomClassName(clientId){return(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(store.h),attributes=getBlockAttributes(clientId);if(null==attributes||!attributes.className)return;const blockType=(0,blocks_build_module.ck)(getBlockName(clientId));return(null==blockType?void 0:blockType.apiVersion)>1?attributes.className:void 0}),[clientId])}function useBlockMovingModeClassNames(clientId){return(0,use_select.Z)((select=>{const{hasBlockMovingClientId:hasBlockMovingClientId,canInsertBlockType:canInsertBlockType,getBlockName:getBlockName,getBlockRootClientId:getBlockRootClientId,isBlockSelected:isBlockSelected}=select(store.h);if(!isBlockSelected(clientId))return;const movingClientId=hasBlockMovingClientId();return movingClientId?classnames_default()("is-block-moving-mode",{"can-insert-moving-block":canInsertBlockType(getBlockName(movingClientId),getBlockRootClientId(clientId))}):void 0}),[clientId])}function useFocusHandler(clientId){const{isBlockSelected:isBlockSelected}=(0,use_select.Z)(store.h),{selectBlock:selectBlock,selectionChange:selectionChange}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{function onFocus(event){node.parentElement.closest('[contenteditable="true"]')||(isBlockSelected(clientId)?event.target.isContentEditable||selectionChange(clientId):isInsideRootBlock(node,event.target)&&selectBlock(clientId))}return node.addEventListener("focusin",onFocus),()=>{node.removeEventListener("focusin",onFocus)}}),[isBlockSelected,selectBlock])}var keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js");function useEventHandlers(clientId){const isSelected=(0,use_select.Z)((select=>select(store.h).isBlockSelected(clientId)),[clientId]),{getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex}=(0,use_select.Z)(store.h),{insertDefaultBlock:insertDefaultBlock,removeBlock:removeBlock}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{if(isSelected)return node.addEventListener("keydown",onKeyDown),node.addEventListener("dragstart",onDragStart),()=>{node.removeEventListener("keydown",onKeyDown),node.removeEventListener("dragstart",onDragStart)};function onKeyDown(event){const{keyCode:keyCode,target:target}=event;keyCode!==keycodes_build_module.K5&&keyCode!==keycodes_build_module.ZH&&keyCode!==keycodes_build_module.yY||target!==node||(0,is_text_field.Z)(target)||(event.preventDefault(),keyCode===keycodes_build_module.K5?insertDefaultBlock({},getBlockRootClientId(clientId),getBlockIndex(clientId)+1):removeBlock(clientId))}function onDragStart(event){event.preventDefault()}}),[clientId,isSelected,getBlockRootClientId,getBlockIndex,insertDefaultBlock,removeBlock])}function useNavModeExit(clientId){const{isNavigationMode:isNavigationMode,isBlockSelected:isBlockSelected}=(0,use_select.Z)(store.h),{setNavigationMode:setNavigationMode,selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{function onMouseDown(event){isNavigationMode()&&!event.defaultPrevented&&(event.preventDefault(),isBlockSelected(clientId)?setNavigationMode(!1):selectBlock(clientId))}return node.addEventListener("mousedown",onMouseDown),()=>{node.addEventListener("mousedown",onMouseDown)}}),[clientId,isNavigationMode,isBlockSelected,setNavigationMode])}var block_refs_provider=__webpack_require__("./packages/block-editor/src/components/provider/block-refs-provider.js");function useBlockRefProvider(clientId){const{refs:refs,callbacks:callbacks}=(0,react.useContext)(block_refs_provider.N),ref=(0,react.useRef)();return(0,react.useLayoutEffect)((()=>(refs.set(ref,clientId),()=>{refs.delete(ref)})),[clientId]),(0,use_ref_effect.Z)((element=>{ref.current=element,callbacks.forEach(((id,setElement)=>{clientId===id&&setElement(element)}))}),[clientId])}function useBlockRef(clientId){const{refs:refs}=(0,react.useContext)(block_refs_provider.N),freshClientId=(0,react.useRef)();return freshClientId.current=clientId,(0,react.useMemo)((()=>({get current(){let element=null;for(const[ref,id]of refs.entries())id===freshClientId.current&&ref.current&&(element=ref.current);return element}})),[])}function useBlockElement(clientId){const{callbacks:callbacks}=(0,react.useContext)(block_refs_provider.N),ref=useBlockRef(clientId),[element,setElement]=(0,react.useState)(null);return(0,react.useLayoutEffect)((()=>{if(clientId)return callbacks.set(setElement,clientId),()=>{callbacks.delete(setElement)}}),[clientId]),ref.current||element}function useIntersectionObserver(){const observer=(0,react.useContext)(IntersectionObserver);return(0,use_ref_effect.Z)((node=>{if(observer)return observer.observe(node),()=>{observer.unobserve(node)}}),[observer])}function useBlockOverlayActive(clientId){return(0,use_select.Z)((select=>{const{__unstableHasActiveBlockOverlayActive:__unstableHasActiveBlockOverlayActive}=select(store.h);return __unstableHasActiveBlockOverlayActive(clientId)}),[clientId])}var process=__webpack_require__("./node_modules/process/browser.js");function useBlockProps(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{__unstableIsHtml:__unstableIsHtml}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{clientId:clientId,className:className,wrapperProps:wrapperProps={},isAligned:isAligned}=(0,react.useContext)(BlockListBlockContext),{index:index,mode:mode,name:name,blockApiVersion:blockApiVersion,blockTitle:blockTitle,isPartOfSelection:isPartOfSelection,adjustScrolling:adjustScrolling,enableAnimation:enableAnimation}=(0,use_select.Z)((select=>{const{getBlockAttributes:getBlockAttributes,getBlockIndex:getBlockIndex,getBlockMode:getBlockMode,getBlockName:getBlockName,isTyping:isTyping,getGlobalBlockCount:getGlobalBlockCount,isBlockSelected:isBlockSelected,isBlockMultiSelected:isBlockMultiSelected,isAncestorMultiSelected:isAncestorMultiSelected,isFirstMultiSelectedBlock:isFirstMultiSelectedBlock}=select(store.h),{getActiveBlockVariation:getActiveBlockVariation}=select(blocks_build_module.h),isSelected=isBlockSelected(clientId),isPartOfMultiSelection=isBlockMultiSelected(clientId)||isAncestorMultiSelected(clientId),blockName=getBlockName(clientId),blockType=(0,blocks_build_module.ck)(blockName),match=getActiveBlockVariation(blockName,getBlockAttributes(clientId));return{index:getBlockIndex(clientId),mode:getBlockMode(clientId),name:blockName,blockApiVersion:(null==blockType?void 0:blockType.apiVersion)||1,blockTitle:(null==match?void 0:match.title)||(null==blockType?void 0:blockType.title),isPartOfSelection:isSelected||isPartOfMultiSelection,adjustScrolling:isSelected||isFirstMultiSelectedBlock(clientId),enableAnimation:!isTyping()&&getGlobalBlockCount()<=200}}),[clientId]),hasOverlay=useBlockOverlayActive(clientId),blockLabel=(0,build_module.gB)((0,build_module.__)("Block: %s"),blockTitle),htmlSuffix="html"!==mode||__unstableIsHtml?"":"-visual",mergedRefs=(0,use_merge_refs.Z)([props.ref,useFocusFirstElement(clientId),useBlockRefProvider(clientId),useFocusHandler(clientId),useEventHandlers(clientId),useNavModeExit(clientId),useIsHovered(),useIntersectionObserver(),use_moving_animation({isSelected:isPartOfSelection,adjustScrolling:adjustScrolling,enableAnimation:enableAnimation,triggerAnimationOnChange:index}),(0,use_disabled.Z)({isDisabled:!hasOverlay})]),blockEditContext=(0,block_edit_context.Z8)();return blockApiVersion<2&&clientId===blockEditContext.clientId&&void 0!==process&&process.env,{tabIndex:0,...wrapperProps,...props,ref:mergedRefs,id:`block-${clientId}${htmlSuffix}`,role:"document","aria-label":blockLabel,"data-block":clientId,"data-type":name,"data-title":blockTitle,className:classnames_default()(classnames_default()("block-editor-block-list__block",{"wp-block":!isAligned,"has-block-overlay":hasOverlay}),className,props.className,wrapperProps.className,useBlockClassNames(clientId),useBlockDefaultClassName(clientId),useBlockCustomClassName(clientId),useBlockMovingModeClassNames(clientId)),style:{...wrapperProps.style,...props.style}}}useBlockProps.save=blocks_build_module.dF;var justify_left=__webpack_require__("./packages/icons/build-module/library/justify-left.js"),justify_center=__webpack_require__("./packages/icons/build-module/library/justify-center.js"),justify_right=__webpack_require__("./packages/icons/build-module/library/justify-right.js"),justify_space_between=__webpack_require__("./packages/icons/build-module/library/justify-space-between.js"),arrow_right=__webpack_require__("./packages/icons/build-module/library/arrow-right.js"),arrow_down=__webpack_require__("./packages/icons/build-module/library/arrow-down.js"),flex_component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),flex_item_component=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),toggle_group_control_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control/component.js"),toggle_group_control_option_icon_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option-icon/component.js"),toggle_control=__webpack_require__("./packages/components/build-module/toggle-control/index.js");function appendSelectors(selectors){let append=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return selectors.split(",").map((subselector=>`.editor-styles-wrapper ${subselector}${append?` ${append}`:""}`)).join(",")}function getBlockGapCSS(selector,layoutDefinitions,layoutType,blockGapValue){var _layoutDefinitions$la,_layoutDefinitions$la2;let output="";return null!=layoutDefinitions&&null!==(_layoutDefinitions$la=layoutDefinitions[layoutType])&&void 0!==_layoutDefinitions$la&&null!==(_layoutDefinitions$la2=_layoutDefinitions$la.spacingStyles)&&void 0!==_layoutDefinitions$la2&&_layoutDefinitions$la2.length&&blockGapValue&&layoutDefinitions[layoutType].spacingStyles.forEach((gapStyle=>{output+=`${appendSelectors(selector,gapStyle.selector.trim())} { `,output+=Object.entries(gapStyle.rules).map((_ref=>{let[cssProperty,value]=_ref;return`${cssProperty}: ${value||blockGapValue}`})).join("; "),output+="; }"})),output}function getAlignmentsInfo(layout){const{contentSize:contentSize,wideSize:wideSize}=layout,alignmentInfo={},sizeRegex=/^(?!0)\d+(px|em|rem|vw|vh|%)?$/i;return sizeRegex.test(contentSize)&&(alignmentInfo.none=(0,build_module.gB)((0,build_module.__)("Max %s wide"),contentSize)),sizeRegex.test(wideSize)&&(alignmentInfo.wide=(0,build_module.gB)((0,build_module.__)("Max %s wide"),wideSize)),alignmentInfo}var platform=__webpack_require__("./packages/element/build-module/platform.js"),utils=__webpack_require__("./packages/components/build-module/unit-control/utils.js"),box_control=__webpack_require__("./packages/components/build-module/box-control/index.js"),unit_control=__webpack_require__("./packages/components/build-module/unit-control/index.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js");function isValueSpacingPreset(value){return!(null==value||!value.includes)&&("0"===value||value.includes("var:preset|spacing|"))}function getSpacingPresetCssVar(value){if(!value)return;const slug=value.match(/var:preset\|spacing\|(.+)/);return slug?`var(--wp--preset--spacing--${slug[1]})`:value}function getSpacingPresetSlug(value){if(!value)return;if("0"===value||"default"===value)return value;const slug=value.match(/var:preset\|spacing\|(.+)/);return slug?slug[1]:void 0}const LABELS={all:(0,build_module.__)("All sides"),top:(0,build_module.__)("Top"),bottom:(0,build_module.__)("Bottom"),left:(0,build_module.__)("Left"),right:(0,build_module.__)("Right"),mixed:(0,build_module.__)("Mixed"),vertical:(0,build_module.__)("Vertical"),horizontal:(0,build_module.__)("Horizontal")},DEFAULT_VALUES={top:void 0,right:void 0,bottom:void 0,left:void 0},ALL_SIDES=["top","right","bottom","left"];function mode(arr){return arr.sort(((a,b)=>arr.filter((v=>v===a)).length-arr.filter((v=>v===b)).length)).pop()}function isValuesMixed(){let values=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},sides=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ALL_SIDES;return Object.values(values).length>=1&&Object.values(values).length<sides.length||new Set(Object.values(values)).size>1}function isValuesDefined(values){return null!=values&&!(0,lodash.isEmpty)(Object.values(values).filter((value=>!!value)))}var base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),box_control_utils=__webpack_require__("./packages/components/build-module/box-control/utils.js"),h_stack_component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),range_control=__webpack_require__("./packages/components/build-module/range-control/index.js"),custom_select_control=__webpack_require__("./packages/components/build-module/custom-select-control/index.js"),settings=__webpack_require__("./packages/icons/build-module/library/settings.js"),use_setting=__webpack_require__("./packages/block-editor/src/components/use-setting/index.js");const CUSTOM_VALUE_SETTINGS={px:{max:300,steps:1},"%":{max:100,steps:1},vw:{max:100,steps:1},vh:{max:100,steps:1},em:{max:10,steps:.1},rm:{max:10,steps:.1}};function SpacingInputControl(_ref){var _CUSTOM_VALUE_SETTING,_CUSTOM_VALUE_SETTING2,_CUSTOM_VALUE_SETTING3,_CUSTOM_VALUE_SETTING4,_spacingSizes$current;let{spacingSizes:spacingSizes,value:value,side:side,onChange:onChange,isMixed:isMixed=!1,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;value=function getPresetValueFromCustomValue(value,spacingSizes){if(isValueSpacingPreset(value))return value;const spacingMatch=spacingSizes.find((size=>String(size.size)===String(value)));return null!=spacingMatch&&spacingMatch.slug?`var:preset|spacing|${spacingMatch.slug}`:value}(value,spacingSizes);let selectListSizes=spacingSizes;const showRangeControl=spacingSizes.length<=8,disableCustomSpacingSizes=(0,use_select.Z)((select=>{const editorSettings=select(store.h).getSettings();return null==editorSettings?void 0:editorSettings.disableCustomSpacingSizes})),[showCustomValueControl,setShowCustomValueControl]=(0,react.useState)(!disableCustomSpacingSizes&&void 0!==value&&!isValueSpacingPreset(value)),units=(0,utils.nj)({availableUnits:(0,use_setting.Z)("spacing.units")||["px","em","rem"]});let currentValue=null;!showRangeControl&&!showCustomValueControl&&void 0!==value&&(!isValueSpacingPreset(value)||isValueSpacingPreset(value)&&isMixed)?(selectListSizes=[...spacingSizes,{name:isMixed?(0,build_module.__)("Mixed"):(0,build_module.gB)((0,build_module.__)("Custom (%s)"),value),slug:"custom",size:value}],currentValue=selectListSizes.length-1):isMixed||(currentValue=showCustomValueControl?function getCustomValueFromPreset(value,spacingSizes){if(!isValueSpacingPreset(value))return value;const slug=getSpacingPresetSlug(value),spacingSize=spacingSizes.find((size=>String(size.slug)===slug));return null==spacingSize?void 0:spacingSize.size}(value,spacingSizes):function getSliderValueFromPreset(presetValue,spacingSizes){if(void 0===presetValue)return 0;const slug=0===parseFloat(presetValue,10)?"0":getSpacingPresetSlug(presetValue),sliderValue=spacingSizes.findIndex((spacingSize=>String(spacingSize.slug)===slug));return-1!==sliderValue?sliderValue:NaN}(value,spacingSizes));const selectedUnit=(0,react.useMemo)((()=>(0,utils.YX)(currentValue)),[currentValue])[1]||units[0].value,customTooltipContent=newValue=>{var _spacingSizes$newValu;return void 0===value||null===(_spacingSizes$newValu=spacingSizes[newValue])||void 0===_spacingSizes$newValu?void 0:_spacingSizes$newValu.name},customRangeValue=parseFloat(currentValue,10),getNewPresetValue=(newSize,controlType)=>{var _spacingSizes$newSize;const size=parseInt(newSize,10);if("selectList"===controlType){if(0===size)return;if(1===size)return"0"}else if(0===size)return"0";return`var:preset|spacing|${null===(_spacingSizes$newSize=spacingSizes[newSize])||void 0===_spacingSizes$newSize?void 0:_spacingSizes$newSize.slug}`},allPlaceholder=isMixed?(0,build_module.__)("Mixed"):null,currentValueHint=isMixed?(0,build_module.__)("Mixed"):customTooltipContent(currentValue),options=selectListSizes.map(((size,index)=>({key:index,name:size.name}))),marks=spacingSizes.map(((newValue,index)=>({value:index,label:void 0}))),ariaLabel=(0,build_module.gB)((0,build_module.__)("%1$s %2$s"),LABELS[side],null==type?void 0:type.toLowerCase()),showHint=showRangeControl&&!showCustomValueControl&&void 0!==currentValueHint;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["all"!==side&&(0,jsx_runtime.jsxs)(h_stack_component.Z,{className:"components-spacing-sizes-control__side-labels",children:[(0,jsx_runtime.jsx)(base_control.ZP.VisualLabel,{className:"components-spacing-sizes-control__side-label",children:LABELS[side]}),showHint&&(0,jsx_runtime.jsx)(base_control.ZP.VisualLabel,{className:"components-spacing-sizes-control__hint-single",children:currentValueHint})]}),"all"===side&&showHint&&(0,jsx_runtime.jsx)(base_control.ZP.VisualLabel,{className:"components-spacing-sizes-control__hint-all",children:currentValueHint}),!disableCustomSpacingSizes&&(0,jsx_runtime.jsx)(build_module_button.Z,{label:showCustomValueControl?(0,build_module.__)("Use size preset"):(0,build_module.__)("Set custom size"),icon:settings.Z,onClick:()=>{setShowCustomValueControl(!showCustomValueControl)},isPressed:showCustomValueControl,isSmall:!0,className:classnames_default()({"components-spacing-sizes-control__custom-toggle-all":"all"===side,"components-spacing-sizes-control__custom-toggle-single":"all"!==side}),iconSize:24}),showCustomValueControl&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(unit_control.ZP,{onMouseOver:onMouseOver,onMouseOut:onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut,onChange:newSize=>onChange((newSize=>isNaN(parseFloat(newSize))?void 0:newSize)(newSize)),value:currentValue,units:units,min:minimumCustomValue,placeholder:allPlaceholder,disableUnits:isMixed,label:ariaLabel,hideLabelFromVision:!0,className:"components-spacing-sizes-control__custom-value-input",size:"__unstable-large"}),(0,jsx_runtime.jsx)(range_control.Z,{onMouseOver:onMouseOver,onMouseOut:onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut,value:customRangeValue,min:0,max:null!==(_CUSTOM_VALUE_SETTING=null===(_CUSTOM_VALUE_SETTING2=CUSTOM_VALUE_SETTINGS[selectedUnit])||void 0===_CUSTOM_VALUE_SETTING2?void 0:_CUSTOM_VALUE_SETTING2.max)&&void 0!==_CUSTOM_VALUE_SETTING?_CUSTOM_VALUE_SETTING:10,step:null!==(_CUSTOM_VALUE_SETTING3=null===(_CUSTOM_VALUE_SETTING4=CUSTOM_VALUE_SETTINGS[selectedUnit])||void 0===_CUSTOM_VALUE_SETTING4?void 0:_CUSTOM_VALUE_SETTING4.steps)&&void 0!==_CUSTOM_VALUE_SETTING3?_CUSTOM_VALUE_SETTING3:.1,withInputField:!1,onChange:next=>{onChange([next,selectedUnit].join(""))},className:"components-spacing-sizes-control__custom-value-range",__nextHasNoMarginBottom:!0})]}),showRangeControl&&!showCustomValueControl&&(0,jsx_runtime.jsx)(range_control.Z,{onMouseOver:onMouseOver,onMouseOut:onMouseOut,className:"components-spacing-sizes-control__range-control",value:currentValue,onChange:newSize=>onChange(getNewPresetValue(newSize)),onMouseDown:event=>{var _event$nativeEvent;(null==event||null===(_event$nativeEvent=event.nativeEvent)||void 0===_event$nativeEvent?void 0:_event$nativeEvent.offsetX)<35&&void 0===value&&onChange("0")},withInputField:!1,"aria-valuenow":currentValue,"aria-valuetext":null===(_spacingSizes$current=spacingSizes[currentValue])||void 0===_spacingSizes$current?void 0:_spacingSizes$current.name,renderTooltipContent:customTooltipContent,min:0,max:spacingSizes.length-1,marks:marks,label:ariaLabel,hideLabelFromVision:!0,__nextHasNoMarginBottom:!0,onFocus:onMouseOver,onBlur:onMouseOut}),!showRangeControl&&!showCustomValueControl&&(0,jsx_runtime.jsx)(custom_select_control.Z,{className:"components-spacing-sizes-control__custom-select-control",value:options.find((option=>option.key===currentValue))||"",onChange:selection=>{onChange(getNewPresetValue(selection.selectedItem.key,"selectList"))},options:options,label:ariaLabel,hideLabelFromVision:!0,__nextUnconstrainedWidth:!0,size:"__unstable-large",onMouseOver:onMouseOver,onMouseOut:onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut})]})}function AllInputControl(_ref){let{onChange:onChange,values:values,sides:sides,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const allValue=function getAllRawValue(){let values=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mode(Object.values(values))}(values),isMixed=isValuesDefined(values)&&isValuesMixed(values,sides);return(0,jsx_runtime.jsx)(SpacingInputControl,{value:allValue,onChange:next=>{const nextValues=(0,box_control_utils.gB)(values,next,sides);onChange(nextValues)},side:"all",spacingSizes:spacingSizes,isMixed:isMixed,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut})}function BoxInputControls(_ref){let{values:values,sides:sides,onChange:onChange,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const filteredSides=null!=sides&&sides.length?ALL_SIDES.filter((side=>sides.includes(side))):ALL_SIDES,createHandleOnChange=side=>next=>{const nextValues={...values};nextValues[side]=next,onChange(nextValues)};return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:filteredSides.map((side=>(0,jsx_runtime.jsx)(SpacingInputControl,{value:values[side],label:LABELS[side],withInputField:!1,side:side,onChange:createHandleOnChange(side),spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut},`spacing-sizes-control-${side}`)))})}SpacingInputControl.__docgenInfo={description:"",methods:[],displayName:"SpacingInputControl",props:{isMixed:{defaultValue:{value:"false",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/spacing-input-control.js"]={name:"SpacingInputControl",docgenInfo:SpacingInputControl.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/spacing-input-control.js"}),AllInputControl.displayName="AllInputControl",AllInputControl.__docgenInfo={description:"",methods:[],displayName:"AllInputControl"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/all-input-control.js"]={name:"AllInputControl",docgenInfo:AllInputControl.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/all-input-control.js"}),BoxInputControls.__docgenInfo={description:"",methods:[],displayName:"BoxInputControls"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/input-controls.js"]={name:"BoxInputControls",docgenInfo:BoxInputControls.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/input-controls.js"});const groupedSides=["vertical","horizontal"];function AxialInputControls(_ref){let{onChange:onChange,values:values,sides:sides,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const createHandleOnChange=side=>next=>{if(!onChange)return;const nextValues={...values};"vertical"===side&&(nextValues.top=next,nextValues.bottom=next),"horizontal"===side&&(nextValues.left=next,nextValues.right=next),onChange(nextValues)},filteredSides=null!=sides&&sides.length?groupedSides.filter((side=>sides.includes(side))):groupedSides;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:filteredSides.map((side=>{const axisValue="vertical"===side?values.top:values.left;return(0,jsx_runtime.jsx)(SpacingInputControl,{value:axisValue,onChange:createHandleOnChange(side),label:LABELS[side],withInputField:!1,side:side,spacingSizes:spacingSizes,type:type,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut},`spacing-sizes-control-${side}`)}))})}AxialInputControls.__docgenInfo={description:"",methods:[],displayName:"AxialInputControls"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/axial-input-controls.js"]={name:"AxialInputControls",docgenInfo:AxialInputControls.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/axial-input-controls.js"});var library_link=__webpack_require__("./packages/icons/build-module/library/link.js"),link_off=__webpack_require__("./packages/icons/build-module/library/link-off.js"),tooltip=__webpack_require__("./packages/components/build-module/tooltip/index.js");function LinkedButton(_ref){let{isLinked:isLinked,onClick:onClick}=_ref;const label=isLinked?(0,build_module.__)("Unlink sides"):(0,build_module.__)("Link sides");return(0,jsx_runtime.jsx)(tooltip.Z,{text:label,children:(0,jsx_runtime.jsx)("span",{className:"component-spacing-sizes-control__linked-button",children:(0,jsx_runtime.jsx)(build_module_button.Z,{isSmall:!0,icon:isLinked?library_link.Z:link_off.Z,iconSize:24,"aria-label":label,onClick:onClick})})})}function SpacingSizesControl(_ref){let{inputProps:inputProps,onChange:onChange,label:label=(0,build_module.__)("Spacing Control"),values:values,sides:sides,splitOnAxis:splitOnAxis=!1,useSelect:useSelect,minimumCustomValue:minimumCustomValue=0,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=_ref;const spacingSizes=[{name:0,slug:"0",size:0},...(0,use_setting.Z)("spacing.spacingSizes")||[]];spacingSizes.length>8&&spacingSizes.unshift({name:(0,build_module.__)("Default"),slug:"default",size:void 0});const inputValues=values||DEFAULT_VALUES,hasInitialValue=isValuesDefined(values),hasOneSide=1===(null==sides?void 0:sides.length),[isLinked,setIsLinked]=(0,react.useState)(!hasInitialValue||!isValuesMixed(inputValues,sides)||hasOneSide),inputControlProps={...inputProps,onChange:nextValue=>{const newValues={...values,...nextValue};onChange(newValues)},isLinked:isLinked,sides:sides,values:inputValues,spacingSizes:spacingSizes,useSelect:useSelect,type:label,minimumCustomValue:minimumCustomValue,onMouseOver:onMouseOver,onMouseOut:onMouseOut};return(0,jsx_runtime.jsxs)("fieldset",{className:classnames_default()("component-spacing-sizes-control",{"is-unlinked":!isLinked}),children:[(0,jsx_runtime.jsx)(base_control.ZP.VisualLabel,{as:"legend",children:label}),!hasOneSide&&(0,jsx_runtime.jsx)(LinkedButton,{onClick:()=>{setIsLinked(!isLinked)},isLinked:isLinked}),isLinked&&(0,jsx_runtime.jsx)(AllInputControl,{"aria-label":label,...inputControlProps}),!isLinked&&splitOnAxis&&(0,jsx_runtime.jsx)(AxialInputControls,{...inputControlProps}),!isLinked&&!splitOnAxis&&(0,jsx_runtime.jsx)(BoxInputControls,{...inputControlProps})]})}LinkedButton.displayName="LinkedButton",LinkedButton.__docgenInfo={description:"",methods:[],displayName:"LinkedButton"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/linked-button.js"]={name:"LinkedButton",docgenInfo:LinkedButton.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/linked-button.js"}),SpacingSizesControl.displayName="SpacingSizesControl",SpacingSizesControl.__docgenInfo={description:"",methods:[],displayName:"SpacingSizesControl",props:{label:{defaultValue:{value:"__( 'Spacing Control' )",computed:!0},required:!1},splitOnAxis:{defaultValue:{value:"false",computed:!1},required:!1},minimumCustomValue:{defaultValue:{value:"0",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/spacing-sizes-control/index.js"]={name:"SpacingSizesControl",docgenInfo:SpacingSizesControl.__docgenInfo,path:"packages/block-editor/src/components/spacing-sizes-control/index.js"});var tools_panel_item_component=__webpack_require__("./packages/components/build-module/tools-panel/tools-panel-item/component.js"),v_stack_component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),style_provider=__webpack_require__("./packages/components/build-module/style-provider/index.js"),tools_panel_context=__webpack_require__("./packages/components/build-module/tools-panel/context.js");function useDisplayBlockControls(){const{isSelected:isSelected,clientId:clientId,name:name}=(0,block_edit_context.Z8)();return(0,use_select.Z)((select=>{if(isSelected)return!0;const{getBlockName:getBlockName,isFirstMultiSelectedBlock:isFirstMultiSelectedBlock,getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds}=select(store.h);return!!isFirstMultiSelectedBlock(clientId)&&getMultiSelectedBlockClientIds().every((id=>getBlockName(id)===name))}),[clientId,isSelected,name])}var slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js");const InspectorControlsDefault=(0,slot_fill.up)("InspectorControls"),InspectorControlsAdvanced=(0,slot_fill.up)("InspectorAdvancedControls"),InspectorControlsBorder=(0,slot_fill.up)("InspectorControlsBorder"),InspectorControlsColor=(0,slot_fill.up)("InspectorControlsColor"),InspectorControlsDimensions=(0,slot_fill.up)("InspectorControlsDimensions"),InspectorControlsTypography=(0,slot_fill.up)("InspectorControlsTypography");var inspector_controls_groups={default:InspectorControlsDefault,advanced:InspectorControlsAdvanced,border:InspectorControlsBorder,color:InspectorControlsColor,dimensions:InspectorControlsDimensions,list:(0,slot_fill.up)("InspectorControlsListView"),typography:InspectorControlsTypography},fill_process=__webpack_require__("./node_modules/process/browser.js");function InspectorControlsFill(_ref){var _groups$group;let{__experimentalGroup:group="default",children:children}=_ref;const isDisplayed=useDisplayBlockControls(),Fill=null===(_groups$group=inspector_controls_groups[group])||void 0===_groups$group?void 0:_groups$group.Fill;return Fill?isDisplayed?(0,jsx_runtime.jsx)(style_provider.Z,{document:document,children:(0,jsx_runtime.jsx)(Fill,{children:fillProps=>{const value=(0,lodash.isEmpty)(fillProps)?null:fillProps;return(0,jsx_runtime.jsx)(tools_panel_context.h.Provider,{value:value,children:children})}})}):null:(void 0!==fill_process&&fill_process.env,null)}InspectorControlsFill.displayName="InspectorControlsFill",InspectorControlsFill.__docgenInfo={description:"",methods:[],displayName:"InspectorControlsFill",props:{__experimentalGroup:{defaultValue:{value:"'default'",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inspector-controls/fill.js"]={name:"InspectorControlsFill",docgenInfo:InspectorControlsFill.__docgenInfo,path:"packages/block-editor/src/components/inspector-controls/fill.js"});var use_slot=__webpack_require__("./packages/components/build-module/slot-fill/bubbles-virtually/use-slot.js"),use_slot_fills=__webpack_require__("./packages/components/build-module/slot-fill/bubbles-virtually/use-slot-fills.js"),tools_panel_component=__webpack_require__("./packages/components/build-module/tools-panel/tools-panel/component.js");const cleanEmptyObject=object=>{if(null===object||"object"!=typeof object||Array.isArray(object))return object;const cleanedNestedObjects=Object.fromEntries(Object.entries((0,lodash.mapValues)(object,cleanEmptyObject)).filter((_ref=>{let[,value]=_ref;return Boolean(value)})));return(0,lodash.isEmpty)(cleanedNestedObjects)?void 0:cleanedNestedObjects};function shouldSkipSerialization(blockType,featureSet,feature){const support=(0,blocks_build_module.Dx)(blockType,featureSet),skipSerialization=null==support?void 0:support.__experimentalSkipSerialization;return Array.isArray(skipSerialization)?skipSerialization.includes(feature):skipSerialization}function BlockSupportToolsPanel(_ref){let{children:children,group:group,label:label}=_ref;const{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store.h),{getBlockAttributes:getBlockAttributes,getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds,getSelectedBlockClientId:getSelectedBlockClientId,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store.h),panelId=getSelectedBlockClientId(),resetAll=(0,react.useCallback)((function(){let resetFilters=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const newAttributes={},clientIds=hasMultiSelection()?getMultiSelectedBlockClientIds():[panelId];clientIds.forEach((clientId=>{const{style:style}=getBlockAttributes(clientId);let newBlockAttributes={style:style};resetFilters.forEach((resetFilter=>{newBlockAttributes={...newBlockAttributes,...resetFilter(newBlockAttributes)}})),newBlockAttributes={...newBlockAttributes,style:cleanEmptyObject(newBlockAttributes.style)},newAttributes[clientId]=newBlockAttributes})),updateBlockAttributes(clientIds,newAttributes,!0)}),[cleanEmptyObject,getBlockAttributes,getMultiSelectedBlockClientIds,hasMultiSelection,panelId,updateBlockAttributes]);return(0,jsx_runtime.jsx)(tools_panel_component.Z,{className:`${group}-block-support-panel`,label:label,resetAll:resetAll,panelId:panelId,hasInnerWrapper:!0,shouldRenderPlaceholderItems:!0,__experimentalFirstVisibleItemClass:"first",__experimentalLastVisibleItemClass:"last",children:children},panelId)}function BlockSupportSlotContainer(_ref){let{Slot:Slot,...props}=_ref;const toolsPanelContext=(0,react.useContext)(tools_panel_context.h);return(0,jsx_runtime.jsx)(Slot,{...props,fillProps:toolsPanelContext,bubblesVirtually:!0})}BlockSupportToolsPanel.displayName="BlockSupportToolsPanel",BlockSupportToolsPanel.__docgenInfo={description:"",methods:[],displayName:"BlockSupportToolsPanel"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inspector-controls/block-support-tools-panel.js"]={name:"BlockSupportToolsPanel",docgenInfo:BlockSupportToolsPanel.__docgenInfo,path:"packages/block-editor/src/components/inspector-controls/block-support-tools-panel.js"}),BlockSupportSlotContainer.displayName="BlockSupportSlotContainer",BlockSupportSlotContainer.__docgenInfo={description:"",methods:[],displayName:"BlockSupportSlotContainer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inspector-controls/block-support-slot-container.js"]={name:"BlockSupportSlotContainer",docgenInfo:BlockSupportSlotContainer.__docgenInfo,path:"packages/block-editor/src/components/inspector-controls/block-support-slot-container.js"});var slot_process=__webpack_require__("./node_modules/process/browser.js");function InspectorControlsSlot(_ref){var _groups$group;let{__experimentalGroup:group="default",label:label,...props}=_ref;const Slot=null===(_groups$group=inspector_controls_groups[group])||void 0===_groups$group?void 0:_groups$group.Slot,slot=(0,use_slot.Z)(null==Slot?void 0:Slot.__unstableName),fills=(0,use_slot_fills.Z)(null==Slot?void 0:Slot.__unstableName);if(!Slot||!slot)return void 0!==slot_process&&slot_process.env,null;return Boolean(fills&&fills.length)?label?(0,jsx_runtime.jsx)(BlockSupportToolsPanel,{group:group,label:label,children:(0,jsx_runtime.jsx)(BlockSupportSlotContainer,{...props,Slot:Slot})}):(0,jsx_runtime.jsx)(Slot,{...props,bubblesVirtually:!0}):null}InspectorControlsSlot.displayName="InspectorControlsSlot",InspectorControlsSlot.__docgenInfo={description:"",methods:[],displayName:"InspectorControlsSlot",props:{__experimentalGroup:{defaultValue:{value:"'default'",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inspector-controls/slot.js"]={name:"InspectorControlsSlot",docgenInfo:InspectorControlsSlot.__docgenInfo,path:"packages/block-editor/src/components/inspector-controls/slot.js"});const InspectorControls=InspectorControlsFill;InspectorControls.Slot=InspectorControlsSlot;const InspectorAdvancedControls=props=>(0,jsx_runtime.jsx)(InspectorControlsFill,{...props,__experimentalGroup:"advanced"});InspectorAdvancedControls.displayName="InspectorAdvancedControls",InspectorAdvancedControls.Slot=props=>(0,jsx_runtime.jsx)(InspectorControlsSlot,{...props,__experimentalGroup:"advanced"}),InspectorAdvancedControls.slotName="InspectorAdvancedControls";var inspector_controls=InspectorControls;InspectorAdvancedControls.__docgenInfo={description:"",methods:[{name:"Slot",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"InspectorAdvancedControls"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inspector-controls/index.js"]={name:"InspectorAdvancedControls",docgenInfo:InspectorAdvancedControls.__docgenInfo,path:"packages/block-editor/src/components/inspector-controls/index.js"});var is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js"),popover=__webpack_require__("./packages/components/build-module/popover/index.js");var use_popover_scroll=function usePopoverScroll(scrollableRef){return(0,use_ref_effect.Z)((node=>{if(!scrollableRef)return;function onWheel(event){const{deltaX:deltaX,deltaY:deltaY}=event;scrollableRef.current.scrollBy(deltaX,deltaY)}const options={passive:!0};return node.addEventListener("wheel",onWheel,options),()=>{node.removeEventListener("wheel",onWheel,options)}}),[scrollableRef])};const MAX_POPOVER_RECOMPUTE_COUNTER=Number.MAX_SAFE_INTEGER;function BlockPopover(_ref,ref){let{clientId:clientId,bottomClientId:bottomClientId,children:children,__unstableRefreshSize:__unstableRefreshSize,__unstableCoverTarget:__unstableCoverTarget=!1,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,shift:shift=!0,...props}=_ref;const selectedElement=useBlockElement(clientId),lastSelectedElement=useBlockElement(null!=bottomClientId?bottomClientId:clientId),mergedRefs=(0,use_merge_refs.Z)([ref,use_popover_scroll(__unstableContentRef)]),[popoverDimensionsRecomputeCounter,forceRecomputePopoverDimensions]=(0,react.useReducer)((s=>(s+1)%MAX_POPOVER_RECOMPUTE_COUNTER),0);(0,react.useLayoutEffect)((()=>{if(!selectedElement)return;const observer=new window.MutationObserver(forceRecomputePopoverDimensions);return observer.observe(selectedElement,{attributes:!0}),()=>{observer.disconnect()}}),[selectedElement]);const style=(0,react.useMemo)((()=>popoverDimensionsRecomputeCounter<0||!selectedElement||lastSelectedElement!==selectedElement?{}:{position:"absolute",width:selectedElement.offsetWidth,height:selectedElement.offsetHeight}),[selectedElement,lastSelectedElement,__unstableRefreshSize,popoverDimensionsRecomputeCounter]),popoverAnchor=(0,react.useMemo)((()=>{if(!(popoverDimensionsRecomputeCounter<0||!selectedElement||bottomClientId&&!lastSelectedElement))return{getBoundingClientRect(){var _lastSelectedBCR$left,_lastSelectedBCR$top,_lastSelectedBCR$righ,_lastSelectedBCR$bott;const selectedBCR=selectedElement.getBoundingClientRect(),lastSelectedBCR=null==lastSelectedElement?void 0:lastSelectedElement.getBoundingClientRect(),left=Math.min(selectedBCR.left,null!==(_lastSelectedBCR$left=null==lastSelectedBCR?void 0:lastSelectedBCR.left)&&void 0!==_lastSelectedBCR$left?_lastSelectedBCR$left:1/0),top=Math.min(selectedBCR.top,null!==(_lastSelectedBCR$top=null==lastSelectedBCR?void 0:lastSelectedBCR.top)&&void 0!==_lastSelectedBCR$top?_lastSelectedBCR$top:1/0),width=Math.max(selectedBCR.right,null!==(_lastSelectedBCR$righ=lastSelectedBCR.right)&&void 0!==_lastSelectedBCR$righ?_lastSelectedBCR$righ:-1/0)-left,height=Math.max(selectedBCR.bottom,null!==(_lastSelectedBCR$bott=lastSelectedBCR.bottom)&&void 0!==_lastSelectedBCR$bott?_lastSelectedBCR$bott:-1/0)-top;return new window.DOMRect(left,top,width,height)},ownerDocument:selectedElement.ownerDocument}}),[bottomClientId,lastSelectedElement,selectedElement,popoverDimensionsRecomputeCounter]);return!selectedElement||bottomClientId&&!lastSelectedElement?null:(0,jsx_runtime.jsxs)(popover.Z,{ref:mergedRefs,animate:!1,focusOnMount:!1,anchor:popoverAnchor,__unstableSlotName:__unstablePopoverSlot||null,placement:"top-start",resize:!1,flip:!1,shift:shift,...props,className:classnames_default()("block-editor-block-popover",props.className),variant:"unstyled",children:[__unstableCoverTarget&&(0,jsx_runtime.jsx)("div",{style:style,children:children}),!__unstableCoverTarget&&children]})}BlockPopover.displayName="BlockPopover",BlockPopover.__docgenInfo={description:"",methods:[],displayName:"BlockPopover",props:{__unstableCoverTarget:{defaultValue:{value:"false",computed:!1},required:!1},shift:{defaultValue:{value:"true",computed:!1},required:!1}}};var block_popover=(0,react.forwardRef)(BlockPopover);function hasMarginSupport(blockType){const support=(0,blocks_build_module.Dx)(blockType,SPACING_SUPPORT_KEY);return!!(!0===support||null!=support&&support.margin)}function useIsMarginDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!(0,use_setting.Z)("spacing.margin"),isInvalid=!useIsDimensionsSupportValid(blockName,"margin");return!hasMarginSupport(blockName)||isDisabled||isInvalid}function MarginEdit(props){var _style$spacing,_style$spacing2;const{name:blockName,attributes:{style:style},setAttributes:setAttributes,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=props,spacingSizes=(0,use_setting.Z)("spacing.spacingSizes"),units=(0,utils.nj)({availableUnits:(0,use_setting.Z)("spacing.units")||["%","px","em","rem","vw"]}),sides=useCustomSides(blockName,"margin"),splitOnAxis=sides&&sides.some((side=>AXIAL_SIDES.includes(side)));if(useIsMarginDisabled(props))return null;const onChange=next=>{const newStyle={...style,spacing:{...null==style?void 0:style.spacing,margin:next}};setAttributes({style:cleanEmptyObject(newStyle)})};return platform.Z.select({web:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(!spacingSizes||0===(null==spacingSizes?void 0:spacingSizes.length))&&(0,jsx_runtime.jsx)(box_control.Z,{values:null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.margin,onChange:onChange,label:(0,build_module.__)("Margin"),sides:sides,units:units,allowReset:!1,splitOnAxis:splitOnAxis,onMouseOver:onMouseOver,onMouseOut:onMouseOut}),(null==spacingSizes?void 0:spacingSizes.length)>0&&(0,jsx_runtime.jsx)(SpacingSizesControl,{values:null==style||null===(_style$spacing2=style.spacing)||void 0===_style$spacing2?void 0:_style$spacing2.margin,onChange:onChange,label:(0,build_module.__)("Margin"),sides:sides,units:units,allowReset:!1,splitOnAxis:!1,onMouseOver:onMouseOver,onMouseOut:onMouseOut})]}),native:null})}function MarginVisualizer(_ref2){var _attributes$style,_attributes$style$spa;let{clientId:clientId,attributes:attributes,forceShow:forceShow}=_ref2;const margin=null==attributes||null===(_attributes$style=attributes.style)||void 0===_attributes$style||null===(_attributes$style$spa=_attributes$style.spacing)||void 0===_attributes$style$spa?void 0:_attributes$style$spa.margin,style=(0,react.useMemo)((()=>{const marginTop=null!=margin&&margin.top?getSpacingPresetCssVar(null==margin?void 0:margin.top):0,marginRight=null!=margin&&margin.right?getSpacingPresetCssVar(null==margin?void 0:margin.right):0,marginBottom=null!=margin&&margin.bottom?getSpacingPresetCssVar(null==margin?void 0:margin.bottom):0,marginLeft=null!=margin&&margin.left?getSpacingPresetCssVar(null==margin?void 0:margin.left):0;return{borderTopWidth:marginTop,borderRightWidth:marginRight,borderBottomWidth:marginBottom,borderLeftWidth:marginLeft,top:marginTop?`calc(${marginTop} * -1)`:0,right:marginRight?`calc(${marginRight} * -1)`:0,bottom:marginBottom?`calc(${marginBottom} * -1)`:0,left:marginLeft?`calc(${marginLeft} * -1)`:0}}),[margin]),[isActive,setIsActive]=(0,react.useState)(!1),valueRef=(0,react.useRef)(margin),timeoutRef=(0,react.useRef)();return(0,react.useEffect)((()=>((0,is_shallow_equal_build_module.ZP)(margin,valueRef.current)||forceShow||(setIsActive(!0),valueRef.current=margin,timeoutRef.current=setTimeout((()=>{setIsActive(!1)}),400)),()=>{setIsActive(!1),timeoutRef.current&&window.clearTimeout(timeoutRef.current)})),[margin,forceShow]),isActive||forceShow?(0,jsx_runtime.jsx)(block_popover,{clientId:clientId,__unstableCoverTarget:!0,__unstableRefreshSize:margin,shift:!1,children:(0,jsx_runtime.jsx)("div",{className:"block-editor__padding-visualizer",style:style})}):null}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-popover/index.js"]={name:"BlockPopover",docgenInfo:BlockPopover.__docgenInfo,path:"packages/block-editor/src/components/block-popover/index.js"}),MarginVisualizer.displayName="MarginVisualizer",MarginVisualizer.__docgenInfo={description:"",methods:[],displayName:"MarginVisualizer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/hooks/margin.js"]={name:"MarginVisualizer",docgenInfo:MarginVisualizer.__docgenInfo,path:"packages/block-editor/src/hooks/margin.js"});var height_control=__webpack_require__("./packages/block-editor/src/components/height-control/index.js");function hasMinHeightSupport(blockType){const support=(0,blocks_build_module.Dx)(blockType,DIMENSIONS_SUPPORT_KEY);return!!(!0===support||null!=support&&support.minHeight)}function useIsMinHeightDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!(0,use_setting.Z)("dimensions.minHeight");return!hasMinHeightSupport(blockName)||isDisabled}function MinHeightEdit(props){var _style$dimensions;const{attributes:{style:style},setAttributes:setAttributes}=props;if(useIsMinHeightDisabled(props))return null;return(0,jsx_runtime.jsx)(height_control.Z,{label:(0,build_module.__)("Min. height"),value:null==style||null===(_style$dimensions=style.dimensions)||void 0===_style$dimensions?void 0:_style$dimensions.minHeight,onChange:next=>{const newStyle={...style,dimensions:{...null==style?void 0:style.dimensions,minHeight:next}};setAttributes({style:cleanEmptyObject(newStyle)})}})}function hasPaddingSupport(blockType){const support=(0,blocks_build_module.Dx)(blockType,SPACING_SUPPORT_KEY);return!!(!0===support||null!=support&&support.padding)}function useIsPaddingDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!(0,use_setting.Z)("spacing.padding"),isInvalid=!useIsDimensionsSupportValid(blockName,"padding");return!hasPaddingSupport(blockName)||isDisabled||isInvalid}function PaddingEdit(props){var _style$spacing,_style$spacing2;const{name:blockName,attributes:{style:style},setAttributes:setAttributes,onMouseOver:onMouseOver,onMouseOut:onMouseOut}=props,spacingSizes=(0,use_setting.Z)("spacing.spacingSizes"),units=(0,utils.nj)({availableUnits:(0,use_setting.Z)("spacing.units")||["%","px","em","rem","vw"]}),sides=useCustomSides(blockName,"padding"),splitOnAxis=sides&&sides.some((side=>AXIAL_SIDES.includes(side)));if(useIsPaddingDisabled(props))return null;const onChange=next=>{const newStyle={...style,spacing:{...null==style?void 0:style.spacing,padding:next}};setAttributes({style:cleanEmptyObject(newStyle)})};return platform.Z.select({web:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(!spacingSizes||0===(null==spacingSizes?void 0:spacingSizes.length))&&(0,jsx_runtime.jsx)(box_control.Z,{values:null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.padding,onChange:onChange,label:(0,build_module.__)("Padding"),sides:sides,units:units,allowReset:!1,splitOnAxis:splitOnAxis,onMouseOver:onMouseOver,onMouseOut:onMouseOut}),(null==spacingSizes?void 0:spacingSizes.length)>0&&(0,jsx_runtime.jsx)(SpacingSizesControl,{values:null==style||null===(_style$spacing2=style.spacing)||void 0===_style$spacing2?void 0:_style$spacing2.padding,onChange:onChange,label:(0,build_module.__)("Padding"),sides:sides,units:units,allowReset:!1,splitOnAxis:splitOnAxis,onMouseOver:onMouseOver,onMouseOut:onMouseOut})]}),native:null})}function PaddingVisualizer(_ref2){var _attributes$style,_attributes$style$spa;let{clientId:clientId,attributes:attributes,forceShow:forceShow}=_ref2;const padding=null==attributes||null===(_attributes$style=attributes.style)||void 0===_attributes$style||null===(_attributes$style$spa=_attributes$style.spacing)||void 0===_attributes$style$spa?void 0:_attributes$style$spa.padding,style=(0,react.useMemo)((()=>({borderTopWidth:null!=padding&&padding.top?getSpacingPresetCssVar(null==padding?void 0:padding.top):0,borderRightWidth:null!=padding&&padding.right?getSpacingPresetCssVar(null==padding?void 0:padding.right):0,borderBottomWidth:null!=padding&&padding.bottom?getSpacingPresetCssVar(null==padding?void 0:padding.bottom):0,borderLeftWidth:null!=padding&&padding.left?getSpacingPresetCssVar(null==padding?void 0:padding.left):0})),[padding]),[isActive,setIsActive]=(0,react.useState)(!1),valueRef=(0,react.useRef)(padding),timeoutRef=(0,react.useRef)();return(0,react.useEffect)((()=>((0,is_shallow_equal_build_module.ZP)(padding,valueRef.current)||forceShow||(setIsActive(!0),valueRef.current=padding,timeoutRef.current=setTimeout((()=>{setIsActive(!1)}),400)),()=>{setIsActive(!1),timeoutRef.current&&window.clearTimeout(timeoutRef.current)})),[padding,forceShow]),isActive||forceShow?(0,jsx_runtime.jsx)(block_popover,{clientId:clientId,__unstableCoverTarget:!0,__unstableRefreshSize:padding,shift:!1,children:(0,jsx_runtime.jsx)("div",{className:"block-editor__padding-visualizer",style:style})}):null}MinHeightEdit.displayName="MinHeightEdit",MinHeightEdit.__docgenInfo={description:"Inspector control panel containing the minHeight related configuration.\n\n@param {Object} props Block props.\n@return {WPElement} Edit component for height.",methods:[],displayName:"MinHeightEdit"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/hooks/min-height.js"]={name:"MinHeightEdit",docgenInfo:MinHeightEdit.__docgenInfo,path:"packages/block-editor/src/hooks/min-height.js"}),PaddingVisualizer.displayName="PaddingVisualizer",PaddingVisualizer.__docgenInfo={description:"",methods:[],displayName:"PaddingVisualizer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/hooks/padding.js"]={name:"PaddingVisualizer",docgenInfo:PaddingVisualizer.__docgenInfo,path:"packages/block-editor/src/hooks/padding.js"});var toggle_group_control_option_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option/component.js");function helpText(selfStretch,parentLayout){const{orientation:orientation="horizontal"}=parentLayout;return"fill"===selfStretch?(0,build_module.__)("Stretch to fill available space."):"fixed"===selfStretch?"horizontal"===orientation?(0,build_module.__)("Specify a fixed width."):(0,build_module.__)("Specify a fixed height."):(0,build_module.__)("Fit contents.")}function ChildLayoutEdit(_ref){let{attributes:attributes,setAttributes:setAttributes,__unstableParentLayout:parentLayout}=_ref;const{style:style={}}=attributes,{layout:childLayout={}}=style,{selfStretch:selfStretch,flexSize:flexSize}=childLayout;return(0,react.useEffect)((()=>{"fixed"!==selfStretch||flexSize||setAttributes({style:{...style,layout:{...childLayout,selfStretch:"fit"}}})}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(toggle_group_control_component.Z,{size:"__unstable-large",label:childLayoutOrientation(parentLayout),value:selfStretch||"fit",help:helpText(selfStretch,parentLayout),onChange:value=>{const newFlexSize="fixed"!==value?null:flexSize;setAttributes({style:{...style,layout:{...childLayout,selfStretch:value,flexSize:newFlexSize}}})},isBlock:!0,children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"fit",label:(0,build_module.__)("Fit")},"fit"),(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"fill",label:(0,build_module.__)("Fill")},"fill"),(0,jsx_runtime.jsx)(toggle_group_control_option_component.Z,{value:"fixed",label:(0,build_module.__)("Fixed")},"fixed")]}),"fixed"===selfStretch&&(0,jsx_runtime.jsx)(unit_control.ZP,{size:"__unstable-large",onChange:value=>{setAttributes({style:{...style,layout:{...childLayout,flexSize:value}}})},value:flexSize})]})}function hasChildLayoutSupport(_ref2){let{__unstableParentLayout:parentLayout={}}=_ref2;const{type:parentLayoutType="default",allowSizingOnChildren:allowSizingOnChildren=!1}=parentLayout;return"flex"===parentLayoutType&&allowSizingOnChildren}function useIsChildLayoutDisabled(props){const isDisabled=!(0,use_setting.Z)("layout");return!hasChildLayoutSupport(props)||isDisabled}function childLayoutOrientation(parentLayout){const{orientation:orientation="horizontal"}=parentLayout;return"horizontal"===orientation?(0,build_module.__)("Width"):(0,build_module.__)("Height")}ChildLayoutEdit.__docgenInfo={description:"Inspector controls containing the child layout related configuration.\n\n@param {Object} props                        Block props.\n@param {Object} props.attributes             Block attributes.\n@param {Object} props.setAttributes          Function to set block attributes.\n@param {Object} props.__unstableParentLayout\n\n@return {WPElement} child layout edit element.",methods:[],displayName:"ChildLayoutEdit"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/hooks/child-layout.js"]={name:"ChildLayoutEdit",docgenInfo:ChildLayoutEdit.__docgenInfo,path:"packages/block-editor/src/hooks/child-layout.js"});const DIMENSIONS_SUPPORT_KEY="dimensions",SPACING_SUPPORT_KEY="spacing",dimensions_ALL_SIDES=["top","right","bottom","left"],AXIAL_SIDES=["vertical","horizontal"];function useVisualizerMouseOver(){const[isMouseOver,setIsMouseOver]=(0,react.useState)(!1),{__experimentalHideBlockInterface:hideBlockInterface,__experimentalShowBlockInterface:showBlockInterface}=(0,use_dispatch.Z)(store.h);return{isMouseOver:isMouseOver,onMouseOver:e=>{e.stopPropagation(),hideBlockInterface(),setIsMouseOver(!0)},onMouseOut:e=>{e.stopPropagation(),showBlockInterface(),setIsMouseOver(!1)}}}function DimensionsPanel(props){const isGapDisabled=useIsGapDisabled(props),isPaddingDisabled=useIsPaddingDisabled(props),isMarginDisabled=useIsMarginDisabled(props),isMinHeightDisabled=useIsMinHeightDisabled(props),isChildLayoutDisabled=useIsChildLayoutDisabled(props),isDisabled=useIsDimensionsDisabled(props),isSupported=function hasDimensionsSupport(props){if("web"!==platform.Z.OS)return!1;const{name:blockName}=props;return hasGapSupport(blockName)||hasMinHeightSupport(blockName)||hasPaddingSupport(blockName)||hasMarginSupport(blockName)||hasChildLayoutSupport(props)}(props),spacingSizes=(0,use_setting.Z)("spacing.spacingSizes"),paddingMouseOver=useVisualizerMouseOver(),marginMouseOver=useVisualizerMouseOver();if(isDisabled||!isSupported)return null;const defaultDimensionsControls=(0,blocks_build_module.Dx)(props.name,[DIMENSIONS_SUPPORT_KEY,"__experimentalDefaultControls"]),defaultSpacingControls=(0,blocks_build_module.Dx)(props.name,[SPACING_SUPPORT_KEY,"__experimentalDefaultControls"]),createResetAllFilter=(attribute,featureSet)=>newAttributes=>{var _newAttributes$style;return{...newAttributes,style:{...newAttributes.style,[featureSet]:{...null===(_newAttributes$style=newAttributes.style)||void 0===_newAttributes$style?void 0:_newAttributes$style[featureSet],[attribute]:void 0}}}},spacingClassnames=classnames_default()({"tools-panel-item-spacing":spacingSizes&&spacingSizes.length>0}),{__unstableParentLayout:parentLayout}=props;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(inspector_controls,{__experimentalGroup:"dimensions",children:[!isPaddingDisabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.Z,{className:spacingClassnames,hasValue:()=>function hasPaddingValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.spacing)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.padding)}(props),label:(0,build_module.__)("Padding"),onDeselect:()=>function resetPadding(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,spacing:{...null==style?void 0:style.spacing,padding:void 0}})})}(props),resetAllFilter:createResetAllFilter("padding","spacing"),isShownByDefault:null==defaultSpacingControls?void 0:defaultSpacingControls.padding,panelId:props.clientId,children:(0,jsx_runtime.jsx)(PaddingEdit,{onMouseOver:paddingMouseOver.onMouseOver,onMouseOut:paddingMouseOver.onMouseOut,...props})}),!isMarginDisabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.Z,{className:spacingClassnames,hasValue:()=>function hasMarginValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.spacing)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.margin)}(props),label:(0,build_module.__)("Margin"),onDeselect:()=>function resetMargin(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,spacing:{...null==style?void 0:style.spacing,margin:void 0}})})}(props),resetAllFilter:createResetAllFilter("margin","spacing"),isShownByDefault:null==defaultSpacingControls?void 0:defaultSpacingControls.margin,panelId:props.clientId,children:(0,jsx_runtime.jsx)(MarginEdit,{onMouseOver:marginMouseOver.onMouseOver,onMouseOut:marginMouseOver.onMouseOut,...props})}),!isGapDisabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.Z,{className:spacingClassnames,hasValue:()=>function hasGapValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.spacing)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.blockGap)}(props),label:(0,build_module.__)("Block spacing"),onDeselect:()=>function resetGap(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:{...style,spacing:{...null==style?void 0:style.spacing,blockGap:void 0}}})}(props),resetAllFilter:createResetAllFilter("blockGap","spacing"),isShownByDefault:null==defaultSpacingControls?void 0:defaultSpacingControls.blockGap,panelId:props.clientId,children:(0,jsx_runtime.jsx)(GapEdit,{...props})}),!isMinHeightDisabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.Z,{hasValue:()=>function hasMinHeightValue(props){var _props$attributes$sty,_props$attributes$sty2;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty||null===(_props$attributes$sty2=_props$attributes$sty.dimensions)||void 0===_props$attributes$sty2?void 0:_props$attributes$sty2.minHeight)}(props),label:(0,build_module.__)("Min. height"),onDeselect:()=>function resetMinHeight(_ref){let{attributes:attributes={},setAttributes:setAttributes}=_ref;const{style:style}=attributes;setAttributes({style:cleanEmptyObject({...style,dimensions:{...null==style?void 0:style.dimensions,minHeight:void 0}})})}(props),resetAllFilter:createResetAllFilter("minHeight","dimensions"),isShownByDefault:null==defaultDimensionsControls?void 0:defaultDimensionsControls.minHeight,panelId:props.clientId,children:(0,jsx_runtime.jsx)(MinHeightEdit,{...props})}),!isChildLayoutDisabled&&(0,jsx_runtime.jsx)(v_stack_component.Z,{as:tools_panel_item_component.Z,spacing:2,hasValue:()=>function hasChildLayoutValue(props){var _props$attributes$sty;return void 0!==(null===(_props$attributes$sty=props.attributes.style)||void 0===_props$attributes$sty?void 0:_props$attributes$sty.layout)}(props),label:childLayoutOrientation(parentLayout),onDeselect:()=>function resetChildLayout(_ref3){let{attributes:attributes={},setAttributes:setAttributes}=_ref3;const{style:style}=attributes;setAttributes({style:{...style,layout:void 0}})}(props),resetAllFilter:createResetAllFilter("selfStretch","layout"),isShownByDefault:!1,panelId:props.clientId,children:(0,jsx_runtime.jsx)(ChildLayoutEdit,{...props})})]}),!isPaddingDisabled&&(0,jsx_runtime.jsx)(PaddingVisualizer,{forceShow:paddingMouseOver.isMouseOver,...props}),!isMarginDisabled&&(0,jsx_runtime.jsx)(MarginVisualizer,{forceShow:marginMouseOver.isMouseOver,...props})]})}const useIsDimensionsDisabled=function(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const gapDisabled=useIsGapDisabled(props),minHeightDisabled=useIsMinHeightDisabled(props),paddingDisabled=useIsPaddingDisabled(props),marginDisabled=useIsMarginDisabled(props),childLayoutDisabled=useIsChildLayoutDisabled(props);return gapDisabled&&minHeightDisabled&&paddingDisabled&&marginDisabled&&childLayoutDisabled};function useCustomSides(blockName,feature){var _support$feature;const support=(0,blocks_build_module.Dx)(blockName,SPACING_SUPPORT_KEY);if(support&&"boolean"!=typeof support[feature])return Array.isArray(support[feature])?support[feature]:null!==(_support$feature=support[feature])&&void 0!==_support$feature&&_support$feature.sides?support[feature].sides:void 0}function useIsDimensionsSupportValid(blockName,feature){const sides=useCustomSides(blockName,feature);return!(sides&&sides.some((side=>dimensions_ALL_SIDES.includes(side)))&&sides.some((side=>AXIAL_SIDES.includes(side))))||(console.warn(`The ${feature} support for the "${blockName}" block can not be configured to support both axial and arbitrary sides.`),!1)}function hasGapSupport(blockType){const support=(0,blocks_build_module.Dx)(blockType,SPACING_SUPPORT_KEY);return!!(!0===support||null!=support&&support.blockGap)}function getGapBoxControlValueFromStyle(blockGapValue){if(!blockGapValue)return null;const isValueString="string"==typeof blockGapValue;return{top:isValueString?blockGapValue:null==blockGapValue?void 0:blockGapValue.top,left:isValueString?blockGapValue:null==blockGapValue?void 0:blockGapValue.left}}function getGapCSSValue(blockGapValue){let defaultValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";const blockGapBoxControlValue=getGapBoxControlValueFromStyle(blockGapValue);if(!blockGapBoxControlValue)return null;const row=getSpacingPresetCssVar(null==blockGapBoxControlValue?void 0:blockGapBoxControlValue.top)||defaultValue,column=getSpacingPresetCssVar(null==blockGapBoxControlValue?void 0:blockGapBoxControlValue.left)||defaultValue;return row===column?row:`${row} ${column}`}function useIsGapDisabled(){let{name:blockName}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const isDisabled=!(0,use_setting.Z)("spacing.blockGap");return!hasGapSupport(blockName)||isDisabled}function GapEdit(props){var _style$spacing;const{clientId:clientId,attributes:{style:style},name:blockName,setAttributes:setAttributes}=props,spacingSizes=(0,use_setting.Z)("spacing.spacingSizes"),units=(0,utils.nj)({availableUnits:(0,use_setting.Z)("spacing.units")||["%","px","em","rem","vw"]}),sides=useCustomSides(blockName,"blockGap"),ref=useBlockRef(clientId);if(useIsGapDisabled(props))return null;const splitOnAxis=sides&&sides.some((side=>AXIAL_SIDES.includes(side))),onChange=next=>{var _window;let blockGap=next;next&&splitOnAxis?blockGap={...getGapBoxControlValueFromStyle(next)}:null!=next&&next.hasOwnProperty("top")&&(blockGap=next.top);const newStyle={...style,spacing:{...null==style?void 0:style.spacing,blockGap:blockGap}};setAttributes({style:cleanEmptyObject(newStyle)});const isSafari=(null===(_window=window)||void 0===_window?void 0:_window.navigator.userAgent)&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome ")&&!window.navigator.userAgent.includes("Chromium ");var _ref$current$parentNo;ref.current&&isSafari&&(null===(_ref$current$parentNo=ref.current.parentNode)||void 0===_ref$current$parentNo||_ref$current$parentNo.replaceChild(ref.current,ref.current))},gapValue=getGapBoxControlValueFromStyle(null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.blockGap),boxControlGapValue=splitOnAxis?{...gapValue,right:null==gapValue?void 0:gapValue.left,bottom:null==gapValue?void 0:gapValue.top}:{top:null==gapValue?void 0:gapValue.top};return platform.Z.select({web:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(!spacingSizes||0===(null==spacingSizes?void 0:spacingSizes.length))&&(splitOnAxis?(0,jsx_runtime.jsx)(box_control.Z,{label:(0,build_module.__)("Block spacing"),min:0,onChange:onChange,units:units,sides:sides,values:boxControlGapValue,allowReset:!1,splitOnAxis:splitOnAxis}):(0,jsx_runtime.jsx)(unit_control.ZP,{label:(0,build_module.__)("Block spacing"),__unstableInputWidth:"80px",min:0,onChange:onChange,units:units,value:boxControlGapValue})),(null==spacingSizes?void 0:spacingSizes.length)>0&&(0,jsx_runtime.jsx)(SpacingSizesControl,{values:boxControlGapValue,onChange:onChange,label:(0,build_module.__)("Block spacing"),sides:splitOnAxis?sides:["top"],units:units,allowReset:!1,splitOnAxis:splitOnAxis})]}),native:null})}DimensionsPanel.__docgenInfo={description:"Inspector controls for dimensions support.\n\n@param {Object} props Block props.\n\n@return {WPElement} Inspector controls for dimensions and spacing support features.",methods:[],displayName:"DimensionsPanel"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/hooks/dimensions.js"]={name:"DimensionsPanel",docgenInfo:DimensionsPanel.__docgenInfo,path:"packages/block-editor/src/hooks/dimensions.js"});var toolbar_context=__webpack_require__("./packages/components/build-module/toolbar-context/index.js"),toolbar_group=__webpack_require__("./packages/components/build-module/toolbar-group/index.js");var block_controls_groups={default:(0,slot_fill.up)("BlockControls"),block:(0,slot_fill.up)("BlockControlsBlock"),inline:(0,slot_fill.up)("BlockFormatControls"),other:(0,slot_fill.up)("BlockControlsOther"),parent:(0,slot_fill.up)("BlockControlsParent")};function BlockControlsFill(_ref){let{group:group="default",controls:controls,children:children,__experimentalShareWithChildBlocks:__experimentalShareWithChildBlocks=!1}=_ref;const Fill=function useBlockControlsFill(group,shareWithChildBlocks){const isDisplayed=useDisplayBlockControls(),{clientId:clientId}=(0,block_edit_context.Z8)(),isParentDisplayed=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,hasSelectedInnerBlock:hasSelectedInnerBlock}=select(store.h),{hasBlockSupport:hasBlockSupport}=select(blocks_build_module.h);return shareWithChildBlocks&&hasBlockSupport(getBlockName(clientId),"__experimentalExposeControlsToChildren",!1)&&hasSelectedInnerBlock(clientId)}),[shareWithChildBlocks,clientId]);var _groups$group;return isDisplayed?null===(_groups$group=block_controls_groups[group])||void 0===_groups$group?void 0:_groups$group.Fill:isParentDisplayed?block_controls_groups.parent.Fill:null}(group,__experimentalShareWithChildBlocks);return Fill?(0,jsx_runtime.jsx)(style_provider.Z,{document:document,children:(0,jsx_runtime.jsx)(Fill,{children:fillProps=>{const value=(0,lodash.isEmpty)(fillProps)?null:fillProps;return(0,jsx_runtime.jsxs)(toolbar_context.Z.Provider,{value:value,children:["default"===group&&(0,jsx_runtime.jsx)(toolbar_group.Z,{controls:controls}),children]})}})}):null}function BlockControlsSlot(_ref){let{group:group="default",...props}=_ref;const accessibleToolbarState=(0,react.useContext)(toolbar_context.Z),Slot=block_controls_groups[group].Slot,fills=(0,use_slot_fills.Z)(Slot.__unstableName);return Boolean(fills&&fills.length)?"default"===group?(0,jsx_runtime.jsx)(Slot,{...props,bubblesVirtually:!0,fillProps:accessibleToolbarState}):(0,jsx_runtime.jsx)(toolbar_group.Z,{children:(0,jsx_runtime.jsx)(Slot,{...props,bubblesVirtually:!0,fillProps:accessibleToolbarState})}):null}BlockControlsFill.displayName="BlockControlsFill",BlockControlsFill.__docgenInfo={description:"",methods:[],displayName:"BlockControlsFill",props:{group:{defaultValue:{value:"'default'",computed:!1},required:!1},__experimentalShareWithChildBlocks:{defaultValue:{value:"false",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-controls/fill.js"]={name:"BlockControlsFill",docgenInfo:BlockControlsFill.__docgenInfo,path:"packages/block-editor/src/components/block-controls/fill.js"}),BlockControlsSlot.displayName="BlockControlsSlot",BlockControlsSlot.__docgenInfo={description:"",methods:[],displayName:"BlockControlsSlot",props:{group:{defaultValue:{value:"'default'",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-controls/slot.js"]={name:"BlockControlsSlot",docgenInfo:BlockControlsSlot.__docgenInfo,path:"packages/block-editor/src/components/block-controls/slot.js"});const BlockControls=BlockControlsFill;BlockControls.Slot=BlockControlsSlot;const BlockFormatControls=props=>(0,jsx_runtime.jsx)(BlockControlsFill,{group:"inline",...props});BlockFormatControls.displayName="BlockFormatControls",BlockFormatControls.Slot=props=>(0,jsx_runtime.jsx)(BlockControlsSlot,{group:"inline",...props});var block_controls=BlockControls;BlockFormatControls.__docgenInfo={description:"",methods:[{name:"Slot",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"BlockFormatControls"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-controls/index.js"]={name:"BlockFormatControls",docgenInfo:BlockFormatControls.__docgenInfo,path:"packages/block-editor/src/components/block-controls/index.js"});var toolbar_dropdown_menu=__webpack_require__("./packages/components/build-module/toolbar-dropdown-menu/index.js"),svg=__webpack_require__("./packages/primitives/build-module/svg/index.js");const alignBottom=(0,jsx_runtime.jsx)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.y$,{d:"M15 4H9v11h6V4zM4 18.5V20h16v-1.5H4z"})}),alignCenter=(0,jsx_runtime.jsx)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.y$,{d:"M20 11h-5V4H9v7H4v1.5h5V20h6v-7.5h5z"})}),BLOCK_ALIGNMENTS_CONTROLS={top:{icon:(0,jsx_runtime.jsx)(svg.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.y$,{d:"M9 20h6V9H9v11zM4 4v1.5h16V4H4z"})}),title:(0,build_module._x)("Align top","Block vertical alignment setting")},center:{icon:alignCenter,title:(0,build_module._x)("Align middle","Block vertical alignment setting")},bottom:{icon:alignBottom,title:(0,build_module._x)("Align bottom","Block vertical alignment setting")}},DEFAULT_CONTROLS=["top","center","bottom"],POPOVER_PROPS={variant:"toolbar"};function BlockVerticalAlignmentUI(_ref){let{value:value,onChange:onChange,controls:controls=DEFAULT_CONTROLS,isCollapsed:isCollapsed=!0,isToolbar:isToolbar}=_ref;const activeAlignment=BLOCK_ALIGNMENTS_CONTROLS[value],defaultAlignmentControl=BLOCK_ALIGNMENTS_CONTROLS.top,UIComponent=isToolbar?toolbar_group.Z:toolbar_dropdown_menu.Z,extraProps=isToolbar?{isCollapsed:isCollapsed}:{popoverProps:{POPOVER_PROPS:POPOVER_PROPS}};return(0,jsx_runtime.jsx)(UIComponent,{icon:activeAlignment?activeAlignment.icon:defaultAlignmentControl.icon,label:(0,build_module._x)("Change vertical alignment","Block vertical alignment setting label"),controls:controls.map((control=>{return{...BLOCK_ALIGNMENTS_CONTROLS[control],isActive:value===control,role:isCollapsed?"menuitemradio":void 0,onClick:(align=control,()=>onChange(value===align?void 0:align))};var align})),...extraProps})}BlockVerticalAlignmentUI.displayName="BlockVerticalAlignmentUI",BlockVerticalAlignmentUI.__docgenInfo={description:"",methods:[],displayName:"BlockVerticalAlignmentUI",props:{controls:{defaultValue:{value:"[ 'top', 'center', 'bottom' ]",computed:!1},required:!1},isCollapsed:{defaultValue:{value:"true",computed:!1},required:!1}}};var ui=BlockVerticalAlignmentUI;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-vertical-alignment-control/ui.js"]={name:"BlockVerticalAlignmentUI",docgenInfo:BlockVerticalAlignmentUI.__docgenInfo,path:"packages/block-editor/src/components/block-vertical-alignment-control/ui.js"});const BlockVerticalAlignmentControl=props=>(0,jsx_runtime.jsx)(ui,{...props,isToolbar:!1});BlockVerticalAlignmentControl.displayName="BlockVerticalAlignmentControl";const BlockVerticalAlignmentToolbar=props=>(0,jsx_runtime.jsx)(ui,{...props,isToolbar:!0});BlockVerticalAlignmentToolbar.displayName="BlockVerticalAlignmentToolbar",BlockVerticalAlignmentControl.__docgenInfo={description:"",methods:[],displayName:"BlockVerticalAlignmentControl"},BlockVerticalAlignmentToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockVerticalAlignmentToolbar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-vertical-alignment-control/index.js"]={name:"BlockVerticalAlignmentControl",docgenInfo:BlockVerticalAlignmentControl.__docgenInfo,path:"packages/block-editor/src/components/block-vertical-alignment-control/index.js"}),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-vertical-alignment-control/index.js"]={name:"BlockVerticalAlignmentToolbar",docgenInfo:BlockVerticalAlignmentToolbar.__docgenInfo,path:"packages/block-editor/src/components/block-vertical-alignment-control/index.js"});const icons={left:justify_left.Z,center:justify_center.Z,right:justify_right.Z,"space-between":justify_space_between.Z};function JustifyContentUI(_ref){let{allowedControls:allowedControls=["left","center","right","space-between"],isCollapsed:isCollapsed=!0,onChange:onChange,value:value,popoverProps:popoverProps,isToolbar:isToolbar}=_ref;const handleClick=next=>{onChange(next===value?void 0:next)},icon=value?icons[value]:icons.left,allControls=[{name:"left",icon:justify_left.Z,title:(0,build_module.__)("Justify items left"),isActive:"left"===value,onClick:()=>handleClick("left")},{name:"center",icon:justify_center.Z,title:(0,build_module.__)("Justify items center"),isActive:"center"===value,onClick:()=>handleClick("center")},{name:"right",icon:justify_right.Z,title:(0,build_module.__)("Justify items right"),isActive:"right"===value,onClick:()=>handleClick("right")},{name:"space-between",icon:justify_space_between.Z,title:(0,build_module.__)("Space between items"),isActive:"space-between"===value,onClick:()=>handleClick("space-between")}],UIComponent=isToolbar?toolbar_group.Z:toolbar_dropdown_menu.Z,extraProps=isToolbar?{isCollapsed:isCollapsed}:{};return(0,jsx_runtime.jsx)(UIComponent,{icon:icon,popoverProps:popoverProps,label:(0,build_module.__)("Change items justification"),controls:allControls.filter((elem=>allowedControls.includes(elem.name))),...extraProps})}JustifyContentUI.displayName="JustifyContentUI",JustifyContentUI.__docgenInfo={description:"",methods:[],displayName:"JustifyContentUI",props:{allowedControls:{defaultValue:{value:"[ 'left', 'center', 'right', 'space-between' ]",computed:!1},required:!1},isCollapsed:{defaultValue:{value:"true",computed:!1},required:!1}}};var justify_content_control_ui=JustifyContentUI;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/justify-content-control/ui.js"]={name:"JustifyContentUI",docgenInfo:JustifyContentUI.__docgenInfo,path:"packages/block-editor/src/components/justify-content-control/ui.js"});const JustifyContentControl=props=>(0,jsx_runtime.jsx)(justify_content_control_ui,{...props,isToolbar:!1});JustifyContentControl.displayName="JustifyContentControl";const JustifyToolbar=props=>(0,jsx_runtime.jsx)(justify_content_control_ui,{...props,isToolbar:!0});JustifyToolbar.displayName="JustifyToolbar",JustifyContentControl.__docgenInfo={description:"",methods:[],displayName:"JustifyContentControl"},JustifyToolbar.__docgenInfo={description:"",methods:[],displayName:"JustifyToolbar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/justify-content-control/index.js"]={name:"JustifyContentControl",docgenInfo:JustifyContentControl.__docgenInfo,path:"packages/block-editor/src/components/justify-content-control/index.js"}),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/justify-content-control/index.js"]={name:"JustifyToolbar",docgenInfo:JustifyToolbar.__docgenInfo,path:"packages/block-editor/src/components/justify-content-control/index.js"});const justifyContentMap={left:"flex-start",right:"flex-end",center:"center","space-between":"space-between"},alignItemsMap={left:"flex-start",right:"flex-end",center:"center"},verticalAlignmentMap={top:"flex-start",center:"center",bottom:"flex-end"},flexWrapOptions=["wrap","nowrap"];var flex={name:"flex",label:(0,build_module.__)("Flex"),inspectorControls:function FlexLayoutInspectorControls(_ref){let{layout:layout={},onChange:onChange,layoutBlockSupport:layoutBlockSupport={}}=_ref;const{allowOrientation:allowOrientation=!0}=layoutBlockSupport;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(flex_component.Z,{children:[(0,jsx_runtime.jsx)(flex_item_component.Z,{children:(0,jsx_runtime.jsx)(FlexLayoutJustifyContentControl,{layout:layout,onChange:onChange})}),(0,jsx_runtime.jsx)(flex_item_component.Z,{children:allowOrientation&&(0,jsx_runtime.jsx)(OrientationControl,{layout:layout,onChange:onChange})})]}),(0,jsx_runtime.jsx)(FlexWrapControl,{layout:layout,onChange:onChange})]})},toolBarControls:function FlexLayoutToolbarControls(_ref2){let{layout:layout={},onChange:onChange,layoutBlockSupport:layoutBlockSupport}=_ref2;if(null!=layoutBlockSupport&&layoutBlockSupport.allowSwitching)return null;const{allowVerticalAlignment:allowVerticalAlignment=!0}=layoutBlockSupport;return(0,jsx_runtime.jsxs)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0,children:[(0,jsx_runtime.jsx)(FlexLayoutJustifyContentControl,{layout:layout,onChange:onChange,isToolbar:!0}),allowVerticalAlignment&&"vertical"!==(null==layout?void 0:layout.orientation)&&(0,jsx_runtime.jsx)(FlexLayoutVerticalAlignmentControl,{layout:layout,onChange:onChange,isToolbar:!0})]})},getLayoutStyle:function getLayoutStyle(_ref3){var _style$spacing,_style$spacing2;let{selector:selector,layout:layout,style:style,blockName:blockName,hasBlockGapSupport:hasBlockGapSupport,layoutDefinitions:layoutDefinitions}=_ref3;const{orientation:orientation="horizontal"}=layout,blockGapValue=null!=style&&null!==(_style$spacing=style.spacing)&&void 0!==_style$spacing&&_style$spacing.blockGap&&!shouldSkipSerialization(blockName,"spacing","blockGap")?getGapCSSValue(null==style||null===(_style$spacing2=style.spacing)||void 0===_style$spacing2?void 0:_style$spacing2.blockGap,"0.5em"):void 0,justifyContent=justifyContentMap[layout.justifyContent],flexWrap=flexWrapOptions.includes(layout.flexWrap)?layout.flexWrap:"wrap",verticalAlignment=verticalAlignmentMap[layout.verticalAlignment],alignItems=alignItemsMap[layout.justifyContent]||alignItemsMap.left;let output="";const rules=[];return flexWrap&&"wrap"!==flexWrap&&rules.push(`flex-wrap: ${flexWrap}`),"horizontal"===orientation?(verticalAlignment&&rules.push(`align-items: ${verticalAlignment}`),justifyContent&&rules.push(`justify-content: ${justifyContent}`)):(rules.push("flex-direction: column"),rules.push(`align-items: ${alignItems}`)),rules.length&&(output=`${appendSelectors(selector)} {\n\t\t\t\t${rules.join("; ")};\n\t\t\t}`),hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"flex",blockGapValue)),output},getOrientation(layout){const{orientation:orientation="horizontal"}=layout;return orientation},getAlignments:()=>[]};function FlexLayoutVerticalAlignmentControl(_ref4){let{layout:layout,onChange:onChange,isToolbar:isToolbar=!1}=_ref4;const{verticalAlignment:verticalAlignment=verticalAlignmentMap.center}=layout,onVerticalAlignmentChange=value=>{onChange({...layout,verticalAlignment:value})};if(isToolbar)return(0,jsx_runtime.jsx)(BlockVerticalAlignmentControl,{onChange:onVerticalAlignmentChange,value:verticalAlignment});const verticalAlignmentOptions=[{value:"flex-start",label:(0,build_module.__)("Align items top")},{value:"center",label:(0,build_module.__)("Align items center")},{value:"flex-end",label:(0,build_module.__)("Align items bottom")}];return(0,jsx_runtime.jsxs)("fieldset",{className:"block-editor-hooks__flex-layout-vertical-alignment-control",children:[(0,jsx_runtime.jsx)("legend",{children:(0,build_module.__)("Vertical alignment")}),(0,jsx_runtime.jsx)("div",{children:verticalAlignmentOptions.map(((value,icon,label)=>(0,jsx_runtime.jsx)(build_module_button.Z,{label:label,icon:icon,isPressed:verticalAlignment===value,onClick:()=>onVerticalAlignmentChange(value)},value)))})]})}function FlexLayoutJustifyContentControl(_ref5){let{layout:layout,onChange:onChange,isToolbar:isToolbar=!1}=_ref5;const{justifyContent:justifyContent="left",orientation:orientation="horizontal"}=layout,onJustificationChange=value=>{onChange({...layout,justifyContent:value})},allowedControls=["left","center","right"];if("horizontal"===orientation&&allowedControls.push("space-between"),isToolbar)return(0,jsx_runtime.jsx)(JustifyContentControl,{allowedControls:allowedControls,value:justifyContent,onChange:onJustificationChange,popoverProps:{position:"bottom right",variant:"toolbar"}});const justificationOptions=[{value:"left",icon:justify_left.Z,label:(0,build_module.__)("Justify items left")},{value:"center",icon:justify_center.Z,label:(0,build_module.__)("Justify items center")},{value:"right",icon:justify_right.Z,label:(0,build_module.__)("Justify items right")}];return"horizontal"===orientation&&justificationOptions.push({value:"space-between",icon:justify_space_between.Z,label:(0,build_module.__)("Space between items")}),(0,jsx_runtime.jsx)(toggle_group_control_component.Z,{label:(0,build_module.__)("Justification"),value:justifyContent,onChange:onJustificationChange,className:"block-editor-hooks__flex-layout-justification-controls",children:justificationOptions.map((_ref6=>{let{value:value,icon:icon,label:label}=_ref6;return(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.Z,{value:value,icon:icon,label:label},value)}))})}function FlexWrapControl(_ref7){let{layout:layout,onChange:onChange}=_ref7;const{flexWrap:flexWrap="wrap"}=layout;return(0,jsx_runtime.jsx)(toggle_control.Z,{label:(0,build_module.__)("Allow to wrap to multiple lines"),onChange:value=>{onChange({...layout,flexWrap:value?"wrap":"nowrap"})},checked:"wrap"===flexWrap})}function OrientationControl(_ref8){let{layout:layout,onChange:onChange}=_ref8;const{orientation:orientation="horizontal"}=layout;return(0,jsx_runtime.jsxs)(toggle_group_control_component.Z,{className:"block-editor-hooks__flex-layout-orientation-controls",label:(0,build_module.__)("Orientation"),value:orientation,onChange:value=>onChange({...layout,orientation:value}),children:[(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.Z,{icon:arrow_right.Z,value:"horizontal",label:(0,build_module.__)("Horizontal")}),(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.Z,{icon:arrow_down.Z,value:"vertical",label:(0,build_module.__)("Vertical")})]})}FlexLayoutVerticalAlignmentControl.displayName="FlexLayoutVerticalAlignmentControl",FlexLayoutJustifyContentControl.displayName="FlexLayoutJustifyContentControl",FlexWrapControl.displayName="FlexWrapControl",OrientationControl.displayName="OrientationControl";var flow={name:"default",label:(0,build_module.__)("Flow"),inspectorControls:function DefaultLayoutInspectorControls(){return null},toolBarControls:function DefaultLayoutToolbarControls(){return null},getLayoutStyle:function getLayoutStyle(_ref){var _style$spacing;let{selector:selector,style:style,blockName:blockName,hasBlockGapSupport:hasBlockGapSupport,layoutDefinitions:layoutDefinitions}=_ref;const blockGapStyleValue=getGapCSSValue(null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.blockGap);let blockGapValue="";shouldSkipSerialization(blockName,"spacing","blockGap")||(null!=blockGapStyleValue&&blockGapStyleValue.top?blockGapValue=getGapCSSValue(null==blockGapStyleValue?void 0:blockGapStyleValue.top):"string"==typeof blockGapStyleValue&&(blockGapValue=getGapCSSValue(blockGapStyleValue)));let output="";return hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"default",blockGapValue)),output},getOrientation:()=>"vertical",getAlignments(layout){const alignmentInfo=getAlignmentsInfo(layout);if(void 0!==layout.alignments)return layout.alignments.includes("none")||layout.alignments.unshift("none"),layout.alignments.map((alignment=>({name:alignment,info:alignmentInfo[alignment]})));const{contentSize:contentSize,wideSize:wideSize}=layout,alignments=[{name:"left"},{name:"center"},{name:"right"}];return contentSize&&alignments.unshift({name:"full"}),wideSize&&alignments.unshift({name:"wide",info:alignmentInfo.wide}),alignments.unshift({name:"none",info:alignmentInfo.none}),alignments}},icon=__webpack_require__("./packages/icons/build-module/icon/index.js"),position_center=__webpack_require__("./packages/icons/build-module/library/position-center.js"),stretch_wide=__webpack_require__("./packages/icons/build-module/library/stretch-wide.js"),style_engine_build_module=__webpack_require__("./packages/style-engine/build-module/index.js"),constrained={name:"constrained",label:(0,build_module.__)("Constrained"),inspectorControls:function DefaultLayoutInspectorControls(_ref){let{layout:layout,onChange:onChange}=_ref;const{wideSize:wideSize,contentSize:contentSize,justifyContent:justifyContent="center"}=layout,justificationOptions=[{value:"left",icon:justify_left.Z,label:(0,build_module.__)("Justify items left")},{value:"center",icon:justify_center.Z,label:(0,build_module.__)("Justify items center")},{value:"right",icon:justify_right.Z,label:(0,build_module.__)("Justify items right")}],units=(0,utils.nj)({availableUnits:(0,use_setting.Z)("spacing.units")||["%","px","em","rem","vw"]});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-hooks__layout-controls",children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-hooks__layout-controls-unit",children:[(0,jsx_runtime.jsx)(unit_control.ZP,{label:(0,build_module.__)("Content"),labelPosition:"top",__unstableInputWidth:"80px",value:contentSize||wideSize||"",onChange:nextWidth=>{nextWidth=0>parseFloat(nextWidth)?"0":nextWidth,onChange({...layout,contentSize:nextWidth})},units:units}),(0,jsx_runtime.jsx)(icon.Z,{icon:position_center.Z})]}),(0,jsx_runtime.jsxs)("div",{className:"block-editor-hooks__layout-controls-unit",children:[(0,jsx_runtime.jsx)(unit_control.ZP,{label:(0,build_module.__)("Wide"),labelPosition:"top",__unstableInputWidth:"80px",value:wideSize||contentSize||"",onChange:nextWidth=>{nextWidth=0>parseFloat(nextWidth)?"0":nextWidth,onChange({...layout,wideSize:nextWidth})},units:units}),(0,jsx_runtime.jsx)(icon.Z,{icon:stretch_wide.Z})]})]}),(0,jsx_runtime.jsx)("p",{className:"block-editor-hooks__layout-controls-helptext",children:(0,build_module.__)("Customize the width for all elements that are assigned to the center or wide columns.")}),(0,jsx_runtime.jsx)(toggle_group_control_component.Z,{label:(0,build_module.__)("Justification"),value:justifyContent,onChange:value=>{onChange({...layout,justifyContent:value})},children:justificationOptions.map((_ref2=>{let{value:value,icon:icon,label:label}=_ref2;return(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.Z,{value:value,icon:icon,label:label},value)}))})]})},toolBarControls:function DefaultLayoutToolbarControls(){return null},getLayoutStyle:function getLayoutStyle(_ref3){var _style$spacing,_style$spacing2;let{selector:selector,layout:layout={},style:style,blockName:blockName,hasBlockGapSupport:hasBlockGapSupport,layoutDefinitions:layoutDefinitions}=_ref3;const{contentSize:contentSize,wideSize:wideSize,justifyContent:justifyContent}=layout,blockGapStyleValue=getGapCSSValue(null==style||null===(_style$spacing=style.spacing)||void 0===_style$spacing?void 0:_style$spacing.blockGap);let blockGapValue="";shouldSkipSerialization(blockName,"spacing","blockGap")||(null!=blockGapStyleValue&&blockGapStyleValue.top?blockGapValue=getGapCSSValue(null==blockGapStyleValue?void 0:blockGapStyleValue.top):"string"==typeof blockGapStyleValue&&(blockGapValue=getGapCSSValue(blockGapStyleValue)));const marginLeft="left"===justifyContent?"0 !important":"auto !important",marginRight="right"===justifyContent?"0 !important":"auto !important";let output=contentSize||wideSize?`\n\t\t\t\t\t${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")} {\n\t\t\t\t\t\tmax-width: ${null!=contentSize?contentSize:wideSize};\n\t\t\t\t\t\tmargin-left: ${marginLeft};\n\t\t\t\t\t\tmargin-right: ${marginRight};\n\t\t\t\t\t}\n\t\t\t\t\t${appendSelectors(selector,"> .alignwide")}  {\n\t\t\t\t\t\tmax-width: ${null!=wideSize?wideSize:contentSize};\n\t\t\t\t\t}\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmax-width: none;\n\t\t\t\t\t}\n\t\t\t\t`:"";if("left"===justifyContent?output+=`${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")}\n\t\t\t{ margin-left: ${marginLeft}; }`:"right"===justifyContent&&(output+=`${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")}\n\t\t\t{ margin-right: ${marginRight}; }`),null!=style&&null!==(_style$spacing2=style.spacing)&&void 0!==_style$spacing2&&_style$spacing2.padding){(0,style_engine_build_module.R)(style).forEach((rule=>{"paddingRight"===rule.key?output+=`\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmargin-right: calc(${rule.value} * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`:"paddingLeft"===rule.key&&(output+=`\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmargin-left: calc(${rule.value} * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`)}))}return hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"constrained",blockGapValue)),output},getOrientation:()=>"vertical",getAlignments(layout){const alignmentInfo=getAlignmentsInfo(layout);if(void 0!==layout.alignments)return layout.alignments.includes("none")||layout.alignments.unshift("none"),layout.alignments.map((alignment=>({name:alignment,info:alignmentInfo[alignment]})));const{contentSize:contentSize,wideSize:wideSize}=layout,alignments=[{name:"left"},{name:"center"},{name:"right"}];return contentSize&&alignments.unshift({name:"full"}),wideSize&&alignments.unshift({name:"wide",info:alignmentInfo.wide}),alignments.unshift({name:"none",info:alignmentInfo.none}),alignments}};const layoutTypes=[flow,flex,constrained];function getLayoutType(){let name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return layoutTypes.find((layoutType=>layoutType.name===name))}const defaultLayout={type:"default"},Layout=(0,react.createContext)(defaultLayout),LayoutProvider=Layout.Provider;function LayoutStyle(_ref){let{layout:layout={},css:css,...props}=_ref;const layoutType=getLayoutType(layout.type),hasBlockGapSupport=null!==(0,use_setting.Z)("spacing.blockGap");if(layoutType){var _layoutType$getLayout;if(css)return(0,jsx_runtime.jsx)("style",{children:css});const layoutStyle=null===(_layoutType$getLayout=layoutType.getLayoutStyle)||void 0===_layoutType$getLayout?void 0:_layoutType$getLayout.call(layoutType,{hasBlockGapSupport:hasBlockGapSupport,layout:layout,...props});if(layoutStyle)return(0,jsx_runtime.jsx)("style",{children:layoutStyle})}return null}LayoutStyle.__docgenInfo={description:"",methods:[],displayName:"LayoutStyle",props:{layout:{defaultValue:{value:"{}",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/layout.js"]={name:"LayoutStyle",docgenInfo:LayoutStyle.__docgenInfo,path:"packages/block-editor/src/components/block-list/layout.js"});const BlockListBlockContext=(0,react.createContext)();function Block(_ref){let{children:children,isHtml:isHtml,...props}=_ref;return(0,jsx_runtime.jsx)("div",{...useBlockProps(props,{__unstableIsHtml:isHtml}),children:children})}function BlockListBlock(_ref2){var _wrapperProps;let{block:{__unstableBlockSource:__unstableBlockSource},mode:mode,isLocked:isLocked,canRemove:canRemove,clientId:clientId,isSelected:isSelected,isSelectionEnabled:isSelectionEnabled,className:className,__unstableLayoutClassNames:layoutClassNames,name:name,isValid:isValid,attributes:attributes,wrapperProps:wrapperProps,setAttributes:setAttributes,onReplace:onReplace,onInsertBlocksAfter:onInsertBlocksAfter,onMerge:onMerge,toggleSelection:toggleSelection}=_ref2;const{themeSupportsLayout:themeSupportsLayout,hasContentLockedParent:hasContentLockedParent,isContentBlock:isContentBlock,isContentLocking:isContentLocking,isTemporarilyEditingAsBlocks:isTemporarilyEditingAsBlocks}=(0,use_select.Z)((select=>{const{getSettings:getSettings,__unstableGetContentLockingParent:__unstableGetContentLockingParent,getTemplateLock:getTemplateLock,__unstableGetTemporarilyEditingAsBlocks:__unstableGetTemporarilyEditingAsBlocks}=select(store.h),_hasContentLockedParent=!!__unstableGetContentLockingParent(clientId);return{themeSupportsLayout:getSettings().supportsLayout,isContentBlock:select(blocks_build_module.h).__experimentalHasContentRoleAttribute(name),hasContentLockedParent:_hasContentLockedParent,isContentLocking:"contentOnly"===getTemplateLock(clientId)&&!_hasContentLockedParent,isTemporarilyEditingAsBlocks:__unstableGetTemporarilyEditingAsBlocks()===clientId}}),[name,clientId]),{removeBlock:removeBlock}=(0,use_dispatch.Z)(store.h),onRemove=(0,react.useCallback)((()=>removeBlock(clientId)),[clientId]),parentLayout=function useLayout(){return(0,react.useContext)(Layout)}()||{};let blockEdit=(0,jsx_runtime.jsx)(BlockEdit,{name:name,isSelected:isSelected,attributes:attributes,setAttributes:setAttributes,insertBlocksAfter:isLocked?void 0:onInsertBlocksAfter,onReplace:canRemove?onReplace:void 0,onRemove:canRemove?onRemove:void 0,mergeBlocks:canRemove?onMerge:void 0,clientId:clientId,isSelectionEnabled:isSelectionEnabled,toggleSelection:toggleSelection,__unstableLayoutClassNames:layoutClassNames,__unstableParentLayout:Object.keys(parentLayout).length?parentLayout:void 0});const blockType=(0,blocks_build_module.ck)(name);hasContentLockedParent&&!isContentBlock&&(wrapperProps={...wrapperProps,tabIndex:-1}),null!=blockType&&blockType.getEditWrapperProps&&(wrapperProps=function mergeWrapperProps(propsA,propsB){const newProps={...propsA,...propsB};return null!=propsA&&propsA.className&&null!=propsB&&propsB.className&&(newProps.className=classnames_default()(propsA.className,propsB.className)),null!=propsA&&propsA.style&&null!=propsB&&propsB.style&&(newProps.style={...propsA.style,...propsB.style}),newProps}(wrapperProps,blockType.getEditWrapperProps(attributes)));const isAligned=wrapperProps&&!!wrapperProps["data-align"]&&!themeSupportsLayout;let block;if(isAligned&&(blockEdit=(0,jsx_runtime.jsx)("div",{className:"wp-block","data-align":wrapperProps["data-align"],children:blockEdit})),isValid)block="html"===mode?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{display:"none"},children:blockEdit}),(0,jsx_runtime.jsx)(Block,{isHtml:!0,children:(0,jsx_runtime.jsx)(block_html,{clientId:clientId})})]}):(null==blockType?void 0:blockType.apiVersion)>1?blockEdit:(0,jsx_runtime.jsx)(Block,{...wrapperProps,children:blockEdit});else{const saveContent=__unstableBlockSource?(0,blocks_build_module.rq)(__unstableBlockSource):(0,blocks_build_module.kD)(blockType,attributes);block=(0,jsx_runtime.jsxs)(Block,{className:"has-warning",children:[(0,jsx_runtime.jsx)(block_invalid_warning,{clientId:clientId}),(0,jsx_runtime.jsx)(raw_html.Z,{children:(0,safe_html.Z)(saveContent)})]})}const{"data-align":dataAlign,...restWrapperProps}=null!==(_wrapperProps=wrapperProps)&&void 0!==_wrapperProps?_wrapperProps:{},value={clientId:clientId,className:classnames_default()({"is-content-locked":isContentLocking,"is-content-locked-temporarily-editing-as-blocks":isTemporarilyEditingAsBlocks,"is-content-block":hasContentLockedParent&&isContentBlock},dataAlign&&themeSupportsLayout&&`align${dataAlign}`,className),wrapperProps:restWrapperProps,isAligned:isAligned},memoizedValue=(0,react.useMemo)((()=>value),Object.values(value));return(0,jsx_runtime.jsx)(BlockListBlockContext.Provider,{value:memoizedValue,children:(0,jsx_runtime.jsx)(block_crash_boundary,{fallback:(0,jsx_runtime.jsx)(Block,{className:"has-warning",children:(0,jsx_runtime.jsx)(block_crash_warning,{})}),children:block})})}Block.displayName="Block",BlockListBlock.displayName="BlockListBlock";const applyWithSelect=(0,with_select.Z)(((select,_ref3)=>{let{clientId:clientId,rootClientId:rootClientId}=_ref3;const{isBlockSelected:isBlockSelected,getBlockMode:getBlockMode,isSelectionEnabled:isSelectionEnabled,getTemplateLock:getTemplateLock,__unstableGetBlockWithoutInnerBlocks:__unstableGetBlockWithoutInnerBlocks,canRemoveBlock:canRemoveBlock,canMoveBlock:canMoveBlock}=select(store.h),block=__unstableGetBlockWithoutInnerBlocks(clientId),isSelected=isBlockSelected(clientId),templateLock=getTemplateLock(rootClientId),canRemove=canRemoveBlock(clientId,rootClientId),canMove=canMoveBlock(clientId,rootClientId),{name:name,attributes:attributes,isValid:isValid}=block||{};return{mode:getBlockMode(clientId),isSelectionEnabled:isSelectionEnabled(),isLocked:!!templateLock,canRemove:canRemove,canMove:canMove,block:block,name:name,attributes:attributes,isValid:isValid,isSelected:isSelected}})),applyWithDispatch=(0,with_dispatch.Z)(((dispatch,ownProps,registry)=>{const{updateBlockAttributes:updateBlockAttributes,insertBlocks:insertBlocks,mergeBlocks:mergeBlocks,replaceBlocks:replaceBlocks,toggleSelection:toggleSelection,__unstableMarkLastChangeAsPersistent:__unstableMarkLastChangeAsPersistent,moveBlocksToPosition:moveBlocksToPosition,removeBlock:removeBlock}=dispatch(store.h);return{setAttributes(newAttributes){const{getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds}=registry.select(store.h),multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(),{clientId:clientId}=ownProps,clientIds=multiSelectedBlockClientIds.length?multiSelectedBlockClientIds:[clientId];updateBlockAttributes(clientIds,newAttributes)},onInsertBlocks(blocks,index){const{rootClientId:rootClientId}=ownProps;insertBlocks(blocks,index,rootClientId)},onInsertBlocksAfter(blocks){const{clientId:clientId,rootClientId:rootClientId}=ownProps,{getBlockIndex:getBlockIndex}=registry.select(store.h),index=getBlockIndex(clientId);insertBlocks(blocks,index+1,rootClientId)},onMerge(forward){const{clientId:clientId,rootClientId:rootClientId}=ownProps,{getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId,getBlock:getBlock,getBlockAttributes:getBlockAttributes,getBlockName:getBlockName,getBlockOrder:getBlockOrder,getBlockIndex:getBlockIndex,getBlockRootClientId:getBlockRootClientId,canInsertBlockType:canInsertBlockType}=registry.select(store.h);function moveFirstItemUp(_clientId){let changeSelection=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const targetRootClientId=getBlockRootClientId(_clientId),blockOrder=getBlockOrder(_clientId),[firstClientId]=blockOrder;if(1===blockOrder.length&&(0,blocks_build_module.pe)(getBlock(firstClientId)))removeBlock(_clientId);else{if(canInsertBlockType(getBlockName(firstClientId),targetRootClientId))moveBlocksToPosition([firstClientId],_clientId,targetRootClientId,getBlockIndex(_clientId));else{const replacement=(0,blocks_build_module.m4)(getBlock(firstClientId),(0,blocks_build_module.UT)());replacement&&replacement.length&&registry.batch((()=>{insertBlocks(replacement,getBlockIndex(_clientId),targetRootClientId,changeSelection),removeBlock(firstClientId,!1)}))}!getBlockOrder(_clientId).length&&(0,blocks_build_module.pe)(getBlock(_clientId))&&removeBlock(_clientId,!1)}}if(forward){if(rootClientId){const nextRootClientId=getNextBlockClientId(rootClientId);if(nextRootClientId){if(getBlockName(rootClientId)!==getBlockName(nextRootClientId))return void mergeBlocks(rootClientId,nextRootClientId);{const rootAttributes=getBlockAttributes(rootClientId),previousRootAttributes=getBlockAttributes(nextRootClientId);if(Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key])))return void registry.batch((()=>{moveBlocksToPosition(getBlockOrder(nextRootClientId),nextRootClientId,rootClientId),removeBlock(nextRootClientId,!1)}))}}}const nextBlockClientId=getNextBlockClientId(clientId);if(!nextBlockClientId)return;getBlockOrder(nextBlockClientId).length?moveFirstItemUp(nextBlockClientId,!1):mergeBlocks(clientId,nextBlockClientId)}else{const previousBlockClientId=getPreviousBlockClientId(clientId);if(previousBlockClientId)mergeBlocks(previousBlockClientId,clientId);else if(rootClientId){const previousRootClientId=getPreviousBlockClientId(rootClientId);if(previousRootClientId&&getBlockName(rootClientId)===getBlockName(previousRootClientId)){const rootAttributes=getBlockAttributes(rootClientId),previousRootAttributes=getBlockAttributes(previousRootClientId);if(Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key])))return void registry.batch((()=>{moveBlocksToPosition(getBlockOrder(rootClientId),rootClientId,previousRootClientId),removeBlock(rootClientId,!1)}))}moveFirstItemUp(rootClientId)}}},onReplace(blocks,indexToSelect,initialPosition){blocks.length&&!(0,blocks_build_module.ZP)(blocks[blocks.length-1])&&__unstableMarkLastChangeAsPersistent(),replaceBlocks([ownProps.clientId],blocks,indexToSelect,initialPosition)},toggleSelection(selectionEnabled){toggleSelection(selectionEnabled)}}}));BlockListBlock.__docgenInfo={description:"",methods:[],displayName:"BlockListBlock"};var block=(0,compose.Z)(pure.Z,applyWithSelect,applyWithDispatch,(0,if_condition.Z)((_ref4=>{let{block:block}=_ref4;return!!block})),(0,with_filters.Z)("editor.BlockListBlock"))(BlockListBlock);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/block.js"]={name:"BlockListBlock",docgenInfo:BlockListBlock.__docgenInfo,path:"packages/block-editor/src/components/block-list/block.js"});var html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),dropdown=__webpack_require__("./packages/components/build-module/dropdown/index.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js"),use_async_list=__webpack_require__("./packages/compose/build-module/hooks/use-async-list/index.js"),truncate_component=__webpack_require__("./packages/components/build-module/truncate/component.js"),build_module_platform=__webpack_require__("./packages/keycodes/build-module/platform.js"),CompositeItem=__webpack_require__("./node_modules/reakit/es/Composite/CompositeItem.js");var inserter_listbox_context=(0,react.createContext)();function InserterListboxItem(_ref,ref){let{isFirst:isFirst,as:Component,children:children,...props}=_ref;const state=(0,react.useContext)(inserter_listbox_context);return(0,jsx_runtime.jsx)(CompositeItem.A,{ref:ref,state:state,role:"option",focusable:!0,...props,children:htmlProps=>{const propsWithTabIndex={...htmlProps,tabIndex:isFirst?0:htmlProps.tabIndex};return Component?(0,jsx_runtime.jsx)(Component,{...propsWithTabIndex,children:children}):"function"==typeof children?children(propsWithTabIndex):(0,jsx_runtime.jsx)(build_module_button.Z,{...propsWithTabIndex,children:children})}})}InserterListboxItem.displayName="InserterListboxItem",InserterListboxItem.__docgenInfo={description:"",methods:[],displayName:"InserterListboxItem"};var inserter_listbox_item=(0,react.forwardRef)(InserterListboxItem);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-listbox/item.js"]={name:"InserterListboxItem",docgenInfo:InserterListboxItem.__docgenInfo,path:"packages/block-editor/src/components/inserter-listbox/item.js"});var draggable=__webpack_require__("./packages/components/build-module/draggable/index.js"),draggable_chip=__webpack_require__("./packages/block-editor/src/components/block-draggable/draggable-chip.js");const InserterDraggableBlocks=_ref=>{let{isEnabled:isEnabled,blocks:blocks,icon:icon,children:children,isPattern:isPattern}=_ref;const transferData={type:"inserter",blocks:blocks};return(0,jsx_runtime.jsx)(draggable.Z,{__experimentalTransferDataType:"wp-blocks",transferData:transferData,__experimentalDragComponent:(0,jsx_runtime.jsx)(draggable_chip.Z,{count:blocks.length,icon:icon,isPattern:isPattern}),children:_ref2=>{let{onDraggableStart:onDraggableStart,onDraggableEnd:onDraggableEnd}=_ref2;return children({draggable:isEnabled,onDragStart:isEnabled?onDraggableStart:void 0,onDragEnd:isEnabled?onDraggableEnd:void 0})}})};InserterDraggableBlocks.displayName="InserterDraggableBlocks",InserterDraggableBlocks.__docgenInfo={description:"",methods:[],displayName:"InserterDraggableBlocks"};var inserter_draggable_blocks=InserterDraggableBlocks;function InserterListItem(_ref){let{className:className,isFirst:isFirst,item:item,onSelect:onSelect,onHover:onHover,isDraggable:isDraggable,...props}=_ref;const isDragging=(0,react.useRef)(!1),itemIconStyle=item.icon?{backgroundColor:item.icon.background,color:item.icon.foreground}:{},blocks=(0,react.useMemo)((()=>[(0,blocks_build_module.j4)(item.name,item.initialAttributes,(0,blocks_build_module.ne)(item.innerBlocks))]),[item.name,item.initialAttributes,item.initialAttributes]),isSynced=(0,blocks_build_module.vr)(item)||(0,blocks_build_module.zQ)(item);return(0,jsx_runtime.jsx)(inserter_draggable_blocks,{isEnabled:isDraggable&&!item.disabled,blocks:blocks,icon:item.icon,children:_ref2=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref2;return(0,jsx_runtime.jsx)("div",{className:classnames_default()("block-editor-block-types-list__list-item",{"is-synced":isSynced}),draggable:draggable,onDragStart:event=>{isDragging.current=!0,onDragStart&&(onHover(null),onDragStart(event))},onDragEnd:event=>{isDragging.current=!1,onDragEnd&&onDragEnd(event)},children:(0,jsx_runtime.jsxs)(inserter_listbox_item,{isFirst:isFirst,className:classnames_default()("block-editor-block-types-list__item",className),disabled:item.isDisabled,onClick:event=>{event.preventDefault(),onSelect(item,(0,build_module_platform.R)()?event.metaKey:event.ctrlKey),onHover(null)},onKeyDown:event=>{const{keyCode:keyCode}=event;keyCode===keycodes_build_module.K5&&(event.preventDefault(),onSelect(item,(0,build_module_platform.R)()?event.metaKey:event.ctrlKey),onHover(null))},onFocus:()=>{isDragging.current||onHover(item)},onMouseEnter:()=>{isDragging.current||onHover(item)},onMouseLeave:()=>onHover(null),onBlur:()=>onHover(null),...props,children:[(0,jsx_runtime.jsx)("span",{className:"block-editor-block-types-list__item-icon",style:itemIconStyle,children:(0,jsx_runtime.jsx)(block_icon.Z,{icon:item.icon,showColors:!0})}),(0,jsx_runtime.jsx)("span",{className:"block-editor-block-types-list__item-title",children:(0,jsx_runtime.jsx)(truncate_component.Z,{numberOfLines:3,children:item.title})})]})})}})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-draggable-blocks/index.js"]={name:"InserterDraggableBlocks",docgenInfo:InserterDraggableBlocks.__docgenInfo,path:"packages/block-editor/src/components/inserter-draggable-blocks/index.js"}),InserterListItem.displayName="InserterListItem",InserterListItem.__docgenInfo={description:"",methods:[],displayName:"InserterListItem"};var inserter_list_item=(0,react.memo)(InserterListItem);function InserterListboxGroup(props,ref){const[shouldSpeak,setShouldSpeak]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{shouldSpeak&&(0,a11y_build_module.D)((0,build_module.__)("Use left and right arrow keys to move through blocks"))}),[shouldSpeak]),(0,jsx_runtime.jsx)("div",{ref:ref,role:"listbox","aria-orientation":"horizontal",onFocus:()=>{setShouldSpeak(!0)},onBlur:event=>{!event.currentTarget.contains(event.relatedTarget)&&setShouldSpeak(!1)},...props})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-list-item/index.js"]={name:"InserterListItem",docgenInfo:InserterListItem.__docgenInfo,path:"packages/block-editor/src/components/inserter-list-item/index.js"}),InserterListboxGroup.displayName="InserterListboxGroup",InserterListboxGroup.__docgenInfo={description:"",methods:[],displayName:"InserterListboxGroup"};var group=(0,react.forwardRef)(InserterListboxGroup);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-listbox/group.js"]={name:"InserterListboxGroup",docgenInfo:InserterListboxGroup.__docgenInfo,path:"packages/block-editor/src/components/inserter-listbox/group.js"});var CompositeGroup=__webpack_require__("./node_modules/reakit/es/Composite/CompositeGroup.js");function InserterListboxRow(props,ref){const state=(0,react.useContext)(inserter_listbox_context);return(0,jsx_runtime.jsx)(CompositeGroup.E,{state:state,role:"presentation",ref:ref,...props})}InserterListboxRow.displayName="InserterListboxRow",InserterListboxRow.__docgenInfo={description:"",methods:[],displayName:"InserterListboxRow"};var inserter_listbox_row=(0,react.forwardRef)(InserterListboxRow);function chunk(array,size){const chunks=[];for(let i=0,j=array.length;i<j;i+=size)chunks.push(array.slice(i,i+size));return chunks}function BlockTypesList(_ref){let{items:items=[],onSelect:onSelect,onHover:onHover=(()=>{}),children:children,label:label,isDraggable:isDraggable=!0}=_ref;return(0,jsx_runtime.jsxs)(group,{className:"block-editor-block-types-list","aria-label":label,children:[chunk(items,3).map(((row,i)=>(0,jsx_runtime.jsx)(inserter_listbox_row,{children:row.map(((item,j)=>(0,jsx_runtime.jsx)(inserter_list_item,{item:item,className:(0,blocks_build_module.hq)(item.id),onSelect:onSelect,onHover:onHover,isDraggable:isDraggable&&!item.isDisabled,isFirst:0===i&&0===j},item.id)))},i))),children]})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-listbox/row.js"]={name:"InserterListboxRow",docgenInfo:InserterListboxRow.__docgenInfo,path:"packages/block-editor/src/components/inserter-listbox/row.js"}),BlockTypesList.displayName="BlockTypesList",BlockTypesList.__docgenInfo={description:"",methods:[],displayName:"BlockTypesList",props:{items:{defaultValue:{value:"[]",computed:!1},required:!1},onHover:{defaultValue:{value:"() => {}",computed:!1},required:!1},isDraggable:{defaultValue:{value:"true",computed:!1},required:!1}}};var block_types_list=BlockTypesList;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-types-list/index.js"]={name:"BlockTypesList",docgenInfo:BlockTypesList.__docgenInfo,path:"packages/block-editor/src/components/block-types-list/index.js"});var CompositeState=__webpack_require__("./node_modules/reakit/es/Composite/CompositeState.js"),Composite=__webpack_require__("./node_modules/reakit/es/Composite/Composite.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js");const WithToolTip=_ref=>{let{showTooltip:showTooltip,title:title,children:children}=_ref;return showTooltip?(0,jsx_runtime.jsx)(tooltip.Z,{text:title,children:children}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:children})};function BlockPattern(_ref2){let{isDraggable:isDraggable,pattern:pattern,onClick:onClick,composite:composite,showTooltip:showTooltip}=_ref2;const{blocks:blocks,viewportWidth:viewportWidth}=pattern,descriptionId=`block-editor-block-patterns-list__item-description-${(0,use_instance_id.Z)(BlockPattern)}`;return(0,jsx_runtime.jsx)(inserter_draggable_blocks,{isEnabled:isDraggable,blocks:blocks,isPattern:!!pattern,children:_ref3=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref3;return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-patterns-list__list-item",draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd,children:(0,jsx_runtime.jsx)(WithToolTip,{showTooltip:showTooltip,title:pattern.title,children:(0,jsx_runtime.jsxs)(CompositeItem.A,{role:"option",as:"div",...composite,className:"block-editor-block-patterns-list__item",onClick:()=>onClick(pattern,blocks),"aria-label":pattern.title,"aria-describedby":pattern.description?descriptionId:void 0,children:[(0,jsx_runtime.jsx)(block_preview,{blocks:blocks,viewportWidth:viewportWidth}),!showTooltip&&(0,jsx_runtime.jsx)("div",{className:"block-editor-block-patterns-list__item-title",children:pattern.title}),!!pattern.description&&(0,jsx_runtime.jsx)(component.Z,{id:descriptionId,children:pattern.description})]})})})}})}function BlockPatternPlaceholder(){return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-patterns-list__item is-placeholder"})}function BlockPatternList(_ref4){let{isDraggable:isDraggable,blockPatterns:blockPatterns,shownPatterns:shownPatterns,onClickPattern:onClickPattern,orientation:orientation,label:label=(0,build_module.__)("Block Patterns"),showTitlesAsTooltip:showTitlesAsTooltip}=_ref4;const composite=(0,CompositeState.u)({orientation:orientation});return(0,jsx_runtime.jsx)(Composite.b,{...composite,role:"listbox",className:"block-editor-block-patterns-list","aria-label":label,children:blockPatterns.map((pattern=>shownPatterns.includes(pattern)?(0,jsx_runtime.jsx)(BlockPattern,{pattern:pattern,onClick:onClickPattern,isDraggable:isDraggable,composite:composite,showTooltip:showTitlesAsTooltip},pattern.name):(0,jsx_runtime.jsx)(BlockPatternPlaceholder,{},pattern.name)))})}BlockPattern.displayName="BlockPattern",BlockPatternPlaceholder.displayName="BlockPatternPlaceholder",BlockPatternList.displayName="BlockPatternList",BlockPatternList.__docgenInfo={description:"",methods:[],displayName:"BlockPatternList",props:{label:{defaultValue:{value:"__( 'Block Patterns' )",computed:!0},required:!1}}};var block_patterns_list=BlockPatternList;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-patterns-list/index.js"]={name:"BlockPatternList",docgenInfo:BlockPatternList.__docgenInfo,path:"packages/block-editor/src/components/block-patterns-list/index.js"});const{Fill:__unstableInserterMenuExtension,Slot:Slot}=(0,slot_fill.up)("__unstableInserterMenuExtension");__unstableInserterMenuExtension.Slot=Slot;var inserter_menu_extension=__unstableInserterMenuExtension,build_module_icon=__webpack_require__("./packages/components/build-module/icon/index.js");function InserterPanel(_ref){let{title:title,icon:icon,children:children}=_ref;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__panel-header",children:[(0,jsx_runtime.jsx)("h2",{className:"block-editor-inserter__panel-title",children:title}),(0,jsx_runtime.jsx)(build_module_icon.Z,{icon:icon})]}),(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__panel-content",children:children})]})}InserterPanel.__docgenInfo={description:"",methods:[],displayName:"InserterPanel"};var panel=InserterPanel;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/panel.js"]={name:"InserterPanel",docgenInfo:InserterPanel.__docgenInfo,path:"packages/block-editor/src/components/inserter/panel.js"});var block_default=__webpack_require__("./packages/icons/build-module/library/block-default.js");function InserterNoResults(){return(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__no-results",children:[(0,jsx_runtime.jsx)(icon.Z,{className:"block-editor-inserter__no-results-icon",icon:block_default.Z}),(0,jsx_runtime.jsx)("p",{children:(0,build_module.__)("No results found.")})]})}InserterNoResults.displayName="InserterNoResults",InserterNoResults.__docgenInfo={description:"",methods:[],displayName:"InserterNoResults"};var no_results=InserterNoResults;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/no-results.js"]={name:"InserterNoResults",docgenInfo:InserterNoResults.__docgenInfo,path:"packages/block-editor/src/components/inserter/no-results.js"});var use_insertion_point=function useInsertionPoint(_ref){let{rootClientId:rootClientId="",insertionIndex:insertionIndex,clientId:clientId,isAppender:isAppender,onSelect:onSelect,shouldFocusBlock:shouldFocusBlock=!0,selectBlockOnInsert:selectBlockOnInsert=!0}=_ref;const{getSelectedBlock:getSelectedBlock}=(0,use_select.Z)(store.h),{destinationRootClientId:destinationRootClientId,destinationIndex:destinationIndex}=(0,use_select.Z)((select=>{const{getSelectedBlockClientId:getSelectedBlockClientId,getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex,getBlockOrder:getBlockOrder}=select(store.h),selectedBlockClientId=getSelectedBlockClientId();let _destinationIndex,_destinationRootClientId=rootClientId;return void 0!==insertionIndex?_destinationIndex=insertionIndex:clientId?_destinationIndex=getBlockIndex(clientId):!isAppender&&selectedBlockClientId?(_destinationRootClientId=getBlockRootClientId(selectedBlockClientId),_destinationIndex=getBlockIndex(selectedBlockClientId)+1):_destinationIndex=getBlockOrder(_destinationRootClientId).length,{destinationRootClientId:_destinationRootClientId,destinationIndex:_destinationIndex}}),[rootClientId,insertionIndex,clientId,isAppender]),{replaceBlocks:replaceBlocks,insertBlocks:insertBlocks,showInsertionPoint:showInsertionPoint,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store.h),onInsertBlocks=(0,react.useCallback)((function(blocks,meta){let shouldForceFocusBlock=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const selectedBlock=getSelectedBlock();!isAppender&&selectedBlock&&(0,blocks_build_module.ZP)(selectedBlock)?replaceBlocks(selectedBlock.clientId,blocks,null,shouldFocusBlock||shouldForceFocusBlock?0:null,meta):insertBlocks(blocks,destinationIndex,destinationRootClientId,selectBlockOnInsert,shouldFocusBlock||shouldForceFocusBlock?0:null,meta);const blockLength=Array.isArray(blocks)?blocks.length:1,message=(0,build_module.gB)((0,build_module._n)("%d block added.","%d blocks added.",blockLength),blockLength);(0,a11y_build_module.D)(message),onSelect&&onSelect(blocks)}),[isAppender,getSelectedBlock,replaceBlocks,insertBlocks,destinationRootClientId,destinationIndex,onSelect,shouldFocusBlock]),onToggleInsertionPoint=(0,react.useCallback)((show=>{show?showInsertionPoint(destinationRootClientId,destinationIndex):hideInsertionPoint()}),[showInsertionPoint,hideInsertionPoint,destinationRootClientId,destinationIndex]);return[destinationRootClientId,onInsertBlocks,onToggleInsertionPoint]},notices_build_module=__webpack_require__("./packages/notices/build-module/index.js");var use_patterns_state=(onInsert,rootClientId)=>{const{patternCategories:patternCategories,patterns:patterns}=(0,use_select.Z)((select=>{const{__experimentalGetAllowedPatterns:__experimentalGetAllowedPatterns,getSettings:getSettings}=select(store.h);return{patterns:__experimentalGetAllowedPatterns(rootClientId),patternCategories:getSettings().__experimentalBlockPatternCategories}}),[rootClientId]),{createSuccessNotice:createSuccessNotice}=(0,use_dispatch.Z)(notices_build_module.h),onClickPattern=(0,react.useCallback)(((pattern,blocks)=>{onInsert((0,lodash.map)(blocks,(block=>(0,blocks_build_module.Wm)(block))),pattern.name),createSuccessNotice((0,build_module.gB)((0,build_module.__)('Block pattern "%s" inserted.'),pattern.title),{type:"snackbar"})}),[]);return[patterns,patternCategories,onClickPattern]};var use_block_types_state=(rootClientId,onInsert)=>{const{categories:categories,collections:collections,items:items}=(0,use_select.Z)((select=>{const{getInserterItems:getInserterItems}=select(store.h),{getCategories:getCategories,getCollections:getCollections}=select(blocks_build_module.h);return{categories:getCategories(),collections:getCollections(),items:getInserterItems(rootClientId)}}),[rootClientId]);return[items,categories,collections,(0,react.useCallback)(((_ref,shouldFocusBlock)=>{let{name:name,initialAttributes:initialAttributes,innerBlocks:innerBlocks}=_ref;const insertedBlock=(0,blocks_build_module.j4)(name,initialAttributes,(0,blocks_build_module.ne)(innerBlocks));onInsert(insertedBlock,void 0,shouldFocusBlock)}),[onInsert])]},remove_accents=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents_default=__webpack_require__.n(remove_accents),dist_es2015=__webpack_require__("./node_modules/no-case/dist.es2015/index.js");const defaultGetName=item=>item.name||"",defaultGetTitle=item=>item.title,defaultGetDescription=item=>item.description||"",defaultGetKeywords=item=>item.keywords||[],defaultGetCategory=item=>item.category,defaultGetCollection=()=>null;function extractWords(){let input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,dist_es2015.B)(input,{splitRegexp:[/([\p{Ll}\p{Lo}\p{N}])([\p{Lu}\p{Lt}])/gu,/([\p{Lu}\p{Lt}])([\p{Lu}\p{Lt}][\p{Ll}\p{Lo}])/gu],stripRegexp:/(\p{C}|\p{P}|\p{S})+/giu}).split(" ").filter(Boolean)}function normalizeSearchInput(){let input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return input=remove_accents_default()(input),input=input.replace(/^\//,""),input=input.toLowerCase(),input}const getNormalizedSearchTerms=function(){let input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return extractWords(normalizeSearchInput(input))},removeMatchingTerms=(unmatchedTerms,unprocessedTerms)=>unmatchedTerms.filter((term=>!getNormalizedSearchTerms(unprocessedTerms).some((unprocessedTerm=>unprocessedTerm.includes(term))))),searchItems=function(){let items=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],searchInput=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",config=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const normalizedSearchTerms=getNormalizedSearchTerms(searchInput);if(0===normalizedSearchTerms.length)return items;const rankedItems=items.map((item=>[item,getItemSearchRank(item,searchInput,config)])).filter((_ref2=>{let[,rank]=_ref2;return rank>0}));return rankedItems.sort(((_ref3,_ref4)=>{let[,rank1]=_ref3,[,rank2]=_ref4;return rank2-rank1})),rankedItems.map((_ref5=>{let[item]=_ref5;return item}))};function getItemSearchRank(item,searchTerm){let config=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{getName:getName=defaultGetName,getTitle:getTitle=defaultGetTitle,getDescription:getDescription=defaultGetDescription,getKeywords:getKeywords=defaultGetKeywords,getCategory:getCategory=defaultGetCategory,getCollection:getCollection=defaultGetCollection}=config,name=getName(item),title=getTitle(item),description=getDescription(item),keywords=getKeywords(item),category=getCategory(item),collection=getCollection(item),normalizedSearchInput=normalizeSearchInput(searchTerm),normalizedTitle=normalizeSearchInput(title);let rank=0;if(normalizedSearchInput===normalizedTitle)rank+=30;else if(normalizedTitle.startsWith(normalizedSearchInput))rank+=20;else{const terms=[name,title,description,...keywords,category,collection].join(" "),normalizedSearchTerms=extractWords(normalizedSearchInput);0===removeMatchingTerms(normalizedSearchTerms,terms).length&&(rank+=10)}if(0!==rank&&name.startsWith("core/")){rank+=name!==item.id?1:2}return rank}function InserterListbox(_ref){let{children:children}=_ref;const compositeState=(0,CompositeState.u)({shift:!0,wrap:"horizontal"});return(0,jsx_runtime.jsx)(inserter_listbox_context.Provider,{value:compositeState,children:children})}InserterListbox.displayName="InserterListbox",InserterListbox.__docgenInfo={description:"",methods:[],displayName:"InserterListbox"};var inserter_listbox=InserterListbox;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter-listbox/index.js"]={name:"InserterListbox",docgenInfo:InserterListbox.__docgenInfo,path:"packages/block-editor/src/components/inserter-listbox/index.js"});var sorting=__webpack_require__("./packages/block-editor/src/utils/sorting.js");const EMPTY_ARRAY=[];function InserterSearchResults(_ref){let{filterValue:filterValue,onSelect:onSelect,onHover:onHover,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,__experimentalInsertionIndex:__experimentalInsertionIndex,maxBlockPatterns:maxBlockPatterns,maxBlockTypes:maxBlockTypes,showBlockDirectory:showBlockDirectory=!1,isDraggable:isDraggable=!0,shouldFocusBlock:shouldFocusBlock=!0,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert}=_ref;const debouncedSpeak=(0,use_debounce.Z)(a11y_build_module.D,500),[destinationRootClientId,onInsertBlocks]=use_insertion_point({onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,insertionIndex:__experimentalInsertionIndex,shouldFocusBlock:shouldFocusBlock,selectBlockOnInsert:selectBlockOnInsert}),[blockTypes,blockTypeCategories,blockTypeCollections,onSelectBlockType]=use_block_types_state(destinationRootClientId,onInsertBlocks),[patterns,,onSelectBlockPattern]=use_patterns_state(onInsertBlocks,destinationRootClientId),filteredBlockPatterns=(0,react.useMemo)((()=>{if(0===maxBlockPatterns)return[];const results=searchItems(patterns,filterValue);return void 0!==maxBlockPatterns?results.slice(0,maxBlockPatterns):results}),[filterValue,patterns,maxBlockPatterns]);let maxBlockTypesToShow=maxBlockTypes;prioritizePatterns&&filteredBlockPatterns.length>2&&(maxBlockTypesToShow=0);const filteredBlockTypes=(0,react.useMemo)((()=>{if(0===maxBlockTypesToShow)return[];const results=(items=(0,sorting.X)(blockTypes,"frecency","desc"),categories=blockTypeCategories,collections=blockTypeCollections,0===getNormalizedSearchTerms(searchInput=filterValue).length?items:searchItems(items,searchInput,{getCategory:item=>{var _categories$find;return null===(_categories$find=categories.find((_ref=>{let{slug:slug}=_ref;return slug===item.category})))||void 0===_categories$find?void 0:_categories$find.title},getCollection:item=>{var _collections$item$nam;return null===(_collections$item$nam=collections[item.name.split("/")[0]])||void 0===_collections$item$nam?void 0:_collections$item$nam.title}}));var items,categories,collections,searchInput;return void 0!==maxBlockTypesToShow?results.slice(0,maxBlockTypesToShow):results}),[filterValue,blockTypes,blockTypeCategories,blockTypeCollections,maxBlockTypes]);(0,react.useEffect)((()=>{if(!filterValue)return;const count=filteredBlockTypes.length+filteredBlockPatterns.length,resultsFoundMessage=(0,build_module.gB)((0,build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[filterValue,debouncedSpeak]);const currentShownBlockTypes=(0,use_async_list.Z)(filteredBlockTypes,{step:9}),currentShownPatterns=(0,use_async_list.Z)(currentShownBlockTypes.length===filteredBlockTypes.length?filteredBlockPatterns:EMPTY_ARRAY),hasItems=!(0,lodash.isEmpty)(filteredBlockTypes)||!(0,lodash.isEmpty)(filteredBlockPatterns),blocksUI=!!filteredBlockTypes.length&&(0,jsx_runtime.jsx)(panel,{title:(0,jsx_runtime.jsx)(component.Z,{children:(0,build_module.__)("Blocks")}),children:(0,jsx_runtime.jsx)(block_types_list,{items:currentShownBlockTypes,onSelect:onSelectBlockType,onHover:onHover,label:(0,build_module.__)("Blocks"),isDraggable:isDraggable})}),patternsUI=!!filteredBlockPatterns.length&&(0,jsx_runtime.jsx)(panel,{title:(0,jsx_runtime.jsx)(component.Z,{children:(0,build_module.__)("Block Patterns")}),children:(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-patterns",children:(0,jsx_runtime.jsx)(block_patterns_list,{shownPatterns:currentShownPatterns,blockPatterns:filteredBlockPatterns,onClickPattern:onSelectBlockPattern,isDraggable:isDraggable})})});return(0,jsx_runtime.jsxs)(inserter_listbox,{children:[!showBlockDirectory&&!hasItems&&(0,jsx_runtime.jsx)(no_results,{}),prioritizePatterns?patternsUI:blocksUI,!!filteredBlockTypes.length&&!!filteredBlockPatterns.length&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-separator"}),prioritizePatterns?blocksUI:patternsUI,showBlockDirectory&&(0,jsx_runtime.jsx)(inserter_menu_extension.Slot,{fillProps:{onSelect:onSelectBlockType,onHover:onHover,filterValue:filterValue,hasItems:hasItems,rootClientId:destinationRootClientId},children:fills=>fills.length?fills:hasItems?null:(0,jsx_runtime.jsx)(no_results,{})})]})}InserterSearchResults.displayName="InserterSearchResults",InserterSearchResults.__docgenInfo={description:"",methods:[],displayName:"InserterSearchResults",props:{showBlockDirectory:{defaultValue:{value:"false",computed:!1},required:!1},isDraggable:{defaultValue:{value:"true",computed:!1},required:!1},shouldFocusBlock:{defaultValue:{value:"true",computed:!1},required:!1}}};var search_results=InserterSearchResults;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/search-results.js"]={name:"InserterSearchResults",docgenInfo:InserterSearchResults.__docgenInfo,path:"packages/block-editor/src/components/inserter/search-results.js"});function QuickInserter(_ref){let{onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert}=_ref;const[filterValue,setFilterValue]=(0,react.useState)(""),[destinationRootClientId,onInsertBlocks]=use_insertion_point({onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,selectBlockOnInsert:selectBlockOnInsert}),[blockTypes]=use_block_types_state(destinationRootClientId,onInsertBlocks),[patterns]=use_patterns_state(onInsertBlocks,destinationRootClientId),{setInserterIsOpened:setInserterIsOpened,insertionIndex:insertionIndex}=(0,use_select.Z)((select=>{const{getSettings:getSettings,getBlockIndex:getBlockIndex,getBlockCount:getBlockCount}=select(store.h),settings=getSettings(),index=getBlockIndex(clientId),blockCount=getBlockCount();return{setInserterIsOpened:settings.__experimentalSetIsInserterOpened,insertionIndex:-1===index?blockCount:index}}),[clientId]),showPatterns=patterns.length&&(!!filterValue||prioritizePatterns),showSearch=showPatterns&&patterns.length>6||blockTypes.length>6;(0,react.useEffect)((()=>{setInserterIsOpened&&setInserterIsOpened(!1)}),[setInserterIsOpened]);let maxBlockPatterns=0;return showPatterns&&(maxBlockPatterns=prioritizePatterns?4:2),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("block-editor-inserter__quick-inserter",{"has-search":showSearch,"has-expand":setInserterIsOpened}),children:[showSearch&&(0,jsx_runtime.jsx)(search_control.Z,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",value:filterValue,onChange:value=>{setFilterValue(value)},label:(0,build_module.__)("Search for blocks and patterns"),placeholder:(0,build_module.__)("Search")}),(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-results",children:(0,jsx_runtime.jsx)(search_results,{filterValue:filterValue,onSelect:onSelect,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,maxBlockPatterns:maxBlockPatterns,maxBlockTypes:6,isDraggable:!1,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert})}),setInserterIsOpened&&(0,jsx_runtime.jsx)(build_module_button.Z,{className:"block-editor-inserter__quick-inserter-expand",onClick:()=>{setInserterIsOpened({rootClientId:rootClientId,insertionIndex:insertionIndex,filterValue:filterValue})},"aria-label":(0,build_module.__)("Browse all. This will open the main inserter panel in the editor toolbar."),children:(0,build_module.__)("Browse all")})]})}QuickInserter.displayName="QuickInserter",QuickInserter.__docgenInfo={description:"",methods:[],displayName:"QuickInserter"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/quick-inserter.js"]={name:"QuickInserter",docgenInfo:QuickInserter.__docgenInfo,path:"packages/block-editor/src/components/inserter/quick-inserter.js"});const defaultRenderToggle=_ref=>{let label,{onToggle:onToggle,disabled:disabled,isOpen:isOpen,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType,toggleProps:toggleProps={},prioritizePatterns:prioritizePatterns}=_ref;label=hasSingleBlockType?(0,build_module.gB)((0,build_module._x)("Add %s","directly add the only allowed block"),blockTitle):prioritizePatterns?(0,build_module.__)("Add pattern"):(0,build_module._x)("Add block","Generic label for block inserter button");const{onClick:onClick,...rest}=toggleProps;return(0,jsx_runtime.jsx)(build_module_button.Z,{icon:plus.Z,label:label,tooltipPosition:"bottom",onClick:function handleClick(event){onToggle&&onToggle(event),onClick&&onClick(event)},className:"block-editor-inserter__toggle","aria-haspopup":!hasSingleBlockType&&"true","aria-expanded":!hasSingleBlockType&&isOpen,disabled:disabled,...rest})};defaultRenderToggle.displayName="defaultRenderToggle";class Inserter extends react.Component{constructor(){super(...arguments),this.onToggle=this.onToggle.bind(this),this.renderToggle=this.renderToggle.bind(this),this.renderContent=this.renderContent.bind(this)}onToggle(isOpen){const{onToggle:onToggle}=this.props;onToggle&&onToggle(isOpen)}renderToggle(_ref2){let{onToggle:onToggle,isOpen:isOpen}=_ref2;const{disabled:disabled,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType,directInsertBlock:directInsertBlock,toggleProps:toggleProps,hasItems:hasItems,renderToggle:renderToggle=defaultRenderToggle,prioritizePatterns:prioritizePatterns}=this.props;return renderToggle({onToggle:onToggle,isOpen:isOpen,disabled:disabled||!hasItems,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType,directInsertBlock:directInsertBlock,toggleProps:toggleProps,prioritizePatterns:prioritizePatterns})}renderContent(_ref3){let{onClose:onClose}=_ref3;const{rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,showInserterHelpPanel:showInserterHelpPanel,__experimentalIsQuick:isQuick,prioritizePatterns:prioritizePatterns,onSelectOrClose:onSelectOrClose,selectBlockOnInsert:selectBlockOnInsert}=this.props;return isQuick?(0,jsx_runtime.jsx)(QuickInserter,{onSelect:blocks=>{const firstBlock=Array.isArray(blocks)&&null!=blocks&&blocks.length?blocks[0]:blocks;onSelectOrClose&&"function"==typeof onSelectOrClose&&onSelectOrClose(firstBlock),onClose()},rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,prioritizePatterns:prioritizePatterns,selectBlockOnInsert:selectBlockOnInsert}):(0,jsx_runtime.jsx)(inserter_menu,{onSelect:()=>{onClose()},rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,showInserterHelpPanel:showInserterHelpPanel,prioritizePatterns:prioritizePatterns})}render(){const{position:position,hasSingleBlockType:hasSingleBlockType,directInsertBlock:directInsertBlock,insertOnlyAllowedBlock:insertOnlyAllowedBlock,__experimentalIsQuick:isQuick,onSelectOrClose:onSelectOrClose}=this.props;return hasSingleBlockType||directInsertBlock?this.renderToggle({onToggle:insertOnlyAllowedBlock}):(0,jsx_runtime.jsx)(dropdown.Z,{className:"block-editor-inserter",contentClassName:classnames_default()("block-editor-inserter__popover",{"is-quick":isQuick}),position:position,onToggle:this.onToggle,expandOnMobile:!0,headerTitle:(0,build_module.__)("Add a block"),renderToggle:this.renderToggle,renderContent:this.renderContent,onClose:onSelectOrClose})}}Inserter.displayName="Inserter",Inserter.__docgenInfo={description:"",methods:[{name:"onToggle",docblock:null,modifiers:[],params:[{name:"isOpen",type:null}],returns:null},{name:"renderToggle",docblock:"Render callback to display Dropdown toggle element.\n\n@param {Object}   options\n@param {Function} options.onToggle Callback to invoke when toggle is\n                                   pressed.\n@param {boolean}  options.isOpen   Whether dropdown is currently open.\n\n@return {WPElement} Dropdown toggle element.",modifiers:[],params:[{name:"{ onToggle, isOpen }"}],returns:{description:"Dropdown toggle element.",type:{name:"WPElement"}},description:"Render callback to display Dropdown toggle element."},{name:"renderContent",docblock:"Render callback to display Dropdown content element.\n\n@param {Object}   options\n@param {Function} options.onClose Callback to invoke when dropdown is\n                                  closed.\n\n@return {WPElement} Dropdown content element.",modifiers:[],params:[{name:"{ onClose }"}],returns:{description:"Dropdown content element.",type:{name:"WPElement"}},description:"Render callback to display Dropdown content element."}],displayName:"Inserter"};var inserter=(0,compose.Z)([(0,with_select.Z)(((select,_ref4)=>{var _getBlockVariations;let{clientId:clientId,rootClientId:rootClientId}=_ref4;const{getBlockRootClientId:getBlockRootClientId,hasInserterItems:hasInserterItems,__experimentalGetAllowedBlocks:__experimentalGetAllowedBlocks,__experimentalGetDirectInsertBlock:__experimentalGetDirectInsertBlock,getSettings:getSettings}=select(store.h),{getBlockVariations:getBlockVariations}=select(blocks_build_module.h);rootClientId=rootClientId||getBlockRootClientId(clientId)||void 0;const allowedBlocks=__experimentalGetAllowedBlocks(rootClientId),directInsertBlock=__experimentalGetDirectInsertBlock(rootClientId),settings=getSettings(),hasSingleBlockType=1===(null==allowedBlocks?void 0:allowedBlocks.length)&&0===(null===(_getBlockVariations=getBlockVariations(allowedBlocks[0].name,"inserter"))||void 0===_getBlockVariations?void 0:_getBlockVariations.length);let allowedBlockType=!1;return hasSingleBlockType&&(allowedBlockType=allowedBlocks[0]),{hasItems:hasInserterItems(rootClientId),hasSingleBlockType:hasSingleBlockType,blockTitle:allowedBlockType?allowedBlockType.title:"",allowedBlockType:allowedBlockType,directInsertBlock:directInsertBlock,rootClientId:rootClientId,prioritizePatterns:settings.__experimentalPreferPatternsOnRoot&&!rootClientId}})),(0,with_dispatch.Z)(((dispatch,ownProps,_ref5)=>{let{select:select}=_ref5;return{insertOnlyAllowedBlock(){const{rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,hasSingleBlockType:hasSingleBlockType,allowedBlockType:allowedBlockType,directInsertBlock:directInsertBlock,onSelectOrClose:onSelectOrClose,selectBlockOnInsert:selectBlockOnInsert}=ownProps;if(!hasSingleBlockType&&!directInsertBlock)return;const{insertBlock:insertBlock}=dispatch(store.h);let blockToInsert;if(directInsertBlock){const newAttributes=function getAdjacentBlockAttributes(attributesToCopy){const{getBlock:getBlock,getPreviousBlockClientId:getPreviousBlockClientId}=select(store.h);if(!attributesToCopy||!clientId&&!rootClientId)return{};const result={};let adjacentAttributes={};if(clientId){const currentBlock=getBlock(clientId),previousBlock=getBlock(getPreviousBlockClientId(clientId));(null==currentBlock?void 0:currentBlock.name)===(null==previousBlock?void 0:previousBlock.name)&&(adjacentAttributes=(null==previousBlock?void 0:previousBlock.attributes)||{})}else{var _parentBlock$innerBlo;const parentBlock=getBlock(rootClientId);if(null!=parentBlock&&null!==(_parentBlock$innerBlo=parentBlock.innerBlocks)&&void 0!==_parentBlock$innerBlo&&_parentBlock$innerBlo.length){const lastInnerBlock=parentBlock.innerBlocks[parentBlock.innerBlocks.length-1];directInsertBlock&&(null==directInsertBlock?void 0:directInsertBlock.name)===lastInnerBlock.name&&(adjacentAttributes=lastInnerBlock.attributes)}}return attributesToCopy.forEach((attribute=>{adjacentAttributes.hasOwnProperty(attribute)&&(result[attribute]=adjacentAttributes[attribute])})),result}(directInsertBlock.attributesToCopy);blockToInsert=(0,blocks_build_module.j4)(directInsertBlock.name,{...directInsertBlock.attributes||{},...newAttributes})}else blockToInsert=(0,blocks_build_module.j4)(allowedBlockType.name);var _blockToInsert;(insertBlock(blockToInsert,function getInsertionIndex(){const{getBlockIndex:getBlockIndex,getBlockSelectionEnd:getBlockSelectionEnd,getBlockOrder:getBlockOrder,getBlockRootClientId:getBlockRootClientId}=select(store.h);if(clientId)return getBlockIndex(clientId);const end=getBlockSelectionEnd();return!isAppender&&end&&getBlockRootClientId(end)===rootClientId?getBlockIndex(end)+1:getBlockOrder(rootClientId).length}(),rootClientId,selectBlockOnInsert),onSelectOrClose)&&onSelectOrClose({clientId:null===(_blockToInsert=blockToInsert)||void 0===_blockToInsert?void 0:_blockToInsert.clientId});const message=(0,build_module.gB)((0,build_module.__)("%s block added"),allowedBlockType.title);(0,a11y_build_module.D)(message)}}})),(0,if_condition.Z)((_ref6=>{let{hasItems:hasItems,isAppender:isAppender,rootClientId:rootClientId,clientId:clientId}=_ref6;return hasItems||!isAppender&&!rootClientId&&!clientId}))])(Inserter);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/index.js"]={name:"Inserter",docgenInfo:Inserter.__docgenInfo,path:"packages/block-editor/src/components/inserter/index.js"});function DefaultBlockAppender(_ref){let{isLocked:isLocked,onAppend:onAppend,showPrompt:showPrompt,placeholder:placeholder,rootClientId:rootClientId}=_ref;if(isLocked)return null;const value=(0,html_entities_build_module.S)(placeholder)||(0,build_module.__)("Type / to choose a block");return(0,jsx_runtime.jsxs)("div",{"data-root-client-id":rootClientId||"",className:classnames_default()("block-editor-default-block-appender",{"has-visible-prompt":showPrompt}),children:[(0,jsx_runtime.jsx)("p",{tabIndex:"0",role:"button","aria-label":(0,build_module.__)("Add default block"),className:"block-editor-default-block-appender__content",onKeyDown:event=>{keycodes_build_module.K5!==event.keyCode&&keycodes_build_module.L_!==event.keyCode||onAppend()},onClick:()=>onAppend(),onFocus:()=>{showPrompt&&onAppend()},children:showPrompt?value:"\ufeff"}),(0,jsx_runtime.jsx)(inserter,{rootClientId:rootClientId,position:"bottom right",isAppender:!0,__experimentalIsQuick:!0})]})}DefaultBlockAppender.displayName="DefaultBlockAppender",DefaultBlockAppender.__docgenInfo={description:"",methods:[],displayName:"DefaultBlockAppender"};var default_block_appender=(0,compose.Z)((0,with_select.Z)(((select,ownProps)=>{const{getBlockCount:getBlockCount,getSettings:getSettings,getTemplateLock:getTemplateLock}=select(store.h),isEmpty=!getBlockCount(ownProps.rootClientId),{bodyPlaceholder:bodyPlaceholder}=getSettings();return{showPrompt:isEmpty,isLocked:!!getTemplateLock(ownProps.rootClientId),placeholder:bodyPlaceholder}})),(0,with_dispatch.Z)(((dispatch,ownProps)=>{const{insertDefaultBlock:insertDefaultBlock,startTyping:startTyping}=dispatch(store.h);return{onAppend(){const{rootClientId:rootClientId}=ownProps;insertDefaultBlock(void 0,rootClientId),startTyping()}}})))(DefaultBlockAppender);function ButtonBlockAppender(_ref,ref){let{rootClientId:rootClientId,className:className,onFocus:onFocus,tabIndex:tabIndex}=_ref;return(0,jsx_runtime.jsx)(inserter,{position:"bottom center",rootClientId:rootClientId,__experimentalIsQuick:!0,renderToggle:_ref2=>{let label,{onToggle:onToggle,disabled:disabled,isOpen:isOpen,blockTitle:blockTitle,hasSingleBlockType:hasSingleBlockType}=_ref2;label=hasSingleBlockType?(0,build_module.gB)((0,build_module._x)("Add %s","directly add the only allowed block"),blockTitle):(0,build_module._x)("Add block","Generic label for block inserter button");const isToggleButton=!hasSingleBlockType;let inserterButton=(0,jsx_runtime.jsxs)(build_module_button.Z,{ref:ref,onFocus:onFocus,tabIndex:tabIndex,className:classnames_default()(className,"block-editor-button-block-appender"),onClick:onToggle,"aria-haspopup":isToggleButton?"true":void 0,"aria-expanded":isToggleButton?isOpen:void 0,disabled:disabled,label:label,children:[!hasSingleBlockType&&(0,jsx_runtime.jsx)(component.Z,{as:"span",children:label}),(0,jsx_runtime.jsx)(icon.Z,{icon:plus.Z})]});return(isToggleButton||hasSingleBlockType)&&(inserterButton=(0,jsx_runtime.jsx)(tooltip.Z,{text:label,children:inserterButton})),inserterButton},isAppender:!0})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/default-block-appender/index.js"]={name:"DefaultBlockAppender",docgenInfo:DefaultBlockAppender.__docgenInfo,path:"packages/block-editor/src/components/default-block-appender/index.js"}),ButtonBlockAppender.displayName="ButtonBlockAppender";(0,react.forwardRef)(((props,ref)=>((0,deprecated_build_module.Z)("wp.blockEditor.ButtonBlockerAppender",{alternative:"wp.blockEditor.ButtonBlockAppender",since:"5.9"}),ButtonBlockAppender(props,ref))));ButtonBlockAppender.__docgenInfo={description:"",methods:[],displayName:"ButtonBlockAppender"};var button_block_appender=(0,react.forwardRef)(ButtonBlockAppender);function BlockListAppender(_ref){let{rootClientId:rootClientId,renderAppender:CustomAppender,className:className,tagName:TagName="div"}=_ref;const{hideInserter:hideInserter,canInsertDefaultBlock:canInsertDefaultBlock,selectedBlockClientId:selectedBlockClientId}=(0,use_select.Z)((select=>{const{canInsertBlockType:canInsertBlockType,getTemplateLock:getTemplateLock,getSelectedBlockClientId:getSelectedBlockClientId,__unstableGetEditorMode:__unstableGetEditorMode}=select(store.h);return{hideInserter:!!getTemplateLock(rootClientId)||"zoom-out"===__unstableGetEditorMode(),canInsertDefaultBlock:canInsertBlockType((0,blocks_build_module.UT)(),rootClientId),selectedBlockClientId:getSelectedBlockClientId()}}),[rootClientId]);if(hideInserter||!1===CustomAppender)return null;let appender;if(CustomAppender)appender=(0,jsx_runtime.jsx)(CustomAppender,{});else{if(!(selectedBlockClientId===rootClientId||!rootClientId&&!selectedBlockClientId))return null;appender=canInsertDefaultBlock?(0,jsx_runtime.jsx)(default_block_appender,{rootClientId:rootClientId}):(0,jsx_runtime.jsx)(button_block_appender,{rootClientId:rootClientId,className:"block-list-appender__toggle"})}return(0,jsx_runtime.jsx)(TagName,{tabIndex:-1,className:classnames_default()("block-list-appender wp-block",className),contentEditable:!1,"data-block":!0,children:appender})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/button-block-appender/index.js"]={name:"ButtonBlockAppender",docgenInfo:ButtonBlockAppender.__docgenInfo,path:"packages/block-editor/src/components/button-block-appender/index.js"}),BlockListAppender.displayName="BlockListAppender",BlockListAppender.__docgenInfo={description:"",methods:[],displayName:"BlockListAppender",props:{tagName:{defaultValue:{value:"'div'",computed:!1},required:!1}}};var block_list_appender=BlockListAppender;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list-appender/index.js"]={name:"BlockListAppender",docgenInfo:BlockListAppender.__docgenInfo,path:"packages/block-editor/src/components/block-list-appender/index.js"});var motion=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion.mjs");const inbetween_MAX_POPOVER_RECOMPUTE_COUNTER=Number.MAX_SAFE_INTEGER;(0,react.createContext)();function BlockPopoverInbetween(_ref){let{previousClientId:previousClientId,nextClientId:nextClientId,children:children,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,...props}=_ref;const[popoverRecomputeCounter,forcePopoverRecompute]=(0,react.useReducer)((s=>(s+1)%inbetween_MAX_POPOVER_RECOMPUTE_COUNTER),0),{orientation:orientation,rootClientId:rootClientId,isVisible:isVisible}=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlockListSettings:getBlockListSettings,getBlockRootClientId:getBlockRootClientId,isBlockVisible:isBlockVisible}=select(store.h),_rootClientId=getBlockRootClientId(null!=previousClientId?previousClientId:nextClientId);return{orientation:(null===(_getBlockListSettings=getBlockListSettings(_rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation)||"vertical",rootClientId:_rootClientId,isVisible:isBlockVisible(previousClientId)&&isBlockVisible(nextClientId)}}),[previousClientId,nextClientId]),previousElement=useBlockElement(previousClientId),nextElement=useBlockElement(nextClientId),isVertical="vertical"===orientation,style=(0,react.useMemo)((()=>{if(popoverRecomputeCounter<0||!previousElement&&!nextElement||!isVisible)return{};const previousRect=previousElement?previousElement.getBoundingClientRect():null,nextRect=nextElement?nextElement.getBoundingClientRect():null;if(isVertical)return{width:previousRect?previousRect.width:nextRect.width,height:nextRect&&previousRect?nextRect.top-previousRect.bottom:0};let width=0;return previousRect&&nextRect&&(width=(0,build_module.dZ)()?previousRect.left-nextRect.right:nextRect.left-previousRect.right),{width:width,height:previousRect?previousRect.height:nextRect.height}}),[previousElement,nextElement,isVertical,popoverRecomputeCounter,isVisible]),popoverAnchor=(0,react.useMemo)((()=>{if(popoverRecomputeCounter<0||!previousElement&&!nextElement||!isVisible)return;const{ownerDocument:ownerDocument}=previousElement||nextElement;return{ownerDocument:ownerDocument,getBoundingClientRect(){const previousRect=previousElement?previousElement.getBoundingClientRect():null,nextRect=nextElement?nextElement.getBoundingClientRect():null;let left=0,top=0;return isVertical?(top=previousRect?previousRect.bottom:nextRect.top,left=(0,build_module.dZ)()?previousRect?previousRect.right:nextRect.right:previousRect?previousRect.left:nextRect.left):(top=previousRect?previousRect.top:nextRect.top,left=(0,build_module.dZ)()?previousRect?previousRect.left:nextRect.right:previousRect?previousRect.right:nextRect.left),new window.DOMRect(left,top,0,0)}}}),[previousElement,nextElement,popoverRecomputeCounter,isVertical,isVisible]),popoverScrollRef=use_popover_scroll(__unstableContentRef);return(0,react.useLayoutEffect)((()=>{if(!previousElement)return;const observer=new window.MutationObserver(forcePopoverRecompute);return observer.observe(previousElement,{attributes:!0}),()=>{observer.disconnect()}}),[previousElement]),(0,react.useLayoutEffect)((()=>{if(!nextElement)return;const observer=new window.MutationObserver(forcePopoverRecompute);return observer.observe(nextElement,{attributes:!0}),()=>{observer.disconnect()}}),[nextElement]),(0,react.useLayoutEffect)((()=>{if(previousElement)return previousElement.ownerDocument.defaultView.addEventListener("resize",forcePopoverRecompute),()=>{var _previousElement$owne;null===(_previousElement$owne=previousElement.ownerDocument.defaultView)||void 0===_previousElement$owne||_previousElement$owne.removeEventListener("resize",forcePopoverRecompute)}}),[previousElement]),(previousElement||nextElement)&&isVisible?(0,jsx_runtime.jsx)(popover.Z,{ref:popoverScrollRef,animate:!1,anchor:popoverAnchor,focusOnMount:!1,__unstableSlotName:__unstablePopoverSlot||null,...props,className:classnames_default()("block-editor-block-popover","block-editor-block-popover__inbetween",props.className),resize:!1,flip:!1,placement:"bottom-start",variant:"unstyled",children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-popover__inbetween-container",style:style,children:children})},nextClientId+"--"+rootClientId):null}BlockPopoverInbetween.displayName="BlockPopoverInbetween",BlockPopoverInbetween.__docgenInfo={description:"",methods:[],displayName:"BlockPopoverInbetween"};var inbetween=BlockPopoverInbetween;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-popover/inbetween.js"]={name:"BlockPopoverInbetween",docgenInfo:BlockPopoverInbetween.__docgenInfo,path:"packages/block-editor/src/components/block-popover/inbetween.js"});const animateVariants={hide:{opacity:0,scaleY:.75},show:{opacity:1,scaleY:1},exit:{opacity:0,scaleY:.9}};function BlockDropZonePopover(_ref){let{__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref;const{clientId:clientId}=(0,use_select.Z)((select=>{const{getBlockOrder:getBlockOrder,getBlockInsertionPoint:getBlockInsertionPoint}=select(store.h),insertionPoint=getBlockInsertionPoint(),order=getBlockOrder(insertionPoint.rootClientId);return order.length?{clientId:order[insertionPoint.index]}:{}}),[]),reducedMotion=(0,use_reduced_motion.Z)();return(0,jsx_runtime.jsx)(block_popover,{clientId:clientId,__unstableCoverTarget:!0,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,className:"block-editor-block-popover__drop-zone",children:(0,jsx_runtime.jsx)(motion.E.div,{"data-testid":"block-popover-drop-zone",initial:reducedMotion?animateVariants.show:animateVariants.hide,animate:animateVariants.show,exit:reducedMotion?animateVariants.show:animateVariants.exit,className:"block-editor-block-popover__drop-zone-foreground"})})}BlockDropZonePopover.displayName="BlockDropZonePopover",BlockDropZonePopover.__docgenInfo={description:"",methods:[],displayName:"BlockDropZonePopover"};var drop_zone=BlockDropZonePopover;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-popover/drop-zone.js"]={name:"BlockDropZonePopover",docgenInfo:BlockDropZonePopover.__docgenInfo,path:"packages/block-editor/src/components/block-popover/drop-zone.js"});const insertion_point_InsertionPointOpenRef=(0,react.createContext)();function InbetweenInsertionPointPopover(_ref){let{__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref;const{selectBlock:selectBlock,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store.h),openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),ref=(0,react.useRef)(),{orientation:orientation,previousClientId:previousClientId,nextClientId:nextClientId,rootClientId:rootClientId,isInserterShown:isInserterShown,isDistractionFree:isDistractionFree,isNavigationMode:isNavigationMode}=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlockOrder:getBlockOrder,getBlockListSettings:getBlockListSettings,getBlockInsertionPoint:getBlockInsertionPoint,isBlockBeingDragged:isBlockBeingDragged,getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId,getSettings:getSettings,isNavigationMode:_isNavigationMode}=select(store.h),insertionPoint=getBlockInsertionPoint(),order=getBlockOrder(insertionPoint.rootClientId);if(!order.length)return{};let _previousClientId=order[insertionPoint.index-1],_nextClientId=order[insertionPoint.index];for(;isBlockBeingDragged(_previousClientId);)_previousClientId=getPreviousBlockClientId(_previousClientId);for(;isBlockBeingDragged(_nextClientId);)_nextClientId=getNextBlockClientId(_nextClientId);const settings=getSettings();return{previousClientId:_previousClientId,nextClientId:_nextClientId,orientation:(null===(_getBlockListSettings=getBlockListSettings(insertionPoint.rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation)||"vertical",rootClientId:insertionPoint.rootClientId,isNavigationMode:_isNavigationMode(),isDistractionFree:settings.isDistractionFree,isInserterShown:null==insertionPoint?void 0:insertionPoint.__unstableWithInserter}}),[]),disableMotion=(0,use_reduced_motion.Z)();const lineVariants={start:{opacity:0,scale:0},rest:{opacity:1,scale:1,transition:{delay:isInserterShown?.5:0,type:"tween"}},hover:{opacity:1,scale:1,transition:{delay:.5,type:"tween"}}},inserterVariants={start:{scale:disableMotion?1:0},rest:{scale:1,transition:{delay:.4,type:"tween"}}};if(isDistractionFree&&!isNavigationMode)return null;const className=classnames_default()("block-editor-block-list__insertion-point","is-"+orientation);return(0,jsx_runtime.jsx)(inbetween,{previousClientId:previousClientId,nextClientId:nextClientId,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,children:(0,jsx_runtime.jsxs)(motion.E.div,{layout:!disableMotion,initial:disableMotion?"rest":"start",animate:"rest",whileHover:"hover",whileTap:"pressed",exit:"start",ref:ref,tabIndex:-1,onClick:function onClick(event){event.target===ref.current&&nextClientId&&selectBlock(nextClientId,-1)},onFocus:function onFocus(event){event.target!==ref.current&&(openRef.current=!0)},className:classnames_default()(className,{"is-with-inserter":isInserterShown}),onHoverEnd:function maybeHideInserterPoint(event){event.target!==ref.current||openRef.current||hideInsertionPoint()},children:[(0,jsx_runtime.jsx)(motion.E.div,{variants:lineVariants,className:"block-editor-block-list__insertion-point-indicator","data-testid":"block-list-insertion-point-indicator"}),isInserterShown&&(0,jsx_runtime.jsx)(motion.E.div,{variants:inserterVariants,className:classnames_default()("block-editor-block-list__insertion-point-inserter"),children:(0,jsx_runtime.jsx)(inserter,{position:"bottom center",clientId:nextClientId,rootClientId:rootClientId,__experimentalIsQuick:!0,onToggle:isOpen=>{openRef.current=isOpen},onSelectOrClose:()=>{openRef.current=!1}})})]})})}function InsertionPoint(props){const{insertionPoint:insertionPoint,isVisible:isVisible}=(0,use_select.Z)((select=>{const{getBlockInsertionPoint:getBlockInsertionPoint,isBlockInsertionPointVisible:isBlockInsertionPointVisible}=select(store.h);return{insertionPoint:getBlockInsertionPoint(),isVisible:isBlockInsertionPointVisible()}}),[]);return isVisible?"replace"===insertionPoint.operation?(0,jsx_runtime.jsx)(drop_zone,{...props},`${insertionPoint.rootClientId}-${insertionPoint.index}`):(0,jsx_runtime.jsx)(InbetweenInsertionPointPopover,{...props}):null}function useInBetweenInserter(){const openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),isInBetweenInserterDisabled=(0,use_select.Z)((select=>select(store.h).getSettings().isDistractionFree||"zoom-out"===select(store.h).__unstableGetEditorMode()),[]),{getBlockListSettings:getBlockListSettings,getBlockRootClientId:getBlockRootClientId,getBlockIndex:getBlockIndex,isBlockInsertionPointVisible:isBlockInsertionPointVisible,isMultiSelecting:isMultiSelecting,getSelectedBlockClientIds:getSelectedBlockClientIds,getTemplateLock:getTemplateLock,__unstableIsWithinBlockOverlay:__unstableIsWithinBlockOverlay}=(0,use_select.Z)(store.h),{showInsertionPoint:showInsertionPoint,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{if(!isInBetweenInserterDisabled)return node.addEventListener("mousemove",onMouseMove),()=>{node.removeEventListener("mousemove",onMouseMove)};function onMouseMove(event){var _getBlockListSettings;if(openRef.current)return;if(isMultiSelecting())return;if(!event.target.classList.contains("block-editor-block-list__layout"))return void hideInsertionPoint();let rootClientId;if(!event.target.classList.contains("is-root-container")){rootClientId=(event.target.getAttribute("data-block")?event.target:event.target.closest("[data-block]")).getAttribute("data-block")}if(getTemplateLock(rootClientId))return;const orientation=(null===(_getBlockListSettings=getBlockListSettings(rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation)||"vertical",offsetTop=event.clientY,offsetLeft=event.clientX;let element=Array.from(event.target.children).find((blockEl=>{const blockElRect=blockEl.getBoundingClientRect();return blockEl.classList.contains("wp-block")&&"vertical"===orientation&&blockElRect.top>offsetTop||blockEl.classList.contains("wp-block")&&"horizontal"===orientation&&blockElRect.left>offsetLeft}));if(!element)return void hideInsertionPoint();if(!element.id&&(element=element.firstElementChild,!element))return void hideInsertionPoint();const clientId=element.id.slice("block-".length);if(!clientId||__unstableIsWithinBlockOverlay(clientId))return;if(getSelectedBlockClientIds().includes(clientId))return;const elementRect=element.getBoundingClientRect();if("horizontal"===orientation&&(event.clientY>elementRect.bottom||event.clientY<elementRect.top)||"vertical"===orientation&&(event.clientX>elementRect.right||event.clientX<elementRect.left))return void hideInsertionPoint();const index=getBlockIndex(clientId);0!==index?showInsertionPoint(rootClientId,index,{__unstableWithInserter:!0}):hideInsertionPoint()}}),[openRef,getBlockListSettings,getBlockRootClientId,getBlockIndex,isBlockInsertionPointVisible,isMultiSelecting,showInsertionPoint,hideInsertionPoint,getSelectedBlockClientIds,isInBetweenInserterDisabled])}InbetweenInsertionPointPopover.displayName="InbetweenInsertionPointPopover",InsertionPoint.__docgenInfo={description:"",methods:[],displayName:"InsertionPoint"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-tools/insertion-point.js"]={name:"InsertionPoint",docgenInfo:InsertionPoint.__docgenInfo,path:"packages/block-editor/src/components/block-tools/insertion-point.js"});var data_build_module=__webpack_require__("./packages/data/build-module/index.js");const requestIdleCallback="undefined"==typeof window?callback=>{setTimeout((()=>callback(Date.now())),0)}:window.requestIdleCallback||window.requestAnimationFrame,cancelIdleCallback="undefined"==typeof window?clearTimeout:window.cancelIdleCallback||window.cancelAnimationFrame;var keyboard_shortcuts_build_module=__webpack_require__("./packages/keyboard-shortcuts/build-module/index.js"),drag_handle=__webpack_require__("./packages/icons/build-module/library/drag-handle.js");function useBlockDisplayInformation(clientId){return(0,use_select.Z)((select=>{if(!clientId)return null;const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(store.h),{getBlockType:getBlockType,getActiveBlockVariation:getActiveBlockVariation}=select(blocks_build_module.h),blockName=getBlockName(clientId),blockType=getBlockType(blockName);if(!blockType)return null;const attributes=getBlockAttributes(clientId),match=getActiveBlockVariation(blockName,attributes),isSynced=(0,blocks_build_module.vr)(blockType)||(0,blocks_build_module.zQ)(blockType),blockTypeInfo={isSynced:isSynced,title:blockType.title,icon:blockType.icon,description:blockType.description,anchor:null==attributes?void 0:attributes.anchor};return match?{isSynced:isSynced,title:match.title||blockType.title,icon:match.icon||blockType.icon,description:match.description||blockType.description,anchor:null==attributes?void 0:attributes.anchor}:blockTypeInfo}),[clientId])}function useBlockDisplayTitle(_ref){let{clientId:clientId,maximumLength:maximumLength,context:context}=_ref;const{attributes:attributes,name:name,reusableBlockTitle:reusableBlockTitle}=(0,use_select.Z)((select=>{if(!clientId)return{};const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes,__experimentalGetReusableBlockTitle:__experimentalGetReusableBlockTitle}=select(store.h),blockName=getBlockName(clientId);if(!blockName)return{};const isReusable=(0,blocks_build_module.vr)((0,blocks_build_module.ck)(blockName));return{attributes:getBlockAttributes(clientId),name:blockName,reusableBlockTitle:isReusable&&__experimentalGetReusableBlockTitle(getBlockAttributes(clientId).ref)}}),[clientId]),blockInformation=useBlockDisplayInformation(clientId);if(!name||!blockInformation)return null;const blockType=(0,blocks_build_module.ck)(name),blockLabel=blockType?(0,blocks_build_module.Iu)(blockType,attributes,context):null,label=reusableBlockTitle||blockLabel,blockTitle=label&&label!==blockType.title?label:blockInformation.title;if(maximumLength&&maximumLength>0&&blockTitle.length>maximumLength){const omission="...";return blockTitle.slice(0,maximumLength-omission.length)+omission}return blockTitle}function BlockTitle(_ref){let{clientId:clientId,maximumLength:maximumLength,context:context}=_ref;return useBlockDisplayTitle({clientId:clientId,maximumLength:maximumLength,context:context})}var block_draggable=__webpack_require__("./packages/block-editor/src/components/block-draggable/index.js"),block_mover=__webpack_require__("./packages/block-editor/src/components/block-mover/index.js");function BlockSelectionButton(_ref){let{clientId:clientId,rootClientId:rootClientId}=_ref;const blockInformation=useBlockDisplayInformation(clientId),selected=(0,use_select.Z)((select=>{var _getBlockListSettings;const{getBlock:getBlock,getBlockIndex:getBlockIndex,hasBlockMovingClientId:hasBlockMovingClientId,getBlockListSettings:getBlockListSettings,__unstableGetEditorMode:__unstableGetEditorMode}=select(store.h),index=getBlockIndex(clientId),{name:name,attributes:attributes}=getBlock(clientId);return{index:index,name:name,attributes:attributes,blockMovingMode:hasBlockMovingClientId(),orientation:null===(_getBlockListSettings=getBlockListSettings(rootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation,editorMode:__unstableGetEditorMode()}}),[clientId,rootClientId]),{index:index,name:name,attributes:attributes,blockMovingMode:blockMovingMode,orientation:orientation,editorMode:editorMode}=selected,{setNavigationMode:setNavigationMode,removeBlock:removeBlock}=(0,use_dispatch.Z)(store.h),ref=(0,react.useRef)(),blockType=(0,blocks_build_module.ck)(name),label=(0,blocks_build_module.DK)(blockType,attributes,index+1,orientation);(0,react.useEffect)((()=>{ref.current.focus(),(0,a11y_build_module.D)(label)}),[label]);const blockElement=useBlockElement(clientId),{hasBlockMovingClientId:hasBlockMovingClientId,getBlockIndex:getBlockIndex,getBlockRootClientId:getBlockRootClientId,getClientIdsOfDescendants:getClientIdsOfDescendants,getSelectedBlockClientId:getSelectedBlockClientId,getMultiSelectedBlocksEndClientId:getMultiSelectedBlocksEndClientId,getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId}=(0,use_select.Z)(store.h),{selectBlock:selectBlock,clearSelectedBlock:clearSelectedBlock,setBlockMovingClientId:setBlockMovingClientId,moveBlockToPosition:moveBlockToPosition}=(0,use_dispatch.Z)(store.h);const classNames=classnames_default()("block-editor-block-list__block-selection-button",{"is-block-moving-mode":!!blockMovingMode}),dragHandleLabel=(0,build_module.__)("Drag");return(0,jsx_runtime.jsx)("div",{className:classNames,children:(0,jsx_runtime.jsxs)(flex_component.Z,{justify:"center",className:"block-editor-block-list__block-selection-button__content",children:[(0,jsx_runtime.jsx)(flex_item_component.Z,{children:(0,jsx_runtime.jsx)(block_icon.Z,{icon:null==blockInformation?void 0:blockInformation.icon,showColors:!0})}),(0,jsx_runtime.jsxs)(flex_item_component.Z,{children:["zoom-out"===editorMode&&(0,jsx_runtime.jsx)(block_mover.Z,{clientIds:[clientId],hideDragHandle:!0}),"navigation"===editorMode&&(0,jsx_runtime.jsx)(block_draggable.Z,{clientIds:[clientId],children:draggableProps=>(0,jsx_runtime.jsx)(build_module_button.Z,{icon:drag_handle.Z,className:"block-selection-button_drag-handle","aria-hidden":"true",label:dragHandleLabel,tabIndex:"-1",...draggableProps})})]}),(0,jsx_runtime.jsx)(flex_item_component.Z,{children:(0,jsx_runtime.jsx)(build_module_button.Z,{ref:ref,onClick:"navigation"===editorMode?()=>setNavigationMode(!1):void 0,onKeyDown:function onKeyDown(event){const{keyCode:keyCode}=event,isUp=keyCode===keycodes_build_module.UP,isDown=keyCode===keycodes_build_module.WV,isLeft=keyCode===keycodes_build_module.RL,isRight=keyCode===keycodes_build_module.pX,isTab=keyCode===keycodes_build_module.Mf,isEscape=keyCode===keycodes_build_module.hY,isEnter=keyCode===keycodes_build_module.K5,isSpace=keyCode===keycodes_build_module.L_,isShift=event.shiftKey;if(keyCode===keycodes_build_module.ZH||keyCode===keycodes_build_module.yY)return removeBlock(clientId),void event.preventDefault();const selectedBlockClientId=getSelectedBlockClientId(),selectionEndClientId=getMultiSelectedBlocksEndClientId(),selectionBeforeEndClientId=getPreviousBlockClientId(selectionEndClientId||selectedBlockClientId),selectionAfterEndClientId=getNextBlockClientId(selectionEndClientId||selectedBlockClientId),navigateUp=isTab&&isShift||isUp,navigateDown=isTab&&!isShift||isDown,navigateOut=isLeft,navigateIn=isRight;let focusedBlockUid;if(navigateUp)focusedBlockUid=selectionBeforeEndClientId;else if(navigateDown)focusedBlockUid=selectionAfterEndClientId;else if(navigateOut){var _getBlockRootClientId;focusedBlockUid=null!==(_getBlockRootClientId=getBlockRootClientId(selectedBlockClientId))&&void 0!==_getBlockRootClientId?_getBlockRootClientId:selectedBlockClientId}else if(navigateIn){var _getClientIdsOfDescen;focusedBlockUid=null!==(_getClientIdsOfDescen=getClientIdsOfDescendants([selectedBlockClientId])[0])&&void 0!==_getClientIdsOfDescen?_getClientIdsOfDescen:selectedBlockClientId}const startingBlockClientId=hasBlockMovingClientId();if(isEscape&&startingBlockClientId&&!event.defaultPrevented&&(setBlockMovingClientId(null),event.preventDefault()),(isEnter||isSpace)&&startingBlockClientId){const sourceRoot=getBlockRootClientId(startingBlockClientId),destRoot=getBlockRootClientId(selectedBlockClientId),sourceBlockIndex=getBlockIndex(startingBlockClientId);let destinationBlockIndex=getBlockIndex(selectedBlockClientId);sourceBlockIndex<destinationBlockIndex&&sourceRoot===destRoot&&(destinationBlockIndex-=1),moveBlockToPosition(startingBlockClientId,sourceRoot,destRoot,destinationBlockIndex),selectBlock(startingBlockClientId),setBlockMovingClientId(null)}if(navigateDown||navigateUp||navigateOut||navigateIn)if(focusedBlockUid)event.preventDefault(),selectBlock(focusedBlockUid);else if(isTab&&selectedBlockClientId){let nextTabbable;if(navigateDown){nextTabbable=blockElement;do{nextTabbable=dom_build_module.T_.tabbable.findNext(nextTabbable)}while(nextTabbable&&blockElement.contains(nextTabbable));nextTabbable||(nextTabbable=blockElement.ownerDocument.defaultView.frameElement,nextTabbable=dom_build_module.T_.tabbable.findNext(nextTabbable))}else nextTabbable=dom_build_module.T_.tabbable.findPrevious(blockElement);nextTabbable&&(event.preventDefault(),nextTabbable.focus(),clearSelectedBlock())}},label:label,showTooltip:!1,className:"block-selection-button_select-button",children:(0,jsx_runtime.jsx)(BlockTitle,{clientId:clientId,maximumLength:35})})})]})})}BlockSelectionButton.displayName="BlockSelectionButton",BlockSelectionButton.__docgenInfo={description:"Block selection button component, displaying the label of the block. If the block\ndescends from a root block, a button is displayed enabling the user to select\nthe root block.\n\n@param {string} props          Component props.\n@param {string} props.clientId Client ID of block.\n\n@return {WPComponent} The component to be rendered.",methods:[],displayName:"BlockSelectionButton"};var block_selection_button=BlockSelectionButton;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-tools/block-selection-button.js"]={name:"BlockSelectionButton",docgenInfo:BlockSelectionButton.__docgenInfo,path:"packages/block-editor/src/components/block-tools/block-selection-button.js"});var toolbar=__webpack_require__("./packages/components/build-module/toolbar/index.js"),menu=__webpack_require__("./packages/components/build-module/navigable-container/menu.js");function getAllToolbarItemsIn(container){return Array.from(container.querySelectorAll("[data-toolbar-item]"))}function useToolbarFocus(ref,focusOnMount,isAccessibleToolbar,defaultIndex,onIndexChange){const[initialFocusOnMount]=(0,react.useState)(focusOnMount),[initialIndex]=(0,react.useState)(defaultIndex),focusToolbar=(0,react.useCallback)((()=>{!function focusFirstTabbableIn(container){const[firstTabbable]=dom_build_module.T_.tabbable.find(container);firstTabbable&&firstTabbable.focus({preventScroll:!0})}(ref.current)}),[]);(0,keyboard_shortcuts_build_module.bx)("core/block-editor/focus-toolbar",focusToolbar),(0,react.useEffect)((()=>{initialFocusOnMount&&focusToolbar()}),[isAccessibleToolbar,initialFocusOnMount,focusToolbar]),(0,react.useEffect)((()=>{let raf=0;return initialIndex&&!initialFocusOnMount&&(raf=window.requestAnimationFrame((()=>{const items=getAllToolbarItemsIn(ref.current),index=initialIndex||0;items[index]&&function hasFocusWithin(container){return container.contains(container.ownerDocument.activeElement)}(ref.current)&&items[index].focus({preventScroll:!0})}))),()=>{if(window.cancelAnimationFrame(raf),!onIndexChange||!ref.current)return;const index=getAllToolbarItemsIn(ref.current).findIndex((item=>0===item.tabIndex));onIndexChange(index)}}),[initialIndex,initialFocusOnMount])}function NavigableToolbar(_ref){let{children:children,focusOnMount:focusOnMount,__experimentalInitialIndex:initialIndex,__experimentalOnIndexChange:onIndexChange,...props}=_ref;const ref=(0,react.useRef)(),isAccessibleToolbar=function useIsAccessibleToolbar(ref){const[isAccessibleToolbar,setIsAccessibleToolbar]=(0,react.useState)(!0),determineIsAccessibleToolbar=(0,react.useCallback)((()=>{const onlyToolbarItem=function hasOnlyToolbarItem(elements){return!elements.some((element=>!("toolbarItem"in element.dataset)))}(dom_build_module.T_.tabbable.find(ref.current));onlyToolbarItem||(0,deprecated_build_module.Z)("Using custom components as toolbar controls",{since:"5.6",alternative:"ToolbarItem, ToolbarButton or ToolbarDropdownMenu components",link:"https://developer.wordpress.org/block-editor/components/toolbar-button/#inside-blockcontrols"}),setIsAccessibleToolbar(onlyToolbarItem)}),[]);return(0,react.useLayoutEffect)((()=>{const observer=new window.MutationObserver(determineIsAccessibleToolbar);return observer.observe(ref.current,{childList:!0,subtree:!0}),()=>observer.disconnect()}),[isAccessibleToolbar]),isAccessibleToolbar}(ref);return useToolbarFocus(ref,focusOnMount,isAccessibleToolbar,initialIndex,onIndexChange),isAccessibleToolbar?(0,jsx_runtime.jsx)(toolbar.Z,{label:props["aria-label"],ref:ref,...props,children:children}):(0,jsx_runtime.jsx)(menu.Z,{orientation:"horizontal",role:"toolbar",ref:ref,...props,children:children})}NavigableToolbar.displayName="NavigableToolbar",NavigableToolbar.__docgenInfo={description:"",methods:[],displayName:"NavigableToolbar"};var navigable_toolbar=NavigableToolbar;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/navigable-toolbar/index.js"]={name:"NavigableToolbar",docgenInfo:NavigableToolbar.__docgenInfo,path:"packages/block-editor/src/components/navigable-toolbar/index.js"});var toolbar_button=__webpack_require__("./packages/components/build-module/toolbar-button/index.js");const{clearTimeout:utils_clearTimeout,setTimeout:utils_setTimeout}=window,noop=()=>{},DEBOUNCE_TIMEOUT=200;function useDebouncedShowMovers(_ref){let{ref:ref,isFocused:isFocused,debounceTimeout:debounceTimeout=DEBOUNCE_TIMEOUT,onChange:onChange=noop}=_ref;const[showMovers,setShowMovers]=(0,react.useState)(!1),timeoutRef=(0,react.useRef)(),handleOnChange=nextIsFocused=>{null!=ref&&ref.current&&setShowMovers(nextIsFocused),onChange(nextIsFocused)},shouldHideMovers=()=>{const isHovered=(null==ref?void 0:ref.current)&&ref.current.matches(":hover");return!isFocused&&!isHovered},clearTimeoutRef=()=>{const timeout=timeoutRef.current;timeout&&utils_clearTimeout&&utils_clearTimeout(timeout)};return(0,react.useEffect)((()=>()=>{handleOnChange(!1),clearTimeoutRef()}),[]),{showMovers:showMovers,debouncedShowMovers:event=>{event&&event.stopPropagation(),clearTimeoutRef(),showMovers||handleOnChange(!0)},debouncedHideMovers:event=>{event&&event.stopPropagation(),clearTimeoutRef(),timeoutRef.current=utils_setTimeout((()=>{shouldHideMovers()&&handleOnChange(!1)}),debounceTimeout)}}}function useShowMoversGestures(_ref2){let{ref:ref,debounceTimeout:debounceTimeout=DEBOUNCE_TIMEOUT,onChange:onChange=noop}=_ref2;const[isFocused,setIsFocused]=(0,react.useState)(!1),{showMovers:showMovers,debouncedShowMovers:debouncedShowMovers,debouncedHideMovers:debouncedHideMovers}=useDebouncedShowMovers({ref:ref,debounceTimeout:debounceTimeout,isFocused:isFocused,onChange:onChange}),registerRef=(0,react.useRef)(!1),isFocusedWithin=()=>(null==ref?void 0:ref.current)&&ref.current.contains(ref.current.ownerDocument.activeElement);return(0,react.useEffect)((()=>{const node=ref.current,handleOnFocus=()=>{isFocusedWithin()&&(setIsFocused(!0),debouncedShowMovers())},handleOnBlur=()=>{isFocusedWithin()||(setIsFocused(!1),debouncedHideMovers())};return node&&!registerRef.current&&(node.addEventListener("focus",handleOnFocus,!0),node.addEventListener("blur",handleOnBlur,!0),registerRef.current=!0),()=>{node&&(node.removeEventListener("focus",handleOnFocus),node.removeEventListener("blur",handleOnBlur))}}),[ref,registerRef,setIsFocused,debouncedShowMovers,debouncedHideMovers]),{showMovers:showMovers,gestures:{onMouseMove:debouncedShowMovers,onMouseLeave:debouncedHideMovers}}}function BlockParentSelector(){const{selectBlock:selectBlock,toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store.h),{firstParentClientId:firstParentClientId,shouldHide:shouldHide,isDistractionFree:isDistractionFree}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockParents:getBlockParents,getSelectedBlockClientId:getSelectedBlockClientId,getSettings:getSettings}=select(store.h),{hasBlockSupport:hasBlockSupport}=select(blocks_build_module.h),parents=getBlockParents(getSelectedBlockClientId()),_firstParentClientId=parents[parents.length-1],parentBlockName=getBlockName(_firstParentClientId),_parentBlockType=(0,blocks_build_module.ck)(parentBlockName),settings=getSettings();return{firstParentClientId:_firstParentClientId,shouldHide:!hasBlockSupport(_parentBlockType,"__experimentalParentSelector",!0),isDistractionFree:settings.isDistractionFree}}),[]),blockInformation=useBlockDisplayInformation(firstParentClientId),nodeRef=(0,react.useRef)(),{gestures:showMoversGestures}=useShowMoversGestures({ref:nodeRef,onChange(isFocused){isFocused&&isDistractionFree||toggleBlockHighlight(firstParentClientId,isFocused)}});return shouldHide||void 0===firstParentClientId?null:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-parent-selector",ref:nodeRef,...showMoversGestures,children:(0,jsx_runtime.jsx)(toolbar_button.Z,{className:"block-editor-block-parent-selector__button",onClick:()=>selectBlock(firstParentClientId),label:(0,build_module.gB)((0,build_module.__)("Select %s"),null==blockInformation?void 0:blockInformation.title),showTooltip:!0,icon:(0,jsx_runtime.jsx)(block_icon.Z,{icon:null==blockInformation?void 0:blockInformation.icon})})},firstParentClientId)}BlockParentSelector.displayName="BlockParentSelector",BlockParentSelector.__docgenInfo={description:'Block parent selector component, displaying the hierarchy of the\ncurrent block selection as a single icon to "go up" a level.\n\n@return {WPComponent} Parent block selector.',methods:[],displayName:"BlockParentSelector"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-parent-selector/index.js"]={name:"BlockParentSelector",docgenInfo:BlockParentSelector.__docgenInfo,path:"packages/block-editor/src/components/block-parent-selector/index.js"});var toolbar_item=__webpack_require__("./packages/components/build-module/toolbar-item/index.js"),copy=__webpack_require__("./packages/icons/build-module/library/copy.js");function PreviewBlockPopover(_ref){let{blocks:blocks}=_ref;return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__popover__preview__parent",children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__popover__preview__container",children:(0,jsx_runtime.jsx)(popover.Z,{className:"block-editor-block-switcher__preview__popover",placement:"bottom-start",focusOnMount:!1,children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-switcher__preview",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__preview-title",children:(0,build_module.__)("Preview")}),(0,jsx_runtime.jsx)(block_preview,{viewportWidth:500,blocks:blocks})]})})})})}PreviewBlockPopover.displayName="PreviewBlockPopover",PreviewBlockPopover.__docgenInfo={description:"",methods:[],displayName:"PreviewBlockPopover"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/preview-block-popover.js"]={name:"PreviewBlockPopover",docgenInfo:PreviewBlockPopover.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/preview-block-popover.js"});const BlockTransformationsMenu=_ref3=>{let{className:className,possibleBlockTransformations:possibleBlockTransformations,onSelect:onSelect,blocks:blocks}=_ref3;const[hoveredTransformItemName,setHoveredTransformItemName]=(0,react.useState)(),{priorityTextTransformations:priorityTextTransformations,restTransformations:restTransformations}=function useGroupedTransforms(possibleBlockTransformations){const priorityContentTranformationBlocks={"core/paragraph":1,"core/heading":2,"core/list":3,"core/quote":4},transformations=(0,react.useMemo)((()=>{const priorityTextTranformsNames=Object.keys(priorityContentTranformationBlocks);return possibleBlockTransformations.reduce(((accumulator,item)=>{const{name:name}=item;return priorityTextTranformsNames.includes(name)?accumulator.priorityTextTransformations.push(item):accumulator.restTransformations.push(item),accumulator}),{priorityTextTransformations:[],restTransformations:[]})}),[possibleBlockTransformations]);return transformations.priorityTextTransformations.sort(((_ref,_ref2)=>{let{name:currentName}=_ref,{name:nextName}=_ref2;return priorityContentTranformationBlocks[currentName]<priorityContentTranformationBlocks[nextName]?-1:1})),transformations}(possibleBlockTransformations),hasBothContentTransformations=priorityTextTransformations.length&&restTransformations.length,restTransformItems=!!restTransformations.length&&(0,jsx_runtime.jsx)(RestTransformationItems,{restTransformations:restTransformations,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu_group.Z,{label:(0,build_module.__)("Transform to"),className:className,children:[hoveredTransformItemName&&(0,jsx_runtime.jsx)(PreviewBlockPopover,{blocks:(0,blocks_build_module.m4)(blocks,hoveredTransformItemName)}),priorityTextTransformations.map((item=>(0,jsx_runtime.jsx)(BlockTranformationItem,{item:item,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName},item.name))),!hasBothContentTransformations&&restTransformItems]}),!!hasBothContentTransformations&&(0,jsx_runtime.jsx)(menu_group.Z,{className:className,children:restTransformItems})]})};function RestTransformationItems(_ref4){let{restTransformations:restTransformations,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName}=_ref4;return restTransformations.map((item=>(0,jsx_runtime.jsx)(BlockTranformationItem,{item:item,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName},item.name)))}function BlockTranformationItem(_ref5){let{item:item,onSelect:onSelect,setHoveredTransformItemName:setHoveredTransformItemName}=_ref5;const{name:name,icon:icon,title:title,isDisabled:isDisabled}=item;return(0,jsx_runtime.jsxs)(menu_item.Z,{className:(0,blocks_build_module.hq)(name),onClick:event=>{event.preventDefault(),onSelect(name)},disabled:isDisabled,onMouseLeave:()=>setHoveredTransformItemName(null),onMouseEnter:()=>setHoveredTransformItemName(name),children:[(0,jsx_runtime.jsx)(block_icon.Z,{icon:icon,showColors:!0}),title]})}BlockTranformationItem.displayName="BlockTranformationItem",BlockTransformationsMenu.__docgenInfo={description:"",methods:[],displayName:"BlockTransformationsMenu"};var block_transformations_menu=BlockTransformationsMenu;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/block-transformations-menu.js"]={name:"BlockTransformationsMenu",docgenInfo:BlockTransformationsMenu.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/block-transformations-menu.js"});var text_component=__webpack_require__("./packages/components/build-module/text/component.js"),check=__webpack_require__("./packages/icons/build-module/library/check.js"),token_list_build_module=__webpack_require__("./packages/token-list/build-module/index.js");function getDefaultStyle(styles){return null==styles?void 0:styles.find((style=>style.isDefault))}function useStylesForBlocks(_ref){let{clientId:clientId,onSwitch:onSwitch}=_ref;const{styles:styles,block:block,blockType:blockType,className:className}=(0,use_select.Z)((select=>{const{getBlock:getBlock}=select(store.h),block=getBlock(clientId);if(!block)return{};const blockType=(0,blocks_build_module.ck)(block.name),{getBlockStyles:getBlockStyles}=select(blocks_build_module.h);return{block:block,blockType:blockType,styles:getBlockStyles(block.name),className:block.attributes.className||""}}),[clientId]),{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store.h),stylesToRender=function getRenderedStyles(styles){return styles&&0!==styles.length?getDefaultStyle(styles)?styles:[{name:"default",label:(0,build_module._x)("Default","block style"),isDefault:!0},...styles]:[]}(styles),activeStyle=function getActiveStyle(styles,className){for(const style of new token_list_build_module.Z(className).values()){if(-1===style.indexOf("is-style-"))continue;const potentialStyleName=style.substring(9),activeStyle=null==styles?void 0:styles.find((_ref=>{let{name:name}=_ref;return name===potentialStyleName}));if(activeStyle)return activeStyle}return getDefaultStyle(styles)}(stylesToRender,className),genericPreviewBlock=function useGenericPreviewBlock(block,type){return(0,react.useMemo)((()=>{const example=null==type?void 0:type.example,blockName=null==type?void 0:type.name;return example&&blockName?(0,blocks_build_module.Wf)(blockName,{attributes:example.attributes,innerBlocks:example.innerBlocks}):block?(0,blocks_build_module.Wm)(block):void 0}),[null!=type&&type.example?null==block?void 0:block.name:block,type])}(block,blockType);return{onSelect:style=>{const styleClassName=function replaceActiveStyle(className,activeStyle,newStyle){const list=new token_list_build_module.Z(className);return activeStyle&&list.remove("is-style-"+activeStyle.name),list.add("is-style-"+newStyle.name),list.value}(className,activeStyle,style);updateBlockAttributes(clientId,{className:styleClassName}),onSwitch()},stylesToRender:stylesToRender,activeStyle:activeStyle,genericPreviewBlock:genericPreviewBlock,className:className}}const menu_items_noop=()=>{};function BlockStylesMenuItems(_ref){let{clientId:clientId,onSwitch:onSwitch=menu_items_noop}=_ref;const{onSelect:onSelect,stylesToRender:stylesToRender,activeStyle:activeStyle}=useStylesForBlocks({clientId:clientId,onSwitch:onSwitch});return stylesToRender&&0!==stylesToRender.length?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:stylesToRender.map((style=>{const menuItemText=style.label||style.name;return(0,jsx_runtime.jsx)(menu_item.Z,{icon:activeStyle.name===style.name?check.Z:null,onClick:()=>onSelect(style),children:(0,jsx_runtime.jsx)(text_component.Z,{as:"span",limit:18,ellipsizeMode:"tail",truncate:!0,children:menuItemText})},style.name)}))}):null}function BlockStylesMenu(_ref){let{hoveredBlock:hoveredBlock,onSwitch:onSwitch}=_ref;const{clientId:clientId}=hoveredBlock;return(0,jsx_runtime.jsx)(menu_group.Z,{label:(0,build_module.__)("Styles"),className:"block-editor-block-switcher__styles__menugroup",children:(0,jsx_runtime.jsx)(BlockStylesMenuItems,{clientId:clientId,onSwitch:onSwitch})})}BlockStylesMenuItems.__docgenInfo={description:"",methods:[],displayName:"BlockStylesMenuItems",props:{onSwitch:{defaultValue:{value:"() => {}",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-styles/menu-items.js"]={name:"BlockStylesMenuItems",docgenInfo:BlockStylesMenuItems.__docgenInfo,path:"packages/block-editor/src/components/block-styles/menu-items.js"}),BlockStylesMenu.displayName="BlockStylesMenu",BlockStylesMenu.__docgenInfo={description:"",methods:[],displayName:"BlockStylesMenu"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/block-styles-menu.js"]={name:"BlockStylesMenu",docgenInfo:BlockStylesMenu.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/block-styles-menu.js"});const getMatchingBlockByName=function(block,selectedBlockName){let consumedBlocks=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const{clientId:clientId,name:name,innerBlocks:innerBlocks=[]}=block;if(!consumedBlocks.has(clientId)){if(name===selectedBlockName)return block;for(const innerBlock of innerBlocks){const match=getMatchingBlockByName(innerBlock,selectedBlockName,consumedBlocks);if(match)return match}}},transformMatchingBlock=(match,selectedBlock)=>{const retainedBlockAttributes=((name,attributes)=>{const contentAttributes=(0,blocks_build_module.A$)(name,"content");return null!=contentAttributes&&contentAttributes.length?contentAttributes.reduce(((_accumulator,attribute)=>(attributes[attribute]&&(_accumulator[attribute]=attributes[attribute]),_accumulator)),{}):attributes})(selectedBlock.name,selectedBlock.attributes);match.attributes={...match.attributes,...retainedBlockAttributes}};var use_transformed_patterns=(patterns,selectedBlocks)=>(0,react.useMemo)((()=>patterns.reduce(((accumulator,_pattern)=>{const transformedBlocks=((selectedBlocks,patternBlocks)=>{const _patternBlocks=patternBlocks.map((block=>(0,blocks_build_module.Wm)(block))),consumedBlocks=new Set;for(const selectedBlock of selectedBlocks){let isMatch=!1;for(const patternBlock of _patternBlocks){const match=getMatchingBlockByName(patternBlock,selectedBlock.name,consumedBlocks);if(match){isMatch=!0,consumedBlocks.add(match.clientId),transformMatchingBlock(match,selectedBlock);break}}if(!isMatch)return}return _patternBlocks})(selectedBlocks,_pattern.blocks);return transformedBlocks&&accumulator.push({..._pattern,transformedBlocks:transformedBlocks}),accumulator}),[])),[patterns,selectedBlocks]);function PatternTransformationsMenu(_ref){let{blocks:blocks,patterns:statePatterns,onSelect:onSelect}=_ref;const[showTransforms,setShowTransforms]=(0,react.useState)(!1),patterns=use_transformed_patterns(statePatterns,blocks);return patterns.length?(0,jsx_runtime.jsxs)(menu_group.Z,{className:"block-editor-block-switcher__pattern__transforms__menugroup",children:[showTransforms&&(0,jsx_runtime.jsx)(PreviewPatternsPopover,{patterns:patterns,onSelect:onSelect}),(0,jsx_runtime.jsx)(menu_item.Z,{onClick:event=>{event.preventDefault(),setShowTransforms(!showTransforms)},icon:chevron_right.Z,children:(0,build_module.__)("Patterns")})]}):null}function PreviewPatternsPopover(_ref2){let{patterns:patterns,onSelect:onSelect}=_ref2;return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__popover__preview__parent",children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__popover__preview__container",children:(0,jsx_runtime.jsx)(popover.Z,{className:"block-editor-block-switcher__preview__popover",position:"bottom right",children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-switcher__preview",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__preview-title",children:(0,build_module.__)("Preview")}),(0,jsx_runtime.jsx)(BlockPatternsList,{patterns:patterns,onSelect:onSelect})]})})})})}function BlockPatternsList(_ref3){let{patterns:patterns,onSelect:onSelect}=_ref3;const composite=(0,CompositeState.u)();return(0,jsx_runtime.jsx)(Composite.b,{...composite,role:"listbox",className:"block-editor-block-switcher__preview-patterns-container","aria-label":(0,build_module.__)("Patterns list"),children:patterns.map((pattern=>(0,jsx_runtime.jsx)(pattern_transformations_menu_BlockPattern,{pattern:pattern,onSelect:onSelect,composite:composite},pattern.name)))})}function pattern_transformations_menu_BlockPattern(_ref4){let{pattern:pattern,onSelect:onSelect,composite:composite}=_ref4;const baseClassName="block-editor-block-switcher__preview-patterns-container",descriptionId=(0,use_instance_id.Z)(pattern_transformations_menu_BlockPattern,`${baseClassName}-list__item-description`);return(0,jsx_runtime.jsxs)("div",{className:`${baseClassName}-list__list-item`,"aria-label":pattern.title,"aria-describedby":pattern.description?descriptionId:void 0,children:[(0,jsx_runtime.jsxs)(CompositeItem.A,{role:"option",as:"div",...composite,className:`${baseClassName}-list__item`,onClick:()=>onSelect(pattern.transformedBlocks),children:[(0,jsx_runtime.jsx)(block_preview,{blocks:pattern.transformedBlocks,viewportWidth:pattern.viewportWidth||500}),(0,jsx_runtime.jsx)("div",{className:`${baseClassName}-list__item-title`,children:pattern.title})]}),!!pattern.description&&(0,jsx_runtime.jsx)(component.Z,{id:descriptionId,children:pattern.description})]})}PatternTransformationsMenu.displayName="PatternTransformationsMenu",PreviewPatternsPopover.displayName="PreviewPatternsPopover",BlockPatternsList.displayName="BlockPatternsList",pattern_transformations_menu_BlockPattern.displayName="BlockPattern",PatternTransformationsMenu.__docgenInfo={description:"",methods:[],displayName:"PatternTransformationsMenu"};var pattern_transformations_menu=PatternTransformationsMenu;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/pattern-transformations-menu.js"]={name:"PatternTransformationsMenu",docgenInfo:PatternTransformationsMenu.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/pattern-transformations-menu.js"});const BlockSwitcherDropdownMenu=_ref=>{let{clientIds:clientIds,blocks:blocks}=_ref;const{replaceBlocks:replaceBlocks,multiSelect:multiSelect}=(0,use_dispatch.Z)(store.h),blockInformation=useBlockDisplayInformation(blocks[0].clientId),{possibleBlockTransformations:possibleBlockTransformations,canRemove:canRemove,hasBlockStyles:hasBlockStyles,icon:icon,patterns:patterns}=(0,use_select.Z)((select=>{const{getBlockRootClientId:getBlockRootClientId,getBlockTransformItems:getBlockTransformItems,__experimentalGetPatternTransformItems:__experimentalGetPatternTransformItems}=select(store.h),{getBlockStyles:getBlockStyles,getBlockType:getBlockType}=select(blocks_build_module.h),{canRemoveBlocks:canRemoveBlocks}=select(store.h),rootClientId=getBlockRootClientId(Array.isArray(clientIds)?clientIds[0]:clientIds),[{name:firstBlockName}]=blocks,_isSingleBlockSelected=1===blocks.length,styles=_isSingleBlockSelected&&getBlockStyles(firstBlockName);let _icon;if(_isSingleBlockSelected)_icon=null==blockInformation?void 0:blockInformation.icon;else{var _getBlockType;_icon=1===new Set(blocks.map((_ref2=>{let{name:name}=_ref2;return name}))).size?null===(_getBlockType=getBlockType(firstBlockName))||void 0===_getBlockType?void 0:_getBlockType.icon:copy.Z}return{possibleBlockTransformations:getBlockTransformItems(blocks,rootClientId),canRemove:canRemoveBlocks(clientIds,rootClientId),hasBlockStyles:!(null==styles||!styles.length),icon:_icon,patterns:__experimentalGetPatternTransformItems(blocks,rootClientId)}}),[clientIds,blocks,null==blockInformation?void 0:blockInformation.icon]),blockTitle=useBlockDisplayTitle({clientId:Array.isArray(clientIds)?clientIds[0]:clientIds,maximumLength:35}),isReusable=1===blocks.length&&(0,blocks_build_module.vr)(blocks[0]),isTemplate=1===blocks.length&&(0,blocks_build_module.zQ)(blocks[0]);function selectForMultipleBlocks(insertedBlocks){insertedBlocks.length>1&&multiSelect(insertedBlocks[0].clientId,insertedBlocks[insertedBlocks.length-1].clientId)}const hasPossibleBlockTransformations=!!possibleBlockTransformations.length&&canRemove&&!isTemplate,hasPatternTransformation=!(null==patterns||!patterns.length)&&canRemove;if(!hasBlockStyles&&!hasPossibleBlockTransformations)return(0,jsx_runtime.jsx)(toolbar_group.Z,{children:(0,jsx_runtime.jsx)(toolbar_button.Z,{disabled:!0,className:"block-editor-block-switcher__no-switcher-icon",title:blockTitle,icon:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_icon.Z,{icon:icon,showColors:!0}),(isReusable||isTemplate)&&(0,jsx_runtime.jsx)("span",{className:"block-editor-block-switcher__toggle-text",children:blockTitle})]})})});const blockSwitcherLabel=blockTitle,blockSwitcherDescription=1===blocks.length?(0,build_module.gB)((0,build_module.__)("%s: Change block type or style"),blockTitle):(0,build_module.gB)((0,build_module._n)("Change type of %d block","Change type of %d blocks",blocks.length),blocks.length),showDropDown=hasBlockStyles||hasPossibleBlockTransformations||hasPatternTransformation;return(0,jsx_runtime.jsx)(toolbar_group.Z,{children:(0,jsx_runtime.jsx)(toolbar_item.Z,{children:toggleProps=>(0,jsx_runtime.jsx)(dropdown_menu.Z,{className:"block-editor-block-switcher",label:blockSwitcherLabel,popoverProps:{position:"bottom right",variant:"toolbar",className:"block-editor-block-switcher__popover"},icon:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_icon.Z,{icon:icon,className:"block-editor-block-switcher__toggle",showColors:!0}),(isReusable||isTemplate)&&(0,jsx_runtime.jsx)("span",{className:"block-editor-block-switcher__toggle-text",children:blockTitle})]}),toggleProps:{describedBy:blockSwitcherDescription,...toggleProps},menuProps:{orientation:"both"},children:_ref3=>{let{onClose:onClose}=_ref3;return showDropDown&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-switcher__container",children:[hasPatternTransformation&&(0,jsx_runtime.jsx)(pattern_transformations_menu,{blocks:blocks,patterns:patterns,onSelect:transformedBlocks=>{!function onPatternTransform(transformedBlocks){replaceBlocks(clientIds,transformedBlocks),selectForMultipleBlocks(transformedBlocks)}(transformedBlocks),onClose()}}),hasPossibleBlockTransformations&&(0,jsx_runtime.jsx)(block_transformations_menu,{className:"block-editor-block-switcher__transforms__menugroup",possibleBlockTransformations:possibleBlockTransformations,blocks:blocks,onSelect:name=>{!function onBlockTransform(name){const newBlocks=(0,blocks_build_module.m4)(blocks,name);replaceBlocks(clientIds,newBlocks),selectForMultipleBlocks(newBlocks)}(name),onClose()}}),hasBlockStyles&&(0,jsx_runtime.jsx)(BlockStylesMenu,{hoveredBlock:blocks[0],onSwitch:onClose})]})}})})})};BlockSwitcherDropdownMenu.displayName="BlockSwitcherDropdownMenu";const BlockSwitcher=_ref4=>{let{clientIds:clientIds}=_ref4;const blocks=(0,use_select.Z)((select=>select(store.h).getBlocksByClientId(clientIds)),[clientIds]);return!blocks.length||blocks.some((block=>!block))?null:(0,jsx_runtime.jsx)(BlockSwitcherDropdownMenu,{clientIds:clientIds,blocks:blocks})};BlockSwitcher.displayName="BlockSwitcher",BlockSwitcher.__docgenInfo={description:"",methods:[],displayName:"BlockSwitcher"};var block_switcher=BlockSwitcher;BlockSwitcherDropdownMenu.__docgenInfo={description:"",methods:[],displayName:"BlockSwitcherDropdownMenu"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/index.js"]={name:"BlockSwitcherDropdownMenu",docgenInfo:BlockSwitcherDropdownMenu.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/index.js"}),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-switcher/index.js"]={name:"BlockSwitcher",docgenInfo:BlockSwitcher.__docgenInfo,path:"packages/block-editor/src/components/block-switcher/index.js"});const{Fill:__unstableBlockToolbarLastItem,Slot:block_toolbar_last_item_Slot}=(0,slot_fill.up)("__unstableBlockToolbarLastItem");__unstableBlockToolbarLastItem.Slot=block_toolbar_last_item_Slot;var block_toolbar_last_item=__unstableBlockToolbarLastItem,more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js"),use_copy_to_clipboard=__webpack_require__("./packages/compose/build-module/hooks/use-copy-to-clipboard/index.js"),pipe=__webpack_require__("./packages/compose/build-module/higher-order/pipe.js"),assert_is_defined=__webpack_require__("./packages/dom/build-module/utils/assert-is-defined.js");function documentHasTextSelection(doc){(0,assert_is_defined.c)(doc.defaultView,"doc.defaultView");const selection=doc.defaultView.getSelection();(0,assert_is_defined.c)(selection,"selection");const range=selection.rangeCount?selection.getRangeAt(0):null;return!!range&&!range.collapsed}var is_html_input_element=__webpack_require__("./packages/dom/build-module/dom/is-html-input-element.js");function documentHasUncollapsedSelection(doc){return documentHasTextSelection(doc)||!!doc.activeElement&&function inputFieldHasUncollapsedSelection(element){if(!(0,is_html_input_element.Z)(element)&&!(0,is_text_field.Z)(element))return!1;try{const{selectionStart:selectionStart,selectionEnd:selectionEnd}=element;return null===selectionStart||selectionStart!==selectionEnd}catch(error){return!0}}(doc.activeElement)}var strip_html=__webpack_require__("./packages/dom/build-module/dom/strip-html.js"),data_transfer=__webpack_require__("./packages/dom/build-module/data-transfer.js");function useNotifyCopy(){const{getBlockName:getBlockName}=(0,use_select.Z)(store.h),{getBlockType:getBlockType}=(0,use_select.Z)(blocks_build_module.h),{createSuccessNotice:createSuccessNotice}=(0,use_dispatch.Z)(notices_build_module.h);return(0,react.useCallback)(((eventType,selectedBlockClientIds)=>{let notice="";if(1===selectedBlockClientIds.length){var _getBlockType;const clientId=selectedBlockClientIds[0],title=null===(_getBlockType=getBlockType(getBlockName(clientId)))||void 0===_getBlockType?void 0:_getBlockType.title;notice="copy"===eventType?(0,build_module.gB)((0,build_module.__)('Copied "%s" to clipboard.'),title):(0,build_module.gB)((0,build_module.__)('Moved "%s" to clipboard.'),title)}else notice="copy"===eventType?(0,build_module.gB)((0,build_module._n)("Copied %d block to clipboard.","Copied %d blocks to clipboard.",selectedBlockClientIds.length),selectedBlockClientIds.length):(0,build_module.gB)((0,build_module._n)("Moved %d block to clipboard.","Moved %d blocks to clipboard.",selectedBlockClientIds.length),selectedBlockClientIds.length);createSuccessNotice(notice,{type:"snackbar"})}),[])}function useClipboardHandler(){const{getBlocksByClientId:getBlocksByClientId,getSelectedBlockClientIds:getSelectedBlockClientIds,hasMultiSelection:hasMultiSelection,getSettings:getSettings,__unstableIsFullySelected:__unstableIsFullySelected,__unstableIsSelectionCollapsed:__unstableIsSelectionCollapsed,__unstableIsSelectionMergeable:__unstableIsSelectionMergeable,__unstableGetSelectedBlocksWithPartialSelection:__unstableGetSelectedBlocksWithPartialSelection,canInsertBlockType:canInsertBlockType}=(0,use_select.Z)(store.h),{flashBlock:flashBlock,removeBlocks:removeBlocks,replaceBlocks:replaceBlocks,__unstableDeleteSelection:__unstableDeleteSelection,__unstableExpandSelection:__unstableExpandSelection,insertBlocks:insertBlocks}=(0,use_dispatch.Z)(store.h),notifyCopy=useNotifyCopy();return(0,use_ref_effect.Z)((node=>{function handler(event){const selectedBlockClientIds=getSelectedBlockClientIds();if(0===selectedBlockClientIds.length)return;if(!hasMultiSelection()){const{target:target}=event,{ownerDocument:ownerDocument}=target;if("copy"===event.type||"cut"===event.type?documentHasUncollapsedSelection(ownerDocument):function documentHasSelection(doc){return!!doc.activeElement&&((0,is_html_input_element.Z)(doc.activeElement)||(0,is_text_field.Z)(doc.activeElement)||documentHasTextSelection(doc))}(ownerDocument))return}if(!node.contains(event.target.ownerDocument.activeElement))return;const eventDefaultPrevented=event.defaultPrevented;event.preventDefault();const isSelectionMergeable=__unstableIsSelectionMergeable(),shouldHandleWholeBlocks=__unstableIsSelectionCollapsed()||__unstableIsFullySelected(),expandSelectionIsNeeded=!shouldHandleWholeBlocks&&!isSelectionMergeable;if("copy"===event.type||"cut"===event.type)if(1===selectedBlockClientIds.length&&flashBlock(selectedBlockClientIds[0]),expandSelectionIsNeeded)__unstableExpandSelection();else{let blocks;if(notifyCopy(event.type,selectedBlockClientIds),shouldHandleWholeBlocks)blocks=getBlocksByClientId(selectedBlockClientIds);else{const[head,tail]=__unstableGetSelectedBlocksWithPartialSelection();blocks=[head,...getBlocksByClientId(selectedBlockClientIds.slice(1,selectedBlockClientIds.length-1)),tail]}const wrapperBlockName=event.clipboardData.getData("__unstableWrapperBlockName");wrapperBlockName&&(blocks=(0,blocks_build_module.j4)(wrapperBlockName,JSON.parse(event.clipboardData.getData("__unstableWrapperBlockAttributes")),blocks));const serialized=(0,blocks_build_module.qC)(blocks);event.clipboardData.setData("text/plain",function toPlainText(html){html=html.replace(/<br>/g,"\n");return(0,strip_html.Z)(html).trim().replace(/\n\n+/g,"\n\n")}(serialized)),event.clipboardData.setData("text/html",serialized)}if("cut"===event.type)shouldHandleWholeBlocks&&!expandSelectionIsNeeded?removeBlocks(selectedBlockClientIds):__unstableDeleteSelection();else if("paste"===event.type){if(eventDefaultPrevented)return;const{__experimentalCanUserUseUnfilteredHTML:canUserUseUnfilteredHTML}=getSettings(),{plainText:plainText,html:html,files:files}=function getPasteEventData(_ref){let{clipboardData:clipboardData}=_ref,plainText="",html="";try{plainText=clipboardData.getData("text/plain"),html=clipboardData.getData("text/html")}catch(error1){try{html=clipboardData.getData("Text")}catch(error2){return}}const files=(0,data_transfer.f)(clipboardData);return files.length&&!function shouldDismissPastedFiles(files,html){if(html&&1===(null==files?void 0:files.length)&&0===files[0].type.indexOf("image/")){var _html$match;const IMAGE_TAG=/<\s*img\b/gi;if(1!==(null===(_html$match=html.match(IMAGE_TAG))||void 0===_html$match?void 0:_html$match.length))return!0;const IMG_WITH_LOCAL_SRC=/<\s*img\b[^>]*\bsrc="file:\/\//i;if(html.match(IMG_WITH_LOCAL_SRC))return!0}return!1}(files,html)?{files:files}:{html:html,plainText:plainText,files:[]}}(event);let blocks=[];if(files.length){const fromTransforms=(0,blocks_build_module.Xn)("from");blocks=files.reduce(((accumulator,file)=>{const transformation=(0,blocks_build_module.MC)(fromTransforms,(transform=>"files"===transform.type&&transform.isMatch([file])));return transformation&&accumulator.push(transformation.transform([file])),accumulator}),[]).flat()}else blocks=(0,blocks_build_module.ag)({HTML:html,plainText:plainText,mode:"BLOCKS",canUserUseUnfilteredHTML:canUserUseUnfilteredHTML});if(1===selectedBlockClientIds.length){const[selectedBlockClientId]=selectedBlockClientIds;if(blocks.every((block=>canInsertBlockType(block.name,selectedBlockClientId))))return void insertBlocks(blocks,void 0,selectedBlockClientId)}replaceBlocks(selectedBlockClientIds,blocks,blocks.length-1,-1)}}return node.ownerDocument.addEventListener("copy",handler),node.ownerDocument.addEventListener("cut",handler),node.ownerDocument.addEventListener("paste",handler),()=>{node.ownerDocument.removeEventListener("copy",handler),node.ownerDocument.removeEventListener("cut",handler),node.ownerDocument.removeEventListener("paste",handler)}}),[])}function CopyHandler(_ref){let{children:children}=_ref;return(0,jsx_runtime.jsx)("div",{ref:useClipboardHandler(),children:children})}CopyHandler.displayName="CopyHandler",CopyHandler.__docgenInfo={description:"",methods:[],displayName:"CopyHandler"};function BlockActions(_ref){let{clientIds:clientIds,children:children,__experimentalUpdateSelection:updateSelection}=_ref;const{canInsertBlockType:canInsertBlockType,getBlockRootClientId:getBlockRootClientId,getBlocksByClientId:getBlocksByClientId,canMoveBlocks:canMoveBlocks,canRemoveBlocks:canRemoveBlocks}=(0,use_select.Z)(store.h),{getDefaultBlockName:getDefaultBlockName,getGroupingBlockName:getGroupingBlockName}=(0,use_select.Z)(blocks_build_module.h),blocks=getBlocksByClientId(clientIds),rootClientId=getBlockRootClientId(clientIds[0]),canDuplicate=blocks.every((block=>!!block&&(0,blocks_build_module.zb)(block.name,"multiple",!0)&&canInsertBlockType(block.name,rootClientId))),canInsertDefaultBlock=canInsertBlockType(getDefaultBlockName(),rootClientId),canMove=canMoveBlocks(clientIds,rootClientId),canRemove=canRemoveBlocks(clientIds,rootClientId),{removeBlocks:removeBlocks,replaceBlocks:replaceBlocks,duplicateBlocks:duplicateBlocks,insertAfterBlock:insertAfterBlock,insertBeforeBlock:insertBeforeBlock,flashBlock:flashBlock,setBlockMovingClientId:setBlockMovingClientId,setNavigationMode:setNavigationMode,selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h),notifyCopy=useNotifyCopy();return children({canDuplicate:canDuplicate,canInsertDefaultBlock:canInsertDefaultBlock,canMove:canMove,canRemove:canRemove,rootClientId:rootClientId,blocks:blocks,onDuplicate:()=>duplicateBlocks(clientIds,updateSelection),onRemove:()=>removeBlocks(clientIds,updateSelection),onInsertBefore(){const clientId=Array.isArray(clientIds)?clientIds[0]:clientId;insertBeforeBlock(clientId)},onInsertAfter(){const clientId=Array.isArray(clientIds)?clientIds[clientIds.length-1]:clientId;insertAfterBlock(clientId)},onMoveTo(){setNavigationMode(!0),selectBlock(clientIds[0]),setBlockMovingClientId(clientIds[0])},onGroup(){if(!blocks.length)return;const groupingBlockName=getGroupingBlockName(),newBlocks=(0,blocks_build_module.m4)(blocks,groupingBlockName);newBlocks&&replaceBlocks(clientIds,newBlocks)},onUngroup(){if(!blocks.length)return;const innerBlocks=blocks[0].innerBlocks;innerBlocks.length&&replaceBlocks(clientIds,innerBlocks)},onCopy(){const selectedBlockClientIds=blocks.map((_ref2=>{let{clientId:clientId}=_ref2;return clientId}));1===blocks.length&&flashBlock(selectedBlockClientIds[0]),notifyCopy("copy",selectedBlockClientIds)}})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/copy-handler/index.js"]={name:"CopyHandler",docgenInfo:CopyHandler.__docgenInfo,path:"packages/block-editor/src/components/copy-handler/index.js"});const block_mode_toggle_noop=()=>{};function BlockModeToggle(_ref){let{blockType:blockType,mode:mode,onToggleMode:onToggleMode,small:small=!1,isCodeEditingEnabled:isCodeEditingEnabled=!0}=_ref;if(!blockType||!(0,blocks_build_module.zb)(blockType,"html",!0)||!isCodeEditingEnabled)return null;const label="visual"===mode?(0,build_module.__)("Edit as HTML"):(0,build_module.__)("Edit visually");return(0,jsx_runtime.jsx)(menu_item.Z,{onClick:onToggleMode,children:!small&&label})}BlockModeToggle.displayName="BlockModeToggle",BlockModeToggle.__docgenInfo={description:"",methods:[],displayName:"BlockModeToggle",props:{small:{defaultValue:{value:"false",computed:!1},required:!1},isCodeEditingEnabled:{defaultValue:{value:"true",computed:!1},required:!1}}};var block_mode_toggle=(0,compose.Z)([(0,with_select.Z)(((select,_ref2)=>{let{clientId:clientId}=_ref2;const{getBlock:getBlock,getBlockMode:getBlockMode,getSettings:getSettings}=select(store.h),block=getBlock(clientId),isCodeEditingEnabled=getSettings().codeEditingEnabled;return{mode:getBlockMode(clientId),blockType:block?(0,blocks_build_module.ck)(block.name):null,isCodeEditingEnabled:isCodeEditingEnabled}})),(0,with_dispatch.Z)(((dispatch,_ref3)=>{let{onToggle:onToggle=block_mode_toggle_noop,clientId:clientId}=_ref3;return{onToggleMode(){dispatch(store.h).toggleBlockMode(clientId),onToggle()}}}))])(BlockModeToggle);function BlockConvertButton(_ref){let{shouldRender:shouldRender,onClick:onClick,small:small}=_ref;if(!shouldRender)return null;const label=(0,build_module.__)("Convert to Blocks");return(0,jsx_runtime.jsx)(menu_item.Z,{onClick:onClick,children:!small&&label})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-settings-menu/block-mode-toggle.js"]={name:"BlockModeToggle",docgenInfo:BlockModeToggle.__docgenInfo,path:"packages/block-editor/src/components/block-settings-menu/block-mode-toggle.js"}),BlockConvertButton.displayName="BlockConvertButton",BlockConvertButton.__docgenInfo={description:"",methods:[],displayName:"BlockConvertButton"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-settings-menu/block-convert-button.js"]={name:"BlockConvertButton",docgenInfo:BlockConvertButton.__docgenInfo,path:"packages/block-editor/src/components/block-settings-menu/block-convert-button.js"});var block_html_convert_button=(0,compose.Z)((0,with_select.Z)(((select,_ref)=>{let{clientId:clientId}=_ref;const block=select(store.h).getBlock(clientId);return{block:block,shouldRender:block&&"core/html"===block.name}})),(0,with_dispatch.Z)(((dispatch,_ref2)=>{let{block:block}=_ref2;return{onClick:()=>dispatch(store.h).replaceBlocks(block.clientId,(0,blocks_build_module.AF)({HTML:(0,blocks_build_module.Jo)(block)}))}})))(BlockConvertButton);const{Fill:__unstableBlockSettingsMenuFirstItem,Slot:block_settings_menu_first_item_Slot}=(0,slot_fill.up)("__unstableBlockSettingsMenuFirstItem");__unstableBlockSettingsMenuFirstItem.Slot=block_settings_menu_first_item_Slot;var block_settings_menu_first_item=__unstableBlockSettingsMenuFirstItem;function ConvertToGroupButton(_ref){let{clientIds:clientIds,isGroupable:isGroupable,isUngroupable:isUngroupable,blocksSelection:blocksSelection,groupingBlockName:groupingBlockName,onClose:onClose=(()=>{})}=_ref;const{replaceBlocks:replaceBlocks}=(0,use_dispatch.Z)(store.h);return isGroupable||isUngroupable?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isGroupable&&(0,jsx_runtime.jsx)(menu_item.Z,{onClick:()=>{(()=>{const newBlocks=(0,blocks_build_module.m4)(blocksSelection,groupingBlockName);newBlocks&&replaceBlocks(clientIds,newBlocks)})(),onClose()},children:(0,build_module._x)("Group","verb")}),isUngroupable&&(0,jsx_runtime.jsx)(menu_item.Z,{onClick:()=>{(()=>{const innerBlocks=blocksSelection[0].innerBlocks;innerBlocks.length&&replaceBlocks(clientIds,innerBlocks)})(),onClose()},children:(0,build_module._x)("Ungroup","Ungrouping blocks from within a Group block back into individual blocks within the Editor ")})]}):null}function useConvertToGroupButtonProps(){const{clientIds:clientIds,isGroupable:isGroupable,isUngroupable:isUngroupable,blocksSelection:blocksSelection,groupingBlockName:groupingBlockName}=(0,use_select.Z)((select=>{var _blocksSelection$;const{getBlockRootClientId:getBlockRootClientId,getBlocksByClientId:getBlocksByClientId,canInsertBlockType:canInsertBlockType,getSelectedBlockClientIds:getSelectedBlockClientIds}=select(store.h),{getGroupingBlockName:getGroupingBlockName}=select(blocks_build_module.h),_clientIds=getSelectedBlockClientIds(),_groupingBlockName=getGroupingBlockName(),groupingBlockAvailable=canInsertBlockType(_groupingBlockName,null!=_clientIds&&_clientIds.length?getBlockRootClientId(_clientIds[0]):void 0),_blocksSelection=getBlocksByClientId(_clientIds),isSingleGroupingBlock=1===_blocksSelection.length&&(null===(_blocksSelection$=_blocksSelection[0])||void 0===_blocksSelection$?void 0:_blocksSelection$.name)===_groupingBlockName;return{clientIds:_clientIds,isGroupable:groupingBlockAvailable&&_blocksSelection.length,isUngroupable:isSingleGroupingBlock&&!!_blocksSelection[0].innerBlocks.length,blocksSelection:_blocksSelection,groupingBlockName:_groupingBlockName}}),[]);return{clientIds:clientIds,isGroupable:isGroupable,isUngroupable:isUngroupable,blocksSelection:blocksSelection,groupingBlockName:groupingBlockName}}function useBlockLock(clientId){return(0,use_select.Z)((select=>{const{canEditBlock:canEditBlock,canMoveBlock:canMoveBlock,canRemoveBlock:canRemoveBlock,canLockBlockType:canLockBlockType,getBlockName:getBlockName,getBlockRootClientId:getBlockRootClientId,getTemplateLock:getTemplateLock}=select(store.h),rootClientId=getBlockRootClientId(clientId),canEdit=canEditBlock(clientId),canMove=canMoveBlock(clientId,rootClientId),canRemove=canRemoveBlock(clientId,rootClientId);return{canEdit:canEdit,canMove:canMove,canRemove:canRemove,canLock:canLockBlockType(getBlockName(clientId)),isContentLocked:"contentOnly"===getTemplateLock(clientId),isLocked:!canEdit||!canMove||!canRemove}}),[clientId])}ConvertToGroupButton.__docgenInfo={description:"",methods:[],displayName:"ConvertToGroupButton",props:{onClose:{defaultValue:{value:"() => {}",computed:!1},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/convert-to-group-buttons/index.js"]={name:"ConvertToGroupButton",docgenInfo:ConvertToGroupButton.__docgenInfo,path:"packages/block-editor/src/components/convert-to-group-buttons/index.js"});var unlock=__webpack_require__("./packages/icons/build-module/library/unlock.js"),lock_outline=__webpack_require__("./packages/icons/build-module/library/lock-outline.js"),checkbox_control=__webpack_require__("./packages/components/build-module/checkbox-control/index.js"),library_lock=__webpack_require__("./packages/icons/build-module/library/lock.js");const ALLOWS_EDIT_LOCKING=["core/block","core/navigation"];function getTemplateLockValue(lock){return lock.remove&&lock.move?"all":!(!lock.remove||lock.move)&&"insert"}function BlockLockModal(_ref){let{clientId:clientId,onClose:onClose}=_ref;const[lock,setLock]=(0,react.useState)({move:!1,remove:!1}),{canEdit:canEdit,canMove:canMove,canRemove:canRemove}=useBlockLock(clientId),{allowsEditLocking:allowsEditLocking,templateLock:templateLock,hasTemplateLock:hasTemplateLock}=(0,use_select.Z)((select=>{var _getBlockAttributes,_blockType$attributes;const{getBlockName:getBlockName,getBlockAttributes:getBlockAttributes}=select(store.h),blockName=getBlockName(clientId),blockType=(0,blocks_build_module.ck)(blockName);return{allowsEditLocking:ALLOWS_EDIT_LOCKING.includes(blockName),templateLock:null===(_getBlockAttributes=getBlockAttributes(clientId))||void 0===_getBlockAttributes?void 0:_getBlockAttributes.templateLock,hasTemplateLock:!(null==blockType||null===(_blockType$attributes=blockType.attributes)||void 0===_blockType$attributes||!_blockType$attributes.templateLock)}}),[clientId]),[applyTemplateLock,setApplyTemplateLock]=(0,react.useState)(!!templateLock),{updateBlockAttributes:updateBlockAttributes}=(0,use_dispatch.Z)(store.h),blockInformation=useBlockDisplayInformation(clientId),instanceId=(0,use_instance_id.Z)(BlockLockModal,"block-editor-block-lock-modal__options-title");(0,react.useEffect)((()=>{setLock({move:!canMove,remove:!canRemove,...allowsEditLocking?{edit:!canEdit}:{}})}),[canEdit,canMove,canRemove,allowsEditLocking]);const isAllChecked=Object.values(lock).every(Boolean),isMixed=Object.values(lock).some(Boolean)&&!isAllChecked;return(0,jsx_runtime.jsxs)(modal.Z,{title:(0,build_module.gB)((0,build_module.__)("Lock %s"),blockInformation.title),overlayClassName:"block-editor-block-lock-modal",closeLabel:(0,build_module.__)("Close"),onRequestClose:onClose,children:[(0,jsx_runtime.jsx)("p",{children:(0,build_module.__)("Choose specific attributes to restrict or lock all available options.")}),(0,jsx_runtime.jsxs)("form",{onSubmit:event=>{event.preventDefault(),updateBlockAttributes([clientId],{lock:lock,templateLock:applyTemplateLock?getTemplateLockValue(lock):void 0}),onClose()},children:[(0,jsx_runtime.jsxs)("div",{role:"group","aria-labelledby":instanceId,className:"block-editor-block-lock-modal__options",children:[(0,jsx_runtime.jsx)(checkbox_control.C,{__nextHasNoMarginBottom:!0,className:"block-editor-block-lock-modal__options-title",label:(0,jsx_runtime.jsx)("span",{id:instanceId,children:(0,build_module.__)("Lock all")}),checked:isAllChecked,indeterminate:isMixed,onChange:newValue=>setLock({move:newValue,remove:newValue,...allowsEditLocking?{edit:newValue}:{}})}),(0,jsx_runtime.jsxs)("ul",{className:"block-editor-block-lock-modal__checklist",children:[allowsEditLocking&&(0,jsx_runtime.jsxs)("li",{className:"block-editor-block-lock-modal__checklist-item",children:[(0,jsx_runtime.jsx)(checkbox_control.C,{__nextHasNoMarginBottom:!0,label:(0,build_module.__)("Restrict editing"),checked:!!lock.edit,onChange:edit=>setLock((prevLock=>({...prevLock,edit:edit})))}),(0,jsx_runtime.jsx)(build_module_icon.Z,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.edit?library_lock.Z:unlock.Z})]}),(0,jsx_runtime.jsxs)("li",{className:"block-editor-block-lock-modal__checklist-item",children:[(0,jsx_runtime.jsx)(checkbox_control.C,{__nextHasNoMarginBottom:!0,label:(0,build_module.__)("Disable movement"),checked:lock.move,onChange:move=>setLock((prevLock=>({...prevLock,move:move})))}),(0,jsx_runtime.jsx)(build_module_icon.Z,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.move?library_lock.Z:unlock.Z})]}),(0,jsx_runtime.jsxs)("li",{className:"block-editor-block-lock-modal__checklist-item",children:[(0,jsx_runtime.jsx)(checkbox_control.C,{__nextHasNoMarginBottom:!0,label:(0,build_module.__)("Prevent removal"),checked:lock.remove,onChange:remove=>setLock((prevLock=>({...prevLock,remove:remove})))}),(0,jsx_runtime.jsx)(build_module_icon.Z,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.remove?library_lock.Z:unlock.Z})]})]}),hasTemplateLock&&(0,jsx_runtime.jsx)(toggle_control.Z,{className:"block-editor-block-lock-modal__template-lock",label:(0,build_module.__)("Apply to all blocks inside"),checked:applyTemplateLock,disabled:lock.move&&!lock.remove,onChange:()=>setApplyTemplateLock(!applyTemplateLock)})]}),(0,jsx_runtime.jsxs)(flex_component.Z,{className:"block-editor-block-lock-modal__actions",justify:"flex-end",expanded:!1,children:[(0,jsx_runtime.jsx)(flex_item_component.Z,{children:(0,jsx_runtime.jsx)(build_module_button.Z,{variant:"tertiary",onClick:onClose,children:(0,build_module.__)("Cancel")})}),(0,jsx_runtime.jsx)(flex_item_component.Z,{children:(0,jsx_runtime.jsx)(build_module_button.Z,{variant:"primary",type:"submit",children:(0,build_module.__)("Apply")})})]})]})]})}function BlockLockMenuItem(_ref){let{clientId:clientId}=_ref;const{canLock:canLock,isLocked:isLocked}=useBlockLock(clientId),[isModalOpen,toggleModal]=(0,react.useReducer)((isActive=>!isActive),!1);if(!canLock)return null;const label=isLocked?(0,build_module.__)("Unlock"):(0,build_module.__)("Lock");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.Z,{icon:isLocked?unlock.Z:lock_outline.Z,onClick:toggleModal,children:label}),isModalOpen&&(0,jsx_runtime.jsx)(BlockLockModal,{clientId:clientId,onClose:toggleModal})]})}BlockLockModal.displayName="BlockLockModal",BlockLockModal.__docgenInfo={description:"",methods:[],displayName:"BlockLockModal"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-lock/modal.js"]={name:"BlockLockModal",docgenInfo:BlockLockModal.__docgenInfo,path:"packages/block-editor/src/components/block-lock/modal.js"}),BlockLockMenuItem.__docgenInfo={description:"",methods:[],displayName:"BlockLockMenuItem"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-lock/menu-item.js"]={name:"BlockLockMenuItem",docgenInfo:BlockLockMenuItem.__docgenInfo,path:"packages/block-editor/src/components/block-lock/menu-item.js"});const{Fill:Fill,Slot:block_settings_menu_controls_Slot}=(0,slot_fill.up)("BlockSettingsMenuControls"),BlockSettingsMenuControlsSlot=_ref=>{let{fillProps:fillProps,clientIds:clientIds=null,__unstableDisplayLocation:__unstableDisplayLocation}=_ref;const{selectedBlocks:selectedBlocks,selectedClientIds:selectedClientIds,canRemove:canRemove}=(0,use_select.Z)((select=>{const{getBlocksByClientId:getBlocksByClientId,getSelectedBlockClientIds:getSelectedBlockClientIds,canRemoveBlocks:canRemoveBlocks}=select(store.h),ids=null!==clientIds?clientIds:getSelectedBlockClientIds();return{selectedBlocks:(0,lodash.map)(getBlocksByClientId(ids).filter(Boolean),(block=>block.name)),selectedClientIds:ids,canRemove:canRemoveBlocks(ids)}}),[clientIds]),{canLock:canLock}=useBlockLock(selectedClientIds[0]),showLockButton=1===selectedClientIds.length&&canLock,convertToGroupButtonProps=useConvertToGroupButtonProps(),{isGroupable:isGroupable,isUngroupable:isUngroupable}=convertToGroupButtonProps,showConvertToGroupButton=(isGroupable||isUngroupable)&&canRemove;return(0,jsx_runtime.jsx)(block_settings_menu_controls_Slot,{fillProps:{...fillProps,__unstableDisplayLocation:__unstableDisplayLocation,selectedBlocks:selectedBlocks,selectedClientIds:selectedClientIds},children:fills=>!(null!=fills&&fills.length)>0&&!showConvertToGroupButton&&!showLockButton?null:(0,jsx_runtime.jsxs)(menu_group.Z,{children:[showLockButton&&(0,jsx_runtime.jsx)(BlockLockMenuItem,{clientId:selectedClientIds[0]}),fills,showConvertToGroupButton&&(0,jsx_runtime.jsx)(ConvertToGroupButton,{...convertToGroupButtonProps,onClose:null==fillProps?void 0:fillProps.onClose})]})})};function BlockSettingsMenuControls(_ref2){let{...props}=_ref2;return(0,jsx_runtime.jsx)(style_provider.Z,{document:document,children:(0,jsx_runtime.jsx)(Fill,{...props})})}BlockSettingsMenuControlsSlot.displayName="BlockSettingsMenuControlsSlot",BlockSettingsMenuControls.displayName="BlockSettingsMenuControls",BlockSettingsMenuControls.Slot=BlockSettingsMenuControlsSlot,BlockSettingsMenuControls.__docgenInfo={description:"@see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-settings-menu-controls/README.md\n\n@param {Object} props Fill props.\n@return {WPElement} Element.",methods:[{name:"Slot",docblock:null,modifiers:["static"],params:[{name:"{\n\tfillProps,\n\tclientIds = null,\n\t__unstableDisplayLocation,\n}",type:null}],returns:null}],displayName:"BlockSettingsMenuControls"};var block_settings_menu_controls=BlockSettingsMenuControls;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-settings-menu-controls/index.js"]={name:"BlockSettingsMenuControls",docgenInfo:BlockSettingsMenuControls.__docgenInfo,path:"packages/block-editor/src/components/block-settings-menu-controls/index.js"});const block_settings_dropdown_noop=()=>{},block_settings_dropdown_POPOVER_PROPS={className:"block-editor-block-settings-menu__popover",position:"bottom right",variant:"toolbar"};function CopyMenuItem(_ref){let{blocks:blocks,onCopy:onCopy}=_ref;const ref=(0,use_copy_to_clipboard.Z)((()=>(0,blocks_build_module.qC)(blocks)),onCopy),copyMenuItemLabel=blocks.length>1?(0,build_module.__)("Copy blocks"):(0,build_module.__)("Copy block");return(0,jsx_runtime.jsx)(menu_item.Z,{ref:ref,children:copyMenuItemLabel})}function BlockSettingsDropdown(_ref2){let{clientIds:clientIds,__experimentalSelectBlock:__experimentalSelectBlock,children:children,__unstableDisplayLocation:__unstableDisplayLocation,...props}=_ref2;const blockClientIds=Array.isArray(clientIds)?clientIds:[clientIds],count=blockClientIds.length,firstBlockClientId=blockClientIds[0],{firstParentClientId:firstParentClientId,isDistractionFree:isDistractionFree,onlyBlock:onlyBlock,parentBlockType:parentBlockType,previousBlockClientId:previousBlockClientId,nextBlockClientId:nextBlockClientId,selectedBlockClientIds:selectedBlockClientIds}=(0,use_select.Z)((select=>{const{getBlockCount:getBlockCount,getBlockName:getBlockName,getBlockRootClientId:getBlockRootClientId,getPreviousBlockClientId:getPreviousBlockClientId,getNextBlockClientId:getNextBlockClientId,getSelectedBlockClientIds:getSelectedBlockClientIds,getSettings:getSettings,getBlockAttributes:getBlockAttributes}=select(store.h),{getActiveBlockVariation:getActiveBlockVariation}=select(blocks_build_module.h),_firstParentClientId=getBlockRootClientId(firstBlockClientId),parentBlockName=_firstParentClientId&&getBlockName(_firstParentClientId);return{firstParentClientId:_firstParentClientId,isDistractionFree:getSettings().isDistractionFree,onlyBlock:1===getBlockCount(_firstParentClientId),parentBlockType:_firstParentClientId&&(getActiveBlockVariation(parentBlockName,getBlockAttributes(_firstParentClientId))||(0,blocks_build_module.ck)(parentBlockName)),previousBlockClientId:getPreviousBlockClientId(firstBlockClientId),nextBlockClientId:getNextBlockClientId(firstBlockClientId),selectedBlockClientIds:getSelectedBlockClientIds()}}),[firstBlockClientId]),shortcuts=(0,use_select.Z)((select=>{const{getShortcutRepresentation:getShortcutRepresentation}=select(keyboard_shortcuts_build_module.h);return{duplicate:getShortcutRepresentation("core/block-editor/duplicate"),remove:getShortcutRepresentation("core/block-editor/remove"),insertAfter:getShortcutRepresentation("core/block-editor/insert-after"),insertBefore:getShortcutRepresentation("core/block-editor/insert-before")}}),[]),{selectBlock:selectBlock,toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store.h),updateSelectionAfterDuplicate=(0,react.useCallback)(__experimentalSelectBlock?async clientIdsPromise=>{const ids=await clientIdsPromise;ids&&ids[0]&&__experimentalSelectBlock(ids[0])}:block_settings_dropdown_noop,[__experimentalSelectBlock]),blockTitle=useBlockDisplayTitle({clientId:firstBlockClientId,maximumLength:25}),updateSelectionAfterRemove=(0,react.useCallback)(__experimentalSelectBlock?()=>{const blockToSelect=previousBlockClientId||nextBlockClientId;blockToSelect&&selectedBlockClientIds.includes(firstBlockClientId)&&!selectedBlockClientIds.includes(blockToSelect)&&__experimentalSelectBlock(blockToSelect)}:block_settings_dropdown_noop,[__experimentalSelectBlock,previousBlockClientId,nextBlockClientId,selectedBlockClientIds]),label=(0,build_module.gB)((0,build_module.__)("Remove %s"),blockTitle),removeBlockLabel=1===count?label:(0,build_module.__)("Remove blocks"),selectParentButtonRef=(0,react.useRef)(),{gestures:showParentOutlineGestures}=useShowMoversGestures({ref:selectParentButtonRef,onChange(isFocused){isFocused&&isDistractionFree||toggleBlockHighlight(firstParentClientId,isFocused)}}),parentBlockIsSelected=null==selectedBlockClientIds?void 0:selectedBlockClientIds.includes(firstParentClientId);return(0,jsx_runtime.jsx)(BlockActions,{clientIds:clientIds,__experimentalUpdateSelection:!__experimentalSelectBlock,children:_ref3=>{let{canDuplicate:canDuplicate,canInsertDefaultBlock:canInsertDefaultBlock,canMove:canMove,canRemove:canRemove,onDuplicate:onDuplicate,onInsertAfter:onInsertAfter,onInsertBefore:onInsertBefore,onRemove:onRemove,onCopy:onCopy,onMoveTo:onMoveTo,blocks:blocks}=_ref3;return(0,jsx_runtime.jsx)(dropdown_menu.Z,{icon:more_vertical.Z,label:(0,build_module.__)("Options"),className:"block-editor-block-settings-menu",popoverProps:block_settings_dropdown_POPOVER_PROPS,noIcons:!0,...props,children:_ref4=>{let{onClose:onClose}=_ref4;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu_group.Z,{children:[(0,jsx_runtime.jsx)(block_settings_menu_first_item.Slot,{fillProps:{onClose:onClose}}),!parentBlockIsSelected&&!!firstParentClientId&&(0,jsx_runtime.jsx)(menu_item.Z,{...showParentOutlineGestures,ref:selectParentButtonRef,icon:(0,jsx_runtime.jsx)(block_icon.Z,{icon:parentBlockType.icon}),onClick:()=>selectBlock(firstParentClientId),children:(0,build_module.gB)((0,build_module.__)("Select parent block (%s)"),parentBlockType.title)}),1===count&&(0,jsx_runtime.jsx)(block_html_convert_button,{clientId:firstBlockClientId}),(0,jsx_runtime.jsx)(CopyMenuItem,{blocks:blocks,onCopy:onCopy}),canDuplicate&&(0,jsx_runtime.jsx)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onDuplicate,updateSelectionAfterDuplicate),shortcut:shortcuts.duplicate,children:(0,build_module.__)("Duplicate")}),canInsertDefaultBlock&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onInsertBefore),shortcut:shortcuts.insertBefore,children:(0,build_module.__)("Insert before")}),(0,jsx_runtime.jsx)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onInsertAfter),shortcut:shortcuts.insertAfter,children:(0,build_module.__)("Insert after")})]}),canMove&&!onlyBlock&&(0,jsx_runtime.jsx)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onMoveTo),children:(0,build_module.__)("Move to")}),1===count&&(0,jsx_runtime.jsx)(block_mode_toggle,{clientId:firstBlockClientId,onToggle:onClose})]}),(0,jsx_runtime.jsx)(block_settings_menu_controls.Slot,{fillProps:{onClose:onClose},clientIds:clientIds,__unstableDisplayLocation:__unstableDisplayLocation}),"function"==typeof children?children({onClose:onClose}):react.Children.map((child=>(0,react.cloneElement)(child,{onClose:onClose}))),canRemove&&(0,jsx_runtime.jsx)(menu_group.Z,{children:(0,jsx_runtime.jsx)(menu_item.Z,{onClick:(0,pipe.Z)(onClose,onRemove,updateSelectionAfterRemove),shortcut:shortcuts.remove,children:removeBlockLabel})})]})}})}})}CopyMenuItem.displayName="CopyMenuItem",BlockSettingsDropdown.displayName="BlockSettingsDropdown",BlockSettingsDropdown.__docgenInfo={description:"",methods:[],displayName:"BlockSettingsDropdown"};var block_settings_dropdown=BlockSettingsDropdown;function BlockSettingsMenu(_ref){let{clientIds:clientIds,...props}=_ref;return(0,jsx_runtime.jsx)(toolbar_group.Z,{children:(0,jsx_runtime.jsx)(toolbar_item.Z,{children:toggleProps=>(0,jsx_runtime.jsx)(block_settings_dropdown,{clientIds:clientIds,toggleProps:toggleProps,...props})})})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-settings-menu/block-settings-dropdown.js"]={name:"BlockSettingsDropdown",docgenInfo:BlockSettingsDropdown.__docgenInfo,path:"packages/block-editor/src/components/block-settings-menu/block-settings-dropdown.js"}),BlockSettingsMenu.displayName="BlockSettingsMenu",BlockSettingsMenu.__docgenInfo={description:"",methods:[],displayName:"BlockSettingsMenu"};var block_settings_menu=BlockSettingsMenu;function BlockLockToolbar(_ref){let{clientId:clientId}=_ref;const blockInformation=useBlockDisplayInformation(clientId),{canEdit:canEdit,canMove:canMove,canRemove:canRemove,canLock:canLock}=useBlockLock(clientId),[isModalOpen,toggleModal]=(0,react.useReducer)((isActive=>!isActive),!1);return canLock?canEdit&&canMove&&canRemove?null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(toolbar_group.Z,{className:"block-editor-block-lock-toolbar",children:(0,jsx_runtime.jsx)(toolbar_button.Z,{icon:library_lock.Z,label:(0,build_module.gB)((0,build_module.__)("Unlock %s"),blockInformation.title),onClick:toggleModal})}),isModalOpen&&(0,jsx_runtime.jsx)(BlockLockModal,{clientId:clientId,onClose:toggleModal})]}):null}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-settings-menu/index.js"]={name:"BlockSettingsMenu",docgenInfo:BlockSettingsMenu.__docgenInfo,path:"packages/block-editor/src/components/block-settings-menu/index.js"}),BlockLockToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockLockToolbar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-lock/toolbar.js"]={name:"BlockLockToolbar",docgenInfo:BlockLockToolbar.__docgenInfo,path:"packages/block-editor/src/components/block-lock/toolbar.js"});var library_group=__webpack_require__("./packages/icons/build-module/library/group.js"),row=__webpack_require__("./packages/icons/build-module/library/row.js"),stack=__webpack_require__("./packages/icons/build-module/library/stack.js");const layouts={group:{type:"constrained"},row:{type:"flex",flexWrap:"nowrap"},stack:{type:"flex",orientation:"vertical"}};function BlockGroupToolbar(){const{blocksSelection:blocksSelection,clientIds:clientIds,groupingBlockName:groupingBlockName,isGroupable:isGroupable}=useConvertToGroupButtonProps(),{replaceBlocks:replaceBlocks}=(0,use_dispatch.Z)(store.h),{canRemove:canRemove,variations:variations}=(0,use_select.Z)((select=>{const{canRemoveBlocks:canRemoveBlocks}=select(store.h),{getBlockVariations:getBlockVariations}=select(blocks_build_module.h);return{canRemove:canRemoveBlocks(clientIds),variations:getBlockVariations(groupingBlockName,"transform")}}),[clientIds,groupingBlockName]),onConvertToGroup=layout=>{const newBlocks=(0,blocks_build_module.m4)(blocksSelection,groupingBlockName);"string"!=typeof layout&&(layout="group"),newBlocks&&newBlocks.length>0&&(newBlocks[0].attributes.layout=layouts[layout],replaceBlocks(clientIds,newBlocks))};if(!isGroupable||!canRemove)return null;const canInsertRow=!!variations.find((_ref=>{let{name:name}=_ref;return"group-row"===name})),canInsertStack=!!variations.find((_ref2=>{let{name:name}=_ref2;return"group-stack"===name}));return(0,jsx_runtime.jsxs)(toolbar_group.Z,{children:[(0,jsx_runtime.jsx)(toolbar_button.Z,{icon:library_group.Z,label:(0,build_module._x)("Group","verb"),onClick:onConvertToGroup}),canInsertRow&&(0,jsx_runtime.jsx)(toolbar_button.Z,{icon:row.Z,label:(0,build_module._x)("Row","single horizontal line"),onClick:()=>onConvertToGroup("row")}),canInsertStack&&(0,jsx_runtime.jsx)(toolbar_button.Z,{icon:stack.Z,label:(0,build_module._x)("Stack","verb"),onClick:()=>onConvertToGroup("stack")})]})}BlockGroupToolbar.displayName="BlockGroupToolbar",BlockGroupToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockGroupToolbar"};var convert_to_group_buttons_toolbar=BlockGroupToolbar;function BlockEditVisuallyButton(_ref){let{clientIds:clientIds}=_ref;const clientId=1===clientIds.length?clientIds[0]:void 0,canEditVisually=(0,use_select.Z)((select=>!!clientId&&"html"===select(store.h).getBlockMode(clientId)),[clientId]),{toggleBlockMode:toggleBlockMode}=(0,use_dispatch.Z)(store.h);return canEditVisually?(0,jsx_runtime.jsx)(toolbar_group.Z,{children:(0,jsx_runtime.jsx)(toolbar_button.Z,{onClick:()=>{toggleBlockMode(clientId)},children:(0,build_module.__)("Edit visually")})}):null}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/convert-to-group-buttons/toolbar.js"]={name:"BlockGroupToolbar",docgenInfo:BlockGroupToolbar.__docgenInfo,path:"packages/block-editor/src/components/convert-to-group-buttons/toolbar.js"}),BlockEditVisuallyButton.displayName="BlockEditVisuallyButton",BlockEditVisuallyButton.__docgenInfo={description:"",methods:[],displayName:"BlockEditVisuallyButton"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-edit-visually-button/index.js"]={name:"BlockEditVisuallyButton",docgenInfo:BlockEditVisuallyButton.__docgenInfo,path:"packages/block-editor/src/components/block-edit-visually-button/index.js"});var block_name_context=(0,react.createContext)("");const BlockToolbar=_ref=>{let{hideDragHandle:hideDragHandle}=_ref;const{blockClientIds:blockClientIds,blockClientId:blockClientId,blockType:blockType,hasFixedToolbar:hasFixedToolbar,isDistractionFree:isDistractionFree,isValid:isValid,isVisual:isVisual,isContentLocked:isContentLocked}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockMode:getBlockMode,getSelectedBlockClientIds:getSelectedBlockClientIds,isBlockValid:isBlockValid,getBlockRootClientId:getBlockRootClientId,getSettings:getSettings,__unstableGetContentLockingParent:__unstableGetContentLockingParent}=select(store.h),selectedBlockClientIds=getSelectedBlockClientIds(),selectedBlockClientId=selectedBlockClientIds[0],blockRootClientId=getBlockRootClientId(selectedBlockClientId),settings=getSettings();return{blockClientIds:selectedBlockClientIds,blockClientId:selectedBlockClientId,blockType:selectedBlockClientId&&(0,blocks_build_module.ck)(getBlockName(selectedBlockClientId)),hasFixedToolbar:settings.hasFixedToolbar,isDistractionFree:settings.isDistractionFree,rootClientId:blockRootClientId,isValid:selectedBlockClientIds.every((id=>isBlockValid(id))),isVisual:selectedBlockClientIds.every((id=>"visual"===getBlockMode(id))),isContentLocked:!!__unstableGetContentLockingParent(selectedBlockClientId)}}),[]),{toggleBlockHighlight:toggleBlockHighlight}=(0,use_dispatch.Z)(store.h),nodeRef=(0,react.useRef)(),{showMovers:showMovers,gestures:showMoversGestures}=useShowMoversGestures({ref:nodeRef,onChange(isFocused){isFocused&&isDistractionFree||toggleBlockHighlight(blockClientId,isFocused)}}),displayHeaderToolbar=(0,use_viewport_match.Z)("medium","<")||hasFixedToolbar;if(blockType&&!(0,blocks_build_module.zb)(blockType,"__experimentalToolbar",!0))return null;const shouldShowMovers=displayHeaderToolbar||showMovers;if(0===blockClientIds.length)return null;const shouldShowVisualToolbar=isValid&&isVisual,isMultiToolbar=blockClientIds.length>1,isSynced=(0,blocks_build_module.vr)(blockType)||(0,blocks_build_module.zQ)(blockType),classes=classnames_default()("block-editor-block-toolbar",{"is-showing-movers":shouldShowMovers,"is-synced":isSynced});return(0,jsx_runtime.jsxs)("div",{className:classes,children:[!isMultiToolbar&&!displayHeaderToolbar&&!isContentLocked&&(0,jsx_runtime.jsx)(BlockParentSelector,{}),(0,jsx_runtime.jsx)("div",{ref:nodeRef,...showMoversGestures,children:(shouldShowVisualToolbar||isMultiToolbar)&&!isContentLocked&&(0,jsx_runtime.jsxs)(toolbar_group.Z,{className:"block-editor-block-toolbar__block-controls",children:[(0,jsx_runtime.jsx)(block_switcher,{clientIds:blockClientIds}),!isMultiToolbar&&(0,jsx_runtime.jsx)(BlockLockToolbar,{clientId:blockClientIds[0]}),(0,jsx_runtime.jsx)(block_mover.Z,{clientIds:blockClientIds,hideDragHandle:hideDragHandle})]})}),shouldShowVisualToolbar&&isMultiToolbar&&(0,jsx_runtime.jsx)(convert_to_group_buttons_toolbar,{}),shouldShowVisualToolbar&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_controls.Slot,{group:"parent",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{group:"block",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{group:"inline",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{group:"other",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_name_context.Provider,{value:null==blockType?void 0:blockType.name,children:(0,jsx_runtime.jsx)(block_toolbar_last_item.Slot,{})})]}),(0,jsx_runtime.jsx)(BlockEditVisuallyButton,{clientIds:blockClientIds}),!isContentLocked&&(0,jsx_runtime.jsx)(block_settings_menu,{clientIds:blockClientIds})]})};BlockToolbar.displayName="BlockToolbar",BlockToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockToolbar"};var block_toolbar=BlockToolbar;function BlockContextualToolbar(_ref){let{focusOnMount:focusOnMount,isFixed:isFixed,...props}=_ref;const{blockType:blockType,hasParents:hasParents,showParentSelector:showParentSelector}=(0,use_select.Z)((select=>{const{getBlockName:getBlockName,getBlockParents:getBlockParents,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableGetContentLockingParent:__unstableGetContentLockingParent}=select(store.h),{getBlockType:getBlockType}=select(blocks_build_module.h),selectedBlockClientIds=getSelectedBlockClientIds(),selectedBlockClientId=selectedBlockClientIds[0],parents=getBlockParents(selectedBlockClientId),parentBlockType=getBlockType(getBlockName(parents[parents.length-1]));return{blockType:selectedBlockClientId&&getBlockType(getBlockName(selectedBlockClientId)),hasParents:parents.length,showParentSelector:parentBlockType&&(0,blocks_build_module.zb)(parentBlockType,"__experimentalParentSelector",!0)&&selectedBlockClientIds.length<=1&&!__unstableGetContentLockingParent(selectedBlockClientId)}}),[]);if(blockType&&!(0,blocks_build_module.zb)(blockType,"__experimentalToolbar",!0))return null;const classes=classnames_default()("block-editor-block-contextual-toolbar",{"has-parent":hasParents&&showParentSelector,"is-fixed":isFixed});return(0,jsx_runtime.jsx)(navigable_toolbar,{focusOnMount:focusOnMount,className:classes,"aria-label":(0,build_module.__)("Block tools"),...props,children:(0,jsx_runtime.jsx)(block_toolbar,{hideDragHandle:isFixed})})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-toolbar/index.js"]={name:"BlockToolbar",docgenInfo:BlockToolbar.__docgenInfo,path:"packages/block-editor/src/components/block-toolbar/index.js"}),BlockContextualToolbar.displayName="BlockContextualToolbar",BlockContextualToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockContextualToolbar"};var block_contextual_toolbar=BlockContextualToolbar;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-tools/block-contextual-toolbar.js"]={name:"BlockContextualToolbar",docgenInfo:BlockContextualToolbar.__docgenInfo,path:"packages/block-editor/src/components/block-tools/block-contextual-toolbar.js"});const COMMON_PROPS={placement:"top-start"},DEFAULT_PROPS={...COMMON_PROPS,flip:!1,shift:!0},RESTRICTED_HEIGHT_PROPS={...COMMON_PROPS,flip:!0,shift:!1};function getProps(contentElement,selectedBlockElement,toolbarHeight){if(!contentElement||!selectedBlockElement)return DEFAULT_PROPS;const blockRect=selectedBlockElement.getBoundingClientRect(),contentRect=contentElement.getBoundingClientRect(),viewportHeight=contentElement.ownerDocument.documentElement.clientHeight,hasSpaceForToolbarAbove=blockRect.top-contentRect.top>toolbarHeight,isBlockTallerThanViewport=blockRect.height>viewportHeight-toolbarHeight;return hasSpaceForToolbarAbove||isBlockTallerThanViewport?DEFAULT_PROPS:RESTRICTED_HEIGHT_PROPS}function selector(select){const{__unstableGetEditorMode:__unstableGetEditorMode,isMultiSelecting:isMultiSelecting,hasMultiSelection:hasMultiSelection,isTyping:isTyping,__experimentalIsBlockInterfaceHidden:isBlockInterfaceHidden,getSettings:getSettings,getLastMultiSelectedBlockClientId:getLastMultiSelectedBlockClientId}=select(store.h);return{editorMode:__unstableGetEditorMode(),isMultiSelecting:isMultiSelecting(),isTyping:isTyping(),isBlockInterfaceHidden:isBlockInterfaceHidden(),hasFixedToolbar:getSettings().hasFixedToolbar,isDistractionFree:getSettings().isDistractionFree,lastClientId:hasMultiSelection()?getLastMultiSelectedBlockClientId():null}}function SelectedBlockPopover(_ref){let{clientId:clientId,rootClientId:rootClientId,isEmptyDefaultBlock:isEmptyDefaultBlock,showContents:showContents,capturingClientId:capturingClientId,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref;const{editorMode:editorMode,isMultiSelecting:isMultiSelecting,isTyping:isTyping,isBlockInterfaceHidden:isBlockInterfaceHidden,hasFixedToolbar:hasFixedToolbar,isDistractionFree:isDistractionFree,lastClientId:lastClientId}=(0,use_select.Z)(selector,[]),isInsertionPointVisible=(0,use_select.Z)((select=>{const{isBlockInsertionPointVisible:isBlockInsertionPointVisible,getBlockInsertionPoint:getBlockInsertionPoint,getBlockOrder:getBlockOrder}=select(store.h);if(!isBlockInsertionPointVisible())return!1;const insertionPoint=getBlockInsertionPoint();return getBlockOrder(insertionPoint.rootClientId)[insertionPoint.index]===clientId}),[clientId]),isLargeViewport=(0,use_viewport_match.Z)("medium"),isToolbarForced=(0,react.useRef)(!1),{stopTyping:stopTyping}=(0,use_dispatch.Z)(store.h),showEmptyBlockSideInserter=!isTyping&&"edit"===editorMode&&isEmptyDefaultBlock,shouldShowBreadcrumb="navigation"===editorMode||"zoom-out"===editorMode,shouldShowContextualToolbar="edit"===editorMode&&!hasFixedToolbar&&isLargeViewport&&!isMultiSelecting&&!showEmptyBlockSideInserter&&!isTyping&&!isBlockInterfaceHidden,canFocusHiddenToolbar=!("edit"!==editorMode||shouldShowContextualToolbar||hasFixedToolbar||isDistractionFree||isEmptyDefaultBlock);(0,keyboard_shortcuts_build_module.bx)("core/block-editor/focus-toolbar",(()=>{isToolbarForced.current=!0,stopTyping(!0)}),{isDisabled:!canFocusHiddenToolbar}),(0,react.useEffect)((()=>{isToolbarForced.current=!1}));const initialToolbarItemIndexRef=(0,react.useRef)(),popoverProps=function useBlockToolbarPopoverProps(_ref){let{contentElement:contentElement,clientId:clientId}=_ref;const selectedBlockElement=useBlockElement(clientId),[toolbarHeight,setToolbarHeight]=(0,react.useState)(0),[props,setProps]=(0,react.useState)((()=>getProps(contentElement,selectedBlockElement,toolbarHeight))),blockIndex=(0,use_select.Z)((select=>select(store.h).getBlockIndex(clientId)),[clientId]),popoverRef=(0,use_ref_effect.Z)((popoverNode=>{setToolbarHeight(popoverNode.offsetHeight)}),[]),updateProps=(0,react.useCallback)((()=>setProps(getProps(contentElement,selectedBlockElement,toolbarHeight))),[contentElement,selectedBlockElement,toolbarHeight]);return(0,react.useLayoutEffect)(updateProps,[blockIndex,updateProps]),(0,react.useLayoutEffect)((()=>{var _contentElement$owner,_contentView$addEvent,_selectedBlockElement;if(!contentElement||!selectedBlockElement)return;const contentView=null==contentElement||null===(_contentElement$owner=contentElement.ownerDocument)||void 0===_contentElement$owner?void 0:_contentElement$owner.defaultView;let resizeObserver;null==contentView||null===(_contentView$addEvent=contentView.addEventHandler)||void 0===_contentView$addEvent||_contentView$addEvent.call(contentView,"resize",updateProps);const blockView=null==selectedBlockElement||null===(_selectedBlockElement=selectedBlockElement.ownerDocument)||void 0===_selectedBlockElement?void 0:_selectedBlockElement.defaultView;return blockView.ResizeObserver&&(resizeObserver=new blockView.ResizeObserver(updateProps),resizeObserver.observe(selectedBlockElement)),()=>{var _contentView$removeEv;null==contentView||null===(_contentView$removeEv=contentView.removeEventHandler)||void 0===_contentView$removeEv||_contentView$removeEv.call(contentView,"resize",updateProps),resizeObserver&&resizeObserver.disconnect()}}),[updateProps,contentElement,selectedBlockElement]),{...props,ref:popoverRef}}({contentElement:null==__unstableContentRef?void 0:__unstableContentRef.current,clientId:clientId});return shouldShowBreadcrumb||shouldShowContextualToolbar||showEmptyBlockSideInserter?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[showEmptyBlockSideInserter&&(0,jsx_runtime.jsx)(block_popover,{clientId:capturingClientId||clientId,__unstableCoverTarget:!0,bottomClientId:lastClientId,className:classnames_default()("block-editor-block-list__block-side-inserter-popover",{"is-insertion-point-visible":isInsertionPointVisible}),__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,resize:!1,shift:!1,...popoverProps,children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-list__empty-block-inserter",children:(0,jsx_runtime.jsx)(inserter,{position:"bottom right",rootClientId:rootClientId,clientId:clientId,__experimentalIsQuick:!0})})}),(shouldShowBreadcrumb||shouldShowContextualToolbar)&&(0,jsx_runtime.jsxs)(block_popover,{clientId:capturingClientId||clientId,bottomClientId:lastClientId,className:classnames_default()("block-editor-block-list__block-popover",{"is-insertion-point-visible":isInsertionPointVisible}),__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef,resize:!1,...popoverProps,children:[shouldShowContextualToolbar&&showContents&&(0,jsx_runtime.jsx)(block_contextual_toolbar,{focusOnMount:isToolbarForced.current,__experimentalInitialIndex:initialToolbarItemIndexRef.current,__experimentalOnIndexChange:index=>{initialToolbarItemIndexRef.current=index}},clientId),shouldShowBreadcrumb&&(0,jsx_runtime.jsx)(block_selection_button,{clientId:clientId,rootClientId:rootClientId})]})]}):null}function wrapperSelector(select){const{getSelectedBlockClientId:getSelectedBlockClientId,getFirstMultiSelectedBlockClientId:getFirstMultiSelectedBlockClientId,getBlockRootClientId:getBlockRootClientId,getBlock:getBlock,getBlockParents:getBlockParents,getSettings:getSettings,isNavigationMode:_isNavigationMode,__experimentalGetBlockListSettingsForBlocks:__experimentalGetBlockListSettingsForBlocks}=select(store.h),clientId=getSelectedBlockClientId()||getFirstMultiSelectedBlockClientId();if(!clientId)return;const{name:name,attributes:attributes={}}=getBlock(clientId)||{},blockParentsClientIds=getBlockParents(clientId),parentBlockListSettings=__experimentalGetBlockListSettingsForBlocks(blockParentsClientIds),capturingClientId=blockParentsClientIds.find((parentClientId=>{var _parentBlockListSetti;return null===(_parentBlockListSetti=parentBlockListSettings[parentClientId])||void 0===_parentBlockListSetti?void 0:_parentBlockListSetti.__experimentalCaptureToolbars})),settings=getSettings();return{clientId:clientId,rootClientId:getBlockRootClientId(clientId),name:name,isDistractionFree:settings.isDistractionFree,isNavigationMode:_isNavigationMode(),isEmptyDefaultBlock:name&&(0,blocks_build_module.ZP)({name:name,attributes:attributes}),capturingClientId:capturingClientId}}function WrappedBlockPopover(_ref2){let{__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}=_ref2;const selected=(0,use_select.Z)(wrapperSelector,[]);if(!selected)return null;const{clientId:clientId,rootClientId:rootClientId,name:name,isEmptyDefaultBlock:isEmptyDefaultBlock,capturingClientId:capturingClientId,isDistractionFree:isDistractionFree,isNavigationMode:isNavigationMode}=selected;return name?(0,jsx_runtime.jsx)(SelectedBlockPopover,{clientId:clientId,rootClientId:rootClientId,isEmptyDefaultBlock:isEmptyDefaultBlock,showContents:!isDistractionFree||isNavigationMode,capturingClientId:capturingClientId,__unstablePopoverSlot:__unstablePopoverSlot,__unstableContentRef:__unstableContentRef}):null}function BlockToolsBackCompat(_ref){let{children:children}=_ref;const openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),isDisabled=(0,react.useContext)(disabled.Z.Context);return openRef||isDisabled?children:((0,deprecated_build_module.Z)('wp.components.Popover.Slot name="block-toolbar"',{alternative:"wp.blockEditor.BlockTools",since:"5.8",version:"6.3"}),(0,jsx_runtime.jsxs)(InsertionPoint,{__unstablePopoverSlot:"block-toolbar",children:[(0,jsx_runtime.jsx)(WrappedBlockPopover,{__unstablePopoverSlot:"block-toolbar"}),children]}))}function useBlockSelectionClearer(){const{getSettings:getSettings,hasSelectedBlock:hasSelectedBlock,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store.h),{clearSelectedBlock:clearSelectedBlock}=(0,use_dispatch.Z)(store.h),{__experimentalClearBlockSelection:isEnabled}=getSettings();return(0,use_ref_effect.Z)((node=>{if(isEnabled)return node.addEventListener("mousedown",onMouseDown),()=>{node.removeEventListener("mousedown",onMouseDown)};function onMouseDown(event){(hasSelectedBlock()||hasMultiSelection())&&event.target===node&&clearSelectedBlock()}}),[hasSelectedBlock,hasMultiSelection,clearSelectedBlock,isEnabled])}function BlockSelectionClearer(props){return(0,jsx_runtime.jsx)("div",{ref:useBlockSelectionClearer(),...props})}WrappedBlockPopover.displayName="WrappedBlockPopover",WrappedBlockPopover.__docgenInfo={description:"",methods:[],displayName:"WrappedBlockPopover"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-tools/selected-block-popover.js"]={name:"WrappedBlockPopover",docgenInfo:WrappedBlockPopover.__docgenInfo,path:"packages/block-editor/src/components/block-tools/selected-block-popover.js"}),BlockToolsBackCompat.displayName="BlockToolsBackCompat",BlockToolsBackCompat.__docgenInfo={description:"",methods:[],displayName:"BlockToolsBackCompat"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-tools/back-compat.js"]={name:"BlockToolsBackCompat",docgenInfo:BlockToolsBackCompat.__docgenInfo,path:"packages/block-editor/src/components/block-tools/back-compat.js"}),BlockSelectionClearer.displayName="BlockSelectionClearer",BlockSelectionClearer.__docgenInfo={description:"",methods:[],displayName:"BlockSelectionClearer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-selection-clearer/index.js"]={name:"BlockSelectionClearer",docgenInfo:BlockSelectionClearer.__docgenInfo,path:"packages/block-editor/src/components/block-selection-clearer/index.js"});var with_client_id=(0,__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js").o)((WrappedComponent=>props=>{const{clientId:clientId}=(0,block_edit_context.Z8)();return(0,jsx_runtime.jsx)(WrappedComponent,{...props,clientId:clientId})}),"withClientId");const button_block_appender_ButtonBlockAppender=_ref=>{let{clientId:clientId,showSeparator:showSeparator,isFloating:isFloating,onAddBlock:onAddBlock,isToggle:isToggle}=_ref;return(0,jsx_runtime.jsx)(button_block_appender,{className:classnames_default()({"block-list-appender__toggle":isToggle}),rootClientId:clientId,showSeparator:showSeparator,isFloating:isFloating,onAddBlock:onAddBlock})};button_block_appender_ButtonBlockAppender.displayName="ButtonBlockAppender",button_block_appender_ButtonBlockAppender.__docgenInfo={description:"",methods:[],displayName:"ButtonBlockAppender"};var inner_blocks_button_block_appender=with_client_id(button_block_appender_ButtonBlockAppender);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inner-blocks/button-block-appender.js"]={name:"ButtonBlockAppender",docgenInfo:button_block_appender_ButtonBlockAppender.__docgenInfo,path:"packages/block-editor/src/components/inner-blocks/button-block-appender.js"});const default_block_appender_DefaultBlockAppender=_ref=>{let{clientId:clientId}=_ref;return(0,jsx_runtime.jsx)(default_block_appender,{rootClientId:clientId})};default_block_appender_DefaultBlockAppender.displayName="DefaultBlockAppender",default_block_appender_DefaultBlockAppender.__docgenInfo={description:"",methods:[],displayName:"DefaultBlockAppender"};var inner_blocks_default_block_appender=(0,compose.Z)([with_client_id,(0,with_select.Z)(((select,_ref2)=>{let{clientId:clientId}=_ref2;const{getBlockOrder:getBlockOrder}=select(store.h),blockClientIds=getBlockOrder(clientId);return{lastBlockClientId:blockClientIds[blockClientIds.length-1]}}))])(default_block_appender_DefaultBlockAppender);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inner-blocks/default-block-appender.js"]={name:"DefaultBlockAppender",docgenInfo:default_block_appender_DefaultBlockAppender.__docgenInfo,path:"packages/block-editor/src/components/inner-blocks/default-block-appender.js"});const pendingSettingsUpdates=new WeakMap;var es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6);const BLOCK_CONTEXT_CACHE=new WeakMap;function getBlockContext(attributes,blockType){BLOCK_CONTEXT_CACHE.has(blockType)||BLOCK_CONTEXT_CACHE.set(blockType,new WeakMap);const blockTypeCache=BLOCK_CONTEXT_CACHE.get(blockType);if(!blockTypeCache.has(attributes)){const context=(0,lodash.mapValues)(blockType.providesContext,(attributeName=>attributes[attributeName]));blockTypeCache.set(attributes,context)}return blockTypeCache.get(attributes)}var use_block_sync=__webpack_require__("./packages/block-editor/src/components/provider/use-block-sync.js"),use_throttle=__webpack_require__("./packages/compose/build-module/hooks/use-throttle/index.js"),use_drop_zone=__webpack_require__("./packages/compose/build-module/hooks/use-drop-zone/index.js");function onBlockDrop(targetRootClientId,targetBlockIndex,getBlockIndex,getClientIdsOfDescendants,moveBlocks,insertOrReplaceBlocks,clearSelectedBlock){return event=>{const{srcRootClientId:sourceRootClientId,srcClientIds:sourceClientIds,type:dropType,blocks:blocks}=function parseDropEvent(event){let result={srcRootClientId:null,srcClientIds:null,srcIndex:null,type:null,blocks:null};if(!event.dataTransfer)return result;try{result=Object.assign(result,JSON.parse(event.dataTransfer.getData("wp-blocks")))}catch(err){return result}return result}(event);if("inserter"===dropType){clearSelectedBlock();const blocksToInsert=blocks.map((block=>(0,blocks_build_module.Wm)(block)));insertOrReplaceBlocks(blocksToInsert,!0,null)}if("block"===dropType){const sourceBlockIndex=getBlockIndex(sourceClientIds[0]);if(sourceRootClientId===targetRootClientId&&sourceBlockIndex===targetBlockIndex)return;if(sourceClientIds.includes(targetRootClientId)||getClientIdsOfDescendants(sourceClientIds).some((id=>id===targetRootClientId)))return;const isAtSameLevel=sourceRootClientId===targetRootClientId,draggedBlockCount=sourceClientIds.length;moveBlocks(sourceClientIds,sourceRootClientId,isAtSameLevel&&sourceBlockIndex<targetBlockIndex?targetBlockIndex-draggedBlockCount:targetBlockIndex)}}}function onFilesDrop(targetRootClientId,targetBlockIndex,hasUploadPermissions,updateBlockAttributes,canInsertBlockType,insertOrReplaceBlocks){return files=>{if(!hasUploadPermissions)return;const transformation=(0,blocks_build_module.MC)((0,blocks_build_module.Xn)("from"),(transform=>"files"===transform.type&&canInsertBlockType(transform.blockName,targetRootClientId)&&transform.isMatch(files)));if(transformation){const blocks=transformation.transform(files,updateBlockAttributes);insertOrReplaceBlocks(blocks)}}}function onHTMLDrop(targetRootClientId,targetBlockIndex,insertOrReplaceBlocks){return HTML=>{const blocks=(0,blocks_build_module.ag)({HTML:HTML,mode:"BLOCKS"});blocks.length&&insertOrReplaceBlocks(blocks)}}function useOnBlockDrop(targetRootClientId,targetBlockIndex){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{operation:operation="insert"}=options,hasUploadPermissions=(0,use_select.Z)((select=>select(store.h).getSettings().mediaUpload),[]),{canInsertBlockType:canInsertBlockType,getBlockIndex:getBlockIndex,getClientIdsOfDescendants:getClientIdsOfDescendants,getBlockOrder:getBlockOrder,getBlocksByClientId:getBlocksByClientId}=(0,use_select.Z)(store.h),{insertBlocks:insertBlocks,moveBlocksToPosition:moveBlocksToPosition,updateBlockAttributes:updateBlockAttributes,clearSelectedBlock:clearSelectedBlock,replaceBlocks:replaceBlocks,removeBlocks:removeBlocks}=(0,use_dispatch.Z)(store.h),registry=(0,use_registry.Z)(),insertOrReplaceBlocks=(0,react.useCallback)((function(blocks){let updateSelection=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],initialPosition=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("replace"===operation){const clientId=getBlockOrder(targetRootClientId)[targetBlockIndex];replaceBlocks(clientId,blocks,void 0,initialPosition)}else insertBlocks(blocks,targetBlockIndex,targetRootClientId,updateSelection,initialPosition)}),[operation,getBlockOrder,insertBlocks,replaceBlocks,targetBlockIndex,targetRootClientId]),moveBlocks=(0,react.useCallback)(((sourceClientIds,sourceRootClientId,insertIndex)=>{if("replace"===operation){const sourceBlocks=getBlocksByClientId(sourceClientIds),targetBlockClientId=getBlockOrder(targetRootClientId)[targetBlockIndex];registry.batch((()=>{removeBlocks(sourceClientIds,!1),replaceBlocks(targetBlockClientId,sourceBlocks,void 0,0)}))}else moveBlocksToPosition(sourceClientIds,sourceRootClientId,targetRootClientId,insertIndex)}),[operation,getBlockOrder,getBlocksByClientId,insertBlocks,moveBlocksToPosition,removeBlocks,targetBlockIndex,targetRootClientId]),_onDrop=onBlockDrop(targetRootClientId,targetBlockIndex,getBlockIndex,getClientIdsOfDescendants,moveBlocks,insertOrReplaceBlocks,clearSelectedBlock),_onFilesDrop=onFilesDrop(targetRootClientId,0,hasUploadPermissions,updateBlockAttributes,canInsertBlockType,insertOrReplaceBlocks),_onHTMLDrop=onHTMLDrop(0,0,insertOrReplaceBlocks);return event=>{const files=(0,data_transfer.f)(event.dataTransfer),html=event.dataTransfer.getData("text/html");html?_onHTMLDrop(html):files.length?_onFilesDrop(files):_onDrop(event)}}function getDistanceFromPointToEdge(point,rect,edge){const isHorizontal="top"===edge||"bottom"===edge,{x:x,y:y}=point,pointLateralPosition=isHorizontal?x:y,pointForwardPosition=isHorizontal?y:x,edgeStart=isHorizontal?rect.left:rect.top,edgeEnd=isHorizontal?rect.right:rect.bottom,edgeForwardPosition=rect[edge];let edgeLateralPosition;return edgeLateralPosition=pointLateralPosition>=edgeStart&&pointLateralPosition<=edgeEnd?pointLateralPosition:pointLateralPosition<edgeEnd?edgeStart:edgeEnd,Math.sqrt((pointLateralPosition-edgeLateralPosition)**2+(pointForwardPosition-edgeForwardPosition)**2)}function getDistanceToNearestEdge(point,rect){let candidateDistance,candidateEdge,allowedEdges=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["top","bottom","left","right"];return allowedEdges.forEach((edge=>{const distance=getDistanceFromPointToEdge(point,rect,edge);(void 0===candidateDistance||distance<candidateDistance)&&(candidateDistance=distance,candidateEdge=edge)})),[candidateDistance,candidateEdge]}function isPointContainedByRect(point,rect){return rect.left<=point.x&&rect.right>=point.x&&rect.top<=point.y&&rect.bottom>=point.y}function getDropTargetPosition(blocksData,position){var _blocksData$nearestIn,_blocksData$adjacentI;let orientation=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical";const allowedEdges="horizontal"===orientation?["left","right"]:["top","bottom"],isRightToLeft=(0,build_module.dZ)();let nearestIndex=0,insertPosition="before",minDistance=1/0;blocksData.forEach((_ref=>{let{isUnmodifiedDefaultBlock:isUnmodifiedDefaultBlock,getBoundingClientRect:getBoundingClientRect,blockIndex:blockIndex}=_ref;const rect=getBoundingClientRect();let[distance,edge]=getDistanceToNearestEdge(position,rect,allowedEdges);isUnmodifiedDefaultBlock&&isPointContainedByRect(position,rect)&&(distance=0),distance<minDistance&&(insertPosition="bottom"===edge||!isRightToLeft&&"right"===edge||isRightToLeft&&"left"===edge?"after":"before",minDistance=distance,nearestIndex=blockIndex)}));const adjacentIndex=nearestIndex+("after"===insertPosition?1:-1),isNearestBlockUnmodifiedDefaultBlock=!(null===(_blocksData$nearestIn=blocksData[nearestIndex])||void 0===_blocksData$nearestIn||!_blocksData$nearestIn.isUnmodifiedDefaultBlock),isAdjacentBlockUnmodifiedDefaultBlock=!(null===(_blocksData$adjacentI=blocksData[adjacentIndex])||void 0===_blocksData$adjacentI||!_blocksData$adjacentI.isUnmodifiedDefaultBlock);if(!isNearestBlockUnmodifiedDefaultBlock&&!isAdjacentBlockUnmodifiedDefaultBlock){return["after"===insertPosition?nearestIndex+1:nearestIndex,"insert"]}return[isNearestBlockUnmodifiedDefaultBlock?nearestIndex:adjacentIndex,"replace"]}function useBlockDropZone(){let{rootClientId:targetRootClientId=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[dropTarget,setDropTarget]=(0,react.useState)({index:null,operation:"insert"}),isDisabled=(0,use_select.Z)((select=>{const{getTemplateLock:getTemplateLock,__unstableIsWithinBlockOverlay:__unstableIsWithinBlockOverlay,__unstableHasActiveBlockOverlayActive:__unstableHasActiveBlockOverlayActive}=select(store.h),templateLock=getTemplateLock(targetRootClientId);return["all","contentOnly"].some((lock=>lock===templateLock))||__unstableHasActiveBlockOverlayActive(targetRootClientId)||__unstableIsWithinBlockOverlay(targetRootClientId)}),[targetRootClientId]),{getBlockListSettings:getBlockListSettings,getBlocks:getBlocks,getBlockIndex:getBlockIndex}=(0,use_select.Z)(store.h),{showInsertionPoint:showInsertionPoint,hideInsertionPoint:hideInsertionPoint}=(0,use_dispatch.Z)(store.h),onBlockDrop=useOnBlockDrop(targetRootClientId,dropTarget.index,{operation:dropTarget.operation}),throttled=(0,use_throttle.Z)((0,react.useCallback)(((event,ownerDocument)=>{var _getBlockListSettings;const blocks=getBlocks(targetRootClientId);if(0===blocks.length)return void setDropTarget({index:0,operation:"insert"});const blocksData=blocks.map((block=>{const clientId=block.clientId;return{isUnmodifiedDefaultBlock:(0,blocks_build_module.ZP)(block),getBoundingClientRect:()=>ownerDocument.getElementById(`block-${clientId}`).getBoundingClientRect(),blockIndex:getBlockIndex(clientId)}})),[targetIndex,operation]=getDropTargetPosition(blocksData,{x:event.clientX,y:event.clientY},null===(_getBlockListSettings=getBlockListSettings(targetRootClientId))||void 0===_getBlockListSettings?void 0:_getBlockListSettings.orientation);setDropTarget({index:targetIndex,operation:operation}),showInsertionPoint(targetRootClientId,targetIndex,{operation:operation})}),[targetRootClientId]),200);return(0,use_drop_zone.Z)({isDisabled:isDisabled,onDrop:onBlockDrop,onDragOver(event){throttled(event,event.currentTarget.ownerDocument)},onDragLeave(){throttled.cancel(),hideInsertionPoint()},onDragEnd(){throttled.cancel(),hideInsertionPoint()}})}function UncontrolledInnerBlocks(props){const{clientId:clientId,allowedBlocks:allowedBlocks,__experimentalDefaultBlock:__experimentalDefaultBlock,__experimentalDirectInsert:__experimentalDirectInsert,template:template,templateLock:templateLock,wrapperRef:wrapperRef,templateInsertUpdatesSelection:templateInsertUpdatesSelection,__experimentalCaptureToolbars:captureToolbars,__experimentalAppenderTagName:__experimentalAppenderTagName,renderAppender:renderAppender,orientation:orientation,placeholder:placeholder,__experimentalLayout:__experimentalLayout}=props;!function useNestedSettingsUpdate(clientId,allowedBlocks,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,captureToolbars,orientation,layout){const{updateBlockListSettings:updateBlockListSettings}=(0,use_dispatch.Z)(store.h),registry=(0,use_registry.Z)(),{blockListSettings:blockListSettings,parentLock:parentLock}=(0,use_select.Z)((select=>{const rootClientId=select(store.h).getBlockRootClientId(clientId);return{blockListSettings:select(store.h).getBlockListSettings(clientId),parentLock:select(store.h).getTemplateLock(rootClientId)}}),[clientId]),_allowedBlocks=(0,react.useMemo)((()=>allowedBlocks),allowedBlocks);(0,react.useLayoutEffect)((()=>{const newSettings={allowedBlocks:_allowedBlocks,templateLock:void 0===templateLock||"contentOnly"===parentLock?parentLock:templateLock};if(void 0!==captureToolbars&&(newSettings.__experimentalCaptureToolbars=captureToolbars),void 0!==orientation)newSettings.orientation=orientation;else{const layoutType=getLayoutType(null==layout?void 0:layout.type);newSettings.orientation=layoutType.getOrientation(layout)}void 0!==__experimentalDefaultBlock&&(newSettings.__experimentalDefaultBlock=__experimentalDefaultBlock),void 0!==__experimentalDirectInsert&&(newSettings.__experimentalDirectInsert=__experimentalDirectInsert),(0,is_shallow_equal_build_module.ZP)(blockListSettings,newSettings)||(pendingSettingsUpdates.get(registry)||pendingSettingsUpdates.set(registry,[]),pendingSettingsUpdates.get(registry).push([clientId,newSettings]),window.queueMicrotask((()=>{var _pendingSettingsUpdat;null!==(_pendingSettingsUpdat=pendingSettingsUpdates.get(registry))&&void 0!==_pendingSettingsUpdat&&_pendingSettingsUpdat.length&&registry.batch((()=>{pendingSettingsUpdates.get(registry).forEach((args=>{updateBlockListSettings(...args)})),pendingSettingsUpdates.set(registry,[])}))})))}),[clientId,blockListSettings,_allowedBlocks,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,parentLock,captureToolbars,orientation,updateBlockListSettings,layout,registry])}(clientId,allowedBlocks,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,captureToolbars,orientation,__experimentalLayout),function useInnerBlockTemplateSync(clientId,template,templateLock,templateInsertUpdatesSelection){const{getBlocks:getBlocks,getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,isBlockSelected:isBlockSelected}=(0,use_select.Z)(store.h),{replaceInnerBlocks:replaceInnerBlocks,__unstableMarkNextChangeAsNotPersistent:__unstableMarkNextChangeAsNotPersistent}=(0,use_dispatch.Z)(store.h),{innerBlocks:innerBlocks}=(0,use_select.Z)((select=>({innerBlocks:select(store.h).getBlocks(clientId)})),[clientId]),existingTemplate=(0,react.useRef)(null);(0,react.useLayoutEffect)((()=>{let isCancelled=!1;return window.queueMicrotask((()=>{if(isCancelled)return;const currentInnerBlocks=getBlocks(clientId),shouldApplyTemplate=0===currentInnerBlocks.length||"all"===templateLock||"contentOnly"===templateLock,hasTemplateChanged=!es6_default()(template,existingTemplate.current);if(!shouldApplyTemplate||!hasTemplateChanged)return;existingTemplate.current=template;const nextBlocks=(0,blocks_build_module.fw)(currentInnerBlocks,template);es6_default()(nextBlocks,currentInnerBlocks)||(__unstableMarkNextChangeAsNotPersistent(),replaceInnerBlocks(clientId,nextBlocks,0===currentInnerBlocks.length&&templateInsertUpdatesSelection&&0!==nextBlocks.length&&isBlockSelected(clientId),getSelectedBlocksInitialCaretPosition()))})),()=>{isCancelled=!0}}),[innerBlocks,template,templateLock,clientId])}(clientId,template,templateLock,templateInsertUpdatesSelection);const{context:context,name:name}=(0,use_select.Z)((select=>{const block=select(store.h).getBlock(clientId);if(!block)return{};const blockType=(0,blocks_build_module.ck)(block.name);return blockType&&blockType.providesContext?{context:getBlockContext(block.attributes,blockType),name:block.name}:{}}),[clientId]),{allowSizingOnChildren:allowSizingOnChildren=!1}=(0,blocks_build_module.Dx)(name,"__experimentalLayout")||{},layout=(0,react.useMemo)((()=>({...__experimentalLayout,...allowSizingOnChildren&&{allowSizingOnChildren:!0}})),[__experimentalLayout,allowSizingOnChildren]);return(0,jsx_runtime.jsx)(BlockContextProvider,{value:context,children:(0,jsx_runtime.jsx)(block_list_BlockListItems,{rootClientId:clientId,renderAppender:renderAppender,__experimentalAppenderTagName:__experimentalAppenderTagName,__experimentalLayout:layout,wrapperRef:wrapperRef,placeholder:placeholder})})}function ControlledInnerBlocks(props){return(0,use_block_sync.Z)(props),(0,jsx_runtime.jsx)(UncontrolledInnerBlocks,{...props})}UncontrolledInnerBlocks.displayName="UncontrolledInnerBlocks",ControlledInnerBlocks.displayName="ControlledInnerBlocks";const ForwardedInnerBlocks=(0,react.forwardRef)(((props,ref)=>{const innerBlocksProps=useInnerBlocksProps({ref:ref},props);return(0,jsx_runtime.jsx)("div",{className:"block-editor-inner-blocks",children:(0,jsx_runtime.jsx)("div",{...innerBlocksProps})})}));function useInnerBlocksProps(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{__unstableDisableLayoutClassNames:__unstableDisableLayoutClassNames,__unstableDisableDropZone:__unstableDisableDropZone}=options,{clientId:clientId,__unstableLayoutClassNames:layoutClassNames=""}=(0,block_edit_context.Z8)(),isSmallScreen=(0,use_viewport_match.Z)("medium","<"),{__experimentalCaptureToolbars:__experimentalCaptureToolbars,hasOverlay:hasOverlay}=(0,use_select.Z)((select=>{if(!clientId)return{};const{getBlockName:getBlockName,isBlockSelected:isBlockSelected,hasSelectedInnerBlock:hasSelectedInnerBlock,__unstableGetEditorMode:__unstableGetEditorMode}=select(store.h),blockName=getBlockName(clientId),enableClickThrough="navigation"===__unstableGetEditorMode()||isSmallScreen;return{__experimentalCaptureToolbars:select(blocks_build_module.h).hasBlockSupport(blockName,"__experimentalExposeControlsToChildren",!1),hasOverlay:"core/template"!==blockName&&!isBlockSelected(clientId)&&!hasSelectedInnerBlock(clientId,!0)&&enableClickThrough}}),[clientId,isSmallScreen]),blockDropZoneRef=useBlockDropZone({rootClientId:clientId}),ref=(0,use_merge_refs.Z)([props.ref,__unstableDisableDropZone?null:blockDropZoneRef]),innerBlocksProps={__experimentalCaptureToolbars:__experimentalCaptureToolbars,...options},InnerBlocks=innerBlocksProps.value&&innerBlocksProps.onChange?ControlledInnerBlocks:UncontrolledInnerBlocks;return{...props,ref:ref,className:classnames_default()(props.className,"block-editor-block-list__layout",__unstableDisableLayoutClassNames?"":layoutClassNames,{"has-overlay":hasOverlay}),children:clientId?(0,jsx_runtime.jsx)(InnerBlocks,{...innerBlocksProps,clientId:clientId}):(0,jsx_runtime.jsx)(block_list_BlockListItems,{...options})}}useInnerBlocksProps.save=blocks_build_module.cZ,ForwardedInnerBlocks.DefaultBlockAppender=inner_blocks_default_block_appender,ForwardedInnerBlocks.ButtonBlockAppender=inner_blocks_button_block_appender,ForwardedInnerBlocks.Content=()=>useInnerBlocksProps.save().children;const elementContext=(0,react.createContext)(),IntersectionObserver=(0,react.createContext)(),pendingBlockVisibilityUpdatesPerRegistry=new WeakMap;function Root(_ref){let{className:className,...settings}=_ref;const[element,setElement]=(0,react.useState)(),isLargeViewport=(0,use_viewport_match.Z)("medium"),{isOutlineMode:isOutlineMode,isFocusMode:isFocusMode,editorMode:editorMode}=(0,use_select.Z)((select=>{const{getSettings:getSettings,__unstableGetEditorMode:__unstableGetEditorMode}=select(store.h),{outlineMode:outlineMode,focusMode:focusMode}=getSettings();return{isOutlineMode:outlineMode,isFocusMode:focusMode,editorMode:__unstableGetEditorMode()}}),[]),registry=(0,use_registry.Z)(),{setBlockVisibility:setBlockVisibility}=(0,use_dispatch.Z)(store.h),delayedBlockVisibilityUpdates=(0,use_debounce.Z)((0,react.useCallback)((()=>{const updates={};pendingBlockVisibilityUpdatesPerRegistry.get(registry).forEach((_ref2=>{let[id,isIntersecting]=_ref2;updates[id]=isIntersecting})),setBlockVisibility(updates)}),[registry]),300,{trailing:!0}),intersectionObserver=(0,react.useMemo)((()=>{const{IntersectionObserver:Observer}=window;if(Observer)return new Observer((entries=>{pendingBlockVisibilityUpdatesPerRegistry.get(registry)||pendingBlockVisibilityUpdatesPerRegistry.set(registry,[]);for(const entry of entries){const clientId=entry.target.getAttribute("data-block");pendingBlockVisibilityUpdatesPerRegistry.get(registry).push([clientId,entry.isIntersecting])}delayedBlockVisibilityUpdates()}))}),[]),innerBlocksProps=useInnerBlocksProps({ref:(0,use_merge_refs.Z)([useBlockSelectionClearer(),useInBetweenInserter(),setElement]),className:classnames_default()("is-root-container",className,{"is-outline-mode":isOutlineMode,"is-focus-mode":isFocusMode&&isLargeViewport,"is-navigate-mode":"navigation"===editorMode})},settings);return(0,jsx_runtime.jsx)(elementContext.Provider,{value:element,children:(0,jsx_runtime.jsx)(IntersectionObserver.Provider,{value:intersectionObserver,children:(0,jsx_runtime.jsx)("div",{...innerBlocksProps})})})}function BlockList(settings){return function usePreParsePatterns(){const{patterns:patterns,isPreviewMode:isPreviewMode}=(0,use_select.Z)((_select=>{const{__experimentalBlockPatterns:__experimentalBlockPatterns,__unstableIsPreviewMode:__unstableIsPreviewMode}=_select(store.h).getSettings();return{patterns:__experimentalBlockPatterns,isPreviewMode:__unstableIsPreviewMode}}),[]);return(0,react.useEffect)((()=>{if(isPreviewMode)return;if(null==patterns||!patterns.length)return;let handle,index=-1;const callback=()=>{index++,index>=patterns.length||((0,data_build_module.Ys)(store.h).__experimentalGetParsedPattern(patterns[index].name),handle=requestIdleCallback(callback))};return handle=requestIdleCallback(callback),()=>cancelIdleCallback(handle)}),[patterns,isPreviewMode]),null}(),(0,jsx_runtime.jsx)(BlockToolsBackCompat,{children:(0,jsx_runtime.jsx)(block_edit_context.Q2,{value:block_edit_context.FF,children:(0,jsx_runtime.jsx)(Root,{...settings})})})}function Items(_ref3){let{placeholder:placeholder,rootClientId:rootClientId,renderAppender:renderAppender,__experimentalAppenderTagName:__experimentalAppenderTagName,__experimentalLayout:layout=defaultLayout}=_ref3;const{order:order,selectedBlocks:selectedBlocks,visibleBlocks:visibleBlocks}=(0,use_select.Z)((select=>{const{getBlockOrder:getBlockOrder,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableGetVisibleBlocks:__unstableGetVisibleBlocks}=select(store.h);return{order:getBlockOrder(rootClientId),selectedBlocks:getSelectedBlockClientIds(),visibleBlocks:__unstableGetVisibleBlocks()}}),[rootClientId]);return(0,jsx_runtime.jsxs)(LayoutProvider,{value:layout,children:[order.map((clientId=>(0,jsx_runtime.jsx)(context.ZP,{value:!visibleBlocks.has(clientId)&&!selectedBlocks.includes(clientId),children:(0,jsx_runtime.jsx)(block,{rootClientId:rootClientId,clientId:clientId})},clientId))),order.length<1&&placeholder,(0,jsx_runtime.jsx)(block_list_appender,{tagName:__experimentalAppenderTagName,rootClientId:rootClientId,renderAppender:renderAppender})]})}function block_list_BlockListItems(props){return(0,jsx_runtime.jsx)(context.ZP,{value:!1,children:(0,jsx_runtime.jsx)(Items,{...props})})}Root.displayName="Root",BlockList.displayName="BlockList",BlockList.__unstableElementContext=elementContext,Items.displayName="Items",block_list_BlockListItems.displayName="BlockListItems",BlockList.__docgenInfo={description:"",methods:[],displayName:"BlockList"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/index.js"]={name:"BlockList",docgenInfo:BlockList.__docgenInfo,path:"packages/block-editor/src/components/block-list/index.js"}),block_list_BlockListItems.__docgenInfo={description:"",methods:[],displayName:"BlockListItems"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-list/index.js"]={name:"BlockListItems",docgenInfo:block_list_BlockListItems.__docgenInfo,path:"packages/block-editor/src/components/block-list/index.js"});var react_dom=__webpack_require__("./node_modules/react-dom/index.js");function use_multi_selection_selector(select){const{isMultiSelecting:isMultiSelecting,getMultiSelectedBlockClientIds:getMultiSelectedBlockClientIds,hasMultiSelection:hasMultiSelection,getSelectedBlockClientId:getSelectedBlockClientId,getSelectedBlocksInitialCaretPosition:getSelectedBlocksInitialCaretPosition,__unstableIsFullySelected:__unstableIsFullySelected}=select(store.h);return{isMultiSelecting:isMultiSelecting(),multiSelectedBlockClientIds:getMultiSelectedBlockClientIds(),hasMultiSelection:hasMultiSelection(),selectedBlockClientId:getSelectedBlockClientId(),initialPosition:getSelectedBlocksInitialCaretPosition(),isFullSelection:__unstableIsFullySelected()}}function useMultiSelection(){const{initialPosition:initialPosition,isMultiSelecting:isMultiSelecting,multiSelectedBlockClientIds:multiSelectedBlockClientIds,hasMultiSelection:hasMultiSelection,selectedBlockClientId:selectedBlockClientId,isFullSelection:isFullSelection}=(0,use_select.Z)(use_multi_selection_selector,[]);return(0,use_ref_effect.Z)((node=>{const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;if(null==initialPosition)return;if(!hasMultiSelection||isMultiSelecting)return;const{length:length}=multiSelectedBlockClientIds;length<2||isFullSelection&&(node.contentEditable=!0,node.focus(),defaultView.getSelection().removeAllRanges())}),[hasMultiSelection,isMultiSelecting,multiSelectedBlockClientIds,selectedBlockClientId,initialPosition,isFullSelection])}var is_vertical_edge=__webpack_require__("./packages/dom/build-module/dom/is-vertical-edge.js"),is_horizontal_edge=__webpack_require__("./packages/dom/build-module/dom/is-horizontal-edge.js"),compute_caret_rect=__webpack_require__("./packages/dom/build-module/dom/compute-caret-rect.js"),is_rtl=__webpack_require__("./packages/dom/build-module/dom/is-rtl.js"),place_caret_at_vertical_edge=__webpack_require__("./packages/dom/build-module/dom/place-caret-at-vertical-edge.js");function getClosestTabbable(target,isReverse,containerElement,onlyVertical){let targetRect,focusableNodes=dom_build_module.T_.focusable.find(containerElement);return isReverse&&focusableNodes.reverse(),focusableNodes=focusableNodes.slice(focusableNodes.indexOf(target)+1),onlyVertical&&(targetRect=target.getBoundingClientRect()),focusableNodes.find((function isTabCandidate(node){if(1!==node.children.length||!function isInSameBlock(a,b){return a.closest(BLOCK_SELECTOR)===b.closest(BLOCK_SELECTOR)}(node,node.firstElementChild)||"true"!==node.firstElementChild.getAttribute("contenteditable")){if(!dom_build_module.T_.tabbable.isTabbableIndex(node))return!1;if(node.isContentEditable&&"true"!==node.contentEditable)return!1;if(onlyVertical){const nodeRect=node.getBoundingClientRect();if(nodeRect.left>=targetRect.right||nodeRect.right<=targetRect.left)return!1}return!0}}))}function useArrowNav(){const{getMultiSelectedBlocksStartClientId:getMultiSelectedBlocksStartClientId,getMultiSelectedBlocksEndClientId:getMultiSelectedBlocksEndClientId,getSettings:getSettings,hasMultiSelection:hasMultiSelection,__unstableIsFullySelected:__unstableIsFullySelected}=(0,use_select.Z)(store.h),{selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{let verticalRect;function onMouseDown(){verticalRect=null}function onKeyDown(event){const{keyCode:keyCode,target:target,shiftKey:shiftKey,ctrlKey:ctrlKey,altKey:altKey,metaKey:metaKey}=event,isUp=keyCode===keycodes_build_module.UP,isDown=keyCode===keycodes_build_module.WV,isLeft=keyCode===keycodes_build_module.RL,isRight=keyCode===keycodes_build_module.pX,isReverse=isUp||isLeft,isHorizontal=isLeft||isRight,isVertical=isUp||isDown,isNav=isHorizontal||isVertical,hasModifier=shiftKey||ctrlKey||altKey||metaKey,isNavEdge=isVertical?is_vertical_edge.Z:is_horizontal_edge.Z,{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;if(hasMultiSelection()){if(!__unstableIsFullySelected())return;if(event.defaultPrevented)return;if(!isNav)return;if(shiftKey)return;return event.preventDefault(),void(isReverse?selectBlock(getMultiSelectedBlocksStartClientId()):selectBlock(getMultiSelectedBlocksEndClientId(),-1))}if(isVertical?verticalRect||(verticalRect=(0,compute_caret_rect.Z)(defaultView)):verticalRect=null,event.defaultPrevented)return;if(!isNav)return;if(!function isNavigationCandidate(element,keyCode,hasModifier){if((keyCode===keycodes_build_module.UP||keyCode===keycodes_build_module.WV)&&!hasModifier)return!0;const{tagName:tagName}=element;if("INPUT"===tagName)return["button","checkbox","color","file","image","radio","reset","submit"].includes(element.getAttribute("type"));return"TEXTAREA"!==tagName}(target,keyCode,hasModifier))return;const isReverseDir=(0,is_rtl.Z)(target)?!isReverse:isReverse,{keepCaretInsideBlock:keepCaretInsideBlock}=getSettings();if(shiftKey)(function isClosestTabbableABlock(target,isReverse){const closestTabbable=getClosestTabbable(target,isReverse,node);return closestTabbable&&getBlockClientId(closestTabbable)})(target,isReverse)&&isNavEdge(target,isReverse)&&(node.contentEditable=!0,node.focus());else if(!isVertical||!(0,is_vertical_edge.Z)(target,isReverse)||altKey&&!(0,is_horizontal_edge.Z)(target,isReverseDir)||keepCaretInsideBlock){if(isHorizontal&&defaultView.getSelection().isCollapsed&&(0,is_horizontal_edge.Z)(target,isReverseDir)&&!keepCaretInsideBlock){const closestTabbable=getClosestTabbable(target,isReverseDir,node);(0,place_caret_at_horizontal_edge.Z)(closestTabbable,isReverse),event.preventDefault()}}else{const closestTabbable=getClosestTabbable(target,isReverse,node,!0);closestTabbable&&((0,place_caret_at_vertical_edge.Z)(closestTabbable,altKey?!isReverse:isReverse,altKey?void 0:verticalRect),event.preventDefault())}}return node.addEventListener("mousedown",onMouseDown),node.addEventListener("keydown",onKeyDown),()=>{node.removeEventListener("mousedown",onMouseDown),node.removeEventListener("keydown",onKeyDown)}}),[])}var is_entirely_selected=__webpack_require__("./packages/dom/build-module/dom/is-entirely-selected.js");function useSelectAll(){const{getBlockOrder:getBlockOrder,getSelectedBlockClientIds:getSelectedBlockClientIds,getBlockRootClientId:getBlockRootClientId}=(0,use_select.Z)(store.h),{multiSelect:multiSelect,selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h),isMatch=(0,keyboard_shortcuts_build_module.sx)();return(0,use_ref_effect.Z)((node=>{function onKeyDown(event){if(!isMatch("core/block-editor/select-all",event))return;const selectedClientIds=getSelectedBlockClientIds();if(selectedClientIds.length<2&&!(0,is_entirely_selected.Z)(event.target))return;event.preventDefault();const[firstSelectedClientId]=selectedClientIds,rootClientId=getBlockRootClientId(firstSelectedClientId),blockClientIds=getBlockOrder(rootClientId);selectedClientIds.length!==blockClientIds.length?multiSelect(blockClientIds[0],blockClientIds[blockClientIds.length-1]):rootClientId&&(node.ownerDocument.defaultView.getSelection().removeAllRanges(),selectBlock(rootClientId))}return node.addEventListener("keydown",onKeyDown),()=>{node.removeEventListener("keydown",onKeyDown)}}),[])}function setContentEditableWrapper(node,value){node.contentEditable=value,value&&node.focus()}function useDragSelection(){const{startMultiSelect:startMultiSelect,stopMultiSelect:stopMultiSelect}=(0,use_dispatch.Z)(store.h),{isSelectionEnabled:isSelectionEnabled,hasMultiSelection:hasMultiSelection,isDraggingBlocks:isDraggingBlocks}=(0,use_select.Z)(store.h);return(0,use_ref_effect.Z)((node=>{const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;let anchorElement,rafId;function onMouseUp(){stopMultiSelect(),defaultView.removeEventListener("mouseup",onMouseUp),rafId=defaultView.requestAnimationFrame((()=>{if(hasMultiSelection())return;setContentEditableWrapper(node,!1);const selection=defaultView.getSelection();if(selection.rangeCount){const{commonAncestorContainer:commonAncestorContainer}=selection.getRangeAt(0);anchorElement.contains(commonAncestorContainer)&&anchorElement.focus()}}))}function onMouseLeave(_ref){let{buttons:buttons,target:target}=_ref;isDraggingBlocks()||1===buttons&&target.getAttribute("contenteditable")&&isSelectionEnabled()&&(anchorElement=ownerDocument.activeElement,startMultiSelect(),defaultView.addEventListener("mouseup",onMouseUp),setContentEditableWrapper(node,!0))}return node.addEventListener("mouseout",onMouseLeave),()=>{node.removeEventListener("mouseout",onMouseLeave),defaultView.removeEventListener("mouseup",onMouseUp),defaultView.cancelAnimationFrame(rafId)}}),[startMultiSelect,stopMultiSelect,isSelectionEnabled,hasMultiSelection])}function use_selection_observer_setContentEditableWrapper(node,value){node.contentEditable=value,value&&node.focus()}function useSelectionObserver(){const{multiSelect:multiSelect,selectBlock:selectBlock,selectionChange:selectionChange}=(0,use_dispatch.Z)(store.h),{getBlockParents:getBlockParents,getBlockSelectionStart:getBlockSelectionStart}=(0,use_select.Z)(store.h);return(0,use_ref_effect.Z)((node=>{const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;function onSelectionChange(event){const selection=defaultView.getSelection();if(!selection.rangeCount)return;const isClickShift=event.shiftKey&&"mouseup"===event.type;if(selection.isCollapsed&&!isClickShift)return void use_selection_observer_setContentEditableWrapper(node,!1);let startClientId=getBlockClientId(function extractSelectionStartNode(selection){const{anchorNode:anchorNode,anchorOffset:anchorOffset}=selection;return anchorNode.nodeType===anchorNode.TEXT_NODE||0===anchorOffset?anchorNode:anchorNode.childNodes[anchorOffset-1]}(selection)),endClientId=getBlockClientId(function extractSelectionEndNode(selection){const{focusNode:focusNode,focusOffset:focusOffset}=selection;return focusNode.nodeType===focusNode.TEXT_NODE||focusOffset===focusNode.childNodes.length?focusNode:focusNode.childNodes[focusOffset]}(selection));if(isClickShift){const selectedClientId=getBlockSelectionStart(),clickedClientId=getBlockClientId(event.target),focusNodeIsNonSelectable=clickedClientId!==endClientId;(startClientId===endClientId&&selection.isCollapsed||!endClientId||focusNodeIsNonSelectable)&&(endClientId=clickedClientId),startClientId!==selectedClientId&&(startClientId=selectedClientId)}if(void 0===startClientId&&void 0===endClientId)return void use_selection_observer_setContentEditableWrapper(node,!1);if(startClientId===endClientId)selectBlock(startClientId);else{const startPath=[...getBlockParents(startClientId),startClientId],endPath=[...getBlockParents(endClientId),endClientId],depth=function findDepth(a,b){let depth=0;for(;a[depth]===b[depth];)depth++;return depth}(startPath,endPath);multiSelect(startPath[depth],endPath[depth])}}function addListeners(){ownerDocument.addEventListener("selectionchange",onSelectionChange),defaultView.addEventListener("mouseup",onSelectionChange)}function removeListeners(){ownerDocument.removeEventListener("selectionchange",onSelectionChange),defaultView.removeEventListener("mouseup",onSelectionChange)}function resetListeners(){removeListeners(),addListeners()}return addListeners(),node.addEventListener("focusin",resetListeners),()=>{removeListeners(),node.removeEventListener("focusin",resetListeners)}}),[multiSelect,selectBlock,selectionChange,getBlockParents])}function useClickSelection(){const{selectBlock:selectBlock}=(0,use_dispatch.Z)(store.h),{isSelectionEnabled:isSelectionEnabled,getBlockSelectionStart:getBlockSelectionStart,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store.h);return(0,use_ref_effect.Z)((node=>{function onMouseDown(event){if(!isSelectionEnabled()||0!==event.button)return;const startClientId=getBlockSelectionStart(),clickedClientId=getBlockClientId(event.target);event.shiftKey?startClientId!==clickedClientId&&(node.contentEditable=!0,node.focus()):hasMultiSelection()&&selectBlock(clickedClientId)}return node.addEventListener("mousedown",onMouseDown),()=>{node.removeEventListener("mousedown",onMouseDown)}}),[selectBlock,isSelectionEnabled,getBlockSelectionStart,hasMultiSelection])}function useInput(){const{__unstableIsFullySelected:__unstableIsFullySelected,getSelectedBlockClientIds:getSelectedBlockClientIds,__unstableIsSelectionMergeable:__unstableIsSelectionMergeable,hasMultiSelection:hasMultiSelection}=(0,use_select.Z)(store.h),{replaceBlocks:replaceBlocks,__unstableSplitSelection:__unstableSplitSelection,removeBlocks:removeBlocks,__unstableDeleteSelection:__unstableDeleteSelection,__unstableExpandSelection:__unstableExpandSelection}=(0,use_dispatch.Z)(store.h);return(0,use_ref_effect.Z)((node=>{function onBeforeInput(event){var _event$inputType;hasMultiSelection()&&null!==(_event$inputType=event.inputType)&&void 0!==_event$inputType&&_event$inputType.startsWith("format")&&event.preventDefault()}function onKeyDown(event){event.defaultPrevented||hasMultiSelection()&&(event.keyCode===keycodes_build_module.K5?(node.contentEditable=!1,event.preventDefault(),__unstableIsFullySelected()?replaceBlocks(getSelectedBlockClientIds(),(0,blocks_build_module.j4)((0,blocks_build_module.UT)())):__unstableSplitSelection()):event.keyCode===keycodes_build_module.ZH||event.keyCode===keycodes_build_module.yY?(node.contentEditable=!1,event.preventDefault(),__unstableIsFullySelected()?removeBlocks(getSelectedBlockClientIds()):__unstableIsSelectionMergeable()?__unstableDeleteSelection(event.keyCode===keycodes_build_module.yY):__unstableExpandSelection()):1!==event.key.length||event.metaKey||event.ctrlKey||(node.contentEditable=!1,__unstableIsSelectionMergeable()?__unstableDeleteSelection(event.keyCode===keycodes_build_module.yY):(event.preventDefault(),node.ownerDocument.defaultView.getSelection().removeAllRanges())))}function onCompositionStart(event){hasMultiSelection()&&(node.contentEditable=!1,__unstableIsSelectionMergeable()?__unstableDeleteSelection():(event.preventDefault(),node.ownerDocument.defaultView.getSelection().removeAllRanges()))}return node.addEventListener("beforeinput",onBeforeInput),node.addEventListener("keydown",onKeyDown),node.addEventListener("compositionstart",onCompositionStart),()=>{node.removeEventListener("beforeinput",onBeforeInput),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("compositionstart",onCompositionStart)}}),[])}function useWritingFlow(){const[before,ref,after]=function useTabNav(){const container=(0,react.useRef)(),focusCaptureBeforeRef=(0,react.useRef)(),focusCaptureAfterRef=(0,react.useRef)(),lastFocus=(0,react.useRef)(),{hasMultiSelection:hasMultiSelection,getSelectedBlockClientId:getSelectedBlockClientId,getBlockCount:getBlockCount}=(0,use_select.Z)(store.h),{setNavigationMode:setNavigationMode}=(0,use_dispatch.Z)(store.h),focusCaptureTabIndex=(0,use_select.Z)((select=>select(store.h).isNavigationMode()),[])?void 0:"0",noCapture=(0,react.useRef)();function onFocusCapture(event){if(noCapture.current)noCapture.current=null;else if(hasMultiSelection())container.current.focus();else if(getSelectedBlockClientId())lastFocus.current.focus();else{setNavigationMode(!0);const action=event.target.compareDocumentPosition(container.current)&event.target.DOCUMENT_POSITION_FOLLOWING?"findNext":"findPrevious";dom_build_module.T_.tabbable[action](event.target).focus()}}const before=(0,jsx_runtime.jsx)("div",{ref:focusCaptureBeforeRef,tabIndex:focusCaptureTabIndex,onFocus:onFocusCapture}),after=(0,jsx_runtime.jsx)("div",{ref:focusCaptureAfterRef,tabIndex:focusCaptureTabIndex,onFocus:onFocusCapture}),ref=(0,use_ref_effect.Z)((node=>{function onKeyDown(event){if(event.defaultPrevented)return;if(event.keyCode===keycodes_build_module.hY)return event.preventDefault(),void setNavigationMode(!0);if(event.keyCode!==keycodes_build_module.Mf)return;const isShift=event.shiftKey,direction=isShift?"findPrevious":"findNext";if(!hasMultiSelection()&&!getSelectedBlockClientId())return void(event.target===node&&setNavigationMode(!0));if(((0,is_form_element.Z)(event.target)||event.target.getAttribute("data-block")===getSelectedBlockClientId())&&(0,is_form_element.Z)(dom_build_module.T_.tabbable[direction](event.target)))return;const next=isShift?focusCaptureBeforeRef:focusCaptureAfterRef;noCapture.current=!0,next.current.focus({preventScroll:!0})}function onFocusOut(event){lastFocus.current=event.target;const{ownerDocument:ownerDocument}=node;event.relatedTarget||ownerDocument.activeElement!==ownerDocument.body||0!==getBlockCount()||node.focus()}function preventScrollOnTab(event){var _event$target;if(event.keyCode!==keycodes_build_module.Mf)return;if("region"===(null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.getAttribute("role")))return;if(container.current===event.target)return;const direction=event.shiftKey?"findPrevious":"findNext",target=dom_build_module.T_.tabbable[direction](event.target);target!==focusCaptureBeforeRef.current&&target!==focusCaptureAfterRef.current||(event.preventDefault(),target.focus({preventScroll:!0}))}const{ownerDocument:ownerDocument}=node,{defaultView:defaultView}=ownerDocument;return defaultView.addEventListener("keydown",preventScrollOnTab),node.addEventListener("keydown",onKeyDown),node.addEventListener("focusout",onFocusOut),()=>{defaultView.removeEventListener("keydown",preventScrollOnTab),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("focusout",onFocusOut)}}),[]);return[before,(0,use_merge_refs.Z)([container,ref]),after]}(),hasMultiSelection=(0,use_select.Z)((select=>select(store.h).hasMultiSelection()),[]);return[before,(0,use_merge_refs.Z)([ref,useInput(),useDragSelection(),useSelectionObserver(),useClickSelection(),useMultiSelection(),useSelectAll(),useArrowNav(),(0,use_ref_effect.Z)((node=>{if(node.tabIndex=0,node.contentEditable=hasMultiSelection,hasMultiSelection)return node.classList.add("has-multi-selection"),node.setAttribute("aria-label",(0,build_module.__)("Multiple selected blocks")),()=>{node.classList.remove("has-multi-selection"),node.removeAttribute("aria-label")}}),[hasMultiSelection])]),after]}function WritingFlow(_ref,forwardedRef){let{children:children,...props}=_ref;const[before,ref,after]=useWritingFlow();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[before,(0,jsx_runtime.jsx)("div",{...props,ref:(0,use_merge_refs.Z)([ref,forwardedRef]),className:classnames_default()(props.className,"block-editor-writing-flow"),children:children}),after]})}WritingFlow.__docgenInfo={description:"",methods:[],displayName:"WritingFlow"};(0,react.forwardRef)(WritingFlow);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/writing-flow/index.js"]={name:"WritingFlow",docgenInfo:WritingFlow.__docgenInfo,path:"packages/block-editor/src/components/writing-flow/index.js"});function useParsedAssets(html){return(0,react.useMemo)((()=>{const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=html,Array.from(doc.body.children)}),[html])}function Iframe(_ref3,ref){let{contentRef:contentRef,children:children,head:head,tabIndex:tabIndex=0,assets:assets,scale:scale=1,frameSize:frameSize=0,readonly:readonly,...props}=_ref3;const[,forceRender]=(0,react.useReducer)((()=>({}))),[iframeDocument,setIframeDocument]=(0,react.useState)(),[bodyClasses,setBodyClasses]=(0,react.useState)([]),styles=useParsedAssets(null==assets?void 0:assets.styles),scripts=useParsedAssets(null==assets?void 0:assets.scripts),clearerRef=useBlockSelectionClearer(),[before,writingFlowRef,after]=useWritingFlow(),[contentResizeListener,{height:contentHeight}]=(0,use_resize_observer.Z)(),setRef=(0,use_ref_effect.Z)((node=>{let iFrameDocument;function preventFileDropDefault(event){event.preventDefault()}function setDocumentIfReady(){const{contentDocument:contentDocument,ownerDocument:ownerDocument}=node,{readyState:readyState,documentElement:documentElement}=contentDocument;return iFrameDocument=contentDocument,("interactive"===readyState||"complete"===readyState)&&(function bubbleEvents(doc){const{defaultView:defaultView}=doc,{frameElement:frameElement}=defaultView;function bubbleEvent(event){const constructorName=Object.getPrototypeOf(event).constructor.name,Constructor=window[constructorName],init={};for(const key in event)init[key]=event[key];if(event instanceof defaultView.MouseEvent){const rect=frameElement.getBoundingClientRect();init.clientX+=rect.left,init.clientY+=rect.top}const newEvent=new Constructor(event.type,init);!frameElement.dispatchEvent(newEvent)&&event.preventDefault()}const eventTypes=["dragover"];for(const name of eventTypes)doc.addEventListener(name,bubbleEvent)}(contentDocument),setIframeDocument(contentDocument),clearerRef(documentElement),setBodyClasses(Array.from(ownerDocument.body.classList).filter((name=>name.startsWith("admin-color-")||name.startsWith("post-type-")||"wp-embed-responsive"===name))),contentDocument.dir=ownerDocument.dir,documentElement.removeChild(contentDocument.head),documentElement.removeChild(contentDocument.body),iFrameDocument.addEventListener("dragover",preventFileDropDefault,!1),iFrameDocument.addEventListener("drop",preventFileDropDefault,!1),!0)}return node.addEventListener("load",setDocumentIfReady),()=>{var _iFrameDocument,_iFrameDocument2;node.removeEventListener("load",setDocumentIfReady),null===(_iFrameDocument=iFrameDocument)||void 0===_iFrameDocument||_iFrameDocument.removeEventListener("dragover",preventFileDropDefault),null===(_iFrameDocument2=iFrameDocument)||void 0===_iFrameDocument2||_iFrameDocument2.removeEventListener("drop",preventFileDropDefault)}}),[]),headRef=(0,use_ref_effect.Z)((element=>{scripts.reduce(((promise,script)=>promise.then((()=>async function loadScript(head,_ref2){let{id:id,src:src}=_ref2;return new Promise(((resolve,reject)=>{const script=head.ownerDocument.createElement("script");script.id=id,src?(script.src=src,script.onload=()=>resolve(),script.onerror=()=>reject()):resolve(),head.appendChild(script)}))}(element,script)))),Promise.resolve()).finally((()=>{forceRender()}))}),[]),bodyRef=(0,use_merge_refs.Z)([contentRef,clearerRef,writingFlowRef]),styleCompatibilityRef=function useStylesCompatibility(){return(0,use_ref_effect.Z)((node=>{Array.from(document.styleSheets).forEach((styleSheet=>{try{styleSheet.cssRules}catch(e){return}const{ownerNode:ownerNode,cssRules:cssRules}=styleSheet;if(!cssRules)return;if("LINK"!==ownerNode.tagName)return;if("wp-reset-editor-styles-css"===ownerNode.id)return;if(function matchFromRules(_cssRules){return Array.from(_cssRules).find((_ref=>{let{selectorText:selectorText,conditionText:conditionText,cssRules:__cssRules}=_ref;return conditionText?matchFromRules(__cssRules):selectorText&&(selectorText.includes(".editor-styles-wrapper")||selectorText.includes(".wp-block"))}))}(cssRules)&&!node.ownerDocument.getElementById(ownerNode.id)){node.appendChild(ownerNode.cloneNode(!0));const inlineCssId=ownerNode.id.replace("-css","-inline-css"),inlineCssElement=document.getElementById(inlineCssId);inlineCssElement&&node.appendChild(inlineCssElement.cloneNode(!0))}}))}),[])}();return head=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{children:"html{height:auto!important;}body{margin:0}"}),styles.map((_ref4=>{let{tagName:tagName,href:href,id:id,rel:rel,media:media,textContent:textContent}=_ref4;const TagName=tagName.toLowerCase();return"style"===TagName?(0,react.createElement)(TagName,{id:id,key:id},textContent):(0,react.createElement)(TagName,{href:href,id:id,rel:rel,media:media,key:id})})),head]}),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[tabIndex>=0&&before,(0,jsx_runtime.jsx)("iframe",{...props,ref:(0,use_merge_refs.Z)([ref,setRef]),tabIndex:tabIndex,srcDoc:"<!doctype html>",title:(0,build_module.__)("Editor canvas"),children:iframeDocument&&(0,react_dom.createPortal)((0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("head",{ref:headRef,children:[head,(0,jsx_runtime.jsx)("style",{children:`html { transition: background 5s; ${frameSize?"background: #2f2f2f; transition: background 0s;":""} }`})]}),(0,jsx_runtime.jsxs)("body",{ref:bodyRef,className:classnames_default()("block-editor-iframe__body","editor-styles-wrapper",...bodyClasses),style:{marginBottom:`-${contentHeight*(1-scale)-frameSize}px`,marginTop:frameSize,transform:`scale( ${scale} )`},inert:readonly?"true":void 0,children:[contentResizeListener,(0,jsx_runtime.jsx)("div",{style:{display:"none"},ref:styleCompatibilityRef}),(0,jsx_runtime.jsx)(style_provider.Z,{document:iframeDocument,children:children})]})]}),iframeDocument.documentElement)}),tabIndex>=0&&after]})}Iframe.__docgenInfo={description:"",methods:[],displayName:"Iframe",props:{tabIndex:{defaultValue:{value:"0",computed:!1},required:!1},scale:{defaultValue:{value:"1",computed:!1},required:!1},frameSize:{defaultValue:{value:"0",computed:!1},required:!1}}};var iframe=(0,react.forwardRef)(Iframe);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/iframe/index.js"]={name:"Iframe",docgenInfo:Iframe.__docgenInfo,path:"packages/block-editor/src/components/iframe/index.js"});var colord=__webpack_require__("./node_modules/colord/index.mjs"),names=__webpack_require__("./node_modules/colord/plugins/names.mjs"),a11y=__webpack_require__("./node_modules/colord/plugins/a11y.mjs"),traverse=__webpack_require__("./node_modules/traverse/index.js"),traverse_default=__webpack_require__.n(traverse);const commentre=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function parse(css,options){options=options||{};let lineno=1,column=1;function updatePosition(str){const lines=str.match(/\n/g);lines&&(lineno+=lines.length);const i=str.lastIndexOf("\n");column=~i?str.length-i:column+str.length}function position(){const start={line:lineno,column:column};return function(node){return node.position=new Position(start),whitespace(),node}}function Position(start){this.start=start,this.end={line:lineno,column:column},this.source=options.source}Position.prototype.content=css;const errorsList=[];function error(msg){const err=new Error(options.source+":"+lineno+":"+column+": "+msg);if(err.reason=msg,err.filename=options.source,err.line=lineno,err.column=column,err.source=css,!options.silent)throw err;errorsList.push(err)}function open(){return match(/^{\s*/)}function close(){return match(/^}/)}function rules(){let node;const accumulator=[];for(whitespace(),comments(accumulator);css.length&&"}"!==css.charAt(0)&&(node=atrule()||rule());)!1!==node&&(accumulator.push(node),comments(accumulator));return accumulator}function match(re){const m=re.exec(css);if(!m)return;const str=m[0];return updatePosition(str),css=css.slice(str.length),m}function whitespace(){match(/^\s*/)}function comments(accumulator){let c;for(accumulator=accumulator||[];c=comment();)!1!==c&&accumulator.push(c);return accumulator}function comment(){const pos=position();if("/"!==css.charAt(0)||"*"!==css.charAt(1))return;let i=2;for(;""!==css.charAt(i)&&("*"!==css.charAt(i)||"/"!==css.charAt(i+1));)++i;if(i+=2,""===css.charAt(i-1))return error("End of comment missing");const str=css.slice(2,i-2);return column+=2,updatePosition(str),css=css.slice(i),column+=2,pos({type:"comment",comment:str})}function selector(){const m=match(/^([^{]+)/);if(m)return trim(m[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(matched){return matched.replace(/,/g,"‌")})).split(/\s*(?![^(]*\)),\s*/).map((function(s){return s.replace(/\u200C/g,",")}))}function declaration(){const pos=position();let prop=match(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(!prop)return;if(prop=trim(prop[0]),!match(/^:\s*/))return error("property missing ':'");const val=match(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),ret=pos({type:"declaration",property:prop.replace(commentre,""),value:val?trim(val[0]).replace(commentre,""):""});return match(/^[;\s]*/),ret}function declarations(){const decls=[];if(!open())return error("missing '{'");let decl;for(comments(decls);decl=declaration();)!1!==decl&&(decls.push(decl),comments(decls));return close()?decls:error("missing '}'")}function keyframe(){let m;const vals=[],pos=position();for(;m=match(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)vals.push(m[1]),match(/^,\s*/);if(vals.length)return pos({type:"keyframe",values:vals,declarations:declarations()})}const atimport=_compileAtrule("import"),atcharset=_compileAtrule("charset"),atnamespace=_compileAtrule("namespace");function _compileAtrule(name){const re=new RegExp("^@"+name+"\\s*([^;]+);");return function(){const pos=position(),m=match(re);if(!m)return;const ret={type:name};return ret[name]=m[1].trim(),pos(ret)}}function atrule(){if("@"===css[0])return function atkeyframes(){const pos=position();let m=match(/^@([-\w]+)?keyframes\s*/);if(!m)return;const vendor=m[1];if(m=match(/^([-\w]+)\s*/),!m)return error("@keyframes missing name");const name=m[1];if(!open())return error("@keyframes missing '{'");let frame,frames=comments();for(;frame=keyframe();)frames.push(frame),frames=frames.concat(comments());return close()?pos({type:"keyframes",name:name,vendor:vendor,keyframes:frames}):error("@keyframes missing '}'")}()||function atmedia(){const pos=position(),m=match(/^@media *([^{]+)/);if(!m)return;const media=trim(m[1]);if(!open())return error("@media missing '{'");const style=comments().concat(rules());return close()?pos({type:"media",media:media,rules:style}):error("@media missing '}'")}()||function atcustommedia(){const pos=position(),m=match(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(m)return pos({type:"custom-media",name:trim(m[1]),media:trim(m[2])})}()||function atsupports(){const pos=position(),m=match(/^@supports *([^{]+)/);if(!m)return;const supports=trim(m[1]);if(!open())return error("@supports missing '{'");const style=comments().concat(rules());return close()?pos({type:"supports",supports:supports,rules:style}):error("@supports missing '}'")}()||atimport()||atcharset()||atnamespace()||function atdocument(){const pos=position(),m=match(/^@([-\w]+)?document *([^{]+)/);if(!m)return;const vendor=trim(m[1]),doc=trim(m[2]);if(!open())return error("@document missing '{'");const style=comments().concat(rules());return close()?pos({type:"document",document:doc,vendor:vendor,rules:style}):error("@document missing '}'")}()||function atpage(){const pos=position();if(!match(/^@page */))return;const sel=selector()||[];if(!open())return error("@page missing '{'");let decl,decls=comments();for(;decl=declaration();)decls.push(decl),decls=decls.concat(comments());return close()?pos({type:"page",selectors:sel,declarations:decls}):error("@page missing '}'")}()||function athost(){const pos=position();if(!match(/^@host\s*/))return;if(!open())return error("@host missing '{'");const style=comments().concat(rules());return close()?pos({type:"host",rules:style}):error("@host missing '}'")}()||function atfontface(){const pos=position();if(!match(/^@font-face\s*/))return;if(!open())return error("@font-face missing '{'");let decl,decls=comments();for(;decl=declaration();)decls.push(decl),decls=decls.concat(comments());return close()?pos({type:"font-face",declarations:decls}):error("@font-face missing '}'")}()}function rule(){const pos=position(),sel=selector();return sel?(comments(),pos({type:"rule",selectors:sel,declarations:declarations()})):error("selector missing")}return addParent(function stylesheet(){const rulesList=rules();return{type:"stylesheet",stylesheet:{source:options.source,rules:rulesList,parsingErrors:errorsList}}}())}function trim(str){return str?str.replace(/^\s+|\s+$/g,""):""}function addParent(obj,parent){const isNode=obj&&"string"==typeof obj.type,childParent=isNode?obj:parent;for(const k in obj){const value=obj[k];Array.isArray(value)?value.forEach((function(v){addParent(v,childParent)})):value&&"object"==typeof value&&addParent(value,childParent)}return isNode&&Object.defineProperty(obj,"parent",{configurable:!0,writable:!0,enumerable:!1,value:parent||null}),obj}var inherits_browser=__webpack_require__("./node_modules/inherits/inherits_browser.js"),inherits_browser_default=__webpack_require__.n(inherits_browser),compiler=Compiler;function Compiler(opts){this.options=opts||{}}Compiler.prototype.emit=function(str){return str},Compiler.prototype.visit=function(node){return this[node.type](node)},Compiler.prototype.mapVisit=function(nodes,delim){let buf="";delim=delim||"";for(let i=0,length=nodes.length;i<length;i++)buf+=this.visit(nodes[i]),delim&&i<length-1&&(buf+=this.emit(delim));return buf};var compress=compress_Compiler;function compress_Compiler(options){compiler.call(this,options)}inherits_browser_default()(compress_Compiler,compiler),compress_Compiler.prototype.compile=function(node){return node.stylesheet.rules.map(this.visit,this).join("")},compress_Compiler.prototype.comment=function(node){return this.emit("",node.position)},compress_Compiler.prototype.import=function(node){return this.emit("@import "+node.import+";",node.position)},compress_Compiler.prototype.media=function(node){return this.emit("@media "+node.media,node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype.document=function(node){const doc="@"+(node.vendor||"")+"document "+node.document;return this.emit(doc,node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype.charset=function(node){return this.emit("@charset "+node.charset+";",node.position)},compress_Compiler.prototype.namespace=function(node){return this.emit("@namespace "+node.namespace+";",node.position)},compress_Compiler.prototype.supports=function(node){return this.emit("@supports "+node.supports,node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype.keyframes=function(node){return this.emit("@"+(node.vendor||"")+"keyframes "+node.name,node.position)+this.emit("{")+this.mapVisit(node.keyframes)+this.emit("}")},compress_Compiler.prototype.keyframe=function(node){const decls=node.declarations;return this.emit(node.values.join(","),node.position)+this.emit("{")+this.mapVisit(decls)+this.emit("}")},compress_Compiler.prototype.page=function(node){const sel=node.selectors.length?node.selectors.join(", "):"";return this.emit("@page "+sel,node.position)+this.emit("{")+this.mapVisit(node.declarations)+this.emit("}")},compress_Compiler.prototype["font-face"]=function(node){return this.emit("@font-face",node.position)+this.emit("{")+this.mapVisit(node.declarations)+this.emit("}")},compress_Compiler.prototype.host=function(node){return this.emit("@host",node.position)+this.emit("{")+this.mapVisit(node.rules)+this.emit("}")},compress_Compiler.prototype["custom-media"]=function(node){return this.emit("@custom-media "+node.name+" "+node.media+";",node.position)},compress_Compiler.prototype.rule=function(node){const decls=node.declarations;return decls.length?this.emit(node.selectors.join(","),node.position)+this.emit("{")+this.mapVisit(decls)+this.emit("}"):""},compress_Compiler.prototype.declaration=function(node){return this.emit(node.property+":"+node.value,node.position)+this.emit(";")};var identity=identity_Compiler;function identity_Compiler(options){options=options||{},compiler.call(this,options),this.indentation=options.indent}inherits_browser_default()(identity_Compiler,compiler),identity_Compiler.prototype.compile=function(node){return this.stylesheet(node)},identity_Compiler.prototype.stylesheet=function(node){return this.mapVisit(node.stylesheet.rules,"\n\n")},identity_Compiler.prototype.comment=function(node){return this.emit(this.indent()+"/*"+node.comment+"*/",node.position)},identity_Compiler.prototype.import=function(node){return this.emit("@import "+node.import+";",node.position)},identity_Compiler.prototype.media=function(node){return this.emit("@media "+node.media,node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype.document=function(node){const doc="@"+(node.vendor||"")+"document "+node.document;return this.emit(doc,node.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype.charset=function(node){return this.emit("@charset "+node.charset+";",node.position)},identity_Compiler.prototype.namespace=function(node){return this.emit("@namespace "+node.namespace+";",node.position)},identity_Compiler.prototype.supports=function(node){return this.emit("@supports "+node.supports,node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype.keyframes=function(node){return this.emit("@"+(node.vendor||"")+"keyframes "+node.name,node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.keyframes,"\n")+this.emit(this.indent(-1)+"}")},identity_Compiler.prototype.keyframe=function(node){const decls=node.declarations;return this.emit(this.indent())+this.emit(node.values.join(", "),node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(decls,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")},identity_Compiler.prototype.page=function(node){const sel=node.selectors.length?node.selectors.join(", ")+" ":"";return this.emit("@page "+sel,node.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(node.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},identity_Compiler.prototype["font-face"]=function(node){return this.emit("@font-face ",node.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(node.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},identity_Compiler.prototype.host=function(node){return this.emit("@host",node.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(node.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},identity_Compiler.prototype["custom-media"]=function(node){return this.emit("@custom-media "+node.name+" "+node.media+";",node.position)},identity_Compiler.prototype.rule=function(node){const indent=this.indent(),decls=node.declarations;return decls.length?this.emit(node.selectors.map((function(s){return indent+s})).join(",\n"),node.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(decls,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""},identity_Compiler.prototype.declaration=function(node){return this.emit(this.indent())+this.emit(node.property+": "+node.value,node.position)+this.emit(";")},identity_Compiler.prototype.indent=function(level){return this.level=this.level||1,null!==level?(this.level+=level,""):Array(this.level).join(this.indentation||"  ")};var transform_styles_traverse=function traverseCSS(css,callback){try{const parsed=parse(css);return function stringify(node,options){return((options=options||{}).compress?new compress(options):new identity(options)).compile(node)}(traverse_default().map(parsed,(function(node){if(!node)return node;const updatedNode=callback(node);return this.update(updatedNode)})))}catch(err){return console.warn("Error while traversing the CSS: "+err),null}};function isValidURL(meta){return 0!==meta.value.indexOf("data:")&&0!==meta.value.indexOf("#")&&(!function isAbsolutePath(filePath){return/^\/(?!\/)/.test(filePath)}(meta.value)&&!function isRemotePath(filePath){return/^(?:https?:)?\/\//.test(filePath)}(meta.value))}function getResourcePath(str,baseURL){return new URL(str,baseURL).toString()}var url_rewrite=rootURL=>node=>{if("declaration"===node.type){const updatedURLs=function getURLs(value){const reg=/url\((\s*)(['"]?)(.+?)\2(\s*)\)/g;let match;const URLs=[];for(;null!==(match=reg.exec(value));){const meta={source:match[0],before:match[1],quote:match[2],value:match[3],after:match[4]};isValidURL(meta)&&URLs.push(meta)}return URLs}(node.value).map(function processURL(baseURL){return meta=>({...meta,newUrl:"url("+meta.before+meta.quote+getResourcePath(meta.value,baseURL)+meta.quote+meta.after+")"})}(rootURL));return{...node,value:(raw=node.value,URLs=updatedURLs,URLs.forEach((item=>{raw=raw.replace(item.source,item.newUrl)})),raw)}}var raw,URLs;return node};const IS_ROOT_TAG=/^(body|html|:root).*$/;var transforms_wrap=function(namespace){let ignore=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return node=>{const updateSelector=selector=>ignore.includes(selector.trim())?selector:selector.match(IS_ROOT_TAG)?selector.replace(/^(body|html|:root)/,namespace):namespace+" "+selector;return"rule"===node.type?{...node,selectors:node.selectors.map(updateSelector)}:node}};var transform_styles=function(styles){let wrapperClassName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,lodash.map)(styles,(_ref=>{let{css:css,baseURL:baseURL}=_ref;const transforms=[];return wrapperClassName&&transforms.push(transforms_wrap(wrapperClassName)),baseURL&&transforms.push(url_rewrite(baseURL)),transforms.length?transform_styles_traverse(css,(0,compose.Z)(transforms)):css}))};function useDarkThemeBodyClassName(styles){return(0,react.useCallback)((node=>{if(!node)return;const{ownerDocument:ownerDocument}=node,{defaultView:defaultView,body:body}=ownerDocument,canvas=ownerDocument.querySelector(".editor-styles-wrapper");let backgroundColor;if(canvas)backgroundColor=defaultView.getComputedStyle(canvas,null).getPropertyValue("background-color");else{const tempCanvas=ownerDocument.createElement("div");tempCanvas.classList.add("editor-styles-wrapper"),body.appendChild(tempCanvas),backgroundColor=defaultView.getComputedStyle(tempCanvas,null).getPropertyValue("background-color"),body.removeChild(tempCanvas)}const colordBackgroundColor=(0,colord.Vi)(backgroundColor);colordBackgroundColor.luminance()>.5||0===colordBackgroundColor.alpha()?body.classList.remove("is-dark-theme"):body.classList.add("is-dark-theme")}),[styles])}function EditorStyles(_ref){let{styles:styles}=_ref;const transformedStyles=(0,react.useMemo)((()=>transform_styles(styles,".editor-styles-wrapper")),[styles]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{ref:useDarkThemeBodyClassName(styles)}),transformedStyles.map(((css,index)=>(0,jsx_runtime.jsx)("style",{children:css},index)))]})}function DuotoneStylesheet(_ref){let{selector:selector,id:id}=_ref;const css=`\n${selector} {\n\tfilter: url( #${id} );\n}\n`;return(0,jsx_runtime.jsx)("style",{children:css})}function DuotoneUnsetStylesheet(_ref2){let{selector:selector}=_ref2;const css=`\n${selector} {\n\tfilter: none;\n}\n`;return(0,jsx_runtime.jsx)("style",{children:css})}function DuotoneFilter(_ref3){let{id:id,colors:colors}=_ref3;const values=function getValuesFromColors(){const values={r:[],g:[],b:[],a:[]};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((color=>{const rgbColor=(0,colord.Vi)(color).toRgb();values.r.push(rgbColor.r/255),values.g.push(rgbColor.g/255),values.b.push(rgbColor.b/255),values.a.push(rgbColor.a)})),values}(colors);return(0,jsx_runtime.jsx)(svg.Wj,{xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 0 0",width:"0",height:"0",focusable:"false",role:"none",style:{visibility:"hidden",position:"absolute",left:"-9999px",overflow:"hidden"},children:(0,jsx_runtime.jsx)("defs",{children:(0,jsx_runtime.jsxs)("filter",{id:id,children:[(0,jsx_runtime.jsx)("feColorMatrix",{colorInterpolationFilters:"sRGB",type:"matrix",values:" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "}),(0,jsx_runtime.jsxs)("feComponentTransfer",{colorInterpolationFilters:"sRGB",children:[(0,jsx_runtime.jsx)("feFuncR",{type:"table",tableValues:values.r.join(" ")}),(0,jsx_runtime.jsx)("feFuncG",{type:"table",tableValues:values.g.join(" ")}),(0,jsx_runtime.jsx)("feFuncB",{type:"table",tableValues:values.b.join(" ")}),(0,jsx_runtime.jsx)("feFuncA",{type:"table",tableValues:values.a.join(" ")})]}),(0,jsx_runtime.jsx)("feComposite",{in2:"SourceGraphic",operator:"in"})]})})})}function PresetDuotoneFilter(_ref4){let{preset:preset}=_ref4;return(0,jsx_runtime.jsx)(DuotoneFilter,{id:`wp-duotone-${preset.slug}`,colors:preset.colors})}let MemoizedBlockList;(0,colord.l7)([names.Z,a11y.Z]),EditorStyles.__docgenInfo={description:"",methods:[],displayName:"EditorStyles"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/editor-styles/index.js"]={name:"EditorStyles",docgenInfo:EditorStyles.__docgenInfo,path:"packages/block-editor/src/components/editor-styles/index.js"}),DuotoneStylesheet.displayName="DuotoneStylesheet",DuotoneUnsetStylesheet.displayName="DuotoneUnsetStylesheet",DuotoneFilter.displayName="DuotoneFilter",PresetDuotoneFilter.displayName="PresetDuotoneFilter",DuotoneStylesheet.__docgenInfo={description:"SVG and stylesheet needed for rendering the duotone filter.\n\n@param {Object} props          Duotone props.\n@param {string} props.selector Selector to apply the filter to.\n@param {string} props.id       Unique id for this duotone filter.\n\n@return {WPElement} Duotone element.",methods:[],displayName:"DuotoneStylesheet"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/duotone/components.js"]={name:"DuotoneStylesheet",docgenInfo:DuotoneStylesheet.__docgenInfo,path:"packages/block-editor/src/components/duotone/components.js"}),DuotoneUnsetStylesheet.__docgenInfo={description:"Stylesheet for disabling a global styles duotone filter.\n\n@param {Object} props          Duotone props.\n@param {string} props.selector Selector to disable the filter for.\n\n@return {WPElement} Filter none style element.",methods:[],displayName:"DuotoneUnsetStylesheet"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/duotone/components.js"]={name:"DuotoneUnsetStylesheet",docgenInfo:DuotoneUnsetStylesheet.__docgenInfo,path:"packages/block-editor/src/components/duotone/components.js"}),DuotoneFilter.__docgenInfo={description:"The SVG part of the duotone filter.\n\n@param {Object}   props        Duotone props.\n@param {string}   props.id     Unique id for this duotone filter.\n@param {string[]} props.colors Color strings from dark to light.\n\n@return {WPElement} Duotone SVG.",methods:[],displayName:"DuotoneFilter"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/duotone/components.js"]={name:"DuotoneFilter",docgenInfo:DuotoneFilter.__docgenInfo,path:"packages/block-editor/src/components/duotone/components.js"}),PresetDuotoneFilter.__docgenInfo={description:"SVG from a duotone preset\n\n@param {Object} props        Duotone props.\n@param {Object} props.preset Duotone preset settings.\n\n@return {WPElement} Duotone element.",methods:[],displayName:"PresetDuotoneFilter"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/duotone/components.js"]={name:"PresetDuotoneFilter",docgenInfo:PresetDuotoneFilter.__docgenInfo,path:"packages/block-editor/src/components/duotone/components.js"});function ScaledBlockPreview(_ref){let{viewportWidth:viewportWidth,containerWidth:containerWidth,__experimentalPadding:__experimentalPadding,__experimentalMinHeight:__experimentalMinHeight,__experimentalStyles:__experimentalStyles}=_ref;viewportWidth||(viewportWidth=containerWidth);const[contentResizeListener,{height:contentHeight}]=(0,use_resize_observer.Z)(),{styles:styles,assets:assets,duotone:duotone}=(0,use_select.Z)((select=>{var _settings$__experimen,_settings$__experimen2;const settings=select(store.h).getSettings();return{styles:settings.styles,assets:settings.__unstableResolvedAssets,duotone:null===(_settings$__experimen=settings.__experimentalFeatures)||void 0===_settings$__experimen||null===(_settings$__experimen2=_settings$__experimen.color)||void 0===_settings$__experimen2?void 0:_settings$__experimen2.duotone}}),[]),editorStyles=(0,react.useMemo)((()=>styles?[...styles,...__experimentalStyles,{css:"body{height:auto;overflow:hidden;}",__unstableType:"presets"}]:styles),[styles,__experimentalStyles]),svgFilters=(0,react.useMemo)((()=>{var _duotone$default,_duotone$theme;return[...null!==(_duotone$default=null==duotone?void 0:duotone.default)&&void 0!==_duotone$default?_duotone$default:[],...null!==(_duotone$theme=null==duotone?void 0:duotone.theme)&&void 0!==_duotone$theme?_duotone$theme:[]]}),[duotone]);MemoizedBlockList=MemoizedBlockList||(0,pure.Z)(BlockList);const scale=containerWidth/viewportWidth;return(0,jsx_runtime.jsx)(disabled.Z,{className:"block-editor-block-preview__content",style:{transform:`scale(${scale})`,height:contentHeight*scale,maxHeight:contentHeight>2e3?2e3*scale:void 0,minHeight:__experimentalMinHeight},children:(0,jsx_runtime.jsxs)(iframe,{head:(0,jsx_runtime.jsx)(EditorStyles,{styles:editorStyles}),assets:assets,contentRef:(0,use_ref_effect.Z)((bodyElement=>{const{ownerDocument:{documentElement:documentElement}}=bodyElement;documentElement.classList.add("block-editor-block-preview__content-iframe"),documentElement.style.position="absolute",documentElement.style.width="100%",bodyElement.style.padding=__experimentalPadding+"px",bodyElement.style.boxSizing="border-box",bodyElement.style.position="absolute",bodyElement.style.width="100%"}),[]),"aria-hidden":!0,tabIndex:-1,style:{position:"absolute",width:viewportWidth,height:contentHeight,pointerEvents:"none",maxHeight:2e3,minHeight:0!==scale&&scale<1&&__experimentalMinHeight?__experimentalMinHeight/scale:__experimentalMinHeight},children:[contentResizeListener,svgFilters.map((preset=>(0,jsx_runtime.jsx)(PresetDuotoneFilter,{preset:preset},preset.slug))),(0,jsx_runtime.jsx)(MemoizedBlockList,{renderAppender:!1})]})})}function AutoBlockPreview(props){const[containerResizeListener,{width:containerWidth}]=(0,use_resize_observer.Z)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{position:"relative",width:"100%",height:0},children:containerResizeListener}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-preview__container",children:!!containerWidth&&(0,jsx_runtime.jsx)(ScaledBlockPreview,{...props,containerWidth:containerWidth})})]})}function BlockPreview(_ref){let{blocks:blocks,__experimentalPadding:__experimentalPadding=0,viewportWidth:viewportWidth=1200,__experimentalMinHeight:__experimentalMinHeight,__experimentalStyles:__experimentalStyles=[]}=_ref;const originalSettings=(0,use_select.Z)((select=>select(store.h).getSettings()),[]),settings=(0,react.useMemo)((()=>({...originalSettings,__unstableIsPreviewMode:!0})),[originalSettings]),renderedBlocks=(0,react.useMemo)((()=>Array.isArray(blocks)?blocks:[blocks]),[blocks]);return blocks&&0!==blocks.length?(0,jsx_runtime.jsx)(provider.Z,{value:renderedBlocks,settings:settings,children:(0,jsx_runtime.jsx)(AutoBlockPreview,{viewportWidth:viewportWidth,__experimentalPadding:__experimentalPadding,__experimentalMinHeight:__experimentalMinHeight,__experimentalStyles:__experimentalStyles})}):null}ScaledBlockPreview.displayName="ScaledBlockPreview",AutoBlockPreview.__docgenInfo={description:"",methods:[],displayName:"AutoBlockPreview"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-preview/auto.js"]={name:"AutoBlockPreview",docgenInfo:AutoBlockPreview.__docgenInfo,path:"packages/block-editor/src/components/block-preview/auto.js"}),BlockPreview.displayName="BlockPreview",BlockPreview.__docgenInfo={description:"",methods:[],displayName:"BlockPreview",props:{__experimentalPadding:{defaultValue:{value:"0",computed:!1},required:!1},viewportWidth:{defaultValue:{value:"1200",computed:!1},required:!1},__experimentalStyles:{defaultValue:{value:"[]",computed:!1},required:!1}}};var block_preview=(0,react.memo)(BlockPreview);function InserterPreviewPanel(_ref){var _example$viewportWidt;let{item:item}=_ref;const{name:name,title:title,icon:icon,description:description,initialAttributes:initialAttributes,example:example}=item,isReusable=(0,blocks_build_module.vr)(item);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__preview-container",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview",children:isReusable||example?(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview-content",children:(0,jsx_runtime.jsx)(block_preview,{__experimentalPadding:16,viewportWidth:null!==(_example$viewportWidt=null==example?void 0:example.viewportWidth)&&void 0!==_example$viewportWidt?_example$viewportWidt:500,blocks:example?(0,blocks_build_module.Wf)(name,{attributes:{...example.attributes,...initialAttributes},innerBlocks:example.innerBlocks}):(0,blocks_build_module.j4)(name,initialAttributes)})}):(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview-content-missing",children:(0,build_module.__)("No Preview Available.")})}),!isReusable&&(0,jsx_runtime.jsx)(block_card,{title:title,icon:icon,description:description})]})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/block-preview/index.js"]={name:"BlockPreview",docgenInfo:BlockPreview.__docgenInfo,path:"packages/block-editor/src/components/block-preview/index.js"}),InserterPreviewPanel.displayName="InserterPreviewPanel",InserterPreviewPanel.__docgenInfo={description:"",methods:[],displayName:"InserterPreviewPanel"};var preview_panel=InserterPreviewPanel;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/preview-panel.js"]={name:"InserterPreviewPanel",docgenInfo:InserterPreviewPanel.__docgenInfo,path:"packages/block-editor/src/components/inserter/preview-panel.js"});const block_types_tab_EMPTY_ARRAY=[];function BlockTypesTab(_ref){let{rootClientId:rootClientId,onInsert:onInsert,onHover:onHover,showMostUsedBlocks:showMostUsedBlocks}=_ref;const[items,categories,collections,onSelectItem]=use_block_types_state(rootClientId,onInsert),suggestedItems=(0,react.useMemo)((()=>(0,sorting.X)(items,"frecency","desc").slice(0,6)),[items]),uncategorizedItems=(0,react.useMemo)((()=>items.filter((item=>!item.category))),[items]),itemsPerCategory=(0,react.useMemo)((()=>(0,pipe.Z)((itemList=>itemList.filter((item=>item.category&&"reusable"!==item.category))),(itemList=>(0,lodash.groupBy)(itemList,"category")))(items)),[items]),itemsPerCollection=(0,react.useMemo)((()=>{const result={...collections};return Object.keys(collections).forEach((namespace=>{result[namespace]=items.filter((item=>(item=>item.name.split("/")[0])(item)===namespace)),0===result[namespace].length&&delete result[namespace]})),result}),[items,collections]);(0,react.useEffect)((()=>()=>onHover(null)),[]);const currentlyRenderedCategories=(0,use_async_list.Z)(categories),didRenderAllCategories=categories.length===currentlyRenderedCategories.length,collectionEntries=(0,react.useMemo)((()=>Object.entries(collections)),[collections]),currentlyRenderedCollections=(0,use_async_list.Z)(didRenderAllCategories?collectionEntries:block_types_tab_EMPTY_ARRAY);return(0,jsx_runtime.jsx)(inserter_listbox,{children:(0,jsx_runtime.jsxs)("div",{children:[showMostUsedBlocks&&!!suggestedItems.length&&(0,jsx_runtime.jsx)(panel,{title:(0,build_module._x)("Most used","blocks"),children:(0,jsx_runtime.jsx)(block_types_list,{items:suggestedItems,onSelect:onSelectItem,onHover:onHover,label:(0,build_module._x)("Most used","blocks")})}),(0,lodash.map)(currentlyRenderedCategories,(category=>{const categoryItems=itemsPerCategory[category.slug];return categoryItems&&categoryItems.length?(0,jsx_runtime.jsx)(panel,{title:category.title,icon:category.icon,children:(0,jsx_runtime.jsx)(block_types_list,{items:categoryItems,onSelect:onSelectItem,onHover:onHover,label:category.title})},category.slug):null})),didRenderAllCategories&&uncategorizedItems.length>0&&(0,jsx_runtime.jsx)(panel,{className:"block-editor-inserter__uncategorized-blocks-panel",title:(0,build_module.__)("Uncategorized"),children:(0,jsx_runtime.jsx)(block_types_list,{items:uncategorizedItems,onSelect:onSelectItem,onHover:onHover,label:(0,build_module.__)("Uncategorized")})}),(0,lodash.map)(currentlyRenderedCollections,(_ref2=>{let[namespace,collection]=_ref2;const collectionItems=itemsPerCollection[namespace];return collectionItems&&collectionItems.length?(0,jsx_runtime.jsx)(panel,{title:collection.title,icon:collection.icon,children:(0,jsx_runtime.jsx)(block_types_list,{items:collectionItems,onSelect:onSelectItem,onHover:onHover,label:collection.title})},namespace):null}))]})})}BlockTypesTab.displayName="BlockTypesTab",BlockTypesTab.__docgenInfo={description:"",methods:[],displayName:"BlockTypesTab"};var block_types_tab=BlockTypesTab;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-types-tab.js"]={name:"BlockTypesTab",docgenInfo:BlockTypesTab.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-types-tab.js"});var item_group_component=__webpack_require__("./packages/components/build-module/item-group/item-group/component.js"),item_component=__webpack_require__("./packages/components/build-module/item-group/item/component.js"),flex_block_component=__webpack_require__("./packages/components/build-module/flex/flex-block/component.js");function PatternCategoriesList(_ref){let{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:onClickCategory}=_ref;const baseClassName="block-editor-block-patterns-explorer__sidebar";return(0,jsx_runtime.jsx)("div",{className:`${baseClassName}__categories-list`,children:patternCategories.map((_ref2=>{let{name:name,label:label}=_ref2;return(0,jsx_runtime.jsx)(build_module_button.Z,{label:label,className:`${baseClassName}__categories-list__item`,isPressed:selectedCategory===name,onClick:()=>{onClickCategory(name)},children:label},name)}))})}function PatternsExplorerSearch(_ref3){let{filterValue:filterValue,setFilterValue:setFilterValue}=_ref3;return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-patterns-explorer__search",children:(0,jsx_runtime.jsx)(search_control.Z,{__nextHasNoMarginBottom:!0,onChange:setFilterValue,value:filterValue,label:(0,build_module.__)("Search for patterns"),placeholder:(0,build_module.__)("Search")})})}function PatternExplorerSidebar(_ref4){let{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:onClickCategory,filterValue:filterValue,setFilterValue:setFilterValue}=_ref4;return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer__sidebar",children:[(0,jsx_runtime.jsx)(PatternsExplorerSearch,{filterValue:filterValue,setFilterValue:setFilterValue}),!filterValue&&(0,jsx_runtime.jsx)(PatternCategoriesList,{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:onClickCategory})]})}PatternCategoriesList.displayName="PatternCategoriesList",PatternsExplorerSearch.displayName="PatternsExplorerSearch",PatternExplorerSidebar.displayName="PatternExplorerSidebar",PatternExplorerSidebar.__docgenInfo={description:"",methods:[],displayName:"PatternExplorerSidebar"};var sidebar=PatternExplorerSidebar;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-explorer/sidebar.js"]={name:"PatternExplorerSidebar",docgenInfo:PatternExplorerSidebar.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-explorer/sidebar.js"});var heading_component=__webpack_require__("./packages/components/build-module/heading/component.js");function PatternsListHeader(_ref){let{filterValue:filterValue,filteredBlockPatternsLength:filteredBlockPatternsLength}=_ref;return filterValue?(0,jsx_runtime.jsx)(heading_component.Z,{level:2,lineHeight:"48px",className:"block-editor-block-patterns-explorer__search-results-count",children:(0,build_module.gB)((0,build_module._n)('%1$d pattern found for "%2$s"','%1$d patterns found for "%2$s"',filteredBlockPatternsLength),filteredBlockPatternsLength,filterValue)}):null}function PatternList(_ref2){let{filterValue:filterValue,selectedCategory:selectedCategory,patternCategories:patternCategories}=_ref2;const debouncedSpeak=(0,use_debounce.Z)(a11y_build_module.D,500),[destinationRootClientId,onInsertBlocks]=use_insertion_point({shouldFocusBlock:!0}),[allPatterns,,onSelectBlockPattern]=use_patterns_state(onInsertBlocks,destinationRootClientId),registeredPatternCategories=(0,react.useMemo)((()=>patternCategories.map((patternCategory=>patternCategory.name))),[patternCategories]),filteredBlockPatterns=(0,react.useMemo)((()=>filterValue?searchItems(allPatterns,filterValue):allPatterns.filter((pattern=>{var _pattern$categories,_pattern$categories2;return"uncategorized"===selectedCategory?!(null!==(_pattern$categories=pattern.categories)&&void 0!==_pattern$categories&&_pattern$categories.length)||pattern.categories.every((category=>!registeredPatternCategories.includes(category))):null===(_pattern$categories2=pattern.categories)||void 0===_pattern$categories2?void 0:_pattern$categories2.includes(selectedCategory)}))),[filterValue,selectedCategory,allPatterns]);(0,react.useEffect)((()=>{if(!filterValue)return;const count=filteredBlockPatterns.length,resultsFoundMessage=(0,build_module.gB)((0,build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[filterValue,debouncedSpeak]);const currentShownPatterns=(0,use_async_list.Z)(filteredBlockPatterns,{step:2}),hasItems=!(null==filteredBlockPatterns||!filteredBlockPatterns.length);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer__list",children:[hasItems&&(0,jsx_runtime.jsx)(PatternsListHeader,{filterValue:filterValue,filteredBlockPatternsLength:filteredBlockPatterns.length}),(0,jsx_runtime.jsxs)(inserter_listbox,{children:[!hasItems&&(0,jsx_runtime.jsx)(no_results,{}),hasItems&&(0,jsx_runtime.jsx)(block_patterns_list,{shownPatterns:currentShownPatterns,blockPatterns:filteredBlockPatterns,onClickPattern:onSelectBlockPattern,isDraggable:!1})]})]})}PatternsListHeader.displayName="PatternsListHeader",PatternList.displayName="PatternList",PatternList.__docgenInfo={description:"",methods:[],displayName:"PatternList"};var patterns_list=PatternList;function PatternsExplorer(_ref){let{initialCategory:initialCategory,patternCategories:patternCategories}=_ref;const[filterValue,setFilterValue]=(0,react.useState)(""),[selectedCategory,setSelectedCategory]=(0,react.useState)(null==initialCategory?void 0:initialCategory.name);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer",children:[(0,jsx_runtime.jsx)(sidebar,{selectedCategory:selectedCategory,patternCategories:patternCategories,onClickCategory:setSelectedCategory,filterValue:filterValue,setFilterValue:setFilterValue}),(0,jsx_runtime.jsx)(patterns_list,{filterValue:filterValue,selectedCategory:selectedCategory,patternCategories:patternCategories})]})}function PatternsExplorerModal(_ref2){let{onModalClose:onModalClose,...restProps}=_ref2;return(0,jsx_runtime.jsx)(modal.Z,{title:(0,build_module.__)("Patterns"),closeLabel:(0,build_module.__)("Close"),onRequestClose:onModalClose,isFullScreen:!0,children:(0,jsx_runtime.jsx)(PatternsExplorer,{...restProps})})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-explorer/patterns-list.js"]={name:"PatternList",docgenInfo:PatternList.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-explorer/patterns-list.js"}),PatternsExplorer.displayName="PatternsExplorer",PatternsExplorerModal.displayName="PatternsExplorerModal",PatternsExplorerModal.__docgenInfo={description:"",methods:[],displayName:"PatternsExplorerModal"};var explorer=PatternsExplorerModal;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-explorer/explorer.js"]={name:"PatternsExplorerModal",docgenInfo:PatternsExplorerModal.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-explorer/explorer.js"});var view_component=__webpack_require__("./packages/components/build-module/view/component.js"),spacer_component=__webpack_require__("./packages/components/build-module/spacer/component.js"),navigator_back_button_component=__webpack_require__("./packages/components/build-module/navigator/navigator-back-button/component.js"),navigator_provider_component=__webpack_require__("./packages/components/build-module/navigator/navigator-provider/component.js"),navigator_screen_component=__webpack_require__("./packages/components/build-module/navigator/navigator-screen/component.js"),navigator_button_component=__webpack_require__("./packages/components/build-module/navigator/navigator-button/component.js");function ScreenHeader(_ref){let{title:title}=_ref;return(0,jsx_runtime.jsx)(v_stack_component.Z,{spacing:0,children:(0,jsx_runtime.jsx)(view_component.Z,{children:(0,jsx_runtime.jsx)(spacer_component.Z,{marginBottom:0,paddingX:4,paddingY:3,children:(0,jsx_runtime.jsxs)(h_stack_component.Z,{spacing:2,children:[(0,jsx_runtime.jsx)(navigator_back_button_component.Z,{style:{minWidth:24,padding:0},icon:(0,build_module.dZ)()?chevron_right.Z:chevron_left.Z,isSmall:!0,"aria-label":(0,build_module.__)("Navigate to the previous view")}),(0,jsx_runtime.jsx)(spacer_component.Z,{children:(0,jsx_runtime.jsx)(heading_component.Z,{level:5,children:title})})]})})})})}function MobileTabNavigation(_ref2){let{categories:categories,children:children}=_ref2;return(0,jsx_runtime.jsxs)(navigator_provider_component.Z,{initialPath:"/",className:"block-editor-inserter__mobile-tab-navigation",children:[(0,jsx_runtime.jsx)(navigator_screen_component.Z,{path:"/",children:(0,jsx_runtime.jsx)(item_group_component.Z,{children:categories.map((category=>(0,jsx_runtime.jsx)(navigator_button_component.Z,{path:`/category/${category.name}`,as:item_component.Z,isAction:!0,children:(0,jsx_runtime.jsxs)(h_stack_component.Z,{children:[(0,jsx_runtime.jsx)(flex_block_component.Z,{children:category.label}),(0,jsx_runtime.jsx)(icon.Z,{icon:(0,build_module.dZ)()?chevron_left.Z:chevron_right.Z})]})},category.name)))})}),categories.map((category=>(0,jsx_runtime.jsxs)(navigator_screen_component.Z,{path:`/category/${category.name}`,children:[(0,jsx_runtime.jsx)(ScreenHeader,{title:(0,build_module.__)("Back")}),children(category)]},category.name)))]})}function usePatternsCategories(){const[allPatterns,allCategories]=use_patterns_state(),hasRegisteredCategory=(0,react.useCallback)((pattern=>!(!pattern.categories||!pattern.categories.length)&&pattern.categories.some((cat=>allCategories.some((category=>category.name===cat))))),[allCategories]);return(0,react.useMemo)((()=>{const categories=allCategories.filter((category=>allPatterns.some((pattern=>{var _pattern$categories;return null===(_pattern$categories=pattern.categories)||void 0===_pattern$categories?void 0:_pattern$categories.includes(category.name)})))).sort(((_ref,_ref2)=>{let{name:currentName}=_ref,{name:nextName}=_ref2;return[currentName,nextName].some((categoryName=>["featured","text"].includes(categoryName)))?"featured"===currentName||"text"===nextName?-1:1:0}));return allPatterns.some((pattern=>!hasRegisteredCategory(pattern)))&&!categories.find((category=>"uncategorized"===category.name))&&categories.push({name:"uncategorized",label:(0,build_module._x)("Uncategorized")}),categories}),[allPatterns,allCategories])}function BlockPatternsCategoryDialog(_ref3){let{rootClientId:rootClientId,onInsert:onInsert,category:category,showTitlesAsTooltip:showTitlesAsTooltip}=_ref3;const container=(0,react.useRef)();return(0,react.useEffect)((()=>{const timeout=setTimeout((()=>{const[firstTabbable]=dom_build_module.T_.tabbable.find(container.current);null==firstTabbable||firstTabbable.focus()}));return()=>clearTimeout(timeout)}),[category]),(0,jsx_runtime.jsx)("div",{ref:container,className:"block-editor-inserter__patterns-category-dialog",children:(0,jsx_runtime.jsx)(BlockPatternsCategoryPanel,{rootClientId:rootClientId,onInsert:onInsert,category:category,showTitlesAsTooltip:showTitlesAsTooltip})})}function BlockPatternsCategoryPanel(_ref4){let{rootClientId:rootClientId,onInsert:onInsert,category:category,showTitlesAsTooltip:showTitlesAsTooltip}=_ref4;const[allPatterns,,onClick]=use_patterns_state(onInsert,rootClientId),availableCategories=usePatternsCategories(),currentCategoryPatterns=(0,react.useMemo)((()=>allPatterns.filter((pattern=>{var _pattern$categories$f,_pattern$categories3,_pattern$categories2;if("uncategorized"!==category.name)return null===(_pattern$categories2=pattern.categories)||void 0===_pattern$categories2?void 0:_pattern$categories2.includes(category.name);return 0===(null!==(_pattern$categories$f=null===(_pattern$categories3=pattern.categories)||void 0===_pattern$categories3?void 0:_pattern$categories3.filter((cat=>availableCategories.find((availableCategory=>availableCategory.name===cat)))))&&void 0!==_pattern$categories$f?_pattern$categories$f:[]).length}))),[allPatterns,category]),currentShownPatterns=(0,use_async_list.Z)(currentCategoryPatterns);return currentCategoryPatterns.length?(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__patterns-category-panel",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__patterns-category-panel-title",children:category.label}),(0,jsx_runtime.jsx)("p",{children:category.description}),(0,jsx_runtime.jsx)(block_patterns_list,{shownPatterns:currentShownPatterns,blockPatterns:currentCategoryPatterns,onClickPattern:onClick,label:category.label,orientation:"vertical",category:category.label,isDraggable:!0,showTitlesAsTooltip:showTitlesAsTooltip})]}):null}function BlockPatternsTabs(_ref5){let{onSelectCategory:onSelectCategory,selectedCategory:selectedCategory,onInsert:onInsert,rootClientId:rootClientId}=_ref5;const[showPatternsExplorer,setShowPatternsExplorer]=(0,react.useState)(!1),categories=usePatternsCategories(),isMobile=(0,use_viewport_match.Z)("medium","<");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isMobile&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__block-patterns-tabs-container",children:(0,jsx_runtime.jsx)("nav",{"aria-label":(0,build_module.__)("Block pattern categories"),children:(0,jsx_runtime.jsxs)(item_group_component.Z,{role:"list",className:"block-editor-inserter__block-patterns-tabs",children:[categories.map((category=>(0,jsx_runtime.jsx)(item_component.Z,{role:"listitem",onClick:()=>onSelectCategory(category),className:category===selectedCategory?"block-editor-inserter__patterns-category block-editor-inserter__patterns-selected-category":"block-editor-inserter__patterns-category","aria-label":category.label,"aria-current":category===selectedCategory?"true":void 0,children:(0,jsx_runtime.jsxs)(h_stack_component.Z,{children:[(0,jsx_runtime.jsx)(flex_block_component.Z,{children:category.label}),(0,jsx_runtime.jsx)(icon.Z,{icon:chevron_right.Z})]})},category.name))),(0,jsx_runtime.jsx)("div",{role:"listitem",children:(0,jsx_runtime.jsx)(build_module_button.Z,{className:"block-editor-inserter__patterns-explore-button",onClick:()=>setShowPatternsExplorer(!0),variant:"secondary",children:(0,build_module.__)("Explore all patterns")})})]})})}),isMobile&&(0,jsx_runtime.jsx)(MobileTabNavigation,{categories:categories,children:category=>(0,jsx_runtime.jsx)(BlockPatternsCategoryPanel,{onInsert:onInsert,rootClientId:rootClientId,category:category,showTitlesAsTooltip:!1})}),showPatternsExplorer&&(0,jsx_runtime.jsx)(explorer,{initialCategory:selectedCategory,patternCategories:categories,onModalClose:()=>setShowPatternsExplorer(!1)})]})}ScreenHeader.displayName="ScreenHeader",MobileTabNavigation.displayName="MobileTabNavigation",MobileTabNavigation.__docgenInfo={description:"",methods:[],displayName:"MobileTabNavigation"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/mobile-tab-navigation.js"]={name:"MobileTabNavigation",docgenInfo:MobileTabNavigation.__docgenInfo,path:"packages/block-editor/src/components/inserter/mobile-tab-navigation.js"}),BlockPatternsCategoryDialog.displayName="BlockPatternsCategoryDialog",BlockPatternsCategoryPanel.displayName="BlockPatternsCategoryPanel",BlockPatternsTabs.__docgenInfo={description:"",methods:[],displayName:"BlockPatternsTabs"};var block_patterns_tab=BlockPatternsTabs;BlockPatternsCategoryDialog.__docgenInfo={description:"",methods:[],displayName:"BlockPatternsCategoryDialog"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-tab.js"]={name:"BlockPatternsCategoryDialog",docgenInfo:BlockPatternsCategoryDialog.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-tab.js"}),BlockPatternsCategoryPanel.__docgenInfo={description:"",methods:[],displayName:"BlockPatternsCategoryPanel"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-tab.js"]={name:"BlockPatternsCategoryPanel",docgenInfo:BlockPatternsCategoryPanel.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-tab.js"}),"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/block-patterns-tab.js"]={name:"BlockPatternsTabs",docgenInfo:BlockPatternsTabs.__docgenInfo,path:"packages/block-editor/src/components/inserter/block-patterns-tab.js"});var add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js");function ReusableBlocksList(_ref){let{onHover:onHover,onInsert:onInsert,rootClientId:rootClientId}=_ref;const[items,,,onSelectItem]=use_block_types_state(rootClientId,onInsert),filteredItems=(0,react.useMemo)((()=>items.filter((_ref2=>{let{category:category}=_ref2;return"reusable"===category}))),[items]);return 0===filteredItems.length?(0,jsx_runtime.jsx)(no_results,{}):(0,jsx_runtime.jsx)(panel,{title:(0,build_module.__)("Reusable blocks"),children:(0,jsx_runtime.jsx)(block_types_list,{items:filteredItems,onSelect:onSelectItem,onHover:onHover,label:(0,build_module.__)("Reusable blocks")})})}function ReusableBlocksTab(_ref3){let{rootClientId:rootClientId,onInsert:onInsert,onHover:onHover}=_ref3;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ReusableBlocksList,{onHover:onHover,onInsert:onInsert,rootClientId:rootClientId}),(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__manage-reusable-blocks-container",children:(0,jsx_runtime.jsx)(build_module_button.Z,{className:"block-editor-inserter__manage-reusable-blocks",variant:"secondary",href:(0,add_query_args.f)("edit.php",{post_type:"wp_block"}),children:(0,build_module.__)("Manage Reusable blocks")})})]})}ReusableBlocksList.displayName="ReusableBlocksList",ReusableBlocksTab.__docgenInfo={description:'List of reusable blocks shown in the "Reusable" tab of the inserter.\n\n@param {Object}   props              Component props.\n@param {?string}  props.rootClientId Client id of block to insert into.\n@param {Function} props.onInsert     Callback to run when item is inserted.\n@param {Function} props.onHover      Callback to run when item is hovered.\n\n@return {WPComponent} The component.',methods:[],displayName:"ReusableBlocksTab"};var reusable_blocks_tab=ReusableBlocksTab;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/reusable-blocks-tab.js"]={name:"ReusableBlocksTab",docgenInfo:ReusableBlocksTab.__docgenInfo,path:"packages/block-editor/src/components/inserter/reusable-blocks-tab.js"});const MEDIA_CATEGORIES=[{label:(0,build_module.__)("Images"),name:"images",mediaType:"image"},{label:(0,build_module.__)("Videos"),name:"videos",mediaType:"video"},{label:(0,build_module.__)("Audio"),name:"audio",mediaType:"audio"}];function useMediaCategories(rootClientId){const[categories,setCategories]=(0,react.useState)([]),{canInsertImage:canInsertImage,canInsertVideo:canInsertVideo,canInsertAudio:canInsertAudio,fetchMedia:fetchMedia}=(0,use_select.Z)((select=>{const{canInsertBlockType:canInsertBlockType,getSettings:getSettings}=select(store.h);return{fetchMedia:getSettings().__unstableFetchMedia,canInsertImage:canInsertBlockType("core/image",rootClientId),canInsertVideo:canInsertBlockType("core/video",rootClientId),canInsertAudio:canInsertBlockType("core/audio",rootClientId)}}),[rootClientId]);return(0,react.useEffect)((()=>{(async()=>{if(!fetchMedia)return;const query={context:"view",per_page:1,_fields:["id"]},[image,video,audio]=await Promise.all([fetchMedia({...query,media_type:"image"}),fetchMedia({...query,media_type:"video"}),fetchMedia({...query,media_type:"audio"})]),showImage=canInsertImage&&!!image.length,showVideo=canInsertVideo&&!!video.length,showAudio=canInsertAudio&&!!audio.length;setCategories(MEDIA_CATEGORIES.filter((_ref=>{let{mediaType:mediaType}=_ref;return"image"===mediaType&&showImage||"video"===mediaType&&showVideo||"audio"===mediaType&&showAudio})))})()}),[canInsertImage,canInsertVideo,canInsertAudio,fetchMedia]),categories}var spinner=__webpack_require__("./packages/components/build-module/spinner/index.js");const mediaTypeTag={image:"img",video:"video",audio:"audio"};function getBlockAndPreviewFromMedia(media,mediaType){var _media$caption;const attributes={id:media.id},mediaSrc=media.source_url||media.url,alt=media.alt_text||media.alt||void 0,caption=(null===(_media$caption=media.caption)||void 0===_media$caption?void 0:_media$caption.raw)||media.caption;caption&&"string"==typeof caption&&(attributes.caption=caption),"image"===mediaType?(attributes.url=mediaSrc,attributes.alt=alt):["video","audio"].includes(mediaType)&&(attributes.src=mediaSrc);const PreviewTag=mediaTypeTag[mediaType],preview=(0,jsx_runtime.jsx)(PreviewTag,{src:mediaSrc,alt:alt,controls:"audio"===mediaType||void 0,inert:"true"});return[(0,blocks_build_module.j4)(`core/${mediaType}`,attributes),preview]}function MediaPreview(_ref){var _media$title;let{media:media,onClick:onClick,composite:composite,mediaType:mediaType}=_ref;const[block,preview]=(0,react.useMemo)((()=>getBlockAndPreviewFromMedia(media,mediaType)),[media,mediaType]),title=(null===(_media$title=media.title)||void 0===_media$title?void 0:_media$title.rendered)||media.title,baseCssClass="block-editor-inserter__media-list";return(0,jsx_runtime.jsx)(inserter_draggable_blocks,{isEnabled:!0,blocks:[block],children:_ref2=>{let{draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd}=_ref2;return(0,jsx_runtime.jsx)("div",{className:`${baseCssClass}__list-item`,draggable:draggable,onDragStart:onDragStart,onDragEnd:onDragEnd,children:(0,jsx_runtime.jsx)(tooltip.Z,{text:title,children:(0,jsx_runtime.jsx)(CompositeItem.A,{role:"option",as:"div",...composite,className:`${baseCssClass}__item`,onClick:()=>{onClick(block)},"aria-label":title,children:(0,jsx_runtime.jsx)("div",{className:`${baseCssClass}__item-preview`,children:preview})})})})}})}function MediaList(_ref3){let{mediaList:mediaList,mediaType:mediaType,onClick:onClick,label:label=(0,build_module.__)("Media List")}=_ref3;const composite=(0,CompositeState.u)(),onPreviewClick=(0,react.useCallback)((block=>{onClick((0,blocks_build_module.Wm)(block))}),[onClick]);return(0,jsx_runtime.jsx)(Composite.b,{...composite,role:"listbox",className:"block-editor-inserter__media-list","aria-label":label,children:mediaList.map((media=>(0,jsx_runtime.jsx)(MediaPreview,{media:media,mediaType:mediaType,onClick:onPreviewClick,composite:composite},media.id)))})}MediaPreview.displayName="MediaPreview",MediaList.displayName="MediaList",MediaList.__docgenInfo={description:"",methods:[],displayName:"MediaList",props:{label:{defaultValue:{value:"__( 'Media List' )",computed:!0},required:!1}}};var media_list=MediaList;function useDebouncedInput(){let defaultValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[input,setInput]=(0,react.useState)(defaultValue),[debounced,setter]=(0,react.useState)(defaultValue),setDebounced=(0,use_debounce.Z)(setter,250);return(0,react.useEffect)((()=>{debounced!==input&&setDebounced(input)}),[debounced,input]),[input,setInput,debounced]}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/media-tab/media-list.js"]={name:"MediaList",docgenInfo:MediaList.__docgenInfo,path:"packages/block-editor/src/components/inserter/media-tab/media-list.js"});function MediaCategoryDialog(_ref){let{rootClientId:rootClientId,onInsert:onInsert,category:category}=_ref;const container=(0,react.useRef)();return(0,react.useEffect)((()=>{const timeout=setTimeout((()=>{const[firstTabbable]=dom_build_module.T_.tabbable.find(container.current);null==firstTabbable||firstTabbable.focus()}));return()=>clearTimeout(timeout)}),[category]),(0,jsx_runtime.jsx)("div",{ref:container,className:"block-editor-inserter__media-dialog",children:(0,jsx_runtime.jsx)(MediaCategoryPanel,{rootClientId:rootClientId,onInsert:onInsert,category:category})})}function MediaCategoryPanel(_ref2){let{rootClientId:rootClientId,onInsert:onInsert,category:category}=_ref2;const[search,setSearch,debouncedSearch]=useDebouncedInput(),mediaList=function useMediaResults(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[results,setResults]=(0,react.useState)(),settings=(0,use_select.Z)((select=>select(store.h).getSettings()),[]);return(0,react.useEffect)((()=>{(async()=>{setResults();const _media=await(null==settings?void 0:settings.__unstableFetchMedia(options));_media&&setResults(_media)})()}),Object.values(options)),results}({per_page:debouncedSearch?20:10,media_type:category.mediaType,search:debouncedSearch,orderBy:debouncedSearch?"relevance":"date"}),baseCssClass="block-editor-inserter__media-panel";return(0,jsx_runtime.jsxs)("div",{className:baseCssClass,children:[(0,jsx_runtime.jsx)(search_control.Z,{className:`${baseCssClass}-search`,onChange:setSearch,value:search,label:(0,build_module.gB)((0,build_module.__)("Search %s"),category.label.toLocaleLowerCase()),placeholder:(0,build_module.gB)((0,build_module.__)("Search %s"),category.label.toLocaleLowerCase())}),!mediaList&&(0,jsx_runtime.jsx)("div",{className:`${baseCssClass}-spinner`,children:(0,jsx_runtime.jsx)(spinner.ZP,{})}),Array.isArray(mediaList)&&!mediaList.length&&(0,jsx_runtime.jsx)(no_results,{}),!(null==mediaList||!mediaList.length)&&(0,jsx_runtime.jsx)(media_list,{rootClientId:rootClientId,onClick:onInsert,mediaList:mediaList,mediaType:category.mediaType})]})}MediaCategoryDialog.displayName="MediaCategoryDialog",MediaCategoryPanel.displayName="MediaCategoryPanel",MediaCategoryDialog.__docgenInfo={description:"",methods:[],displayName:"MediaCategoryDialog"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/media-tab/media-panel.js"]={name:"MediaCategoryDialog",docgenInfo:MediaCategoryDialog.__docgenInfo,path:"packages/block-editor/src/components/inserter/media-tab/media-panel.js"}),MediaCategoryPanel.__docgenInfo={description:"",methods:[],displayName:"MediaCategoryPanel"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/media-tab/media-panel.js"]={name:"MediaCategoryPanel",docgenInfo:MediaCategoryPanel.__docgenInfo,path:"packages/block-editor/src/components/inserter/media-tab/media-panel.js"});var media_upload_check=function MediaUploadCheck(_ref){let{fallback:fallback=null,children:children}=_ref;return(0,use_select.Z)((select=>{const{getSettings:getSettings}=select(store.h);return!!getSettings().mediaUpload}),[])?children:fallback};var media_upload=(0,with_filters.Z)("editor.MediaUpload")((()=>null));const ALLOWED_MEDIA_TYPES=["image","video","audio"];function MediaTab(_ref){let{rootClientId:rootClientId,selectedCategory:selectedCategory,onSelectCategory:onSelectCategory,onInsert:onInsert}=_ref;const mediaCategories=useMediaCategories(rootClientId),isMobile=(0,use_viewport_match.Z)("medium","<"),baseCssClass="block-editor-inserter__media-tabs",onSelectMedia=(0,react.useCallback)((media=>{if(null==media||!media.url)return;const[block]=getBlockAndPreviewFromMedia(media,media.type);onInsert(block)}),[onInsert]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isMobile&&(0,jsx_runtime.jsx)("div",{className:`${baseCssClass}-container`,children:(0,jsx_runtime.jsx)("nav",{"aria-label":(0,build_module.__)("Media categories"),children:(0,jsx_runtime.jsxs)(item_group_component.Z,{role:"list",className:baseCssClass,children:[mediaCategories.map((mediaCategory=>(0,jsx_runtime.jsx)(item_component.Z,{role:"listitem",onClick:()=>onSelectCategory(mediaCategory),className:classnames_default()(`${baseCssClass}__media-category`,{"is-selected":selectedCategory===mediaCategory}),"aria-label":mediaCategory.label,"aria-current":mediaCategory===selectedCategory?"true":void 0,children:(0,jsx_runtime.jsxs)(h_stack_component.Z,{children:[(0,jsx_runtime.jsx)(flex_block_component.Z,{children:mediaCategory.label}),(0,jsx_runtime.jsx)(icon.Z,{icon:chevron_right.Z})]})},mediaCategory.name))),(0,jsx_runtime.jsx)("div",{role:"listitem",children:(0,jsx_runtime.jsx)(media_upload_check,{children:(0,jsx_runtime.jsx)(media_upload,{multiple:!1,onSelect:onSelectMedia,allowedTypes:ALLOWED_MEDIA_TYPES,render:_ref2=>{let{open:open}=_ref2;return(0,jsx_runtime.jsx)(build_module_button.Z,{onClick:event=>{event.target.focus(),open()},className:"block-editor-inserter__media-library-button",variant:"secondary","data-unstable-ignore-focus-outside-for-relatedtarget":".media-modal",children:(0,build_module.__)("Open Media Library")})}})})})]})})}),isMobile&&(0,jsx_runtime.jsx)(MobileTabNavigation,{categories:mediaCategories,children:category=>(0,jsx_runtime.jsx)(MediaCategoryPanel,{onInsert:onInsert,rootClientId:rootClientId,category:category})})]})}MediaTab.__docgenInfo={description:"",methods:[],displayName:"MediaTab"};var media_tab=MediaTab;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/media-tab/media-tab.js"]={name:"MediaTab",docgenInfo:MediaTab.__docgenInfo,path:"packages/block-editor/src/components/inserter/media-tab/media-tab.js"});var symbol=__webpack_require__("./packages/icons/build-module/library/symbol.js"),tab_panel=__webpack_require__("./packages/components/build-module/tab-panel/index.js");const blocksTab={name:"blocks",title:(0,build_module.__)("Blocks")},patternsTab={name:"patterns",title:(0,build_module.__)("Patterns")},reusableBlocksTab={name:"reusable",title:(0,build_module.__)("Reusable"),icon:symbol.Z},mediaTab={name:"media",title:(0,build_module.__)("Media")};function InserterTabs(_ref){let{children:children,showPatterns:showPatterns=!1,showReusableBlocks:showReusableBlocks=!1,showMedia:showMedia=!1,onSelect:onSelect,prioritizePatterns:prioritizePatterns}=_ref;const tabs=(0,react.useMemo)((()=>{const tempTabs=[];return prioritizePatterns&&showPatterns&&tempTabs.push(patternsTab),tempTabs.push(blocksTab),!prioritizePatterns&&showPatterns&&tempTabs.push(patternsTab),showMedia&&tempTabs.push(mediaTab),showReusableBlocks&&tempTabs.push(reusableBlocksTab),tempTabs}),[prioritizePatterns,blocksTab,showPatterns,patternsTab,showReusableBlocks,showMedia,reusableBlocksTab]);return(0,jsx_runtime.jsx)(tab_panel.Z,{className:"block-editor-inserter__tabs",tabs:tabs,onSelect:onSelect,children:children})}InserterTabs.displayName="InserterTabs",InserterTabs.__docgenInfo={description:"",methods:[],displayName:"InserterTabs",props:{showPatterns:{defaultValue:{value:"false",computed:!1},required:!1},showReusableBlocks:{defaultValue:{value:"false",computed:!1},required:!1},showMedia:{defaultValue:{value:"false",computed:!1},required:!1}}};var tabs=InserterTabs;function InserterMenu(_ref,ref){let{rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,__experimentalInsertionIndex:__experimentalInsertionIndex,onSelect:onSelect,showInserterHelpPanel:showInserterHelpPanel,showMostUsedBlocks:showMostUsedBlocks,__experimentalFilterValue:__experimentalFilterValue="",shouldFocusBlock:shouldFocusBlock=!0,prioritizePatterns:prioritizePatterns}=_ref;const[filterValue,setFilterValue,delayedFilterValue]=useDebouncedInput(__experimentalFilterValue),[hoveredItem,setHoveredItem]=(0,react.useState)(null),[selectedPatternCategory,setSelectedPatternCategory]=(0,react.useState)(null),[selectedMediaCategory,setSelectedMediaCategory]=(0,react.useState)(null),[selectedTab,setSelectedTab]=(0,react.useState)(null),[destinationRootClientId,onInsertBlocks,onToggleInsertionPoint]=use_insertion_point({rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,insertionIndex:__experimentalInsertionIndex,shouldFocusBlock:shouldFocusBlock}),{showPatterns:showPatterns,hasReusableBlocks:hasReusableBlocks}=(0,use_select.Z)((select=>{var _getSettings$__experi;const{__experimentalGetAllowedPatterns:__experimentalGetAllowedPatterns,getSettings:getSettings}=select(store.h);return{showPatterns:!!__experimentalGetAllowedPatterns(destinationRootClientId).length,hasReusableBlocks:!(null===(_getSettings$__experi=getSettings().__experimentalReusableBlocks)||void 0===_getSettings$__experi||!_getSettings$__experi.length)}}),[destinationRootClientId]),showMedia=!!useMediaCategories(destinationRootClientId).length,onInsert=(0,react.useCallback)(((blocks,meta,shouldForceFocusBlock)=>{onInsertBlocks(blocks,meta,shouldForceFocusBlock),onSelect()}),[onInsertBlocks,onSelect]),onInsertPattern=(0,react.useCallback)(((blocks,patternName)=>{onInsertBlocks(blocks,{patternName:patternName}),onSelect()}),[onInsertBlocks,onSelect]),onHover=(0,react.useCallback)((item=>{onToggleInsertionPoint(!!item),setHoveredItem(item)}),[onToggleInsertionPoint,setHoveredItem]),onClickPatternCategory=(0,react.useCallback)((patternCategory=>{setSelectedPatternCategory(patternCategory)}),[setSelectedPatternCategory]),blocksTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__block-list",children:(0,jsx_runtime.jsx)(block_types_tab,{rootClientId:destinationRootClientId,onInsert:onInsert,onHover:onHover,showMostUsedBlocks:showMostUsedBlocks})}),showInserterHelpPanel&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__tips",children:[(0,jsx_runtime.jsx)(component.Z,{as:"h2",children:(0,build_module.__)("A tip for using the block editor")}),(0,jsx_runtime.jsx)(tips,{})]})]})),[destinationRootClientId,onInsert,onHover,delayedFilterValue,showMostUsedBlocks,showInserterHelpPanel]),patternsTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(block_patterns_tab,{rootClientId:destinationRootClientId,onInsert:onInsertPattern,onSelectCategory:onClickPatternCategory,selectedCategory:selectedPatternCategory})),[destinationRootClientId,onInsertPattern,onClickPatternCategory,selectedPatternCategory]),reusableBlocksTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(reusable_blocks_tab,{rootClientId:destinationRootClientId,onInsert:onInsert,onHover:onHover})),[destinationRootClientId,onInsert,onHover]),mediaTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(media_tab,{rootClientId:destinationRootClientId,selectedCategory:selectedMediaCategory,onSelectCategory:setSelectedMediaCategory,onInsert:onInsert})),[destinationRootClientId,onInsert,selectedMediaCategory,setSelectedMediaCategory]),getCurrentTab=(0,react.useCallback)((tab=>"blocks"===tab.name?blocksTab:"patterns"===tab.name?patternsTab:"reusable"===tab.name?reusableBlocksTab:"media"===tab.name?mediaTab:void 0),[blocksTab,patternsTab,reusableBlocksTab,mediaTab]),searchRef=(0,react.useRef)();(0,react.useImperativeHandle)(ref,(()=>({focusSearch:()=>{searchRef.current.focus()}})));const showPatternPanel="patterns"===selectedTab&&!delayedFilterValue&&selectedPatternCategory,showAsTabs=!delayedFilterValue&&(showPatterns||hasReusableBlocks||showMedia),showMediaPanel="media"===selectedTab&&!delayedFilterValue&&selectedMediaCategory;return(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__menu",children:[(0,jsx_runtime.jsxs)("div",{className:classnames_default()("block-editor-inserter__main-area",{"show-as-tabs":showAsTabs}),children:[(0,jsx_runtime.jsx)(search_control.Z,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",onChange:value=>{hoveredItem&&setHoveredItem(null),setFilterValue(value)},value:filterValue,label:(0,build_module.__)("Search for blocks and patterns"),placeholder:(0,build_module.__)("Search"),ref:searchRef}),!!delayedFilterValue&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__no-tab-container",children:(0,jsx_runtime.jsx)(search_results,{filterValue:delayedFilterValue,onSelect:onSelect,onHover:onHover,rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,__experimentalInsertionIndex:__experimentalInsertionIndex,showBlockDirectory:!0,shouldFocusBlock:shouldFocusBlock})}),showAsTabs&&(0,jsx_runtime.jsx)(tabs,{showPatterns:showPatterns,showReusableBlocks:hasReusableBlocks,showMedia:showMedia,prioritizePatterns:prioritizePatterns,onSelect:setSelectedTab,children:getCurrentTab}),!delayedFilterValue&&!showAsTabs&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__no-tab-container",children:blocksTab})]}),showMediaPanel&&(0,jsx_runtime.jsx)(MediaCategoryDialog,{rootClientId:destinationRootClientId,onInsert:onInsert,category:selectedMediaCategory}),showInserterHelpPanel&&hoveredItem&&(0,jsx_runtime.jsx)(preview_panel,{item:hoveredItem}),showPatternPanel&&(0,jsx_runtime.jsx)(BlockPatternsCategoryDialog,{rootClientId:destinationRootClientId,onInsert:onInsertPattern,category:selectedPatternCategory,showTitlesAsTooltip:!0})]})}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/tabs.js"]={name:"InserterTabs",docgenInfo:InserterTabs.__docgenInfo,path:"packages/block-editor/src/components/inserter/tabs.js"}),InserterMenu.displayName="InserterMenu",InserterMenu.__docgenInfo={description:"",methods:[],displayName:"InserterMenu",props:{__experimentalFilterValue:{defaultValue:{value:"''",computed:!1},required:!1},shouldFocusBlock:{defaultValue:{value:"true",computed:!1},required:!1}}};var inserter_menu=(0,react.forwardRef)(InserterMenu);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/menu.js"]={name:"InserterMenu",docgenInfo:InserterMenu.__docgenInfo,path:"packages/block-editor/src/components/inserter/menu.js"});const library_noop=()=>{};function InserterLibrary(_ref,ref){let{rootClientId:rootClientId,clientId:clientId,isAppender:isAppender,showInserterHelpPanel:showInserterHelpPanel,showMostUsedBlocks:showMostUsedBlocks=!1,__experimentalInsertionIndex:__experimentalInsertionIndex,__experimentalFilterValue:__experimentalFilterValue,onSelect:onSelect=library_noop,shouldFocusBlock:shouldFocusBlock=!1}=_ref;const{destinationRootClientId:destinationRootClientId,prioritizePatterns:prioritizePatterns}=(0,use_select.Z)((select=>{const{getBlockRootClientId:getBlockRootClientId,getSettings:getSettings}=select(store.h);return{destinationRootClientId:rootClientId||getBlockRootClientId(clientId)||void 0,prioritizePatterns:getSettings().__experimentalPreferPatternsOnRoot}}),[clientId,rootClientId]);return(0,jsx_runtime.jsx)(inserter_menu,{onSelect:onSelect,rootClientId:destinationRootClientId,clientId:clientId,isAppender:isAppender,showInserterHelpPanel:showInserterHelpPanel,showMostUsedBlocks:showMostUsedBlocks,__experimentalInsertionIndex:__experimentalInsertionIndex,__experimentalFilterValue:__experimentalFilterValue,shouldFocusBlock:shouldFocusBlock,prioritizePatterns:prioritizePatterns,ref:ref})}InserterLibrary.displayName="InserterLibrary",InserterLibrary.__docgenInfo={description:"",methods:[],displayName:"InserterLibrary",props:{showMostUsedBlocks:{defaultValue:{value:"false",computed:!1},required:!1},onSelect:{defaultValue:{value:"() => {}",computed:!1},required:!1},shouldFocusBlock:{defaultValue:{value:"false",computed:!1},required:!1}}};var library=(0,react.forwardRef)(InserterLibrary);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/library.js"]={name:"InserterLibrary",docgenInfo:InserterLibrary.__docgenInfo,path:"packages/block-editor/src/components/inserter/library.js"});const patterns=[{categories:["featured","text"],content:'\x3c!-- wp:heading {"align":"wide","style":{"typography":{"fontSize":"48px","lineHeight":"1.1"}}} --\x3e\n<h2 class="alignwide" id="we-re-a-studio-in-berlin-with-an-international-practice-in-architecture-urban-planning-and-interior-design-we-believe-in-sharing-knowledge-and-promoting-dialogue-to-increase-the-creative-potential-of-collaboration" style="font-size:48px;line-height:1.1">We\'re a studio in Berlin with an international practice in architecture, urban planning and interior design. We believe in sharing knowledge and promoting dialogue to increase the creative potential of collaboration.</h2>\n\x3c!-- /wp:heading --\x3e',description:"Heading text",keywords:["large text","title"],name:"heading",title:"Heading"}],patternCategories=[{name:"featured",label:"Featured"},{name:"text",label:"Text"}],reusableBlocks=[{content:{raw:"\x3c!-- wp:paragraph --\x3e\n<p>This is reusable</p>\n\x3c!-- /wp:paragraph --\x3e",protected:!1,block_version:1},date:"2022-09-12T13:28:06",date_gmt:"2022-09-12T13:28:06",id:70,link:"http://localhost:8888/?p=70",modified:"2022-09-12T13:28:06",modified_gmt:"2022-09-12T13:28:06",password:"",slug:"simple-paragraph",status:"publish",template:"",title:{raw:"Simple paragraph"},type:"wp_block"}];var stories={parameters:{sourceLink:"packages/block-editor/src/components/inserter",storySource:{source:"/**\n * Internal dependencies\n */\nimport BlockLibrary from '../library';\nimport BlockEditorProvider from '../../provider';\nimport { patternCategories, patterns, reusableBlocks } from './utils/fixtures';\nimport Inserter from '../';\n\nexport default { title: 'BlockEditor/Inserter' };\n\nexport const libraryWithoutPatterns = () => {\n\tconst wrapperStyle = {\n\t\tmargin: '24px',\n\t\theight: 400,\n\t\tborder: '1px solid #f3f3f3',\n\t\tdisplay: 'inline-block',\n\t};\n\treturn (\n\t\t<BlockEditorProvider>\n\t\t\t<div style={ wrapperStyle }>\n\t\t\t\t<BlockLibrary showInserterHelpPanel />\n\t\t\t</div>\n\t\t</BlockEditorProvider>\n\t);\n};\n\nexport const libraryWithPatterns = () => {\n\tconst wrapperStyle = {\n\t\tmargin: '24px',\n\t\theight: 400,\n\t\tborder: '1px solid #f3f3f3',\n\t\tdisplay: 'inline-block',\n\t};\n\treturn (\n\t\t<BlockEditorProvider\n\t\t\tsettings={ {\n\t\t\t\t__experimentalBlockPatternCategories: patternCategories,\n\t\t\t\t__experimentalBlockPatterns: patterns,\n\t\t\t} }\n\t\t>\n\t\t\t<div style={ wrapperStyle }>\n\t\t\t\t<BlockLibrary showInserterHelpPanel />\n\t\t\t</div>\n\t\t</BlockEditorProvider>\n\t);\n};\n\nexport const libraryWithPatternsAndReusableBlocks = () => {\n\tconst wrapperStyle = {\n\t\tmargin: '24px',\n\t\theight: 400,\n\t\tborder: '1px solid #f3f3f3',\n\t\tdisplay: 'inline-block',\n\t};\n\treturn (\n\t\t<BlockEditorProvider\n\t\t\tsettings={ {\n\t\t\t\t__experimentalBlockPatternCategories: patternCategories,\n\t\t\t\t__experimentalBlockPatterns: patterns,\n\t\t\t\t__experimentalReusableBlocks: reusableBlocks,\n\t\t\t} }\n\t\t>\n\t\t\t<div style={ wrapperStyle }>\n\t\t\t\t<BlockLibrary showInserterHelpPanel />\n\t\t\t</div>\n\t\t</BlockEditorProvider>\n\t);\n};\n\nexport const quickInserter = () => {\n\tconst wrapperStyle = {\n\t\tmargin: '24px',\n\t\theight: 400,\n\t\tborder: '1px solid #f3f3f3',\n\t\tdisplay: 'inline-block',\n\t};\n\treturn (\n\t\t<BlockEditorProvider\n\t\t\tsettings={ {\n\t\t\t\t__experimentalBlockPatternCategories: patternCategories,\n\t\t\t\t__experimentalBlockPatterns: patterns,\n\t\t\t\t__experimentalReusableBlocks: reusableBlocks,\n\t\t\t} }\n\t\t>\n\t\t\t<div style={ wrapperStyle }>\n\t\t\t\t<Inserter __experimentalIsQuick />\n\t\t\t</div>\n\t\t</BlockEditorProvider>\n\t);\n};\n",locationsMap:{"library-without-patterns":{startLoc:{col:38,line:11},endLoc:{col:1,line:25},startBody:{col:38,line:11},endBody:{col:1,line:25}},"library-with-patterns":{startLoc:{col:35,line:27},endLoc:{col:1,line:46},startBody:{col:35,line:27},endBody:{col:1,line:46}},"library-with-patterns-and-reusable-blocks":{startLoc:{col:52,line:48},endLoc:{col:1,line:68},startBody:{col:52,line:48},endBody:{col:1,line:68}},"quick-inserter":{startLoc:{col:29,line:70},endLoc:{col:1,line:90},startBody:{col:29,line:70},endBody:{col:1,line:90}}}}},title:"BlockEditor/Inserter"};const libraryWithoutPatterns=()=>(0,jsx_runtime.jsx)(provider.Z,{children:(0,jsx_runtime.jsx)("div",{style:{margin:"24px",height:400,border:"1px solid #f3f3f3",display:"inline-block"},children:(0,jsx_runtime.jsx)(library,{showInserterHelpPanel:!0})})});libraryWithoutPatterns.displayName="libraryWithoutPatterns";const libraryWithPatterns=()=>(0,jsx_runtime.jsx)(provider.Z,{settings:{__experimentalBlockPatternCategories:patternCategories,__experimentalBlockPatterns:patterns},children:(0,jsx_runtime.jsx)("div",{style:{margin:"24px",height:400,border:"1px solid #f3f3f3",display:"inline-block"},children:(0,jsx_runtime.jsx)(library,{showInserterHelpPanel:!0})})});libraryWithPatterns.displayName="libraryWithPatterns";const libraryWithPatternsAndReusableBlocks=()=>(0,jsx_runtime.jsx)(provider.Z,{settings:{__experimentalBlockPatternCategories:patternCategories,__experimentalBlockPatterns:patterns,__experimentalReusableBlocks:reusableBlocks},children:(0,jsx_runtime.jsx)("div",{style:{margin:"24px",height:400,border:"1px solid #f3f3f3",display:"inline-block"},children:(0,jsx_runtime.jsx)(library,{showInserterHelpPanel:!0})})});libraryWithPatternsAndReusableBlocks.displayName="libraryWithPatternsAndReusableBlocks";const quickInserter=()=>(0,jsx_runtime.jsx)(provider.Z,{settings:{__experimentalBlockPatternCategories:patternCategories,__experimentalBlockPatterns:patterns,__experimentalReusableBlocks:reusableBlocks},children:(0,jsx_runtime.jsx)("div",{style:{margin:"24px",height:400,border:"1px solid #f3f3f3",display:"inline-block"},children:(0,jsx_runtime.jsx)(inserter,{__experimentalIsQuick:!0})})});quickInserter.displayName="quickInserter",libraryWithoutPatterns.__docgenInfo={description:"",methods:[],displayName:"libraryWithoutPatterns"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/stories/index.js"]={name:"libraryWithoutPatterns",docgenInfo:libraryWithoutPatterns.__docgenInfo,path:"packages/block-editor/src/components/inserter/stories/index.js"}),libraryWithPatterns.__docgenInfo={description:"",methods:[],displayName:"libraryWithPatterns"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/stories/index.js"]={name:"libraryWithPatterns",docgenInfo:libraryWithPatterns.__docgenInfo,path:"packages/block-editor/src/components/inserter/stories/index.js"}),libraryWithPatternsAndReusableBlocks.__docgenInfo={description:"",methods:[],displayName:"libraryWithPatternsAndReusableBlocks"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/stories/index.js"]={name:"libraryWithPatternsAndReusableBlocks",docgenInfo:libraryWithPatternsAndReusableBlocks.__docgenInfo,path:"packages/block-editor/src/components/inserter/stories/index.js"}),quickInserter.__docgenInfo={description:"",methods:[],displayName:"quickInserter"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/block-editor/src/components/inserter/stories/index.js"]={name:"quickInserter",docgenInfo:quickInserter.__docgenInfo,path:"packages/block-editor/src/components/inserter/stories/index.js"})}}]);