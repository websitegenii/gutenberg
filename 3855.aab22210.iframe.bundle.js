"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[3855],{"./packages/autop/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{u:function(){return autop},A:function(){return removep}});const htmlSplitRegex=new RegExp("(<((?=!--|!\\[CDATA\\[)((?=!-)!(?:-(?!->)[^\\-]*)*(?:--\x3e)?|!\\[CDATA\\[[^\\]]*(?:](?!]>)[^\\]]*)*?(?:]]>)?)|[^>]*>?))");function replaceInHtmlTags(haystack,replacePairs){const textArr=function htmlSplit(input){const parts=[];let match,workingInput=input;for(;match=workingInput.match(htmlSplitRegex);){const index=match.index;parts.push(workingInput.slice(0,index)),parts.push(match[0]),workingInput=workingInput.slice(index+match[0].length)}return workingInput.length&&parts.push(workingInput),parts}(haystack);let changed=!1;const needles=Object.keys(replacePairs);for(let i=1;i<textArr.length;i+=2)for(let j=0;j<needles.length;j++){const needle=needles[j];if(-1!==textArr[i].indexOf(needle)){textArr[i]=textArr[i].replace(new RegExp(needle,"g"),replacePairs[needle]),changed=!0;break}}return changed&&(haystack=textArr.join("")),haystack}function autop(text){let br=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const preTags=[];if(""===text.trim())return"";if(-1!==(text+="\n").indexOf("<pre")){const textParts=text.split("</pre>"),lastText=textParts.pop();text="";for(let i=0;i<textParts.length;i++){const textPart=textParts[i],start=textPart.indexOf("<pre");if(-1===start){text+=textPart;continue}const name="<pre wp-pre-tag-"+i+"></pre>";preTags.push([name,textPart.substr(start)+"</pre>"]),text+=textPart.substr(0,start)+name}text+=lastText}const allBlocks="(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)";-1!==(text=replaceInHtmlTags(text=(text=(text=(text=text.replace(/<br\s*\/?>\s*<br\s*\/?>/g,"\n\n")).replace(new RegExp("(<"+allBlocks+"[\\s/>])","g"),"\n\n$1")).replace(new RegExp("(</"+allBlocks+">)","g"),"$1\n\n")).replace(/\r\n|\r/g,"\n"),{"\n":" \x3c!-- wpnl --\x3e "})).indexOf("<option")&&(text=(text=text.replace(/\s*<option/g,"<option")).replace(/<\/option>\s*/g,"</option>")),-1!==text.indexOf("</object>")&&(text=(text=(text=text.replace(/(<object[^>]*>)\s*/g,"$1")).replace(/\s*<\/object>/g,"</object>")).replace(/\s*(<\/?(?:param|embed)[^>]*>)\s*/g,"$1")),-1===text.indexOf("<source")&&-1===text.indexOf("<track")||(text=(text=(text=text.replace(/([<\[](?:audio|video)[^>\]]*[>\]])\s*/g,"$1")).replace(/\s*([<\[]\/(?:audio|video)[>\]])/g,"$1")).replace(/\s*(<(?:source|track)[^>]*>)\s*/g,"$1")),-1!==text.indexOf("<figcaption")&&(text=(text=text.replace(/\s*(<figcaption[^>]*>)/,"$1")).replace(/<\/figcaption>\s*/,"</figcaption>"));const texts=(text=text.replace(/\n\n+/g,"\n\n")).split(/\n\s*\n/).filter(Boolean);return text="",texts.forEach((textPiece=>{text+="<p>"+textPiece.replace(/^\n*|\n*$/g,"")+"</p>\n"})),text=(text=(text=(text=(text=(text=(text=(text=text.replace(/<p>\s*<\/p>/g,"")).replace(/<p>([^<]+)<\/(div|address|form)>/g,"<p>$1</p></$2>")).replace(new RegExp("<p>\\s*(</?"+allBlocks+"[^>]*>)\\s*</p>","g"),"$1")).replace(/<p>(<li.+?)<\/p>/g,"$1")).replace(/<p><blockquote([^>]*)>/gi,"<blockquote$1><p>")).replace(/<\/blockquote><\/p>/g,"</p></blockquote>")).replace(new RegExp("<p>\\s*(</?"+allBlocks+"[^>]*>)","g"),"$1")).replace(new RegExp("(</?"+allBlocks+"[^>]*>)\\s*</p>","g"),"$1"),br&&(text=(text=(text=(text=text.replace(/<(script|style).*?<\/\\1>/g,(match=>match[0].replace(/\n/g,"<WPPreserveNewline />")))).replace(/<br>|<br\/>/g,"<br />")).replace(/(<br \/>)?\s*\n/g,((a,b)=>b?a:"<br />\n"))).replace(/<WPPreserveNewline \/>/g,"\n")),text=(text=(text=text.replace(new RegExp("(</?"+allBlocks+"[^>]*>)\\s*<br />","g"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)/g,"$1")).replace(/\n<\/p>$/g,"</p>"),preTags.forEach((preTag=>{const[name,original]=preTag;text=text.replace(name,original)})),-1!==text.indexOf("\x3c!-- wpnl --\x3e")&&(text=text.replace(/\s?<!-- wpnl -->\s?/g,"\n")),text}function removep(html){const blocklist="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure",blocklist1=blocklist+"|div|p",blocklist2=blocklist+"|pre",preserve=[];let preserveLinebreaks=!1,preserveBr=!1;return html?(-1===html.indexOf("<script")&&-1===html.indexOf("<style")||(html=html.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,(match=>(preserve.push(match),"<wp-preserve>")))),-1!==html.indexOf("<pre")&&(preserveLinebreaks=!0,html=html.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,(a=>(a=(a=a.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/\r?\n/g,"<wp-line-break>")))),-1!==html.indexOf("[caption")&&(preserveBr=!0,html=html.replace(/\[caption[\s\S]+?\[\/caption\]/g,(a=>a.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")))),-1!==(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=html.replace(new RegExp("\\s*</("+blocklist1+")>\\s*","g"),"</$1>\n")).replace(new RegExp("\\s*<((?:"+blocklist1+")(?: [^>]*)?)>","g"),"\n<$1>")).replace(/(<p [^>]+>[\s\S]*?)<\/p>/g,"$1</p#>")).replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n")).replace(/\s*<p>/gi,"")).replace(/\s*<\/p>\s*/gi,"\n\n")).replace(/\n[\s\u00a0]+\n/g,"\n\n")).replace(/(\s*)<br ?\/?>\s*/gi,((_,space)=>space&&-1!==space.indexOf("\n")?"\n\n":"\n"))).replace(/\s*<div/g,"\n<div")).replace(/<\/div>\s*/g,"</div>\n")).replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n")).replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption")).replace(new RegExp("\\s*<((?:"+blocklist2+")(?: [^>]*)?)\\s*>","g"),"\n<$1>")).replace(new RegExp("\\s*</("+blocklist2+")>\\s*","g"),"</$1>\n")).replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>")).indexOf("<option")&&(html=(html=html.replace(/\s*<option/g,"\n<option")).replace(/\s*<\/select>/g,"\n</select>")),-1!==html.indexOf("<hr")&&(html=html.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!==html.indexOf("<object")&&(html=html.replace(/<object[\s\S]+?<\/object>/g,(a=>a.replace(/[\r\n]+/g,"")))),html=(html=(html=(html=html.replace(/<\/p#>/g,"</p>\n")).replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1")).replace(/^\s+/,"")).replace(/[\s\u00a0]+$/,""),preserveLinebreaks&&(html=html.replace(/<wp-line-break>/g,"\n")),preserveBr&&(html=html.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),preserve.length&&(html=html.replace(/<wp-preserve>/g,(()=>preserve.shift()))),html):""}},"./packages/blob/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{ZR:function(){return createBlobURL},TR:function(){return getBlobByURL},UQ:function(){return getBlobTypeByURL},Vg:function(){return revokeBlobURL},Gu:function(){return isBlobURL}});const{createObjectURL:createObjectURL,revokeObjectURL:revokeObjectURL}=window.URL,cache={};function createBlobURL(file){const url=createObjectURL(file);return cache[url]=file,url}function getBlobByURL(url){return cache[url]}function getBlobTypeByURL(url){var _getBlobByURL;return null===(_getBlobByURL=getBlobByURL(url))||void 0===_getBlobByURL?void 0:_getBlobByURL.type.split("/")[0]}function revokeBlobURL(url){cache[url]&&revokeObjectURL(url),delete cache[url]}function isBlobURL(url){return!(!url||!url.indexOf)&&0===url.indexOf("blob:")}},"./packages/blocks/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{qO:function(){return __EXPERIMENTAL_ELEMENTS},yg:function(){return __EXPERIMENTAL_PATHS_WITH_MERGE},mR:function(){return __experimentalCloneSanitizedBlock},DK:function(){return getAccessibleBlockLabel},A$:function(){return __experimentalGetBlockAttributesNamesByRole},Iu:function(){return getBlockLabel},t9:function(){return __experimentalSanitizeBlockAttributes},dF:function(){return getBlockProps},cZ:function(){return getInnerBlocksProps},qm:function(){return __unstableSerializeAndClean},pI:function(){return children},Wm:function(){return cloneBlock},j4:function(){return createBlock},ne:function(){return createBlocksFromInnerBlocksTemplate},aW:function(){return doBlocksMatchTemplate},MC:function(){return findTransform},DJ:function(){return getBlockAttributes},Jo:function(){return getBlockInnerHTML},Vk:function(){return getBlockDefaultClassName},Wf:function(){return getBlockFromExample},hq:function(){return getBlockMenuDefaultClassName},Dx:function(){return getBlockSupport},Xn:function(){return getBlockTransforms},ck:function(){return getBlockType},U8:function(){return getBlockTypes},Nr:function(){return getBlockVariations},UT:function(){return getDefaultBlockName},ff:function(){return getPossibleBlockTransformations},kD:function(){return getSaveContent},qy:function(){return getUnregisteredTypeHandlerName},zb:function(){return hasBlockSupport},vr:function(){return isReusableBlock},zQ:function(){return isTemplatePart},pe:function(){return isUnmodifiedBlock},ZP:function(){return isUnmodifiedDefaultBlock},Qc:function(){return parser_parse},eP:function(){return parseWithAttributeSchema},ag:function(){return pasteHandler},AF:function(){return rawHandler},uW:function(){return registerBlockType},qC:function(){return serializer_serialize},rq:function(){return serializeRawBlock},$K:function(){return setDefaultBlockName},Cs:function(){return setFreeformContentHandlerName},ru:function(){return setGroupingBlockName},ud:function(){return setUnregisteredTypeHandlerName},h:function(){return store},m4:function(){return switchToBlockType},fw:function(){return synchronizeBlocksWithTemplate},lM:function(){return validateBlock}});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{__experimentalGetUnprocessedBlockTypes:function(){return __experimentalGetUnprocessedBlockTypes},__experimentalHasContentRoleAttribute:function(){return __experimentalHasContentRoleAttribute},getActiveBlockVariation:function(){return getActiveBlockVariation},getBlockStyles:function(){return getBlockStyles},getBlockSupport:function(){return selectors_getBlockSupport},getBlockType:function(){return selectors_getBlockType},getBlockTypes:function(){return selectors_getBlockTypes},getBlockVariations:function(){return selectors_getBlockVariations},getCategories:function(){return getCategories},getChildBlockNames:function(){return selectors_getChildBlockNames},getCollections:function(){return getCollections},getDefaultBlockName:function(){return selectors_getDefaultBlockName},getDefaultBlockVariation:function(){return getDefaultBlockVariation},getFreeformFallbackBlockName:function(){return getFreeformFallbackBlockName},getGroupingBlockName:function(){return selectors_getGroupingBlockName},getUnregisteredFallbackBlockName:function(){return getUnregisteredFallbackBlockName},hasBlockSupport:function(){return selectors_hasBlockSupport},hasChildBlocks:function(){return selectors_hasChildBlocks},hasChildBlocksWithInserterSupport:function(){return selectors_hasChildBlocksWithInserterSupport},isMatchingSearchTerm:function(){return isMatchingSearchTerm}});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{__experimentalReapplyBlockTypeFilters:function(){return __experimentalReapplyBlockTypeFilters},__experimentalRegisterBlockType:function(){return __experimentalRegisterBlockType},addBlockCollection:function(){return addBlockCollection},addBlockStyles:function(){return addBlockStyles},addBlockTypes:function(){return addBlockTypes},addBlockVariations:function(){return addBlockVariations},removeBlockCollection:function(){return removeBlockCollection},removeBlockStyles:function(){return removeBlockStyles},removeBlockTypes:function(){return removeBlockTypes},removeBlockVariations:function(){return removeBlockVariations},setCategories:function(){return setCategories},setDefaultBlockName:function(){return actions_setDefaultBlockName},setFreeformFallbackBlockName:function(){return setFreeformFallbackBlockName},setGroupingBlockName:function(){return actions_setGroupingBlockName},setUnregisteredFallbackBlockName:function(){return setUnregisteredFallbackBlockName},updateCategory:function(){return updateCategory}});var build_module=__webpack_require__("./packages/data/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),colord=__webpack_require__("./node_modules/colord/index.mjs"),names=__webpack_require__("./node_modules/colord/plugins/names.mjs"),a11y=__webpack_require__("./node_modules/colord/plugins/a11y.mjs"),react=__webpack_require__("./node_modules/react/index.js"),strip_html=__webpack_require__("./packages/dom/build-module/dom/strip-html.js");const DEPRECATED_ENTRY_KEYS=["attributes","supports","save","migrate","isEligible","apiVersion"],__EXPERIMENTAL_ELEMENTS={link:"a",heading:"h1, h2, h3, h4, h5, h6",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",button:".wp-element-button, .wp-block-button__link",caption:".wp-element-caption, .wp-block-audio figcaption, .wp-block-embed figcaption, .wp-block-gallery figcaption, .wp-block-image figcaption, .wp-block-table figcaption, .wp-block-video figcaption",cite:"cite"},__EXPERIMENTAL_PATHS_WITH_MERGE={"color.duotone":!0,"color.gradients":!0,"color.palette":!0,"typography.fontFamilies":!0,"typography.fontSizes":!0,"spacing.spacingSizes":!0};var dist_es2015=__webpack_require__("./node_modules/camel-case/dist.es2015/index.js");const i18nBlockSchema={title:"block title",description:"block description",keywords:["block keyword"],styles:[{label:"block style label"}],variations:[{title:"block variation title",description:"block variation description",keywords:["block variation keyword"]}]},serverSideBlockDefinitions={};function isObject(object){return null!==object&&"object"==typeof object}function getBlockSettingsFromMetadata(_ref3){let{textdomain:textdomain,...metadata}=_ref3;const allowedFields=["apiVersion","title","category","parent","ancestor","icon","description","keywords","attributes","providesContext","usesContext","supports","styles","example","variations"],settings=Object.fromEntries(Object.entries(metadata).filter((_ref4=>{let[key]=_ref4;return allowedFields.includes(key)})));return textdomain&&Object.keys(i18nBlockSchema).forEach((key=>{settings[key]&&(settings[key]=translateBlockSettingUsingI18nSchema(i18nBlockSchema[key],settings[key],textdomain))})),settings}function registerBlockType(blockNameOrMetadata,settings){const name=isObject(blockNameOrMetadata)?blockNameOrMetadata.name:blockNameOrMetadata;if("string"!=typeof name)return void console.error("Block names must be strings.");if(!/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(name))return void console.error("Block names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-block");if((0,build_module.Ys)(store).getBlockType(name))return void console.error('Block "'+name+'" is already registered.');isObject(blockNameOrMetadata)&&function unstable__bootstrapServerSideBlockDefinitions(definitions){for(const blockName of Object.keys(definitions))serverSideBlockDefinitions[blockName]?(void 0===serverSideBlockDefinitions[blockName].apiVersion&&definitions[blockName].apiVersion&&(serverSideBlockDefinitions[blockName].apiVersion=definitions[blockName].apiVersion),void 0===serverSideBlockDefinitions[blockName].ancestor&&definitions[blockName].ancestor&&(serverSideBlockDefinitions[blockName].ancestor=definitions[blockName].ancestor)):serverSideBlockDefinitions[blockName]=Object.fromEntries(Object.entries(definitions[blockName]).filter((_ref=>{let[,value]=_ref;return null!=value})).map((_ref2=>{let[key,value]=_ref2;return[(0,dist_es2015.eV)(key),value]})))}({[name]:getBlockSettingsFromMetadata(blockNameOrMetadata)});const blockType={name:name,icon:"block-default",keywords:[],attributes:{},providesContext:{},usesContext:[],supports:{},styles:[],variations:[],save:()=>null,...null==serverSideBlockDefinitions?void 0:serverSideBlockDefinitions[name],...settings};return(0,build_module.WI)(store).__experimentalRegisterBlockType(blockType),(0,build_module.Ys)(store).getBlockType(name)}function translateBlockSettingUsingI18nSchema(i18nSchema,settingValue,textdomain){return"string"==typeof i18nSchema&&"string"==typeof settingValue?(0,i18n_build_module._x)(settingValue,i18nSchema,textdomain):Array.isArray(i18nSchema)&&i18nSchema.length&&Array.isArray(settingValue)?settingValue.map((value=>translateBlockSettingUsingI18nSchema(i18nSchema[0],value,textdomain))):isObject(i18nSchema)&&Object.entries(i18nSchema).length&&isObject(settingValue)?Object.keys(settingValue).reduce(((accumulator,key)=>i18nSchema[key]?(accumulator[key]=translateBlockSettingUsingI18nSchema(i18nSchema[key],settingValue[key],textdomain),accumulator):(accumulator[key]=settingValue[key],accumulator)),{}):settingValue}function setFreeformContentHandlerName(blockName){(0,build_module.WI)(store).setFreeformFallbackBlockName(blockName)}function getFreeformContentHandlerName(){return(0,build_module.Ys)(store).getFreeformFallbackBlockName()}function setUnregisteredTypeHandlerName(blockName){(0,build_module.WI)(store).setUnregisteredFallbackBlockName(blockName)}function getUnregisteredTypeHandlerName(){return(0,build_module.Ys)(store).getUnregisteredFallbackBlockName()}function setDefaultBlockName(name){(0,build_module.WI)(store).setDefaultBlockName(name)}function setGroupingBlockName(name){(0,build_module.WI)(store).setGroupingBlockName(name)}function getDefaultBlockName(){return(0,build_module.Ys)(store).getDefaultBlockName()}function getBlockType(name){var _select;return null===(_select=(0,build_module.Ys)(store))||void 0===_select?void 0:_select.getBlockType(name)}function getBlockTypes(){return(0,build_module.Ys)(store).getBlockTypes()}function getBlockSupport(nameOrType,feature,defaultSupports){return(0,build_module.Ys)(store).getBlockSupport(nameOrType,feature,defaultSupports)}function hasBlockSupport(nameOrType,feature,defaultSupports){return(0,build_module.Ys)(store).hasBlockSupport(nameOrType,feature,defaultSupports)}function isReusableBlock(blockOrType){return"core/block"===(null==blockOrType?void 0:blockOrType.name)}function isTemplatePart(blockOrType){return"core/template-part"===(null==blockOrType?void 0:blockOrType.name)}const getBlockVariations=(blockName,scope)=>(0,build_module.Ys)(store).getBlockVariations(blockName,scope);var v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),hooks_build_module=__webpack_require__("./packages/hooks/build-module/index.js");function createBlock(name){let attributes=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},innerBlocks=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const sanitizedAttributes=__experimentalSanitizeBlockAttributes(name,attributes),clientId=(0,v4.Z)();return{clientId:clientId,name:name,isValid:!0,attributes:sanitizedAttributes,innerBlocks:innerBlocks}}function createBlocksFromInnerBlocksTemplate(){let innerBlocksOrTemplate=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return innerBlocksOrTemplate.map((innerBlock=>{const innerBlockTemplate=Array.isArray(innerBlock)?innerBlock:[innerBlock.name,innerBlock.attributes,innerBlock.innerBlocks],[name,attributes,innerBlocks=[]]=innerBlockTemplate;return createBlock(name,attributes,createBlocksFromInnerBlocksTemplate(innerBlocks))}))}function __experimentalCloneSanitizedBlock(block){let mergeAttributes=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},newInnerBlocks=arguments.length>2?arguments[2]:void 0;const clientId=(0,v4.Z)(),sanitizedAttributes=__experimentalSanitizeBlockAttributes(block.name,{...block.attributes,...mergeAttributes});return{...block,clientId:clientId,attributes:sanitizedAttributes,innerBlocks:newInnerBlocks||block.innerBlocks.map((innerBlock=>__experimentalCloneSanitizedBlock(innerBlock)))}}function cloneBlock(block){let mergeAttributes=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},newInnerBlocks=arguments.length>2?arguments[2]:void 0;const clientId=(0,v4.Z)();return{...block,clientId:clientId,attributes:{...block.attributes,...mergeAttributes},innerBlocks:newInnerBlocks||block.innerBlocks.map((innerBlock=>cloneBlock(innerBlock)))}}const isPossibleTransformForSource=(transform,direction,blocks)=>{if(!blocks.length)return!1;const isMultiBlock=blocks.length>1,firstBlockName=blocks[0].name;if(!(isWildcardBlockTransform(transform)||!isMultiBlock||transform.isMultiBlock))return!1;if(!isWildcardBlockTransform(transform)&&!blocks.every((block=>block.name===firstBlockName)))return!1;if(!("block"===transform.type))return!1;const sourceBlock=blocks[0];return!("from"===direction&&-1===transform.blocks.indexOf(sourceBlock.name)&&!isWildcardBlockTransform(transform))&&(!(!isMultiBlock&&"from"===direction&&isContainerGroupBlock(sourceBlock.name)&&isContainerGroupBlock(transform.blockName))&&(!!maybeCheckTransformIsMatch(transform,blocks)&&!(transform.usingMobileTransformations&&isWildcardBlockTransform(transform)&&!isContainerGroupBlock(sourceBlock.name))))},isWildcardBlockTransform=t=>t&&"block"===t.type&&Array.isArray(t.blocks)&&t.blocks.includes("*"),isContainerGroupBlock=name=>name===function getGroupingBlockName(){return(0,build_module.Ys)(store).getGroupingBlockName()}();function getPossibleBlockTransformations(blocks){if(!blocks.length)return[];const blockTypesForFromTransforms=(blocks=>blocks.length?getBlockTypes().filter((blockType=>!!findTransform(getBlockTransforms("from",blockType.name),(transform=>isPossibleTransformForSource(transform,"from",blocks))))):[])(blocks),blockTypesForToTransforms=(blocks=>{if(!blocks.length)return[];const blockType=getBlockType(blocks[0].name);return(blockType?getBlockTransforms("to",blockType.name):[]).filter((transform=>transform&&isPossibleTransformForSource(transform,"to",blocks))).map((transformation=>transformation.blocks)).flat().map((name=>"*"===name?name:getBlockType(name)))})(blocks);return[...new Set([...blockTypesForFromTransforms,...blockTypesForToTransforms])]}function findTransform(transforms,predicate){const hooks=(0,hooks_build_module.Hu)();for(let i=0;i<transforms.length;i++){const candidate=transforms[i];predicate(candidate)&&hooks.addFilter("transform","transform/"+i.toString(),(result=>result||candidate),candidate.priority)}return hooks.applyFilters("transform",null)}function getBlockTransforms(direction,blockTypeOrName){if(void 0===blockTypeOrName)return getBlockTypes().map((_ref=>{let{name:name}=_ref;return getBlockTransforms(direction,name)})).flat();const blockType=utils_normalizeBlockType(blockTypeOrName),{name:blockName,transforms:transforms}=blockType||{};if(!transforms||!Array.isArray(transforms[direction]))return[];const usingMobileTransformations=transforms.supportedMobileTransforms&&Array.isArray(transforms.supportedMobileTransforms);return(usingMobileTransformations?transforms[direction].filter((t=>"raw"===t.type||!(!t.blocks||!t.blocks.length)&&(!!isWildcardBlockTransform(t)||t.blocks.every((transformBlockName=>transforms.supportedMobileTransforms.includes(transformBlockName)))))):transforms[direction]).map((transform=>({...transform,blockName:blockName,usingMobileTransformations:usingMobileTransformations})))}function maybeCheckTransformIsMatch(transform,blocks){if("function"!=typeof transform.isMatch)return!0;const sourceBlock=blocks[0],attributes=transform.isMultiBlock?blocks.map((block=>block.attributes)):sourceBlock.attributes,block=transform.isMultiBlock?blocks:sourceBlock;return transform.isMatch(attributes,block)}function switchToBlockType(blocks,name){const blocksArray=Array.isArray(blocks)?blocks:[blocks],isMultiBlock=blocksArray.length>1,firstBlock=blocksArray[0],sourceName=firstBlock.name,transformationsFrom=getBlockTransforms("from",name),transformation=findTransform(getBlockTransforms("to",sourceName),(t=>"block"===t.type&&-1!==t.blocks.indexOf(name)&&(!isMultiBlock||t.isMultiBlock)&&maybeCheckTransformIsMatch(t,blocksArray)))||findTransform(transformationsFrom,(t=>"block"===t.type&&(isWildcardBlockTransform(t)||-1!==t.blocks.indexOf(sourceName))&&(!isMultiBlock||t.isMultiBlock)&&maybeCheckTransformIsMatch(t,blocksArray)));if(!transformation)return null;let transformationResults;if(transformationResults=transformation.isMultiBlock?"__experimentalConvert"in transformation?transformation.__experimentalConvert(blocksArray):transformation.transform(blocksArray.map((currentBlock=>currentBlock.attributes)),blocksArray.map((currentBlock=>currentBlock.innerBlocks))):"__experimentalConvert"in transformation?transformation.__experimentalConvert(firstBlock):transformation.transform(firstBlock.attributes,firstBlock.innerBlocks),null===transformationResults||"object"!=typeof transformationResults)return null;if(transformationResults=Array.isArray(transformationResults)?transformationResults:[transformationResults],transformationResults.some((result=>!getBlockType(result.name))))return null;if("*"===name)return transformationResults;if(!transformationResults.some((result=>result.name===name)))return null;return transformationResults.map(((result,index,results)=>(0,hooks_build_module.O)("blocks.switchToBlockType.transformedBlock",result,blocks,index,results)))}const getBlockFromExample=(name,example)=>{var _example$innerBlocks;return createBlock(name,example.attributes,(null!==(_example$innerBlocks=example.innerBlocks)&&void 0!==_example$innerBlocks?_example$innerBlocks:[]).map((innerBlock=>getBlockFromExample(innerBlock.name,innerBlock))))};(0,colord.l7)([names.Z,a11y.Z]);const ICON_COLORS=["#191e23","#f8f9f9"];function isUnmodifiedBlock(block){var _blockType$attributes;isUnmodifiedBlock[block.name]||(isUnmodifiedBlock[block.name]=createBlock(block.name));const newBlock=isUnmodifiedBlock[block.name],blockType=getBlockType(block.name);return Object.keys(null!==(_blockType$attributes=null==blockType?void 0:blockType.attributes)&&void 0!==_blockType$attributes?_blockType$attributes:{}).every((key=>newBlock.attributes[key]===block.attributes[key]))}function isUnmodifiedDefaultBlock(block){return block.name===getDefaultBlockName()&&isUnmodifiedBlock(block)}function isValidIcon(icon){return!!icon&&("string"==typeof icon||(0,react.isValidElement)(icon)||"function"==typeof icon||icon instanceof react.Component)}function utils_normalizeBlockType(blockTypeOrName){return"string"==typeof blockTypeOrName?getBlockType(blockTypeOrName):blockTypeOrName}function getBlockLabel(blockType,attributes){let context=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"visual";const{__experimentalLabel:getLabel,title:title}=blockType,label=getLabel&&getLabel(attributes,{context:context});return label?(0,strip_html.Z)(label):title}function getAccessibleBlockLabel(blockType,attributes,position){let direction=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vertical";const title=null==blockType?void 0:blockType.title,label=blockType?getBlockLabel(blockType,attributes,"accessibility"):"",hasPosition=void 0!==position,hasLabel=label&&label!==title;return hasPosition&&"vertical"===direction?hasLabel?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s Block. Row %2$d. %3$s"),title,position,label):(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s Block. Row %2$d"),title,position):hasPosition&&"horizontal"===direction?hasLabel?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s Block. Column %2$d. %3$s"),title,position,label):(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s Block. Column %2$d"),title,position):hasLabel?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s Block. %2$s"),title,label):(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s Block"),title)}function __experimentalSanitizeBlockAttributes(name,attributes){const blockType=getBlockType(name);if(void 0===blockType)throw new Error(`Block type '${name}' is not registered.`);return Object.entries(blockType.attributes).reduce(((accumulator,_ref)=>{let[key,schema]=_ref;const value=attributes[key];return void 0!==value?accumulator[key]=value:schema.hasOwnProperty("default")&&(accumulator[key]=schema.default),-1!==["node","children"].indexOf(schema.source)&&("string"==typeof accumulator[key]?accumulator[key]=[accumulator[key]]:Array.isArray(accumulator[key])||(accumulator[key]=[])),accumulator}),{})}function __experimentalGetBlockAttributesNamesByRole(name,role){var _getBlockType;const attributes=null===(_getBlockType=getBlockType(name))||void 0===_getBlockType?void 0:_getBlockType.attributes;if(!attributes)return[];const attributesNames=Object.keys(attributes);return role?attributesNames.filter((attributeName=>{var _attributes$attribute;return(null===(_attributes$attribute=attributes[attributeName])||void 0===_attributes$attribute?void 0:_attributes$attribute.__experimentalRole)===role})):attributesNames}function omit(object,keys){return Object.fromEntries(Object.entries(object).filter((_ref2=>{let[key]=_ref2;return!keys.includes(key)})))}const DEFAULT_CATEGORIES=[{slug:"text",title:(0,i18n_build_module.__)("Text")},{slug:"media",title:(0,i18n_build_module.__)("Media")},{slug:"design",title:(0,i18n_build_module.__)("Design")},{slug:"widgets",title:(0,i18n_build_module.__)("Widgets")},{slug:"theme",title:(0,i18n_build_module.__)("Theme")},{slug:"embed",title:(0,i18n_build_module.__)("Embeds")},{slug:"reusable",title:(0,i18n_build_module.__)("Reusable blocks")}];function keyBlockTypesByName(types){return types.reduce(((newBlockTypes,block)=>({...newBlockTypes,[block.name]:block})),{})}function getUniqueItemsByName(items){return items.reduce(((acc,currentItem)=>(acc.some((item=>item.name===currentItem.name))||acc.push(currentItem),acc)),[])}function createBlockNameSetterReducer(setActionType){return function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"REMOVE_BLOCK_TYPES":return-1!==action.names.indexOf(state)?null:state;case setActionType:return action.name||null}return state}}const defaultBlockName=createBlockNameSetterReducer("SET_DEFAULT_BLOCK_NAME"),freeformFallbackBlockName=createBlockNameSetterReducer("SET_FREEFORM_FALLBACK_BLOCK_NAME"),unregisteredFallbackBlockName=createBlockNameSetterReducer("SET_UNREGISTERED_FALLBACK_BLOCK_NAME"),groupingBlockName=createBlockNameSetterReducer("SET_GROUPING_BLOCK_NAME");var reducer=(0,build_module.UY)({unprocessedBlockTypes:function unprocessedBlockTypes(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"ADD_UNPROCESSED_BLOCK_TYPE":return{...state,[action.blockType.name]:action.blockType};case"REMOVE_BLOCK_TYPES":return omit(state,action.names)}return state},blockTypes:function blockTypes(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"ADD_BLOCK_TYPES":return{...state,...keyBlockTypesByName(action.blockTypes)};case"REMOVE_BLOCK_TYPES":return omit(state,action.names)}return state},blockStyles:function blockStyles(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"ADD_BLOCK_TYPES":return{...state,...(0,lodash.mapValues)(keyBlockTypesByName(action.blockTypes),(blockType=>getUniqueItemsByName([...(0,lodash.get)(blockType,["styles"],[]).map((style=>({...style,source:"block"}))),...(0,lodash.get)(state,[blockType.name],[]).filter((_ref=>{let{source:source}=_ref;return"block"!==source}))])))};case"ADD_BLOCK_STYLES":return{...state,[action.blockName]:getUniqueItemsByName([...(0,lodash.get)(state,[action.blockName],[]),...action.styles])};case"REMOVE_BLOCK_STYLES":return{...state,[action.blockName]:(0,lodash.get)(state,[action.blockName],[]).filter((style=>-1===action.styleNames.indexOf(style.name)))}}return state},blockVariations:function blockVariations(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"ADD_BLOCK_TYPES":return{...state,...(0,lodash.mapValues)(keyBlockTypesByName(action.blockTypes),(blockType=>getUniqueItemsByName([...(0,lodash.get)(blockType,["variations"],[]).map((variation=>({...variation,source:"block"}))),...(0,lodash.get)(state,[blockType.name],[]).filter((_ref2=>{let{source:source}=_ref2;return"block"!==source}))])))};case"ADD_BLOCK_VARIATIONS":return{...state,[action.blockName]:getUniqueItemsByName([...(0,lodash.get)(state,[action.blockName],[]),...action.variations])};case"REMOVE_BLOCK_VARIATIONS":return{...state,[action.blockName]:(0,lodash.get)(state,[action.blockName],[]).filter((variation=>-1===action.variationNames.indexOf(variation.name)))}}return state},defaultBlockName:defaultBlockName,freeformFallbackBlockName:freeformFallbackBlockName,unregisteredFallbackBlockName:unregisteredFallbackBlockName,groupingBlockName:groupingBlockName,categories:function categories(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_CATEGORIES,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"SET_CATEGORIES":return action.categories||[];case"UPDATE_CATEGORY":if(!action.category||(0,lodash.isEmpty)(action.category))return state;if(state.find((_ref3=>{let{slug:slug}=_ref3;return slug===action.slug})))return(0,lodash.map)(state,(category=>category.slug===action.slug?{...category,...action.category}:category))}return state},collections:function collections(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"ADD_BLOCK_COLLECTION":return{...state,[action.namespace]:{title:action.title,icon:action.icon}};case"REMOVE_BLOCK_COLLECTION":return omit(state,action.namespace)}return state}}),rememo=__webpack_require__("./node_modules/rememo/es/rememo.js"),remove_accents=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents_default=__webpack_require__.n(remove_accents),pipe=__webpack_require__("./packages/compose/build-module/higher-order/pipe.js");const getNormalizedBlockType=(state,nameOrType)=>"string"==typeof nameOrType?selectors_getBlockType(state,nameOrType):nameOrType;function __experimentalGetUnprocessedBlockTypes(state){return state.unprocessedBlockTypes}const selectors_getBlockTypes=(0,rememo.Z)((state=>Object.values(state.blockTypes)),(state=>[state.blockTypes]));function selectors_getBlockType(state,name){return state.blockTypes[name]}function getBlockStyles(state,name){return state.blockStyles[name]}const selectors_getBlockVariations=(0,rememo.Z)(((state,blockName,scope)=>{const variations=state.blockVariations[blockName];return variations&&scope?variations.filter((variation=>(variation.scope||["block","inserter"]).includes(scope))):variations}),((state,blockName)=>[state.blockVariations[blockName]]));function getActiveBlockVariation(state,blockName,attributes,scope){const variations=selectors_getBlockVariations(state,blockName,scope);return null==variations?void 0:variations.find((variation=>{var _variation$isActive;if(Array.isArray(variation.isActive)){const blockType=selectors_getBlockType(state,blockName),attributeKeys=Object.keys((null==blockType?void 0:blockType.attributes)||{}),definedAttributes=variation.isActive.filter((attribute=>attributeKeys.includes(attribute)));return 0!==definedAttributes.length&&definedAttributes.every((attribute=>attributes[attribute]===variation.attributes[attribute]))}return null===(_variation$isActive=variation.isActive)||void 0===_variation$isActive?void 0:_variation$isActive.call(variation,attributes,variation.attributes)}))}function getDefaultBlockVariation(state,blockName,scope){const variations=selectors_getBlockVariations(state,blockName,scope);return[...variations].reverse().find((_ref=>{let{isDefault:isDefault}=_ref;return!!isDefault}))||variations[0]}function getCategories(state){return state.categories}function getCollections(state){return state.collections}function selectors_getDefaultBlockName(state){return state.defaultBlockName}function getFreeformFallbackBlockName(state){return state.freeformFallbackBlockName}function getUnregisteredFallbackBlockName(state){return state.unregisteredFallbackBlockName}function selectors_getGroupingBlockName(state){return state.groupingBlockName}const selectors_getChildBlockNames=(0,rememo.Z)(((state,blockName)=>(0,lodash.map)(selectors_getBlockTypes(state).filter((blockType=>{var _blockType$parent;return null===(_blockType$parent=blockType.parent)||void 0===_blockType$parent?void 0:_blockType$parent.includes(blockName)})),(_ref2=>{let{name:name}=_ref2;return name}))),(state=>[state.blockTypes])),selectors_getBlockSupport=(state,nameOrType,feature,defaultSupports)=>{const blockType=getNormalizedBlockType(state,nameOrType);return null!=blockType&&blockType.supports?(0,lodash.get)(blockType.supports,feature,defaultSupports):defaultSupports};function selectors_hasBlockSupport(state,nameOrType,feature,defaultSupports){return!!selectors_getBlockSupport(state,nameOrType,feature,defaultSupports)}function isMatchingSearchTerm(state,nameOrType,searchTerm){var _blockType$keywords;const blockType=getNormalizedBlockType(state,nameOrType),getNormalizedSearchTerm=(0,pipe.Z)([term=>remove_accents_default()(null!=term?term:""),term=>term.toLowerCase(),term=>term.trim()]),normalizedSearchTerm=getNormalizedSearchTerm(searchTerm),isSearchMatch=(0,pipe.Z)([getNormalizedSearchTerm,normalizedCandidate=>normalizedCandidate.includes(normalizedSearchTerm)]);return isSearchMatch(blockType.title)||(null===(_blockType$keywords=blockType.keywords)||void 0===_blockType$keywords?void 0:_blockType$keywords.some(isSearchMatch))||isSearchMatch(blockType.category)||"string"==typeof blockType.description&&isSearchMatch(blockType.description)}const selectors_hasChildBlocks=(state,blockName)=>selectors_getChildBlockNames(state,blockName).length>0,selectors_hasChildBlocksWithInserterSupport=(state,blockName)=>selectors_getChildBlockNames(state,blockName).some((childBlockName=>selectors_hasBlockSupport(state,childBlockName,"inserter",!0))),__experimentalHasContentRoleAttribute=(0,rememo.Z)(((state,blockTypeName)=>{const blockType=selectors_getBlockType(state,blockTypeName);return!!blockType&&Object.entries(blockType.attributes).some((_ref3=>{let[,{__experimentalRole:__experimentalRole}]=_ref3;return"content"===__experimentalRole}))}),((state,blockTypeName)=>{var _state$blockTypes$blo;return[null===(_state$blockTypes$blo=state.blockTypes[blockTypeName])||void 0===_state$blockTypes$blo?void 0:_state$blockTypes$blo.attributes]}));var is_plain_object=__webpack_require__("./node_modules/is-plain-object/dist/is-plain-object.mjs"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js");const{error:error,warn:warn}=window.console,LEGACY_CATEGORY_MAPPING={common:"text",formatting:"text",layout:"design"};function isFunction(maybeFunc){return"function"==typeof maybeFunc}const processBlockType=(blockType,_ref)=>{let{select:select}=_ref;const{name:name}=blockType,settings=(0,hooks_build_module.O)("blocks.registerBlockType",{...blockType},name,null);if(settings.description&&"string"!=typeof settings.description&&(0,deprecated_build_module.Z)("Declaring non-string block descriptions",{since:"6.2"}),settings.deprecated&&(settings.deprecated=settings.deprecated.map((deprecation=>Object.fromEntries(Object.entries((0,hooks_build_module.O)("blocks.registerBlockType",{...omit(blockType,DEPRECATED_ENTRY_KEYS),...deprecation},name,deprecation)).filter((_ref2=>{let[key]=_ref2;return DEPRECATED_ENTRY_KEYS.includes(key)})))))),(0,is_plain_object.P)(settings))if(isFunction(settings.save))if(!("edit"in settings)||isFunction(settings.edit))if(LEGACY_CATEGORY_MAPPING.hasOwnProperty(settings.category)&&(settings.category=LEGACY_CATEGORY_MAPPING[settings.category]),"category"in settings&&!select.getCategories().some((_ref3=>{let{slug:slug}=_ref3;return slug===settings.category}))&&(warn('The block "'+name+'" is registered with an invalid category "'+settings.category+'".'),delete settings.category),"title"in settings&&""!==settings.title)if("string"==typeof settings.title){if(settings.icon=function normalizeIconObject(icon){if(isValidIcon(icon=icon||"block-default"))return{src:icon};if("background"in icon){const colordBgColor=(0,colord.Vi)(icon.background),getColorContrast=iconColor=>colordBgColor.contrast(iconColor),maxContrast=Math.max(...ICON_COLORS.map(getColorContrast));return{...icon,foreground:icon.foreground?icon.foreground:ICON_COLORS.find((iconColor=>getColorContrast(iconColor)===maxContrast)),shadowColor:colordBgColor.alpha(.3).toRgbString()}}return icon}(settings.icon),isValidIcon(settings.icon.src))return settings;error("The icon passed is invalid. The icon should be a string, an element, a function, or an object following the specifications documented in https://developer.wordpress.org/block-editor/developers/block-api/block-registration/#icon-optional")}else error("Block titles must be strings.");else error('The block "'+name+'" must have a title.');else error('The "edit" property must be a valid function.');else error('The "save" property must be a valid function.');else error("Block settings must be a valid object.")};function addBlockTypes(blockTypes){return{type:"ADD_BLOCK_TYPES",blockTypes:Array.isArray(blockTypes)?blockTypes:[blockTypes]}}const __experimentalRegisterBlockType=blockType=>_ref4=>{let{dispatch:dispatch,select:select}=_ref4;dispatch({type:"ADD_UNPROCESSED_BLOCK_TYPE",blockType:blockType});const processedBlockType=processBlockType(blockType,{select:select});processedBlockType&&dispatch.addBlockTypes(processedBlockType)},__experimentalReapplyBlockTypeFilters=()=>_ref5=>{let{dispatch:dispatch,select:select}=_ref5;const unprocessedBlockTypes=select.__experimentalGetUnprocessedBlockTypes(),processedBlockTypes=Object.keys(unprocessedBlockTypes).reduce(((accumulator,blockName)=>{const result=processBlockType(unprocessedBlockTypes[blockName],{select:select});return result&&accumulator.push(result),accumulator}),[]);processedBlockTypes.length&&dispatch.addBlockTypes(processedBlockTypes)};function removeBlockTypes(names){return{type:"REMOVE_BLOCK_TYPES",names:Array.isArray(names)?names:[names]}}function addBlockStyles(blockName,styles){return{type:"ADD_BLOCK_STYLES",styles:Array.isArray(styles)?styles:[styles],blockName:blockName}}function removeBlockStyles(blockName,styleNames){return{type:"REMOVE_BLOCK_STYLES",styleNames:Array.isArray(styleNames)?styleNames:[styleNames],blockName:blockName}}function addBlockVariations(blockName,variations){return{type:"ADD_BLOCK_VARIATIONS",variations:Array.isArray(variations)?variations:[variations],blockName:blockName}}function removeBlockVariations(blockName,variationNames){return{type:"REMOVE_BLOCK_VARIATIONS",variationNames:Array.isArray(variationNames)?variationNames:[variationNames],blockName:blockName}}function actions_setDefaultBlockName(name){return{type:"SET_DEFAULT_BLOCK_NAME",name:name}}function setFreeformFallbackBlockName(name){return{type:"SET_FREEFORM_FALLBACK_BLOCK_NAME",name:name}}function setUnregisteredFallbackBlockName(name){return{type:"SET_UNREGISTERED_FALLBACK_BLOCK_NAME",name:name}}function actions_setGroupingBlockName(name){return{type:"SET_GROUPING_BLOCK_NAME",name:name}}function setCategories(categories){return{type:"SET_CATEGORIES",categories:categories}}function updateCategory(slug,category){return{type:"UPDATE_CATEGORY",slug:slug,category:category}}function addBlockCollection(namespace,title,icon){return{type:"ADD_BLOCK_COLLECTION",namespace:namespace,title:title,icon:icon}}function removeBlockCollection(namespace){return{type:"REMOVE_BLOCK_COLLECTION",namespace:namespace}}const store=(0,redux_store.Z)("core/blocks",{reducer:reducer,selectors:selectors_namespaceObject,actions:actions_namespaceObject});let build_module_document,offset,output,stack;(0,build_module.z2)(store);const tokenizer=/<!--\s+(\/)?wp:([a-z][a-z0-9_-]*\/)?([a-z][a-z0-9_-]*)\s+({(?:(?=([^}]+|}+(?=})|(?!}\s+\/?-->)[^])*)\5|[^]*?)}\s+)?(\/)?-->/g;function Block(blockName,attrs,innerBlocks,innerHTML,innerContent){return{blockName:blockName,attrs:attrs,innerBlocks:innerBlocks,innerHTML:innerHTML,innerContent:innerContent}}function Freeform(innerHTML){return Block(null,{},[],innerHTML,[innerHTML])}function proceed(){const stackDepth=stack.length,next=function nextToken(){const matches=tokenizer.exec(build_module_document);if(null===matches)return["no-more-tokens","",null,0,0];const startedAt=matches.index,[match,closerMatch,namespaceMatch,nameMatch,attrsMatch,,voidMatch]=matches,length=match.length,isCloser=!!closerMatch,isVoid=!!voidMatch,name=(namespaceMatch||"core/")+nameMatch,hasAttrs=!!attrsMatch,attrs=hasAttrs?function parseJSON(input){try{return JSON.parse(input)}catch(e){return null}}(attrsMatch):{};if(isVoid)return["void-block",name,attrs,startedAt,length];if(isCloser)return["block-closer",name,null,startedAt,length];return["block-opener",name,attrs,startedAt,length]}(),[tokenType,blockName,attrs,startOffset,tokenLength]=next,leadingHtmlStart=startOffset>offset?offset:null;switch(tokenType){case"no-more-tokens":if(0===stackDepth)return addFreeform(),!1;if(1===stackDepth)return addBlockFromStack(),!1;for(;0<stack.length;)addBlockFromStack();return!1;case"void-block":return 0===stackDepth?(null!==leadingHtmlStart&&output.push(Freeform(build_module_document.substr(leadingHtmlStart,startOffset-leadingHtmlStart))),output.push(Block(blockName,attrs,[],"",[])),offset=startOffset+tokenLength,!0):(addInnerBlock(Block(blockName,attrs,[],"",[]),startOffset,tokenLength),offset=startOffset+tokenLength,!0);case"block-opener":return stack.push(function Frame(block,tokenStart,tokenLength,prevOffset,leadingHtmlStart){return{block:block,tokenStart:tokenStart,tokenLength:tokenLength,prevOffset:prevOffset||tokenStart+tokenLength,leadingHtmlStart:leadingHtmlStart}}(Block(blockName,attrs,[],"",[]),startOffset,tokenLength,startOffset+tokenLength,leadingHtmlStart)),offset=startOffset+tokenLength,!0;case"block-closer":if(0===stackDepth)return addFreeform(),!1;if(1===stackDepth)return addBlockFromStack(startOffset),offset=startOffset+tokenLength,!0;const stackTop=stack.pop(),html=build_module_document.substr(stackTop.prevOffset,startOffset-stackTop.prevOffset);return stackTop.block.innerHTML+=html,stackTop.block.innerContent.push(html),stackTop.prevOffset=startOffset+tokenLength,addInnerBlock(stackTop.block,stackTop.tokenStart,stackTop.tokenLength,startOffset+tokenLength),offset=startOffset+tokenLength,!0;default:return addFreeform(),!1}}function addFreeform(rawLength){const length=rawLength||build_module_document.length-offset;0!==length&&output.push(Freeform(build_module_document.substr(offset,length)))}function addInnerBlock(block,tokenStart,tokenLength,lastOffset){const parent=stack[stack.length-1];parent.block.innerBlocks.push(block);const html=build_module_document.substr(parent.prevOffset,tokenStart-parent.prevOffset);html&&(parent.block.innerHTML+=html,parent.block.innerContent.push(html)),parent.block.innerContent.push(null),parent.prevOffset=lastOffset||tokenStart+tokenLength}function addBlockFromStack(endOffset){const{block:block,leadingHtmlStart:leadingHtmlStart,prevOffset:prevOffset,tokenStart:tokenStart}=stack.pop(),html=endOffset?build_module_document.substr(prevOffset,endOffset-prevOffset):build_module_document.substr(prevOffset);html&&(block.innerHTML+=html,block.innerContent.push(html)),null!==leadingHtmlStart&&output.push(Freeform(build_module_document.substr(leadingHtmlStart,tokenStart-leadingHtmlStart))),output.push(block)}var autop_build_module=__webpack_require__("./packages/autop/build-module/index.js"),raw_html=__webpack_require__("./packages/element/build-module/raw-html.js"),serialize=__webpack_require__("./packages/element/build-module/serialize.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js");function serializeRawBlock(rawBlock){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isCommentDelimited:isCommentDelimited=!0}=options,{blockName:blockName,attrs:attrs={},innerBlocks:innerBlocks=[],innerContent:innerContent=[]}=rawBlock;let childIndex=0;const content=innerContent.map((item=>null!==item?item:serializeRawBlock(innerBlocks[childIndex++],options))).join("\n").replace(/\n+/g,"\n").trim();return isCommentDelimited?getCommentDelimitedContent(blockName,attrs,content):content}function getBlockDefaultClassName(blockName){const className="wp-block-"+blockName.replace(/\//,"-").replace(/^core-/,"");return(0,hooks_build_module.O)("blocks.getBlockDefaultClassName",className,blockName)}function getBlockMenuDefaultClassName(blockName){const className="editor-block-list-item-"+blockName.replace(/\//,"-").replace(/^core-/,"");return(0,hooks_build_module.O)("blocks.getBlockMenuDefaultClassName",className,blockName)}const blockPropsProvider={},innerBlocksPropsProvider={};function getBlockProps(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{blockType:blockType,attributes:attributes}=blockPropsProvider;return(0,hooks_build_module.O)("blocks.getSaveContent.extraProps",{...props},blockType,attributes)}function getInnerBlocksProps(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{innerBlocks:innerBlocks}=innerBlocksPropsProvider,html=serializer_serialize(innerBlocks,{isInnerBlocks:!0}),children=(0,react.createElement)(raw_html.Z,null,html);return{...props,children:children}}function getSaveContent(blockTypeOrName,attributes,innerBlocks){const blockType=utils_normalizeBlockType(blockTypeOrName);return(0,serialize.ZP)(function getSaveElement(blockTypeOrName,attributes){let innerBlocks=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const blockType=utils_normalizeBlockType(blockTypeOrName);let{save:save}=blockType;if(save.prototype instanceof react.Component){const instance=new save({attributes:attributes});save=instance.render.bind(instance)}blockPropsProvider.blockType=blockType,blockPropsProvider.attributes=attributes,innerBlocksPropsProvider.innerBlocks=innerBlocks;let element=save({attributes:attributes,innerBlocks:innerBlocks});if(null!==element&&"object"==typeof element&&(0,hooks_build_module.H7)("blocks.getSaveContent.extraProps")&&!(blockType.apiVersion>1)){const props=(0,hooks_build_module.O)("blocks.getSaveContent.extraProps",{...element.props},blockType,attributes);(0,is_shallow_equal_build_module.ZP)(props,element.props)||(element=(0,react.cloneElement)(element,props))}return(0,hooks_build_module.O)("blocks.getSaveElement",element,blockType,attributes)}(blockType,attributes,innerBlocks))}function getCommentAttributes(blockType,attributes){var _blockType$attributes;return Object.entries(null!==(_blockType$attributes=blockType.attributes)&&void 0!==_blockType$attributes?_blockType$attributes:{}).reduce(((accumulator,_ref)=>{let[key,attributeSchema]=_ref;const value=attributes[key];return void 0===value||void 0!==attributeSchema.source||"default"in attributeSchema&&attributeSchema.default===value||(accumulator[key]=value),accumulator}),{})}function getBlockInnerHTML(block){let saveContent=block.originalContent;if(block.isValid||block.innerBlocks.length)try{saveContent=getSaveContent(block.name,block.attributes,block.innerBlocks)}catch(error){}return saveContent}function getCommentDelimitedContent(rawBlockName,attributes,content){const serializedAttributes=attributes&&Object.entries(attributes).length?function serializeAttributes(attributes){return JSON.stringify(attributes).replace(/--/g,"\\u002d\\u002d").replace(/</g,"\\u003c").replace(/>/g,"\\u003e").replace(/&/g,"\\u0026").replace(/\\"/g,"\\u0022")}(attributes)+" ":"",blockName=null!=rawBlockName&&rawBlockName.startsWith("core/")?rawBlockName.slice(5):rawBlockName;return content?`\x3c!-- wp:${blockName} ${serializedAttributes}--\x3e\n`+content+`\n\x3c!-- /wp:${blockName} --\x3e`:`\x3c!-- wp:${blockName} ${serializedAttributes}/--\x3e`}function __unstableSerializeAndClean(blocks){1===blocks.length&&isUnmodifiedDefaultBlock(blocks[0])&&(blocks=[]);let content=serializer_serialize(blocks);return 1===blocks.length&&blocks[0].name===getFreeformContentHandlerName()&&(content=(0,autop_build_module.A)(content)),content}function serializer_serialize(blocks,options){return(Array.isArray(blocks)?blocks:[blocks]).map((block=>function serializeBlock(block){let{isInnerBlocks:isInnerBlocks=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!block.isValid&&block.__unstableBlockSource)return serializeRawBlock(block.__unstableBlockSource);const blockName=block.name,saveContent=getBlockInnerHTML(block);if(blockName===getUnregisteredTypeHandlerName()||!isInnerBlocks&&blockName===getFreeformContentHandlerName())return saveContent;const blockType=getBlockType(blockName);if(!blockType)return saveContent;const saveAttributes=getCommentAttributes(blockType,block.attributes);return getCommentDelimitedContent(blockName,saveAttributes,saveContent)}(block,options))).join("\n\n")}var es6=__webpack_require__("./node_modules/simple-html-tokenizer/dist/es6/index.js"),fast_deep_equal_es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(fast_deep_equal_es6),html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js");function createLogger(){function createLogHandler(logger){return function(message){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return logger("Block validation: "+message,...args)}}return{error:createLogHandler(console.error),warning:createLogHandler(console.warn),getItems:()=>[]}}function createQueuedLogger(){const queue=[],logger=createLogger();return{error(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];queue.push({log:logger.error,args:args})},warning(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];queue.push({log:logger.warning,args:args})},getItems:()=>queue}}const REGEXP_WHITESPACE=/[\t\n\r\v\f ]+/g,REGEXP_ONLY_WHITESPACE=/^[\t\n\r\v\f ]*$/,REGEXP_STYLE_URL_TYPE=/^url\s*\(['"\s]*(.*?)['"\s]*\)$/,BOOLEAN_ATTRIBUTES=["allowfullscreen","allowpaymentrequest","allowusermedia","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","typemustmatch"],MEANINGFUL_ATTRIBUTES=[...BOOLEAN_ATTRIBUTES,"autocapitalize","autocomplete","charset","contenteditable","crossorigin","decoding","dir","draggable","enctype","formenctype","formmethod","http-equiv","inputmode","kind","method","preload","scope","shape","spellcheck","translate","type","wrap"],TEXT_NORMALIZATIONS=[x=>x,function getTextWithCollapsedWhitespace(text){return getTextPiecesSplitOnWhitespace(text).join(" ")}],REGEXP_NAMED_CHARACTER_REFERENCE=/^[\da-z]+$/i,REGEXP_DECIMAL_CHARACTER_REFERENCE=/^#\d+$/,REGEXP_HEXADECIMAL_CHARACTER_REFERENCE=/^#x[\da-f]+$/i;class DecodeEntityParser{parse(entity){if(function isValidCharacterReference(text){return REGEXP_NAMED_CHARACTER_REFERENCE.test(text)||REGEXP_DECIMAL_CHARACTER_REFERENCE.test(text)||REGEXP_HEXADECIMAL_CHARACTER_REFERENCE.test(text)}(entity))return(0,html_entities_build_module.S)("&"+entity+";")}}function getTextPiecesSplitOnWhitespace(text){return text.trim().split(REGEXP_WHITESPACE)}function getMeaningfulAttributePairs(token){return token.attributes.filter((pair=>{const[key,value]=pair;return value||0===key.indexOf("data-")||MEANINGFUL_ATTRIBUTES.includes(key)}))}function isEquivalentTextTokens(actual,expected){let logger=arguments.length>2&&void 0!==arguments[2]?arguments[2]:createLogger(),actualChars=actual.chars,expectedChars=expected.chars;for(let i=0;i<TEXT_NORMALIZATIONS.length;i++){const normalize=TEXT_NORMALIZATIONS[i];if(actualChars=normalize(actualChars),expectedChars=normalize(expectedChars),actualChars===expectedChars)return!0}return logger.warning("Expected text `%s`, saw `%s`.",expected.chars,actual.chars),!1}function getNormalizedLength(value){return 0===parseFloat(value)?"0":0===value.indexOf(".")?"0"+value:value}function getNormalizedStyleValue(value){return getTextPiecesSplitOnWhitespace(value).map(getNormalizedLength).join(" ").replace(REGEXP_STYLE_URL_TYPE,"url($1)")}function getStyleProperties(text){const pairs=text.replace(/;?\s*$/,"").split(";").map((style=>{const[key,...valueParts]=style.split(":"),value=valueParts.join(":");return[key.trim(),getNormalizedStyleValue(value.trim())]}));return Object.fromEntries(pairs)}const isEqualAttributesOfName={class:(actual,expected)=>{const[actualPieces,expectedPieces]=[actual,expected].map(getTextPiecesSplitOnWhitespace),actualDiff=actualPieces.filter((c=>!expectedPieces.includes(c))),expectedDiff=expectedPieces.filter((c=>!actualPieces.includes(c)));return 0===actualDiff.length&&0===expectedDiff.length},style:(actual,expected)=>es6_default()(...[actual,expected].map(getStyleProperties)),...Object.fromEntries(BOOLEAN_ATTRIBUTES.map((attribute=>[attribute,()=>!0])))};function isEqualTagAttributePairs(actual,expected){let logger=arguments.length>2&&void 0!==arguments[2]?arguments[2]:createLogger();if(actual.length!==expected.length)return logger.warning("Expected attributes %o, instead saw %o.",expected,actual),!1;const expectedAttributes={};for(let i=0;i<expected.length;i++)expectedAttributes[expected[i][0].toLowerCase()]=expected[i][1];for(let i=0;i<actual.length;i++){const[name,actualValue]=actual[i],nameLower=name.toLowerCase();if(!expectedAttributes.hasOwnProperty(nameLower))return logger.warning("Encountered unexpected attribute `%s`.",name),!1;const expectedValue=expectedAttributes[nameLower],isEqualAttributes=isEqualAttributesOfName[nameLower];if(isEqualAttributes){if(!isEqualAttributes(actualValue,expectedValue))return logger.warning("Expected attribute `%s` of value `%s`, saw `%s`.",name,expectedValue,actualValue),!1}else if(actualValue!==expectedValue)return logger.warning("Expected attribute `%s` of value `%s`, saw `%s`.",name,expectedValue,actualValue),!1}return!0}const isEqualTokensOfType={StartTag:function(actual,expected){let logger=arguments.length>2&&void 0!==arguments[2]?arguments[2]:createLogger();return actual.tagName!==expected.tagName&&actual.tagName.toLowerCase()!==expected.tagName.toLowerCase()?(logger.warning("Expected tag name `%s`, instead saw `%s`.",expected.tagName,actual.tagName),!1):isEqualTagAttributePairs(...[actual,expected].map(getMeaningfulAttributePairs),logger)},Chars:isEquivalentTextTokens,Comment:isEquivalentTextTokens};function getNextNonWhitespaceToken(tokens){let token;for(;token=tokens.shift();){if("Chars"!==token.type)return token;if(!REGEXP_ONLY_WHITESPACE.test(token.chars))return token}}function getHTMLTokens(html){let logger=arguments.length>1&&void 0!==arguments[1]?arguments[1]:createLogger();try{return new es6.d2(new DecodeEntityParser).tokenize(html)}catch(e){logger.warning("Malformed HTML detected: %s",html)}return null}function isClosedByToken(currentToken,nextToken){return!!currentToken.selfClosing&&!(!nextToken||nextToken.tagName!==currentToken.tagName||"EndTag"!==nextToken.type)}function isEquivalentHTML(actual,expected){let logger=arguments.length>2&&void 0!==arguments[2]?arguments[2]:createLogger();if(actual===expected)return!0;const[actualTokens,expectedTokens]=[actual,expected].map((html=>getHTMLTokens(html,logger)));if(!actualTokens||!expectedTokens)return!1;let actualToken,expectedToken;for(;actualToken=getNextNonWhitespaceToken(actualTokens);){if(expectedToken=getNextNonWhitespaceToken(expectedTokens),!expectedToken)return logger.warning("Expected end of content, instead saw %o.",actualToken),!1;if(actualToken.type!==expectedToken.type)return logger.warning("Expected token of type `%s` (%o), instead saw `%s` (%o).",expectedToken.type,expectedToken,actualToken.type,actualToken),!1;const isEqualTokens=isEqualTokensOfType[actualToken.type];if(isEqualTokens&&!isEqualTokens(actualToken,expectedToken,logger))return!1;isClosedByToken(actualToken,expectedTokens[0])?getNextNonWhitespaceToken(expectedTokens):isClosedByToken(expectedToken,actualTokens[0])&&getNextNonWhitespaceToken(actualTokens)}return!(expectedToken=getNextNonWhitespaceToken(expectedTokens))||(logger.warning("Expected %o, instead saw end of content.",expectedToken),!1)}function validateBlock(block){let blockTypeOrName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:block.name;const isFallbackBlock=block.name===getFreeformContentHandlerName()||block.name===getUnregisteredTypeHandlerName();if(isFallbackBlock)return[!0,[]];const logger=createQueuedLogger(),blockType=utils_normalizeBlockType(blockTypeOrName);let generatedBlockContent;try{generatedBlockContent=getSaveContent(blockType,block.attributes)}catch(error){return logger.error("Block validation failed because an error occurred while generating block content:\n\n%s",error.toString()),[!1,logger.getItems()]}const isValid=isEquivalentHTML(block.originalContent,generatedBlockContent,logger);return isValid||logger.error("Block validation failed for `%s` (%o).\n\nContent generated by `save` function:\n\n%s\n\nContent retrieved from post body:\n\n%s",blockType.name,blockType,generatedBlockContent,block.originalContent),[isValid,logger.getItems()]}function convertLegacyBlockNameAndAttributes(name,attributes){const newAttributes={...attributes};if("core/cover-image"===name&&(name="core/cover"),"core/text"!==name&&"core/cover-text"!==name||(name="core/paragraph"),name&&0===name.indexOf("core/social-link-")&&(newAttributes.service=name.substring(17),name="core/social-link"),name&&0===name.indexOf("core-embed/")){const providerSlug=name.substring(11),deprecated={speaker:"speaker-deck",polldaddy:"crowdsignal"};newAttributes.providerNameSlug=providerSlug in deprecated?deprecated[providerSlug]:providerSlug,["amazon-kindle","wordpress"].includes(providerSlug)||(newAttributes.responsive=!0),name="core/embed"}if("core/post-comment-author"===name&&(name="core/comment-author-name"),"core/post-comment-content"===name&&(name="core/comment-content"),"core/post-comment-date"===name&&(name="core/comment-date"),"core/comments-query-loop"===name){name="core/comments";const{className:className=""}=newAttributes;className.includes("wp-block-comments-query-loop")||(newAttributes.className=["wp-block-comments-query-loop",className].join(" "))}return"core/post-comments"===name&&(name="core/comments",newAttributes.legacy=!0),[name,newAttributes]}var es=__webpack_require__("./node_modules/hpq/es/index.js"),memize=__webpack_require__("./node_modules/memize/index.js");function getNamedNodeMapAsObject(nodeMap){const result={};for(let i=0;i<nodeMap.length;i++){const{name:name,value:value}=nodeMap[i];result[name]=value}return result}function fromDOM(domNode){if((0,deprecated_build_module.Z)("wp.blocks.node.fromDOM",{since:"6.1",version:"6.3",alternative:"wp.richText.create",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),domNode.nodeType===domNode.TEXT_NODE)return domNode.nodeValue;if(domNode.nodeType!==domNode.ELEMENT_NODE)throw new TypeError("A block node can only be created from a node of type text or element.");return{type:domNode.nodeName.toLowerCase(),props:{...getNamedNodeMapAsObject(domNode.attributes),children:children_fromDOM(domNode.childNodes)}}}function node_matcher(selector){return(0,deprecated_build_module.Z)("wp.blocks.node.matcher",{since:"6.1",version:"6.3",alternative:"html source",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),domNode=>{let match=domNode;selector&&(match=domNode.querySelector(selector));try{return fromDOM(match)}catch(error){return null}}}function children_fromDOM(domNodes){(0,deprecated_build_module.Z)("wp.blocks.children.fromDOM",{since:"6.1",version:"6.3",alternative:"wp.richText.create",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"});const result=[];for(let i=0;i<domNodes.length;i++)try{result.push(fromDOM(domNodes[i]))}catch(error){}return result}function children_toHTML(children){(0,deprecated_build_module.Z)("wp.blocks.children.toHTML",{since:"6.1",version:"6.3",alternative:"wp.richText.toHTMLString",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"});const element=children;return(0,serialize.ZP)(element)}function children_matcher(selector){return(0,deprecated_build_module.Z)("wp.blocks.children.matcher",{since:"6.1",version:"6.3",alternative:"html source",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),domNode=>{let match=domNode;return selector&&(match=domNode.querySelector(selector)),match?children_fromDOM(match.childNodes):[]}}var children={concat:function concat(){(0,deprecated_build_module.Z)("wp.blocks.children.concat",{since:"6.1",version:"6.3",alternative:"wp.richText.concat",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"});const result=[];for(var _len=arguments.length,blockNodes=new Array(_len),_key=0;_key<_len;_key++)blockNodes[_key]=arguments[_key];for(let i=0;i<blockNodes.length;i++){const blockNode=Array.isArray(blockNodes[i])?blockNodes[i]:[blockNodes[i]];for(let j=0;j<blockNode.length;j++){const child=blockNode[j];"string"==typeof child&&"string"==typeof result[result.length-1]?result[result.length-1]+=child:result.push(child)}}return result},getChildrenArray:function getChildrenArray(children){return(0,deprecated_build_module.Z)("wp.blocks.children.getChildrenArray",{since:"6.1",version:"6.3",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),children},fromDOM:children_fromDOM,toHTML:children_toHTML,matcher:children_matcher};function isOfTypes(value,types){return types.some((type=>function isOfType(value,type){switch(type){case"string":return"string"==typeof value;case"boolean":return"boolean"==typeof value;case"object":return!!value&&value.constructor===Object;case"null":return null===value;case"array":return Array.isArray(value);case"integer":case"number":return"number"==typeof value}return!0}(value,type)))}function getBlockAttribute(attributeKey,attributeSchema,innerDOM,commentAttributes,innerHTML){let value;switch(attributeSchema.source){case void 0:value=commentAttributes?commentAttributes[attributeKey]:void 0;break;case"raw":value=innerHTML;break;case"attribute":case"property":case"html":case"text":case"children":case"node":case"query":case"tag":value=parseWithAttributeSchema(innerDOM,attributeSchema)}return function isValidByType(value,type){return void 0===type||isOfTypes(value,Array.isArray(type)?type:[type])}(value,attributeSchema.type)&&function isValidByEnum(value,enumSet){return!Array.isArray(enumSet)||enumSet.includes(value)}(value,attributeSchema.enum)||(value=void 0),void 0===value&&(value=attributeSchema.default),value}const matcherFromSource=__webpack_require__.n(memize)()((sourceConfig=>{switch(sourceConfig.source){case"attribute":let matcher=(0,es.Lj)(sourceConfig.selector,sourceConfig.attribute);return"boolean"===sourceConfig.type&&(matcher=(matcher=>(0,pipe.Z)([matcher,value=>void 0!==value]))(matcher)),matcher;case"html":return function html(selector,multilineTag){return domNode=>{let match=domNode;if(selector&&(match=domNode.querySelector(selector)),!match)return"";if(multilineTag){let value="";const length=match.children.length;for(let index=0;index<length;index++){const child=match.children[index];child.nodeName.toLowerCase()===multilineTag&&(value+=child.outerHTML)}return value}return match.innerHTML}}(sourceConfig.selector,sourceConfig.multiline);case"text":return(0,es.fL)(sourceConfig.selector);case"children":return children_matcher(sourceConfig.selector);case"node":return node_matcher(sourceConfig.selector);case"query":const subMatchers=(0,lodash.mapValues)(sourceConfig.query,matcherFromSource);return(0,es.IO)(sourceConfig.selector,subMatchers);case"tag":return(0,pipe.Z)([(0,es.vg)(sourceConfig.selector,"nodeName"),nodeName=>nodeName?nodeName.toLowerCase():void 0]);default:console.error(`Unknown source type "${sourceConfig.source}"`)}}));function parseHtml(innerHTML){return(0,es.Qc)(innerHTML,(h=>h))}function parseWithAttributeSchema(innerHTML,attributeSchema){return matcherFromSource(attributeSchema)(parseHtml(innerHTML))}function getBlockAttributes(blockTypeOrName,innerHTML){let attributes=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const doc=parseHtml(innerHTML),blockType=utils_normalizeBlockType(blockTypeOrName),blockAttributes=(0,lodash.mapValues)(blockType.attributes,((schema,key)=>getBlockAttribute(key,schema,doc,attributes,innerHTML)));return(0,hooks_build_module.O)("blocks.getBlockAttributes",blockAttributes,blockType,innerHTML,attributes)}const CLASS_ATTR_SCHEMA={type:"string",source:"attribute",selector:"[data-custom-class-name] > *",attribute:"class"};function getHTMLRootElementClasses(innerHTML){const parsed=parseWithAttributeSchema(`<div data-custom-class-name>${innerHTML}</div>`,CLASS_ATTR_SCHEMA);return parsed?parsed.trim().split(/\s+/):[]}function applyBuiltInValidationFixes(block,blockType){const updatedBlockAttributes=function fixCustomClassname(blockAttributes,blockType,innerHTML){if(hasBlockSupport(blockType,"customClassName",!0)){const{className:omittedClassName,...attributesSansClassName}=blockAttributes,serialized=getSaveContent(blockType,attributesSansClassName),defaultClasses=getHTMLRootElementClasses(serialized),customClasses=getHTMLRootElementClasses(innerHTML).filter((className=>!defaultClasses.includes(className)));customClasses.length?blockAttributes.className=customClasses.join(" "):serialized&&delete blockAttributes.className}return blockAttributes}(block.attributes,blockType,block.originalContent);return{...block,attributes:updatedBlockAttributes}}function stubFalse(){return!1}function parseRawBlock(rawBlock,options){let normalizedBlock=function normalizeRawBlock(rawBlock,options){const fallbackBlockName=getFreeformContentHandlerName(),rawBlockName=rawBlock.blockName||getFreeformContentHandlerName(),rawAttributes=rawBlock.attrs||{},rawInnerBlocks=rawBlock.innerBlocks||[];let rawInnerHTML=rawBlock.innerHTML.trim();return rawBlockName!==fallbackBlockName||null!=options&&options.__unstableSkipAutop||(rawInnerHTML=(0,autop_build_module.u)(rawInnerHTML).trim()),{...rawBlock,blockName:rawBlockName,attrs:rawAttributes,innerHTML:rawInnerHTML,innerBlocks:rawInnerBlocks}}(rawBlock,options);normalizedBlock=function convertLegacyBlocks(rawBlock){const[correctName,correctedAttributes]=convertLegacyBlockNameAndAttributes(rawBlock.blockName,rawBlock.attrs);return{...rawBlock,blockName:correctName,attrs:correctedAttributes}}(normalizedBlock);let blockType=getBlockType(normalizedBlock.blockName);blockType||(normalizedBlock=function createMissingBlockType(rawBlock){const unregisteredFallbackBlock=getUnregisteredTypeHandlerName()||getFreeformContentHandlerName(),originalUndelimitedContent=serializeRawBlock(rawBlock,{isCommentDelimited:!1}),originalContent=serializeRawBlock(rawBlock,{isCommentDelimited:!0});return{blockName:unregisteredFallbackBlock,attrs:{originalName:rawBlock.blockName,originalContent:originalContent,originalUndelimitedContent:originalUndelimitedContent},innerHTML:rawBlock.blockName?originalContent:rawBlock.innerHTML,innerBlocks:rawBlock.innerBlocks,innerContent:rawBlock.innerContent}}(normalizedBlock),blockType=getBlockType(normalizedBlock.blockName));const isFallbackBlock=normalizedBlock.blockName===getFreeformContentHandlerName()||normalizedBlock.blockName===getUnregisteredTypeHandlerName();if(!blockType||!normalizedBlock.innerHTML&&isFallbackBlock)return;const parsedInnerBlocks=normalizedBlock.innerBlocks.map((innerBlock=>parseRawBlock(innerBlock,options))).filter((innerBlock=>!!innerBlock)),parsedBlock=createBlock(normalizedBlock.blockName,getBlockAttributes(blockType,normalizedBlock.innerHTML,normalizedBlock.attrs),parsedInnerBlocks);parsedBlock.originalContent=normalizedBlock.innerHTML;const validatedBlock=function applyBlockValidation(unvalidatedBlock,blockType){const[isValid]=validateBlock(unvalidatedBlock,blockType);if(isValid)return{...unvalidatedBlock,isValid:isValid,validationIssues:[]};const fixedBlock=applyBuiltInValidationFixes(unvalidatedBlock,blockType),[isFixedValid,validationIssues]=validateBlock(unvalidatedBlock,blockType);return{...fixedBlock,isValid:isFixedValid,validationIssues:validationIssues}}(parsedBlock,blockType),{validationIssues:validationIssues}=validatedBlock,updatedBlock=function applyBlockDeprecatedVersions(block,rawBlock,blockType){const parsedAttributes=rawBlock.attrs,{deprecated:deprecatedDefinitions}=blockType;if(!deprecatedDefinitions||!deprecatedDefinitions.length)return block;for(let i=0;i<deprecatedDefinitions.length;i++){const{isEligible:isEligible=stubFalse}=deprecatedDefinitions[i];if(block.isValid&&!isEligible(parsedAttributes,block.innerBlocks))continue;const deprecatedBlockType=Object.assign(omit(blockType,DEPRECATED_ENTRY_KEYS),deprecatedDefinitions[i]);let migratedBlock={...block,attributes:getBlockAttributes(deprecatedBlockType,block.originalContent,parsedAttributes)},[isValid]=validateBlock(migratedBlock,deprecatedBlockType);if(isValid||(migratedBlock=applyBuiltInValidationFixes(migratedBlock,deprecatedBlockType),[isValid]=validateBlock(migratedBlock,deprecatedBlockType)),!isValid)continue;let migratedInnerBlocks=migratedBlock.innerBlocks,migratedAttributes=migratedBlock.attributes;const{migrate:migrate}=deprecatedBlockType;if(migrate){let migrated=migrate(migratedAttributes,block.innerBlocks);Array.isArray(migrated)||(migrated=[migrated]),[migratedAttributes=parsedAttributes,migratedInnerBlocks=block.innerBlocks]=migrated}block={...block,attributes:migratedAttributes,innerBlocks:migratedInnerBlocks,isValid:!0,validationIssues:[]}}return block}(validatedBlock,normalizedBlock,blockType);return updatedBlock.isValid||(updatedBlock.__unstableBlockSource=rawBlock),validatedBlock.isValid||!updatedBlock.isValid||null!=options&&options.__unstableSkipMigrationLogs?validatedBlock.isValid||updatedBlock.isValid||validationIssues.forEach((_ref=>{let{log:log,args:args}=_ref;return log(...args)})):(console.groupCollapsed("Updated Block: %s",blockType.name),console.info("Block successfully updated for `%s` (%o).\n\nNew content generated by `save` function:\n\n%s\n\nContent retrieved from post body:\n\n%s",blockType.name,blockType,getSaveContent(blockType,updatedBlock.attributes),updatedBlock.originalContent),console.groupEnd()),updatedBlock}function parser_parse(content,options){return(doc=>{build_module_document=doc,offset=0,output=[],stack=[],tokenizer.lastIndex=0;do{}while(proceed());return output})(content).reduce(((accumulator,rawBlock)=>{const block=parseRawBlock(rawBlock,options);return block&&accumulator.push(block),accumulator}),[])}function getRawTransforms(){return getBlockTransforms("from").filter((_ref=>{let{type:type}=_ref;return"raw"===type})).map((transform=>transform.isMatch?transform:{...transform,isMatch:node=>transform.selector&&node.matches(transform.selector)}))}function htmlToBlocks(html,handler){const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=html,Array.from(doc.body.children).flatMap((node=>{const rawTransform=findTransform(getRawTransforms(),(_ref=>{let{isMatch:isMatch}=_ref;return isMatch(node)}));if(!rawTransform)return createBlock("core/html",getBlockAttributes("core/html",node.outerHTML));const{transform:transform,blockName:blockName}=rawTransform;return transform?transform(node,handler):createBlock(blockName,getBlockAttributes(blockName,node.outerHTML))}))}function isEmpty(element){switch(element.nodeType){case element.TEXT_NODE:return/^[ \f\n\r\t\v\u00a0]*$/.test(element.nodeValue||"");case element.ELEMENT_NODE:return!element.hasAttributes()&&(!element.hasChildNodes()||Array.from(element.childNodes).every(isEmpty));default:return!0}}const textContentSchema={strong:{},em:{},s:{},del:{},ins:{},a:{attributes:["href","target","rel","id"]},code:{},abbr:{attributes:["title"]},sub:{},sup:{},br:{},small:{},q:{attributes:["cite"]},dfn:{attributes:["title"]},data:{attributes:["value"]},time:{attributes:["datetime"]},var:{},samp:{},kbd:{},i:{},b:{},u:{},mark:{},ruby:{},rt:{},rp:{},bdi:{attributes:["dir"]},bdo:{attributes:["dir"]},wbr:{},"#text":{}},excludedElements=["#text","br"];Object.keys(textContentSchema).filter((element=>!excludedElements.includes(element))).forEach((tag=>{const{[tag]:removedTag,...restSchema}=textContentSchema;textContentSchema[tag].children=restSchema}));const phrasingContentSchema={...textContentSchema,audio:{attributes:["src","preload","autoplay","mediagroup","loop","muted"]},canvas:{attributes:["width","height"]},embed:{attributes:["src","type","width","height"]},img:{attributes:["alt","src","srcset","usemap","ismap","width","height"]},object:{attributes:["data","type","name","usemap","form","width","height"]},video:{attributes:["src","poster","preload","autoplay","mediagroup","loop","muted","controls","width","height"]}};function phrasing_content_getPhrasingContentSchema(context){if("paste"!==context)return phrasingContentSchema;const{u:u,abbr:abbr,data:data,time:time,wbr:wbr,bdi:bdi,bdo:bdo,...remainingContentSchema}={...phrasingContentSchema,ins:{children:phrasingContentSchema.ins.children},del:{children:phrasingContentSchema.del.children}};return remainingContentSchema}function isPhrasingContent(node){const tag=node.nodeName.toLowerCase();return phrasing_content_getPhrasingContentSchema().hasOwnProperty(tag)||"span"===tag}function isTextContent(node){const tag=node.nodeName.toLowerCase();return textContentSchema.hasOwnProperty(tag)||"span"===tag}function normaliseBlocks(HTML){const decuDoc=document.implementation.createHTMLDocument(""),accuDoc=document.implementation.createHTMLDocument(""),decu=decuDoc.body,accu=accuDoc.body;for(decu.innerHTML=HTML;decu.firstChild;){const node=decu.firstChild;node.nodeType===node.TEXT_NODE?isEmpty(node)?decu.removeChild(node):(accu.lastChild&&"P"===accu.lastChild.nodeName||accu.appendChild(accuDoc.createElement("P")),accu.lastChild.appendChild(node)):node.nodeType===node.ELEMENT_NODE?"BR"===node.nodeName?(node.nextSibling&&"BR"===node.nextSibling.nodeName&&(accu.appendChild(accuDoc.createElement("P")),decu.removeChild(node.nextSibling)),accu.lastChild&&"P"===accu.lastChild.nodeName&&accu.lastChild.hasChildNodes()?accu.lastChild.appendChild(node):decu.removeChild(node)):"P"===node.nodeName?isEmpty(node)?decu.removeChild(node):accu.appendChild(node):isPhrasingContent(node)?(accu.lastChild&&"P"===accu.lastChild.nodeName||accu.appendChild(accuDoc.createElement("P")),accu.lastChild.appendChild(node)):accu.appendChild(node):decu.removeChild(node)}return accu.innerHTML}isTextContent.__docgenInfo={description:"@param {Node} node\n@return {boolean} Node is text content",methods:[],displayName:"isTextContent"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/dom/build-module/phrasing-content.js"]={name:"isTextContent",docgenInfo:isTextContent.__docgenInfo,path:"packages/dom/build-module/phrasing-content.js"});var assert_is_defined=__webpack_require__("./packages/dom/build-module/utils/assert-is-defined.js");function insertAfter(newNode,referenceNode){(0,assert_is_defined.c)(referenceNode.parentNode,"referenceNode.parentNode"),referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling)}var remove=__webpack_require__("./packages/dom/build-module/dom/remove.js");function replace(processedNode,newNode){(0,assert_is_defined.c)(processedNode.parentNode,"processedNode.parentNode"),insertAfter(newNode,processedNode.parentNode),(0,remove.Z)(processedNode)}function specialCommentConverter(node,doc){node.nodeType===node.COMMENT_NODE&&("nextpage"!==node.nodeValue?0===node.nodeValue.indexOf("more")&&function moreCommentConverter(node,doc){const customText=node.nodeValue.slice(4).trim();let sibling=node,noTeaser=!1;for(;sibling=sibling.nextSibling;)if(sibling.nodeType===sibling.COMMENT_NODE&&"noteaser"===sibling.nodeValue){noTeaser=!0,(0,remove.Z)(sibling);break}const moreBlock=function createMore(customText,noTeaser,doc){const node=doc.createElement("wp-block");node.dataset.block="core/more",customText&&(node.dataset.customText=customText);noTeaser&&(node.dataset.noTeaser="");return node}(customText,noTeaser,doc);if(node.parentNode&&"P"===node.parentNode.nodeName&&1!==node.parentNode.childNodes.length){const childNodes=Array.from(node.parentNode.childNodes),nodeIndex=childNodes.indexOf(node),wrapperNode=node.parentNode.parentNode||doc.body,paragraphBuilder=(acc,child)=>(acc||(acc=doc.createElement("p")),acc.appendChild(child),acc);[childNodes.slice(0,nodeIndex).reduce(paragraphBuilder,null),moreBlock,childNodes.slice(nodeIndex+1).reduce(paragraphBuilder,null)].forEach((element=>element&&wrapperNode.insertBefore(element,node.parentNode))),(0,remove.Z)(node.parentNode)}else replace(node,moreBlock)}(node,doc):replace(node,function createNextpage(doc){const node=doc.createElement("wp-block");return node.dataset.block="core/nextpage",node}(doc)))}function unwrap(node){const parent=node.parentNode;for((0,assert_is_defined.c)(parent,"node.parentNode");node.firstChild;)parent.insertBefore(node.firstChild,node);parent.removeChild(node)}function isList(node){return"OL"===node.nodeName||"UL"===node.nodeName}function listReducer(node){if(!isList(node))return;const list=node,prevElement=node.previousElementSibling;if(prevElement&&prevElement.nodeName===node.nodeName&&1===list.children.length){for(;list.firstChild;)prevElement.appendChild(list.firstChild);list.parentNode.removeChild(list)}const parentElement=node.parentNode;if(parentElement&&"LI"===parentElement.nodeName&&1===parentElement.children.length&&!/\S/.test(function shallowTextContent(element){return Array.from(element.childNodes).map((_ref=>{let{nodeValue:nodeValue=""}=_ref;return nodeValue})).join("")}(parentElement))){const parentListItem=parentElement,prevListItem=parentListItem.previousElementSibling,parentList=parentListItem.parentNode;prevListItem?(prevListItem.appendChild(list),parentList.removeChild(parentListItem)):(parentList.parentNode.insertBefore(list,parentList),parentList.parentNode.removeChild(parentList))}if(parentElement&&isList(parentElement)){const prevListItem=node.previousElementSibling;prevListItem?prevListItem.appendChild(node):unwrap(node)}}function blockquoteNormaliser(node){"BLOCKQUOTE"===node.nodeName&&(node.innerHTML=normaliseBlocks(node.innerHTML))}function wrapFigureContent(element){let beforeElement=arguments.length>1&&void 0!==arguments[1]?arguments[1]:element;const figure=element.ownerDocument.createElement("figure");beforeElement.parentNode.insertBefore(figure,beforeElement),figure.appendChild(element)}function figureContentReducer(node,doc,schema){if(!function isFigureContent(node,schema){var _schema$figure$childr,_schema$figure;const tag=node.nodeName.toLowerCase();return"figcaption"!==tag&&!isTextContent(node)&&tag in(null!==(_schema$figure$childr=null==schema||null===(_schema$figure=schema.figure)||void 0===_schema$figure?void 0:_schema$figure.children)&&void 0!==_schema$figure$childr?_schema$figure$childr:{})}(node,schema))return;let nodeToInsert=node;const parentNode=node.parentNode;(function canHaveAnchor(node,schema){var _schema$figure$childr2,_schema$figure2,_schema$figure2$child,_schema$figure2$child2;return node.nodeName.toLowerCase()in(null!==(_schema$figure$childr2=null==schema||null===(_schema$figure2=schema.figure)||void 0===_schema$figure2||null===(_schema$figure2$child=_schema$figure2.children)||void 0===_schema$figure2$child||null===(_schema$figure2$child2=_schema$figure2$child.a)||void 0===_schema$figure2$child2?void 0:_schema$figure2$child2.children)&&void 0!==_schema$figure$childr2?_schema$figure$childr2:{})})(node,schema)&&"A"===parentNode.nodeName&&1===parentNode.childNodes.length&&(nodeToInsert=node.parentNode);const wrapper=nodeToInsert.closest("p,div");wrapper?node.classList?(node.classList.contains("alignright")||node.classList.contains("alignleft")||node.classList.contains("aligncenter")||!wrapper.textContent.trim())&&wrapFigureContent(nodeToInsert,wrapper):wrapFigureContent(nodeToInsert,wrapper):"BODY"===nodeToInsert.parentNode.nodeName&&wrapFigureContent(nodeToInsert)}var shortcode_build_module=__webpack_require__("./packages/shortcode/build-module/index.js");const castArray=maybeArray=>Array.isArray(maybeArray)?maybeArray:[maybeArray];var shortcode_converter=function segmentHTMLToShortcodeBlock(HTML){let lastIndex=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,excludedBlockNames=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const transformsFrom=getBlockTransforms("from"),transformation=findTransform(transformsFrom,(transform=>-1===excludedBlockNames.indexOf(transform.blockName)&&"shortcode"===transform.type&&castArray(transform.tag).some((tag=>(0,shortcode_build_module.kd)(tag).test(HTML)))));if(!transformation)return[HTML];const transformTags=castArray(transformation.tag),transformTag=transformTags.find((tag=>(0,shortcode_build_module.kd)(tag).test(HTML)));let match;const previousIndex=lastIndex;if(match=(0,shortcode_build_module.lp)(transformTag,HTML,lastIndex)){var _match$shortcode$cont;lastIndex=match.index+match.content.length;const beforeHTML=HTML.substr(0,match.index),afterHTML=HTML.substr(lastIndex);if(!(null!==(_match$shortcode$cont=match.shortcode.content)&&void 0!==_match$shortcode$cont&&_match$shortcode$cont.includes("<")||/(\n|<p>)\s*$/.test(beforeHTML)&&/^\s*(\n|<\/p>)/.test(afterHTML)))return segmentHTMLToShortcodeBlock(HTML,lastIndex);if(transformation.isMatch&&!transformation.isMatch(match.shortcode.attrs))return segmentHTMLToShortcodeBlock(HTML,previousIndex,[...excludedBlockNames,transformation.blockName]);let blocks=[];if("function"==typeof transformation.transform)blocks=[].concat(transformation.transform(match.shortcode.attrs,match)),blocks=blocks.map((block=>(block.originalContent=match.shortcode.content,applyBuiltInValidationFixes(block,getBlockType(block.name)))));else{const attributes=Object.fromEntries(Object.entries(transformation.attributes).filter((_ref=>{let[,schema]=_ref;return schema.shortcode})).map((_ref2=>{let[key,schema]=_ref2;return[key,schema.shortcode(match.shortcode.attrs,match)]}))),blockType=getBlockType(transformation.blockName);if(!blockType)return[HTML];const transformationBlockType={...blockType,attributes:transformation.attributes};let block=createBlock(transformation.blockName,getBlockAttributes(transformationBlockType,match.shortcode.content,attributes));block.originalContent=match.shortcode.content,block=applyBuiltInValidationFixes(block,transformationBlockType),blocks=[block]}return[...segmentHTMLToShortcodeBlock(beforeHTML),...blocks,...segmentHTMLToShortcodeBlock(afterHTML)]}return[HTML]};function getBlockContentSchema(context){return function getBlockContentSchemaFromTransforms(transforms,context){const schemaArgs={phrasingContentSchema:phrasing_content_getPhrasingContentSchema(context),isPaste:"paste"===context},schemas=transforms.map((_ref=>{let{isMatch:isMatch,blockName:blockName,schema:schema}=_ref;const hasAnchorSupport=hasBlockSupport(blockName,"anchor");return schema="function"==typeof schema?schema(schemaArgs):schema,hasAnchorSupport||isMatch?(0,lodash.mapValues)(schema,(value=>{let attributes=value.attributes||[];return hasAnchorSupport&&(attributes=[...attributes,"id"]),{...value,attributes:attributes,isMatch:isMatch||void 0}})):schema}));return(0,lodash.mergeWith)({},...schemas,((objValue,srcValue,key)=>{switch(key){case"children":return"*"===objValue||"*"===srcValue?"*":{...objValue,...srcValue};case"attributes":case"require":return[...objValue||[],...srcValue||[]];case"isMatch":if(!objValue||!srcValue)return;return function(){return objValue(...arguments)||srcValue(...arguments)}}}))}(getRawTransforms(),context)}function deepFilterNodeList(nodeList,filters,doc,schema){Array.from(nodeList).forEach((node=>{deepFilterNodeList(node.childNodes,filters,doc,schema),filters.forEach((item=>{doc.contains(node)&&item(node,doc,schema)}))}))}function deepFilterHTML(HTML){let filters=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],schema=arguments.length>2?arguments[2]:void 0;const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=HTML,deepFilterNodeList(doc.body.childNodes,filters,doc,schema),doc.body.innerHTML}function getSibling(node,which){const sibling=node[`${which}Sibling`];if(sibling&&isPhrasingContent(sibling))return sibling;const{parentNode:parentNode}=node;return parentNode&&isPhrasingContent(parentNode)?getSibling(parentNode,which):void 0}function rawHandler(_ref){let{HTML:HTML=""}=_ref;if(-1!==HTML.indexOf("\x3c!-- wp:"))return parser_parse(HTML);const pieces=shortcode_converter(HTML),blockContentSchema=getBlockContentSchema();return pieces.map((piece=>{if("string"!=typeof piece)return piece;return htmlToBlocks(piece=normaliseBlocks(piece=deepFilterHTML(piece,[listReducer,specialCommentConverter,figureContentReducer,blockquoteNormaliser],blockContentSchema)),rawHandler)})).flat().filter(Boolean)}const noop=()=>{};function cleanNodeList(nodeList,doc,schema,inline){Array.from(nodeList).forEach((node=>{var _schema$tag$isMatch,_schema$tag;const tag=node.nodeName.toLowerCase();if(schema.hasOwnProperty(tag)&&(!schema[tag].isMatch||null!==(_schema$tag$isMatch=(_schema$tag=schema[tag]).isMatch)&&void 0!==_schema$tag$isMatch&&_schema$tag$isMatch.call(_schema$tag,node))){if(function isElement(node){return!!node&&node.nodeType===node.ELEMENT_NODE}(node)){const{attributes:attributes=[],classes:classes=[],children:children,require:require=[],allowEmpty:allowEmpty}=schema[tag];if(children&&!allowEmpty&&isEmpty(node))return void(0,remove.Z)(node);if(node.hasAttributes()&&(Array.from(node.attributes).forEach((_ref=>{let{name:name}=_ref;"class"===name||attributes.includes(name)||node.removeAttribute(name)})),node.classList&&node.classList.length)){const mattchers=classes.map((item=>"string"==typeof item?className=>className===item:item instanceof RegExp?className=>item.test(className):noop));Array.from(node.classList).forEach((name=>{mattchers.some((isMatch=>isMatch(name)))||node.classList.remove(name)})),node.classList.length||node.removeAttribute("class")}if(node.hasChildNodes()){if("*"===children)return;if(children)require.length&&!node.querySelector(require.join(","))?(cleanNodeList(node.childNodes,doc,schema,inline),unwrap(node)):node.parentNode&&"BODY"===node.parentNode.nodeName&&isPhrasingContent(node)?(cleanNodeList(node.childNodes,doc,schema,inline),Array.from(node.childNodes).some((child=>!isPhrasingContent(child)))&&unwrap(node)):cleanNodeList(node.childNodes,doc,children,inline);else for(;node.firstChild;)(0,remove.Z)(node.firstChild)}}}else cleanNodeList(node.childNodes,doc,schema,inline),inline&&!isPhrasingContent(node)&&node.nextElementSibling&&insertAfter(doc.createElement("br"),node),unwrap(node)}))}function removeInvalidHTML(HTML,schema,inline){const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=HTML,cleanNodeList(doc.body.childNodes,doc,schema,inline),doc.body.innerHTML}function commentRemover(node){node.nodeType===node.COMMENT_NODE&&(0,remove.Z)(node)}function deepCheck(nodes,contextTag){return nodes.every((node=>function isInline(node,contextTag){if(isTextContent(node))return!0;if(!contextTag)return!1;const tag=node.nodeName.toLowerCase();return[["ul","li","ol"],["h1","h2","h3","h4","h5","h6"]].some((tagGroup=>0===[tag,contextTag].filter((t=>!tagGroup.includes(t))).length))}(node,contextTag)&&deepCheck(Array.from(node.children),contextTag)))}function isDoubleBR(node){return"BR"===node.nodeName&&node.previousSibling&&"BR"===node.previousSibling.nodeName}function wrap(newNode,referenceNode){(0,assert_is_defined.c)(referenceNode.parentNode,"referenceNode.parentNode"),referenceNode.parentNode.insertBefore(newNode,referenceNode),newNode.appendChild(referenceNode)}function replaceTag(node,tagName){const newNode=node.ownerDocument.createElement(tagName);for(;node.firstChild;)newNode.appendChild(node.firstChild);return(0,assert_is_defined.c)(node.parentNode,"node.parentNode"),node.parentNode.replaceChild(newNode,node),newNode}function phrasingContentReducer(node,doc){if("SPAN"===node.nodeName&&node.style){const{fontWeight:fontWeight,fontStyle:fontStyle,textDecorationLine:textDecorationLine,textDecoration:textDecoration,verticalAlign:verticalAlign}=node.style;"bold"!==fontWeight&&"700"!==fontWeight||wrap(doc.createElement("strong"),node),"italic"===fontStyle&&wrap(doc.createElement("em"),node),("line-through"===textDecorationLine||textDecoration.includes("line-through"))&&wrap(doc.createElement("s"),node),"super"===verticalAlign?wrap(doc.createElement("sup"),node):"sub"===verticalAlign&&wrap(doc.createElement("sub"),node)}else"B"===node.nodeName?node=replaceTag(node,"strong"):"I"===node.nodeName?node=replaceTag(node,"em"):"A"===node.nodeName&&(node.target&&"_blank"===node.target.toLowerCase()?node.rel="noreferrer noopener":(node.removeAttribute("target"),node.removeAttribute("rel")),node.name&&!node.id&&(node.id=node.name),node.id&&!node.ownerDocument.querySelector(`[href="#${node.id}"]`)&&node.removeAttribute("id"))}function headRemover(node){"SCRIPT"!==node.nodeName&&"NOSCRIPT"!==node.nodeName&&"TEMPLATE"!==node.nodeName&&"STYLE"!==node.nodeName||node.parentNode.removeChild(node)}const{parseInt:ms_list_converter_parseInt}=window;function ms_list_converter_isList(node){return"OL"===node.nodeName||"UL"===node.nodeName}function msListConverter(node,doc){if("P"!==node.nodeName)return;const style=node.getAttribute("style");if(!style)return;if(-1===style.indexOf("mso-list"))return;const matches=/mso-list\s*:[^;]+level([0-9]+)/i.exec(style);if(!matches)return;let level=ms_list_converter_parseInt(matches[1],10)-1||0;const prevNode=node.previousElementSibling;if(!prevNode||!ms_list_converter_isList(prevNode)){const type=node.textContent.trim().slice(0,1),isNumeric=/[1iIaA]/.test(type),newListNode=doc.createElement(isNumeric?"ol":"ul");isNumeric&&newListNode.setAttribute("type",type),node.parentNode.insertBefore(newListNode,node)}const listNode=node.previousElementSibling,listType=listNode.nodeName,listItem=doc.createElement("li");let receivingNode=listNode;for(node.removeChild(node.firstChild);node.firstChild;)listItem.appendChild(node.firstChild);for(;level--;)receivingNode=receivingNode.lastChild||receivingNode,ms_list_converter_isList(receivingNode)&&(receivingNode=receivingNode.lastChild||receivingNode);ms_list_converter_isList(receivingNode)||(receivingNode=receivingNode.appendChild(doc.createElement(listType))),receivingNode.appendChild(listItem),node.parentNode.removeChild(node)}var blob_build_module=__webpack_require__("./packages/blob/build-module/index.js");const{atob:atob,File:File}=window;function imageCorrector(node){if("IMG"===node.nodeName){if(0===node.src.indexOf("file:")&&(node.src=""),0===node.src.indexOf("data:")){const[properties,data]=node.src.split(","),[type]=properties.slice(5).split(";");if(!data||!type)return void(node.src="");let decoded;try{decoded=atob(data)}catch(e){return void(node.src="")}const uint8Array=new Uint8Array(decoded.length);for(let i=0;i<uint8Array.length;i++)uint8Array[i]=decoded.charCodeAt(i);const name=type.replace("/","."),file=new File([uint8Array],name,{type:type});node.src=(0,blob_build_module.ZR)(file)}1!==node.height&&1!==node.width||node.parentNode.removeChild(node)}}function divNormaliser(node){"DIV"===node.nodeName&&(node.innerHTML=normaliseBlocks(node.innerHTML))}var showdown=__webpack_require__("./node_modules/showdown/dist/showdown.js");const converter=new(__webpack_require__.n(showdown)().Converter)({noHeaderId:!0,tables:!0,literalMidWordUnderscores:!0,omitExtraWLInCodeBlocks:!0,simpleLineBreaks:!0,strikethrough:!0});function iframeRemover(node){if("IFRAME"===node.nodeName){const text=node.ownerDocument.createTextNode(node.src);node.parentNode.replaceChild(text,node)}}function googleDocsUIdRemover(node){node.id&&0===node.id.indexOf("docs-internal-guid-")&&("B"===node.tagName?unwrap(node):node.removeAttribute("id"))}function htmlFormattingRemover(node){if(node.nodeType!==node.TEXT_NODE)return;let parent=node;for(;parent=parent.parentNode;)if(parent.nodeType===parent.ELEMENT_NODE&&"PRE"===parent.nodeName)return;let newData=node.data.replace(/[ \r\n\t]+/g," ");if(" "===newData[0]){const previousSibling=getSibling(node,"previous");previousSibling&&"BR"!==previousSibling.nodeName&&" "!==previousSibling.textContent.slice(-1)||(newData=newData.slice(1))}if(" "===newData[newData.length-1]){const nextSibling=getSibling(node,"next");(!nextSibling||"BR"===nextSibling.nodeName||nextSibling.nodeType===nextSibling.TEXT_NODE&&function isFormattingSpace(character){return" "===character||"\r"===character||"\n"===character||"\t"===character}(nextSibling.textContent[0]))&&(newData=newData.slice(0,-1))}newData?node.data=newData:node.parentNode.removeChild(node)}function brRemover(node){"BR"===node.nodeName&&(getSibling(node,"next")||node.parentNode.removeChild(node))}function emptyParagraphRemover(node){"P"===node.nodeName&&(node.hasChildNodes()||node.parentNode.removeChild(node))}function slackParagraphCorrector(node){if("SPAN"!==node.nodeName)return;if("paragraph-break"!==node.getAttribute("data-stringify-type"))return;const{parentNode:parentNode}=node;parentNode.insertBefore(node.ownerDocument.createElement("br"),node),parentNode.insertBefore(node.ownerDocument.createElement("br"),node),parentNode.removeChild(node)}const{console:paste_handler_console}=window;function filterInlineHTML(HTML,preserveWhiteSpace){return HTML=removeInvalidHTML(HTML=deepFilterHTML(HTML,[headRemover,googleDocsUIdRemover,phrasingContentReducer,commentRemover]),phrasing_content_getPhrasingContentSchema("paste"),{inline:!0}),preserveWhiteSpace||(HTML=deepFilterHTML(HTML,[htmlFormattingRemover,brRemover])),paste_handler_console.log("Processed inline HTML:\n\n",HTML),HTML}function pasteHandler(_ref){let{HTML:HTML="",plainText:plainText="",mode:mode="AUTO",tagName:tagName,preserveWhiteSpace:preserveWhiteSpace}=_ref;if(HTML=HTML.replace(/<meta[^>]+>/g,""),HTML=HTML.replace(/^\s*<html[^>]*>\s*<body[^>]*>(?:\s*<!--\s*StartFragment\s*-->)?/i,""),HTML=HTML.replace(/(?:<!--\s*EndFragment\s*-->\s*)?<\/body>\s*<\/html>\s*$/i,""),"INLINE"!==mode){const content=HTML||plainText;if(-1!==content.indexOf("\x3c!-- wp:"))return parser_parse(content)}if(String.prototype.normalize&&(HTML=HTML.normalize()),!plainText||HTML&&!function isPlain(HTML){return!/<(?!br[ />])/i.test(HTML)}(HTML)||(HTML=plainText,/^\s+$/.test(plainText)||(HTML=function markdownConverter(text){return converter.makeHtml(function slackMarkdownVariantCorrector(text){return text.replace(/((?:^|\n)```)([^\n`]+)(```(?:$|\n))/,((match,p1,p2,p3)=>`${p1}\n${p2}\n${p3}`))}(function bulletsToAsterisks(text){return text.replace(/(^|\n)•( +)/g,"$1*$2")}(text)))}(HTML)),"AUTO"===mode&&-1===plainText.indexOf("\n")&&0!==plainText.indexOf("<p>")&&0===HTML.indexOf("<p>")&&(mode="INLINE")),"INLINE"===mode)return filterInlineHTML(HTML,preserveWhiteSpace);HTML=deepFilterHTML(HTML,[slackParagraphCorrector]);const pieces=shortcode_converter(HTML),hasShortcodes=pieces.length>1;if("AUTO"===mode&&!hasShortcodes&&function isInlineContent(HTML,contextTag){const doc=document.implementation.createHTMLDocument("");doc.body.innerHTML=HTML;const nodes=Array.from(doc.body.children);return!nodes.some(isDoubleBR)&&deepCheck(nodes,contextTag)}(HTML,tagName))return filterInlineHTML(HTML,preserveWhiteSpace);const phrasingContentSchema=phrasing_content_getPhrasingContentSchema("paste"),blockContentSchema=getBlockContentSchema("paste"),blocks=pieces.map((piece=>{if("string"!=typeof piece)return piece;const filters=[googleDocsUIdRemover,msListConverter,headRemover,listReducer,imageCorrector,phrasingContentReducer,specialCommentConverter,commentRemover,iframeRemover,figureContentReducer,blockquoteNormaliser,divNormaliser],schema={...blockContentSchema,...phrasingContentSchema};return piece=deepFilterHTML(piece,filters,blockContentSchema),piece=deepFilterHTML(piece=normaliseBlocks(piece=removeInvalidHTML(piece,schema)),[htmlFormattingRemover,brRemover,emptyParagraphRemover],blockContentSchema),paste_handler_console.log("Processed HTML piece:\n\n",piece),htmlToBlocks(piece,pasteHandler)})).flat().filter(Boolean);if("AUTO"===mode&&1===blocks.length&&hasBlockSupport(blocks[0].name,"__unstablePasteTextInline",!1)){const trimRegex=/^[\n]+|[\n]+$/g,trimmedPlainText=plainText.replace(trimRegex,"");if(""!==trimmedPlainText&&-1===trimmedPlainText.indexOf("\n"))return removeInvalidHTML(getBlockInnerHTML(blocks[0]),phrasingContentSchema).replace(trimRegex,"")}return blocks}function doBlocksMatchTemplate(){let blocks=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],template=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return blocks.length===template.length&&template.every(((_ref,index)=>{let[name,,innerBlocksTemplate]=_ref;const block=blocks[index];return name===block.name&&doBlocksMatchTemplate(block.innerBlocks,innerBlocksTemplate)}))}function synchronizeBlocksWithTemplate(){let blocks=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],template=arguments.length>1?arguments[1]:void 0;return template?template.map(((_ref2,index)=>{var _blockType$attributes;let[name,attributes,innerBlocksTemplate]=_ref2;const block=blocks[index];if(block&&block.name===name){const innerBlocks=synchronizeBlocksWithTemplate(block.innerBlocks,innerBlocksTemplate);return{...block,innerBlocks:innerBlocks}}const blockType=getBlockType(name),normalizeAttributes=(schema,values)=>values?Object.fromEntries(Object.entries(values).map((_ref3=>{let[key,value]=_ref3;return[key,normalizeAttribute(schema[key],value)]}))):{},normalizeAttribute=(definition,value)=>{return"html"===(null==(attributeDefinition=definition)?void 0:attributeDefinition.source)&&Array.isArray(value)?(0,serialize.ZP)(value):(attributeDefinition=>"query"===(null==attributeDefinition?void 0:attributeDefinition.source))(definition)&&value?value.map((subValues=>normalizeAttributes(definition.query,subValues))):value;var attributeDefinition},normalizedAttributes=normalizeAttributes(null!==(_blockType$attributes=null==blockType?void 0:blockType.attributes)&&void 0!==_blockType$attributes?_blockType$attributes:{},attributes);let[blockName,blockAttributes]=convertLegacyBlockNameAndAttributes(name,normalizedAttributes);return void 0===getBlockType(blockName)&&(blockAttributes={originalName:name,originalContent:"",originalUndelimitedContent:""},blockName="core/missing"),createBlock(blockName,blockAttributes,synchronizeBlocksWithTemplate([],innerBlocksTemplate))})):blocks}},"./packages/compose/build-module/higher-order/compose.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){const compose=(0,__webpack_require__("./packages/compose/build-module/higher-order/pipe.js").d)(!0);__webpack_exports__.Z=compose},"./packages/compose/build-module/higher-order/pipe.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{d:function(){return basePipe}});const basePipe=function(){let reverse=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(){for(var _len=arguments.length,funcs=new Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];return function(){const functions=funcs.flat();reverse&&functions.reverse();for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return functions.reduce(((prev,func)=>[func(...prev)]),args)[0]}}},pipe=basePipe();__webpack_exports__.Z=pipe},"./packages/compose/build-module/hooks/use-isomorphic-layout-effect/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const useIsomorphicLayoutEffect="undefined"!=typeof window?_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect;__webpack_exports__.Z=useIsomorphicLayoutEffect},"./packages/data/build-module/components/async-mode-provider/context.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{_y:function(){return Context}});const Context=(0,__webpack_require__("./node_modules/react/index.js").createContext)(!1),{Consumer:Consumer,Provider:Provider}=Context;__webpack_exports__.ZP=Provider},"./packages/data/build-module/components/registry-provider/context.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{_y:function(){return Context},yE:function(){return RegistryConsumer}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_default_registry__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/data/build-module/default-registry.js");const Context=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createContext)(_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z),{Consumer:Consumer,Provider:Provider}=Context,RegistryConsumer=Consumer;__webpack_exports__.ZP=Provider},"./packages/data/build-module/components/registry-provider/use-registry.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useRegistry}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/data/build-module/components/registry-provider/context.js");function useRegistry(){return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_1__._y)}},"./packages/data/build-module/components/use-select/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useSelect}});var use_memo_one_esm=__webpack_require__("./node_modules/use-memo-one/dist/use-memo-one.esm.js"),build_module=__webpack_require__("./packages/priority-queue/build-module/index.js"),react=__webpack_require__("./node_modules/react/index.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js"),use_isomorphic_layout_effect=__webpack_require__("./packages/compose/build-module/hooks/use-isomorphic-layout-effect/index.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),context=__webpack_require__("./packages/data/build-module/components/async-mode-provider/context.js");const noop=()=>{},renderQueue=(0,build_module.j)();function useSelect(mapSelect,deps){const hasMappingFunction="function"==typeof mapSelect;hasMappingFunction||(deps=[]);const callbackMapper=(0,react.useCallback)(hasMappingFunction?mapSelect:noop,deps),_mapSelect=hasMappingFunction?callbackMapper:null,registry=(0,use_registry.Z)(),isAsync=function use_async_mode_useAsyncMode(){return(0,react.useContext)(context._y)}(),latestRegistry=(0,react.useRef)(registry),latestMapSelect=(0,react.useRef)(),latestIsAsync=(0,react.useRef)(isAsync),latestMapOutput=(0,react.useRef)(),latestMapOutputError=(0,react.useRef)(),listeningStores=(0,react.useRef)([]),wrapSelect=(0,react.useCallback)((callback=>registry.__unstableMarkListeningStores((()=>callback(registry.select,registry)),listeningStores)),[registry]),depsChangedFlag=(0,react.useMemo)((()=>({})),deps||[]);let mapOutput,selectorRan=!1;if(_mapSelect){mapOutput=latestMapOutput.current;const hasReplacedRegistry=latestRegistry.current!==registry,hasReplacedMapSelect=latestMapSelect.current!==_mapSelect,hasLeftAsyncMode=latestIsAsync.current&&!isAsync,lastMapSelectFailed=!!latestMapOutputError.current;if(hasReplacedRegistry||hasReplacedMapSelect||hasLeftAsyncMode||lastMapSelectFailed)try{mapOutput=wrapSelect(_mapSelect),selectorRan=!0}catch(error){let errorMessage=`An error occurred while running 'mapSelect': ${error.message}`;latestMapOutputError.current&&(errorMessage+="\nThe error may be correlated with this previous error:\n",errorMessage+=`${latestMapOutputError.current.stack}\n\n`,errorMessage+="Original stack trace:"),console.error(errorMessage)}}(0,use_isomorphic_layout_effect.Z)((()=>{hasMappingFunction&&(latestRegistry.current=registry,latestMapSelect.current=_mapSelect,latestIsAsync.current=isAsync,selectorRan&&(latestMapOutput.current=mapOutput),latestMapOutputError.current=void 0)}));const queueContext=(0,use_memo_one_esm.Pr)((()=>({queue:!0})),[registry]),[,forceRender]=(0,react.useReducer)((s=>s+1),0),isMounted=(0,react.useRef)(!1);return(0,use_isomorphic_layout_effect.Z)((()=>{if(!hasMappingFunction)return;const onStoreChange=()=>{try{const newMapOutput=wrapSelect(latestMapSelect.current);if((0,is_shallow_equal_build_module.ZP)(latestMapOutput.current,newMapOutput))return;latestMapOutput.current=newMapOutput}catch(error){latestMapOutputError.current=error}forceRender()},onChange=()=>{isMounted.current&&(latestIsAsync.current?renderQueue.add(queueContext,onStoreChange):onStoreChange())};onStoreChange();const unsubscribers=listeningStores.current.map((storeName=>registry.subscribe(onChange,storeName)));return isMounted.current=!0,()=>{unsubscribers.forEach((unsubscribe=>null==unsubscribe?void 0:unsubscribe())),renderQueue.cancel(queueContext),isMounted.current=!1}}),[registry,wrapSelect,hasMappingFunction,depsChangedFlag]),(0,react.useDebugValue)(mapOutput),hasMappingFunction?mapOutput:registry.select(mapSelect)}},"./packages/data/build-module/default-registry.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _registry__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/data/build-module/registry.js");__webpack_exports__.Z=(0,_registry__WEBPACK_IMPORTED_MODULE_0__.p)()},"./packages/data/build-module/factory.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function createRegistrySelector(registrySelector){const selector=function(){return registrySelector(selector.registry.select)(...arguments)};return selector.isRegistrySelector=!0,selector}function createRegistryControl(registryControl){return registryControl.isRegistryControl=!0,registryControl}__webpack_require__.d(__webpack_exports__,{M:function(){return createRegistrySelector},R:function(){return createRegistryControl}})},"./packages/data/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{UY:function(){return combineReducers},Ys:function(){return select},WI:function(){return dispatch},R9:function(){return registerStore},z2:function(){return register}});var turbo_combine_reducers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/turbo-combine-reducers/index.js"),turbo_combine_reducers__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(turbo_combine_reducers__WEBPACK_IMPORTED_MODULE_0__),_default_registry__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/data/build-module/default-registry.js");const combineReducers=turbo_combine_reducers__WEBPACK_IMPORTED_MODULE_0___default(),select=_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.select,dispatch=(_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.resolveSelect,_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.suspendSelect,_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.dispatch),registerStore=(_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.subscribe,_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.registerGenericStore,_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.registerStore),register=(_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.use,_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.register)},"./packages/data/build-module/redux-store/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return createReduxStore}});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{getCachedResolvers:function(){return getCachedResolvers},getIsResolving:function(){return getIsResolving},getResolutionError:function(){return getResolutionError},getResolutionState:function(){return getResolutionState},hasFinishedResolution:function(){return hasFinishedResolution},hasResolutionFailed:function(){return hasResolutionFailed},hasStartedResolution:function(){return hasStartedResolution},isResolving:function(){return isResolving}});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{failResolution:function(){return failResolution},failResolutions:function(){return failResolutions},finishResolution:function(){return finishResolution},finishResolutions:function(){return finishResolutions},invalidateResolution:function(){return invalidateResolution},invalidateResolutionForStore:function(){return invalidateResolutionForStore},invalidateResolutionForStoreSelector:function(){return invalidateResolutionForStoreSelector},startResolution:function(){return startResolution},startResolutions:function(){return startResolutions}});var redux=__webpack_require__("./node_modules/redux/es/redux.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),turbo_combine_reducers=__webpack_require__("./node_modules/turbo-combine-reducers/index.js"),turbo_combine_reducers_default=__webpack_require__.n(turbo_combine_reducers),equivalent_key_map=__webpack_require__("./node_modules/equivalent-key-map/equivalent-key-map.js"),equivalent_key_map_default=__webpack_require__.n(equivalent_key_map);function isGenerator(object){return!!object&&"function"==typeof object[Symbol.iterator]&&"function"==typeof object.next}var dist=__webpack_require__("./node_modules/rungen/dist/index.js"),is_promise=__webpack_require__("./node_modules/is-promise/index.mjs"),is_plain_object=__webpack_require__("./node_modules/is-plain-object/dist/is-plain-object.mjs");function isAction(object){return(0,is_plain_object.P)(object)&&"string"==typeof object.type}function isActionOfType(object,expectedType){return isAction(object)&&object.type===expectedType}function createRuntime(){let controls=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},dispatch=arguments.length>1?arguments[1]:void 0;const rungenControls=Object.entries(controls).map((_ref=>{let[actionType,control]=_ref;return(value,next,iterate,yieldNext,yieldError)=>{if(!isActionOfType(value,actionType))return!1;const routine=control(value);return(0,is_promise.Z)(routine)?routine.then(yieldNext,yieldError):yieldNext(routine),!0}})),unhandledActionControl=(value,next)=>!!isAction(value)&&(dispatch(value),next(),!0);rungenControls.push(unhandledActionControl);const rungenRuntime=(0,dist.create)(rungenControls);return action=>new Promise(((resolve,reject)=>rungenRuntime(action,(result=>{isAction(result)&&dispatch(result),resolve(result)}),reject)))}function createMiddleware(){let controls=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return store=>{const runtime=createRuntime(controls,store.dispatch);return next=>action=>isGenerator(action)?runtime(action):next(action)}}var compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),factory=__webpack_require__("./packages/data/build-module/factory.js");const SELECT="@@data/SELECT";const builtinControls={[SELECT]:(0,factory.R)((registry=>_ref=>{let{storeKey:storeKey,selectorName:selectorName,args:args}=_ref;return registry.select(storeKey)[selectorName](...args)})),"@@data/RESOLVE_SELECT":(0,factory.R)((registry=>_ref2=>{let{storeKey:storeKey,selectorName:selectorName,args:args}=_ref2;const method=registry.select(storeKey)[selectorName].hasResolver?"resolveSelect":"select";return registry[method](storeKey)[selectorName](...args)})),"@@data/DISPATCH":(0,factory.R)((registry=>_ref3=>{let{storeKey:storeKey,actionName:actionName,args:args}=_ref3;return registry.dispatch(storeKey)[actionName](...args)}))};var promise_middleware=()=>next=>action=>(0,is_promise.Z)(action)?action.then((resolvedAction=>{if(resolvedAction)return next(resolvedAction)})):next(action),store=__webpack_require__("./packages/data/build-module/store/index.js");var resolvers_cache_middleware=(registry,reducerKey)=>()=>next=>action=>{const resolvers=registry.select(store.Z).getCachedResolvers(reducerKey);return Object.entries(resolvers).forEach((_ref=>{let[selectorName,resolversByArgs]=_ref;const resolver=(0,lodash.get)(registry.stores,[reducerKey,"resolvers",selectorName]);resolver&&resolver.shouldInvalidate&&resolversByArgs.forEach(((value,args)=>{"finished"!==(null==value?void 0:value.status)&&"error"!==(null==value?void 0:value.status)||!resolver.shouldInvalidate(action,...args)||registry.dispatch(store.Z).invalidateResolution(reducerKey,selectorName,args)}))})),next(action)};function createThunkMiddleware(args){return()=>next=>action=>"function"==typeof action?action(args):next(action)}function selectorArgsToStateKey(args){if(null==args)return[];const len=args.length;let idx=len;for(;idx>0&&void 0===args[idx-1];)idx--;return idx===len?args:args.slice(0,idx)}const subKeysIsResolved=(actionProperty="selectorName",reducer=>function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;const key=action[actionProperty];if(void 0===key)return state;const nextKeyState=reducer(state[key],action);return nextKeyState===state[key]?state:{...state,[key]:nextKeyState}})((function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new(equivalent_key_map_default()),action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"START_RESOLUTION":{const nextState=new(equivalent_key_map_default())(state);return nextState.set(selectorArgsToStateKey(action.args),{status:"resolving"}),nextState}case"FINISH_RESOLUTION":{const nextState=new(equivalent_key_map_default())(state);return nextState.set(selectorArgsToStateKey(action.args),{status:"finished"}),nextState}case"FAIL_RESOLUTION":{const nextState=new(equivalent_key_map_default())(state);return nextState.set(selectorArgsToStateKey(action.args),{status:"error",error:action.error}),nextState}case"START_RESOLUTIONS":{const nextState=new(equivalent_key_map_default())(state);for(const resolutionArgs of action.args)nextState.set(selectorArgsToStateKey(resolutionArgs),{status:"resolving"});return nextState}case"FINISH_RESOLUTIONS":{const nextState=new(equivalent_key_map_default())(state);for(const resolutionArgs of action.args)nextState.set(selectorArgsToStateKey(resolutionArgs),{status:"finished"});return nextState}case"FAIL_RESOLUTIONS":{const nextState=new(equivalent_key_map_default())(state);return action.args.forEach(((resolutionArgs,idx)=>{const resolutionState={status:"error",error:void 0},error=action.errors[idx];error&&(resolutionState.error=error),nextState.set(selectorArgsToStateKey(resolutionArgs),resolutionState)})),nextState}case"INVALIDATE_RESOLUTION":{const nextState=new(equivalent_key_map_default())(state);return nextState.delete(selectorArgsToStateKey(action.args)),nextState}}return state}));var actionProperty;var metadata_reducer=function(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"INVALIDATE_RESOLUTION_FOR_STORE":return{};case"INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR":if(action.selectorName in state){const{[action.selectorName]:removedSelector,...restState}=state;return restState}return state;case"START_RESOLUTION":case"FINISH_RESOLUTION":case"FAIL_RESOLUTION":case"START_RESOLUTIONS":case"FINISH_RESOLUTIONS":case"FAIL_RESOLUTIONS":case"INVALIDATE_RESOLUTION":return subKeysIsResolved(state,action)}return state};function getResolutionState(state,selectorName,args){const map=(0,lodash.get)(state,[selectorName]);if(map)return map.get(selectorArgsToStateKey(args))}function getIsResolving(state,selectorName,args){const resolutionState=getResolutionState(state,selectorName,args);return resolutionState&&"resolving"===resolutionState.status}function hasStartedResolution(state,selectorName,args){return void 0!==getResolutionState(state,selectorName,args)}function hasFinishedResolution(state,selectorName,args){var _getResolutionState;const status=null===(_getResolutionState=getResolutionState(state,selectorName,args))||void 0===_getResolutionState?void 0:_getResolutionState.status;return"finished"===status||"error"===status}function hasResolutionFailed(state,selectorName,args){var _getResolutionState2;return"error"===(null===(_getResolutionState2=getResolutionState(state,selectorName,args))||void 0===_getResolutionState2?void 0:_getResolutionState2.status)}function getResolutionError(state,selectorName,args){const resolutionState=getResolutionState(state,selectorName,args);return"error"===(null==resolutionState?void 0:resolutionState.status)?resolutionState.error:null}function isResolving(state,selectorName,args){var _getResolutionState3;return"resolving"===(null===(_getResolutionState3=getResolutionState(state,selectorName,args))||void 0===_getResolutionState3?void 0:_getResolutionState3.status)}function getCachedResolvers(state){return state}function startResolution(selectorName,args){return{type:"START_RESOLUTION",selectorName:selectorName,args:args}}function finishResolution(selectorName,args){return{type:"FINISH_RESOLUTION",selectorName:selectorName,args:args}}function failResolution(selectorName,args,error){return{type:"FAIL_RESOLUTION",selectorName:selectorName,args:args,error:error}}function startResolutions(selectorName,args){return{type:"START_RESOLUTIONS",selectorName:selectorName,args:args}}function finishResolutions(selectorName,args){return{type:"FINISH_RESOLUTIONS",selectorName:selectorName,args:args}}function failResolutions(selectorName,args,errors){return{type:"FAIL_RESOLUTIONS",selectorName:selectorName,args:args,errors:errors}}function invalidateResolution(selectorName,args){return{type:"INVALIDATE_RESOLUTION",selectorName:selectorName,args:args}}function invalidateResolutionForStore(){return{type:"INVALIDATE_RESOLUTION_FOR_STORE"}}function invalidateResolutionForStoreSelector(selectorName){return{type:"INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR",selectorName:selectorName}}const trimUndefinedValues=array=>{const result=[...array];for(let i=result.length-1;i>=0;i--)void 0===result[i]&&result.splice(i,1);return result},mapToObject=(key,state)=>state instanceof Map?Object.fromEntries(state):state;function createReduxStore(key,options){return{name:key,instantiate:registry=>{const reducer=options.reducer,store=function instantiateReduxStore(key,options,registry,thunkArgs){const controls={...options.controls,...builtinControls},normalizedControls=(0,lodash.mapValues)(controls,(control=>control.isRegistryControl?control(registry):control)),middlewares=[resolvers_cache_middleware(registry,key),promise_middleware,createMiddleware(normalizedControls),createThunkMiddleware(thunkArgs)],enhancers=[(0,redux.md)(...middlewares)];"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&enhancers.push(window.__REDUX_DEVTOOLS_EXTENSION__({name:key,instanceId:key,serialize:{replacer:mapToObject}}));const{reducer:reducer,initialState:initialState}=options,enhancedReducer=turbo_combine_reducers_default()({metadata:metadata_reducer,root:reducer});return(0,redux.MT)(enhancedReducer,{root:initialState},(0,compose.Z)(enhancers))}(key,options,registry,{registry:registry,get dispatch(){return Object.assign((action=>store.dispatch(action)),getActions())},get select(){return Object.assign((selector=>selector(store.__unstableOriginalGetState())),getSelectors())},get resolveSelect(){return getResolveSelectors()}}),resolversCache=function createResolversCache(){const cache={};return{isRunning:(selectorName,args)=>cache[selectorName]&&cache[selectorName].get(trimUndefinedValues(args)),clear(selectorName,args){cache[selectorName]&&cache[selectorName].delete(trimUndefinedValues(args))},markAsRunning(selectorName,args){cache[selectorName]||(cache[selectorName]=new(equivalent_key_map_default())),cache[selectorName].set(trimUndefinedValues(args),!0)}}}();let resolvers;const actions=function mapActions(actions,store){const createBoundAction=action=>function(){return Promise.resolve(store.dispatch(action(...arguments)))};return(0,lodash.mapValues)(actions,createBoundAction)}({...actions_namespaceObject,...options.actions},store);let selectors=function mapSelectors(selectors,store){const createStateSelector=registrySelector=>{const selector=function runSelector(){const argsLength=arguments.length,args=new Array(argsLength+1);args[0]=store.__unstableOriginalGetState();for(let i=0;i<argsLength;i++)args[i+1]=arguments[i];return registrySelector(...args)};return selector.hasResolver=!1,selector};return(0,lodash.mapValues)(selectors,createStateSelector)}({...(0,lodash.mapValues)(selectors_namespaceObject,(selector=>function(state){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return selector(state.metadata,...args)})),...(0,lodash.mapValues)(options.selectors,(selector=>(selector.isRegistrySelector&&(selector.registry=registry),function(state){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];return selector(state.root,...args)})))},store);if(options.resolvers){const result=function mapResolvers(resolvers,selectors,store,resolversCache){const mappedResolvers=(0,lodash.mapValues)(resolvers,(resolver=>resolver.fulfill?resolver:{...resolver,fulfill:resolver})),mapSelector=(selector,selectorName)=>{const resolver=resolvers[selectorName];if(!resolver)return selector.hasResolver=!1,selector;const selectorResolver=function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];async function fulfillSelector(){const state=store.getState();if(resolversCache.isRunning(selectorName,args)||"function"==typeof resolver.isFulfilled&&resolver.isFulfilled(state,...args))return;const{metadata:metadata}=store.__unstableOriginalGetState();hasStartedResolution(metadata,selectorName,args)||(resolversCache.markAsRunning(selectorName,args),setTimeout((async()=>{resolversCache.clear(selectorName,args),store.dispatch(startResolution(selectorName,args));try{await fulfillResolver(store,mappedResolvers,selectorName,...args),store.dispatch(finishResolution(selectorName,args))}catch(error){store.dispatch(failResolution(selectorName,args,error))}})))}return fulfillSelector(...args),selector(...args)};return selectorResolver.hasResolver=!0,selectorResolver};return{resolvers:mappedResolvers,selectors:(0,lodash.mapValues)(selectors,mapSelector)}}(options.resolvers,selectors,store,resolversCache);resolvers=result.resolvers,selectors=result.selectors}const resolveSelectors=function mapResolveSelectors(selectors,store){const{getIsResolving:getIsResolving,hasStartedResolution:hasStartedResolution,hasFinishedResolution:hasFinishedResolution,hasResolutionFailed:hasResolutionFailed,isResolving:isResolving,getCachedResolvers:getCachedResolvers,getResolutionState:getResolutionState,getResolutionError:getResolutionError,...storeSelectors}=selectors;return(0,lodash.mapValues)(storeSelectors,((selector,selectorName)=>selector.hasResolver?function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return new Promise(((resolve,reject)=>{const hasFinished=()=>selectors.hasFinishedResolution(selectorName,args),finalize=result=>{if(selectors.hasResolutionFailed(selectorName,args)){const error=selectors.getResolutionError(selectorName,args);reject(error)}else resolve(result)},getResult=()=>selector.apply(null,args),result=getResult();if(hasFinished())return finalize(result);const unsubscribe=store.subscribe((()=>{hasFinished()&&(unsubscribe(),finalize(getResult()))}))}))}:async function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return selector.apply(null,args)}))}(selectors,store),suspendSelectors=function mapSuspendSelectors(selectors,store){return(0,lodash.mapValues)(selectors,((selector,selectorName)=>selector.hasResolver?function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];const result=selector.apply(null,args);if(selectors.hasFinishedResolution(selectorName,args)){if(selectors.hasResolutionFailed(selectorName,args))throw selectors.getResolutionError(selectorName,args);return result}throw new Promise((resolve=>{const unsubscribe=store.subscribe((()=>{selectors.hasFinishedResolution(selectorName,args)&&(resolve(),unsubscribe())}))}))}:selector))}(selectors,store),getSelectors=()=>selectors,getActions=()=>actions,getResolveSelectors=()=>resolveSelectors;store.__unstableOriginalGetState=store.getState,store.getState=()=>store.__unstableOriginalGetState().root;const subscribe=store&&(listener=>{let lastState=store.__unstableOriginalGetState();return store.subscribe((()=>{const state=store.__unstableOriginalGetState(),hasChanged=state!==lastState;lastState=state,hasChanged&&listener()}))});return{reducer:reducer,store:store,actions:actions,selectors:selectors,resolvers:resolvers,getSelectors:getSelectors,getResolveSelectors:getResolveSelectors,getSuspendSelectors:()=>suspendSelectors,getActions:getActions,subscribe:subscribe}}}}async function fulfillResolver(store,resolvers,selectorName){const resolver=(0,lodash.get)(resolvers,[selectorName]);if(!resolver)return;for(var _len7=arguments.length,args=new Array(_len7>3?_len7-3:0),_key7=3;_key7<_len7;_key7++)args[_key7-3]=arguments[_key7];const action=resolver.fulfill(...args);action&&await store.dispatch(action)}},"./packages/data/build-module/registry.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{p:function(){return createRegistry}});var lodash=__webpack_require__("./node_modules/lodash/lodash.js"),build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),store=__webpack_require__("./packages/data/build-module/store/index.js");function createEmitter(){let isPaused=!1,isPending=!1;const listeners=new Set,notifyListeners=()=>Array.from(listeners).forEach((listener=>listener()));return{get isPaused(){return isPaused},subscribe:listener=>(listeners.add(listener),()=>listeners.delete(listener)),pause(){isPaused=!0},resume(){isPaused=!1,isPending&&(isPending=!1,notifyListeners())},emit(){isPaused?isPending=!0:notifyListeners()}}}function getStoreName(storeNameOrDescriptor){return"string"==typeof storeNameOrDescriptor?storeNameOrDescriptor:storeNameOrDescriptor.name}function createRegistry(){let storeConfigs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},parent=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const stores={},emitter=createEmitter();let listeningStores=null;function globalListener(){emitter.emit()}const subscribe=(listener,storeNameOrDescriptor)=>{if(!storeNameOrDescriptor)return emitter.subscribe(listener);const storeName=getStoreName(storeNameOrDescriptor),store=stores[storeName];return store?store.subscribe(listener):parent?parent.subscribe(listener,storeNameOrDescriptor):emitter.subscribe(listener)};function select(storeNameOrDescriptor){var _listeningStores;const storeName=getStoreName(storeNameOrDescriptor);null===(_listeningStores=listeningStores)||void 0===_listeningStores||_listeningStores.add(storeName);const store=stores[storeName];return store?store.getSelectors():null==parent?void 0:parent.select(storeName)}function __unstableMarkListeningStores(callback,ref){listeningStores=new Set;try{return callback.call(this)}finally{ref.current=Array.from(listeningStores),listeningStores=null}}function resolveSelect(storeNameOrDescriptor){var _listeningStores2;const storeName=getStoreName(storeNameOrDescriptor);null===(_listeningStores2=listeningStores)||void 0===_listeningStores2||_listeningStores2.add(storeName);const store=stores[storeName];return store?store.getResolveSelectors():parent&&parent.resolveSelect(storeName)}function suspendSelect(storeNameOrDescriptor){var _listeningStores3;const storeName=getStoreName(storeNameOrDescriptor);null===(_listeningStores3=listeningStores)||void 0===_listeningStores3||_listeningStores3.add(storeName);const store=stores[storeName];return store?store.getSuspendSelectors():parent&&parent.suspendSelect(storeName)}function dispatch(storeNameOrDescriptor){const storeName=getStoreName(storeNameOrDescriptor),store=stores[storeName];return store?store.getActions():parent&&parent.dispatch(storeName)}function withPlugins(attributes){return(0,lodash.mapValues)(attributes,((attribute,key)=>"function"!=typeof attribute?attribute:function(){return registry[key].apply(null,arguments)}))}function registerStoreInstance(name,store){if("function"!=typeof store.getSelectors)throw new TypeError("store.getSelectors must be a function");if("function"!=typeof store.getActions)throw new TypeError("store.getActions must be a function");if("function"!=typeof store.subscribe)throw new TypeError("store.subscribe must be a function");store.emitter=createEmitter();const currentSubscribe=store.subscribe;store.subscribe=listener=>{const unsubscribeFromEmitter=store.emitter.subscribe(listener),unsubscribeFromStore=currentSubscribe((()=>{store.emitter.isPaused?store.emitter.emit():listener()}));return()=>{null==unsubscribeFromStore||unsubscribeFromStore(),null==unsubscribeFromEmitter||unsubscribeFromEmitter()}},stores[name]=store,store.subscribe(globalListener)}function register(store){registerStoreInstance(store.name,store.instantiate(registry))}function registerGenericStore(name,store){(0,build_module.Z)("wp.data.registerGenericStore",{since:"5.9",alternative:"wp.data.register( storeDescriptor )"}),registerStoreInstance(name,store)}function registerStore(storeName,options){if(!options.reducer)throw new TypeError("Must specify store reducer");const store=(0,redux_store.Z)(storeName,options).instantiate(registry);return registerStoreInstance(storeName,store),store.store}function batch(callback){emitter.pause(),Object.values(stores).forEach((store=>store.emitter.pause())),callback(),emitter.resume(),Object.values(stores).forEach((store=>store.emitter.resume()))}let registry={batch:batch,stores:stores,namespaces:stores,subscribe:subscribe,select:select,resolveSelect:resolveSelect,suspendSelect:suspendSelect,dispatch:dispatch,use:use,register:register,registerGenericStore:registerGenericStore,registerStore:registerStore,__unstableMarkListeningStores:__unstableMarkListeningStores};function use(plugin,options){if(plugin)return registry={...registry,...plugin(registry,options)},registry}registry.register(store.Z);for(const[name,config]of Object.entries(storeConfigs))registry.register((0,redux_store.Z)(name,config));return parent&&parent.subscribe(globalListener),withPlugins(registry)}},"./packages/data/build-module/store/index.js":function(__unused_webpack_module,__webpack_exports__){const coreDataStore={name:"core/data",instantiate(registry){const getCoreDataSelector=selectorName=>function(key){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return registry.select(key)[selectorName](...args)},getCoreDataAction=actionName=>function(key){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];return registry.dispatch(key)[actionName](...args)};return{getSelectors:()=>Object.fromEntries(["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"].map((selectorName=>[selectorName,getCoreDataSelector(selectorName)]))),getActions:()=>Object.fromEntries(["startResolution","finishResolution","invalidateResolution","invalidateResolutionForStore","invalidateResolutionForStoreSelector"].map((actionName=>[actionName,getCoreDataAction(actionName)]))),subscribe:()=>()=>()=>{}}}};__webpack_exports__.Z=coreDataStore},"./packages/dom/build-module/dom/remove.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return remove}});var _utils_assert_is_defined__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/dom/build-module/utils/assert-is-defined.js");function remove(node){(0,_utils_assert_is_defined__WEBPACK_IMPORTED_MODULE_0__.c)(node.parentNode,"node.parentNode"),node.parentNode.removeChild(node)}},"./packages/dom/build-module/dom/safe-html.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return safeHTML}});var _remove__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/dom/build-module/dom/remove.js");function safeHTML(html){const{body:body}=document.implementation.createHTMLDocument("");body.innerHTML=html;const elements=body.getElementsByTagName("*");let elementIndex=elements.length;for(;elementIndex--;){const element=elements[elementIndex];if("SCRIPT"===element.tagName)(0,_remove__WEBPACK_IMPORTED_MODULE_0__.Z)(element);else{let attributeIndex=element.attributes.length;for(;attributeIndex--;){const{name:key}=element.attributes[attributeIndex];key.startsWith("on")&&element.removeAttribute(key)}}}return body.innerHTML}},"./packages/dom/build-module/dom/strip-html.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return stripHTML}});var _safe_html__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/dom/build-module/dom/safe-html.js");function stripHTML(html){html=(0,_safe_html__WEBPACK_IMPORTED_MODULE_0__.Z)(html);const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=html,doc.body.textContent||""}},"./packages/dom/build-module/utils/assert-is-defined.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function assertIsDefined(val,name){0}__webpack_require__.d(__webpack_exports__,{c:function(){return assertIsDefined}})},"./packages/element/build-module/platform.js":function(__unused_webpack_module,__webpack_exports__){__webpack_exports__.Z={OS:"web",select:spec=>"web"in spec?spec.web:spec.default,isWeb:!0}},"./packages/html-entities/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){let _decodeTextArea;function decodeEntities(html){if("string"!=typeof html||-1===html.indexOf("&"))return html;void 0===_decodeTextArea&&(_decodeTextArea=document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument("").createElement("textarea"):document.createElement("textarea")),_decodeTextArea.innerHTML=html;const decoded=_decodeTextArea.textContent;return _decodeTextArea.innerHTML="",decoded}__webpack_require__.d(__webpack_exports__,{S:function(){return decodeEntities}})},"./packages/icons/build-module/library/symbol.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const symbol=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z"}));__webpack_exports__.Z=symbol},"./packages/priority-queue/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{j:function(){return createQueue}});__webpack_require__("./node_modules/requestidlecallback/index.js");var request_idle_callback=function createRequestIdleCallback(){return"undefined"==typeof window?callback=>{setTimeout((()=>callback(Date.now())),0)}:window.requestIdleCallback}();const createQueue=()=>{let waitingList=[],elementsMap=new WeakMap,isRunning=!1;const runWaitingList=deadline=>{const hasTimeRemaining="number"==typeof deadline?()=>!1:()=>deadline.timeRemaining()>0;do{if(0===waitingList.length)return void(isRunning=!1);const nextElement=waitingList.shift();elementsMap.get(nextElement)(),elementsMap.delete(nextElement)}while(hasTimeRemaining());request_idle_callback(runWaitingList)};return{add:(element,item)=>{elementsMap.has(element)||waitingList.push(element),elementsMap.set(element,item),isRunning||(isRunning=!0,request_idle_callback(runWaitingList))},flush:element=>{if(!elementsMap.has(element))return!1;const index=waitingList.indexOf(element);waitingList.splice(index,1);const callback=elementsMap.get(element);return elementsMap.delete(element),callback(),!0},cancel:element=>{if(!elementsMap.has(element))return!1;const index=waitingList.indexOf(element);return waitingList.splice(index,1),elementsMap.delete(element),!0},reset:()=>{waitingList=[],elementsMap=new WeakMap,isRunning=!1}}}},"./packages/rich-text/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{M4:function(){return LINE_SEPARATOR},_b:function(){return createElement},cw:function(){return insertLineSeparator},If:function(){return isEmptyLine},o2:function(){return useRichText},HI:function(){return applyFormat},Ue:function(){return create_create},Ye:function(){return getActiveFormat},DL:function(){return getActiveFormats},Jj:function(){return getActiveObject},FB:function(){return getTextContent},$T:function(){return insert},Qf:function(){return insertObject},zb:function(){return isCollapsed},xb:function(){return isEmpty},v_:function(){return join},Sy:function(){return registerFormatType},Od:function(){return remove},Ir:function(){return removeFormat},gx:function(){return replace_replace},tP:function(){return slice},Vl:function(){return split},h:function(){return store},Jz:function(){return toHTMLString},h4:function(){return toggleFormat},Wb:function(){return useAnchor}});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{getFormatType:function(){return getFormatType},getFormatTypeForBareElement:function(){return getFormatTypeForBareElement},getFormatTypeForClassName:function(){return getFormatTypeForClassName},getFormatTypes:function(){return getFormatTypes}});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{addFormatTypes:function(){return addFormatTypes},removeFormatTypes:function(){return removeFormatTypes}});var build_module=__webpack_require__("./packages/data/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js");var reducer=(0,build_module.UY)({formatTypes:function formatTypes(){let state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},action=arguments.length>1?arguments[1]:void 0;switch(action.type){case"ADD_FORMAT_TYPES":return{...state,...action.formatTypes.reduce(((newFormatTypes,type)=>({...newFormatTypes,[type.name]:type})),{})};case"REMOVE_FORMAT_TYPES":return Object.fromEntries(Object.entries(state).filter((_ref=>{let[key]=_ref;return!action.names.includes(key)})))}return state}});const getFormatTypes=(0,__webpack_require__("./node_modules/rememo/es/rememo.js").Z)((state=>Object.values(state.formatTypes)),(state=>[state.formatTypes]));function getFormatType(state,name){return state.formatTypes[name]}function getFormatTypeForBareElement(state,bareElementTagName){const formatTypes=getFormatTypes(state);return formatTypes.find((_ref=>{let{className:className,tagName:tagName}=_ref;return null===className&&bareElementTagName===tagName}))||formatTypes.find((_ref2=>{let{className:className,tagName:tagName}=_ref2;return null===className&&"*"===tagName}))}function getFormatTypeForClassName(state,elementClassName){return getFormatTypes(state).find((_ref3=>{let{className:className}=_ref3;return null!==className&&` ${elementClassName} `.indexOf(` ${className} `)>=0}))}function addFormatTypes(formatTypes){return{type:"ADD_FORMAT_TYPES",formatTypes:Array.isArray(formatTypes)?formatTypes:[formatTypes]}}function removeFormatTypes(names){return{type:"REMOVE_FORMAT_TYPES",names:Array.isArray(names)?names:[names]}}const store=(0,redux_store.Z)("core/rich-text",{reducer:reducer,selectors:selectors_namespaceObject,actions:actions_namespaceObject});function isFormatEqual(format1,format2){if(format1===format2)return!0;if(!format1||!format2)return!1;if(format1.type!==format2.type)return!1;const attributes1=format1.attributes,attributes2=format2.attributes;if(attributes1===attributes2)return!0;if(!attributes1||!attributes2)return!1;const keys1=Object.keys(attributes1),keys2=Object.keys(attributes2);if(keys1.length!==keys2.length)return!1;const length=keys1.length;for(let i=0;i<length;i++){const name=keys1[i];if(attributes1[name]!==attributes2[name])return!1}return!0}function normalise_formats_normaliseFormats(value){const newFormats=value.formats.slice();return newFormats.forEach(((formatsAtIndex,index)=>{const formatsAtPreviousIndex=newFormats[index-1];if(formatsAtPreviousIndex){const newFormatsAtIndex=formatsAtIndex.slice();newFormatsAtIndex.forEach(((format,formatIndex)=>{const previousFormat=formatsAtPreviousIndex[formatIndex];isFormatEqual(format,previousFormat)&&(newFormatsAtIndex[formatIndex]=previousFormat)})),newFormats[index]=newFormatsAtIndex}})),{...value,formats:newFormats}}function replace(array,index,value){return(array=array.slice())[index]=value,array}function applyFormat(value,format){let startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:value.start,endIndex=arguments.length>3&&void 0!==arguments[3]?arguments[3]:value.end;const{formats:formats,activeFormats:activeFormats}=value,newFormats=formats.slice();if(startIndex===endIndex){var _newFormats$startInde;const startFormat=null===(_newFormats$startInde=newFormats[startIndex])||void 0===_newFormats$startInde?void 0:_newFormats$startInde.find((_ref=>{let{type:type}=_ref;return type===format.type}));if(startFormat){const index=newFormats[startIndex].indexOf(startFormat);for(;newFormats[startIndex]&&newFormats[startIndex][index]===startFormat;)newFormats[startIndex]=replace(newFormats[startIndex],index,format),startIndex--;for(endIndex++;newFormats[endIndex]&&newFormats[endIndex][index]===startFormat;)newFormats[endIndex]=replace(newFormats[endIndex],index,format),endIndex++}}else{let position=1/0;for(let index=startIndex;index<endIndex;index++)if(newFormats[index]){newFormats[index]=newFormats[index].filter((_ref2=>{let{type:type}=_ref2;return type!==format.type}));const length=newFormats[index].length;length<position&&(position=length)}else newFormats[index]=[],position=0;for(let index=startIndex;index<endIndex;index++)newFormats[index].splice(position,0,format)}return normalise_formats_normaliseFormats({...value,formats:newFormats,activeFormats:[...(null==activeFormats?void 0:activeFormats.filter((_ref3=>{let{type:type}=_ref3;return type!==format.type})))||[],format]})}function createElement(_ref,html){let{implementation:implementation}=_ref;return createElement.body||(createElement.body=implementation.createHTMLDocument("").body),createElement.body.innerHTML=html,createElement.body}function mergePair(a,b){return a.formats=a.formats.concat(b.formats),a.replacements=a.replacements.concat(b.replacements),a.text+=b.text,a}(0,build_module.z2)(store);const LINE_SEPARATOR="\u2028";function toFormat(_ref){let formatType,{tagName:tagName,attributes:attributes}=_ref;if(attributes&&attributes.class&&(formatType=(0,build_module.Ys)(store).getFormatTypeForClassName(attributes.class),formatType&&(attributes.class=` ${attributes.class} `.replace(` ${formatType.className} `," ").trim(),attributes.class||delete attributes.class)),formatType||(formatType=(0,build_module.Ys)(store).getFormatTypeForBareElement(tagName)),!formatType)return attributes?{type:tagName,attributes:attributes}:{type:tagName};if(formatType.__experimentalCreatePrepareEditableTree&&!formatType.__experimentalCreateOnChangeEditableValue)return null;if(!attributes)return{type:formatType.name,tagName:tagName};const registeredAttributes={},unregisteredAttributes={},_attributes={...attributes};for(const key in formatType.attributes){const name=formatType.attributes[key];registeredAttributes[key]=_attributes[name],formatType.__unstableFilterAttributeValue&&(registeredAttributes[key]=formatType.__unstableFilterAttributeValue(key,registeredAttributes[key])),delete _attributes[name],void 0===registeredAttributes[key]&&delete registeredAttributes[key]}for(const name in _attributes)unregisteredAttributes[name]=attributes[name];return{type:formatType.name,tagName:tagName,attributes:registeredAttributes,unregisteredAttributes:unregisteredAttributes}}function create_create(){let{element:element,text:text,html:html,range:range,multilineTag:multilineTag,multilineWrapperTags:multilineWrapperTags,__unstableIsEditableTree:isEditableTree,preserveWhiteSpace:preserveWhiteSpace}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"string"==typeof text&&text.length>0?{formats:Array(text.length),replacements:Array(text.length),text:text}:("string"==typeof html&&html.length>0&&(element=createElement(document,html)),"object"!=typeof element?{formats:[],replacements:[],text:""}:multilineTag?createFromMultilineElement({element:element,range:range,multilineTag:multilineTag,multilineWrapperTags:multilineWrapperTags,isEditableTree:isEditableTree,preserveWhiteSpace:preserveWhiteSpace}):createFromElement({element:element,range:range,isEditableTree:isEditableTree,preserveWhiteSpace:preserveWhiteSpace}))}function accumulateSelection(accumulator,node,range,value){if(!range)return;const{parentNode:parentNode}=node,{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}=range,currentLength=accumulator.text.length;void 0!==value.start?accumulator.start=currentLength+value.start:node===startContainer&&node.nodeType===node.TEXT_NODE?accumulator.start=currentLength+startOffset:parentNode===startContainer&&node===startContainer.childNodes[startOffset]?accumulator.start=currentLength:parentNode===startContainer&&node===startContainer.childNodes[startOffset-1]?accumulator.start=currentLength+value.text.length:node===startContainer&&(accumulator.start=currentLength),void 0!==value.end?accumulator.end=currentLength+value.end:node===endContainer&&node.nodeType===node.TEXT_NODE?accumulator.end=currentLength+endOffset:parentNode===endContainer&&node===endContainer.childNodes[endOffset-1]?accumulator.end=currentLength+value.text.length:parentNode===endContainer&&node===endContainer.childNodes[endOffset]?accumulator.end=currentLength:node===endContainer&&(accumulator.end=currentLength+endOffset)}function filterRange(node,range,filter){if(!range)return;const{startContainer:startContainer,endContainer:endContainer}=range;let{startOffset:startOffset,endOffset:endOffset}=range;return node===startContainer&&(startOffset=filter(node.nodeValue.slice(0,startOffset)).length),node===endContainer&&(endOffset=filter(node.nodeValue.slice(0,endOffset)).length),{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}}function collapseWhiteSpace(string){return string.replace(/[\n\r\t]+/g," ")}function removeReservedCharacters(string){return string.replace(new RegExp("[\ufeff￼]","gu"),"")}function createFromElement(_ref2){let{element:element,range:range,multilineTag:multilineTag,multilineWrapperTags:multilineWrapperTags,currentWrapperTags:currentWrapperTags=[],isEditableTree:isEditableTree,preserveWhiteSpace:preserveWhiteSpace}=_ref2;const accumulator={formats:[],replacements:[],text:""};if(!element)return accumulator;if(!element.hasChildNodes())return accumulateSelection(accumulator,element,range,{formats:[],replacements:[],text:""}),accumulator;const length=element.childNodes.length;for(let index=0;index<length;index++){const node=element.childNodes[index],tagName=node.nodeName.toLowerCase();if(node.nodeType===node.TEXT_NODE){let filter=removeReservedCharacters;preserveWhiteSpace||(filter=string=>removeReservedCharacters(collapseWhiteSpace(string)));const text=filter(node.nodeValue);range=filterRange(node,range,filter),accumulateSelection(accumulator,node,range,{text:text}),accumulator.formats.length+=text.length,accumulator.replacements.length+=text.length,accumulator.text+=text;continue}if(node.nodeType!==node.ELEMENT_NODE)continue;if(isEditableTree&&(node.getAttribute("data-rich-text-placeholder")||"br"===tagName&&!node.getAttribute("data-rich-text-line-break"))){accumulateSelection(accumulator,node,range,{formats:[],replacements:[],text:""});continue}if("script"===tagName){const value={formats:[,],replacements:[{type:tagName,attributes:{"data-rich-text-script":node.getAttribute("data-rich-text-script")||encodeURIComponent(node.innerHTML)}}],text:"￼"};accumulateSelection(accumulator,node,range,value),mergePair(accumulator,value);continue}if("br"===tagName){accumulateSelection(accumulator,node,range,{formats:[],replacements:[],text:""}),mergePair(accumulator,create_create({text:"\n"}));continue}const format=toFormat({tagName:tagName,attributes:getAttributes({element:node})});if(multilineWrapperTags&&-1!==multilineWrapperTags.indexOf(tagName)){const value=createFromMultilineElement({element:node,range:range,multilineTag:multilineTag,multilineWrapperTags:multilineWrapperTags,currentWrapperTags:[...currentWrapperTags,format],isEditableTree:isEditableTree,preserveWhiteSpace:preserveWhiteSpace});accumulateSelection(accumulator,node,range,value),mergePair(accumulator,value);continue}const value=createFromElement({element:node,range:range,multilineTag:multilineTag,multilineWrapperTags:multilineWrapperTags,isEditableTree:isEditableTree,preserveWhiteSpace:preserveWhiteSpace});if(accumulateSelection(accumulator,node,range,value),format)if(0===value.text.length)format.attributes&&mergePair(accumulator,{formats:[,],replacements:[format],text:"￼"});else{function mergeFormats(formats){if(mergeFormats.formats===formats)return mergeFormats.newFormats;const newFormats=formats?[format,...formats]:[format];return mergeFormats.formats=formats,mergeFormats.newFormats=newFormats,newFormats}mergeFormats.newFormats=[format],mergePair(accumulator,{...value,formats:Array.from(value.formats,mergeFormats)})}else mergePair(accumulator,value)}return accumulator}function createFromMultilineElement(_ref3){let{element:element,range:range,multilineTag:multilineTag,multilineWrapperTags:multilineWrapperTags,currentWrapperTags:currentWrapperTags=[],isEditableTree:isEditableTree,preserveWhiteSpace:preserveWhiteSpace}=_ref3;const accumulator={formats:[],replacements:[],text:""};if(!element||!element.hasChildNodes())return accumulator;const length=element.children.length;for(let index=0;index<length;index++){const node=element.children[index];if(node.nodeName.toLowerCase()!==multilineTag)continue;const value=createFromElement({element:node,range:range,multilineTag:multilineTag,multilineWrapperTags:multilineWrapperTags,currentWrapperTags:currentWrapperTags,isEditableTree:isEditableTree,preserveWhiteSpace:preserveWhiteSpace});(0!==index||currentWrapperTags.length>0)&&mergePair(accumulator,{formats:[,],replacements:currentWrapperTags.length>0?[currentWrapperTags]:[,],text:LINE_SEPARATOR}),accumulateSelection(accumulator,node,range,value),mergePair(accumulator,value)}return accumulator}function getAttributes(_ref4){let{element:element}=_ref4;if(!element.hasAttributes())return;const length=element.attributes.length;let accumulator;for(let i=0;i<length;i++){const{name:name,value:value}=element.attributes[i];if(0===name.indexOf("data-rich-text-"))continue;accumulator=accumulator||{},accumulator[/^on/i.test(name)?"data-disable-rich-text-"+name:name]=value}return accumulator}function getActiveFormats(_ref){let{formats:formats,start:start,end:end,activeFormats:activeFormats}=_ref,EMPTY_ACTIVE_FORMATS=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===start)return EMPTY_ACTIVE_FORMATS;if(start===end){if(activeFormats)return activeFormats;const formatsBefore=formats[start-1]||EMPTY_ACTIVE_FORMATS,formatsAfter=formats[start]||EMPTY_ACTIVE_FORMATS;return formatsBefore.length<formatsAfter.length?formatsBefore:formatsAfter}return formats[start]||EMPTY_ACTIVE_FORMATS}function getActiveFormat(value,formatType){var _getActiveFormats;return null===(_getActiveFormats=getActiveFormats(value))||void 0===_getActiveFormats?void 0:_getActiveFormats.find((_ref=>{let{type:type}=_ref;return type===formatType}))}function getActiveObject(_ref){let{start:start,end:end,replacements:replacements,text:text}=_ref;if(start+1===end&&"￼"===text[start])return replacements[start]}const pattern=new RegExp(`[￼${LINE_SEPARATOR}]`,"g");function getTextContent(_ref){let{text:text}=_ref;return text.replace(pattern,(c=>"￼"===c?"":"\n"))}function isCollapsed(_ref){let{start:start,end:end}=_ref;if(void 0!==start&&void 0!==end)return start===end}function isEmpty(_ref){let{text:text}=_ref;return 0===text.length}function isEmptyLine(_ref2){let{text:text,start:start,end:end}=_ref2;return start===end&&(0===text.length||(0===start&&text.slice(0,1)===LINE_SEPARATOR||(start===text.length&&text.slice(-1)===LINE_SEPARATOR||text.slice(start-1,end+1)===`${LINE_SEPARATOR}${LINE_SEPARATOR}`)))}function join(values){let separator=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"string"==typeof separator&&(separator=create_create({text:separator})),normalise_formats_normaliseFormats(values.reduce(((accumlator,_ref)=>{let{formats:formats,replacements:replacements,text:text}=_ref;return{formats:accumlator.formats.concat(separator.formats,formats),replacements:accumlator.replacements.concat(separator.replacements,replacements),text:accumlator.text+separator.text+text}})))}function registerFormatType(name,settings){if("string"==typeof(settings={name:name,...settings}).name)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(settings.name))if((0,build_module.Ys)(store).getFormatType(settings.name))window.console.error('Format "'+settings.name+'" is already registered.');else if("string"==typeof settings.tagName&&""!==settings.tagName)if("string"==typeof settings.className&&""!==settings.className||null===settings.className)if(/^[_a-zA-Z]+[a-zA-Z0-9-]*$/.test(settings.className)){if(null===settings.className){const formatTypeForBareElement=(0,build_module.Ys)(store).getFormatTypeForBareElement(settings.tagName);if(formatTypeForBareElement)return void window.console.error(`Format "${formatTypeForBareElement.name}" is already registered to handle bare tag name "${settings.tagName}".`)}else{const formatTypeForClassName=(0,build_module.Ys)(store).getFormatTypeForClassName(settings.className);if(formatTypeForClassName)return void window.console.error(`Format "${formatTypeForClassName.name}" is already registered to handle class name "${settings.className}".`)}if("title"in settings&&""!==settings.title)if("keywords"in settings&&settings.keywords.length>3)window.console.error('The format "'+settings.name+'" can have a maximum of 3 keywords.');else{if("string"==typeof settings.title)return(0,build_module.WI)(store).addFormatTypes(settings),settings;window.console.error("Format titles must be strings.")}else window.console.error('The format "'+settings.name+'" must have a title.')}else window.console.error("A class name must begin with a letter, followed by any number of hyphens, letters, or numbers.");else window.console.error("Format class names must be a string, or null to handle bare elements.");else window.console.error("Format tag names must be a string.");else window.console.error("Format names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-format");else window.console.error("Format names must be strings.")}function removeFormat(value,formatType){let startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:value.start,endIndex=arguments.length>3&&void 0!==arguments[3]?arguments[3]:value.end;const{formats:formats,activeFormats:activeFormats}=value,newFormats=formats.slice();if(startIndex===endIndex){var _newFormats$startInde;const format=null===(_newFormats$startInde=newFormats[startIndex])||void 0===_newFormats$startInde?void 0:_newFormats$startInde.find((_ref=>{let{type:type}=_ref;return type===formatType}));if(format){for(;null!==(_newFormats$startInde2=newFormats[startIndex])&&void 0!==_newFormats$startInde2&&_newFormats$startInde2.find((newFormat=>newFormat===format));){var _newFormats$startInde2;filterFormats(newFormats,startIndex,formatType),startIndex--}for(endIndex++;null!==(_newFormats$endIndex=newFormats[endIndex])&&void 0!==_newFormats$endIndex&&_newFormats$endIndex.find((newFormat=>newFormat===format));){var _newFormats$endIndex;filterFormats(newFormats,endIndex,formatType),endIndex++}}}else for(let i=startIndex;i<endIndex;i++)newFormats[i]&&filterFormats(newFormats,i,formatType);return normalise_formats_normaliseFormats({...value,formats:newFormats,activeFormats:(null==activeFormats?void 0:activeFormats.filter((_ref2=>{let{type:type}=_ref2;return type!==formatType})))||[]})}function filterFormats(formats,index,formatType){const newFormats=formats[index].filter((_ref3=>{let{type:type}=_ref3;return type!==formatType}));newFormats.length?formats[index]=newFormats:delete formats[index]}function insert(value,valueToInsert){let startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:value.start,endIndex=arguments.length>3&&void 0!==arguments[3]?arguments[3]:value.end;const{formats:formats,replacements:replacements,text:text}=value;"string"==typeof valueToInsert&&(valueToInsert=create_create({text:valueToInsert}));const index=startIndex+valueToInsert.text.length;return normalise_formats_normaliseFormats({formats:formats.slice(0,startIndex).concat(valueToInsert.formats,formats.slice(endIndex)),replacements:replacements.slice(0,startIndex).concat(valueToInsert.replacements,replacements.slice(endIndex)),text:text.slice(0,startIndex)+valueToInsert.text+text.slice(endIndex),start:index,end:index})}function remove(value,startIndex,endIndex){return insert(value,create_create(),startIndex,endIndex)}function replace_replace(_ref,pattern,replacement){let{formats:formats,replacements:replacements,text:text,start:start,end:end}=_ref;return text=text.replace(pattern,(function(match){for(var _len=arguments.length,rest=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];const offset=rest[rest.length-2];let newFormats,newReplacements,newText=replacement;return"function"==typeof newText&&(newText=replacement(match,...rest)),"object"==typeof newText?(newFormats=newText.formats,newReplacements=newText.replacements,newText=newText.text):(newFormats=Array(newText.length),newReplacements=Array(newText.length),formats[offset]&&(newFormats=newFormats.fill(formats[offset]))),formats=formats.slice(0,offset).concat(newFormats,formats.slice(offset+match.length)),replacements=replacements.slice(0,offset).concat(newReplacements,replacements.slice(offset+match.length)),start&&(start=end=offset+newText.length),newText})),normalise_formats_normaliseFormats({formats:formats,replacements:replacements,text:text,start:start,end:end})}function insertLineSeparator(value){let startIndex=arguments.length>1&&void 0!==arguments[1]?arguments[1]:value.start,endIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:value.end;const beforeText=value.text.slice(0,startIndex),previousLineSeparatorIndex=beforeText.lastIndexOf(LINE_SEPARATOR),previousLineSeparatorFormats=value.replacements[previousLineSeparatorIndex];let replacements=[,];previousLineSeparatorFormats&&(replacements=[previousLineSeparatorFormats]);const valueToInsert={formats:[,],replacements:replacements,text:LINE_SEPARATOR};return insert(value,valueToInsert,startIndex,endIndex)}function insertObject(value,formatToInsert,startIndex,endIndex){return insert(value,{formats:[,],replacements:[formatToInsert],text:"￼"},startIndex,endIndex)}function slice(value){let startIndex=arguments.length>1&&void 0!==arguments[1]?arguments[1]:value.start,endIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:value.end;const{formats:formats,replacements:replacements,text:text}=value;return void 0===startIndex||void 0===endIndex?{...value}:{formats:formats.slice(startIndex,endIndex),replacements:replacements.slice(startIndex,endIndex),text:text.slice(startIndex,endIndex)}}function split(_ref,string){let{formats:formats,replacements:replacements,text:text,start:start,end:end}=_ref;if("string"!=typeof string)return splitAtSelection(...arguments);let nextStart=0;return text.split(string).map((substring=>{const startIndex=nextStart,value={formats:formats.slice(startIndex,startIndex+substring.length),replacements:replacements.slice(startIndex,startIndex+substring.length),text:substring};return nextStart+=string.length+substring.length,void 0!==start&&void 0!==end&&(start>=startIndex&&start<nextStart?value.start=start-startIndex:start<startIndex&&end>startIndex&&(value.start=0),end>=startIndex&&end<nextStart?value.end=end-startIndex:start<nextStart&&end>nextStart&&(value.end=substring.length)),value}))}function splitAtSelection(_ref2){let{formats:formats,replacements:replacements,text:text,start:start,end:end}=_ref2,startIndex=arguments.length>1&&void 0!==arguments[1]?arguments[1]:start,endIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:end;if(void 0===start||void 0===end)return;const before={formats:formats.slice(0,startIndex),replacements:replacements.slice(0,startIndex),text:text.slice(0,startIndex)},after={formats:formats.slice(endIndex),replacements:replacements.slice(endIndex),text:text.slice(endIndex),start:0,end:0};return[replace_replace(before,/\u2028+$/,""),replace_replace(after,/^\u2028+/,"")]}var escape_html_build_module=__webpack_require__("./packages/escape-html/build-module/index.js");function restoreOnAttributes(attributes,isEditableTree){if(isEditableTree)return attributes;const newAttributes={};for(const key in attributes){let newKey=key;key.startsWith("data-disable-rich-text-")&&(newKey=key.slice("data-disable-rich-text-".length)),newAttributes[newKey]=attributes[key]}return newAttributes}function fromFormat(_ref){let{type:type,tagName:tagName,attributes:attributes,unregisteredAttributes:unregisteredAttributes,object:object,boundaryClass:boundaryClass,isEditableTree:isEditableTree}=_ref;const formatType=function get_format_type_getFormatType(name){return(0,build_module.Ys)(store).getFormatType(name)}(type);let elementAttributes={};if(boundaryClass&&(elementAttributes["data-rich-text-format-boundary"]="true"),!formatType)return attributes&&(elementAttributes={...attributes,...elementAttributes}),{type:type,attributes:restoreOnAttributes(elementAttributes,isEditableTree),object:object};elementAttributes={...unregisteredAttributes,...elementAttributes};for(const name in attributes){const key=!!formatType.attributes&&formatType.attributes[name];key?elementAttributes[key]=attributes[name]:elementAttributes[name]=attributes[name]}return formatType.className&&(elementAttributes.class?elementAttributes.class=`${formatType.className} ${elementAttributes.class}`:elementAttributes.class=formatType.className),{type:"*"===formatType.tagName?tagName:formatType.tagName,object:formatType.object,attributes:restoreOnAttributes(elementAttributes,isEditableTree)}}function isEqualUntil(a,b,index){do{if(a[index]!==b[index])return!1}while(index--);return!0}function toTree(_ref2){let{value:value,multilineTag:multilineTag,preserveWhiteSpace:preserveWhiteSpace,createEmpty:createEmpty,append:append,getLastChild:getLastChild,getParent:getParent,isText:isText,getText:getText,remove:remove,appendText:appendText,onStartIndex:onStartIndex,onEndIndex:onEndIndex,isEditableTree:isEditableTree,placeholder:placeholder}=_ref2;const{formats:formats,replacements:replacements,text:text,start:start,end:end}=value,formatsLength=formats.length+1,tree=createEmpty(),multilineFormat={type:multilineTag},activeFormats=getActiveFormats(value),deepestActiveFormat=activeFormats[activeFormats.length-1];let lastSeparatorFormats,lastCharacterFormats,lastCharacter;multilineTag?(append(append(tree,{type:multilineTag}),""),lastCharacterFormats=lastSeparatorFormats=[multilineFormat]):append(tree,"");for(let i=0;i<formatsLength;i++){const character=text.charAt(i),shouldInsertPadding=isEditableTree&&(!lastCharacter||lastCharacter===LINE_SEPARATOR||"\n"===lastCharacter);let characterFormats=formats[i];multilineTag&&(characterFormats=character===LINE_SEPARATOR?lastSeparatorFormats=(replacements[i]||[]).reduce(((accumulator,format)=>(accumulator.push(format,multilineFormat),accumulator)),[multilineFormat]):[...lastSeparatorFormats,...characterFormats||[]]);let pointer=getLastChild(tree);if(shouldInsertPadding&&character===LINE_SEPARATOR){let node=pointer;for(;!isText(node);)node=getLastChild(node);append(getParent(node),"\ufeff")}if(lastCharacter===LINE_SEPARATOR){let node=pointer;for(;!isText(node);)node=getLastChild(node);onStartIndex&&start===i&&onStartIndex(tree,node),onEndIndex&&end===i&&onEndIndex(tree,node)}if(characterFormats&&characterFormats.forEach(((format,formatIndex)=>{if(pointer&&lastCharacterFormats&&isEqualUntil(characterFormats,lastCharacterFormats,formatIndex)&&(character!==LINE_SEPARATOR||characterFormats.length-1!==formatIndex))return void(pointer=getLastChild(pointer));const{type:type,tagName:tagName,attributes:attributes,unregisteredAttributes:unregisteredAttributes}=format,boundaryClass=isEditableTree&&character!==LINE_SEPARATOR&&format===deepestActiveFormat,parent=getParent(pointer),newNode=append(parent,fromFormat({type:type,tagName:tagName,attributes:attributes,unregisteredAttributes:unregisteredAttributes,boundaryClass:boundaryClass,isEditableTree:isEditableTree}));isText(pointer)&&0===getText(pointer).length&&remove(pointer),pointer=append(newNode,"")})),character!==LINE_SEPARATOR){var _replacements$i;if(0===i&&(onStartIndex&&0===start&&onStartIndex(tree,pointer),onEndIndex&&0===end&&onEndIndex(tree,pointer)),"￼"===character)isEditableTree||"script"!==(null===(_replacements$i=replacements[i])||void 0===_replacements$i?void 0:_replacements$i.type)?pointer=append(getParent(pointer),fromFormat({...replacements[i],object:!0,isEditableTree:isEditableTree})):(pointer=append(getParent(pointer),fromFormat({type:"script",isEditableTree:isEditableTree})),append(pointer,{html:decodeURIComponent(replacements[i].attributes["data-rich-text-script"])})),pointer=append(getParent(pointer),"");else preserveWhiteSpace||"\n"!==character?isText(pointer)?appendText(pointer,character):pointer=append(getParent(pointer),character):(pointer=append(getParent(pointer),{type:"br",attributes:isEditableTree?{"data-rich-text-line-break":"true"}:void 0,object:!0}),pointer=append(getParent(pointer),""));onStartIndex&&start===i+1&&onStartIndex(tree,pointer),onEndIndex&&end===i+1&&onEndIndex(tree,pointer),shouldInsertPadding&&i===text.length&&(append(getParent(pointer),"\ufeff"),placeholder&&0===text.length&&append(getParent(pointer),{type:"span",attributes:{"data-rich-text-placeholder":placeholder,contenteditable:"false",style:"pointer-events:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;"}})),lastCharacterFormats=characterFormats,lastCharacter=character}else lastCharacterFormats=characterFormats,lastCharacter=character}return tree}function toHTMLString(_ref){let{value:value,multilineTag:multilineTag,preserveWhiteSpace:preserveWhiteSpace}=_ref;return createChildrenHTML(toTree({value:value,multilineTag:multilineTag,preserveWhiteSpace:preserveWhiteSpace,createEmpty:createEmpty,append:append,getLastChild:getLastChild,getParent:getParent,isText:isText,getText:getText,remove:to_html_string_remove,appendText:appendText}).children)}function createEmpty(){return{}}function getLastChild(_ref2){let{children:children}=_ref2;return children&&children[children.length-1]}function append(parent,object){return"string"==typeof object&&(object={text:object}),object.parent=parent,parent.children=parent.children||[],parent.children.push(object),object}function appendText(object,text){object.text+=text}function getParent(_ref3){let{parent:parent}=_ref3;return parent}function isText(_ref4){let{text:text}=_ref4;return"string"==typeof text}function getText(_ref5){let{text:text}=_ref5;return text}function to_html_string_remove(object){const index=object.parent.children.indexOf(object);return-1!==index&&object.parent.children.splice(index,1),object}function createElementHTML(_ref6){let{type:type,attributes:attributes,object:object,children:children}=_ref6,attributeString="";for(const key in attributes)(0,escape_html_build_module.$b)(key)&&(attributeString+=` ${key}="${(0,escape_html_build_module.kb)(attributes[key])}"`);return object?`<${type}${attributeString}>`:`<${type}${attributeString}>${createChildrenHTML(children)}</${type}>`}function createChildrenHTML(){let children=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return children.map((child=>void 0!==child.html?child.html:void 0===child.text?createElementHTML(child):(0,escape_html_build_module.N2)(child.text))).join("")}var a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js");function toggleFormat(value,format){return getActiveFormat(value,format.type)?(format.title&&(0,a11y_build_module.D)((0,i18n_build_module.gB)((0,i18n_build_module.__)("%s removed."),format.title),"assertive"),removeFormat(value,format.type)):(format.title&&(0,a11y_build_module.D)((0,i18n_build_module.gB)((0,i18n_build_module.__)("%s applied."),format.title),"assertive"),applyFormat(value,format))}var react=__webpack_require__("./node_modules/react/index.js");function useAnchor(_ref){let{editableContentElement:editableContentElement,value:value,settings:settings={}}=_ref;const{tagName:tagName,className:className,name:name}=settings,activeFormat=name?getActiveFormat(value,name):void 0;return(0,react.useMemo)((()=>{if(!editableContentElement)return;const{ownerDocument:{defaultView:defaultView}}=editableContentElement,selection=defaultView.getSelection();if(!selection.rangeCount)return;const selectionWithinEditableContentElement=null==editableContentElement?void 0:editableContentElement.contains(null==selection?void 0:selection.anchorNode),range=selection.getRangeAt(0);if(!activeFormat)return{ownerDocument:range.startContainer.ownerDocument,getBoundingClientRect:()=>selectionWithinEditableContentElement?range.getBoundingClientRect():editableContentElement.getBoundingClientRect()};let element=range.startContainer;for(element=element.nextElementSibling||element;element.nodeType!==element.ELEMENT_NODE;)element=element.parentNode;return element.closest(tagName+(className?"."+className:""))}),[editableContentElement,activeFormat,value.start,value.end,tagName,className])}var use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),use_ref_effect=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js");function createPathToNode(node,rootNode,path){const parentNode=node.parentNode;let i=0;for(;node=node.previousSibling;)i++;return path=[i,...path],parentNode!==rootNode&&(path=createPathToNode(parentNode,rootNode,path)),path}function getNodeByPath(node,path){for(path=[...path];node&&path.length>1;)node=node.childNodes[path.shift()];return{node:node,offset:path[0]}}function to_dom_append(element,child){"string"==typeof child&&(child=element.ownerDocument.createTextNode(child));const{type:type,attributes:attributes}=child;if(type){child=element.ownerDocument.createElement(type);for(const key in attributes)child.setAttribute(key,attributes[key])}return element.appendChild(child)}function to_dom_appendText(node,text){node.appendData(text)}function to_dom_getLastChild(_ref){let{lastChild:lastChild}=_ref;return lastChild}function to_dom_getParent(_ref2){let{parentNode:parentNode}=_ref2;return parentNode}function to_dom_isText(node){return node.nodeType===node.TEXT_NODE}function to_dom_getText(_ref3){let{nodeValue:nodeValue}=_ref3;return nodeValue}function to_dom_remove(node){return node.parentNode.removeChild(node)}function apply(_ref5){let{value:value,current:current,multilineTag:multilineTag,prepareEditableTree:prepareEditableTree,__unstableDomOnly:__unstableDomOnly,placeholder:placeholder}=_ref5;const{body:body,selection:selection}=function toDom(_ref4){let{value:value,multilineTag:multilineTag,prepareEditableTree:prepareEditableTree,isEditableTree:isEditableTree=!0,placeholder:placeholder,doc:doc=document}=_ref4,startPath=[],endPath=[];return prepareEditableTree&&(value={...value,formats:prepareEditableTree(value)}),{body:toTree({value:value,multilineTag:multilineTag,createEmpty:()=>createElement(doc,""),append:to_dom_append,getLastChild:to_dom_getLastChild,getParent:to_dom_getParent,isText:to_dom_isText,getText:to_dom_getText,remove:to_dom_remove,appendText:to_dom_appendText,onStartIndex(body,pointer){startPath=createPathToNode(pointer,body,[pointer.nodeValue.length])},onEndIndex(body,pointer){endPath=createPathToNode(pointer,body,[pointer.nodeValue.length])},isEditableTree:isEditableTree,placeholder:placeholder}),selection:{startPath:startPath,endPath:endPath}}}({value:value,multilineTag:multilineTag,prepareEditableTree:prepareEditableTree,placeholder:placeholder,doc:current.ownerDocument});applyValue(body,current),void 0===value.start||__unstableDomOnly||function applySelection(_ref6,current){let{startPath:startPath,endPath:endPath}=_ref6;const{node:startContainer,offset:startOffset}=getNodeByPath(current,startPath),{node:endContainer,offset:endOffset}=getNodeByPath(current,endPath),{ownerDocument:ownerDocument}=current,{defaultView:defaultView}=ownerDocument,selection=defaultView.getSelection(),range=ownerDocument.createRange();range.setStart(startContainer,startOffset),range.setEnd(endContainer,endOffset);const{activeElement:activeElement}=ownerDocument;if(selection.rangeCount>0){if(function isRangeEqual(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}(range,selection.getRangeAt(0)))return;selection.removeAllRanges()}selection.addRange(range),activeElement!==ownerDocument.activeElement&&activeElement instanceof defaultView.HTMLElement&&activeElement.focus()}(selection,current)}function applyValue(future,current){let futureChild,i=0;for(;futureChild=future.firstChild;){const currentChild=current.childNodes[i];if(currentChild)if(currentChild.isEqualNode(futureChild))future.removeChild(futureChild);else if(currentChild.nodeName!==futureChild.nodeName||currentChild.nodeType===currentChild.TEXT_NODE&&currentChild.data!==futureChild.data)current.replaceChild(futureChild,currentChild);else{const currentAttributes=currentChild.attributes,futureAttributes=futureChild.attributes;if(currentAttributes){let ii=currentAttributes.length;for(;ii--;){const{name:name}=currentAttributes[ii];futureChild.getAttribute(name)||currentChild.removeAttribute(name)}}if(futureAttributes)for(let ii=0;ii<futureAttributes.length;ii++){const{name:name,value:value}=futureAttributes[ii];currentChild.getAttribute(name)!==value&&currentChild.setAttribute(name,value)}applyValue(futureChild,currentChild),future.removeChild(futureChild)}else current.appendChild(futureChild);i++}for(;current.childNodes[i];)current.removeChild(current.childNodes[i])}function useBoundaryStyle(_ref){let{record:record}=_ref;const ref=(0,react.useRef)(),{activeFormats:activeFormats=[]}=record.current;return(0,react.useEffect)((()=>{if(!activeFormats||!activeFormats.length)return;const element=ref.current.querySelector("*[data-rich-text-format-boundary]");if(!element)return;const{ownerDocument:ownerDocument}=element,{defaultView:defaultView}=ownerDocument,style=`.rich-text:focus *[data-rich-text-format-boundary] {${`background-color: ${defaultView.getComputedStyle(element).color.replace(")",", 0.2)").replace("rgb","rgba")}`}}`;let globalStyle=ownerDocument.getElementById("rich-text-boundary-style");globalStyle||(globalStyle=ownerDocument.createElement("style"),globalStyle.id="rich-text-boundary-style",ownerDocument.head.appendChild(globalStyle)),globalStyle.innerHTML!==style&&(globalStyle.innerHTML=style)}),[activeFormats]),ref}function useCopyHandler(props){const propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{function onCopy(event){const{record:record,multilineTag:multilineTag,preserveWhiteSpace:preserveWhiteSpace}=propsRef.current;if(isCollapsed(record.current)||!element.contains(element.ownerDocument.activeElement))return;const selectedRecord=slice(record.current),plainText=getTextContent(selectedRecord),html=toHTMLString({value:selectedRecord,multilineTag:multilineTag,preserveWhiteSpace:preserveWhiteSpace});event.clipboardData.setData("text/plain",plainText),event.clipboardData.setData("text/html",html),event.clipboardData.setData("rich-text","true"),event.clipboardData.setData("rich-text-multi-line-tag",multilineTag||""),event.preventDefault()}return element.addEventListener("copy",onCopy),()=>{element.removeEventListener("copy",onCopy)}}),[])}var keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js");const EMPTY_ACTIVE_FORMATS=[];function useFormatBoundaries(props){const[,forceRender]=(0,react.useReducer)((()=>({}))),propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{function onKeyDown(event){const{keyCode:keyCode,shiftKey:shiftKey,altKey:altKey,metaKey:metaKey,ctrlKey:ctrlKey}=event;if(shiftKey||altKey||metaKey||ctrlKey||keyCode!==keycodes_build_module.RL&&keyCode!==keycodes_build_module.pX)return;const{record:record,applyRecord:applyRecord}=propsRef.current,{text:text,formats:formats,start:start,end:end,activeFormats:currentActiveFormats=[]}=record.current,collapsed=isCollapsed(record.current),{ownerDocument:ownerDocument}=element,{defaultView:defaultView}=ownerDocument,{direction:direction}=defaultView.getComputedStyle(element),reverseKey="rtl"===direction?keycodes_build_module.pX:keycodes_build_module.RL,isReverse=event.keyCode===reverseKey;if(collapsed&&0===currentActiveFormats.length){if(0===start&&isReverse)return;if(end===text.length&&!isReverse)return}if(!collapsed)return;const formatsBefore=formats[start-1]||EMPTY_ACTIVE_FORMATS,formatsAfter=formats[start]||EMPTY_ACTIVE_FORMATS,destination=isReverse?formatsBefore:formatsAfter,isIncreasing=currentActiveFormats.every(((format,index)=>format===destination[index]));let newActiveFormatsLength=currentActiveFormats.length;if(isIncreasing?newActiveFormatsLength<destination.length&&newActiveFormatsLength++:newActiveFormatsLength--,newActiveFormatsLength===currentActiveFormats.length)return void(record.current._newActiveFormats=destination);event.preventDefault();const newActiveFormats=(isIncreasing?destination:isReverse?formatsAfter:formatsBefore).slice(0,newActiveFormatsLength),newValue={...record.current,activeFormats:newActiveFormats};record.current=newValue,applyRecord(newValue),forceRender()}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}}),[])}const INSERTION_INPUT_TYPES_TO_IGNORE=new Set(["insertParagraph","insertOrderedList","insertUnorderedList","insertHorizontalRule","insertLink"]),use_input_and_selection_EMPTY_ACTIVE_FORMATS=[];function useInputAndSelection(props){const propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{const{ownerDocument:ownerDocument}=element,{defaultView:defaultView}=ownerDocument;let rafId,isComposing=!1;function onInput(event){if(isComposing)return;let inputType;event&&(inputType=event.inputType);const{record:record,applyRecord:applyRecord,createRecord:createRecord,handleChange:handleChange}=propsRef.current;if(inputType&&(0===inputType.indexOf("format")||INSERTION_INPUT_TYPES_TO_IGNORE.has(inputType)))return void applyRecord(record.current);const currentValue=createRecord(),{start:start,activeFormats:oldActiveFormats=[]}=record.current,change=function updateFormats(_ref){let{value:value,start:start,end:end,formats:formats}=_ref;const min=Math.min(start,end),max=Math.max(start,end),formatsBefore=value.formats[min-1]||[],formatsAfter=value.formats[max]||[];for(value.activeFormats=formats.map(((format,index)=>{if(formatsBefore[index]){if(isFormatEqual(format,formatsBefore[index]))return formatsBefore[index]}else if(formatsAfter[index]&&isFormatEqual(format,formatsAfter[index]))return formatsAfter[index];return format}));--end>=start;)value.activeFormats.length>0?value.formats[end]=value.activeFormats:delete value.formats[end];return value}({value:currentValue,start:start,end:currentValue.start,formats:oldActiveFormats});handleChange(change)}function handleSelectionChange(event){const{record:record,applyRecord:applyRecord,createRecord:createRecord,isSelected:isSelected,onSelectionChange:onSelectionChange}=propsRef.current;if("true"!==element.contentEditable)return;if(ownerDocument.activeElement!==element){if("true"!==ownerDocument.activeElement.contentEditable)return;if(!ownerDocument.activeElement.contains(element))return;const selection=defaultView.getSelection(),{anchorNode:anchorNode,focusNode:focusNode}=selection;if(element.contains(anchorNode)&&element!==anchorNode&&element.contains(focusNode)&&element!==focusNode){const{start:start,end:end}=createRecord();record.current.activeFormats=use_input_and_selection_EMPTY_ACTIVE_FORMATS,onSelectionChange(start,end)}else if(element.contains(anchorNode)&&element!==anchorNode){const{start:start,end:offset=start}=createRecord();record.current.activeFormats=use_input_and_selection_EMPTY_ACTIVE_FORMATS,onSelectionChange(offset)}else if(element.contains(focusNode)){const{start:start,end:offset=start}=createRecord();record.current.activeFormats=use_input_and_selection_EMPTY_ACTIVE_FORMATS,onSelectionChange(void 0,offset)}return}if("selectionchange"!==event.type&&!isSelected)return;if(isComposing)return;const{start:start,end:end,text:text}=createRecord(),oldRecord=record.current;if(text!==oldRecord.text)return void onInput();if(start===oldRecord.start&&end===oldRecord.end)return void(0===oldRecord.text.length&&0===start&&function fixPlaceholderSelection(defaultView){const selection=defaultView.getSelection(),{anchorNode:anchorNode,anchorOffset:anchorOffset}=selection;if(anchorNode.nodeType!==anchorNode.ELEMENT_NODE)return;const targetNode=anchorNode.childNodes[anchorOffset];targetNode&&targetNode.nodeType===targetNode.ELEMENT_NODE&&targetNode.hasAttribute("data-rich-text-placeholder")&&selection.collapseToStart()}(defaultView));const newValue={...oldRecord,start:start,end:end,activeFormats:oldRecord._newActiveFormats,_newActiveFormats:void 0},newActiveFormats=getActiveFormats(newValue,use_input_and_selection_EMPTY_ACTIVE_FORMATS);newValue.activeFormats=newActiveFormats,record.current=newValue,applyRecord(newValue,{domOnly:!0}),onSelectionChange(start,end)}function onCompositionStart(){var _element$querySelecto;isComposing=!0,ownerDocument.removeEventListener("selectionchange",handleSelectionChange),null===(_element$querySelecto=element.querySelector("[data-rich-text-placeholder]"))||void 0===_element$querySelecto||_element$querySelecto.remove()}function onCompositionEnd(){isComposing=!1,onInput({inputType:"insertText"}),ownerDocument.addEventListener("selectionchange",handleSelectionChange)}function onFocus(){const{record:record,isSelected:isSelected,onSelectionChange:onSelectionChange,applyRecord:applyRecord}=propsRef.current;if(!element.parentElement.closest('[contenteditable="true"]')){if(isSelected)applyRecord(record.current),onSelectionChange(record.current.start,record.current.end);else{const index=void 0;record.current={...record.current,start:index,end:index,activeFormats:use_input_and_selection_EMPTY_ACTIVE_FORMATS},onSelectionChange(index,index)}rafId=defaultView.requestAnimationFrame(handleSelectionChange)}}return element.addEventListener("input",onInput),element.addEventListener("compositionstart",onCompositionStart),element.addEventListener("compositionend",onCompositionEnd),element.addEventListener("focus",onFocus),element.addEventListener("keyup",handleSelectionChange),element.addEventListener("mouseup",handleSelectionChange),element.addEventListener("touchend",handleSelectionChange),ownerDocument.addEventListener("selectionchange",handleSelectionChange),()=>{element.removeEventListener("input",onInput),element.removeEventListener("compositionstart",onCompositionStart),element.removeEventListener("compositionend",onCompositionEnd),element.removeEventListener("focus",onFocus),element.removeEventListener("keyup",handleSelectionChange),element.removeEventListener("mouseup",handleSelectionChange),element.removeEventListener("touchend",handleSelectionChange),ownerDocument.removeEventListener("selectionchange",handleSelectionChange),defaultView.cancelAnimationFrame(rafId)}}),[])}function removeLineSeparator(value){let backward=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{replacements:replacements,text:text,start:start,end:end}=value,collapsed=isCollapsed(value);let newValue,index=start-1,removeStart=collapsed?start-1:start,removeEnd=end;if(backward||(index=end,removeStart=start,removeEnd=collapsed?end+1:end),text[index]===LINE_SEPARATOR){if(collapsed&&replacements[index]&&replacements[index].length){const newReplacements=replacements.slice();newReplacements[index]=replacements[index].slice(0,-1),newValue={...value,replacements:newReplacements}}else newValue=remove(value,removeStart,removeEnd);return newValue}}function useDelete(props){const propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{function onKeyDown(event){const{keyCode:keyCode}=event,{createRecord:createRecord,handleChange:handleChange,multilineTag:multilineTag}=propsRef.current;if(event.defaultPrevented)return;if(keyCode!==keycodes_build_module.yY&&keyCode!==keycodes_build_module.ZH)return;const currentValue=createRecord(),{start:start,end:end,text:text}=currentValue,isReverse=keyCode===keycodes_build_module.ZH;if(0===start&&0!==end&&end===text.length)return handleChange(remove(currentValue)),void event.preventDefault();if(multilineTag){let newValue;newValue=isReverse&&0===currentValue.start&&0===currentValue.end&&isEmptyLine(currentValue)?removeLineSeparator(currentValue,!isReverse):removeLineSeparator(currentValue,isReverse),newValue&&(handleChange(newValue),event.preventDefault())}}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}}),[])}function useRichText(_ref){let{value:value="",selectionStart:selectionStart,selectionEnd:selectionEnd,placeholder:placeholder,preserveWhiteSpace:preserveWhiteSpace,onSelectionChange:onSelectionChange,onChange:onChange,__unstableMultilineTag:multilineTag,__unstableDisableFormats:disableFormats,__unstableIsSelected:isSelected,__unstableDependencies:__unstableDependencies=[],__unstableAfterParse:__unstableAfterParse,__unstableBeforeSerialize:__unstableBeforeSerialize,__unstableAddInvisibleFormats:__unstableAddInvisibleFormats}=_ref;const registry=(0,use_registry.Z)(),[,forceRender]=(0,react.useReducer)((()=>({}))),ref=(0,react.useRef)();function createRecord(){const{ownerDocument:{defaultView:defaultView}}=ref.current,selection=defaultView.getSelection(),range=selection.rangeCount>0?selection.getRangeAt(0):null;return create_create({element:ref.current,range:range,multilineTag:multilineTag,multilineWrapperTags:"li"===multilineTag?["ul","ol"]:void 0,__unstableIsEditableTree:!0,preserveWhiteSpace:preserveWhiteSpace})}function applyRecord(newRecord){let{domOnly:domOnly}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};apply({value:newRecord,current:ref.current,multilineTag:multilineTag,multilineWrapperTags:"li"===multilineTag?["ul","ol"]:void 0,prepareEditableTree:__unstableAddInvisibleFormats,__unstableDomOnly:domOnly,placeholder:placeholder})}const _value=(0,react.useRef)(value),record=(0,react.useRef)();function setRecordFromProps(){_value.current=value,record.current=create_create({html:value,multilineTag:multilineTag,multilineWrapperTags:"li"===multilineTag?["ul","ol"]:void 0,preserveWhiteSpace:preserveWhiteSpace}),disableFormats&&(record.current.formats=Array(value.length),record.current.replacements=Array(value.length)),__unstableAfterParse&&(record.current.formats=__unstableAfterParse(record.current)),record.current.start=selectionStart,record.current.end=selectionEnd}const hadSelectionUpdate=(0,react.useRef)(!1);if(record.current)selectionStart===record.current.start&&selectionEnd===record.current.end||(hadSelectionUpdate.current=isSelected,record.current={...record.current,start:selectionStart,end:selectionEnd});else{var _record$current,_record$current$forma,_record$current$forma2;setRecordFromProps();"core/text-color"===(null===(_record$current=record.current)||void 0===_record$current||null===(_record$current$forma=_record$current.formats[0])||void 0===_record$current$forma||null===(_record$current$forma2=_record$current$forma[0])||void 0===_record$current$forma2?void 0:_record$current$forma2.type)&&function handleChangesUponInit(newRecord){record.current=newRecord,_value.current=toHTMLString({value:__unstableBeforeSerialize?{...newRecord,formats:__unstableBeforeSerialize(newRecord)}:newRecord,multilineTag:multilineTag,preserveWhiteSpace:preserveWhiteSpace});const{formats:formats,text:text}=newRecord;registry.batch((()=>{onChange(_value.current,{__unstableFormats:formats,__unstableText:text})})),forceRender()}(record.current)}function handleChange(newRecord){record.current=newRecord,applyRecord(newRecord),_value.current=disableFormats?newRecord.text:toHTMLString({value:__unstableBeforeSerialize?{...newRecord,formats:__unstableBeforeSerialize(newRecord)}:newRecord,multilineTag:multilineTag,preserveWhiteSpace:preserveWhiteSpace});const{start:start,end:end,formats:formats,text:text}=newRecord;registry.batch((()=>{onSelectionChange(start,end),onChange(_value.current,{__unstableFormats:formats,__unstableText:text})})),forceRender()}function applyFromProps(){setRecordFromProps(),applyRecord(record.current)}const didMount=(0,react.useRef)(!1);(0,react.useLayoutEffect)((()=>{didMount.current&&value!==_value.current&&(applyFromProps(),forceRender())}),[value]),(0,react.useLayoutEffect)((()=>{hadSelectionUpdate.current&&(ref.current.ownerDocument.activeElement!==ref.current&&ref.current.focus(),applyFromProps(),hadSelectionUpdate.current=!1)}),[hadSelectionUpdate.current]);const mergedRefs=(0,use_merge_refs.Z)([ref,(0,react.useCallback)((element=>{element&&(element.style.whiteSpace="pre-wrap",element.style.minWidth="1px")}),[]),useBoundaryStyle({record:record}),useCopyHandler({record:record,multilineTag:multilineTag,preserveWhiteSpace:preserveWhiteSpace}),(0,use_ref_effect.Z)((element=>{function onClick(event){const{target:target}=event;if(target===element||target.textContent)return;const{ownerDocument:ownerDocument}=target,{defaultView:defaultView}=ownerDocument,range=ownerDocument.createRange(),selection=defaultView.getSelection();range.selectNode(target),selection.removeAllRanges(),selection.addRange(range)}return element.addEventListener("click",onClick),()=>{element.removeEventListener("click",onClick)}}),[]),useFormatBoundaries({record:record,applyRecord:applyRecord}),useDelete({createRecord:createRecord,handleChange:handleChange,multilineTag:multilineTag}),useInputAndSelection({record:record,applyRecord:applyRecord,createRecord:createRecord,handleChange:handleChange,isSelected:isSelected,onSelectionChange:onSelectionChange}),(0,use_ref_effect.Z)((()=>{applyFromProps(),didMount.current=!0}),[placeholder,...__unstableDependencies])]);return{value:record.current,onChange:handleChange,ref:mergedRefs}}},"./packages/shortcode/build-module/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{lp:function(){return next},kd:function(){return regexp}});var memize__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/memize/index.js");function next(tag,text){let index=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const re=regexp(tag);re.lastIndex=index;const match=re.exec(text);if(!match)return;if("["===match[1]&&"]"===match[7])return next(tag,text,re.lastIndex);const result={index:match.index,content:match[0],shortcode:fromMatch(match)};return match[1]&&(result.content=result.content.slice(1),result.index++),match[7]&&(result.content=result.content.slice(0,-1)),result}function regexp(tag){return new RegExp("\\[(\\[?)("+tag+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)","g")}const attrs=__webpack_require__.n(memize__WEBPACK_IMPORTED_MODULE_0__)()((text=>{const named={},numeric=[],pattern=/([\w-]+)\s*=\s*"([^"]*)"(?:\s|$)|([\w-]+)\s*=\s*'([^']*)'(?:\s|$)|([\w-]+)\s*=\s*([^\s'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|'([^']*)'(?:\s|$)|(\S+)(?:\s|$)/g;let match;for(text=text.replace(/[\u00a0\u200b]/g," ");match=pattern.exec(text);)match[1]?named[match[1].toLowerCase()]=match[2]:match[3]?named[match[3].toLowerCase()]=match[4]:match[5]?named[match[5].toLowerCase()]=match[6]:match[7]?numeric.push(match[7]):match[8]?numeric.push(match[8]):match[9]&&numeric.push(match[9]);return{named:named,numeric:numeric}}));function fromMatch(match){let type;return type=match[4]?"self-closing":match[6]?"closed":"single",new shortcode({tag:match[2],attrs:match[3],type:type,content:match[5]})}const shortcode=Object.assign((function(options){const{tag:tag,attrs:attributes,type:type,content:content}=options||{};if(Object.assign(this,{tag:tag,type:type,content:content}),this.attrs={named:{},numeric:[]},!attributes)return;const attributeTypes=["named","numeric"];"string"==typeof attributes?this.attrs=attrs(attributes):attributes.length===attributeTypes.length&&attributeTypes.every(((t,key)=>t===attributes[key]))?this.attrs=attributes:Object.entries(attributes).forEach((_ref=>{let[key,value]=_ref;this.set(key,value)}))}),{next:next,replace:function replace(tag,text,callback){return text.replace(regexp(tag),(function(match,left,$3,attrs,slash,content,closing,right){if("["===left&&"]"===right)return match;const result=callback(fromMatch(arguments));return result||""===result?left+result+right:match}))},string:function string(options){return new shortcode(options).string()},regexp:regexp,attrs:attrs,fromMatch:fromMatch});Object.assign(shortcode.prototype,{get(attr){return this.attrs["number"==typeof attr?"numeric":"named"][attr]},set(attr,value){return this.attrs["number"==typeof attr?"numeric":"named"][attr]=value,this},string(){let text="["+this.tag;return this.attrs.numeric.forEach((value=>{/\s/.test(value)?text+=' "'+value+'"':text+=" "+value})),Object.entries(this.attrs.named).forEach((_ref2=>{let[name,value]=_ref2;text+=" "+name+'="'+value+'"'})),"single"===this.type?text+"]":"self-closing"===this.type?text+" /]":(text+="]",this.content&&(text+=this.content),text+"[/"+this.tag+"]")}})}}]);